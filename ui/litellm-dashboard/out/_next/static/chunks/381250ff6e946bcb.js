(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,936190,e=>{"use strict";var t,s,a=e.i(843476),l=e.i(619273),r=e.i(266027),n=e.i(912598),i=e.i(166540),o=e.i(271645),d=e.i(592968);let c=e=>e>=.8?"text-green-600":"text-yellow-600",m=({entities:e})=>{let[t,s]=(0,o.useState)(!0),[l,r]=(0,o.useState)({});return e&&0!==e.length?(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2 cursor-pointer",onClick:()=>s(!t),children:[(0,a.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${t?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,a.jsxs)("h4",{className:"font-medium",children:["Detected Entities (",e.length,")"]})]}),t&&(0,a.jsx)("div",{className:"space-y-2",children:e.map((e,t)=>{let s=l[t]||!1;return(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>{r(e=>({...e,[t]:!e[t]}))},children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${s?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,a.jsx)("span",{className:"font-medium mr-2",children:e.entity_type}),(0,a.jsxs)("span",{className:`font-mono ${c(e.score)}`,children:["Score: ",e.score.toFixed(2)]})]}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["Position: ",e.start,"-",e.end]})]}),s&&(0,a.jsx)("div",{className:"p-3 border-t bg-white",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Entity Type:"}),(0,a.jsx)("span",{children:e.entity_type})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Position:"}),(0,a.jsxs)("span",{children:["Characters ",e.start,"-",e.end]})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Confidence:"}),(0,a.jsx)("span",{className:c(e.score),children:e.score.toFixed(2)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.recognition_metadata&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Recognizer:"}),(0,a.jsx)("span",{children:e.recognition_metadata.recognizer_name})]}),(0,a.jsxs)("div",{className:"flex overflow-hidden",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Identifier:"}),(0,a.jsx)("span",{className:"truncate text-xs font-mono",children:e.recognition_metadata.recognizer_identifier})]})]}),e.analysis_explanation&&(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Explanation:"}),(0,a.jsx)("span",{children:e.analysis_explanation})]})]})]})})]},t)})})]}):null},x=(e,t="slate")=>(0,a.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block ${{green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",blue:"bg-blue-50 text-blue-700",slate:"bg-slate-100 text-slate-800",amber:"bg-amber-100 text-amber-800"}[t]}`,children:e}),u=e=>e?x("detected","red"):x("not detected","slate"),p=({title:e,count:t,defaultOpen:s=!0,right:l,children:r})=>{let[n,i]=(0,o.useState)(s);return(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>i(e=>!e),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${n?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,a.jsxs)("h5",{className:"font-medium",children:[e," ","number"==typeof t&&(0,a.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",t,")"]})]})]}),(0,a.jsx)("div",{children:l})]}),n&&(0,a.jsx)("div",{className:"p-3 border-t bg-white",children:r})]})},h=({label:e,children:t,mono:s})=>(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:e}),(0,a.jsx)("span",{className:s?"font-mono text-sm break-all":"",children:t})]}),g=()=>(0,a.jsx)("div",{className:"my-3 border-t"}),f=({response:e})=>{if(!e)return null;let t=e.outputs??e.output??[],s="GUARDRAIL_INTERVENED"===e.action?"red":"green",l=(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.guardrailCoverage?.textCharacters&&x(`text guarded ${e.guardrailCoverage.textCharacters.guarded??0}/${e.guardrailCoverage.textCharacters.total??0}`,"blue"),e.guardrailCoverage?.images&&x(`images guarded ${e.guardrailCoverage.images.guarded??0}/${e.guardrailCoverage.images.total??0}`,"blue")]}),r=e.usage&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.usage).map(([e,t])=>"number"==typeof t?(0,a.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 rounded-md text-xs font-medium",children:[e,": ",t]},e):null)});return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h,{label:"Action:",children:x(e.action??"N/A",s)}),e.actionReason&&(0,a.jsx)(h,{label:"Action Reason:",children:e.actionReason}),e.blockedResponse&&(0,a.jsx)(h,{label:"Blocked Response:",children:(0,a.jsx)("span",{className:"italic",children:e.blockedResponse})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h,{label:"Coverage:",children:l}),(0,a.jsx)(h,{label:"Usage:",children:r})]})]}),t.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{}),(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Outputs"}),(0,a.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,a.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:e.text??(0,a.jsx)("em",{children:"(non-text output)"})})},t))})]})]}),e.assessments?.length?(0,a.jsx)("div",{className:"space-y-3",children:e.assessments.map((e,t)=>{let s=(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.wordPolicy&&x("word","slate"),e.contentPolicy&&x("content","slate"),e.topicPolicy&&x("topic","slate"),e.sensitiveInformationPolicy&&x("sensitive-info","slate"),e.contextualGroundingPolicy&&x("contextual-grounding","slate"),e.automatedReasoningPolicy&&x("automated-reasoning","slate")]});return(0,a.jsxs)(p,{title:`Assessment #${t+1}`,defaultOpen:!0,right:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.invocationMetrics?.guardrailProcessingLatency!=null&&x(`${e.invocationMetrics.guardrailProcessingLatency} ms`,"amber"),s]}),children:[e.wordPolicy&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"font-medium mb-2",children:"Word Policy"}),(e.wordPolicy.customWords?.length??0)>0&&(0,a.jsx)(p,{title:"Custom Words",defaultOpen:!0,children:(0,a.jsx)("div",{className:"space-y-2",children:e.wordPolicy.customWords.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[x(e.action??"N/A",e.detected?"red":"slate"),(0,a.jsx)("span",{className:"font-mono text-sm break-all",children:e.match})]}),u(e.detected)]},t))})}),(e.wordPolicy.managedWordLists?.length??0)>0&&(0,a.jsx)(p,{title:"Managed Word Lists",defaultOpen:!1,children:(0,a.jsx)("div",{className:"space-y-2",children:e.wordPolicy.managedWordLists.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[x(e.action??"N/A",e.detected?"red":"slate"),(0,a.jsx)("span",{className:"font-mono text-sm break-all",children:e.match}),e.type&&x(e.type,"slate")]}),u(e.detected)]},t))})})]}),e.contentPolicy?.filters?.length?(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"font-medium mb-2",children:"Content Policy"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,a.jsx)("th",{className:"py-1 pr-4",children:"Type"}),(0,a.jsx)("th",{className:"py-1 pr-4",children:"Action"}),(0,a.jsx)("th",{className:"py-1 pr-4",children:"Detected"}),(0,a.jsx)("th",{className:"py-1 pr-4",children:"Strength"}),(0,a.jsx)("th",{className:"py-1 pr-4",children:"Confidence"})]})}),(0,a.jsx)("tbody",{children:e.contentPolicy.filters.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"py-1 pr-4",children:e.type??"â€”"}),(0,a.jsx)("td",{className:"py-1 pr-4",children:x(e.action??"â€”",e.detected?"red":"slate")}),(0,a.jsx)("td",{className:"py-1 pr-4",children:u(e.detected)}),(0,a.jsx)("td",{className:"py-1 pr-4",children:e.filterStrength??"â€”"}),(0,a.jsx)("td",{className:"py-1 pr-4",children:e.confidence??"â€”"})]},t))})]})})]}):null,e.contextualGroundingPolicy?.filters?.length?(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"font-medium mb-2",children:"Contextual Grounding"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,a.jsx)("th",{className:"py-1 pr-4",children:"Type"}),(0,a.jsx)("th",{className:"py-1 pr-4",children:"Action"}),(0,a.jsx)("th",{className:"py-1 pr-4",children:"Detected"}),(0,a.jsx)("th",{className:"py-1 pr-4",children:"Score"}),(0,a.jsx)("th",{className:"py-1 pr-4",children:"Threshold"})]})}),(0,a.jsx)("tbody",{children:e.contextualGroundingPolicy.filters.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{className:"py-1 pr-4",children:e.type??"â€”"}),(0,a.jsx)("td",{className:"py-1 pr-4",children:x(e.action??"â€”",e.detected?"red":"slate")}),(0,a.jsx)("td",{className:"py-1 pr-4",children:u(e.detected)}),(0,a.jsx)("td",{className:"py-1 pr-4",children:e.score??"â€”"}),(0,a.jsx)("td",{className:"py-1 pr-4",children:e.threshold??"â€”"})]},t))})]})})]}):null,e.sensitiveInformationPolicy&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"font-medium mb-2",children:"Sensitive Information"}),(e.sensitiveInformationPolicy.piiEntities?.length??0)>0&&(0,a.jsx)(p,{title:"PII Entities",defaultOpen:!0,children:(0,a.jsx)("div",{className:"space-y-2",children:e.sensitiveInformationPolicy.piiEntities.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[x(e.action??"N/A",e.detected?"red":"slate"),e.type&&x(e.type,"slate"),(0,a.jsx)("span",{className:"font-mono text-xs break-all",children:e.match})]}),u(e.detected)]},t))})}),(e.sensitiveInformationPolicy.regexes?.length??0)>0&&(0,a.jsx)(p,{title:"Custom Regexes",defaultOpen:!1,children:(0,a.jsx)("div",{className:"space-y-2",children:e.sensitiveInformationPolicy.regexes.map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-2 bg-gray-50 rounded gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[x(e.action??"N/A",e.detected?"red":"slate"),(0,a.jsx)("span",{className:"font-medium",children:e.name??"regex"}),(0,a.jsx)("span",{className:"font-mono text-xs break-all",children:e.regex})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[u(e.detected),e.match&&(0,a.jsx)("span",{className:"font-mono text-xs break-all",children:e.match})]})]},t))})})]}),e.topicPolicy?.topics?.length?(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h6",{className:"font-medium mb-2",children:"Topic Policy"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.topicPolicy.topics.map((e,t)=>(0,a.jsx)("div",{className:"px-3 py-1.5 bg-gray-50 rounded-md text-xs",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[x(e.action??"N/A",e.detected?"red":"slate"),(0,a.jsx)("span",{className:"font-medium",children:e.name??"topic"}),e.type&&x(e.type,"slate"),u(e.detected)]})},t))})]}):null,e.invocationMetrics&&(0,a.jsx)(p,{title:"Invocation Metrics",defaultOpen:!1,children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h,{label:"Latency (ms)",children:e.invocationMetrics.guardrailProcessingLatency??"â€”"}),(0,a.jsx)(h,{label:"Coverage:",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.invocationMetrics.guardrailCoverage?.textCharacters&&x(`text ${e.invocationMetrics.guardrailCoverage.textCharacters.guarded??0}/${e.invocationMetrics.guardrailCoverage.textCharacters.total??0}`,"blue"),e.invocationMetrics.guardrailCoverage?.images&&x(`images ${e.invocationMetrics.guardrailCoverage.images.guarded??0}/${e.invocationMetrics.guardrailCoverage.images.total??0}`,"blue")]})})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)(h,{label:"Usage:",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.invocationMetrics.usage&&Object.entries(e.invocationMetrics.usage).map(([e,t])=>"number"==typeof t?(0,a.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 rounded-md text-xs font-medium",children:[e,": ",t]},e):null)})})})]})}),e.automatedReasoningPolicy?.findings?.length?(0,a.jsx)(p,{title:"Automated Reasoning Findings",defaultOpen:!1,children:(0,a.jsx)("div",{className:"space-y-2",children:e.automatedReasoningPolicy.findings.map((e,t)=>(0,a.jsx)("pre",{className:"bg-gray-50 rounded p-2 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)},t))})}):null]},t)})}):null,(0,a.jsx)(p,{title:"Raw Bedrock Guardrail Response",defaultOpen:!1,children:(0,a.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)})})]})},y=(e,t="slate")=>(0,a.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block ${{green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",blue:"bg-blue-50 text-blue-700",slate:"bg-slate-100 text-slate-800",amber:"bg-amber-100 text-amber-800"}[t]}`,children:e}),j=({title:e,count:t,defaultOpen:s=!0,children:l})=>{let[r,n]=(0,o.useState)(s);return(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>n(e=>!e),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${r?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,a.jsxs)("h5",{className:"font-medium",children:[e," ","number"==typeof t&&(0,a.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",t,")"]})]})]})}),r&&(0,a.jsx)("div",{className:"p-3 border-t bg-white",children:l})]})},b=({label:e,children:t,mono:s})=>(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:e}),(0,a.jsx)("span",{className:s?"font-mono text-sm break-all":"",children:t})]}),v=({response:e})=>{if(!e||"string"==typeof e)return"string"==typeof e&&e?(0,a.jsx)("div",{className:"bg-white rounded-lg border border-red-200 p-4",children:(0,a.jsxs)("div",{className:"text-red-800",children:[(0,a.jsx)("h5",{className:"font-medium mb-2",children:"Error"}),(0,a.jsx)("p",{className:"text-sm",children:e})]})}):null;let t=Array.isArray(e)?e:[];if(0===t.length)return(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,a.jsx)("div",{className:"text-gray-600 text-sm",children:"No detections found"})});let s=t.filter(e=>"pattern"===e.type),l=t.filter(e=>"blocked_word"===e.type),r=t.filter(e=>"category_keyword"===e.type),n=t.filter(e=>"BLOCK"===e.action).length,i=t.filter(e=>"MASK"===e.action).length,o=t.length;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b,{label:"Total Detections:",children:(0,a.jsx)("span",{className:"font-semibold",children:o})}),(0,a.jsx)(b,{label:"Actions:",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[n>0&&y(`${n} blocked`,"red"),i>0&&y(`${i} masked`,"blue"),0===n&&0===i&&y("passed","green")]})})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsx)(b,{label:"By Type:",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[s.length>0&&y(`${s.length} patterns`,"slate"),l.length>0&&y(`${l.length} keywords`,"slate"),r.length>0&&y(`${r.length} categories`,"slate")]})})})]})}),s.length>0&&(0,a.jsx)(j,{title:"Patterns Matched",count:s.length,defaultOpen:!0,children:(0,a.jsx)("div",{className:"space-y-2",children:s.map((e,t)=>(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)(b,{label:"Pattern:",children:e.pattern_name||"unknown"})}),(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)(b,{label:"Action:",children:y(e.action,"BLOCK"===e.action?"red":"blue")})})]})},t))})}),l.length>0&&(0,a.jsx)(j,{title:"Blocked Words Detected",count:l.length,defaultOpen:!0,children:(0,a.jsx)("div",{className:"space-y-2",children:l.map((e,t)=>(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(b,{label:"Keyword:",mono:!0,children:e.keyword||"unknown"}),e.description&&(0,a.jsx)(b,{label:"Description:",children:e.description})]}),(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)(b,{label:"Action:",children:y(e.action,"BLOCK"===e.action?"red":"blue")})})]})},t))})}),r.length>0&&(0,a.jsx)(j,{title:"Category Keywords Detected",count:r.length,defaultOpen:!0,children:(0,a.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(b,{label:"Category:",children:e.category||"unknown"}),(0,a.jsx)(b,{label:"Keyword:",mono:!0,children:e.keyword||"unknown"}),e.severity&&(0,a.jsx)(b,{label:"Severity:",children:y(e.severity,"high"===e.severity?"red":"medium"===e.severity?"amber":"slate")})]}),(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)(b,{label:"Action:",children:y(e.action,"BLOCK"===e.action?"red":"blue")})})]})},t))})}),(0,a.jsx)(j,{title:"Raw Detection Data",defaultOpen:!1,children:(0,a.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(t,null,2)})})]})},N=()=>(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:"#16A34A",strokeWidth:"1.5",fill:"#F0FDF4"}),(0,a.jsx)("path",{d:"M5 8l2 2 4-4",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),_=()=>(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,a.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:"#DC2626",strokeWidth:"1.5",fill:"#FEF2F2"}),(0,a.jsx)("path",{d:"M6 6l4 4M10 6l-4 4",stroke:"#DC2626",strokeWidth:"1.5",strokeLinecap:"round"})]}),w=()=>(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:"animate-spin",children:[(0,a.jsx)("circle",{cx:"8",cy:"8",r:"6",stroke:"#D1D5DB",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M8 2a6 6 0 0 1 6 6",stroke:"#6366F1",strokeWidth:"2",strokeLinecap:"round"})]}),k=({title:e,data:t,loading:s,error:l})=>{let[r,n]=(0,o.useState)(!1);return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>n(!r),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s?(0,a.jsx)(w,{}):l?(0,a.jsx)(d.Tooltip,{title:l,children:(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"--"})}):t?.compliant?(0,a.jsx)(N,{}):(0,a.jsx)(_,{}),(0,a.jsx)("span",{className:"font-medium text-sm text-gray-900",children:e})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!s&&!l&&t&&(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-semibold uppercase ${t.compliant?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:t.compliant?"COMPLIANT":"NON-COMPLIANT"}),l&&(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[11px] font-medium bg-gray-100 text-gray-500 border border-gray-200",children:"UNAVAILABLE"}),(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:`transition-transform ${r?"rotate-180":""}`,children:(0,a.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),r&&(0,a.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3",children:[s&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Checking compliance..."}),l&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:l}),t&&(0,a.jsx)("div",{className:"space-y-2",children:t.checks.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:e.passed?(0,a.jsx)(N,{}):(0,a.jsx)(_,{})}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.check_name}),(0,a.jsx)("span",{className:"text-[10px] font-mono text-gray-400",children:e.article})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.detail})]})]},t))})]})]})},S=({accessToken:e,logEntry:t})=>{let{euAiAct:s,gdpr:l}=(0,o.useMemo)(()=>{let e,s,a,l,r,n,i,o,d,c,m,x;return s=(e=t.metadata?.guardrail_information??[]).length>0,l=(a=e.filter(e=>"pre_call"===e.guardrail_mode||!e.guardrail_mode)).length>0,r=!!t.user,n=!!t.model,i=!!t.startTime,o=r&&n&&i&&s,d=[],r||d.push("user_id"),n||d.push("model"),i||d.push("timestamp"),s||d.push("guardrail_results"),c=a.some(e=>["guardrail_intervened","failed","blocked"].includes(e.guardrail_status??"")),m=a.length>0&&a.every(e=>"success"===e.guardrail_status),x=c||m,{euAiAct:{regulation:"EU AI Act",compliant:s&&l&&o,checks:[{check_name:"Guardrails applied",article:"Art. 9",passed:s,detail:s?`${e.length} guardrail(s) applied`:"No guardrails applied"},{check_name:"Content screened before LLM",article:"Art. 5",passed:l,detail:l?`${a.length} pre-call guardrail(s) screened content`:"No pre-call screening applied"},{check_name:"Audit record complete",article:"Art. 12",passed:o,detail:o?"All required audit fields present":`Missing: ${d.join(", ")}`}]},gdpr:{regulation:"GDPR",compliant:l&&x&&o,checks:[{check_name:"Data protection applied",article:"Art. 32",passed:l,detail:l?`${a.length} pre-call guardrail(s) protect data`:"No pre-call data protection applied"},{check_name:"Sensitive data protected",article:"Art. 5(1)(c)",passed:x,detail:c?"Guardrail intervened to protect sensitive data":m?"No sensitive data detected":"No pre-call guardrails to protect sensitive data"},{check_name:"Audit record complete",article:"Art. 30",passed:o,detail:o?"All required audit fields present":`Missing: ${d.join(", ")}`}]}}},[t]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Regulatory Compliance"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(k,{title:"EU AI Act",data:s,loading:!1,error:null}),(0,a.jsx)(k,{title:"GDPR",data:l,loading:!1,error:null})]})]})},C=new Set(["presidio","bedrock","litellm_content_filter"]),T=e=>Object.values(e.masked_entity_count||{}).reduce((e,t)=>e+("number"==typeof t?t:0),0),L=e=>"success"===(e.guardrail_status??"").toLowerCase(),M=e=>e.policy_template||e.guardrail_name,D=()=>(0,a.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,a.jsx)("circle",{cx:"20",cy:"20",r:"20",fill:"#EEF2FF"}),(0,a.jsx)("path",{d:"M20 10l8 4v6c0 5.25-3.4 10.15-8 11.5C15.4 30.15 12 25.25 12 20v-6l8-4z",stroke:"#6366F1",strokeWidth:"1.5",fill:"none"}),(0,a.jsx)("path",{d:"M16 20l3 3 5-6",stroke:"#6366F1",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),z=({className:e})=>(0,a.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",className:e,children:[(0,a.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#16A34A",strokeWidth:"1.5",fill:"#F0FDF4"}),(0,a.jsx)("path",{d:"M7 11l3 3 5-6",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),A=({className:e})=>(0,a.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",className:e,children:[(0,a.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#DC2626",strokeWidth:"1.5",fill:"#FEF2F2"}),(0,a.jsx)("path",{d:"M8 8l6 6M14 8l-6 6",stroke:"#DC2626",strokeWidth:"1.5",strokeLinecap:"round"})]}),E=()=>(0,a.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:[(0,a.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#3B82F6",strokeWidth:"1.5",fill:"#EFF6FF"}),(0,a.jsx)("path",{d:"M9 7.5l6 3.5-6 3.5V7.5z",fill:"#3B82F6"})]}),I=()=>(0,a.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:(0,a.jsx)("circle",{cx:"11",cy:"11",r:"5",fill:"#9CA3AF"})}),R=({expanded:e})=>(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:`transition-transform ${e?"rotate-180":""}`,children:(0,a.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),O=()=>(0,a.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,a.jsx)("path",{d:"M8 2v8m0 0l-3-3m3 3l3-3M3 12h10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),B=({matchDetails:e})=>e&&0!==e.length?(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("h5",{className:"text-sm font-medium mb-2 text-gray-700",children:["Match Details (",e.length,")"]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b text-left text-gray-500",children:[(0,a.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Type"}),(0,a.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Method"}),(0,a.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Action"}),(0,a.jsx)("th",{className:"pb-2 font-medium",children:"Detail"})]})}),(0,a.jsx)("tbody",{children:e.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,a.jsx)("td",{className:"py-2 pr-4",children:e.type}),(0,a.jsx)("td",{className:"py-2 pr-4",children:(0,a.jsx)("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-700 rounded text-xs",children:e.detection_method??"-"})}),(0,a.jsx)("td",{className:"py-2 pr-4",children:(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${"BLOCK"===e.action_taken?"bg-red-100 text-red-800":"bg-blue-50 text-blue-700"}`,children:e.action_taken??"-"})}),(0,a.jsxs)("td",{className:"py-2 font-mono text-xs text-gray-600 break-all",children:[e.category?`[${e.category}] `:"",e.snippet??"-"]})]},t))})]})})]}):null,F=({response:e})=>{let[t,s]=(0,o.useState)(!1);return(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>s(!t),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(R,{expanded:t}),(0,a.jsx)("h5",{className:"font-medium text-sm ml-1",children:"Raw Guardrail Response"})]})}),t&&(0,a.jsx)("div",{className:"p-3 border-t bg-white",children:(0,a.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)})})]})})},$=({entries:e})=>{let t=(0,o.useMemo)(()=>[...e].sort((e,t)=>(e.start_time??0)-(t.start_time??0)),[e]),s=(0,o.useMemo)(()=>{if(0===t.length)return[];let e=t[0].start_time,s=[];s.push({type:"request",label:"Request received",offsetMs:0});let a=t.filter(e=>"pre_call"===e.guardrail_mode),l=t.filter(e=>"post_call"===e.guardrail_mode||"logging_only"===e.guardrail_mode),r=t.filter(e=>"during_call"===e.guardrail_mode);for(let t of a){let a=Math.round((t.end_time-e)*1e3);s.push({type:"guardrail",label:`Pre-call guardrail: ${M(t)}`,offsetMs:a,status:L(t)?"PASSED":"FAILED",isSuccess:L(t)})}let n=a.length>0?Math.max(...a.map(e=>e.end_time)):e,i=Math.round((((l.length>0?Math.min(...l.map(e=>e.start_time)):void 0)??n+1)-e)*1e3);for(let t of(s.push({type:"llm",label:"LLM call",offsetMs:i}),r)){let a=Math.round((t.end_time-e)*1e3);s.push({type:"guardrail",label:`During-call guardrail: ${M(t)}`,offsetMs:a,status:L(t)?"PASSED":"FAILED",isSuccess:L(t)})}for(let t of l){let a=Math.round((t.end_time-e)*1e3);s.push({type:"guardrail",label:`Post-call guardrail: ${M(t)}`,offsetMs:a,status:L(t)?"PASSED":"FAILED",isSuccess:L(t)})}let o=Math.round((Math.max(...t.map(e=>e.end_time))-e)*1e3)+1;return s.push({type:"response",label:"Response returned",offsetMs:o}),s},[t]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Request Lifecycle"}),(0,a.jsx)("div",{className:"relative",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 relative",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:"request"===e.type||"response"===e.type?(0,a.jsx)(I,{}):"llm"===e.type?(0,a.jsx)(E,{}):e.isSuccess?(0,a.jsx)(z,{}):(0,a.jsx)(A,{})}),t<s.length-1&&(0,a.jsx)("div",{className:"w-0.5 bg-gray-200 flex-grow",style:{minHeight:"24px"}})]}),(0,a.jsx)("div",{className:"pb-4 flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:`text-sm ${"llm"===e.type?"text-blue-600 font-medium":"text-gray-900"}`,children:e.label}),e.status&&(0,a.jsx)("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold uppercase ${e.isSuccess?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status}),(0,a.jsxs)("span",{className:"text-xs text-gray-400 font-mono ml-auto flex-shrink-0",children:["T+",e.offsetMs,"ms"]})]})})]},t))})]})},P=({entry:e})=>{let t,[s,l]=(0,o.useState)(!1),r=L(e),n=T(e),i=M(e),c=(t=Math.round(1e3*e.duration),`${t}ms`),x=e.guardrail_mode.replace(/_/g,"-").toUpperCase(),u=(e=>{if(!L(e))return null;if(null!=e.risk_score)return e.risk_score;let t=T(e),s=e.patterns_checked??0,a=e.confidence_score??0;if(0===s&&0===a)return 0;let l=7*(s>0?t/s:0)+3*a;return t>0&&l<2&&(l=2),Math.min(10,Math.round(10*l)/10)})(e),p=e.guardrail_provider??"presidio",h=e.guardrail_response,g=Array.isArray(h)?h:[],y="bedrock"!==p||null===h||"object"!=typeof h||Array.isArray(h)?void 0:h,j=null!=e.patterns_checked?`${n}/${e.patterns_checked} matched`:n>0?`${n} matched`:null;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>l(!s),children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:r?(0,a.jsx)(z,{}):(0,a.jsx)(A,{})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900 text-sm truncate",children:i}),(0,a.jsx)("span",{className:"px-2 py-0.5 border border-blue-200 bg-blue-50 text-blue-700 rounded text-[11px] font-semibold uppercase flex-shrink-0",children:x}),(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-semibold uppercase flex-shrink-0 ${r?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:r?"PASSED":"FAILED"}),j&&(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-medium flex-shrink-0 ${0===n?"bg-green-50 text-green-700 border border-green-200":"bg-amber-50 text-amber-700 border border-amber-200"}`,children:j}),null!=e.confidence_score&&(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 border border-gray-200 rounded text-[11px] font-medium flex-shrink-0",children:[(100*e.confidence_score).toFixed(0),"% conf"]}),null!=u&&r&&(0,a.jsx)(d.Tooltip,{title:`Risk score: ${u}/10`,children:(0,a.jsxs)("span",{className:`px-2 py-0.5 border rounded text-[11px] font-semibold flex-shrink-0 ${u<=3?"text-green-600 bg-green-50 border-green-200":u<=6?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200"}`,children:["Risk ",u,"/10"]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500 font-mono",children:c}),e.detection_method&&(0,a.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 border border-gray-200 rounded text-[11px] font-medium",children:e.detection_method.split(",")[0].trim()}),(0,a.jsx)(R,{expanded:s})]})]}),s&&(0,a.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3",children:[e.classification&&(0,a.jsxs)("div",{className:"mb-3 bg-gray-50 rounded-lg p-3 space-y-1",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Classification"}),e.classification.category&&(0,a.jsxs)("div",{className:"flex text-sm",children:[(0,a.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Category:"}),(0,a.jsx)("span",{children:e.classification.category})]}),e.classification.article_reference&&(0,a.jsxs)("div",{className:"flex text-sm",children:[(0,a.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Reference:"}),(0,a.jsx)("span",{className:"font-mono",children:e.classification.article_reference})]}),null!=e.classification.confidence&&(0,a.jsxs)("div",{className:"flex text-sm",children:[(0,a.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Confidence:"}),(0,a.jsxs)("span",{children:[(100*e.classification.confidence).toFixed(0),"%"]})]}),e.classification.reason&&(0,a.jsxs)("div",{className:"flex text-sm",children:[(0,a.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Reason:"}),(0,a.jsx)("span",{children:e.classification.reason})]})]}),e.match_details&&e.match_details.length>0&&(0,a.jsx)(B,{matchDetails:e.match_details}),n>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Masked Entities"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.masked_entity_count||{}).map(([e,t])=>(0,a.jsxs)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium",children:[e,": ",t]},e))})]}),"presidio"===p&&g.length>0&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(m,{entities:g})}),"bedrock"===p&&y&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(f,{response:y})}),"litellm_content_filter"===p&&h&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(v,{response:h})}),p&&!C.has(p)&&h&&(0,a.jsx)(F,{response:h})]})]})},q=({data:e,accessToken:t,logEntry:s})=>{let l=(0,o.useMemo)(()=>Array.isArray(e)?e.filter(e=>!!e):e?[e]:[],[e]),r=l.filter(L).length,n=r===l.length,i=(0,o.useMemo)(()=>Math.round(1e3*l.reduce((e,t)=>e+(t.duration??0),0)),[l]);return((0,o.useMemo)(()=>Array.from(new Set(l.map(e=>e.policy_template).filter(Boolean))),[l]),0===l.length)?null:(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm w-full max-w-full overflow-hidden mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(D,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Guardrails & Policy Compliance"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[l.length," guardrail",1!==l.length?"s":""," evaluated"]}),(0,a.jsx)("span",{className:"text-gray-300",children:"|"}),(0,a.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold ${n?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[n?(0,a.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,a.jsx)("path",{d:"M3 6l2.5 2.5L9 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}):null,r," Passed"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Total: ",i,"ms overhead"]})}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`guardrail-compliance-log-${new Date().toISOString().slice(0,10)}.json`,s.click(),URL.revokeObjectURL(t)},className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(O,{}),"Export Compliance Log"]})]})]}),t&&s&&(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,a.jsx)(S,{accessToken:t,logEntry:s})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-[340px] flex-shrink-0 border-r border-gray-100 px-6 py-5",children:(0,a.jsx)($,{entries:l})}),(0,a.jsxs)("div",{className:"flex-1 px-6 py-5 min-w-0",children:[(0,a.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Evaluation Details"}),(0,a.jsx)("div",{className:"space-y-3",children:l.map((e,t)=>(0,a.jsx)(P,{entry:e},`${e.guardrail_name??"guardrail"}-${t}`))})]})]})]})};var K=e.i(500330);e.i(122550);var H=e.i(313603),V=e.i(772345),Y=e.i(793130),W=e.i(197647),U=e.i(653824),J=e.i(881073),G=e.i(404206),Q=e.i(723731),X=e.i(464571),Z=e.i(708347),ee=e.i(207082),et=e.i(871943),es=e.i(360820),ea=e.i(94629),el=e.i(152990),er=e.i(682830),en=e.i(269200),ei=e.i(942232),eo=e.i(977572),ed=e.i(427612),ec=e.i(64848),em=e.i(496020);function ex({keys:e,totalCount:t,isLoading:s,isFetching:l,pageIndex:r,pageSize:n,onPageChange:i}){let[c,m]=(0,o.useState)([{id:"deleted_at",desc:!0}]),[x,u]=(0,o.useState)({pageIndex:r,pageSize:n});o.default.useEffect(()=>{u({pageIndex:r,pageSize:n})},[r,n]);let p=[{id:"token",accessorKey:"token",header:"Key ID",size:150,maxSize:250,cell:e=>{let t=e.getValue();return(0,a.jsx)(d.Tooltip,{title:t,children:(0,a.jsx)("span",{className:"font-mono text-blue-500 text-xs truncate block max-w-[250px]",children:t||"-"})})}},{id:"key_alias",accessorKey:"key_alias",header:"Key Alias",size:150,maxSize:200,cell:e=>{let t=e.getValue();return(0,a.jsx)(d.Tooltip,{title:t,children:(0,a.jsx)("span",{className:"font-mono text-xs truncate block max-w-[200px]",children:t??"-"})})}},{id:"team_alias",accessorKey:"team_alias",header:"Team Alias",size:120,maxSize:180,cell:e=>{let t=e.getValue();return(0,a.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})}},{id:"spend",accessorKey:"spend",header:"Spend (USD)",size:100,maxSize:140,cell:e=>(0,a.jsx)("span",{className:"block max-w-[140px]",children:(0,K.formatNumberWithCommas)(e.getValue(),4)})},{id:"max_budget",accessorKey:"max_budget",header:"Budget (USD)",size:110,maxSize:150,cell:e=>{let t=e.getValue();return(0,a.jsx)("span",{className:"block max-w-[150px]",children:null===t?"Unlimited":`$${(0,K.formatNumberWithCommas)(t)}`})}},{id:"user_email",accessorKey:"user_email",header:"User Email",size:160,maxSize:250,cell:e=>{let t=e.getValue();return(0,a.jsx)(d.Tooltip,{title:t,children:(0,a.jsx)("span",{className:"font-mono text-xs truncate block max-w-[250px]",children:t??"-"})})}},{id:"user_id",accessorKey:"user_id",header:"User ID",size:120,maxSize:200,cell:e=>{let t=e.getValue();return(0,a.jsx)(d.Tooltip,{title:t||void 0,children:(0,a.jsx)("span",{className:"truncate block max-w-[200px]",children:t||"-"})})}},{id:"created_at",accessorKey:"created_at",header:"Created At",size:120,maxSize:140,cell:e=>{let t=e.getValue();return(0,a.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"created_by",accessorKey:"created_by",header:"Created By",size:120,maxSize:180,cell:e=>{let t=e.row.original.created_by;return(0,a.jsx)(d.Tooltip,{title:t||void 0,children:(0,a.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})})}},{id:"deleted_at",accessorKey:"deleted_at",header:"Deleted At",size:120,maxSize:140,cell:e=>{let t=e.row.original.deleted_at;return(0,a.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"deleted_by",accessorKey:"deleted_by",header:"Deleted By",size:120,maxSize:180,cell:e=>{let t=e.row.original.deleted_by;return(0,a.jsx)(d.Tooltip,{title:t||void 0,children:(0,a.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})})}}],h=(0,el.useReactTable)({data:e,columns:p,columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:c,pagination:x},onSortingChange:m,onPaginationChange:e=>{let t="function"==typeof e?e(x):e;u(t),i(t.pageIndex)},getCoreRowModel:(0,er.getCoreRowModel)(),getSortedRowModel:(0,er.getSortedRowModel)(),getPaginationRowModel:(0,er.getPaginationRowModel)(),enableSorting:!0,manualSorting:!1,manualPagination:!0,pageCount:Math.ceil(t/n)}),{pageIndex:g}=h.getState().pagination,f=g*n+1,y=Math.min((g+1)*n,t),j=`${f} - ${y}`;return(0,a.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,a.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[s||l?(0,a.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:"Loading..."}):(0,a.jsxs)("span",{className:"inline-flex text-sm text-gray-700",children:["Showing ",j," of ",t," results"]}),(0,a.jsxs)("div",{className:"inline-flex items-center gap-2",children:[s||l?(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Loading..."}):(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",g+1," of ",h.getPageCount()]}),(0,a.jsx)("button",{onClick:()=>h.previousPage(),disabled:s||l||!h.getCanPreviousPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>h.nextPage(),disabled:s||l||!h.getCanNextPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),(0,a.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,a.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(en.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:h.getCenterTotalSize()},children:[(0,a.jsx)(ed.TableHead,{children:h.getHeaderGroups().map(e=>(0,a.jsx)(em.TableRow,{children:e.headers.map(e=>(0,a.jsx)(ec.TableHeaderCell,{"data-header-id":e.id,className:"py-1 h-8 relative hover:bg-gray-50",style:{width:e.getSize(),maxWidth:e.column.columnDef.maxSize,position:"relative"},onMouseEnter:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&(t.style.opacity="0.5")},onMouseLeave:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&!e.column.getIsResizing()&&(t.style.opacity="0")},onClick:e.column.getToggleSortingHandler(),children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,el.flexRender)(e.column.columnDef.header,e.getContext())}),(0,a.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,a.jsx)(es.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,a.jsx)(et.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,a.jsx)(ea.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${h.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,a.jsx)(ei.TableBody,{children:s||l?(0,a.jsx)(em.TableRow,{children:(0,a.jsx)(eo.TableCell,{colSpan:p.length,className:"h-8 text-center",children:(0,a.jsx)("div",{className:"text-center text-gray-500",children:(0,a.jsx)("p",{children:"ðŸš… Loading keys..."})})})}):e.length>0?h.getRowModel().rows.map(e=>(0,a.jsx)(em.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,a.jsx)(eo.TableCell,{style:{width:e.column.getSize(),maxWidth:e.column.columnDef.maxSize,whiteSpace:"pre-wrap",overflow:"hidden"},className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,el.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(em.TableRow,{children:(0,a.jsx)(eo.TableCell,{colSpan:p.length,className:"h-8 text-center",children:(0,a.jsx)("div",{className:"text-center text-gray-500",children:(0,a.jsx)("p",{children:"No deleted keys found"})})})})})]})})})})]})})}function eu(){let[e,t]=(0,o.useState)(0),[s]=(0,o.useState)(50),{data:l,isPending:r,isFetching:n}=(0,ee.useDeletedKeys)(e+1,s);return(0,a.jsx)(ex,{keys:l?.keys||[],totalCount:l?.total_count||0,isLoading:r,isFetching:n,pageIndex:e,pageSize:s,onPageChange:t})}var ep=e.i(785242),eh=e.i(389083),eg=e.i(599724),ef=e.i(355619);function ey({teams:e,isLoading:t,isFetching:s}){let[l,r]=(0,o.useState)([{id:"deleted_at",desc:!0}]),n=[{id:"team_alias",accessorKey:"team_alias",header:"Team Name",size:150,maxSize:200,cell:e=>{let t=e.getValue();return(0,a.jsx)(d.Tooltip,{title:t||void 0,children:(0,a.jsx)("span",{className:"truncate block max-w-[200px]",children:t||"-"})})}},{id:"team_id",accessorKey:"team_id",header:"Team ID",size:150,maxSize:250,cell:e=>{let t=e.getValue();return(0,a.jsx)(d.Tooltip,{title:t,children:(0,a.jsx)("span",{className:"font-mono text-blue-500 text-xs truncate block max-w-[250px]",children:t||"-"})})}},{id:"created_at",accessorKey:"created_at",header:"Created",size:120,maxSize:140,cell:e=>{let t=e.getValue();return(0,a.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"spend",accessorKey:"spend",header:"Spend (USD)",size:100,maxSize:140,cell:e=>{let t=e.row.original.spend;return(0,a.jsx)("span",{className:"block max-w-[140px]",children:void 0!==t?(0,K.formatNumberWithCommas)(t,4):"-"})}},{id:"max_budget",accessorKey:"max_budget",header:"Budget (USD)",size:110,maxSize:150,cell:e=>{let t=e.getValue();return(0,a.jsx)("span",{className:"block max-w-[150px]",children:null==t?"No limit":`$${(0,K.formatNumberWithCommas)(t)}`})}},{id:"models",accessorKey:"models",header:"Models",size:200,maxSize:300,cell:e=>{let t=e.getValue();return Array.isArray(t)&&0!==t.length?(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 max-w-[300px]",children:[t.slice(0,3).map((e,t)=>"all-proxy-models"===e?(0,a.jsx)(eh.Badge,{size:"xs",color:"red",children:(0,a.jsx)(eg.Text,{children:"All Proxy Models"})},t):(0,a.jsx)(eh.Badge,{size:"xs",color:"blue",children:(0,a.jsx)(eg.Text,{children:e.length>30?`${(0,ef.getModelDisplayName)(e).slice(0,30)}...`:(0,ef.getModelDisplayName)(e)})},t)),t.length>3&&(0,a.jsx)(eh.Badge,{size:"xs",color:"gray",children:(0,a.jsxs)(eg.Text,{children:["+",t.length-3," ",t.length-3==1?"more model":"more models"]})})]}):(0,a.jsx)(eh.Badge,{size:"xs",color:"red",children:(0,a.jsx)(eg.Text,{children:"All Proxy Models"})})}},{id:"organization_id",accessorKey:"organization_id",header:"Organization",size:150,maxSize:200,cell:e=>{let t=e.getValue();return(0,a.jsx)(d.Tooltip,{title:t||void 0,children:(0,a.jsx)("span",{className:"truncate block max-w-[200px]",children:t||"-"})})}},{id:"deleted_at",accessorKey:"deleted_at",header:"Deleted At",size:120,maxSize:140,cell:e=>{let t=e.row.original.deleted_at;return(0,a.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"deleted_by",accessorKey:"deleted_by",header:"Deleted By",size:120,maxSize:180,cell:e=>{let t=e.row.original.deleted_by;return(0,a.jsx)(d.Tooltip,{title:t||void 0,children:(0,a.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})})}}],i=(0,el.useReactTable)({data:e,columns:n,columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:l},onSortingChange:r,getCoreRowModel:(0,er.getCoreRowModel)(),getSortedRowModel:(0,er.getSortedRowModel)(),enableSorting:!0,manualSorting:!1});return(0,a.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,a.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,a.jsx)("div",{className:"flex items-center justify-between w-full mb-4",children:t||s?(0,a.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:"Loading..."}):(0,a.jsxs)("span",{className:"inline-flex text-sm text-gray-700",children:["Showing ",e.length," ",1===e.length?"team":"teams"]})}),(0,a.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,a.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(en.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:i.getCenterTotalSize()},children:[(0,a.jsx)(ed.TableHead,{children:i.getHeaderGroups().map(e=>(0,a.jsx)(em.TableRow,{children:e.headers.map(e=>(0,a.jsx)(ec.TableHeaderCell,{"data-header-id":e.id,className:"py-1 h-8 relative hover:bg-gray-50",style:{width:e.getSize(),maxWidth:e.column.columnDef.maxSize,position:"relative"},onMouseEnter:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&(t.style.opacity="0.5")},onMouseLeave:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&!e.column.getIsResizing()&&(t.style.opacity="0")},onClick:e.column.getToggleSortingHandler(),children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,el.flexRender)(e.column.columnDef.header,e.getContext())}),(0,a.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,a.jsx)(es.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,a.jsx)(et.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,a.jsx)(ea.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${i.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,a.jsx)(ei.TableBody,{children:t||s?(0,a.jsx)(em.TableRow,{children:(0,a.jsx)(eo.TableCell,{colSpan:n.length,className:"h-8 text-center",children:(0,a.jsx)("div",{className:"text-center text-gray-500",children:(0,a.jsx)("p",{children:"ðŸš… Loading teams..."})})})}):e.length>0?i.getRowModel().rows.map(e=>(0,a.jsx)(em.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,a.jsx)(eo.TableCell,{style:{width:e.column.getSize(),maxWidth:e.column.columnDef.maxSize,whiteSpace:"pre-wrap",overflow:"hidden"},className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,el.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(em.TableRow,{children:(0,a.jsx)(eo.TableCell,{colSpan:n.length,className:"h-8 text-center",children:(0,a.jsx)("div",{className:"text-center text-gray-500",children:(0,a.jsx)("p",{children:"No deleted teams found"})})})})})]})})})})]})})}function ej(){let{data:e,isPending:t,isFetching:s}=(0,ep.useDeletedTeams)(1,100);return(0,a.jsx)(ey,{teams:e||[],isLoading:t,isFetching:s})}var eb=e.i(633627),ev=e.i(625901),eN=e.i(56456),e_=e.i(152473),ew=e.i(199133),ek=e.i(770914),eS=e.i(898586);let{Text:eC}=eS.Typography,eT=({value:e,onChange:t,placeholder:s="Select a model",style:l,pageSize:r=50,allowClear:n=!0,disabled:i=!1})=>{let[d,c]=(0,o.useState)(""),[m,x]=(0,e_.useDebouncedState)("",{wait:300}),{data:u,fetchNextPage:p,hasNextPage:h,isFetchingNextPage:g,isLoading:f}=(0,ev.useInfiniteModelInfo)(r,m||void 0),y=(0,o.useMemo)(()=>{if(!u?.pages)return[];let e=new Set,t=[];for(let s of u.pages)for(let a of s.data){let s=a.model_info?.id??"",l=a.model_name??"";!s||e.has(s)||(e.add(s),t.push({label:l?`${l} (${s})`:s,value:s,modelName:l,modelId:s}))}return t},[u]);return(0,a.jsx)(ew.Select,{value:e||void 0,onChange:e=>{let s="string"==typeof e?e:Array.isArray(e)?e[0]??"":"";t?.(s)},placeholder:s,style:{width:"100%",...l},allowClear:n,disabled:i,showSearch:!0,filterOption:!1,onSearch:e=>{c(e),x(e)},searchValue:d,onPopupScroll:e=>{let t=e.currentTarget;(t.scrollTop+t.clientHeight)/t.scrollHeight>=.8&&h&&!g&&p()},loading:f,notFoundContent:f?(0,a.jsx)(eN.LoadingOutlined,{spin:!0}):"No models found",options:y,optionRender:e=>{let{modelName:t,modelId:s}=e.data;return(0,a.jsx)(a.Fragment,{children:t?(0,a.jsxs)(ek.Space,{direction:"vertical",children:[(0,a.jsxs)(ek.Space,{direction:"horizontal",children:[(0,a.jsx)(eC,{strong:!0,children:"Model name:"}),(0,a.jsx)(eC,{ellipsis:!0,children:t})]}),(0,a.jsxs)(eC,{ellipsis:!0,type:"secondary",children:["Model ID: ",s]})]}):(0,a.jsxs)(eC,{ellipsis:!0,type:"secondary",children:["Model ID: ",s]})})},popupRender:e=>(0,a.jsxs)(a.Fragment,{children:[e,g&&(0,a.jsx)("div",{style:{textAlign:"center",padding:8},children:(0,a.jsx)(eN.LoadingOutlined,{spin:!0})})]})})};var eL=e.i(969550),eM=e.i(764205),eD=e.i(20147),ez=e.i(149121),eA=e.i(994388),eE=e.i(916925),eI=e.i(446891);let eR=({utcTime:e})=>(0,a.jsx)("span",{style:{fontFamily:"monospace",width:"180px",display:"inline-block"},children:(e=>{try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).replace(",","")}catch(e){return"Error converting time"}})(e)}),eO=[{label:"400 - Bad Request",value:"400"},{label:"401 - Invalid Authentication",value:"401"},{label:"403 - Permission Denied",value:"403"},{label:"404 - Not Found",value:"404"},{label:"408 - Request Timeout",value:"408"},{label:"422 - Unprocessable Entity",value:"422"},{label:"429 - Rate Limited",value:"429"},{label:"500 - Internal Server Error",value:"500"},{label:"502 - Bad Gateway",value:"502"},{label:"503 - Service Unavailable",value:"503"},{label:"529 - Overloaded",value:"529"}],eB=["call_mcp_tool","list_mcp_tools"],eF=[{label:"Last 15 Minutes",value:15,unit:"minutes"},{label:"Last Hour",value:1,unit:"hours"},{label:"Last 4 Hours",value:4,unit:"hours"},{label:"Last 24 Hours",value:24,unit:"hours"},{label:"Last 7 Days",value:7,unit:"days"}],e$=({size:e=12})=>(0,a.jsx)("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0 text-gray-400",children:(0,a.jsx)("path",{d:"M12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0-1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0-1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3z"})}),eP=({size:e=10})=>(0,a.jsx)("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:(0,a.jsx)("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),eq=({count:e})=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,a.jsx)(e$,{}),null!=e?e:"LLM"]}),eK=({count:e})=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-50 text-amber-700 border border-amber-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,a.jsx)(eP,{}),null!=e?e:"MCP"]}),eH=({label:e,field:t,sortBy:s,sortOrder:l,onSortChange:r})=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)(eI.TableHeaderSortDropdown,{sortState:s===t&&l,onSortChange:e=>{!1===e?r("startTime","desc"):r(t,e)}})]}),eV=e=>[{header:e?()=>(0,a.jsx)(eH,{label:"Time",field:"startTime",sortBy:e.sortBy,sortOrder:e.sortOrder,onSortChange:e.onSortChange}):"Time",accessorKey:"startTime",cell:e=>(0,a.jsx)(eR,{utcTime:e.getValue()})},{header:"Type",id:"type",cell:e=>{let t=e.row.original,s=t.session_total_count||1,l=eB.includes(t.call_type),r=t.session_llm_count??(l?0:s),n=t.session_mcp_count??(l?s:0);if(l)return(0,a.jsx)(eK,{});if(s<=1)return(0,a.jsx)(eq,{});let i=(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,a.jsx)(e$,{}),(0,a.jsx)("span",{children:s}),n>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-blue-300",children:"Â·"}),(0,a.jsx)(eP,{})]})]});return(0,a.jsx)(d.Tooltip,{title:`${r} LLM â€¢ ${n} MCP`,children:i})}},{header:"Status",accessorKey:"metadata.status",cell:e=>{let t="failure"!==(e.getValue()||"Success").toLowerCase();return(0,a.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block text-center w-16 ${t?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t?"Success":"Failure"})}},{header:"Session ID",accessorKey:"session_id",cell:e=>{let t=String(e.getValue()||""),s=e.row.original.onSessionClick;return(0,a.jsx)(d.Tooltip,{title:String(e.getValue()||""),children:(0,a.jsx)(eA.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal text-xs max-w-[15ch] truncate block",onClick:()=>s?.(t),children:String(e.getValue()||"")})})}},{header:"Request ID",accessorKey:"request_id",cell:e=>(0,a.jsx)(d.Tooltip,{title:String(e.getValue()||""),children:(0,a.jsx)("span",{className:"font-mono text-xs max-w-[15ch] truncate block",children:String(e.getValue()||"")})})},{header:e?()=>(0,a.jsx)(eH,{label:"Cost",field:"spend",sortBy:e.sortBy,sortOrder:e.sortOrder,onSortChange:e.onSortChange}):"Cost",accessorKey:"spend",cell:e=>{let t=e.row.original,s=t.mcp_tool_call_count||0,l=t.mcp_tool_call_spend||0;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(d.Tooltip,{title:`$${String(e.getValue()||0)}`,children:(0,a.jsx)("span",{children:(0,K.getSpendString)(e.getValue()||0)})}),s>0&&l>0&&(0,a.jsxs)("span",{className:"text-[10px] text-amber-600",children:["incl. ",(0,K.getSpendString)(l)," from ",s," MCP"]})]})}},{header:"Duration (s)",accessorKey:"duration",cell:e=>(0,a.jsx)(d.Tooltip,{title:String(e.getValue()||"-"),children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Team Name",accessorKey:"metadata.user_api_key_team_alias",cell:e=>(0,a.jsx)(d.Tooltip,{title:String(e.getValue()||"-"),children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Key Hash",accessorKey:"metadata.user_api_key",cell:e=>{let t=String(e.getValue()||"-"),s=e.row.original.onKeyHashClick;return(0,a.jsx)(d.Tooltip,{title:t,children:(0,a.jsx)("span",{className:"font-mono max-w-[15ch] truncate block cursor-pointer hover:text-blue-600",onClick:()=>s?.(t),children:t})})}},{header:"Key Name",accessorKey:"metadata.user_api_key_alias",cell:e=>(0,a.jsx)(d.Tooltip,{title:String(e.getValue()||"-"),children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Model",accessorKey:"model",cell:e=>{let t=e.row.original,s=t.custom_llm_provider,l=String(e.getValue()||"");return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&(0,a.jsx)("img",{src:t.metadata?.mcp_tool_call_metadata?.mcp_server_logo_url?t.metadata.mcp_tool_call_metadata.mcp_server_logo_url:s?(0,eE.getProviderLogoAndName)(s).logo:"",alt:"",className:"w-4 h-4",onError:e=>{e.target.style.display="none"}}),(0,a.jsx)(d.Tooltip,{title:l,children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:l})})]})}},{header:e?()=>(0,a.jsx)(eH,{label:"Tokens",field:"total_tokens",sortBy:e.sortBy,sortOrder:e.sortOrder,onSortChange:e.onSortChange}):"Tokens",accessorKey:"total_tokens",cell:e=>{let t=e.row.original;return(0,a.jsxs)("span",{className:"text-sm",children:[String(t.total_tokens||"0"),(0,a.jsxs)("span",{className:"text-gray-400 text-xs ml-1",children:["(",String(t.prompt_tokens||"0"),"+",String(t.completion_tokens||"0"),")"]})]})}},{header:"Internal User",accessorKey:"user",cell:e=>(0,a.jsx)(d.Tooltip,{title:String(e.getValue()||"-"),children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"End User",accessorKey:"end_user",cell:e=>(0,a.jsx)(d.Tooltip,{title:String(e.getValue()||"-"),children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Tags",accessorKey:"request_tags",cell:e=>{let t=e.getValue();if(!t||0===Object.keys(t).length)return"-";let s=Object.entries(t),l=s[0],r=s.slice(1);return(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:(0,a.jsx)(d.Tooltip,{title:(0,a.jsx)("div",{className:"flex flex-col gap-1",children:s.map(([e,t])=>(0,a.jsxs)("span",{children:[e,": ",String(t)]},e))}),children:(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:[l[0],": ",String(l[1]),r.length>0&&` +${r.length}`]})})})}}];eV();let eY=[{id:"expander",header:()=>null,cell:({row:e})=>(0,a.jsx)(()=>{let[t,s]=o.default.useState(e.getIsExpanded()),l=o.default.useCallback(()=>{s(e=>!e),e.getToggleExpandedHandler()()},[e]);return e.getCanExpand()?(0,a.jsx)("button",{onClick:l,style:{cursor:"pointer"},"aria-label":t?"Collapse row":"Expand row",className:"w-6 h-6 flex items-center justify-center focus:outline-none",children:(0,a.jsx)("svg",{className:`w-4 h-4 transform transition-transform ${t?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):(0,a.jsx)("span",{className:"w-6 h-6 flex items-center justify-center",children:"â—"})},{})},{header:"Timestamp",accessorKey:"updated_at",cell:e=>(0,a.jsx)(eR,{utcTime:e.getValue()})},{header:"Table Name",accessorKey:"table_name",cell:e=>{let t=e.getValue(),s=t;switch(t){case"LiteLLM_VerificationToken":s="Keys";break;case"LiteLLM_TeamTable":s="Teams";break;case"LiteLLM_OrganizationTable":s="Organizations";break;case"LiteLLM_UserTable":s="Users";break;case"LiteLLM_ProxyModelTable":s="Models";break;default:s=t}return(0,a.jsx)("span",{children:s})}},{header:"Action",accessorKey:"action",cell:e=>{let t;return(0,a.jsx)("span",{children:(t=e.getValue(),(0,a.jsx)(eh.Badge,{color:"gray",className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"whitespace-nowrap text-xs",children:t})}))})}},{header:"Changed By",accessorKey:"changed_by",cell:e=>{let t=e.row.original.changed_by,s=e.row.original.changed_by_api_key;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"font-medium",children:t}),s&&(0,a.jsx)(d.Tooltip,{title:s,children:(0,a.jsxs)("div",{className:"text-xs text-muted-foreground max-w-[15ch] truncate",children:[" ",s]})})]})}},{header:"Affected Item ID",accessorKey:"object_id",cell:e=>(0,a.jsx)(()=>{let t=e.getValue(),[s,l]=(0,o.useState)(!1);if(!t)return(0,a.jsx)(a.Fragment,{children:"-"});let r=async()=>{try{await navigator.clipboard.writeText(String(t)),l(!0),setTimeout(()=>l(!1),1500)}catch(e){console.error("Failed to copy object ID: ",e)}};return(0,a.jsx)(d.Tooltip,{title:s?"Copied!":String(t),children:(0,a.jsx)("span",{className:"max-w-[20ch] truncate block cursor-pointer hover:text-blue-600",onClick:r,children:String(t)})})},{})}];function eW({userID:e,userRole:t,token:s,accessToken:l,isActive:n,premiumUser:d,allTeams:c}){let[m,x]=(0,o.useState)((0,i.default)().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),u=(0,o.useRef)(null),p=(0,o.useRef)(null),[h,g]=(0,o.useState)(1),[f]=(0,o.useState)(50),[y,j]=(0,o.useState)({}),[b,v]=(0,o.useState)(""),[N,_]=(0,o.useState)(""),[w,k]=(0,o.useState)(""),[S,C]=(0,o.useState)("all"),[T,L]=(0,o.useState)("all"),[M,D]=(0,o.useState)(!1),[z,A]=(0,o.useState)(!1),E=(0,r.useQuery)({queryKey:["all_audit_logs",l,s,t,e,m],queryFn:async()=>{if(!l||!s||!t||!e)return[];let a=(0,i.default)(m).utc().format("YYYY-MM-DD HH:mm:ss"),r=(0,i.default)().utc().format("YYYY-MM-DD HH:mm:ss"),n=[],o=1,d=1;do{let e=await (0,eM.uiAuditLogsCall)(l,a,r,o,50);n=n.concat(e.audit_logs),d=e.total_pages,o++}while(o<=d)return n},enabled:!!l&&!!s&&!!t&&!!e&&n,refetchInterval:5e3,refetchIntervalInBackground:!0}),I=(0,o.useCallback)(async e=>{if(l)try{let t=(await (0,eM.keyListCall)(l,null,null,e,null,null,1,10)).keys.find(t=>t.key_alias===e);t?_(t.token):_("")}catch(e){console.error("Error fetching key hash for alias:",e),_("")}},[l]);(0,o.useEffect)(()=>{if(!l)return;let e=!1,t=!1;y["Team ID"]?b!==y["Team ID"]&&(v(y["Team ID"]),e=!0):""!==b&&(v(""),e=!0),y["Key Hash"]?N!==y["Key Hash"]&&(_(y["Key Hash"]),t=!0):y["Key Alias"]?I(y["Key Alias"]):""!==N&&(_(""),t=!0),(e||t)&&g(1)},[y,l,I,b,N]),(0,o.useEffect)(()=>{g(1)},[b,N,m,w,S,T]),(0,o.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&D(!1),p.current&&!p.current.contains(e.target)&&A(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let R=(0,o.useMemo)(()=>E.data?E.data.filter(e=>{let t=!0,s=!0,a=!0,l=!0,r=!0;if(b){let s="string"==typeof e.before_value?JSON.parse(e.before_value)?.team_id:e.before_value?.team_id,a="string"==typeof e.updated_values?JSON.parse(e.updated_values)?.team_id:e.updated_values?.team_id;t=s===b||a===b}if(N)try{let t="string"==typeof e.before_value?JSON.parse(e.before_value):e.before_value,a="string"==typeof e.updated_values?JSON.parse(e.updated_values):e.updated_values,l=t?.token,r=a?.token;s="string"==typeof l&&l.includes(N)||"string"==typeof r&&r.includes(N)}catch(e){s=!1}if(w&&(a=e.object_id?.toLowerCase().includes(w.toLowerCase())),"all"!==S&&(l=e.action?.toLowerCase()===S.toLowerCase()),"all"!==T){let t="";switch(T){case"keys":t="litellm_verificationtoken";break;case"teams":t="litellm_teamtable";break;case"users":t="litellm_usertable";break;default:t=T}r=e.table_name?.toLowerCase()===t}return t&&s&&a&&l&&r}):[],[E.data,b,N,w,S,T]),O=R.length,B=Math.ceil(O/f)||1,F=(0,o.useMemo)(()=>{let e=(h-1)*f,t=e+f;return R.slice(e,t)},[R,h,f]),$=!E.data||0===E.data.length,P=(0,o.useCallback)(({row:e})=>(0,a.jsx)(({rowData:e})=>{let{before_value:t,updated_values:s,table_name:l,action:r}=e,n=(e,t)=>{if(!e||0===Object.keys(e).length)return(0,a.jsx)(eg.Text,{children:"N/A"});if(t){let t=Object.keys(e),s=["token","spend","max_budget"];if(t.every(e=>s.includes(e))&&t.length>0)return(0,a.jsxs)("div",{children:[t.includes("token")&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Token:"})," ",e.token||"N/A"]}),t.includes("spend")&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Spend:"})," ",void 0!==e.spend?`$${(0,K.formatNumberWithCommas)(e.spend,6)}`:"N/A"]}),t.includes("max_budget")&&(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Max Budget:"})," ",void 0!==e.max_budget?`$${(0,K.formatNumberWithCommas)(e.max_budget,6)}`:"N/A"]})]});if(e["No differing fields detected in 'before' state"]||e["No differing fields detected in 'updated' state"]||e["No fields changed"])return(0,a.jsx)(eg.Text,{children:e[Object.keys(e)[0]]})}return(0,a.jsx)("pre",{className:"p-2 bg-gray-50 border rounded text-xs overflow-auto max-h-60",children:JSON.stringify(e,null,2)})},i=t,o=s;if(("updated"===r||"rotated"===r)&&t&&s&&("LiteLLM_TeamTable"===l||"LiteLLM_UserTable"===l||"LiteLLM_VerificationToken"===l)){let e={},a={};new Set([...Object.keys(t),...Object.keys(s)]).forEach(l=>{JSON.stringify(t[l])!==JSON.stringify(s[l])&&(t.hasOwnProperty(l)&&(e[l]=t[l]),s.hasOwnProperty(l)&&(a[l]=s[l]))}),Object.keys(t).forEach(l=>{s.hasOwnProperty(l)||e.hasOwnProperty(l)||(e[l]=t[l],a[l]=void 0)}),Object.keys(s).forEach(l=>{t.hasOwnProperty(l)||a.hasOwnProperty(l)||(a[l]=s[l],e[l]=void 0)}),i=Object.keys(e).length>0?e:{"No differing fields detected in 'before' state":"N/A"},o=Object.keys(a).length>0?a:{"No differing fields detected in 'updated' state":"N/A"},0===Object.keys(e).length&&0===Object.keys(a).length&&(i={"No fields changed":"N/A"},o={"No fields changed":"N/A"})}return(0,a.jsxs)("div",{className:"-mx-4 p-4 bg-slate-100 border-y border-slate-300 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-sm text-slate-700",children:"Before Value:"}),n(i,"LiteLLM_VerificationToken"===l)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-sm text-slate-700",children:"Updated Value:"}),n(o,"LiteLLM_VerificationToken"===l)]})]})},{rowData:e.original}),[]);if(!d)return(0,a.jsxs)("div",{style:{textAlign:"center",marginTop:"20px"},children:[(0,a.jsx)("h1",{style:{display:"block",marginBottom:"10px"},children:"âœ¨ Enterprise Feature."}),(0,a.jsx)(eg.Text,{style:{display:"block",marginBottom:"10px"},children:"This is a LiteLLM Enterprise feature, and requires a valid key to use."}),(0,a.jsx)(eg.Text,{style:{display:"block",marginBottom:"20px",fontStyle:"italic"},children:"Here's a preview of what Audit Logs offer:"}),(0,a.jsx)("img",{src:"../ui/assets/audit-logs-preview.png",alt:"Audit Logs Preview",style:{maxWidth:"100%",maxHeight:"700px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",margin:"0 auto"},onError:e=>{console.error("Failed to load audit logs preview image"),e.target.style.display="none"}})]});let q=O>0?(h-1)*f+1:0,H=Math.min(h*f,O);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsxs)("div",{className:"border-b px-6 py-4",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold py-4",children:"Audit Logs"}),(0,a.jsx)(({show:e})=>e?(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start mb-6",children:[(0,a.jsx)("div",{className:"text-blue-500 mr-3 flex-shrink-0 mt-0.5",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,a.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"Audit Logs Not Available"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"To enable audit logging, add the following configuration to your LiteLLM proxy configuration file:"}),(0,a.jsx)("pre",{className:"mt-2 bg-white p-3 rounded border border-blue-200 text-xs font-mono overflow-auto",children:`litellm_settings:
  store_audit_logs: true`}),(0,a.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:"Note: This will only affect new requests after the configuration change and proxy restart."})]})]}):null,{show:$}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0",children:[(0,a.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("input",{type:"text",placeholder:"Search by Object ID...",value:w,onChange:e=>k(e.target.value),className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),(0,a.jsxs)("button",{onClick:()=>{E.refetch()},className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",title:"Refresh data",children:[(0,a.jsx)("svg",{className:`w-4 h-4 ${E.isFetching?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,a.jsx)("span",{children:"Refresh"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",ref:u,children:[(0,a.jsx)("label",{htmlFor:"actionFilterDisplay",className:"mr-2 text-sm font-medium text-gray-700 sr-only",children:"Action:"}),(0,a.jsxs)("button",{id:"actionFilterDisplay",onClick:()=>D(!M),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 bg-white w-40 text-left justify-between",children:[(0,a.jsxs)("span",{children:["all"===S&&"All Actions","created"===S&&"Created","updated"===S&&"Updated","deleted"===S&&"Deleted","rotated"===S&&"Rotated"]}),(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),M&&(0,a.jsx)("div",{className:"absolute left-0 mt-2 w-40 bg-white rounded-lg shadow-lg border p-1 z-50",children:(0,a.jsx)("div",{className:"space-y-1",children:[{label:"All Actions",value:"all"},{label:"Created",value:"created"},{label:"Updated",value:"updated"},{label:"Deleted",value:"deleted"},{label:"Rotated",value:"rotated"}].map(e=>(0,a.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${S===e.value?"bg-blue-50 text-blue-600 font-medium":"font-normal"}`,onClick:()=>{C(e.value),D(!1)},children:e.label},e.value))})})]}),(0,a.jsxs)("div",{className:"relative",ref:p,children:[(0,a.jsx)("label",{htmlFor:"tableFilterDisplay",className:"mr-2 text-sm font-medium text-gray-700 sr-only",children:"Table:"}),(0,a.jsxs)("button",{id:"tableFilterDisplay",onClick:()=>A(!z),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 bg-white w-40 text-left justify-between",children:[(0,a.jsxs)("span",{children:["all"===T&&"All Tables","keys"===T&&"Keys","teams"===T&&"Teams","users"===T&&"Users"]}),(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),z&&(0,a.jsx)("div",{className:"absolute left-0 mt-2 w-40 bg-white rounded-lg shadow-lg border p-1 z-50",children:(0,a.jsx)("div",{className:"space-y-1",children:[{label:"All Tables",value:"all"},{label:"Keys",value:"keys"},{label:"Teams",value:"teams"},{label:"Users",value:"users"}].map(e=>(0,a.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${T===e.value?"bg-blue-50 text-blue-600 font-medium":"font-normal"}`,onClick:()=>{L(e.value),A(!1)},children:e.label},e.value))})})]}),(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Showing ",E.isLoading?"...":q," -"," ",E.isLoading?"...":H," of"," ",E.isLoading?"...":O," results"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",E.isLoading?"...":h," of"," ",E.isLoading?"...":B]}),(0,a.jsx)("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:E.isLoading||1===h,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>g(e=>Math.min(B,e+1)),disabled:E.isLoading||h===B,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),(0,a.jsx)(ez.DataTable,{columns:eY,data:F,renderSubComponent:P,getRowCanExpand:()=>!0})]})]})}let eU=({show:e,onOpenSettings:t})=>e?(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start",children:[(0,a.jsx)("div",{className:"text-blue-500 mr-3 flex-shrink-0 mt-0.5",children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,a.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"Request/Response Data Not Available"}),(0,a.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["To view request and response details, enable prompt storage in your LiteLLM configuration by adding the following to your ",(0,a.jsx)("code",{className:"bg-blue-100 px-1 py-0.5 rounded",children:"proxy_config.yaml"})," file",t&&(0,a.jsxs)(a.Fragment,{children:[" or"," ",(0,a.jsx)("button",{onClick:t,className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"open the settings"})," ","to configure this directly."]})]}),(0,a.jsx)("pre",{className:"mt-2 bg-white p-3 rounded border border-blue-200 text-xs font-mono overflow-auto",children:`general_settings:
  store_model_in_db: true
  store_prompts_in_spend_logs: true`}),(0,a.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:"Note: This will only affect new requests after the configuration change."})]})]}):null;var eJ=e.i(362024);let eG=e=>null==e?"-":`$${(0,K.formatNumberWithCommas)(e,8)}`,eQ=e=>null==e?"-":`${(100*e).toFixed(2)}%`,eX=({costBreakdown:e,totalSpend:t})=>{if(!e)return null;let s=void 0!==e.discount_percent&&0!==e.discount_percent||void 0!==e.discount_amount&&0!==e.discount_amount,l=void 0!==e.margin_percent&&0!==e.margin_percent||void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount||void 0!==e.margin_total_amount&&0!==e.margin_total_amount;return void 0!==e.input_cost||void 0!==e.output_cost||s||l?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,a.jsx)(eJ.Collapse,{expandIconPosition:"start",items:[{key:"1",label:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Cost Breakdown"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mr-4",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Total:"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:eG(t)})]})]}),children:(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2 max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Input Cost:"}),(0,a.jsx)("span",{className:"text-gray-900",children:eG(e.input_cost)})]}),(0,a.jsxs)("div",{className:"flex text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Output Cost:"}),(0,a.jsx)("span",{className:"text-gray-900",children:eG(e.output_cost)})]}),void 0!==e.tool_usage_cost&&e.tool_usage_cost>0&&(0,a.jsxs)("div",{className:"flex text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Tool Usage Cost:"}),(0,a.jsx)("span",{className:"text-gray-900",children:eG(e.tool_usage_cost)})]}),e.additional_costs&&Object.keys(e.additional_costs).length>0&&(0,a.jsx)(a.Fragment,{children:Object.entries(e.additional_costs).map(([e,t])=>(0,a.jsxs)("div",{className:"flex text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600 font-medium w-1/3",children:[e,":"]}),(0,a.jsx)("span",{className:"text-gray-900",children:eG(t)})]},e))})]}),(0,a.jsx)("div",{className:"pt-2 border-t border-gray-100 max-w-2xl",children:(0,a.jsxs)("div",{className:"flex text-sm font-semibold",children:[(0,a.jsx)("span",{className:"text-gray-900 w-1/3",children:"Original LLM Cost:"}),(0,a.jsx)("span",{className:"text-gray-900",children:eG(e.original_cost)})]})}),(s||l)&&(0,a.jsxs)("div",{className:"pt-2 space-y-2 max-w-2xl",children:[s&&(0,a.jsxs)("div",{className:"space-y-2",children:[void 0!==e.discount_percent&&0!==e.discount_percent&&(0,a.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"font-medium w-1/3",children:["Discount (",eQ(e.discount_percent),"):"]}),(0,a.jsxs)("span",{className:"text-gray-900",children:["-",eG(e.discount_amount)]})]}),void 0!==e.discount_amount&&void 0===e.discount_percent&&(0,a.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Discount Amount:"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["-",eG(e.discount_amount)]})]})]}),l&&(0,a.jsxs)("div",{className:"space-y-2",children:[void 0!==e.margin_percent&&0!==e.margin_percent&&(0,a.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,a.jsxs)("span",{className:"font-medium w-1/3",children:["Margin (",eQ(e.margin_percent),"):"]}),(0,a.jsxs)("span",{className:"text-gray-900",children:["+",eG((e.margin_total_amount||0)-(e.margin_fixed_amount||0))]})]}),void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount&&(0,a.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Margin:"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["+",eG(e.margin_fixed_amount)]})]})]})]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 max-w-2xl",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-bold text-sm text-gray-900 w-1/3",children:"Final Calculated Cost:"}),(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900",children:eG(e.total_cost??t)})]})})]})}]})}):null};var eZ=e.i(374009),e0=e.i(700514);let e1="Team ID",e2="Key Hash",e5="Request ID",e4="Model",e3="User ID",e6="End User",e8="Status",e7="Key Alias",e9="Error Code",te="Error Message";var tt=e.i(608856),ts=e.i(121229),ts=ts,ta=e.i(166406),tl=e.i(801312),tl=tl,tr=e.i(240647),tn=e.i(475254);let ti=(0,tn.default)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),to=(0,tn.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);var td=e.i(262218),tc=e.i(149192),tm=e.i(536591),tm=tm,tx=e.i(755151);let tu="24px",tp="request",th="response",tg="monospace",tf="#f0f0f0",{Text:ty}=eS.Typography;function tj({log:e,onClose:t,onPrevious:s,onNext:l,statusLabel:r,statusColor:n,environment:i}){let o=e.custom_llm_provider||"",d=o?(0,eE.getProviderLogoAndName)(o):null;return(0,a.jsxs)("div",{style:{padding:"16px 24px",borderBottom:`1px solid ${tf}`,backgroundColor:"#fff",position:"sticky",top:0,zIndex:10},children:[(0,a.jsx)(tb,{model:e.model,providerLogo:d?.logo,providerName:d?.displayName}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[(0,a.jsx)(tv,{requestId:e.request_id}),(0,a.jsx)(tN,{onPrevious:s,onNext:l,onClose:t})]}),(0,a.jsx)(t_,{log:e,statusLabel:r,statusColor:n,environment:i})]})}function tb({model:e,providerLogo:t,providerName:s}){return(0,a.jsxs)(ek.Space,{size:8,style:{marginBottom:8},children:[t&&(0,a.jsx)("img",{src:t,alt:s||"Provider",style:{width:24,height:24},onError:e=>{e.target.style.display="none"}}),(0,a.jsxs)(ek.Space,{size:8,direction:"horizontal",children:[(0,a.jsx)(ty,{strong:!0,style:{fontSize:14},children:e}),s&&(0,a.jsx)(ty,{type:"secondary",style:{fontSize:12},children:s})]})]})}function tv({requestId:e}){return(0,a.jsx)("div",{style:{flex:1,minWidth:0},children:(0,a.jsx)(d.Tooltip,{title:e,children:(0,a.jsx)(ty,{strong:!0,copyable:{text:e,tooltips:["Copy Request ID","Copied!"]},style:{fontSize:16,fontFamily:tg,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e})})})}function tN({onPrevious:e,onNext:t,onClose:s}){let l={border:"1px solid #d9d9d9",borderRadius:4,padding:"0 4px",fontSize:12,fontFamily:"monospace",marginLeft:4,background:"#fafafa"};return(0,a.jsxs)(ek.Space,{size:4,split:(0,a.jsx)("div",{style:{width:1,height:20,background:tf}}),children:[(0,a.jsxs)(X.Button,{type:"text",size:"small",onClick:e,children:[(0,a.jsx)(tm.default,{}),(0,a.jsx)("span",{style:l,children:"K"})]}),(0,a.jsxs)(X.Button,{type:"text",size:"small",onClick:t,children:[(0,a.jsx)(tx.DownOutlined,{}),(0,a.jsx)("span",{style:l,children:"J"})]}),(0,a.jsx)(d.Tooltip,{title:"ESC to close",children:(0,a.jsx)(X.Button,{type:"text",icon:(0,a.jsx)(tc.CloseOutlined,{}),onClick:s})})]})}function t_({log:e,statusLabel:t,statusColor:s,environment:l}){return(0,a.jsxs)(ek.Space,{size:12,children:[(0,a.jsx)(td.Tag,{color:s,children:t}),(0,a.jsxs)(td.Tag,{children:["Env: ",l]}),(0,a.jsxs)(ek.Space,{size:8,children:[(0,a.jsx)(ty,{type:"secondary",style:{fontSize:13},children:(0,i.default)(e.startTime).format("MMM D, YYYY h:mm:ss A")}),(0,a.jsxs)(ty,{type:"secondary",style:{fontSize:13},children:["(",(0,i.default)(e.startTime).fromNow(),")"]})]})]})}var tw=e.i(869216),tk=e.i(175712),tS=e.i(653496),tC=e.i(560445),tT=e.i(91739),tL=e.i(482725);function tM({data:e}){let[t,s]=(0,o.useState)({});if(!e||0===e.length)return null;let l=e=>new Date(1e3*e).toLocaleString();return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,a.jsx)(eJ.Collapse,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Vector Store Requests"}),children:(0,a.jsx)("div",{className:"p-4",children:e.map((e,r)=>{var n,i;return(0,a.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg border p-4 mb-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Query:"}),(0,a.jsx)("span",{className:"font-mono",children:e.query})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Vector Store ID:"}),(0,a.jsx)("span",{className:"font-mono",children:e.vector_store_id})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Provider:"}),(0,a.jsx)("span",{className:"flex items-center",children:(()=>{let{logo:t,displayName:s}=(0,eE.getProviderLogoAndName)(e.custom_llm_provider);return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)("img",{src:t,alt:`${s} logo`,className:"h-5 w-5 mr-2"}),s]})})()})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Start Time:"}),(0,a.jsx)("span",{children:l(e.start_time)})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"End Time:"}),(0,a.jsx)("span",{children:l(e.end_time)})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"font-medium w-1/3",children:"Duration:"}),(0,a.jsx)("span",{children:(n=e.start_time,i=e.end_time,`${((i-n)*1e3).toFixed(2)}ms`)})]})]})]})}),(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Search Results"}),(0,a.jsx)("div",{className:"space-y-2",children:e.vector_store_search_response.data.map((e,l)=>{let n=t[`${r}-${l}`]||!1;return(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 cursor-pointer",onClick:()=>{let e;return e=`${r}-${l}`,void s(t=>({...t,[e]:!t[e]}))},children:[(0,a.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${n?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("span",{className:"font-medium mr-2",children:["Result ",l+1]}),(0,a.jsxs)("span",{className:"text-gray-500 text-sm",children:["Score: ",(0,a.jsx)("span",{className:"font-mono",children:e.score.toFixed(4)})]})]})]}),n&&(0,a.jsx)("div",{className:"p-3 border-t bg-white",children:e.content.map((e,t)=>(0,a.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.type}),(0,a.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap break-all bg-gray-50 p-2 rounded",children:e.text})]},t))})]},l)})})]},r)})})}]})})}let{Text:tD}=eS.Typography;function tz({value:e,maxWidth:t=180}){return e?(0,a.jsx)(d.Tooltip,{title:e,children:(0,a.jsx)(tD,{copyable:{text:e,tooltips:["Copy","Copied!"]},style:{maxWidth:t,display:"inline-block",verticalAlign:"bottom",fontFamily:tg,fontSize:12},ellipsis:!0,children:e})}):(0,a.jsx)(tD,{type:"secondary",children:"-"})}let{Text:tA}=eS.Typography;function tE({prompt:e=0,completion:t=0,total:s=0}){return(0,a.jsxs)(tA,{children:[s.toLocaleString()," (",e.toLocaleString()," prompt tokens + ",t.toLocaleString()," completion tokens)"]})}let tI=e=>!!e&&e instanceof Date,tR=e=>"object"==typeof e&&null!==e,tO=e=>!!e&&e instanceof Object&&"function"==typeof e;function tB(e,t){return void 0===t&&(t=!1),!e||t?`"${e}"`:e}function tF(e){let{field:t,value:s,data:a,lastElement:l,openBracket:r,closeBracket:n,level:i,style:d,shouldExpandNode:c,clickToExpandNode:m,outerRef:x,beforeExpandChange:u}=e,p=(0,o.useRef)(!1),[h,g]=(0,o.useState)(()=>c(i,s,t)),f=(0,o.useRef)(null);(0,o.useEffect)(()=>{p.current?g(c(i,s,t)):p.current=!0},[c]);let y=(0,o.useId)();if(0===a.length)return function(e){let{field:t,openBracket:s,closeBracket:a,lastElement:l,style:r}=e;return(0,o.createElement)("div",{className:r.basicChildStyle,role:"treeitem","aria-selected":void 0},(t||""===t)&&(0,o.createElement)("span",{className:r.label},tB(t,r.quotesForFieldNames),":"),(0,o.createElement)("span",{className:r.punctuation},s),(0,o.createElement)("span",{className:r.punctuation},a),!l&&(0,o.createElement)("span",{className:r.punctuation},","))}({field:t,openBracket:r,closeBracket:n,lastElement:l,style:d});let j=h?d.collapseIcon:d.expandIcon,b=h?d.ariaLables.collapseJson:d.ariaLables.expandJson,v=i+1,N=a.length-1,_=e=>{h!==e&&(!u||u({level:i,value:s,field:t,newExpandValue:e}))&&g(e)},w=e=>{if("ArrowRight"===e.key||"ArrowLeft"===e.key)e.preventDefault(),_("ArrowRight"===e.key);else if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();let t="ArrowUp"===e.key?-1:1;if(!x.current)return;let s=x.current.querySelectorAll("[role=button]"),a=-1;for(let e=0;e<s.length;e++)if(0===s[e].tabIndex){a=e;break}if(a<0)return;let l=(a+t+s.length)%s.length;s[a].tabIndex=-1,s[l].tabIndex=0,s[l].focus()}},k=()=>{var e;_(!h);let t=f.current;if(!t)return;let s=null==(e=x.current)?void 0:e.querySelector('[role=button][tabindex="0"]');s&&(s.tabIndex=-1),t.tabIndex=0,t.focus()};return(0,o.createElement)("div",{className:d.basicChildStyle,role:"treeitem","aria-expanded":h,"aria-selected":void 0},(0,o.createElement)("span",{className:j,onClick:k,onKeyDown:w,role:"button","aria-label":b,"aria-expanded":h,"aria-controls":h?y:void 0,ref:f,tabIndex:0===i?0:-1}),(t||""===t)&&(m?(0,o.createElement)("span",{className:d.clickableLabel,onClick:k,onKeyDown:w},tB(t,d.quotesForFieldNames),":"):(0,o.createElement)("span",{className:d.label},tB(t,d.quotesForFieldNames),":")),(0,o.createElement)("span",{className:d.punctuation},r),h?(0,o.createElement)("ul",{id:y,role:"group",className:d.childFieldsContainer},a.map((e,t)=>(0,o.createElement)(tK,{key:e[0]||t,field:e[0],value:e[1],style:d,lastElement:t===N,level:v,shouldExpandNode:c,clickToExpandNode:m,beforeExpandChange:u,outerRef:x}))):(0,o.createElement)("span",{className:d.collapsedContent,onClick:k,onKeyDown:w}),(0,o.createElement)("span",{className:d.punctuation},n),!l&&(0,o.createElement)("span",{className:d.punctuation},","))}function t$(e){let{field:t,value:s,style:a,lastElement:l,shouldExpandNode:r,clickToExpandNode:n,level:i,outerRef:o,beforeExpandChange:d}=e;return tF({field:t,value:s,lastElement:l||!1,level:i,openBracket:"{",closeBracket:"}",style:a,shouldExpandNode:r,clickToExpandNode:n,data:Object.keys(s).map(e=>[e,s[e]]),outerRef:o,beforeExpandChange:d})}function tP(e){let{field:t,value:s,style:a,lastElement:l,level:r,shouldExpandNode:n,clickToExpandNode:i,outerRef:o,beforeExpandChange:d}=e;return tF({field:t,value:s,lastElement:l||!1,level:r,openBracket:"[",closeBracket:"]",style:a,shouldExpandNode:n,clickToExpandNode:i,data:s.map(e=>[void 0,e]),outerRef:o,beforeExpandChange:d})}function tq(e){let t,{field:s,value:a,style:l,lastElement:r}=e,n=l.otherValue;if(null===a)t="null",n=l.nullValue;else if(void 0===a)t="undefined",n=l.undefinedValue;else if("string"==typeof a||a instanceof String){var i;i=!l.noQuotesForStringValues,t=l.stringifyStringValues?JSON.stringify(a):i?`"${a}"`:a,n=l.stringValue}else if("boolean"==typeof a||a instanceof Boolean)t=a?"true":"false",n=l.booleanValue;else if("number"==typeof a||a instanceof Number)t=a.toString(),n=l.numberValue;else"bigint"==typeof a||a instanceof BigInt?(t=`${a.toString()}n`,n=l.numberValue):t=tI(a)?a.toISOString():tO(a)?"function() { }":a.toString();return(0,o.createElement)("div",{className:l.basicChildStyle,role:"treeitem","aria-selected":void 0},(s||""===s)&&(0,o.createElement)("span",{className:l.label},tB(s,l.quotesForFieldNames),":"),(0,o.createElement)("span",{className:n},t),!r&&(0,o.createElement)("span",{className:l.punctuation},","))}function tK(e){let t=e.value;return Array.isArray(t)?(0,o.createElement)(tP,Object.assign({},e)):!tR(t)||tI(t)||tO(t)?(0,o.createElement)(tq,Object.assign({},e)):(0,o.createElement)(t$,Object.assign({},e))}let tH={container:"_2IvMF _GzYRV",basicChildStyle:"_2bkNM",childFieldsContainer:"_1BXBN",label:"_1MGIk",clickableLabel:"_2YKJg _1MGIk _1MFti",nullValue:"_2T6PJ",undefinedValue:"_1Gho6",stringValue:"_vGjyY",booleanValue:"_3zQKs",numberValue:"_1bQdo",otherValue:"_1xvuR",punctuation:"_3uHL6 _3eOF8",collapseIcon:"_oLqym _f10Tu _1MFti _1LId0",expandIcon:"_2AXVT _f10Tu _1MFti _1UmXx",collapsedContent:"_2KJWg _1pNG9 _1MFti",noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:{collapseJson:"collapse JSON",expandJson:"expand JSON"},stringifyStringValues:!1},tV=()=>!0,tY=e=>{let{data:t,style:s=tH,shouldExpandNode:a=tV,clickToExpandNode:l=!1,beforeExpandChange:r,compactTopLevel:n,...i}=e,d=(0,o.useRef)(null);return(0,o.createElement)("div",Object.assign({"aria-label":"JSON view"},i,{className:s.container,ref:d,role:"tree"}),n&&tR(t)?Object.entries(t).map(e=>{let[t,n]=e;return(0,o.createElement)(tK,{key:t,field:t,value:n,style:{...tH,...s},lastElement:!0,level:1,shouldExpandNode:a,clickToExpandNode:l,beforeExpandChange:r,outerRef:d})}):(0,o.createElement)(tK,{value:t,style:{...tH,...s},lastElement:!0,level:0,shouldExpandNode:a,clickToExpandNode:l,outerRef:d,beforeExpandChange:r}))},{Text:tW}=eS.Typography;function tU({data:e}){return e?(0,a.jsx)("div",{style:{maxHeight:400,overflow:"auto",background:"#fafafa",padding:12,borderRadius:4},children:(0,a.jsx)("div",{className:"[&_[role='tree']]:bg-white [&_[role='tree']]:text-slate-900",children:(0,a.jsx)(tY,{data:e,style:tH,clickToExpandNode:!0})})}):(0,a.jsx)(tW,{type:"secondary",children:"No data"})}function tJ(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}function tG(e){return Array.isArray(e)?e:e?[e]:[]}function tQ(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}var tX=e.i(366308),tZ=e.i(291542);let{Text:t0}=eS.Typography;function t1({tool:e}){let t=Object.entries(e.parameters?.properties||{}).map(([t,s])=>({key:t,name:t,type:s.type||"any",description:s.description||"-",required:e.parameters?.required?.includes(t)||!1})),s=[{title:"Parameter",dataIndex:"name",key:"name",render:(e,t)=>(0,a.jsxs)(t0,{code:!0,children:[e,t.required&&(0,a.jsx)(t0,{type:"danger",children:"*"})]})},{title:"Type",dataIndex:"type",key:"type",render:e=>(0,a.jsx)(t0,{code:!0,style:{color:"#1890ff"},children:e})},{title:"Description",dataIndex:"description",key:"description",render:e=>(0,a.jsx)(t0,{type:"secondary",children:e})}];return(0,a.jsxs)("div",{children:[e.description&&(0,a.jsx)("div",{style:{marginBottom:16},children:(0,a.jsx)(t0,{style:{lineHeight:1.6},children:e.description})}),t.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)(t0,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:8},children:"Parameters"}),(0,a.jsx)(tZ.Table,{dataSource:t,columns:s,pagination:!1,size:"small",bordered:!0})]}),e.called&&e.callData&&(0,a.jsxs)("div",{style:{marginTop:16},children:[(0,a.jsx)(t0,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:8},children:"Called With"}),(0,a.jsx)("div",{style:{background:"#f6ffed",border:"1px solid #b7eb8f",borderRadius:4,padding:12},children:(0,a.jsx)("pre",{style:{margin:0,fontSize:12,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(e.callData.arguments,null,2)})})]})]})}function t2({tool:e}){let t={type:"function",function:{name:e.name,description:e.description,parameters:e.parameters}};return(0,a.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:12,background:"#fafafa",padding:12,borderRadius:4,maxHeight:300,overflow:"auto"},children:JSON.stringify(t,null,2)})}let{Text:t5}=eS.Typography;function t4({tool:e}){let[t,s]=(0,o.useState)("formatted");return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12},children:[(0,a.jsx)(t5,{type:"secondary",style:{fontSize:12},children:"Description"}),(0,a.jsxs)(tT.Radio.Group,{size:"small",value:t,onChange:e=>s(e.target.value),children:[(0,a.jsx)(tT.Radio.Button,{value:"formatted",children:"Formatted"}),(0,a.jsx)(tT.Radio.Button,{value:"json",children:"JSON"})]})]}),"formatted"===t?(0,a.jsx)(t1,{tool:e}):(0,a.jsx)(t2,{tool:e})]})}let{Text:t3}=eS.Typography;function t6({tool:e}){let[t,s]=(0,o.useState)(!1);return(0,a.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:8,overflow:"hidden"},children:[(0,a.jsxs)("div",{onClick:()=>s(!t),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",cursor:"pointer",background:t?"#fafafa":"#fff",transition:"background 0.2s"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,a.jsx)(tX.ToolOutlined,{style:{color:"#8c8c8c",fontSize:14}}),(0,a.jsxs)(t3,{style:{fontSize:14},children:[e.index,". ",e.name]})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,a.jsx)(td.Tag,{color:e.called?"blue":"default",children:e.called?"called":"not called"}),t?(0,a.jsx)(tx.DownOutlined,{style:{fontSize:12,color:"#8c8c8c"}}):(0,a.jsx)(tr.RightOutlined,{style:{fontSize:12,color:"#8c8c8c"}})]})]}),t&&(0,a.jsx)("div",{style:{padding:"16px",borderTop:"1px solid #f0f0f0",background:"#fff"},children:(0,a.jsx)(t4,{tool:e})})]})}let{Text:t8}=eS.Typography;function t7({log:e}){let t=function(e){let t,s=!(t=tQ(e.proxy_server_request||e.messages))||Array.isArray(t)?[]:"object"==typeof t&&t.tools&&Array.isArray(t.tools)?t.tools:[];if(0===s.length)return[];let a=function(e){let t=tQ(e.response);if(!t||"object"!=typeof t)return[];let s=t.choices;if(Array.isArray(s)&&s.length>0){let e=s[0].message;if(e&&Array.isArray(e.tool_calls))return e.tool_calls}return[]}(e),l=new Set(a.map(e=>e.function?.name).filter(Boolean)),r=new Map;return a.forEach(e=>{let t=e.function?.name;t&&r.set(t,{id:e.id,name:t,arguments:function(e){try{return JSON.parse(e)}catch{return{}}}(e.function?.arguments||"{}")})}),s.map((e,t)=>{let s=e.function||{name:`Tool ${t+1}`},a=s.name||`Tool ${t+1}`;return{index:t+1,name:a,description:s.description||"",parameters:s.parameters||{},called:l.has(a),callData:r.get(a)}})}(e);if(0===t.length)return null;let s=t.length,l=t.filter(e=>e.called).length,r=t.slice(0,2).map(e=>e.name).join(", "),n=t.length>2;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,a.jsx)(eJ.Collapse,{expandIconPosition:"start",items:[{key:"1",label:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Tools"}),(0,a.jsxs)(t8,{type:"secondary",style:{fontSize:14},children:[s," provided, ",l," called"]}),(0,a.jsxs)(t8,{type:"secondary",style:{fontSize:14},children:["â€¢ ",r,n&&"..."]})]}),children:(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:t.map(e=>(0,a.jsx)(t6,{tool:e},e.name))})}]})})}let t9=e=>{if(!e)return{};if("string"==typeof e)try{return JSON.parse(e)}catch{return{raw:e}}return e};var se=e.i(998573);e.i(247167);var st=e.i(931067);let ss={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"};var sa=e.i(9583),sl=o.forwardRef(function(e,t){return o.createElement(sa.default,(0,st.default)({},e,{ref:t,icon:ss}))}),tm=tm;let{Text:sr}=eS.Typography;function sn({type:e,tokens:t,cost:s,onCopy:l,isCollapsed:r,onToggleCollapse:n}){return(0,a.jsxs)("div",{onClick:n,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",borderBottom:r?"none":"1px solid #f0f0f0",background:"#fafafa",cursor:n?"pointer":"default",transition:"background 0.15s ease"},onMouseEnter:e=>{n&&(e.currentTarget.style.background="#f5f5f5")},onMouseLeave:e=>{e.currentTarget.style.background="#fafafa"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[n&&(0,a.jsx)("div",{style:{display:"flex",alignItems:"center"},children:r?(0,a.jsx)(tx.DownOutlined,{style:{fontSize:10,color:"#8c8c8c"}}):(0,a.jsx)(tm.default,{style:{fontSize:10,color:"#8c8c8c"}})}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:["input"===e?(0,a.jsx)(sl,{style:{color:"#8c8c8c",fontSize:14}}):(0,a.jsx)("span",{style:{fontSize:14,filter:"grayscale(1)",opacity:.6},children:"âœ¨"}),(0,a.jsx)(sr,{style:{fontWeight:500,fontSize:14},children:"input"===e?"Input":"Output"})]}),void 0!==t&&(0,a.jsxs)(sr,{type:"secondary",style:{fontSize:12},children:["Tokens: ",t.toLocaleString()]}),void 0!==s&&(0,a.jsxs)(sr,{type:"secondary",style:{fontSize:12},children:["Cost: $",s.toFixed(6)]})]}),(0,a.jsx)(d.Tooltip,{title:"Copy",children:(0,a.jsx)(X.Button,{type:"text",size:"small",icon:(0,a.jsx)(ta.CopyOutlined,{}),onClick:e=>{e.stopPropagation(),l()}})})]})}let{Text:si}=eS.Typography;function so({label:e,content:t,defaultExpanded:s=!1}){let[l,r]=(0,o.useState)(s),[n,i]=(0,o.useState)(!1),d=t?.length||0;return t&&0!==d?(0,a.jsxs)("div",{style:{marginBottom:8},children:[(0,a.jsxs)("div",{onClick:()=>r(!l),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",padding:"4px 0",borderRadius:4,background:n?"#f5f5f5":"transparent",transition:"background 0.15s ease",marginBottom:4*!!l},children:[l?(0,a.jsx)(tx.DownOutlined,{style:{fontSize:10,color:"#8c8c8c"}}):(0,a.jsx)(tr.RightOutlined,{style:{fontSize:10,color:"#8c8c8c"}}),(0,a.jsx)(si,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase"},children:e}),(0,a.jsxs)(si,{type:"secondary",style:{fontSize:10},children:["(",d.toLocaleString()," chars)"]})]}),(0,a.jsx)("div",{style:{maxHeight:l?"2000px":"0px",overflow:"hidden",transition:"max-height 0.2s ease-out, opacity 0.2s ease-out",opacity:+!!l},children:(0,a.jsx)("div",{style:{paddingLeft:16,fontSize:13,lineHeight:1.7,color:"#262626",borderLeft:"1px solid #f0f0f0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:t})})]}):null}let{Text:sd}=eS.Typography;function sc({tool:e,compact:t=!1}){return(0,a.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:6,padding:t?"6px 10px":"10px 14px",marginTop:8,fontFamily:"monospace",fontSize:12,position:"relative"},children:[(0,a.jsx)("div",{style:{position:"absolute",top:-8,left:12,background:"#fff",padding:"0 6px",fontSize:10,color:"#8c8c8c",border:"1px solid #e9ecef",borderRadius:3},children:"function"}),(0,a.jsx)(sd,{strong:!0,style:{fontSize:13,display:"block",marginBottom:6},children:e.name}),Object.keys(e.arguments).length>0&&(0,a.jsx)("div",{children:Object.entries(e.arguments).map(([e,t])=>(0,a.jsxs)("div",{style:{marginBottom:2},children:[(0,a.jsxs)(sd,{type:"secondary",style:{fontSize:12},children:[e,":"," "]}),(0,a.jsx)(sd,{style:{fontSize:12},children:JSON.stringify(t)})]},e))})]})}let{Text:sm}=eS.Typography;function sx({label:e,content:t,toolCalls:s,isCompact:l=!1}){let r=t&&"null"!==t&&t.length>0?t:null,n=s&&s.length>0;return r||n?(0,a.jsxs)("div",{style:{marginBottom:8*!!l},children:[(0,a.jsx)(sm,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase",display:"block",marginBottom:3},children:e}),r&&(0,a.jsx)("div",{style:{fontSize:13,lineHeight:1.7,color:"#262626",whiteSpace:"pre-wrap",wordBreak:"break-word",marginBottom:6*!!n},children:r}),n&&(0,a.jsx)("div",{children:s.map((e,t)=>(0,a.jsx)(sc,{tool:e,compact:l},e.id||t))})]}):null}let{Text:su}=eS.Typography;function sp({messages:e}){let[t,s]=(0,o.useState)(!1),[l,r]=(0,o.useState)(!1);return 0===e.length?null:(0,a.jsxs)("div",{style:{marginBottom:8},children:[(0,a.jsxs)("div",{onClick:()=>s(!t),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",padding:"4px 0",borderRadius:4,background:l?"#f5f5f5":"transparent",transition:"background 0.15s ease",marginBottom:4*!!t},children:[t?(0,a.jsx)(tx.DownOutlined,{style:{fontSize:10,color:"#8c8c8c"}}):(0,a.jsx)(tr.RightOutlined,{style:{fontSize:10,color:"#8c8c8c"}}),(0,a.jsxs)(su,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase"},children:["HISTORY (",e.length," message",1!==e.length?"s":"",")"]})]}),(0,a.jsx)("div",{style:{maxHeight:t?"2000px":"0px",overflow:"hidden",transition:"max-height 0.2s ease-out, opacity 0.2s ease-out",opacity:+!!t},children:(0,a.jsx)("div",{style:{paddingLeft:16,borderLeft:"1px solid #f0f0f0"},children:e.map((e,t)=>(0,a.jsx)(sx,{label:e.role.toUpperCase(),content:e.content,toolCalls:e.toolCalls,isCompact:!0},t))})})]})}function sh({messages:e,promptTokens:t,inputCost:s}){let[l,r]=(0,o.useState)(!1);if(0===e.length)return null;let n=e.find(e=>"system"===e.role),i=e.filter(e=>"system"!==e.role),d=i.length>0?i[i.length-1]:null,c=i.slice(0,-1);return(0,a.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,marginBottom:8,overflow:"hidden"},children:[(0,a.jsx)(sn,{type:"input",tokens:t,cost:s,onCopy:()=>{let e=d?.content||"";navigator.clipboard.writeText(e),se.message.success("Input copied")},isCollapsed:l,onToggleCollapse:()=>r(!l)}),(0,a.jsx)("div",{style:{maxHeight:l?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!l},children:(0,a.jsxs)("div",{style:{padding:"12px 16px"},children:[n&&(0,a.jsx)(so,{label:"SYSTEM",content:n.content,defaultExpanded:!!(n.content&&n.content.length<200)}),c.length>0&&(0,a.jsx)(sp,{messages:c}),d&&(0,a.jsx)(sx,{label:d.role.toUpperCase(),content:d.content,toolCalls:d.toolCalls})]})})]})}let{Text:sg}=eS.Typography;function sf({message:e,completionTokens:t,outputCost:s}){let[l,r]=(0,o.useState)(!1),n=()=>{if(!e)return;let t=e.content||"";navigator.clipboard.writeText(t),se.message.success("Output copied")};return e?(0,a.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,overflow:"hidden"},children:[(0,a.jsx)(sn,{type:"output",tokens:t,cost:s,onCopy:n,isCollapsed:l,onToggleCollapse:()=>r(!l)}),(0,a.jsx)("div",{style:{maxHeight:l?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!l},children:(0,a.jsx)("div",{style:{padding:"12px 16px"},children:(0,a.jsx)(sx,{label:"ASSISTANT",content:e.content,toolCalls:e.toolCalls})})})]}):(0,a.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,overflow:"hidden"},children:[(0,a.jsx)(sn,{type:"output",tokens:t,cost:s,onCopy:n,isCollapsed:l,onToggleCollapse:()=>r(!l)}),(0,a.jsx)("div",{style:{maxHeight:l?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!l},children:(0,a.jsx)("div",{style:{padding:"12px 16px"},children:(0,a.jsx)(sg,{type:"secondary",style:{fontSize:13,fontStyle:"italic"},children:"No response data available"})})})]})}function sy({request:e,response:t,metrics:s}){let l,r,n,{requestMessages:i,responseMessage:o}=(l=[],e?.messages&&Array.isArray(e.messages)&&e.messages.forEach(e=>{let t;l.push({role:e.role||"user",content:"string"==typeof(t=e.content)?t:Array.isArray(t)?t.map(e=>"string"==typeof e?e:"text"===e.type?e.text:"image_url"===e.type?"[Image]":JSON.stringify(e)).join("\n"):JSON.stringify(t),toolCallId:e.tool_call_id})}),r=null,(n=t?.choices?.[0]?.message)&&(r={role:n.role||"assistant",content:n.content||"",toolCalls:(e=>{if(e&&Array.isArray(e))return e.map(e=>({id:e.id||"",name:e.function?.name||"unknown",arguments:t9(e.function?.arguments)}))})(n.tool_calls)}),{requestMessages:l,responseMessage:r});return(0,a.jsxs)("div",{children:[(0,a.jsx)(sh,{messages:i,promptTokens:s?.prompt_tokens,inputCost:s?.input_cost}),(0,a.jsx)(sf,{message:o,completionTokens:s?.completion_tokens,outputCost:s?.output_cost})]})}let{Text:sj}=eS.Typography;function sb({logEntry:e,onOpenSettings:t,isLoadingDetails:s=!1,accessToken:l,parentGuardrailInfo:r,parentLogEntry:n}){var i,o;let d=e.metadata||{},c="failure"===d.status,m=c?d.error_information:null,x=!!(i=e.messages)&&(Array.isArray(i)?i.length>0:"object"==typeof i&&Object.keys(i).length>0),u=!!(o=e.response)&&Object.keys(tJ(o)).length>0,p=!x&&!u&&!c&&!s,h="call_mcp_tool"===e.call_type||"list_mcp_tools"===e.call_type,g=d?.guardrail_information||(h?r:void 0),f=tG(g),y=f.length>0,j=f.reduce((e,t)=>{let s=t?.masked_entity_count;return s?e+Object.values(s).reduce((e,t)=>"number"==typeof t?e+t:e,0):e},0),b=0===f.length?"-":1===f.length?f[0]?.guardrail_name??"-":`${f.length} guardrails`,v=h&&n?n:e,N=d.vector_store_request_metadata&&Array.isArray(d.vector_store_request_metadata)&&d.vector_store_request_metadata.length>0;return(0,a.jsxs)("div",{style:{padding:`${tu} ${tu} 0`},children:[c&&m&&(0,a.jsx)(tC.Alert,{type:"error",showIcon:!0,message:"Request Failed",description:(0,a.jsx)(sv,{errorInfo:m}),className:"mb-6"}),e.request_tags&&Object.keys(e.request_tags).length>0&&(0,a.jsx)(sN,{tags:e.request_tags}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,a.jsx)(tk.Card,{title:"Request Details",size:"small",bordered:!1,style:{marginBottom:0},children:(0,a.jsxs)(tw.Descriptions,{column:2,size:"small",children:[(0,a.jsx)(tw.Descriptions.Item,{label:"Model",children:e.model}),(0,a.jsx)(tw.Descriptions.Item,{label:"Provider",children:e.custom_llm_provider||"-"}),(0,a.jsx)(tw.Descriptions.Item,{label:"Call Type",children:e.call_type}),(0,a.jsx)(tw.Descriptions.Item,{label:"Model ID",children:(0,a.jsx)(tz,{value:e.model_id})}),(0,a.jsx)(tw.Descriptions.Item,{label:"API Base",children:(0,a.jsx)(tz,{value:e.api_base,maxWidth:200})}),e.requester_ip_address&&(0,a.jsx)(tw.Descriptions.Item,{label:"IP Address",children:e.requester_ip_address}),y&&(0,a.jsx)(tw.Descriptions.Item,{label:"Guardrail",children:(0,a.jsx)(s_,{label:b,maskedCount:j})})]})})}),(0,a.jsx)(sw,{logEntry:e,metadata:d}),(0,a.jsx)(eX,{costBreakdown:d?.cost_breakdown,totalSpend:e.spend||0}),(0,a.jsx)(t7,{log:e}),p&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(eU,{show:p,onOpenSettings:t})}),s?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6 p-8 text-center",children:[(0,a.jsx)(tL.Spin,{size:"default"}),(0,a.jsx)("div",{style:{marginTop:8,color:"#999"},children:"Loading request & response data..."})]}):(0,a.jsx)(sk,{hasResponse:u,hasError:c,getRawRequest:()=>tJ(e.proxy_server_request||e.messages),getFormattedResponse:()=>c&&m?{error:{message:m.error_message||"An error occurred",type:m.error_class||"error",code:m.error_code||"unknown",param:null}}:tJ(e.response),logEntry:e}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6 p-4",children:(0,a.jsx)(S,{accessToken:l??null,logEntry:{request_id:v.request_id,user:v.user,model:v.model,startTime:v.startTime,metadata:h&&n?n.metadata:e.metadata}})}),y&&(0,a.jsx)("div",{id:"guardrail-section",children:(0,a.jsx)(q,{data:g,accessToken:l??null,logEntry:{request_id:v.request_id,user:v.user,model:v.model,startTime:v.startTime,metadata:h&&n?n.metadata:e.metadata}})}),N&&(0,a.jsx)(tM,{data:d.vector_store_request_metadata}),e.metadata&&Object.keys(e.metadata).length>0&&(0,a.jsx)(sC,{metadata:e.metadata}),(0,a.jsx)("div",{style:{height:tu}})]})}function sv({errorInfo:e}){return(0,a.jsxs)("div",{children:[e.error_code&&(0,a.jsxs)("div",{children:[(0,a.jsx)(sj,{strong:!0,children:"Error Code:"})," ",e.error_code]}),e.error_message&&(0,a.jsxs)("div",{children:[(0,a.jsx)(sj,{strong:!0,children:"Message:"})," ",e.error_message]})]})}function sN({tags:e}){return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden p-4 mb-6",children:[(0,a.jsx)(sj,{strong:!0,style:{display:"block",marginBottom:8,fontSize:16},children:"Tags"}),(0,a.jsx)(ek.Space,{size:8,wrap:!0,children:Object.entries(e).map(([e,t])=>(0,a.jsxs)(td.Tag,{children:[e,": ",String(t)]},e))})]})}function s_({label:e,maskedCount:t}){return(0,a.jsxs)(ek.Space,{size:8,children:[(0,a.jsx)("a",{onClick:()=>{let e=document.getElementById("guardrail-section");e&&e.scrollIntoView({behavior:"smooth"})},style:{cursor:"pointer"},children:e}),t>0&&(0,a.jsxs)(td.Tag,{color:"blue",children:[t," masked"]})]})}function sw({logEntry:e,metadata:t}){let s=e.cache_hit||t?.additional_usage_values?.cache_read_input_tokens&&t.additional_usage_values.cache_read_input_tokens>0;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,a.jsx)(tk.Card,{title:"Metrics",size:"small",bordered:!1,style:{marginBottom:0},children:(0,a.jsxs)(tw.Descriptions,{column:2,size:"small",children:[(0,a.jsx)(tw.Descriptions.Item,{label:"Tokens",children:(0,a.jsx)(tE,{prompt:e.prompt_tokens,completion:e.completion_tokens,total:e.total_tokens})}),(0,a.jsxs)(tw.Descriptions.Item,{label:"Cost",children:["$",(0,K.formatNumberWithCommas)(e.spend||0,8)]}),(0,a.jsxs)(tw.Descriptions.Item,{label:"Duration",children:[e.duration?.toFixed(3)," s"]}),s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tw.Descriptions.Item,{label:"Cache Hit",children:(0,a.jsx)(td.Tag,{color:e.cache_hit?"green":"default",children:e.cache_hit||"None"})}),t?.additional_usage_values?.cache_read_input_tokens>0&&(0,a.jsx)(tw.Descriptions.Item,{label:"Cache Read Tokens",children:(0,K.formatNumberWithCommas)(t.additional_usage_values.cache_read_input_tokens)}),t?.additional_usage_values?.cache_creation_input_tokens>0&&(0,a.jsx)(tw.Descriptions.Item,{label:"Cache Creation Tokens",children:(0,K.formatNumberWithCommas)(t.additional_usage_values.cache_creation_input_tokens)})]}),t?.litellm_overhead_time_ms!==void 0&&null!==t.litellm_overhead_time_ms&&(0,a.jsxs)(tw.Descriptions.Item,{label:"LiteLLM Overhead",children:[t.litellm_overhead_time_ms.toFixed(2)," ms"]}),(0,a.jsx)(tw.Descriptions.Item,{label:"Start Time",children:(0,i.default)(e.startTime).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}),(0,a.jsx)(tw.Descriptions.Item,{label:"End Time",children:(0,i.default)(e.endTime).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")})]})})})}function sk({hasResponse:e,hasError:t,getRawRequest:s,getFormattedResponse:l,logEntry:r}){let[n,i]=(0,o.useState)(tp),[d,c]=(0,o.useState)("pretty"),m=r.spend||0,x=r.prompt_tokens||0,u=r.completion_tokens||0,p=x+u;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,a.jsx)(eJ.Collapse,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},onClick:e=>{e.target.closest(".ant-radio-group")&&e.stopPropagation()},children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",style:{margin:0},children:"Request & Response"}),(0,a.jsxs)(tT.Radio.Group,{size:"small",value:d,onChange:e=>c(e.target.value),children:[(0,a.jsx)(tT.Radio.Button,{value:"pretty",children:"Pretty"}),(0,a.jsx)(tT.Radio.Button,{value:"json",children:"JSON"})]})]}),children:(0,a.jsx)("div",{children:"pretty"===d?(0,a.jsx)(sy,{request:s(),response:l(),metrics:{prompt_tokens:x,completion_tokens:u,input_cost:p>0?m*x/p:0,output_cost:p>0?m*u/p:0}}):(0,a.jsx)(tS.Tabs,{activeKey:n,onChange:e=>i(e),tabBarExtraContent:(0,a.jsx)(sj,{copyable:{text:JSON.stringify(n===tp?s():l(),null,2),tooltips:["Copy JSON","Copied!"]},disabled:n===th&&!e&&!t}),items:[{key:tp,label:"Request",children:(0,a.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,a.jsx)(tU,{data:s(),mode:"formatted"})})},{key:th,label:"Response",children:(0,a.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:e||t?(0,a.jsx)(tU,{data:l(),mode:"formatted"}):(0,a.jsx)("div",{style:{textAlign:"center",padding:20,color:"#999",fontStyle:"italic"},children:"Response data not available"})})}]})})}]})})}function sS({guardrailEntries:e}){let t=e.every(e=>{let t=e?.guardrail_status||e?.status;return"pass"===t||"passed"===t||"success"===t});return(0,a.jsx)("div",{style:{textAlign:"left",marginBottom:12},children:(0,a.jsxs)("div",{onClick:()=>{let e=document.getElementById("guardrail-section");e&&e.scrollIntoView({behavior:"smooth"})},style:{display:"inline-flex",alignItems:"center",gap:6,padding:"4px 12px",borderRadius:16,cursor:"pointer",fontSize:13,fontWeight:500,backgroundColor:t?"#f0fdf4":"#fef2f2",color:t?"#15803d":"#b91c1c",border:`1px solid ${t?"#bbf7d0":"#fecaca"}`},children:[t?"âœ“":"âœ—"," ",e.length," guardrail",1!==e.length?"s":""," evaluated",(0,a.jsx)("span",{style:{fontSize:11,opacity:.7},children:"â†“"})]})})}function sC({metadata:e}){return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,a.jsx)(eJ.Collapse,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Metadata"}),children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:(0,a.jsx)(sj,{copyable:{text:JSON.stringify(e,null,2),tooltips:["Copy Metadata","Copied!"]}})}),(0,a.jsx)("pre",{style:{maxHeight:300,overflowY:"auto",fontSize:12,fontFamily:tg,whiteSpace:"pre-wrap",wordBreak:"break-all",margin:0},children:JSON.stringify(e,null,2)})]})}]})})}var sT=e.i(135214);function sL({row:e,isSelected:t,onClick:s}){let l=eB.includes(e.call_type),r=null!=e.duration?e.duration.toFixed(3):e.startTime&&e.endTime?((Date.parse(e.endTime)-Date.parse(e.startTime))/1e3).toFixed(3):"-";return(0,a.jsxs)("button",{type:"button",className:`w-full text-left pl-8 pr-2 py-1 transition-colors ${t?"bg-blue-50":"hover:bg-slate-100"}`,onClick:s,children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[l?(0,a.jsx)(to,{size:12,className:"text-slate-500 flex-shrink-0"}):(0,a.jsx)(ti,{size:12,className:"text-slate-500 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-xs font-medium text-slate-900 truncate",children:function(e,t){let s=(t||"").trim();if(eB.includes(e))return s.replace(/^mcp:\s*/i,"").split("/").pop()||s||"mcp_tool";let a=(s.split("/").pop()||s).replace(/-20\d{6}.*$/i,"").replace(/:.*$/,""),l=a.match(/claude-[a-z0-9-]+/i);return l?l[0]:a||"llm_call"}(e.call_type,e.model)})]}),(0,a.jsxs)("div",{className:"text-[10px] text-slate-500 mt-0 flex items-center gap-1.5 font-mono",children:[(0,a.jsxs)("span",{children:[r,"s"]}),e.spend?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Â·"}),(0,a.jsx)("span",{children:(0,K.getSpendString)(e.spend)})]}):null,e.total_tokens?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Â·"}),(0,a.jsxs)("span",{children:[e.total_tokens," tok"]})]}):null]})]})}function sM({open:e,onClose:t,logEntry:s,sessionId:l,accessToken:n,onOpenSettings:i,allLogs:d=[],onSelectLog:c,startTime:m}){let x=!!l,[u,p]=(0,o.useState)(null),[h,g]=(0,o.useState)(!1),[f,y]=(0,o.useState)(!1),{data:j=[]}=(0,r.useQuery)({queryKey:["sessionLogs",l],queryFn:async()=>{if(!l||!n)return[];let e=await (0,eM.sessionSpendLogsCall)(n,l);return(e.data||e||[]).map(e=>({...e,duration:(Date.parse(e.endTime)-Date.parse(e.startTime))/1e3})).sort((e,t)=>{let s=+!!eB.includes(e.call_type),a=+!!eB.includes(t.call_type);return s!==a?s-a:new Date(e.startTime).getTime()-new Date(t.startTime).getTime()})},enabled:!!(e&&x&&l&&n)}),b=(0,o.useMemo)(()=>x?j.length?u?j.find(e=>e.request_id===u)||j[0]:s?.request_id&&j.find(e=>e.request_id===s.request_id)||j[0]:null:s,[x,s,u,j]);(0,o.useEffect)(()=>{x&&j.length&&(u&&j.some(e=>e.request_id===u)||p(s?.request_id&&j.some(e=>e.request_id===s.request_id)?s.request_id:j[0].request_id))},[x,s,u,j]),(0,o.useEffect)(()=>{e?g(!1):(x&&p(null),y(!1))},[e,x]);let{selectNextLog:v,selectPreviousLog:N}=function({isOpen:e,currentLog:t,allLogs:s,onClose:a,onSelectLog:l}){(0,o.useEffect)(()=>{let t=t=>{var s;if(!((s=t.target)instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&e)switch(t.key){case"Escape":a();break;case"j":case"J":n();break;case"k":case"K":r()}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,t,s]);let r=()=>{if(!t||!s.length||!l)return;let e=s.findIndex(e=>e.request_id===t.request_id);e<s.length-1&&l(s[e+1])},n=()=>{if(!t||!s.length||!l)return;let e=s.findIndex(e=>e.request_id===t.request_id);e>0&&l(s[e-1])};return{selectNextLog:r,selectPreviousLog:n}}({isOpen:e,currentLog:b,allLogs:x?j:d,onClose:t,onSelectLog:e=>{x&&p(e.request_id),c?.(e)}}),_=((e,t,s)=>{let{accessToken:a}=(0,sT.default)();return(0,r.useQuery)({queryKey:["logDetails",e,t,a],queryFn:async()=>a&&e&&t?await (0,eM.uiSpendLogDetailsCall)(a,e,t):null,enabled:s&&!!a&&!!e&&!!t,staleTime:6e5,gcTime:6e5})})(b?.request_id,m,e&&!!b?.request_id),w=_.data,k=_.isLoading,S=(0,o.useMemo)(()=>b?{...b,messages:w?.messages||b.messages,response:w?.response||b.response,proxy_server_request:w?.proxy_server_request||b.proxy_server_request}:null,[b,w]),C=b?.metadata||{},T="failure"===C.status?"Failure":"Success",L="failure"===C.status?"error":"success",M=C?.user_api_key_team_alias||"default",D=j.reduce((e,t)=>e+(t.spend||0),0),z=j.length>0?new Date(Math.min(...j.map(e=>new Date(e.startTime).getTime()))):null,A=j.length>0?new Date(Math.max(...j.map(e=>new Date(e.endTime).getTime()))):null,E=z&&A?((A.getTime()-z.getTime())/1e3).toFixed(2):"0.00",I=j.filter(e=>!eB.includes(e.call_type)).length,R=j.filter(e=>eB.includes(e.call_type)).length,O=x?j:b?[b]:[],B=x?l||"":b?.request_id||"",F=B.length>14?`${B.slice(0,11)}...`:B,$=async()=>{if(B)try{await navigator.clipboard.writeText(B),y(!0),setTimeout(()=>y(!1),1200)}catch{}},P=(0,o.useMemo)(()=>b&&eB.includes(b.call_type)?(x?j:d).find(e=>!eB.includes(e.call_type)&&e.metadata?.guardrail_information)??null:null,[b,x,j,d]);return b&&S?(0,a.jsx)(tt.Drawer,{title:null,placement:"right",onClose:t,open:e,width:"60%",closable:!1,mask:!0,maskClosable:!0,styles:{body:{padding:0,overflow:"hidden"},header:{display:"none"}},children:(0,a.jsxs)("div",{style:{height:"100%"},className:"flex relative",children:[h?(0,a.jsx)(X.Button,{type:"text",size:"small",icon:(0,a.jsx)(tr.RightOutlined,{}),onClick:()=>g(!1),className:"absolute top-2 left-2 z-20 !bg-white !border !border-slate-200 !rounded-md","aria-label":"Expand trace sidebar"}):(0,a.jsx)(X.Button,{type:"text",size:"small",icon:(0,a.jsx)(tl.default,{}),onClick:()=>g(!0),className:"absolute top-2 left-2 z-20 !bg-white !border !border-slate-200 !rounded-md","aria-label":"Collapse trace sidebar"}),!h&&(0,a.jsxs)("div",{className:"border-r border-slate-200 bg-slate-50 flex flex-col",style:{width:224},children:[(0,a.jsxs)("div",{className:"pl-12 pr-3 py-2 border-b border-slate-200 bg-white",children:[(0,a.jsx)("div",{className:"flex items-start justify-between gap-2",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:x?"Session":"Trace"}),(0,a.jsxs)("div",{className:"font-mono text-[12px] text-slate-900 leading-tight flex items-center gap-1",children:[(0,a.jsx)("span",{className:"truncate",children:F}),(0,a.jsx)("button",{type:"button",onClick:$,className:"text-slate-400 hover:text-slate-600","aria-label":"Copy trace id",children:f?(0,a.jsx)(ts.default,{className:"text-[11px]"}):(0,a.jsx)(ta.CopyOutlined,{className:"text-[11px]"})})]})]})}),(0,a.jsxs)("div",{className:"mt-1 text-[11px] text-slate-500 font-mono",children:[O.length," req",(0,a.jsx)("span",{className:"mx-1.5",children:"Â·"}),x?`${I} LLM`:`${O.filter(e=>!eB.includes(e.call_type)).length} LLM`,(0,a.jsx)("span",{className:"mx-1.5",children:"Â·"}),x?`${R} MCP`:`${O.filter(e=>eB.includes(e.call_type)).length} MCP`,(0,a.jsx)("span",{className:"mx-1.5",children:"Â·"}),x?(0,K.getSpendString)(D):(0,K.getSpendString)(b.spend||0),x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mx-1.5",children:"Â·"}),E,"s"]})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[tG(C?.guardrail_information).length>0&&(0,a.jsx)("div",{className:"px-3 pt-2",children:(0,a.jsx)(sS,{guardrailEntries:tG(C?.guardrail_information)})}),x?(0,a.jsx)("div",{className:"py-1",children:(0,a.jsxs)("div",{className:"relative pl-2",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1 bottom-1 border-l border-slate-300"}),O.map((e,t)=>{let s=t===O.length-1;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-4 top-3 w-3 border-t border-slate-300"}),s&&(0,a.jsx)("div",{className:"absolute left-4 top-3 bottom-0 w-px bg-slate-50"}),(0,a.jsx)(sL,{row:e,isSelected:e.request_id===b.request_id,onClick:()=>{p(e.request_id),c?.(e)}})]},e.request_id)})]})}):(0,a.jsx)("div",{className:"py-1",children:O.map(e=>(0,a.jsx)(sL,{row:e,isSelected:e.request_id===b.request_id,onClick:()=>c?.(e)},e.request_id))})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)(tj,{log:b,onClose:t,onPrevious:N,onNext:v,statusLabel:T,statusColor:L,environment:M}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)(sb,{logEntry:S,onOpenSettings:i,isLoadingDetails:k,accessToken:n??null,parentGuardrailInfo:P?.metadata?.guardrail_information,parentLogEntry:P})})]})]})}):null}var sD=e.i(727749),sz=e.i(954616),sA=e.i(243652),sE=((t={}).GENERAL_SETTINGS="general_settings",t),sI=((s={}).MAXIMUM_SPEND_LOGS_RETENTION_PERIOD="maximum_spend_logs_retention_period",s);let sR=async(e,t)=>{try{let s=eM.proxyBaseUrl?`${eM.proxyBaseUrl}/config/list?config_type=${t}`:`/config/list?config_type=${t}`,a=await fetch(s,{method:"GET",headers:{[(0,eM.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok){let e=await a.json(),t=(0,eM.deriveErrorMessage)(e);throw(0,eM.handleError)(t),Error(t)}return await a.json()}catch(e){throw console.error(`Failed to get proxy config for ${t}:`,e),e}},sO=(0,sA.createQueryKeys)("proxyConfig"),sB=async(e,t)=>{try{let s=eM.proxyBaseUrl?`${eM.proxyBaseUrl}/config/field/delete`:"/config/field/delete",a=await fetch(s,{method:"POST",headers:{[(0,eM.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=await a.json(),t=(0,eM.deriveErrorMessage)(e);throw(0,eM.handleError)(t),Error(t)}return await a.json()}catch(e){throw console.error(`Failed to delete proxy config field ${t.field_name}:`,e),e}},sF=async(e,t)=>{let s=(0,eM.getProxyBaseUrl)(),a=s?`${s}/config/update`:"/config/update",l=await fetch(a,{method:"POST",headers:{[(0,eM.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({general_settings:{store_prompts_in_spend_logs:t.store_prompts_in_spend_logs,...t.maximum_spend_logs_retention_period&&{maximum_spend_logs_retention_period:t.maximum_spend_logs_retention_period}}})});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e?.error?.message||e?.message||e?.detail||"Failed to update spend logs settings")}return await l.json()};var s$=e.i(190702),sP=e.i(637235),sq=e.i(808613),sK=e.i(311451),sH=e.i(212931),sV=e.i(981339),sY=e.i(790848);let sW=({isVisible:e,onCancel:t,onSuccess:s})=>{let[l]=sq.Form.useForm(),{mutateAsync:n,isPending:i}=(()=>{let{accessToken:e}=(0,sT.default)();return(0,sz.useMutation)({mutationFn:async t=>{if(!e)throw Error("Access token is required");return await sF(e,t)}})})(),{mutateAsync:d,isPending:c}=(()=>{let{accessToken:e}=(0,sT.default)();return(0,sz.useMutation)({mutationFn:async t=>{if(!e)throw Error("Access token is required");return await sB(e,t)}})})(),{data:m,isLoading:x,refetch:u}=(e=>{let{accessToken:t}=(0,sT.default)();return(0,r.useQuery)({queryKey:sO.list({filters:{configType:e}}),queryFn:async()=>await sR(t,e),enabled:!!t})})(sE.GENERAL_SETTINGS),p=sq.Form.useWatch("store_prompts_in_spend_logs",l);(0,o.useEffect)(()=>{e&&u()},[e,u]);let h=(0,o.useMemo)(()=>{if(!m)return{store_prompts_in_spend_logs:!1,maximum_spend_logs_retention_period:void 0};let e=m.find(e=>"store_prompts_in_spend_logs"===e.field_name),t=m.find(e=>"maximum_spend_logs_retention_period"===e.field_name);return{store_prompts_in_spend_logs:e?.field_value??!1,maximum_spend_logs_retention_period:t?.field_value??void 0}},[m]),g=async e=>{try{let t=e.maximum_spend_logs_retention_period;if(!t||"string"==typeof t&&""===t.trim())try{await d({config_type:sE.GENERAL_SETTINGS,field_name:sI.MAXIMUM_SPEND_LOGS_RETENTION_PERIOD})}catch(e){console.warn("Failed to delete retention period field (may not exist):",e)}let a={store_prompts_in_spend_logs:e.store_prompts_in_spend_logs,...t&&"string"==typeof t&&""!==t.trim()&&{maximum_spend_logs_retention_period:t}};await n(a,{onSuccess:()=>{sD.default.success("Spend logs settings updated successfully"),u(),s?.()},onError:e=>{sD.default.fromBackend("Failed to save spend logs settings: "+(0,s$.parseErrorMessage)(e))}})}catch(e){sD.default.fromBackend("Failed to save spend logs settings: "+(0,s$.parseErrorMessage)(e))}},f=()=>{l.resetFields(),t()};return(0,a.jsx)(sH.Modal,{title:(0,a.jsx)(eS.Typography.Title,{level:5,children:"Spend Logs Settings"}),open:e,footer:(0,a.jsxs)(ek.Space,{children:[(0,a.jsx)(X.Button,{onClick:f,disabled:i||c||x,children:"Cancel"}),(0,a.jsx)(X.Button,{type:"primary",loading:i||c,disabled:x,onClick:()=>l.submit(),children:i||c?"Saving...":"Save Settings"})]}),onCancel:f,children:(0,a.jsxs)(sq.Form,{form:l,layout:"horizontal",onFinish:g,initialValues:h,children:[(0,a.jsx)(sq.Form.Item,{label:"Store Prompts in Spend Logs",name:"store_prompts_in_spend_logs",tooltip:m?.find(e=>"store_prompts_in_spend_logs"===e.field_name)?.field_description||"When enabled, prompts will be stored in spend logs for tracking and analysis purposes.",valuePropName:"checked",children:(0,a.jsx)("div",{children:x?(0,a.jsx)(sV.Skeleton.Input,{active:!0,block:!0}):(0,a.jsx)(sY.Switch,{checked:p??!1,onChange:e=>l.setFieldValue("store_prompts_in_spend_logs",e)})})}),(0,a.jsx)(sq.Form.Item,{label:"Maximum Spend Logs Retention Period (Optional)",name:"maximum_spend_logs_retention_period",tooltip:m?.find(e=>"maximum_spend_logs_retention_period"===e.field_name)?.field_description||"Set the maximum retention period for spend logs (e.g., '7d' for 7 days, '30d' for 30 days). Leave empty for no limit.",children:x?(0,a.jsx)(sV.Skeleton.Input,{active:!0,block:!0}):(0,a.jsx)(sK.Input,{placeholder:"e.g., 7d, 30d",prefix:(0,a.jsx)(sP.ClockCircleOutlined,{})})})]},m?JSON.stringify(h):"loading")})};function sU({accessToken:e,token:t,userRole:s,userID:d,allTeams:c,premiumUser:m}){let[x,u]=(0,o.useState)(""),[p,h]=(0,o.useState)(!1),[g,f]=(0,o.useState)(!1),[y,j]=(0,o.useState)(1),[b]=(0,o.useState)(50),v=(0,o.useRef)(null),N=(0,o.useRef)(null),_=(0,o.useRef)(null),[w,k]=(0,o.useState)((0,i.default)().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),[S,C]=(0,o.useState)((0,i.default)().format("YYYY-MM-DDTHH:mm")),[T,L]=(0,o.useState)(!1),[M,D]=(0,o.useState)(!1),[z,A]=(0,o.useState)(""),[E,I]=(0,o.useState)(""),[R,O]=(0,o.useState)(""),[B,F]=(0,o.useState)(""),[$,P]=(0,o.useState)(""),[q,K]=(0,o.useState)(null),[ee,et]=(0,o.useState)(null),[es,ea]=(0,o.useState)(""),[el,er]=(0,o.useState)(""),[en,ei]=(0,o.useState)(s&&Z.internalUserRoles.includes(s)),[eo,ed]=(0,o.useState)("request logs"),[ec,em]=(0,o.useState)(null),[ex,ep]=(0,o.useState)(!1),[eh,eg]=(0,o.useState)(null),[ef,ey]=(0,o.useState)(!1),[ev,eN]=(0,o.useState)("startTime"),[e_,ew]=(0,o.useState)("desc");(0,n.useQueryClient)();let[ek,eS]=(0,o.useState)(()=>{let e=sessionStorage.getItem("isLiveTail");return null===e||JSON.parse(e)});(0,o.useEffect)(()=>{sessionStorage.setItem("isLiveTail",JSON.stringify(ek))},[ek]);let[eC,eA]=(0,o.useState)({value:24,unit:"hours"});(0,o.useEffect)(()=>{(async()=>{ee&&e&&K({...(await (0,eM.keyInfoV1Call)(e,ee)).info,token:ee,api_key:ee})})()},[ee,e]),(0,o.useEffect)(()=>{function e(e){v.current&&!v.current.contains(e.target)&&f(!1),N.current&&!N.current.contains(e.target)&&h(!1),_.current&&!_.current.contains(e.target)&&D(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,o.useEffect)(()=>{s&&Z.internalUserRoles.includes(s)&&ei(!0)},[s]);let eE=(0,r.useQuery)({queryKey:["logs","table",y,b,w,S,R,B,en?d:null,es,$,ev,e_],queryFn:async()=>{if(!e||!t||!s||!d)return{data:[],total:0,page:1,page_size:b,total_pages:0};let a=(0,i.default)(w).utc().format("YYYY-MM-DD HH:mm:ss"),l=T?(0,i.default)(S).utc().format("YYYY-MM-DD HH:mm:ss"):(0,i.default)().utc().format("YYYY-MM-DD HH:mm:ss");return await (0,eM.uiSpendLogsCall)({accessToken:e,start_date:a,end_date:l,page:y,page_size:b,params:{api_key:B||void 0,team_id:R||void 0,user_id:en?d??void 0:void 0,end_user:el||void 0,status_filter:es||void 0,model_id:$||void 0,sort_by:ev,sort_order:e_}})},enabled:!!e&&!!t&&!!s&&!!d&&"request logs"===eo,refetchInterval:!!ek&&1===y&&15e3,placeholderData:l.keepPreviousData,refetchIntervalInBackground:!0}),eI=(0,o.useDeferredValue)(eE.isFetching),eR=eE.isFetching||eI,{filters:e$,filteredLogs:eP,allTeams:eq,allKeyAliases:eK,handleFilterChange:eH,handleFilterReset:eY}=function({logs:e,accessToken:t,startTime:s,endTime:a,pageSize:l=e0.defaultPageSize,isCustomDate:n,setCurrentPage:d,userID:c,userRole:m,sortBy:x="startTime",sortOrder:u="desc",currentPage:p=1}){let h=(0,o.useMemo)(()=>({[e1]:"",[e2]:"",[e5]:"",[e4]:"",[e3]:"",[e6]:"",[e8]:"",[e7]:"",[e9]:"",[te]:""}),[]),[g,f]=(0,o.useState)(h),[y,j]=(0,o.useState)({data:[],total:0,page:1,page_size:50,total_pages:0}),b=(0,o.useRef)(0),v=(0,o.useCallback)(async(e,r=1)=>{if(!t)return;console.log("Filters being sent to API:",e);let o=Date.now();b.current=o;let d=(0,i.default)(s).utc().format("YYYY-MM-DD HH:mm:ss"),c=n?(0,i.default)(a).utc().format("YYYY-MM-DD HH:mm:ss"):(0,i.default)().utc().format("YYYY-MM-DD HH:mm:ss");try{let s=await (0,eM.uiSpendLogsCall)({accessToken:t,start_date:d,end_date:c,page:r,page_size:l,params:{api_key:e[e2]||void 0,team_id:e[e1]||void 0,request_id:e[e5]||void 0,user_id:e[e3]||void 0,end_user:e[e6]||void 0,status_filter:e[e8]||void 0,model_id:e[e4]||void 0,key_alias:e[e7]||void 0,error_code:e[e9]||void 0,error_message:e[te]||void 0,sort_by:x,sort_order:u}});o===b.current&&s.data&&j(s)}catch(e){console.error("Error searching users:",e)}},[t,s,a,n,l,x,u]),N=(0,o.useMemo)(()=>(0,eZ.default)((e,t)=>v(e,t),300),[v]);(0,o.useEffect)(()=>()=>N.cancel(),[N]);let _=(0,r.useQuery)({queryKey:["allKeys"],queryFn:async()=>{if(!t)throw Error("Access token required");return await (0,eb.fetchAllKeyAliases)(t)},enabled:!!t}).data||[],w=(0,o.useMemo)(()=>!!(g[e7]||g[e2]||g[e5]||g[e3]||g[e6]||g[e9]||g[te]||g[e4]),[g]);(0,o.useEffect)(()=>{w&&t&&v(g,p)},[x,u,p]);let k=(0,o.useMemo)(()=>{if(!e||!e.data)return{data:[],total:0,page:1,page_size:50,total_pages:0};if(w)return e;let t=[...e.data];return g[e1]&&(t=t.filter(e=>e.team_id===g[e1])),g[e8]&&(t=t.filter(e=>"success"===g[e8]?!e.status||"success"===e.status:e.status===g[e8])),g[e4]&&(t=t.filter(e=>e.model_id===g[e4])),g[e2]&&(t=t.filter(e=>e.api_key===g[e2])),g[e6]&&(t=t.filter(e=>e.end_user===g[e6])),g[e9]&&(t=t.filter(e=>{let t=(e.metadata||{}).error_information;return t&&t.error_code===g[e9]})),{data:t,total:e.total,page:e.page,page_size:e.page_size,total_pages:e.total_pages}},[e,g,w]),S=(0,o.useMemo)(()=>w?y&&y.data&&y.data.length>0?y:e||{data:[],total:0,page:1,page_size:50,total_pages:0}:k,[w,y,k,e]),{data:C}=(0,r.useQuery)({queryKey:["allTeamsForLogFilters",t],queryFn:async()=>t&&await (0,eb.fetchAllTeams)(t)||[],enabled:!!t});return{filters:g,filteredLogs:S,allKeyAliases:_,allTeams:C,handleFilterChange:e=>{f(t=>{let s={...t,...e};for(let e of Object.keys(h))e in s||(s[e]=h[e]);return JSON.stringify(s)!==JSON.stringify(t)&&(d(1),N(s,1)),s})},handleFilterReset:()=>{f(h),j({data:[],total:0,page:1,page_size:50,total_pages:0}),N(h,1)}}}({logs:eE.data||{data:[],total:0,page:1,page_size:b||10,total_pages:1},accessToken:e,startTime:w,endTime:S,pageSize:b,isCustomDate:T,setCurrentPage:j,userID:d,userRole:s,sortBy:ev,sortOrder:e_,currentPage:y}),eU=(0,o.useCallback)(async t=>{if(e)try{let s=(await (0,eM.keyListCall)(e,null,null,t,null,null,y,b)).keys.find(e=>e.key_alias===t);s&&F(s.token)}catch(e){console.error("Error fetching key hash for alias:",e)}},[e,y,b]),eJ=(0,o.useCallback)(()=>{eY(),k((0,i.default)().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),C((0,i.default)().format("YYYY-MM-DDTHH:mm")),L(!1),eA({value:24,unit:"hours"}),j(1)},[eY]);if((0,o.useEffect)(()=>{e&&(e$["Team ID"]?O(e$["Team ID"]):O(""),ea(e$.Status||""),P(e$.Model||""),er(e$["End User"]||""),e$["Key Hash"]?F(e$["Key Hash"]):e$["Key Alias"]?eU(e$["Key Alias"]):F(""))},[e$,e,eU]),!e||!t||!s||!d)return null;let eG=eP.data.filter(e=>!x||e.request_id.includes(x)||e.model.includes(x)||e.user&&e.user.includes(x)),eQ=eG.reduce((e,t)=>(t.session_id&&(e[t.session_id]||(e[t.session_id]={llm:0,mcp:0}),eB.includes(t.call_type)?e[t.session_id].mcp+=1:e[t.session_id].llm+=1),e),{}),eX=new Map;for(let e of eG){if(!e.session_id||1>=(e.session_total_count||1))continue;let t=eB.includes(e.call_type),s=eX.get(e.session_id);s&&(!s.isMcp||t)||eX.set(e.session_id,{requestId:e.request_id,isMcp:t})}let tt=eG.map(e=>{let t=e.session_id?eQ[e.session_id]:void 0;return{...e,duration:(Date.parse(e.endTime)-Date.parse(e.startTime))/1e3,session_llm_count:t?.llm??void 0,session_mcp_count:t?.mcp??void 0,onKeyHashClick:e=>et(e),onSessionClick:t=>{t&&(eg(t),em(e),ep(!0))}}}).filter(e=>!e.session_id||1>=(e.session_total_count||1)||eX.get(e.session_id)?.requestId===e.request_id)||[],ts=[{name:"Team ID",label:"Team ID",isSearchable:!0,searchFn:async e=>c&&0!==c.length?c.filter(t=>t.team_id.toLowerCase().includes(e.toLowerCase())||t.team_alias&&t.team_alias.toLowerCase().includes(e.toLowerCase())).map(e=>({label:`${e.team_alias||e.team_id} (${e.team_id})`,value:e.team_id})):[]},{name:"Status",label:"Status",isSearchable:!1,options:[{label:"Success",value:"success"},{label:"Failure",value:"failure"}]},{name:"Model",label:"Model",customComponent:eT},{name:"Key Alias",label:"Key Alias",isSearchable:!0,searchFn:async t=>e?(await (0,eb.fetchAllKeyAliases)(e)).filter(e=>e.toLowerCase().includes(t.toLowerCase())).map(e=>({label:e,value:e})):[]},{name:"End User",label:"End User",isSearchable:!0,searchFn:async t=>{if(!e)return[];let s=await (0,eM.allEndUsersCall)(e);return(s?.map(e=>e.user_id)||[]).filter(e=>e.toLowerCase().includes(t.toLowerCase())).map(e=>({label:e,value:e}))}},{name:"Error Code",label:"Error Code",isSearchable:!0,searchFn:async e=>{if(!e)return eO;let t=e.toLowerCase(),s=eO.filter(e=>e.label.toLowerCase().includes(t));return!eO.some(t=>t.value===e.trim())&&e.trim()&&s.push({label:`Use custom code: ${e.trim()}`,value:e.trim()}),s}},{name:"Key Hash",label:"Key Hash",isSearchable:!1},{name:"Error Message",label:"Error Message",isSearchable:!1}],ta=eF.find(e=>e.value===eC.value&&e.unit===eC.unit),tl=T?((e,t,s)=>{if(e)return`${(0,i.default)(t).format("MMM D, h:mm A")} - ${(0,i.default)(s).format("MMM D, h:mm A")}`;let a=(0,i.default)(),l=(0,i.default)(t),r=a.diff(l,"minutes");if(r>=0&&r<2)return"Last 1 Minute";if(r>=2&&r<16)return"Last 15 Minutes";if(r>=16&&r<61)return"Last Hour";let n=a.diff(l,"hours");return n>=1&&n<5?"Last 4 Hours":n>=5&&n<25?"Last 24 Hours":n>=25&&n<169?"Last 7 Days":`${l.format("MMM D")} - ${a.format("MMM D")}`})(T,w,S):ta?.label;return(0,a.jsxs)("div",{className:"w-full max-w-screen p-6 overflow-x-hidden box-border",children:[(0,a.jsxs)(U.TabGroup,{defaultIndex:0,onIndexChange:e=>ed(0===e?"request logs":"audit logs"),children:[(0,a.jsxs)(J.TabList,{children:[(0,a.jsx)(W.Tab,{children:"Request Logs"}),(0,a.jsx)(W.Tab,{children:"Audit Logs"}),(0,a.jsx)(W.Tab,{children:"Deleted Keys"}),(0,a.jsx)(W.Tab,{children:"Deleted Teams"})]}),(0,a.jsxs)(Q.TabPanels,{children:[(0,a.jsxs)(G.TabPanel,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Request Logs"}),(0,a.jsx)(X.Button,{icon:(0,a.jsx)(H.SettingOutlined,{}),onClick:()=>ey(!0),title:"Spend Logs Settings"})]}),q&&ee&&q.api_key===ee?(0,a.jsx)(eD.default,{keyId:ee,keyData:q,teams:c,onClose:()=>et(null),backButtonText:"Back to Logs"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eL.default,{options:ts,onApplyFilters:eH,onResetFilters:eJ}),(0,a.jsx)(sW,{isVisible:ef,onCancel:()=>ey(!1),onSuccess:()=>ey(!1)}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full box-border",children:[(0,a.jsx)("div",{className:"border-b px-6 py-4 w-full max-w-full box-border",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0 w-full max-w-full box-border",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 w-full max-w-full box-border",children:[(0,a.jsxs)("div",{className:"relative w-64 min-w-0 flex-shrink-0",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by Request ID",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x,onChange:e=>u(e.target.value)}),(0,a.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-shrink",children:[(0,a.jsxs)("div",{className:"relative z-50",ref:_,children:[(0,a.jsxs)("button",{onClick:()=>D(!M),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),tl]}),M&&(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border p-2 z-50",children:(0,a.jsxs)("div",{className:"space-y-1",children:[eF.map(e=>(0,a.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${tl===e.label?"bg-blue-50 text-blue-600":""}`,onClick:()=>{C((0,i.default)().format("YYYY-MM-DDTHH:mm")),k((0,i.default)().subtract(e.value,e.unit).format("YYYY-MM-DDTHH:mm")),eA({value:e.value,unit:e.unit}),L(!1),D(!1)},children:e.label},e.label)),(0,a.jsx)("div",{className:"border-t my-2"}),(0,a.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${T?"bg-blue-50 text-blue-600":""}`,onClick:()=>L(!T),children:"Custom Range"})]})})]}),(0,a.jsx)(()=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Live Tail"}),(0,a.jsx)(Y.Switch,{color:"green",checked:ek,defaultChecked:!0,onChange:eS})]}),{}),(0,a.jsx)(X.Button,{type:"default",icon:(0,a.jsx)(V.SyncOutlined,{spin:eR}),onClick:()=>{eE.refetch()},disabled:eR,title:"Fetch data",children:eR?"Fetching":"Fetch"})]}),T&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"datetime-local",value:w,onChange:e=>{k(e.target.value),j(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),(0,a.jsx)("span",{className:"text-gray-500",children:"to"}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"datetime-local",value:S,onChange:e=>{C(e.target.value),j(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700 whitespace-nowrap",children:["Showing ",eE.isLoading?"...":eP?(y-1)*b+1:0," -"," ",eE.isLoading?"...":eP?Math.min(y*b,eP.total):0," ","of ",eE.isLoading?"...":eP?eP.total:0," results"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-700 min-w-[90px]",children:["Page ",eE.isLoading?"...":y," of"," ",eE.isLoading?"...":eP?eP.total_pages:1]}),(0,a.jsx)("button",{onClick:()=>j(e=>Math.max(1,e-1)),disabled:eE.isLoading||1===y,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>j(e=>Math.min(eP.total_pages||1,e+1)),disabled:eE.isLoading||y===(eP.total_pages||1),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}),ek&&1===y&&(0,a.jsxs)("div",{className:"mb-4 px-4 py-2 bg-green-50 border border-greem-200 rounded-md flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"text-sm text-green-700",children:"Auto-refreshing every 15 seconds"})}),(0,a.jsx)("button",{onClick:()=>eS(!1),className:"text-sm text-green-600 hover:text-green-800",children:"Stop"})]}),(0,a.jsx)(ez.DataTable,{columns:eV({sortBy:ev,sortOrder:e_,onSortChange:(e,t)=>{eN(e),ew(t),j(1)}}),data:tt,onRowClick:e=>{if(e.session_id&&(e.session_total_count||1)>1){eg(e.session_id),em(e),ep(!0);return}eg(null),em(e),ep(!0)},isLoading:eE.isLoading})]})]})]}),(0,a.jsx)(G.TabPanel,{children:(0,a.jsx)(eW,{userID:d,userRole:s,token:t,accessToken:e,isActive:"audit logs"===eo,premiumUser:m,allTeams:c})}),(0,a.jsx)(G.TabPanel,{children:(0,a.jsx)(eu,{})}),(0,a.jsx)(G.TabPanel,{children:(0,a.jsx)(ej,{})})]})]}),(0,a.jsx)(sM,{open:ex,onClose:()=>{ep(!1),eg(null)},logEntry:ec,sessionId:eh,accessToken:e,onOpenSettings:()=>ey(!0),allLogs:tt,onSelectLog:e=>{em(e)},startTime:(0,i.default)(w).utc().format("YYYY-MM-DD HH:mm:ss")})]})}e.s(["default",()=>sU],936190)}]);