(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,728889,e=>{"use strict";var t=e.i(290571),r=e.i(271645),l=e.i(829087),o=e.i(480731),a=e.i(444755),n=e.i(673706),s=e.i(95779);let i={xs:{paddingX:"px-1.5",paddingY:"py-1.5"},sm:{paddingX:"px-1.5",paddingY:"py-1.5"},md:{paddingX:"px-2",paddingY:"py-2"},lg:{paddingX:"px-2",paddingY:"py-2"},xl:{paddingX:"px-2.5",paddingY:"py-2.5"}},d={xs:{height:"h-3",width:"w-3"},sm:{height:"h-5",width:"w-5"},md:{height:"h-5",width:"w-5"},lg:{height:"h-7",width:"w-7"},xl:{height:"h-9",width:"w-9"}},c={simple:{rounded:"",border:"",ring:"",shadow:""},light:{rounded:"rounded-tremor-default",border:"",ring:"",shadow:""},shadow:{rounded:"rounded-tremor-default",border:"border",ring:"",shadow:"shadow-tremor-card dark:shadow-dark-tremor-card"},solid:{rounded:"rounded-tremor-default",border:"border-2",ring:"ring-1",shadow:""},outlined:{rounded:"rounded-tremor-default",border:"border",ring:"ring-2",shadow:""}},u=(0,n.makeClassName)("Icon"),g=r.default.forwardRef((e,g)=>{let{icon:m,variant:h="simple",tooltip:p,size:x=o.Sizes.SM,color:f,className:y}=e,b=(0,t.__rest)(e,["icon","variant","tooltip","size","color","className"]),w=((e,t)=>{switch(e){case"simple":return{textColor:t?(0,n.getColorClassNames)(t,s.colorPalette.text).textColor:"text-tremor-brand dark:text-dark-tremor-brand",bgColor:"",borderColor:"",ringColor:""};case"light":return{textColor:t?(0,n.getColorClassNames)(t,s.colorPalette.text).textColor:"text-tremor-brand dark:text-dark-tremor-brand",bgColor:t?(0,a.tremorTwMerge)((0,n.getColorClassNames)(t,s.colorPalette.background).bgColor,"bg-opacity-20"):"bg-tremor-brand-muted dark:bg-dark-tremor-brand-muted",borderColor:"",ringColor:""};case"shadow":return{textColor:t?(0,n.getColorClassNames)(t,s.colorPalette.text).textColor:"text-tremor-brand dark:text-dark-tremor-brand",bgColor:t?(0,a.tremorTwMerge)((0,n.getColorClassNames)(t,s.colorPalette.background).bgColor,"bg-opacity-20"):"bg-tremor-background dark:bg-dark-tremor-background",borderColor:"border-tremor-border dark:border-dark-tremor-border",ringColor:""};case"solid":return{textColor:t?(0,n.getColorClassNames)(t,s.colorPalette.text).textColor:"text-tremor-brand-inverted dark:text-dark-tremor-brand-inverted",bgColor:t?(0,a.tremorTwMerge)((0,n.getColorClassNames)(t,s.colorPalette.background).bgColor,"bg-opacity-20"):"bg-tremor-brand dark:bg-dark-tremor-brand",borderColor:"border-tremor-brand-inverted dark:border-dark-tremor-brand-inverted",ringColor:"ring-tremor-ring dark:ring-dark-tremor-ring"};case"outlined":return{textColor:t?(0,n.getColorClassNames)(t,s.colorPalette.text).textColor:"text-tremor-brand dark:text-dark-tremor-brand",bgColor:t?(0,a.tremorTwMerge)((0,n.getColorClassNames)(t,s.colorPalette.background).bgColor,"bg-opacity-20"):"bg-tremor-background dark:bg-dark-tremor-background",borderColor:t?(0,n.getColorClassNames)(t,s.colorPalette.ring).borderColor:"border-tremor-brand-subtle dark:border-dark-tremor-brand-subtle",ringColor:t?(0,a.tremorTwMerge)((0,n.getColorClassNames)(t,s.colorPalette.ring).ringColor,"ring-opacity-40"):"ring-tremor-brand-muted dark:ring-dark-tremor-brand-muted"}}})(h,f),{tooltipProps:v,getReferenceProps:S}=(0,l.useTooltip)();return r.default.createElement("span",Object.assign({ref:(0,n.mergeRefs)([g,v.refs.setReference]),className:(0,a.tremorTwMerge)(u("root"),"inline-flex shrink-0 items-center justify-center",w.bgColor,w.textColor,w.borderColor,w.ringColor,c[h].rounded,c[h].border,c[h].shadow,c[h].ring,i[x].paddingX,i[x].paddingY,y)},S,b),r.default.createElement(l.default,Object.assign({text:p},v)),r.default.createElement(m,{className:(0,a.tremorTwMerge)(u("icon"),"shrink-0",d[x].height,d[x].width)}))});g.displayName="Icon",e.s(["default",()=>g],728889)},752978,e=>{"use strict";var t=e.i(728889);e.s(["Icon",()=>t.default])},94629,e=>{"use strict";var t=e.i(271645);let r=t.forwardRef(function(e,r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:r},e),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"}))});e.s(["SwitchVerticalIcon",0,r],94629)},829672,836938,310730,e=>{"use strict";e.i(247167);var t=e.i(271645),r=e.i(343794),l=e.i(914949),o=e.i(404948);let a=e=>e?"function"==typeof e?e():e:null;e.s(["getRenderPropValue",0,a],836938);var n=e.i(613541),s=e.i(763731),i=e.i(242064),d=e.i(491816);e.i(793154);var c=e.i(880476),u=e.i(183293),g=e.i(717356),m=e.i(320560),h=e.i(307358),p=e.i(246422),x=e.i(838378),f=e.i(617933);let y=(0,p.genStyleHooks)("Popover",e=>{let{colorBgElevated:t,colorText:r}=e,l=(0,x.mergeToken)(e,{popoverBg:t,popoverColor:r});return[(e=>{let{componentCls:t,popoverColor:r,titleMinWidth:l,fontWeightStrong:o,innerPadding:a,boxShadowSecondary:n,colorTextHeading:s,borderRadiusLG:i,zIndexPopup:d,titleMarginBottom:c,colorBgElevated:g,popoverBg:h,titleBorderBottom:p,innerContentPadding:x,titlePadding:f}=e;return[{[t]:Object.assign(Object.assign({},(0,u.resetComponent)(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:d,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:"var(--valid-offset-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":g,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:h,backgroundClip:"padding-box",borderRadius:i,boxShadow:n,padding:a},[`${t}-title`]:{minWidth:l,marginBottom:c,color:s,fontWeight:o,borderBottom:p,padding:f},[`${t}-inner-content`]:{color:r,padding:x}})},(0,m.default)(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]})(l),(e=>{let{componentCls:t}=e;return{[t]:f.PresetColors.map(r=>{let l=e[`${r}6`];return{[`&${t}-${r}`]:{"--antd-arrow-background-color":l,[`${t}-inner`]:{backgroundColor:l},[`${t}-arrow`]:{background:"transparent"}}}})}})(l),(0,g.initZoomMotion)(l,"zoom-big")]},e=>{let{lineWidth:t,controlHeight:r,fontHeight:l,padding:o,wireframe:a,zIndexPopupBase:n,borderRadiusLG:s,marginXS:i,lineType:d,colorSplit:c,paddingSM:u}=e,g=r-l;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:n+30},(0,h.getArrowToken)(e)),(0,m.getArrowOffsetToken)({contentRadius:s,limitVerticalRadius:!0})),{innerPadding:12*!a,titleMarginBottom:a?0:i,titlePadding:a?`${g/2}px ${o}px ${g/2-t}px`:0,titleBorderBottom:a?`${t}px ${d} ${c}`:"none",innerContentPadding:a?`${u}px ${o}px`:0})},{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var b=function(e,t){var r={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&0>t.indexOf(l)&&(r[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,l=Object.getOwnPropertySymbols(e);o<l.length;o++)0>t.indexOf(l[o])&&Object.prototype.propertyIsEnumerable.call(e,l[o])&&(r[l[o]]=e[l[o]]);return r};let w=({title:e,content:r,prefixCls:l})=>e||r?t.createElement(t.Fragment,null,e&&t.createElement("div",{className:`${l}-title`},e),r&&t.createElement("div",{className:`${l}-inner-content`},r)):null,v=e=>{let{hashId:l,prefixCls:o,className:n,style:s,placement:i="top",title:d,content:u,children:g}=e,m=a(d),h=a(u),p=(0,r.default)(l,o,`${o}-pure`,`${o}-placement-${i}`,n);return t.createElement("div",{className:p,style:s},t.createElement("div",{className:`${o}-arrow`}),t.createElement(c.Popup,Object.assign({},e,{className:l,prefixCls:o}),g||t.createElement(w,{prefixCls:o,title:m,content:h})))},S=e=>{let{prefixCls:l,className:o}=e,a=b(e,["prefixCls","className"]),{getPrefixCls:n}=t.useContext(i.ConfigContext),s=n("popover",l),[d,c,u]=y(s);return d(t.createElement(v,Object.assign({},a,{prefixCls:s,hashId:c,className:(0,r.default)(o,u)})))};e.s(["Overlay",0,w,"default",0,S],310730);var j=function(e,t){var r={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&0>t.indexOf(l)&&(r[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,l=Object.getOwnPropertySymbols(e);o<l.length;o++)0>t.indexOf(l[o])&&Object.prototype.propertyIsEnumerable.call(e,l[o])&&(r[l[o]]=e[l[o]]);return r};let k=t.forwardRef((e,c)=>{var u,g;let{prefixCls:m,title:h,content:p,overlayClassName:x,placement:f="top",trigger:b="hover",children:v,mouseEnterDelay:S=.1,mouseLeaveDelay:k=.1,onOpenChange:C,overlayStyle:_={},styles:N,classNames:z}=e,O=j(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle","styles","classNames"]),{getPrefixCls:T,className:I,style:D,classNames:P,styles:E}=(0,i.useComponentConfig)("popover"),$=T("popover",m),[A,R,K]=y($),M=T(),U=(0,r.default)(x,R,K,I,P.root,null==z?void 0:z.root),L=(0,r.default)(P.body,null==z?void 0:z.body),[B,V]=(0,l.default)(!1,{value:null!=(u=e.open)?u:e.visible,defaultValue:null!=(g=e.defaultOpen)?g:e.defaultVisible}),F=(e,t)=>{V(e,!0),null==C||C(e,t)},W=a(h),H=a(p);return A(t.createElement(d.default,Object.assign({placement:f,trigger:b,mouseEnterDelay:S,mouseLeaveDelay:k},O,{prefixCls:$,classNames:{root:U,body:L},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},E.root),D),_),null==N?void 0:N.root),body:Object.assign(Object.assign({},E.body),null==N?void 0:N.body)},ref:c,open:B,onOpenChange:e=>{F(e)},overlay:W||H?t.createElement(w,{prefixCls:$,title:W,content:H}):null,transitionName:(0,n.getTransitionName)(M,"zoom-big",O.transitionName),"data-popover-inject":!0}),(0,s.cloneElement)(v,{onKeyDown:e=>{var r,l;(0,t.isValidElement)(v)&&(null==(l=null==v?void 0:(r=v.props).onKeyDown)||l.call(r,e)),e.keyCode===o.default.ESC&&F(!1,e)}})))});k._InternalPanelDoNotUseOrYouWillBeFired=S,e.s(["default",0,k],829672)},282786,e=>{"use strict";var t=e.i(829672);e.s(["Popover",()=>t.default])},566606,e=>{"use strict";var t=e.i(843476),r=e.i(271645),l=e.i(618566),o=e.i(947293),a=e.i(764205),n=e.i(954616),s=e.i(266027),i=e.i(612256);let d=(0,e.i(243652).createQueryKeys)("onboarding");var c=e.i(482725),u=e.i(56456);function g(){return(0,t.jsx)("div",{className:"mx-auto w-full max-w-md mt-10 flex justify-center",children:(0,t.jsx)(c.Spin,{indicator:(0,t.jsx)(u.LoadingOutlined,{spin:!0}),size:"large"})})}var m=e.i(560445),h=e.i(464571);function p(){return(0,t.jsxs)("div",{className:"mx-auto w-full max-w-md mt-10",children:[(0,t.jsx)(m.Alert,{type:"error",message:"Failed to load invitation",description:"The invitation link may be invalid or expired.",showIcon:!0}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(h.Button,{href:"/ui/login",children:"Back to Login"})})]})}var x=e.i(175712),f=e.i(808613),y=e.i(311451),b=e.i(898586);function w({variant:e,userEmail:l,isPending:o,claimError:a,onSubmit:n}){let[s]=f.Form.useForm();return r.default.useEffect(()=>{l&&s.setFieldValue("user_email",l)},[l,s]),(0,t.jsx)("div",{className:"mx-auto w-full max-w-md mt-10",children:(0,t.jsxs)(x.Card,{children:[(0,t.jsx)(b.Typography.Title,{level:5,className:"text-center mb-5",children:"ðŸš… LiteLLM"}),(0,t.jsx)(b.Typography.Title,{level:3,children:"reset_password"===e?"Reset Password":"Sign Up"}),(0,t.jsx)(b.Typography.Text,{children:"reset_password"===e?"Reset your password to access Admin UI.":"Claim your user account to login to Admin UI."}),"signup"===e&&(0,t.jsx)(m.Alert,{className:"mt-4",type:"info",message:"SSO",description:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{children:"SSO is under the Enterprise Tier."}),(0,t.jsx)(h.Button,{type:"primary",size:"small",href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"Get Free Trial"})]}),showIcon:!0}),(0,t.jsxs)(f.Form,{className:"mt-10 mb-5",layout:"vertical",form:s,onFinish:e=>n({password:e.password}),children:[(0,t.jsx)(f.Form.Item,{label:"Email Address",name:"user_email",children:(0,t.jsx)(y.Input,{type:"email",disabled:!0})}),(0,t.jsx)(f.Form.Item,{label:"Password",name:"password",rules:[{required:!0,message:"password required to sign up"}],help:"reset_password"===e?"Enter your new password":"Create a password for your account",children:(0,t.jsx)(y.Input.Password,{})}),a&&(0,t.jsx)(m.Alert,{type:"error",message:a,showIcon:!0,className:"mb-4"}),(0,t.jsx)("div",{className:"mt-10",children:(0,t.jsx)(h.Button,{htmlType:"submit",loading:o,children:"reset_password"===e?"Reset Password":"Sign Up"})})]})]})})}function v({variant:e}){let c=(0,l.useSearchParams)().get("invitation_id"),[u,m]=r.default.useState(null),{data:h,isLoading:x,isError:f}=(e=>{let{isLoading:t}=(0,i.useUIConfig)();return(0,s.useQuery)({queryKey:d.detail(e??""),queryFn:async()=>{if(!e)throw Error("inviteId is required");return(0,a.getOnboardingCredentials)(e)},enabled:!!e&&!t})})(c),{mutate:y,isPending:b}=(0,n.useMutation)({mutationFn:async({accessToken:e,inviteId:t,userId:r,password:l})=>await (0,a.claimOnboardingToken)(e,t,r,l)}),v=h?.token?(0,o.jwtDecode)(h.token):null,S=v?.user_email??"",j=v?.user_id??null,k=v?.key??null,C=h?.token??null;return x?(0,t.jsx)(g,{}):f?(0,t.jsx)(p,{}):(0,t.jsx)(w,{variant:e,userEmail:S,isPending:b,claimError:u,onSubmit:e=>{k&&C&&j&&c&&(m(null),y({accessToken:k,inviteId:c,userId:j,password:e.password},{onSuccess:()=>{document.cookie=`token=${C}; path=/; SameSite=Lax`;let e=(0,a.getProxyBaseUrl)();window.location.href=e?`${e}/ui/?login=success`:"/ui/?login=success"},onError:e=>{m(e.message||"Failed to submit. Please try again.")}}))}})}function S(){let e=(0,l.useSearchParams)().get("action");return(0,t.jsx)(v,{variant:"reset_password"===e?"reset_password":"signup"})}function j(){return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}),children:(0,t.jsx)(S,{})})}e.s(["default",()=>j],566606)},584578,e=>{"use strict";var t=e.i(764205);let r=async(e,r,l,o,a)=>{let n;n="Admin"!=l&&"Admin Viewer"!=l?await (0,t.teamListCall)(e,o?.organization_id||null,r):await (0,t.teamListCall)(e,o?.organization_id||null),console.log(`givenTeams: ${n}`),a(n)};e.s(["fetchTeams",0,r])},693569,e=>{"use strict";var t=e.i(843476),r=e.i(268004),l=e.i(309426),o=e.i(350967),a=e.i(898586),n=e.i(947293),s=e.i(618566),i=e.i(271645),d=e.i(566606),c=e.i(584578),u=e.i(764205),g=e.i(702597),m=e.i(207082),h=e.i(500330),p=e.i(871943),x=e.i(502547),f=e.i(360820),y=e.i(94629),b=e.i(152990),w=e.i(682830),v=e.i(389083),S=e.i(994388),j=e.i(752978),k=e.i(269200),C=e.i(942232),_=e.i(977572),N=e.i(427612),z=e.i(64848),O=e.i(496020),T=e.i(599724),I=e.i(827252),D=e.i(282786),P=e.i(981339),E=e.i(592968),$=e.i(355619),A=e.i(633627),R=e.i(374009),K=e.i(700514),M=e.i(135214),U=e.i(50882),L=e.i(969550),B=e.i(20147);function V({teams:e,organizations:r,onSortChange:l,currentSort:o}){let[a,n]=(0,i.useState)(null),[s,d]=i.default.useState(()=>o?[{id:o.sortBy,desc:"desc"===o.sortOrder}]:[{id:"created_at",desc:!0}]),[c,g]=i.default.useState({pageIndex:0,pageSize:50}),V=s.length>0?s[0].id:null,F=s.length>0?s[0].desc?"desc":"asc":null,{data:W,isPending:H,isFetching:J,refetch:q}=(0,m.useKeys)(c.pageIndex+1,c.pageSize,{sortBy:V||void 0,sortOrder:F||void 0}),[Y,X]=(0,i.useState)({}),{filters:G,filteredKeys:Q,filteredTotalCount:Z,allTeams:ee,allOrganizations:et,handleFilterChange:er,handleFilterReset:el}=function({keys:e,teams:t,organizations:r}){let l={"Team ID":"","Organization ID":"","Key Alias":"","User ID":"","Sort By":"created_at","Sort Order":"desc"},{accessToken:o}=(0,M.default)(),[a,n]=(0,i.useState)(l),[s,d]=(0,i.useState)(t||[]),[c,g]=(0,i.useState)(r||[]),[m,h]=(0,i.useState)(e),[p,x]=(0,i.useState)(null),f=(0,i.useRef)(0),y=(0,i.useCallback)((0,R.default)(async e=>{if(!o)return;let t=Date.now();f.current=t;try{let r=await (0,u.keyListCall)(o,e["Organization ID"]||null,e["Team ID"]||null,e["Key Alias"]||null,e["User ID"]||null,e["Key Hash"]||null,1,K.defaultPageSize,e["Sort By"]||null,e["Sort Order"]||null);t===f.current&&r&&(h(r.keys),x(r.total_count??null),console.log("called from debouncedSearch filters:",JSON.stringify(e)),console.log("called from debouncedSearch data:",JSON.stringify(r)))}catch(e){console.error("Error searching users:",e)}},300),[o]);return(0,i.useEffect)(()=>{if(!e)return void h([]);let t=[...e];a["Team ID"]&&(t=t.filter(e=>e.team_id===a["Team ID"])),a["Organization ID"]&&(t=t.filter(e=>e.organization_id===a["Organization ID"])),h(t)},[e,a]),(0,i.useEffect)(()=>{let e=async()=>{let e=await (0,A.fetchAllTeams)(o);e.length>0&&d(e);let t=await (0,A.fetchAllOrganizations)(o);t.length>0&&g(t)};o&&e()},[o]),(0,i.useEffect)(()=>{t&&t.length>0&&d(e=>e.length<t.length?t:e)},[t]),(0,i.useEffect)(()=>{r&&r.length>0&&g(e=>e.length<r.length?r:e)},[r]),{filters:a,filteredKeys:m,filteredTotalCount:p,allTeams:s,allOrganizations:c,handleFilterChange:(e,t=!1)=>{n({"Team ID":e["Team ID"]||"","Organization ID":e["Organization ID"]||"","Key Alias":e["Key Alias"]||"","User ID":e["User ID"]||"","Sort By":e["Sort By"]||"created_at","Sort Order":e["Sort Order"]||"desc"}),t||y({...a,...e})},handleFilterReset:()=>{n(l),x(null),y(l)}}}({keys:W?.keys||[],teams:e,organizations:r}),eo=Z??W?.total_count??0;(0,i.useEffect)(()=>{if(q){let e=()=>{q()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}},[q]);let ea=(0,i.useMemo)(()=>[{id:"expander",header:()=>null,size:40,enableSorting:!1,cell:({row:e})=>e.getCanExpand()?(0,t.jsx)("button",{onClick:e.getToggleExpandedHandler(),style:{cursor:"pointer"},children:e.getIsExpanded()?"â–¼":"â–¶"}):null},{id:"token",accessorKey:"token",header:"Key ID",size:100,enableSorting:!0,cell:e=>{let r=e.getValue(),l=e.cell.column.getSize();return(0,t.jsx)(E.Tooltip,{title:r,children:(0,t.jsx)(S.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate block",style:{maxWidth:l,overflow:"hidden"},onClick:()=>n(e.row.original),children:r??"-"})})}},{id:"key_alias",accessorKey:"key_alias",header:"Key Alias",size:150,enableSorting:!0,cell:e=>{let r=e.getValue(),l=e.cell.column.getSize();return(0,t.jsx)(E.Tooltip,{title:r,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:l,overflow:"hidden"},children:r??"-"})})}},{id:"key_name",accessorKey:"key_name",header:"Secret Key",size:120,enableSorting:!1,cell:e=>(0,t.jsx)("span",{className:"font-mono text-xs",children:e.getValue()})},{id:"team_alias",accessorKey:"team_id",header:"Team Alias",size:120,enableSorting:!1,cell:({row:t,getValue:r})=>{let l=r(),o=e?.find(e=>e.team_id===l);return o?.team_alias||"Unknown"}},{id:"team_id",accessorKey:"team_id",header:"Team ID",size:80,enableSorting:!1,cell:e=>{let r=e.getValue(),l=e.cell.column.getSize();return(0,t.jsx)(E.Tooltip,{title:r,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:l,overflow:"hidden"},children:r??"-"})})}},{id:"organization_id",accessorKey:"organization_id",header:"Organization ID",size:140,enableSorting:!1,cell:e=>e.getValue()?e.renderValue():"-"},{id:"user_email",accessorKey:"user",header:"User Email",size:160,enableSorting:!1,cell:e=>{let r=e.getValue(),l=r?.user_email,o=e.cell.column.getSize();return(0,t.jsx)(E.Tooltip,{title:l,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:o,overflow:"hidden"},children:l??"-"})})}},{id:"user_id",accessorKey:"user_id",header:"User ID",size:70,enableSorting:!1,cell:e=>{let r=e.getValue(),l="default_user_id"===r?"Default Proxy Admin":r,o=e.cell.column.getSize();return(0,t.jsx)(E.Tooltip,{title:l,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:o,overflow:"hidden"},children:l??"-"})})}},{id:"created_at",accessorKey:"created_at",header:"Created At",size:120,enableSorting:!0,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"-"}},{id:"created_by",accessorKey:"created_by",header:"Created By",size:70,enableSorting:!1,cell:e=>{let r=e.getValue(),l="default_user_id"===r?"Default Proxy Admin":r,o=e.cell.column.getSize();return(0,t.jsx)(E.Tooltip,{title:l,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:o,overflow:"hidden"},children:l??"-"})})}},{id:"updated_at",accessorKey:"updated_at",header:"Updated At",size:120,enableSorting:!0,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"Never"}},{id:"last_active",accessorKey:"last_active",header:()=>(0,t.jsxs)("span",{className:"flex items-center gap-1",children:["Last Active",(0,t.jsx)(D.Popover,{content:"This is a new field and is not backfilled. Only new key usage will update this value.",trigger:"hover",children:(0,t.jsx)(I.InfoCircleOutlined,{className:"text-gray-400 text-xs cursor-help"})})]}),size:130,enableSorting:!1,cell:e=>{let r=e.getValue();if(!r)return"Unknown";let l=new Date(r);return(0,t.jsx)(E.Tooltip,{title:l.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"long"}),children:(0,t.jsx)("span",{children:l.toLocaleDateString()})})}},{id:"expires",accessorKey:"expires",header:"Expires",size:120,enableSorting:!1,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"Never"}},{id:"spend",accessorKey:"spend",header:"Spend (USD)",size:100,enableSorting:!0,cell:e=>(0,h.formatNumberWithCommas)(e.getValue(),4)},{id:"max_budget",accessorKey:"max_budget",header:"Budget (USD)",size:110,enableSorting:!0,cell:e=>{let t=e.getValue();return null===t?"Unlimited":`$${(0,h.formatNumberWithCommas)(t)}`}},{id:"budget_reset_at",accessorKey:"budget_reset_at",header:"Budget Reset",size:130,enableSorting:!1,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleString():"Never"}},{id:"models",accessorKey:"models",header:"Models",size:200,enableSorting:!1,cell:e=>{let r=e.getValue();return(0,t.jsx)("div",{className:"flex flex-col py-2",children:Array.isArray(r)?(0,t.jsx)("div",{className:"flex flex-col",children:0===r.length?(0,t.jsx)(v.Badge,{size:"xs",className:"mb-1",color:"red",children:(0,t.jsx)(T.Text,{children:"All Proxy Models"})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex items-start",children:[r.length>3&&(0,t.jsx)("div",{children:(0,t.jsx)(j.Icon,{icon:Y[e.row.id]?p.ChevronDownIcon:x.ChevronRightIcon,className:"cursor-pointer",size:"xs",onClick:()=>{X(t=>({...t,[e.row.id]:!t[e.row.id]}))}})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[r.slice(0,3).map((e,r)=>"all-proxy-models"===e?(0,t.jsx)(v.Badge,{size:"xs",color:"red",children:(0,t.jsx)(T.Text,{children:"All Proxy Models"})},r):(0,t.jsx)(v.Badge,{size:"xs",color:"blue",children:(0,t.jsx)(T.Text,{children:e.length>30?`${(0,$.getModelDisplayName)(e).slice(0,30)}...`:(0,$.getModelDisplayName)(e)})},r)),r.length>3&&!Y[e.row.id]&&(0,t.jsx)(v.Badge,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,t.jsxs)(T.Text,{children:["+",r.length-3," ",r.length-3==1?"more model":"more models"]})}),Y[e.row.id]&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:r.slice(3).map((e,r)=>"all-proxy-models"===e?(0,t.jsx)(v.Badge,{size:"xs",color:"red",children:(0,t.jsx)(T.Text,{children:"All Proxy Models"})},r+3):(0,t.jsx)(v.Badge,{size:"xs",color:"blue",children:(0,t.jsx)(T.Text,{children:e.length>30?`${(0,$.getModelDisplayName)(e).slice(0,30)}...`:(0,$.getModelDisplayName)(e)})},r+3))})]})]})})}):null})}},{id:"rate_limits",header:"Rate Limits",size:140,enableSorting:!1,cell:({row:e})=>{let r=e.original;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["TPM: ",null!==r.tpm_limit?r.tpm_limit:"Unlimited"]}),(0,t.jsxs)("div",{children:["RPM: ",null!==r.rpm_limit?r.rpm_limit:"Unlimited"]})]})}}],[]),en=[{name:"Team ID",label:"Team ID",isSearchable:!0,searchFn:async e=>ee&&0!==ee.length?ee.filter(t=>t.team_id.toLowerCase().includes(e.toLowerCase())||t.team_alias&&t.team_alias.toLowerCase().includes(e.toLowerCase())).map(e=>({label:`${e.team_alias||e.team_id} (${e.team_id})`,value:e.team_id})):[]},{name:"Organization ID",label:"Organization ID",isSearchable:!0,searchFn:async e=>et&&0!==et.length?et.filter(t=>t.organization_id?.toLowerCase().includes(e.toLowerCase())??!1).filter(e=>null!==e.organization_id&&void 0!==e.organization_id).map(e=>({label:`${e.organization_id||"Unknown"} (${e.organization_id})`,value:e.organization_id})):[]},{name:"Key Alias",label:"Key Alias",customComponent:U.PaginatedKeyAliasSelect},{name:"User ID",label:"User ID",isSearchable:!1},{name:"Key Hash",label:"Key Hash",isSearchable:!1}];console.log(`keys: ${JSON.stringify(W)}`);let es=(0,b.useReactTable)({data:Q,columns:ea.filter(e=>"expander"!==e.id),columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:s,pagination:c},onSortingChange:e=>{let t="function"==typeof e?e(s):e;if(console.log(`newSorting: ${JSON.stringify(t)}`),d(t),t&&t.length>0){let e=t[0],r=e.id,o=e.desc?"desc":"asc";console.log(`sortBy: ${r}, sortOrder: ${o}`),er({...G,"Sort By":r,"Sort Order":o},!0),l?.(r,o)}},onPaginationChange:g,getCoreRowModel:(0,w.getCoreRowModel)(),getSortedRowModel:(0,w.getSortedRowModel)(),getPaginationRowModel:(0,w.getPaginationRowModel)(),enableSorting:!0,manualSorting:!1,manualPagination:!0,pageCount:Math.ceil(eo/c.pageSize)});i.default.useEffect(()=>{o&&d([{id:o.sortBy,desc:"desc"===o.sortOrder}])},[o]);let{pageIndex:ei,pageSize:ed}=es.getState().pagination,ec=Math.min((ei+1)*ed,eo),eu=`${ei*ed+1} - ${ec}`;return(0,t.jsx)("div",{className:"w-full h-full overflow-hidden",children:a?(0,t.jsx)(B.default,{keyId:a.token,onClose:()=>n(null),keyData:a,teams:ee,onDelete:q}):(0,t.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"w-full mb-6",children:(0,t.jsx)(L.default,{options:en,onApplyFilters:er,initialValues:G,onResetFilters:el})}),(0,t.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[H||J?(0,t.jsx)(P.Skeleton.Node,{active:!0,style:{width:200,height:20}}):(0,t.jsxs)("span",{className:"inline-flex text-sm text-gray-700",children:["Showing ",eu," of ",eo," results"]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-2",children:[H||J?(0,t.jsx)(P.Skeleton.Node,{active:!0,style:{width:74,height:20}}):(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",ei+1," of ",es.getPageCount()]}),H||J?(0,t.jsx)(P.Skeleton.Button,{active:!0,size:"small",style:{width:84,height:30}}):(0,t.jsx)("button",{onClick:()=>es.previousPage(),disabled:H||J||!es.getCanPreviousPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),H||J?(0,t.jsx)(P.Skeleton.Button,{active:!0,size:"small",style:{width:58,height:30}}):(0,t.jsx)("button",{onClick:()=>es.nextPage(),disabled:H||J||!es.getCanNextPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),(0,t.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(k.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:es.getCenterTotalSize()},children:[(0,t.jsx)(N.TableHead,{children:es.getHeaderGroups().map(e=>(0,t.jsx)(O.TableRow,{children:e.headers.map(e=>(0,t.jsx)(z.TableHeaderCell,{"data-header-id":e.id,className:`py-1 h-8 relative hover:bg-gray-50 ${"actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,style:{width:e.getSize(),position:"relative",cursor:e.column.getCanSort()?"pointer":"default"},onMouseEnter:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&(t.style.opacity="0.5")},onMouseLeave:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&!e.column.getIsResizing()&&(t.style.opacity="0")},onClick:e.column.getCanSort()?e.column.getToggleSortingHandler():void 0,children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,b.flexRender)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&e.column.getCanSort()&&(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(f.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(p.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(y.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${es.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,t.jsx)(C.TableBody,{children:H||J?(0,t.jsx)(O.TableRow,{children:(0,t.jsx)(_.TableCell,{colSpan:ea.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"ðŸš… Loading keys..."})})})}):Q.length>0?es.getRowModel().rows.map(e=>(0,t.jsx)(O.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(_.TableCell,{style:{width:e.column.getSize(),maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:`py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ${"models"===e.column.id&&Array.isArray(e.getValue())&&e.getValue().length>3?"px-0":""}`,children:(0,b.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(O.TableRow,{children:(0,t.jsx)(_.TableCell,{colSpan:ea.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No keys found"})})})})})]})})})})]})})}e.s(["default",0,({userID:e,userRole:m,teams:h,keys:p,setUserRole:x,userEmail:f,setUserEmail:y,setTeams:b,setKeys:w,premiumUser:v,organizations:S,addKey:j,createClicked:k})=>{let C,[_,N]=(0,i.useState)(null),[z,O]=(0,i.useState)(null),T=(0,s.useSearchParams)(),I=(console.log("COOKIES",document.cookie),(C=document.cookie.split("; ").find(e=>e.startsWith("token=")))?C.split("=")[1]:null),D=T.get("invitation_id"),[P,E]=(0,i.useState)(null),[$,A]=(0,i.useState)(null),[R,K]=(0,i.useState)([]),[M,U]=(0,i.useState)(null),[L,B]=(0,i.useState)(null);if((0,i.useEffect)(()=>{let e=()=>{sessionStorage.clear()};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[]),(0,i.useEffect)(()=>{if(I){let e=(0,n.jwtDecode)(I);if(e){if(console.log("Decoded token:",e),console.log("Decoded key:",e.key),E(e.key),e.user_role){let t=function(e){if(!e)return"Undefined Role";switch(console.log(`Received user role: ${e}`),e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"app_user":return"App User";case"internal_user":return"Internal User";case"internal_user_viewer":return"Internal Viewer";default:return"Unknown Role"}}(e.user_role);console.log("Decoded user_role:",t),x(t)}else console.log("User role not defined");e.user_email?y(e.user_email):console.log(`User Email is not set ${e}`)}}if(e&&P&&m&&!p&&!_){let t=sessionStorage.getItem("userModels"+e);t?K(JSON.parse(t)):(console.log(`currentOrg: ${JSON.stringify(z)}`),(async()=>{try{let t=await (0,u.getProxyUISettings)(P);U(t);let r=await (0,u.userInfoCall)(P,e,m,!1,null,null);N(r.user_info),console.log(`userSpendData: ${JSON.stringify(_)}`),r?.teams[0].keys?w(r.keys.concat(r.teams.filter(t=>"Admin"===m||t.user_id===e).flatMap(e=>e.keys))):w(r.keys),sessionStorage.setItem("userData"+e,JSON.stringify(r.keys)),sessionStorage.setItem("userSpendData"+e,JSON.stringify(r.user_info));let l=(await (0,u.modelAvailableCall)(P,e,m)).data.map(e=>e.id);console.log("available_model_names:",l),K(l),console.log("userModels:",R),sessionStorage.setItem("userModels"+e,JSON.stringify(l))}catch(e){console.error("There was an error fetching the data",e),e.message.includes("Invalid proxy server token passed")&&F()}})(),(0,c.fetchTeams)(P,e,m,z,b))}},[e,I,P,p,m]),(0,i.useEffect)(()=>{P&&(async()=>{try{let e=await (0,u.keyInfoCall)(P,[P]);console.log("keyInfo: ",e)}catch(e){e.message.includes("Invalid proxy server token passed")&&F()}})()},[P]),(0,i.useEffect)(()=>{console.log(`currentOrg: ${JSON.stringify(z)}, accessToken: ${P}, userID: ${e}, userRole: ${m}`),P&&(console.log("fetching teams"),(0,c.fetchTeams)(P,e,m,z,b))},[z]),(0,i.useEffect)(()=>{if(null!==p&&null!=L&&null!==L.team_id){let e=0;for(let t of(console.log(`keys: ${JSON.stringify(p)}`),p))L.hasOwnProperty("team_id")&&null!==t.team_id&&t.team_id===L.team_id&&(e+=t.spend);console.log(`sum: ${e}`),A(e)}else if(null!==p){let e=0;for(let t of p)e+=t.spend;A(e)}},[L]),null!=D)return(0,t.jsx)(d.default,{});function F(){(0,r.clearTokenCookies)();let e=(0,u.getProxyBaseUrl)();console.log("proxyBaseUrl:",e);let t=e?`${e}/sso/key/generate`:"/sso/key/generate";return console.log("Full URL:",t),window.location.href=t,null}if(null==I)return console.log("All cookies before redirect:",document.cookie),F(),null;try{let e=(0,n.jwtDecode)(I);console.log("Decoded token:",e);let t=e.exp,r=Math.floor(Date.now()/1e3);if(t&&r>=t)return console.log("Token expired, redirecting to login"),F(),null}catch(e){return console.error("Error decoding token:",e),(0,r.clearTokenCookies)(),F(),null}if(null==P)return null;if(null==e)return(0,t.jsx)("h1",{children:"User ID is not set"});if(null==m&&x("App Owner"),m&&"Admin Viewer"==m){let{Title:e,Paragraph:r}=a.Typography;return(0,t.jsxs)("div",{children:[(0,t.jsx)(e,{level:1,children:"Access Denied"}),(0,t.jsx)(r,{children:"Ask your proxy admin for access to create keys"})]})}return console.log("inside user dashboard, selected team",L),console.log("All cookies after redirect:",document.cookie),(0,t.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,t.jsx)(o.Grid,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,t.jsxs)(l.Col,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,t.jsx)(g.default,{team:L,teams:h,data:p,addKey:j},L?L.team_id:null),(0,t.jsx)(V,{teams:h,organizations:S})]})})})}],693569)},995118,e=>{"use strict";var t=e.i(843476),r=e.i(271645),l=e.i(764205),o=e.i(135214),a=e.i(693569),n=e.i(214541);e.s(["default",0,()=>{let{accessToken:e,userRole:s,userId:i,premiumUser:d,userEmail:c}=(0,o.default)(),{teams:u,setTeams:g}=(0,n.default)(),[m,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)([]),{keys:f,isLoading:y,error:b,pagination:w,refresh:v,setKeys:S}=(({selectedTeam:e,currentOrg:t,selectedKeyAlias:o,accessToken:a,createClicked:n,expand:s=[]})=>{let[i,d]=(0,r.useState)({keys:[],total_count:0,current_page:1,total_pages:0}),[c,u]=(0,r.useState)(!0),[g,m]=(0,r.useState)(null),h=async(e={})=>{try{if(console.log("calling fetchKeys"),!a)return void console.log("accessToken",a);u(!0);let t="number"==typeof e.page?e.page:1,r="number"==typeof e.pageSize?e.pageSize:100,o=await (0,l.keyListCall)(a,null,null,null,null,null,t,r,null,null,s.join(","));console.log("data",o),d(o),m(null)}catch(e){m(e instanceof Error?e:Error("An error occurred"))}finally{u(!1)}};return(0,r.useEffect)(()=>{h(),console.log("selectedTeam",e,"currentOrg",t,"accessToken",a,"selectedKeyAlias",o)},[e,t,a,o,n]),{keys:i.keys,isLoading:c,error:g,pagination:{currentPage:i.current_page,totalPages:i.total_pages,totalCount:i.total_count},refresh:h,setKeys:e=>{d(t=>{let r="function"==typeof e?e(t.keys):e;return{...t,keys:r}})}}})({selectedKeyAlias:null,currentOrg:null,accessToken:e||"",createClicked:m});return(0,t.jsx)(a.default,{userID:i,userRole:s,userEmail:c,teams:u,keys:f,setUserRole:()=>{},setUserEmail:()=>{},setTeams:g,setKeys:S,premiumUser:d,organizations:p,addKey:e=>{S(t=>t?[...t,e]:[e]),h(()=>!m)},createClicked:m})}],995118)},601236,e=>{e.v(e=>Promise.resolve().then(()=>e(764205)))}]);