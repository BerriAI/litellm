(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{36362:function(e,t,s){Promise.resolve().then(s.bind(s,73236))},21700:function(e,t,s){"use strict";s.d(t,{D:function(){return a.Z}});var a=s(96761)},23192:function(e,t,s){"use strict";s.d(t,{Z:function(){return p}});var a=s(57437);s(2265);var l=s(67101),r=s(12485),n=s(18135),i=s(35242),o=s(29706),d=s(77991),c=s(84264),m=s(25653),u=s(96362),x=e=>{let{href:t,className:s}=e;return(0,a.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer",title:"Open documentation in a new tab",className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}("inline-flex items-center gap-2 rounded-xl border border-zinc-200 bg-white/80 px-3.5 py-2 text-sm font-medium text-zinc-700 shadow-sm","hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 active:translate-y-[0.5px]",s),children:[(0,a.jsx)("span",{children:"API Reference Docs"}),(0,a.jsx)(u.Z,{"aria-hidden":!0,className:"h-4 w-4 opacity-80"}),(0,a.jsx)("span",{className:"sr-only",children:"(opens in a new tab)"})]})},p=e=>{let{proxySettings:t}=e,s="<your_proxy_base_url>",u=null==t?void 0:t.LITELLM_UI_API_DOC_BASE_URL;return u&&u.trim()?s=u:(null==t?void 0:t.PROXY_BASE_URL)&&(s=t.PROXY_BASE_URL),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l.Z,{className:"gap-2 p-8 h-[80vh] w-full mt-2",children:(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-2xl text-tremor-content-strong dark:text-dark-tremor-content-strong font-semibold",children:"OpenAI Compatible Proxy: API Reference"}),(0,a.jsx)(x,{className:"ml-3 shrink-0",href:"https://docs.litellm.ai/docs/proxy/user_keys"})]}),(0,a.jsxs)(c.Z,{className:"mt-2 mb-2",children:["LiteLLM is OpenAI Compatible. This means your API Key works with the OpenAI SDK. Just replace the base_url to point to your litellm proxy. Example Below"," "]}),(0,a.jsxs)(n.Z,{children:[(0,a.jsxs)(i.Z,{children:[(0,a.jsx)(r.Z,{children:"OpenAI Python SDK"}),(0,a.jsx)(r.Z,{children:"LlamaIndex"}),(0,a.jsx)(r.Z,{children:"Langchain Py"})]}),(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(o.Z,{children:(0,a.jsx)(m.Z,{language:"python",code:'import openai\nclient = openai.OpenAI(\n    api_key="your_api_key",\n    base_url="'.concat(s,'" # LiteLLM Proxy is OpenAI compatible, Read More: https://docs.litellm.ai/docs/proxy/user_keys\n)\n\nresponse = client.chat.completions.create(\n    model="gpt-3.5-turbo", # model to send to the proxy\n    messages = [\n        {\n            "role": "user",\n            "content": "this is a test request, write a short poem"\n        }\n    ]\n)\n\nprint(response)')})}),(0,a.jsx)(o.Z,{children:(0,a.jsx)(m.Z,{language:"python",code:'import os, dotenv\n\nfrom llama_index.llms import AzureOpenAI\nfrom llama_index.embeddings import AzureOpenAIEmbedding\nfrom llama_index import VectorStoreIndex, SimpleDirectoryReader, ServiceContext\n\nllm = AzureOpenAI(\n    engine="azure-gpt-3.5",               # model_name on litellm proxy\n    temperature=0.0,\n    azure_endpoint="'.concat(s,'", # litellm proxy endpoint\n    api_key="sk-1234",                    # litellm proxy API Key\n    api_version="2023-07-01-preview",\n)\n\nembed_model = AzureOpenAIEmbedding(\n    deployment_name="azure-embedding-model",\n    azure_endpoint="').concat(s,'",\n    api_key="sk-1234",\n    api_version="2023-07-01-preview",\n)\n\ndocuments = SimpleDirectoryReader("llama_index_data").load_data()\nservice_context = ServiceContext.from_defaults(llm=llm, embed_model=embed_model)\nindex = VectorStoreIndex.from_documents(documents, service_context=service_context)\n\nquery_engine = index.as_query_engine()\nresponse = query_engine.query("What did the author do growing up?")\nprint(response)')})}),(0,a.jsx)(o.Z,{children:(0,a.jsx)(m.Z,{language:"python",code:'from langchain.chat_models import ChatOpenAI\nfrom langchain.prompts.chat import (\n    ChatPromptTemplate,\n    HumanMessagePromptTemplate,\n    SystemMessagePromptTemplate,\n)\nfrom langchain.schema import HumanMessage, SystemMessage\n\nchat = ChatOpenAI(\n    openai_api_base="'.concat(s,'",\n    model = "gpt-3.5-turbo",\n    temperature=0.1\n)\n\nmessages = [\n    SystemMessage(\n        content="You are a helpful assistant that im using to make a test request to."\n    ),\n    HumanMessage(\n        content="test from litellm. tell me why it\'s amazing in 1 sentence"\n    ),\n]\nresponse = chat(messages)\n\nprint(response)')})})]})]})]})})})}},73236:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return lm}});var a=s(57437),l=s(23192),r=s(16356),n=s(19250),i=s(39760),o=s(2265),d=e=>{let{setPage:t,defaultSelectedKey:s,sidebarCollapsed:l}=e,{accessToken:d}=(0,i.Z)(),[c,m]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async()=>{if(!d){console.log("[SidebarProvider] No access token, skipping UI settings fetch");return}try{var e;console.log("[SidebarProvider] Fetching UI settings from /get/ui_settings");let t=await (0,n.getUISettings)(d);console.log("[SidebarProvider] UI settings response:",t),(null==t?void 0:null===(e=t.values)||void 0===e?void 0:e.enabled_ui_pages_internal_users)!==void 0?(console.log("[SidebarProvider] Setting enabled pages:",t.values.enabled_ui_pages_internal_users),m(t.values.enabled_ui_pages_internal_users)):console.log("[SidebarProvider] No enabled_ui_pages_internal_users in response (all pages visible by default)")}catch(e){console.error("[SidebarProvider] Failed to fetch UI settings:",e)}})()},[d]),(0,a.jsx)(r.Z,{setPage:t,defaultSelectedKey:s,collapsed:l,enabledPagesInternalUsers:c})},c=s(29599),m=s(33837),u=s(64221),x=s(16312),p=s(51653),h=s(22116),g=s(15690),f=s(10032),j=s(42264),y=s(4260),v=s(37592),b=s(23496),_=s(3810),N=s(29967),Z=s(15424),k=s(88009),w=s(69993),C=s(92403),S=s(8900),P=s(37452),T=s(44851),I=s(63709),A=s(5545),L=s(45246),M=s(96473);let D={basic:{key:"basic",title:"Basic Information",defaultExpanded:!0,fields:[{name:"name",label:"Display Name",type:"text",required:!0,placeholder:"e.g., Customer Support Agent"},{name:"description",label:"Description",type:"textarea",required:!0,placeholder:"Describe what this agent does...",rows:3},{name:"url",label:"URL",type:"url",required:!1,placeholder:"http://localhost:9999/",tooltip:"Base URL where the agent is hosted (optional)"},{name:"version",label:"Version",type:"text",placeholder:"1.0.0",defaultValue:"1.0.0"},{name:"protocolVersion",label:"Protocol Version",type:"text",placeholder:"1.0",defaultValue:"1.0"}]},skills:{key:"skills",title:"Skills",fields:[{name:"skills",label:"Skills",type:"list",defaultValue:[]}]},capabilities:{key:"capabilities",title:"Capabilities",fields:[{name:"streaming",label:"Streaming",type:"switch",defaultValue:!1},{name:"pushNotifications",label:"Push Notifications",type:"switch"},{name:"stateTransitionHistory",label:"State Transition History",type:"switch"}]},optional:{key:"optional",title:"Optional Settings",fields:[{name:"iconUrl",label:"Icon URL",type:"url",placeholder:"https://example.com/icon.png"},{name:"documentationUrl",label:"Documentation URL",type:"url",placeholder:"https://docs.example.com"},{name:"supportsAuthenticatedExtendedCard",label:"Supports Authenticated Extended Card",type:"switch"}]},litellm:{key:"litellm",title:"LiteLLM Parameters",fields:[{name:"model",label:"Model (Optional)",type:"text"},{name:"make_public",label:"Make Public",type:"switch"}]},cost:{key:"cost",title:"Cost Configuration",fields:[{name:"cost_per_query",label:"Cost Per Query ($)",type:"text",placeholder:"0.0",tooltip:"Fixed cost per query"},{name:"input_cost_per_token",label:"Input Cost Per Token ($)",type:"text",placeholder:"0.000001",tooltip:"Cost per input token"},{name:"output_cost_per_token",label:"Output Cost Per Token ($)",type:"text",placeholder:"0.000002",tooltip:"Cost per output token"}]}},E={id:{name:"id",label:"Skill ID",required:!0,placeholder:"e.g., hello_world"},name:{name:"name",label:"Skill Name",required:!0,placeholder:"e.g., Returns hello world"},description:{name:"description",label:"Description",required:!0,placeholder:"What this skill does",rows:2},tags:{name:"tags",label:"Tags (comma-separated)",required:!0,placeholder:"e.g., hello world, greeting"},examples:{name:"examples",label:"Examples (comma-separated)",placeholder:"e.g., hi, hello world"}},z=()=>{let e={defaultInputModes:["text"],defaultOutputModes:["text"]};return Object.values(D).forEach(t=>{t.fields.forEach(t=>{void 0!==t.defaultValue&&(e[t.name]=t.defaultValue)})}),e},F=(e,t)=>{var s,a;let l={agent_name:e.agent_name,agent_card_params:{protocolVersion:e.protocolVersion||"1.0",name:e.name||e.agent_name,description:e.description||"",url:e.url||"",version:e.version||"1.0.0",defaultInputModes:(null==t?void 0:null===(s=t.agent_card_params)||void 0===s?void 0:s.defaultInputModes)||["text"],defaultOutputModes:(null==t?void 0:null===(a=t.agent_card_params)||void 0===a?void 0:a.defaultOutputModes)||["text"],capabilities:{streaming:!0===e.streaming,...void 0!==e.pushNotifications&&{pushNotifications:e.pushNotifications},...void 0!==e.stateTransitionHistory&&{stateTransitionHistory:e.stateTransitionHistory}},skills:e.skills||[],...e.iconUrl&&{iconUrl:e.iconUrl},...e.documentationUrl&&{documentationUrl:e.documentationUrl},...void 0!==e.supportsAuthenticatedExtendedCard&&{supportsAuthenticatedExtendedCard:e.supportsAuthenticatedExtendedCard}}},r={};return e.model&&(r.model=e.model),void 0!==e.make_public&&(r.make_public=e.make_public),e.cost_per_query&&(r.cost_per_query=parseFloat(e.cost_per_query)),e.input_cost_per_token&&(r.input_cost_per_token=parseFloat(e.input_cost_per_token)),e.output_cost_per_token&&(r.output_cost_per_token=parseFloat(e.output_cost_per_token)),Object.keys(r).length>0&&(l.litellm_params=r),l},q=e=>{var t,s,a,l,r,n,i,o,d,c,m,u,x,p,h,g,f,j,y,v,b;let _=(null===(s=e.agent_card_params)||void 0===s?void 0:null===(t=s.skills)||void 0===t?void 0:t.map(e=>({...e,tags:e.tags,examples:e.examples||[]})))||[];return{agent_name:e.agent_name,name:null===(a=e.agent_card_params)||void 0===a?void 0:a.name,description:null===(l=e.agent_card_params)||void 0===l?void 0:l.description,url:null===(r=e.agent_card_params)||void 0===r?void 0:r.url,version:null===(n=e.agent_card_params)||void 0===n?void 0:n.version,protocolVersion:null===(i=e.agent_card_params)||void 0===i?void 0:i.protocolVersion,streaming:null===(d=e.agent_card_params)||void 0===d?void 0:null===(o=d.capabilities)||void 0===o?void 0:o.streaming,pushNotifications:null===(m=e.agent_card_params)||void 0===m?void 0:null===(c=m.capabilities)||void 0===c?void 0:c.pushNotifications,stateTransitionHistory:null===(x=e.agent_card_params)||void 0===x?void 0:null===(u=x.capabilities)||void 0===u?void 0:u.stateTransitionHistory,skills:_,iconUrl:null===(p=e.agent_card_params)||void 0===p?void 0:p.iconUrl,documentationUrl:null===(h=e.agent_card_params)||void 0===h?void 0:h.documentationUrl,supportsAuthenticatedExtendedCard:null===(g=e.agent_card_params)||void 0===g?void 0:g.supportsAuthenticatedExtendedCard,model:null===(f=e.litellm_params)||void 0===f?void 0:f.model,make_public:null===(j=e.litellm_params)||void 0===j?void 0:j.make_public,cost_per_query:null===(y=e.litellm_params)||void 0===y?void 0:y.cost_per_query,input_cost_per_token:null===(v=e.litellm_params)||void 0===v?void 0:v.input_cost_per_token,output_cost_per_token:null===(b=e.litellm_params)||void 0===b?void 0:b.output_cost_per_token}};var R=()=>(0,a.jsx)(a.Fragment,{children:D.cost.fields.map(e=>(0,a.jsx)(f.Z.Item,{label:e.label,name:e.name,tooltip:e.tooltip,children:(0,a.jsx)(y.default,{placeholder:e.placeholder,type:"number",step:"0.000001"})},e.name))});let{Panel:O}=T.default;var B=e=>{let{showAgentName:t=!0,visiblePanels:s}=e,l=e=>!s||s.includes(e);return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(f.Z.Item,{label:"Agent Name",name:"agent_name",rules:[{required:!0,message:"Please enter a unique agent name"}],tooltip:"Unique identifier for the agent",children:(0,a.jsx)(y.default,{placeholder:"e.g., customer-support-agent"})}),(0,a.jsxs)(T.default,{defaultActiveKey:["basic"],style:{marginBottom:16},children:[l(D.basic.key)&&(0,a.jsx)(O,{header:"".concat(D.basic.title," (Required)"),children:D.basic.fields.map(e=>(0,a.jsx)(f.Z.Item,{label:e.label,name:e.name,rules:e.required?[{required:!0,message:"Please enter ".concat(e.label.toLowerCase())}]:void 0,tooltip:e.tooltip,children:"textarea"===e.type?(0,a.jsx)(y.default.TextArea,{rows:e.rows,placeholder:e.placeholder}):(0,a.jsx)(y.default,{placeholder:e.placeholder})},e.name))},D.basic.key),l(D.skills.key)&&(0,a.jsx)(O,{header:"".concat(D.skills.title," (Required)"),children:(0,a.jsx)(f.Z.List,{name:"skills",children:(e,t)=>{let{add:s,remove:l}=t;return(0,a.jsxs)(a.Fragment,{children:[e.map(e=>(0,a.jsxs)("div",{style:{marginBottom:16,padding:16,border:"1px solid #d9d9d9",borderRadius:4},children:[(0,a.jsx)(f.Z.Item,{...e,label:E.id.label,name:[e.name,"id"],rules:[{required:E.id.required,message:"Required"}],children:(0,a.jsx)(y.default,{placeholder:E.id.placeholder})}),(0,a.jsx)(f.Z.Item,{...e,label:E.name.label,name:[e.name,"name"],rules:[{required:E.name.required,message:"Required"}],children:(0,a.jsx)(y.default,{placeholder:E.name.placeholder})}),(0,a.jsx)(f.Z.Item,{...e,label:E.description.label,name:[e.name,"description"],rules:[{required:E.description.required,message:"Required"}],children:(0,a.jsx)(y.default.TextArea,{rows:E.description.rows,placeholder:E.description.placeholder})}),(0,a.jsx)(f.Z.Item,{...e,label:E.tags.label,name:[e.name,"tags"],rules:[{required:E.tags.required,message:"Required"}],getValueFromEvent:e=>e.target.value.split(",").map(e=>e.trim()),getValueProps:e=>({value:Array.isArray(e)?e.join(", "):e}),children:(0,a.jsx)(y.default,{placeholder:E.tags.placeholder})}),(0,a.jsx)(f.Z.Item,{...e,label:E.examples.label,name:[e.name,"examples"],getValueFromEvent:e=>e.target.value.split(",").map(e=>e.trim()).filter(e=>e),getValueProps:e=>({value:Array.isArray(e)?e.join(", "):""}),children:(0,a.jsx)(y.default,{placeholder:E.examples.placeholder})}),(0,a.jsx)(A.ZP,{type:"link",danger:!0,onClick:()=>l(e.name),icon:(0,a.jsx)(L.Z,{}),children:"Remove Skill"})]},e.key)),(0,a.jsx)(A.ZP,{type:"dashed",onClick:()=>s(),icon:(0,a.jsx)(M.Z,{}),style:{width:"100%"},children:"Add Skill"})]})}})},D.skills.key),l(D.capabilities.key)&&(0,a.jsx)(O,{header:D.capabilities.title,children:D.capabilities.fields.map(e=>(0,a.jsx)(f.Z.Item,{label:e.label,name:e.name,valuePropName:"checked",children:(0,a.jsx)(I.Z,{})},e.name))},D.capabilities.key),l(D.optional.key)&&(0,a.jsx)(O,{header:D.optional.title,children:D.optional.fields.map(e=>(0,a.jsx)(f.Z.Item,{label:e.label,name:e.name,valuePropName:"switch"===e.type?"checked":void 0,children:"switch"===e.type?(0,a.jsx)(I.Z,{}):(0,a.jsx)(y.default,{placeholder:e.placeholder})},e.name))},D.optional.key),l(D.cost.key)&&(0,a.jsx)(O,{header:D.cost.title,children:(0,a.jsx)(R,{})},D.cost.key),l(D.litellm.key)&&(0,a.jsx)(O,{header:D.litellm.title,children:D.litellm.fields.map(e=>(0,a.jsx)(f.Z.Item,{label:e.label,name:e.name,valuePropName:"switch"===e.type?"checked":void 0,children:"switch"===e.type?(0,a.jsx)(I.Z,{}):(0,a.jsx)(y.default,{placeholder:e.placeholder})},e.name))},D.litellm.key)]})]})};let{Panel:U}=T.default,V=(e,t)=>{let s={...t.litellm_params_template||{}};for(let a of t.credential_fields){let t=e[a.key];t&&!1!==a.include_in_litellm_params&&(s[a.key]=t)}if(e.cost_per_query&&(s.cost_per_query=parseFloat(e.cost_per_query)),e.input_cost_per_token&&(s.input_cost_per_token=parseFloat(e.input_cost_per_token)),e.output_cost_per_token&&(s.output_cost_per_token=parseFloat(e.output_cost_per_token)),t.model_template){let a=t.model_template;for(let s of t.credential_fields){let t="{".concat(s.key,"}");a.includes(t)&&e[s.key]&&(a=a.replace(t,e[s.key]))}s.model=a}return{agent_name:e.agent_name,agent_card_params:{protocolVersion:"1.0",name:e.display_name||e.agent_name,description:e.description||"".concat(t.agent_type_display_name," agent"),url:e.api_base||"",version:"1.0.0",defaultInputModes:["text"],defaultOutputModes:["text"],capabilities:{streaming:!0},skills:[{id:"chat",name:"Chat",description:"General chat capability",tags:["chat","conversation"]}]},litellm_params:s}};var G=e=>{let{agentTypeInfo:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z.Item,{label:"Agent Name",name:"agent_name",rules:[{required:!0,message:"Please enter a unique agent name"}],tooltip:"Unique identifier for the agent",children:(0,a.jsx)(y.default,{placeholder:"e.g., my-langgraph-agent"})}),(0,a.jsx)(f.Z.Item,{label:"Description",name:"description",tooltip:"Brief description of what this agent does",children:(0,a.jsx)(y.default.TextArea,{rows:2,placeholder:"Describe what this agent does..."})}),t.credential_fields.map(e=>(0,a.jsx)(f.Z.Item,{label:e.label,name:e.key,rules:e.required?[{required:!0,message:"Please enter ".concat(e.label)}]:void 0,tooltip:e.tooltip,initialValue:e.default_value,children:"password"===e.field_type?(0,a.jsx)(y.default.Password,{placeholder:e.placeholder||""}):"textarea"===e.field_type?(0,a.jsx)(y.default.TextArea,{rows:3,placeholder:e.placeholder||""}):"select"===e.field_type&&e.options?(0,a.jsx)(v.default,{placeholder:e.placeholder||"",children:e.options.map(e=>(0,a.jsx)(v.default.Option,{value:e,children:e},e))}):(0,a.jsx)(y.default,{placeholder:e.placeholder||""})},e.key)),(0,a.jsx)(T.default,{style:{marginBottom:16},children:(0,a.jsx)(U,{header:D.cost.title,children:(0,a.jsx)(R,{})},D.cost.key)})]})},K=s(97492),H=s(68473);let{Step:W}=g.default,Y="custom";var J=e=>{var t;let{visible:s,onClose:l,accessToken:r,onSuccess:i}=e,[d]=f.Z.useForm(),[c,m]=(0,o.useState)(0),[u,p]=(0,o.useState)(!1),[T,I]=(0,o.useState)("a2a"),[A,L]=(0,o.useState)([]),[M,D]=(0,o.useState)(!1),[E,q]=(0,o.useState)("create_new"),[R,O]=(0,o.useState)(""),[U,J]=(0,o.useState)([]),[$,Q]=(0,o.useState)([]),[X,ee]=(0,o.useState)(null),[et,es]=(0,o.useState)(!1),[ea,el]=(0,o.useState)(""),[er,en]=(0,o.useState)(null),[ei,eo]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{D(!0);try{let e=await (0,n.getAgentCreateMetadata)();L(e)}catch(e){console.error("Error fetching agent metadata:",e)}finally{D(!1)}})()},[]),(0,o.useEffect)(()=>{2===c&&r&&0===$.length&&(async()=>{es(!0);try{let e=await (0,n.keyListCall)(r,null,null,null,null,null,1,100);Q((null==e?void 0:e.keys)||[])}catch(e){console.error("Error fetching keys:",e)}finally{es(!1)}})()},[c,r]);let ed=A.find(e=>e.agent_type===T),ec=async()=>{try{if(0===c){await d.validateFields(["agent_name"]);let e=d.getFieldValue("agent_name");e&&!R&&O("".concat(e,"-key"))}m(e=>e+1)}catch(e){}},em=e=>{if(T===Y)return{agent_name:e.agent_name,agent_card_params:{protocolVersion:"1.0",name:e.agent_name,description:e.description||"",url:"",version:"1.0.0",defaultInputModes:["text"],defaultOutputModes:["text"],capabilities:{streaming:!1},skills:[]}};if("a2a"===T)return F(e);if(null==ed?void 0:ed.use_a2a_form_fields){let t=F(e);for(let s of(ed.litellm_params_template&&(t.litellm_params={...t.litellm_params,...ed.litellm_params_template}),ed.credential_fields)){let a=e[s.key];a&&!1!==s.include_in_litellm_params&&(t.litellm_params[s.key]=a)}return t}return ed?V(e,ed):null},eu=async()=>{if(!r){j.ZP.error("No access token available");return}p(!0);try{var e,t,s,a;await d.validateFields();let l={...d.getFieldsValue(!0)},o=em(l);if(!o){j.ZP.error("Failed to build agent data"),p(!1);return}let c=l.allowed_mcp_servers_and_groups,u=l.mcp_tool_permissions||{};(c&&((null===(e=c.servers)||void 0===e?void 0:e.length)>0||(null===(t=c.accessGroups)||void 0===t?void 0:t.length)>0)||Object.keys(u).length>0)&&(o.object_permission={},(null==c?void 0:null===(s=c.servers)||void 0===s?void 0:s.length)>0&&(o.object_permission.mcp_servers=c.servers),(null==c?void 0:null===(a=c.accessGroups)||void 0===a?void 0:a.length)>0&&(o.object_permission.mcp_access_groups=c.accessGroups),Object.keys(u).length>0&&(o.object_permission.mcp_tool_permissions=u));let x=await (0,n.createAgentCall)(r,o),h=x.agent_id,g=x.agent_name||l.agent_name||h;if(el(g),"create_new"===E&&R){let e=await (0,n.keyCreateForAgentCall)(r,h,R,U);en(e.key||null)}else if("existing_key"===E){if(!X){j.ZP.error("Please select an existing key to assign"),p(!1);return}await (0,n.keyUpdateCall)(r,{key:X,agent_id:h});let e=$.find(e=>e.token===X);eo((null==e?void 0:e.key_alias)||X.slice(0,12)+"…")}m(3),i()}catch(e){console.error("Error creating agent:",e),j.ZP.error("Failed to create agent")}finally{p(!1)}},ex=()=>{d.resetFields(),I("a2a"),m(0),q("create_new"),O(""),J([]),ee(null),el(""),en(null),eo(null),l()},ep=e=>{I(e),d.resetFields()},eh=T===Y?null:(null==ed?void 0:ed.logo_url)||(null===(t=A.find(e=>"a2a"===e.agent_type))||void 0===t?void 0:t.logo_url);return(0,a.jsx)(h.Z,{title:(0,a.jsxs)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:[eh&&c<1&&(0,a.jsx)("img",{src:eh,alt:"Agent",className:"w-6 h-6 object-contain"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Agent"})]}),open:s,onCancel:ex,footer:null,width:900,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)(g.default,{current:c,size:"small",className:"mb-8",children:[(0,a.jsx)(W,{title:"Configure"}),(0,a.jsx)(W,{title:"MCP Tools"}),(0,a.jsx)(W,{title:"Assign Key"}),(0,a.jsx)(W,{title:"Ready"})]}),(0,a.jsxs)(f.Z,{form:d,layout:"vertical",initialValues:"a2a"===T?{...z(),allowed_mcp_servers_and_groups:{servers:[],accessGroups:[]},mcp_tool_permissions:{}}:{allowed_mcp_servers_and_groups:{servers:[],accessGroups:[]},mcp_tool_permissions:{}},className:"space-y-4",children:[0===c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z.Item,{label:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Agent Type"}),required:!0,tooltip:"Select the type of agent you want to create",children:(0,a.jsx)(v.default,{value:T,onChange:ep,size:"large",style:{width:"100%"},optionLabelProp:"label",dropdownRender:e=>(0,a.jsxs)(a.Fragment,{children:[e,(0,a.jsx)(b.Z,{style:{margin:"4px 0"}}),(0,a.jsxs)("div",{className:"px-2 py-1",children:[(0,a.jsx)("div",{className:"text-xs text-gray-400 font-medium mb-1 uppercase tracking-wide px-2",children:"Not listed?"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 px-2 py-2 rounded cursor-pointer transition-colors ".concat(T===Y?"bg-amber-50":"hover:bg-amber-50"),onClick:()=>ep(Y),children:[(0,a.jsx)(k.Z,{className:"text-amber-600 text-lg"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-amber-700",children:"Custom / Other"}),(0,a.jsx)(_.Z,{color:"orange",style:{fontSize:10,padding:"0 4px"},children:"GENERIC"})]}),(0,a.jsx)("div",{className:"text-xs text-amber-600",children:"For agents that don't follow a standard protocol — just needs a virtual key"})]})]})]})]}),children:A.map(e=>(0,a.jsx)(v.default.Option,{value:e.agent_type,label:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("img",{src:e.logo_url||"",alt:"",className:"w-4 h-4 object-contain"}),(0,a.jsx)("span",{children:e.agent_type_display_name})]}),children:(0,a.jsxs)("div",{className:"flex items-center gap-3 py-1",children:[(0,a.jsx)("img",{src:e.logo_url||"",alt:e.agent_type_display_name,className:"w-5 h-5 object-contain"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.agent_type_display_name}),e.description&&(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]})},e.agent_type))})}),(0,a.jsx)("div",{className:"mt-4",children:T===Y?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(f.Z.Item,{label:"Agent Name",name:"agent_name",rules:[{required:!0,message:"Please enter an agent name"}],children:(0,a.jsx)(y.default,{placeholder:"e.g. my-custom-agent"})}),(0,a.jsx)(f.Z.Item,{label:"Description",name:"description",children:(0,a.jsx)(y.default.TextArea,{placeholder:"Describe what this agent does…",rows:3})})]}):"a2a"===T?(0,a.jsx)(B,{showAgentName:!0}):(null==ed?void 0:ed.use_a2a_form_fields)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B,{showAgentName:!0}),ed.credential_fields.length>0&&(0,a.jsxs)("div",{className:"mt-4 p-4 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:[ed.agent_type_display_name," Settings"]}),ed.credential_fields.map(e=>(0,a.jsx)(f.Z.Item,{label:e.label,name:e.key,rules:e.required?[{required:!0,message:"Please enter ".concat(e.label)}]:void 0,tooltip:e.tooltip,initialValue:e.default_value,children:"password"===e.field_type?(0,a.jsx)(y.default.Password,{placeholder:e.placeholder||""}):(0,a.jsx)(y.default,{placeholder:e.placeholder||""})},e.key))]})]}):ed?(0,a.jsx)(G,{agentTypeInfo:ed}):null})]}),1===c&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Optionally restrict which MCP servers and tools this agent can use. Leave empty to allow all (subject to key/team permissions)."}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{children:["Allowed MCP Servers"," ",(0,a.jsx)(Z.Z,{title:"Select which MCP servers or access groups this agent can access",style:{marginLeft:"4px"}})]}),name:"allowed_mcp_servers_and_groups",initialValue:{servers:[],accessGroups:[]},children:(0,a.jsx)(K.Z,{onChange:e=>d.setFieldValue("allowed_mcp_servers_and_groups",e),value:d.getFieldValue("allowed_mcp_servers_and_groups")||{servers:[],accessGroups:[]},accessToken:null!=r?r:"",placeholder:"Select MCP servers or access groups (optional)"})}),(0,a.jsx)(f.Z.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,a.jsx)(y.default,{type:"hidden"})}),(0,a.jsx)(f.Z.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.allowed_mcp_servers_and_groups!==t.allowed_mcp_servers_and_groups||e.mcp_tool_permissions!==t.mcp_tool_permissions,children:()=>{var e,t,s;return(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(H.Z,{accessToken:null!=r?r:"",selectedServers:null!==(t=null===(e=d.getFieldValue("allowed_mcp_servers_and_groups"))||void 0===e?void 0:e.servers)&&void 0!==t?t:[],toolPermissions:null!==(s=d.getFieldValue("mcp_tool_permissions"))&&void 0!==s?s:{},onChange:e=>d.setFieldsValue({mcp_tool_permissions:e})})})}})]}),2===c&&(()=>{let e=d.getFieldValue("agent_name")||"your-agent";return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-center mb-6",children:(0,a.jsx)(_.Z,{icon:(0,a.jsx)(w.Z,{}),color:"purple",className:"px-3 py-1 text-sm",children:e})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-colors ".concat("create_new"===E?"border-indigo-600 bg-indigo-50":"border-gray-200 bg-white hover:border-gray-300"),onClick:()=>q("create_new"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,a.jsx)(N.ZP,{value:"create_new",checked:"create_new"===E,onChange:()=>q("create_new")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"text-indigo-600"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Create a new key for this agent"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"A dedicated key scoped to this agent."}),"create_new"===E&&(0,a.jsxs)("div",{className:"mt-3 space-y-3",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-600 block mb-1",children:"Key Name"}),(0,a.jsx)(y.default,{value:R,onChange:e=>O(e.target.value),placeholder:"e.g. my-agent-key"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm text-gray-600 block mb-1",children:["Allowed Models ",(0,a.jsx)("span",{className:"text-gray-400",children:"(optional — leave empty for all models)"})]}),(0,a.jsx)(v.default,{mode:"tags",style:{width:"100%"},placeholder:"e.g. gpt-4o, claude-3-5-sonnet",value:U,onChange:J,tokenSeparators:[","]})]})]})]})]}),(0,a.jsx)(_.Z,{color:"green",children:"Recommended"})]})}),(0,a.jsx)("div",{className:"p-4 border-2 rounded-lg cursor-pointer transition-colors ".concat("existing_key"===E?"border-indigo-600 bg-indigo-50":"border-gray-200 bg-white hover:border-gray-300"),onClick:()=>q("existing_key"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(N.ZP,{value:"existing_key",checked:"existing_key"===E,onChange:()=>q("existing_key")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"text-gray-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Assign an existing key"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Re-assign a key you already have to this agent."}),"existing_key"===E&&(0,a.jsx)("div",{className:"mt-3",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(v.default,{showSearch:!0,style:{width:"100%"},placeholder:"Search by key name…",loading:et,value:X,onChange:e=>ee(e),filterOption:(e,t)=>{var s;return(null!==(s=null==t?void 0:t.label)&&void 0!==s?s:"").toLowerCase().includes(e.toLowerCase())},options:$.map(e=>{var t;return{label:e.key_alias||(null===(t=e.token)||void 0===t?void 0:t.slice(0,12))+"…",value:e.token}})})})]})]})})]}),(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsx)("button",{type:"button",className:"text-sm text-gray-500 underline hover:text-gray-700",onClick:()=>q("skip"),children:"Skip for now — I'll assign a key later"})})]})})(),3===c&&(0,a.jsxs)("div",{className:"text-center py-6",children:[(0,a.jsx)(S.Z,{className:"text-5xl text-green-500 mb-4",style:{fontSize:48}}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Agent Created!"}),(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(_.Z,{icon:(0,a.jsx)(w.Z,{}),color:"purple",className:"px-3 py-1 text-sm",children:ea})}),er&&(0,a.jsx)("div",{className:"mt-4 text-left max-w-md mx-auto",children:(0,a.jsx)(P.Z,{apiKey:er})}),ei&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Key ",(0,a.jsx)("span",{className:"font-medium",children:ei})," has been assigned to this agent."]}),!er&&!ei&&"skip"===E&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"No key assigned. You can create one from the Virtual Keys page."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-gray-100 mt-6",children:[(0,a.jsx)("div",{children:c>0&&c<3&&(0,a.jsx)("button",{type:"button",onClick:()=>{m(e=>Math.max(0,e-1))},className:"text-sm text-gray-600 border border-gray-300 rounded px-4 py-2 hover:bg-gray-50",children:"← Back"})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[c<3&&(0,a.jsx)(x.z,{variant:"secondary",onClick:ex,children:"Cancel"}),0===c&&(0,a.jsx)(x.z,{variant:"primary",onClick:ec,children:"Next →"}),1===c&&(0,a.jsx)(x.z,{variant:"primary",onClick:ec,children:"Next →"}),2===c&&(0,a.jsx)(x.z,{variant:"primary",loading:u,onClick:eu,children:u?"Creating...":"Create Agent →"}),3===c&&(0,a.jsx)(x.z,{variant:"primary",onClick:ex,children:"Done"})]})]})]})})},$=s(50337),Q=s(33866),X=s(5945),ee=s(99981),et=s(23639),es=s(26349),ea=s(35291),el=e=>{var t,s,l;let{agent:r,keyInfo:n,onAgentClick:i,onDeleteClick:o,isAdmin:d}=e,c=(null===(t=r.agent_card_params)||void 0===t?void 0:t.description)||"No description",m=null===(s=r.agent_card_params)||void 0===s?void 0:s.url,u=null!==(l=null==n?void 0:n.has_key)&&void 0!==l&&l,x=u?(0,a.jsx)(Q.Z,{status:"success",text:"Active"}):(0,a.jsx)(Q.Z,{status:"warning",text:"Needs Setup"}),p=(e,t)=>{e.stopPropagation(),navigator.clipboard.writeText(t)};return(0,a.jsxs)(X.Z,{hoverable:!0,className:"h-full flex flex-col",styles:{body:{flex:1,display:"flex",flexDirection:"column"}},onClick:()=>i(r.agent_id),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900 truncate",children:r.agent_name}),(0,a.jsx)(ee.Z,{title:"Copy Agent ID",children:(0,a.jsx)(et.Z,{onClick:e=>p(e,r.agent_id),className:"cursor-pointer text-gray-400 hover:text-blue-500 text-xs shrink-0"})})]}),(0,a.jsx)("div",{className:"mt-1",children:x})]}),d&&o&&(0,a.jsx)(ee.Z,{title:"Delete agent",children:(0,a.jsx)(A.ZP,{type:"text",size:"small",danger:!0,icon:(0,a.jsx)(es.Z,{}),onClick:e=>{e.stopPropagation(),o(r.agent_id,r.agent_name)},className:"shrink-0 -mr-1"})})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 flex-1 mb-3",children:c}),m&&(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate mb-2",title:m,children:m}),(0,a.jsx)("div",{className:"mt-auto pt-3 border-t border-gray-100 text-xs",children:u?(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-600",children:[(0,a.jsx)(C.Z,{}),(0,a.jsx)("span",{children:(null==n?void 0:n.key_alias)||(null==n?void 0:n.token_prefix)||"Key assigned"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-amber-600",children:[(0,a.jsx)(ea.Z,{}),(0,a.jsx)("span",{children:"No key assigned"})]})})]})},er=e=>{let{agentsList:t,keyInfoMap:s,isLoading:l,onDeleteClick:r,accessToken:n,onAgentUpdated:i,isAdmin:o,onAgentClick:d}=e;return l?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,a.jsx)($.Z,{active:!0,paragraph:{rows:3}},e))}):t&&0!==t.length?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsx)(el,{agent:e,keyInfo:s[e.agent_id],onAgentClick:d,onDeleteClick:o?r:void 0,accessToken:n,isAdmin:o,onAgentUpdated:i},e.agent_id))}):(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-gray-50/50 py-12 text-center",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No agents found. Create one to get started."})})},en=s(20347),ei=s(78489),eo=s(12514),ed=s(12485),ec=s(18135),em=s(35242),eu=s(29706),ex=s(77991),ep=s(84264),eh=s(96761),eg=s(10353),ef=s(76188),ej=s(10900),ey=s(21700),ev=e=>{let{agent:t}=e,s=t.litellm_params;return(null==s?void 0:s.cost_per_query)===void 0&&(null==s?void 0:s.input_cost_per_token)===void 0&&(null==s?void 0:s.output_cost_per_token)===void 0?null:(0,a.jsxs)("div",{style:{marginTop:24},children:[(0,a.jsx)(ey.D,{children:"Cost Configuration"}),(0,a.jsxs)(ef.Z,{bordered:!0,column:1,style:{marginTop:16},children:[void 0!==s.cost_per_query&&(0,a.jsxs)(ef.Z.Item,{label:"Cost Per Query",children:["$",s.cost_per_query]}),void 0!==s.input_cost_per_token&&(0,a.jsxs)(ef.Z.Item,{label:"Input Cost Per Token",children:["$",s.input_cost_per_token]}),void 0!==s.output_cost_per_token&&(0,a.jsxs)(ef.Z.Item,{label:"Output Cost Per Token",children:["$",s.output_cost_per_token]})]})]})};let eb=e=>{var t,s;let a=(null===(t=e.litellm_params)||void 0===t?void 0:t.model)||"",l=null===(s=e.litellm_params)||void 0===s?void 0:s.custom_llm_provider;return"langgraph"===l?"langgraph":"azure_ai"===l?"azure_ai_foundry":"bedrock"===l?"bedrock_agentcore":a.startsWith("langgraph/")?"langgraph":a.startsWith("azure_ai/agents/")?"azure_ai_foundry":a.startsWith("bedrock/agentcore/")?"bedrock_agentcore":"a2a"},e_=(e,t)=>{var s,a,l,r,n,i;let o={agent_name:e.agent_name,description:(null===(s=e.agent_card_params)||void 0===s?void 0:s.description)||""};for(let s of t.credential_fields)if(!1!==s.include_in_litellm_params)o[s.key]=(null===(n=e.litellm_params)||void 0===n?void 0:n[s.key])||s.default_value||"";else if(t.model_template&&(null===(i=e.litellm_params)||void 0===i?void 0:i.model)){let a=e.litellm_params.model,l=t.model_template.split("/"),r=a.split("/");l.forEach((e,t)=>{e==="{".concat(s.key,"}")&&r[t]&&(o[s.key]=r[t])})}return o.cost_per_query=null===(a=e.litellm_params)||void 0===a?void 0:a.cost_per_query,o.input_cost_per_token=null===(l=e.litellm_params)||void 0===l?void 0:l.input_cost_per_token,o.output_cost_per_token=null===(r=e.litellm_params)||void 0===r?void 0:r.output_cost_per_token,o};var eN=e=>{var t,s,l,r,i,d,c,m,u,x,p,h,g,v,b,_,N,Z,k,w;let{agentId:C,onClose:S,accessToken:P,isAdmin:T}=e,[I,L]=(0,o.useState)(null),[M,D]=(0,o.useState)(!0),[E,z]=(0,o.useState)(!1),[R,O]=(0,o.useState)(!1),[U]=f.Z.useForm(),[K,H]=(0,o.useState)([]),[W,Y]=(0,o.useState)("a2a");(0,o.useEffect)(()=>{(async()=>{try{let e=await (0,n.getAgentCreateMetadata)();H(e)}catch(e){console.error("Error fetching agent metadata:",e)}})()},[]),(0,o.useEffect)(()=>{J()},[C,P]);let J=async()=>{if(P){D(!0);try{let e=await (0,n.getAgentInfo)(P,C);L(e);let t=eb(e);if(Y(t),"a2a"===t)U.setFieldsValue(q(e));else{let s=K.find(e=>e.agent_type===t);s?U.setFieldsValue(e_(e,s)):U.setFieldsValue(q(e))}}catch(e){console.error("Error fetching agent info:",e),j.ZP.error("Failed to load agent information")}finally{D(!1)}}};(0,o.useEffect)(()=>{if(I&&K.length>0){let e=eb(I);if("a2a"!==e){let t=K.find(t=>t.agent_type===e);t&&U.setFieldsValue(e_(I,t))}}},[K,I]);let $=K.find(e=>e.agent_type===W),Q=async e=>{if(P&&I){O(!0);try{let t;"a2a"===W?t=F(e,I):$?(t=V(e,$)).agent_name=e.agent_name:t=F(e,I),await (0,n.patchAgentCall)(P,C,t),j.ZP.success("Agent updated successfully"),z(!1),J()}catch(e){console.error("Error updating agent:",e),j.ZP.error("Failed to update agent")}finally{O(!1)}}};if(M)return(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(eg.Z,{size:"large"})})});if(!I)return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"text-center",children:"Agent not found"}),(0,a.jsx)(ei.Z,{onClick:S,className:"mt-4",children:"Back to Agents List"})]});let X=e=>e?new Date(e).toLocaleString():"-";return(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ei.Z,{icon:ej.Z,variant:"light",onClick:S,className:"mb-4",children:"Back to Agents"}),(0,a.jsx)(eh.Z,{children:I.agent_name||"Unnamed Agent"}),(0,a.jsx)(ep.Z,{className:"text-gray-500 font-mono",children:I.agent_id})]}),(0,a.jsxs)(ec.Z,{children:[(0,a.jsxs)(em.Z,{className:"mb-4",children:[(0,a.jsx)(ed.Z,{children:"Overview"},"overview"),T?(0,a.jsx)(ed.Z,{children:"Settings"},"settings"):(0,a.jsx)(a.Fragment,{})]}),(0,a.jsxs)(ex.Z,{children:[(0,a.jsxs)(eu.Z,{children:[(0,a.jsxs)(ef.Z,{bordered:!0,column:1,children:[(0,a.jsx)(ef.Z.Item,{label:"Agent ID",children:I.agent_id}),(0,a.jsx)(ef.Z.Item,{label:"Agent Name",children:I.agent_name}),(0,a.jsx)(ef.Z.Item,{label:"Display Name",children:(null===(t=I.agent_card_params)||void 0===t?void 0:t.name)||"-"}),(0,a.jsx)(ef.Z.Item,{label:"Description",children:(null===(s=I.agent_card_params)||void 0===s?void 0:s.description)||"-"}),(0,a.jsx)(ef.Z.Item,{label:"URL",children:(null===(l=I.agent_card_params)||void 0===l?void 0:l.url)||"-"}),(0,a.jsx)(ef.Z.Item,{label:"Version",children:(null===(r=I.agent_card_params)||void 0===r?void 0:r.version)||"-"}),(0,a.jsx)(ef.Z.Item,{label:"Protocol Version",children:(null===(i=I.agent_card_params)||void 0===i?void 0:i.protocolVersion)||"-"}),(0,a.jsx)(ef.Z.Item,{label:"Streaming",children:(null===(c=I.agent_card_params)||void 0===c?void 0:null===(d=c.capabilities)||void 0===d?void 0:d.streaming)?"Yes":"No"}),(null===(u=I.agent_card_params)||void 0===u?void 0:null===(m=u.capabilities)||void 0===m?void 0:m.pushNotifications)&&(0,a.jsx)(ef.Z.Item,{label:"Push Notifications",children:"Yes"}),(null===(p=I.agent_card_params)||void 0===p?void 0:null===(x=p.capabilities)||void 0===x?void 0:x.stateTransitionHistory)&&(0,a.jsx)(ef.Z.Item,{label:"State Transition History",children:"Yes"}),(0,a.jsxs)(ef.Z.Item,{label:"Skills",children:[(null===(g=I.agent_card_params)||void 0===g?void 0:null===(h=g.skills)||void 0===h?void 0:h.length)||0," configured"]}),(null===(v=I.litellm_params)||void 0===v?void 0:v.model)&&(0,a.jsx)(ef.Z.Item,{label:"Model",children:I.litellm_params.model}),(null===(b=I.litellm_params)||void 0===b?void 0:b.make_public)!==void 0&&(0,a.jsx)(ef.Z.Item,{label:"Make Public",children:I.litellm_params.make_public?"Yes":"No"}),(null===(_=I.agent_card_params)||void 0===_?void 0:_.iconUrl)&&(0,a.jsx)(ef.Z.Item,{label:"Icon URL",children:I.agent_card_params.iconUrl}),(null===(N=I.agent_card_params)||void 0===N?void 0:N.documentationUrl)&&(0,a.jsx)(ef.Z.Item,{label:"Documentation URL",children:I.agent_card_params.documentationUrl}),(0,a.jsx)(ef.Z.Item,{label:"Created At",children:X(I.created_at)}),(0,a.jsx)(ef.Z.Item,{label:"Updated At",children:X(I.updated_at)})]}),I.object_permission&&((null===(Z=I.object_permission.mcp_servers)||void 0===Z?void 0:Z.length)||(null===(k=I.object_permission.mcp_access_groups)||void 0===k?void 0:k.length)||I.object_permission.mcp_tool_permissions&&Object.keys(I.object_permission.mcp_tool_permissions).length>0)&&(0,a.jsxs)("div",{style:{marginTop:24},children:[(0,a.jsx)(eh.Z,{children:"MCP Tool Permissions"}),(0,a.jsxs)(ef.Z,{bordered:!0,column:1,style:{marginTop:16},children:[I.object_permission.mcp_servers&&I.object_permission.mcp_servers.length>0&&(0,a.jsx)(ef.Z.Item,{label:"MCP Servers",children:I.object_permission.mcp_servers.join(", ")}),I.object_permission.mcp_access_groups&&I.object_permission.mcp_access_groups.length>0&&(0,a.jsx)(ef.Z.Item,{label:"MCP Access Groups",children:I.object_permission.mcp_access_groups.join(", ")}),I.object_permission.mcp_tool_permissions&&Object.keys(I.object_permission.mcp_tool_permissions).length>0&&(0,a.jsx)(ef.Z.Item,{label:"Tool permissions per server",children:(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(I.object_permission.mcp_tool_permissions).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium",children:[t,":"]})," ",Array.isArray(s)?s.join(", "):String(s)]},t)})})})]})]}),(0,a.jsx)(ev,{agent:I}),(null===(w=I.agent_card_params)||void 0===w?void 0:w.skills)&&I.agent_card_params.skills.length>0&&(0,a.jsxs)("div",{style:{marginTop:24},children:[(0,a.jsx)(eh.Z,{children:"Skills"}),(0,a.jsx)(ef.Z,{bordered:!0,column:1,style:{marginTop:16},children:I.agent_card_params.skills.map((e,t)=>(0,a.jsx)(ef.Z.Item,{label:e.name||"Skill ".concat(t+1),children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Description:"})," ",e.description]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Tags:"})," ",Array.isArray(e.tags)?e.tags.join(", "):e.tags]}),e.examples&&e.examples.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Examples:"})," ",Array.isArray(e.examples)?e.examples.join(", "):e.examples]})]})},t))})]})]}),T&&(0,a.jsx)(eu.Z,{children:(0,a.jsxs)(eo.Z,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(eh.Z,{children:"Agent Settings"}),!E&&(0,a.jsx)(ei.Z,{onClick:()=>z(!0),children:"Edit Settings"})]}),E?(0,a.jsxs)(f.Z,{form:U,layout:"vertical",onFinish:Q,children:[(0,a.jsx)(f.Z.Item,{label:"Agent ID",children:(0,a.jsx)(y.default,{value:I.agent_id,disabled:!0})}),"a2a"===W?(0,a.jsx)(B,{showAgentName:!0}):$?(0,a.jsx)(G,{agentTypeInfo:$}):(0,a.jsx)(B,{showAgentName:!0}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,a.jsx)(A.ZP,{onClick:()=>{z(!1),J()},children:"Cancel"}),(0,a.jsx)(ei.Z,{loading:R,children:"Save Changes"})]})]}):(0,a.jsx)(ep.Z,{children:'Click "Edit Settings" to modify agent configuration.'})]})})]})]})]})},eZ=s(9114),ek=e=>{let{accessToken:t,userRole:s}=e,[l,r]=(0,o.useState)([]),[i,d]=(0,o.useState)({}),[c,m]=(0,o.useState)(!1),[u,g]=(0,o.useState)(!1),[f,j]=(0,o.useState)(!1),[y,v]=(0,o.useState)(null),[b,_]=(0,o.useState)(null),N=!!s&&(0,en.tY)(s),Z=async()=>{if(t){g(!0);try{let e=await (0,n.getAgentsList)(t);r(e.agents||[])}catch(e){console.error("Error fetching agents:",e)}finally{g(!1)}}},k=async()=>{if(t)try{let{keys:e=[]}=await (0,n.keyListCall)(t,null,null,null,null,null,1,500),s={};for(let t of e){let e=t.agent_id;e&&!s[e]&&(s[e]={has_key:!0,key_alias:t.key_alias,token_prefix:t.token?"".concat(t.token.slice(0,8),"…"):void 0})}d(s)}catch(e){console.error("Error fetching keys for agents:",e)}};(0,o.useEffect)(()=>{Z()},[t]),(0,o.useEffect)(()=>{t&&l.length>0?k():0===l.length&&d({})},[t,l.length]);let w=async()=>{if(y&&t){j(!0);try{await (0,n.deleteAgentCall)(t,y.id),eZ.ZP.success('Agent "'.concat(y.name,'" deleted successfully')),Z()}catch(e){console.error("Error deleting agent:",e),eZ.ZP.fromBackend("Failed to delete agent")}finally{j(!1),v(null)}}};return(0,a.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Agents"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"List of A2A-spec agents that are available to be used in your organization. Go to AI Hub, to make agents public."}),(0,a.jsx)(p.Z,{message:"Why do agents need keys?",description:"Keys scope access to an agent and allow it to call MCP tools. Assign a key when creating an agent or from the Virtual Keys page.",type:"info",showIcon:!0,className:"mb-3"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(x.z,{onClick:()=>{b&&_(null),m(!0)},disabled:!t,children:"+ Add New Agent"})})]}),b?(0,a.jsx)(eN,{agentId:b,onClose:()=>_(null),accessToken:t,isAdmin:N}):(0,a.jsx)(er,{agentsList:l,keyInfoMap:i,isLoading:u,onDeleteClick:(e,t)=>{v({id:e,name:t})},accessToken:t,onAgentUpdated:Z,isAdmin:N,onAgentClick:e=>_(e)}),(0,a.jsx)(J,{visible:c,onClose:()=>{m(!1)},accessToken:t,onSuccess:()=>{Z()}}),y&&(0,a.jsxs)(h.Z,{title:"Delete Agent",open:null!==y,onOk:w,onCancel:()=>{v(null)},confirmLoading:f,okText:"Delete",okButtonProps:{danger:!0},children:[(0,a.jsxs)("p",{children:["Are you sure you want to delete agent: ",y.name,"?"]}),(0,a.jsx)("p",{children:"This action cannot be undone."})]})]})},ew=s(54939),eC=s(66600),eS=s(41112),eP=s(39210),eT=s(94987),eI=s(87452),eA=s(88829),eL=s(72208),eM=s(47323),eD=s(49566),eE=s(82422),ez=s(3837),eF=s(53410),eq=s(74998),eR=s(21626),eO=s(97214),eB=s(28241),eU=s(58834),eV=s(69552),eG=s(71876);function eK(e){let{data:t,columns:s,isLoading:l=!1,loadingMessage:r="Loading...",emptyMessage:n="No data",getRowKey:i}=e;return(0,a.jsxs)(eR.Z,{children:[(0,a.jsx)(eU.Z,{children:(0,a.jsx)(eG.Z,{children:s.map((e,t)=>(0,a.jsx)(eV.Z,{style:{width:e.width},children:e.header},t))})}),(0,a.jsx)(eO.Z,{children:l?(0,a.jsx)(eG.Z,{children:(0,a.jsx)(eB.Z,{colSpan:s.length,className:"text-center",children:(0,a.jsx)(ep.Z,{className:"text-gray-500",children:r})})}):t.length>0?t.map((e,t)=>(0,a.jsx)(eG.Z,{children:s.map((t,s)=>{var l;return(0,a.jsx)(eB.Z,{children:t.cell?t.cell(e):String(null!==(l=e[t.accessor])&&void 0!==l?l:"")},s)})},i?i(e,t):t)):(0,a.jsx)(eG.Z,{children:(0,a.jsx)(eB.Z,{colSpan:s.length,className:"text-center",children:(0,a.jsx)(ep.Z,{className:"text-gray-500",children:n})})})})]})}var eH=s(42673);let eW=e=>{let t=Object.keys(eH.fK).find(t=>eH.fK[t]===e);if(t){let e=eH.Cl[t],s=eH.cd[e];return{displayName:e,logo:s,enumKey:t}}return{displayName:e,logo:"",enumKey:null}},eY=e=>eH.fK[e]||null,eJ=(e,t)=>{let s=e.target,a=s.parentElement;if(a){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),a.replaceChild(e,s)}};var e$=e=>{let{discountConfig:t,onDiscountChange:s,onRemoveProvider:l}=e,[r,n]=(0,o.useState)(null),[i,d]=(0,o.useState)(""),c=(e,t)=>{n(e),d((100*t).toString())},m=e=>{let t=parseFloat(i);!isNaN(t)&&t>=0&&t<=100&&s(e,(t/100).toString()),n(null),d("")},u=()=>{n(null),d("")},x=(e,t)=>{"Enter"===e.key?m(t):"Escape"===e.key&&u()},p=Object.entries(t).map(e=>{let[t,s]=e;return{provider:t,discount:s}}).sort((e,t)=>{let s=eW(e.provider).displayName,a=eW(t.provider).displayName;return s.localeCompare(a)});return(0,a.jsx)(eK,{data:p,columns:[{header:"Provider",cell:e=>{let{displayName:t,logo:s}=eW(e.provider);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&(0,a.jsx)("img",{src:s,alt:"".concat(t," logo"),className:"w-5 h-5",onError:e=>eJ(e,t)}),(0,a.jsx)("span",{className:"font-medium",children:t})]})}},{header:"Discount Percentage",cell:e=>(0,a.jsx)("div",{className:"flex items-center gap-2",children:r===e.provider?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eD.Z,{value:i,onValueChange:d,onKeyDown:t=>x(t,e.provider),placeholder:"5",className:"w-20",autoFocus:!0}),(0,a.jsx)("span",{className:"text-gray-600",children:"%"}),(0,a.jsx)(eM.Z,{icon:eE.Z,size:"sm",onClick:()=>m(e.provider),className:"cursor-pointer text-green-600 hover:text-green-700"}),(0,a.jsx)(eM.Z,{icon:ez.Z,size:"sm",onClick:u,className:"cursor-pointer text-gray-600 hover:text-gray-700"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ep.Z,{className:"font-medium",children:[(100*e.discount).toFixed(1),"%"]}),(0,a.jsx)(eM.Z,{icon:eF.Z,size:"sm",onClick:()=>c(e.provider,e.discount),className:"cursor-pointer text-blue-600 hover:text-blue-700"})]})}),width:"250px"},{header:"Actions",cell:e=>{let{displayName:t}=eW(e.provider);return(0,a.jsx)(eM.Z,{icon:eq.Z,size:"sm",onClick:()=>l(e.provider,t),className:"cursor-pointer hover:text-red-600"})},width:"80px"}],getRowKey:e=>e.provider,emptyMessage:"No provider discounts configured"})},eQ=s(64504),eX=e=>{let{discountConfig:t,selectedProvider:s,newDiscount:l,onProviderChange:r,onDiscountChange:n,onAddProvider:i}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Provider",(0,a.jsx)(ee.Z,{title:"Select the LLM provider you want to configure a discount for",children:(0,a.jsx)(Z.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please select a provider"}],children:(0,a.jsx)(v.default,{showSearch:!0,placeholder:"Select provider",value:s,onChange:r,style:{width:"100%"},size:"large",optionFilterProp:"children",filterOption:(e,t)=>{var s;return String(null!==(s=null==t?void 0:t.label)&&void 0!==s?s:"").toLowerCase().includes(e.toLowerCase())},children:Object.entries(eH.Cl).map(e=>{let[s,l]=e,r=eH.fK[s];return r&&t[r]?null:(0,a.jsx)(v.default.Option,{value:s,label:l,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:eH.cd[l],alt:"".concat(s," logo"),className:"w-5 h-5",onError:e=>eJ(e,l)}),(0,a.jsx)("span",{children:l})]})},s)})})}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Discount Percentage",(0,a.jsx)(ee.Z,{title:"Enter a percentage value (e.g., 5 for 5% discount)",children:(0,a.jsx)(Z.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please enter a discount percentage"}],children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eQ.o,{placeholder:"5",value:l,onValueChange:n,className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 flex-1"}),(0,a.jsx)("span",{className:"text-gray-600",children:"%"})]})}),(0,a.jsx)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-100",children:(0,a.jsx)(eQ.z,{variant:"primary",onClick:i,disabled:!s||!l,children:"Add Provider Discount"})})]})},e0=e=>{let{marginConfig:t,onMarginChange:s,onRemoveProvider:l}=e,[r,n]=(0,o.useState)(null),[i,d]=(0,o.useState)(""),[c,m]=(0,o.useState)(""),u=(e,t)=>{n(e),"number"==typeof t?(d((100*t).toString()),m("")):(d(t.percentage?(100*t.percentage).toString():""),m(t.fixed_amount?t.fixed_amount.toString():""))},x=e=>{let t=i?parseFloat(i):void 0,a=c?parseFloat(c):void 0;void 0!==t&&!isNaN(t)&&t>=0&&t<=1e3?void 0!==a&&!isNaN(a)&&a>=0?s(e,{percentage:t/100,fixed_amount:a}):s(e,t/100):void 0!==a&&!isNaN(a)&&a>=0&&s(e,{fixed_amount:a}),n(null),d(""),m("")},p=()=>{n(null),d(""),m("")},h=e=>{if("number"==typeof e)return"".concat((100*e).toFixed(1),"%");let t=[];return void 0!==e.percentage&&t.push("".concat((100*e.percentage).toFixed(1),"%")),void 0!==e.fixed_amount&&t.push("$".concat(e.fixed_amount.toFixed(6))),t.join(" + ")||"0%"},g=Object.entries(t).map(e=>{let[t,s]=e;return{provider:t,margin:s}}).sort((e,t)=>{if("global"===e.provider)return -1;if("global"===t.provider)return 1;let s=eW(e.provider).displayName,a=eW(t.provider).displayName;return s.localeCompare(a)});return(0,a.jsx)(eK,{data:g,columns:[{header:"Provider",cell:e=>{if("global"===e.provider)return(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"font-medium",children:"Global (All Providers)"})});let{displayName:t,logo:s}=eW(e.provider);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&(0,a.jsx)("img",{src:s,alt:"".concat(t," logo"),className:"w-5 h-5",onError:e=>eJ(e,t)}),(0,a.jsx)("span",{className:"font-medium",children:t})]})}},{header:"Margin",cell:e=>(0,a.jsx)("div",{className:"flex items-center gap-2",children:r===e.provider?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eD.Z,{value:i,onValueChange:d,placeholder:"10",className:"w-20",autoFocus:!0}),(0,a.jsx)("span",{className:"text-gray-600",children:"%"}),(0,a.jsx)("span",{className:"text-gray-400",children:"+"}),(0,a.jsx)("span",{className:"text-gray-600",children:"$"}),(0,a.jsx)(eD.Z,{value:c,onValueChange:m,placeholder:"0.001",className:"w-24"})]}),(0,a.jsx)(eM.Z,{icon:eE.Z,size:"sm",onClick:()=>x(e.provider),className:"cursor-pointer text-green-600 hover:text-green-700"}),(0,a.jsx)(eM.Z,{icon:ez.Z,size:"sm",onClick:p,className:"cursor-pointer text-gray-600 hover:text-gray-700"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ep.Z,{className:"font-medium",children:h(e.margin)}),(0,a.jsx)(eM.Z,{icon:eF.Z,size:"sm",onClick:()=>u(e.provider,e.margin),className:"cursor-pointer text-blue-600 hover:text-blue-700"})]})}),width:"350px"},{header:"Actions",cell:e=>{let t="global"===e.provider?"Global":eW(e.provider).displayName;return(0,a.jsx)(eM.Z,{icon:eq.Z,size:"sm",onClick:()=>l(e.provider,t),className:"cursor-pointer hover:text-red-600"})},width:"80px"}],getRowKey:e=>e.provider,emptyMessage:"No provider margins configured"})},e1=e=>{let{marginConfig:t,selectedProvider:s,marginType:l,percentageValue:r,fixedAmountValue:n,onProviderChange:i,onMarginTypeChange:o,onPercentageChange:d,onFixedAmountChange:c,onAddProvider:m}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Provider",(0,a.jsx)(ee.Z,{title:"Select 'Global' to apply margin to all providers, or select a specific provider",children:(0,a.jsx)(Z.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please select a provider"}],children:(0,a.jsxs)(v.default,{showSearch:!0,placeholder:"Select provider or 'Global'",value:s,onChange:i,style:{width:"100%"},size:"large",optionFilterProp:"children",filterOption:(e,t)=>{var s;return String(null!==(s=null==t?void 0:t.label)&&void 0!==s?s:"").toLowerCase().includes(e.toLowerCase())},children:[(0,a.jsx)(v.default.Option,{value:"global",label:"Global (All Providers)",children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"font-medium",children:"Global (All Providers)"})})},"global"),Object.entries(eH.Cl).map(e=>{let[s,l]=e,r=eH.fK[s];return r&&t[r]?null:(0,a.jsx)(v.default.Option,{value:s,label:l,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:eH.cd[l],alt:"".concat(s," logo"),className:"w-5 h-5",onError:e=>eJ(e,l)}),(0,a.jsx)("span",{children:l})]})},s)})]})}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Margin Type",(0,a.jsx)(ee.Z,{title:"Choose how to apply the margin: percentage-based or fixed amount",children:(0,a.jsx)(Z.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please select a margin type"}],children:(0,a.jsxs)(N.ZP.Group,{value:l,onChange:e=>o(e.target.value),className:"w-full",children:[(0,a.jsx)(N.ZP,{value:"percentage",children:"Percentage-based"}),(0,a.jsx)(N.ZP,{value:"fixed",children:"Fixed Amount"})]})}),"percentage"===l&&(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Margin Percentage",(0,a.jsx)(ee.Z,{title:"Enter a percentage value (e.g., 10 for 10% margin)",children:(0,a.jsx)(Z.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please enter a margin percentage"},{validator:(e,t)=>{if(!t)return Promise.reject(Error("Please enter a margin percentage"));let s=parseFloat(t);return isNaN(s)||s<0||s>1e3?Promise.reject(Error("Percentage must be between 0 and 1000")):Promise.resolve()}}],children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eQ.o,{placeholder:"10",value:r,onValueChange:d,className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 flex-1"}),(0,a.jsx)("span",{className:"text-gray-600",children:"%"})]})}),"fixed"===l&&(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Fixed Margin Amount",(0,a.jsx)(ee.Z,{title:"Enter a fixed amount in USD (e.g., 0.001 for $0.001 per request)",children:(0,a.jsx)(Z.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please enter a fixed amount"},{validator:(e,t)=>{if(!t)return Promise.reject(Error("Please enter a fixed amount"));let s=parseFloat(t);return isNaN(s)||s<0?Promise.reject(Error("Fixed amount must be non-negative")):Promise.resolve()}}],children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"$"}),(0,a.jsx)(eQ.o,{placeholder:"0.001",value:n,onValueChange:c,className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 flex-1"})]})}),(0,a.jsx)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-100",children:(0,a.jsx)(eQ.z,{variant:"primary",onClick:m,disabled:!s||"percentage"===l&&!r||"fixed"===l&&!n,children:"Add Provider Margin"})})]})},e2=s(12221),e4=s(56609),e5=s(19431),e6=s(47451),e3=s(69410),e8=s(45235),e9=s(61935),e7=s(70464),te=s(77565),tt=s(59872),ts=s(73879),ta=s(50010),tl=s(60216);let tr=e=>null==e?"-":0===e?"$0.00":e<.01?"$".concat(e.toFixed(6)):e<1?"$".concat(e.toFixed(4)):"$".concat((0,tt.pw)(e,2)),tn=e=>null==e?"-":(0,tt.pw)(e,0),ti=e=>'\n    <div class="model-section">\n      <h3>'.concat(e.model," ").concat(e.provider?'<span class="provider">('.concat(e.provider,")</span>"):"",'</h3>\n      \n      <div class="meta">\n        <p><strong>Input Tokens per Request:</strong> ').concat(tn(e.input_tokens),"</p>\n        <p><strong>Output Tokens per Request:</strong> ").concat(tn(e.output_tokens),"</p>\n        ").concat(e.num_requests_per_day?"<p><strong>Requests per Day:</strong> ".concat(tn(e.num_requests_per_day),"</p>"):"","\n        ").concat(e.num_requests_per_month?"<p><strong>Requests per Month:</strong> ".concat(tn(e.num_requests_per_month),"</p>"):"","\n      </div>\n\n      <table>\n        <tr>\n          <th>Cost Type</th>\n          <th>Per Request</th>\n          ").concat(null!==e.daily_cost?"<th>Daily</th>":"","\n          ").concat(null!==e.monthly_cost?"<th>Monthly</th>":"",'\n        </tr>\n        <tr>\n          <td>Input Cost</td>\n          <td class="cost-value">').concat(tr(e.input_cost_per_request),"</td>\n          ").concat(null!==e.daily_cost?'<td class="cost-value">'.concat(tr(e.daily_input_cost),"</td>"):"","\n          ").concat(null!==e.monthly_cost?'<td class="cost-value">'.concat(tr(e.monthly_input_cost),"</td>"):"",'\n        </tr>\n        <tr>\n          <td>Output Cost</td>\n          <td class="cost-value">').concat(tr(e.output_cost_per_request),"</td>\n          ").concat(null!==e.daily_cost?'<td class="cost-value">'.concat(tr(e.daily_output_cost),"</td>"):"","\n          ").concat(null!==e.monthly_cost?'<td class="cost-value">'.concat(tr(e.monthly_output_cost),"</td>"):"",'\n        </tr>\n        <tr>\n          <td>Margin/Fee</td>\n          <td class="cost-value">').concat(tr(e.margin_cost_per_request),"</td>\n          ").concat(null!==e.daily_cost?'<td class="cost-value">'.concat(tr(e.daily_margin_cost),"</td>"):"","\n          ").concat(null!==e.monthly_cost?'<td class="cost-value">'.concat(tr(e.monthly_margin_cost),"</td>"):"",'\n        </tr>\n        <tr class="total-row">\n          <td>Total</td>\n          <td class="cost-value">').concat(tr(e.cost_per_request),"</td>\n          ").concat(null!==e.daily_cost?'<td class="cost-value">'.concat(tr(e.daily_cost),"</td>"):"","\n          ").concat(null!==e.monthly_cost?'<td class="cost-value">'.concat(tr(e.monthly_cost),"</td>"):"","\n        </tr>\n      </table>\n    </div>\n  "),to=e=>{let t=window.open("","_blank");if(!t){alert("Please allow popups to export PDF");return}let s=e.entries.filter(e=>null!==e.result),a=s.length,l="\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>Multi-Model Cost Estimate Report</title>\n      <style>\n        body {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n          padding: 40px;\n          max-width: 900px;\n          margin: 0 auto;\n          color: #333;\n        }\n        h1 {\n          color: #1a1a1a;\n          border-bottom: 2px solid #1890ff;\n          padding-bottom: 10px;\n          margin-bottom: 30px;\n        }\n        h2 {\n          color: #444;\n          margin-top: 30px;\n          margin-bottom: 15px;\n        }\n        h3 {\n          color: #555;\n          margin-top: 25px;\n          margin-bottom: 10px;\n          padding-bottom: 5px;\n          border-bottom: 1px solid #eee;\n        }\n        .provider {\n          font-weight: normal;\n          color: #1890ff;\n          font-size: 14px;\n        }\n        .meta {\n          background: #f5f5f5;\n          padding: 12px 15px;\n          border-radius: 8px;\n          margin-bottom: 15px;\n          font-size: 13px;\n        }\n        .meta p {\n          margin: 4px 0;\n        }\n        table {\n          width: 100%;\n          border-collapse: collapse;\n          margin-bottom: 20px;\n        }\n        th, td {\n          padding: 10px 12px;\n          text-align: left;\n          border-bottom: 1px solid #ddd;\n        }\n        th {\n          background: #f8f9fa;\n          font-weight: 600;\n          font-size: 13px;\n        }\n        .cost-value {\n          font-family: monospace;\n          font-size: 13px;\n        }\n        .total-row {\n          font-weight: bold;\n          background: #e6f7ff;\n        }\n        .summary-box {\n          background: linear-gradient(135deg, #e6f7ff 0%, #f9f0ff 100%);\n          border: 1px solid #91d5ff;\n          border-radius: 8px;\n          padding: 20px;\n          margin-bottom: 30px;\n        }\n        .summary-box h2 {\n          margin-top: 0;\n          color: #1890ff;\n        }\n        .summary-grid {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 20px;\n          margin-top: 15px;\n        }\n        .summary-item {\n          text-align: center;\n        }\n        .summary-item .label {\n          font-size: 12px;\n          color: #666;\n          margin-bottom: 5px;\n        }\n        .summary-item .value {\n          font-size: 20px;\n          font-weight: bold;\n          font-family: monospace;\n        }\n        .summary-item .value.blue { color: #1890ff; }\n        .summary-item .value.green { color: #52c41a; }\n        .summary-item .value.purple { color: #722ed1; }\n        .model-section {\n          margin-bottom: 30px;\n          page-break-inside: avoid;\n        }\n        .footer {\n          margin-top: 40px;\n          padding-top: 20px;\n          border-top: 1px solid #ddd;\n          font-size: 12px;\n          color: #666;\n        }\n        @media print {\n          body { padding: 20px; }\n          .model-section { page-break-inside: avoid; }\n        }\n      </style>\n    </head>\n    <body>\n      <h1>LLM Cost Estimate Report</h1>\n      <p style=\"color: #666; margin-top: -20px; margin-bottom: 30px;\">".concat(a," model").concat(1!==a?"s":"",' configured</p>\n      \n      <div class="summary-box">\n        <h2>Combined Totals</h2>\n        <div class="summary-grid">\n          <div class="summary-item">\n            <div class="label">Total Per Request</div>\n            <div class="value blue">').concat(tr(e.totals.cost_per_request),'</div>\n          </div>\n          <div class="summary-item">\n            <div class="label">Total Daily</div>\n            <div class="value green">').concat(tr(e.totals.daily_cost),'</div>\n          </div>\n          <div class="summary-item">\n            <div class="label">Total Monthly</div>\n            <div class="value purple">').concat(tr(e.totals.monthly_cost),"</div>\n          </div>\n        </div>\n        ").concat(e.totals.margin_per_request>0?'\n        <div class="summary-grid" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd;">\n          <div class="summary-item">\n            <div class="label">Margin/Request</div>\n            <div class="value" style="color: #faad14;">'.concat(tr(e.totals.margin_per_request),'</div>\n          </div>\n          <div class="summary-item">\n            <div class="label">Daily Margin</div>\n            <div class="value" style="color: #faad14;">').concat(tr(e.totals.daily_margin),'</div>\n          </div>\n          <div class="summary-item">\n            <div class="label">Monthly Margin</div>\n            <div class="value" style="color: #faad14;">').concat(tr(e.totals.monthly_margin),"</div>\n          </div>\n        </div>\n        "):"","\n      </div>\n\n      <h2>Model Breakdown</h2>\n      ").concat(s.map(e=>ti(e.result)).join(""),'\n\n      <div class="footer">\n        <p>Generated by LiteLLM Pricing Calculator on ').concat(new Date().toLocaleString(),"</p>\n      </div>\n    </body>\n    </html>\n  ");t.document.write(l),t.document.close(),t.onload=()=>{t.print()}},td=e=>{var t,s,a,l,r,n,i,o;let d=e.entries.filter(e=>null!==e.result),c=[["LLM Multi-Model Cost Estimate Report"],["Generated",new Date().toLocaleString()],[""]];for(let m of(c.push(["COMBINED TOTALS"],["Total Per Request",e.totals.cost_per_request.toString()],["Total Daily",(null===(t=e.totals.daily_cost)||void 0===t?void 0:t.toString())||"-"],["Total Monthly",(null===(s=e.totals.monthly_cost)||void 0===s?void 0:s.toString())||"-"],["Margin Per Request",e.totals.margin_per_request.toString()],["Daily Margin",(null===(a=e.totals.daily_margin)||void 0===a?void 0:a.toString())||"-"],["Monthly Margin",(null===(l=e.totals.monthly_margin)||void 0===l?void 0:l.toString())||"-"],[""]),c.push(["Model","Provider","Input Tokens","Output Tokens","Requests/Day","Requests/Month","Cost/Request","Daily Cost","Monthly Cost","Input Cost/Req","Output Cost/Req","Margin/Req"]),d)){let e=m.result;c.push([e.model,e.provider||"-",e.input_tokens.toString(),e.output_tokens.toString(),(null===(r=e.num_requests_per_day)||void 0===r?void 0:r.toString())||"-",(null===(n=e.num_requests_per_month)||void 0===n?void 0:n.toString())||"-",e.cost_per_request.toString(),(null===(i=e.daily_cost)||void 0===i?void 0:i.toString())||"-",(null===(o=e.monthly_cost)||void 0===o?void 0:o.toString())||"-",e.input_cost_per_request.toString(),e.output_cost_per_request.toString(),e.margin_cost_per_request.toString()])}let m=new Blob([c.map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),u=window.URL.createObjectURL(m),x=document.createElement("a");x.href=u,x.download="cost_estimate_multi_model_".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(u)};var tc=e=>{let{multiResult:t}=e,[s,l]=(0,o.useState)(!1),r=(0,o.useRef)(null),n=t.entries.some(e=>null!==e.result);return((0,o.useEffect)(()=>{let e=e=>{r.current&&!r.current.contains(e.target)&&l(!1)};return s&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]),n)?(0,a.jsxs)("div",{className:"relative inline-block",ref:r,children:[(0,a.jsx)(x.z,{size:"xs",variant:"secondary",icon:ts.Z,onClick:()=>l(!s),children:"Export"}),s&&(0,a.jsxs)("div",{className:"absolute right-0 mt-1 w-44 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[(0,a.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>{to(t),l(!1)},children:[(0,a.jsx)(ta.Z,{className:"mr-3 text-red-500"}),"Export as PDF"]}),(0,a.jsxs)("button",{className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>{td(t),l(!1)},children:[(0,a.jsx)(tl.Z,{className:"mr-3 text-green-600"}),"Export as CSV"]})]})]}):null};let tm=e=>null==e?"-":0===e?"$0":e<1e-4?"$".concat(e.toExponential(2)):e<1?"$".concat(e.toFixed(4)):"$".concat((0,tt.pw)(e,2,!0)),tu=e=>null==e?"-":(0,tt.pw)(e,0,!0),tx=e=>{let{result:t,loading:s,timePeriod:l}=e,r="day"===l?"Daily":"Monthly",n="day"===l?t.daily_cost:t.monthly_cost,i="day"===l?t.daily_input_cost:t.monthly_input_cost,o="day"===l?t.daily_output_cost:t.monthly_output_cost,d="day"===l?t.daily_margin_cost:t.monthly_margin_cost,c="day"===l?t.num_requests_per_day:t.num_requests_per_month;return(0,a.jsxs)("div",{className:"space-y-3 bg-gray-50 p-4 rounded-lg",children:[s&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[(0,a.jsx)(eg.Z,{indicator:(0,a.jsx)(e9.Z,{spin:!0}),size:"small"}),(0,a.jsx)("span",{children:"Updating..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(e5.x,{className:"text-xs text-gray-500 block",children:"Total/Request"}),(0,a.jsx)(e5.x,{className:"text-base font-semibold text-blue-600",children:tm(t.cost_per_request)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(e5.x,{className:"text-xs text-gray-500 block",children:"Input Cost"}),(0,a.jsx)(e5.x,{className:"text-sm",children:tm(t.input_cost_per_request)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(e5.x,{className:"text-xs text-gray-500 block",children:"Output Cost"}),(0,a.jsx)(e5.x,{className:"text-sm",children:tm(t.output_cost_per_request)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(e5.x,{className:"text-xs text-gray-500 block",children:"Margin Fee"}),(0,a.jsx)(e5.x,{className:"text-sm ".concat(t.margin_cost_per_request>0?"text-amber-600":""),children:tm(t.margin_cost_per_request)})]})]}),null!==n&&(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 pt-2 border-t border-gray-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(e5.x,{className:"text-xs text-gray-500 block",children:[r," Total (",tu(c)," req)"]}),(0,a.jsx)(e5.x,{className:"text-base font-semibold ".concat("day"===l?"text-green-600":"text-purple-600"),children:tm(n)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(e5.x,{className:"text-xs text-gray-500 block",children:[r," Input"]}),(0,a.jsx)(e5.x,{className:"text-sm",children:tm(i)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(e5.x,{className:"text-xs text-gray-500 block",children:[r," Output"]}),(0,a.jsx)(e5.x,{className:"text-sm",children:tm(o)})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(e5.x,{className:"text-xs text-gray-500 block",children:[r," Margin Fee"]}),(0,a.jsx)(e5.x,{className:"text-sm ".concat((null!=d?d:0)>0?"text-amber-600":""),children:tm(d)})]})]}),(t.input_cost_per_token||t.output_cost_per_token)&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 pt-2 border-t border-gray-200",children:["Token Pricing: "," ",t.input_cost_per_token&&(0,a.jsxs)("span",{children:["Input $",(0,tt.pw)(1e6*t.input_cost_per_token,2),"/1M"]}),t.input_cost_per_token&&t.output_cost_per_token&&" | ",t.output_cost_per_token&&(0,a.jsxs)("span",{children:["Output $",(0,tt.pw)(1e6*t.output_cost_per_token,2),"/1M"]})]})]})};var tp=e=>{let{multiResult:t,timePeriod:s}=e,[l,r]=(0,o.useState)(new Set),n=t.entries.filter(e=>null!==e.result),i=t.entries.filter(e=>e.loading),d=t.entries.filter(e=>null!==e.error),c=n.length>0,m=i.length>0,u=d.length>0;if(!c&&!m&&!u)return(0,a.jsx)("div",{className:"py-6 text-center border border-dashed border-gray-300 rounded-lg bg-gray-50",children:(0,a.jsx)(e5.x,{className:"text-gray-500",children:"Select models above to see cost estimates"})});if(!c&&m&&!u)return(0,a.jsxs)("div",{className:"py-6 text-center",children:[(0,a.jsx)(eg.Z,{indicator:(0,a.jsx)(e9.Z,{spin:!0})}),(0,a.jsx)(e5.x,{className:"text-gray-500 block mt-2",children:"Calculating costs..."})]});if(!c&&u)return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(b.Z,{className:"my-4"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(e5.x,{className:"text-base font-semibold text-gray-900",children:"Cost Estimates"}),m&&(0,a.jsx)(eg.Z,{indicator:(0,a.jsx)(e9.Z,{spin:!0}),size:"small"})]}),d.map(e=>(0,a.jsxs)("div",{className:"text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-200",children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.entry.model||"Unknown model",": "]}),e.error]},e.entry.id))]});let x=e=>{r(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},p=t.totals.margin_per_request>0,h="day"===s?"Daily":"Monthly",g=[{title:"Model",dataIndex:"model",key:"model",render:(e,t)=>(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e}),t.provider&&(0,a.jsx)(_.Z,{color:"blue",className:"text-xs",children:t.provider}),t.loading&&(0,a.jsx)(eg.Z,{indicator:(0,a.jsx)(e9.Z,{spin:!0}),size:"small"})]}),t.error&&(0,a.jsxs)("div",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded",children:["⚠️ ",t.error]}),t.hasZeroCost&&!t.error&&(0,a.jsx)("div",{className:"text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded",children:"⚠️ No pricing data found for this model. Set base_model in config."})]})},{title:"Per Request",dataIndex:"cost_per_request",key:"cost_per_request",align:"right",render:(e,t)=>t.error?(0,a.jsx)("span",{className:"text-gray-400",children:"-"}):(0,a.jsx)("span",{className:"font-mono text-sm",children:tm(e)})},{title:"Margin Fee",dataIndex:"margin_cost_per_request",key:"margin_cost_per_request",align:"right",render:(e,t)=>t.error?(0,a.jsx)("span",{className:"text-gray-400",children:"-"}):(0,a.jsx)("span",{className:"font-mono text-sm ".concat((null!=e?e:0)>0?"text-amber-600":"text-gray-400"),children:tm(e)})},{title:h,dataIndex:"day"===s?"daily_cost":"monthly_cost",key:"period_cost",align:"right",render:(e,t)=>t.error?(0,a.jsx)("span",{className:"text-gray-400",children:"-"}):(0,a.jsx)("span",{className:"font-mono text-sm",children:tm(e)})},{title:"",key:"expand",width:40,render:(e,t)=>t.error?null:(0,a.jsx)(e5.z,{size:"xs",variant:"light",onClick:()=>x(t.id),className:"text-gray-400 hover:text-gray-600",children:l.has(t.id)?(0,a.jsx)(e7.Z,{}):(0,a.jsx)(te.Z,{})})}],f=t.entries.filter(e=>e.entry.model).map(e=>{var t,s,a,l,r,n,i,o,d,c;return{key:e.entry.id,id:e.entry.id,model:(null===(t=e.result)||void 0===t?void 0:t.model)||e.entry.model,provider:null===(s=e.result)||void 0===s?void 0:s.provider,cost_per_request:null!==(i=null===(a=e.result)||void 0===a?void 0:a.cost_per_request)&&void 0!==i?i:null,margin_cost_per_request:null!==(o=null===(l=e.result)||void 0===l?void 0:l.margin_cost_per_request)&&void 0!==o?o:null,daily_cost:null!==(d=null===(r=e.result)||void 0===r?void 0:r.daily_cost)&&void 0!==d?d:null,monthly_cost:null!==(c=null===(n=e.result)||void 0===n?void 0:n.monthly_cost)&&void 0!==c?c:null,error:e.error,loading:e.loading,hasZeroCost:e.result&&0===e.result.cost_per_request}});return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(b.Z,{className:"my-4"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(e5.x,{className:"text-base font-semibold text-gray-900",children:"Cost Estimates"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[m&&(0,a.jsx)(eg.Z,{indicator:(0,a.jsx)(e9.Z,{spin:!0}),size:"small"}),(0,a.jsx)(tc,{multiResult:t})]})]}),(0,a.jsxs)(X.Z,{size:"small",className:"bg-gradient-to-r from-slate-50 to-blue-50 border-slate-200",children:[(0,a.jsxs)(e6.Z,{gutter:[16,8],children:[(0,a.jsx)(e3.Z,{xs:24,sm:12,children:(0,a.jsx)(e8.Z,{title:(0,a.jsx)("span",{className:"text-xs",children:"Total Per Request"}),value:tm(t.totals.cost_per_request),valueStyle:{color:"#1890ff",fontSize:"18px",fontFamily:"monospace"}})}),(0,a.jsx)(e3.Z,{xs:24,sm:12,children:(0,a.jsx)(e8.Z,{title:(0,a.jsxs)("span",{className:"text-xs",children:["Total ",h]}),value:tm("day"===s?t.totals.daily_cost:t.totals.monthly_cost),valueStyle:{color:"day"===s?"#52c41a":"#722ed1",fontSize:"18px",fontFamily:"monospace"}})})]}),p&&(0,a.jsxs)(e6.Z,{gutter:[16,8],className:"mt-3 pt-3 border-t border-slate-200",children:[(0,a.jsxs)(e3.Z,{xs:24,sm:12,children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Margin Fee/Request"}),(0,a.jsx)("div",{className:"text-sm font-mono text-amber-600",children:tm(t.totals.margin_per_request)})]}),(0,a.jsxs)(e3.Z,{xs:24,sm:12,children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[h," Margin Fee"]}),(0,a.jsx)("div",{className:"text-sm font-mono text-amber-600",children:tm("day"===s?t.totals.daily_margin:t.totals.monthly_margin)})]})]})]}),f.length>0&&(0,a.jsx)(e4.Z,{columns:g,dataSource:f,pagination:!1,size:"small",className:"border border-gray-200 rounded-lg",expandable:{expandedRowKeys:Array.from(l),expandedRowRender:e=>{let t=n.find(t=>t.entry.id===e.id);return(null==t?void 0:t.result)?(0,a.jsx)("div",{className:"py-2",children:(0,a.jsx)(tx,{result:t.result,loading:t.loading,timePeriod:s})}):null},showExpandColumn:!1}})]})};let th=()=>"entry-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),tg=()=>({id:th(),model:"",input_tokens:1e3,output_tokens:500,num_requests_per_day:void 0,num_requests_per_month:void 0});var tf=e=>{let{accessToken:t,models:s}=e,[l,r]=(0,o.useState)([tg()]),[i,d]=(0,o.useState)("month"),{debouncedFetchForEntry:c,removeEntry:m,getMultiModelResult:u}=function(e){let[t,s]=(0,o.useState)(new Map),a=(0,o.useRef)(new Map),l=(0,o.useCallback)(async t=>{if(!e||!t.model){s(e=>{let s=new Map(e);return s.set(t.id,{entry:t,result:null,loading:!1,error:null}),s});return}s(e=>{var s;let a=new Map(e),l=a.get(t.id);return a.set(t.id,{entry:t,result:null!==(s=null==l?void 0:l.result)&&void 0!==s?s:null,loading:!0,error:null}),a});try{let l=(0,n.getProxyBaseUrl)(),r={model:t.model,input_tokens:t.input_tokens||0,output_tokens:t.output_tokens||0,num_requests_per_day:t.num_requests_per_day||null,num_requests_per_month:t.num_requests_per_month||null},i=await fetch(l?"".concat(l,"/cost/estimate"):"/cost/estimate",{method:"POST",headers:{[(0,n.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(r)});if(i.ok){let e=await i.json();s(s=>{let a=new Map(s);return a.set(t.id,{entry:t,result:e,loading:!1,error:null}),a})}else{var a;let e=await i.json(),l=(null===(a=e.detail)||void 0===a?void 0:a.error)||e.detail||"Failed to estimate cost";s(e=>{let s=new Map(e);return s.set(t.id,{entry:t,result:null,loading:!1,error:l}),s})}}catch(e){console.error("Error estimating cost:",e),s(e=>{let s=new Map(e);return s.set(t.id,{entry:t,result:null,loading:!1,error:"Network error"}),s})}},[e]),r=(0,o.useCallback)(e=>{let t=a.current.get(e.id);t&&clearTimeout(t);let s=setTimeout(()=>{l(e)},500);a.current.set(e.id,s)},[l]),i=(0,o.useCallback)(e=>{let t=a.current.get(e);t&&(clearTimeout(t),a.current.delete(e)),s(t=>{let s=new Map(t);return s.delete(e),s})},[]);return(0,o.useEffect)(()=>{let e=a.current;return()=>{e.forEach(e=>clearTimeout(e)),e.clear()}},[]),{debouncedFetchForEntry:r,removeEntry:i,getMultiModelResult:(0,o.useCallback)(e=>{let s=e.map(e=>{var s,a,l;let r=t.get(e.id);return{entry:e,result:null!==(s=null==r?void 0:r.result)&&void 0!==s?s:null,loading:null!==(a=null==r?void 0:r.loading)&&void 0!==a&&a,error:null!==(l=null==r?void 0:r.error)&&void 0!==l?l:null}}),a=0,l=null,r=null,n=0,i=null,o=null;for(let e of s)e.result&&(a+=e.result.cost_per_request,n+=e.result.margin_cost_per_request,null!==e.result.daily_cost&&(l=(null!=l?l:0)+e.result.daily_cost),null!==e.result.daily_margin_cost&&(i=(null!=i?i:0)+e.result.daily_margin_cost),null!==e.result.monthly_cost&&(r=(null!=r?r:0)+e.result.monthly_cost),null!==e.result.monthly_margin_cost&&(o=(null!=o?o:0)+e.result.monthly_margin_cost));return{entries:s,totals:{cost_per_request:a,daily_cost:l,monthly_cost:r,margin_per_request:n,daily_margin:i,monthly_margin:o}}},[t])}}(t),x=(0,o.useCallback)((e,t,s)=>{r(a=>{let l=a.map(a=>a.id===e?{...a,[t]:s}:a),r=l.find(t=>t.id===e);return r&&r.model&&c(r),l})},[c]),p=(0,o.useCallback)(e=>{d(e),r(t=>t.map(t=>({...t,num_requests_per_day:"day"===e?t.num_requests_per_day:void 0,num_requests_per_month:"month"===e?t.num_requests_per_month:void 0})))},[]),h=(0,o.useCallback)(()=>{r(e=>[...e,tg()])},[]),g=(0,o.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e)),m(e)},[m]),f=u(l),j=[{title:"Model",dataIndex:"model",key:"model",width:"35%",render:(e,t)=>(0,a.jsx)(v.default,{showSearch:!0,placeholder:"Select a model",value:t.model||void 0,onChange:e=>x(t.id,"model",e),optionFilterProp:"label",filterOption:(e,t)=>{var s;return String(null!==(s=null==t?void 0:t.label)&&void 0!==s?s:"").toLowerCase().includes(e.toLowerCase())},options:s.map(e=>({value:e,label:e})),style:{width:"100%"},size:"small"})},{title:"Input Tokens",dataIndex:"input_tokens",key:"input_tokens",width:"18%",render:(e,t)=>(0,a.jsx)(e2.Z,{min:0,value:t.input_tokens,onChange:e=>x(t.id,"input_tokens",null!=e?e:0),style:{width:"100%"},size:"small",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")})},{title:"Output Tokens",dataIndex:"output_tokens",key:"output_tokens",width:"18%",render:(e,t)=>(0,a.jsx)(e2.Z,{min:0,value:t.output_tokens,onChange:e=>x(t.id,"output_tokens",null!=e?e:0),style:{width:"100%"},size:"small",formatter:e=>"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")})},{title:"Requests/".concat("day"===i?"Day":"Month"),dataIndex:"day"===i?"num_requests_per_day":"num_requests_per_month",key:"num_requests",width:"20%",render:(e,t)=>(0,a.jsx)(e2.Z,{min:0,value:"day"===i?t.num_requests_per_day:t.num_requests_per_month,onChange:e=>x(t.id,"day"===i?"num_requests_per_day":"num_requests_per_month",null!=e?e:void 0),style:{width:"100%"},size:"small",placeholder:"-",formatter:e=>e?"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","):""})},{title:"",key:"actions",width:50,render:(e,t)=>(0,a.jsx)(A.ZP,{type:"text",icon:(0,a.jsx)(es.Z,{}),onClick:()=>g(t.id),disabled:1===l.length,danger:!0,size:"small"})}];return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-end mb-2",children:(0,a.jsxs)(N.ZP.Group,{value:i,onChange:e=>p(e.target.value),size:"small",optionType:"button",buttonStyle:"solid",children:[(0,a.jsx)(N.ZP.Button,{value:"day",children:"Per Day"}),(0,a.jsx)(N.ZP.Button,{value:"month",children:"Per Month"})]})}),(0,a.jsx)(e4.Z,{columns:j,dataSource:l,rowKey:"id",pagination:!1,size:"small",footer:()=>(0,a.jsx)(A.ZP,{type:"dashed",onClick:h,icon:(0,a.jsx)(M.Z,{}),className:"w-full",children:"Add Another Model"})}),(0,a.jsx)(tp,{multiResult:f,timePeriod:i})]})},tj=s(29271),ty=s(40875),tv=s(96362);let tb=e=>{let{items:t,children:s="Docs",className:l=""}=e,[r,n]=(0,o.useState)(!1),i=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let e=e=>{i.current&&!i.current.contains(e.target)&&n(!1)};return r&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r]),(0,a.jsxs)("div",{className:"relative inline-block ".concat(l),ref:i,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>n(!r),className:"inline-flex items-center gap-1 text-gray-500 hover:text-gray-700 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 rounded px-2 py-1","aria-expanded":r,"aria-haspopup":"true",children:[(0,a.jsx)("span",{children:s}),(0,a.jsx)(ty.Z,{className:"h-3 w-3 transition-transform ".concat(r?"rotate-180":""),"aria-hidden":"true"})]}),r&&(0,a.jsx)("div",{className:"absolute right-0 mt-1 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:t.map((e,t)=>(0,a.jsxs)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>n(!1),children:[(0,a.jsx)("span",{children:e.label}),(0,a.jsx)(tv.Z,{className:"h-3.5 w-3.5 text-gray-400 flex-shrink-0 ml-2","aria-hidden":"true"})]},t))})]})};var t_=s(56522),tN=s(25653),tZ=()=>{let[e,t]=(0,o.useState)(""),[s,l]=(0,o.useState)(""),r=(0,o.useMemo)(()=>{let t=parseFloat(e),a=parseFloat(s);if(isNaN(t)||isNaN(a)||0===t||0===a)return null;let l=t+a;return{originalCost:l.toFixed(10),finalCost:t.toFixed(10),discountAmount:a.toFixed(10),discountPercentage:(a/l*100).toFixed(2)}},[e,s]);return(0,a.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(t_.x,{className:"font-medium text-gray-900 text-sm mb-1",children:"Cost Calculation"}),(0,a.jsxs)(t_.x,{className:"text-xs text-gray-600",children:["Discounts are applied to provider costs: ",(0,a.jsx)("code",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-xs",children:"final_cost = base_cost \xd7 (1 - discount%/100)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(t_.x,{className:"font-medium text-gray-900 text-sm mb-1",children:"Example"}),(0,a.jsx)(t_.x,{className:"text-xs text-gray-600",children:"A 5% discount on a $10.00 request results in: $10.00 \xd7 (1 - 0.05) = $9.50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(t_.x,{className:"font-medium text-gray-900 text-sm mb-1",children:"Valid Range"}),(0,a.jsx)(t_.x,{className:"text-xs text-gray-600",children:"Discount percentages must be between 0% and 100%"})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)(t_.x,{className:"font-medium text-gray-900 text-sm mb-2",children:"Validating Discounts"}),(0,a.jsx)(t_.x,{className:"text-xs text-gray-600 mb-3",children:"Make a test request and check the response headers to verify discounts are applied:"}),(0,a.jsx)(tN.Z,{language:"bash",code:'curl -X POST -i http://your-proxy:4000/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "gemini/gemini-2.5-pro",\n    "messages": [{"role": "user", "content": "Hello"}]\n  }\''}),(0,a.jsx)(t_.x,{className:"text-xs text-gray-600 mt-3 mb-2",children:"Look for these headers in the response:"}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono text-gray-800 whitespace-nowrap",children:"x-litellm-response-cost"}),(0,a.jsx)(t_.x,{className:"text-xs text-gray-600",children:"Final cost after discount"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono text-gray-800 whitespace-nowrap",children:"x-litellm-response-cost-original"}),(0,a.jsx)(t_.x,{className:"text-xs text-gray-600",children:"Original cost before discount"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono text-gray-800 whitespace-nowrap",children:"x-litellm-response-cost-discount-amount"}),(0,a.jsx)(t_.x,{className:"text-xs text-gray-600",children:"Amount discounted"})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)(t_.x,{className:"font-medium text-gray-900 text-sm mb-3",children:"Discount Calculator"}),(0,a.jsx)(t_.x,{className:"text-xs text-gray-600 mb-3",children:"Enter values from your response headers to verify the discount:"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Response Cost (x-litellm-response-cost)"}),(0,a.jsx)(t_.o,{placeholder:"0.0171938125",value:e,onValueChange:t,className:"text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Amount (x-litellm-response-cost-discount-amount)"}),(0,a.jsx)(t_.o,{placeholder:"0.0009049375",value:s,onValueChange:l,className:"text-sm"})]})]}),r&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)(t_.x,{className:"text-sm font-medium text-blue-900 mb-2",children:"Calculated Results"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(t_.x,{className:"text-xs text-blue-800",children:"Original Cost:"}),(0,a.jsxs)("code",{className:"text-xs font-mono text-blue-900",children:["$",r.originalCost]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(t_.x,{className:"text-xs text-blue-800",children:"Final Cost:"}),(0,a.jsxs)("code",{className:"text-xs font-mono text-blue-900",children:["$",r.finalCost]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(t_.x,{className:"text-xs text-blue-800",children:"Discount Amount:"}),(0,a.jsxs)("code",{className:"text-xs font-mono text-blue-900",children:["$",r.discountAmount]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-blue-300",children:[(0,a.jsx)(t_.x,{className:"text-xs font-semibold text-blue-900",children:"Discount Applied:"}),(0,a.jsxs)(t_.x,{className:"text-sm font-bold text-blue-900",children:[r.discountPercentage,"%"]})]})]})]})]})]})},tk=s(10703);let tw=[{label:"Custom pricing for models",href:"https://docs.litellm.ai/docs/proxy/custom_pricing"},{label:"Spend tracking",href:"https://docs.litellm.ai/docs/proxy/cost_tracking"}];var tC=e=>{let{userID:t,userRole:s,accessToken:l}=e,[r,i]=(0,o.useState)(void 0),[d,c]=(0,o.useState)(""),[m,u]=(0,o.useState)(!0),[x,p]=(0,o.useState)(!1),[g,j]=(0,o.useState)(!1),[y,v]=(0,o.useState)(void 0),[b,_]=(0,o.useState)("percentage"),[N,Z]=(0,o.useState)(""),[k,w]=(0,o.useState)(""),[C,S]=(0,o.useState)([]),[P]=f.Z.useForm(),[T]=f.Z.useForm(),[I,A]=h.Z.useModal(),L="proxy_admin"===s||"Admin"===s,{discountConfig:M,fetchDiscountConfig:D,handleAddProvider:E,handleRemoveProvider:z,handleDiscountChange:F}=function(e){let{accessToken:t}=e,[s,a]=(0,o.useState)({}),l=(0,o.useCallback)(async()=>{try{let e=(0,n.getProxyBaseUrl)(),s=await fetch(e?"".concat(e,"/config/cost_discount_config"):"/config/cost_discount_config",{method:"GET",headers:{[(0,n.getGlobalLitellmHeaderName)()]:"Bearer ".concat(t),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();a(e.values||{})}else console.error("Failed to fetch discount config")}catch(e){console.error("Error fetching discount config:",e),eZ.ZP.fromBackend("Failed to fetch discount configuration")}},[t]),r=(0,o.useCallback)(async e=>{try{let a=(0,n.getProxyBaseUrl)(),r=await fetch(a?"".concat(a,"/config/cost_discount_config"):"/config/cost_discount_config",{method:"PATCH",headers:{[(0,n.getGlobalLitellmHeaderName)()]:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok)eZ.ZP.success("Discount configuration updated successfully"),await l();else{var s;let e=await r.json(),t=(null===(s=e.detail)||void 0===s?void 0:s.error)||e.detail||"Failed to update settings";eZ.ZP.fromBackend(t)}}catch(e){console.error("Error updating discount config:",e),eZ.ZP.fromBackend("Failed to update discount configuration")}},[t,l]),i=(0,o.useCallback)(async(e,t)=>{if(!e||!t)return eZ.ZP.fromBackend("Please select a provider and enter discount percentage"),!1;let l=parseFloat(t);if(isNaN(l)||l<0||l>100)return eZ.ZP.fromBackend("Discount must be between 0% and 100%"),!1;let n=eY(e);if(!n)return eZ.ZP.fromBackend("Invalid provider selected"),!1;if(s[n])return eZ.ZP.fromBackend("Discount for ".concat(eH.Cl[e]," already exists. Edit it in the table above.")),!1;let i={...s,[n]:l/100};return a(i),await r(i),!0},[s,r]),d=(0,o.useCallback)(async e=>{let t={...s};delete t[e],a(t),await r(t)},[s,r]),c=(0,o.useCallback)(async(e,t)=>{let l=parseFloat(t);if(!isNaN(l)&&l>=0&&l<=1){let t={...s,[e]:l};a(t),await r(t)}},[s,r]);return{discountConfig:s,setDiscountConfig:a,fetchDiscountConfig:l,saveDiscountConfig:r,handleAddProvider:i,handleRemoveProvider:d,handleDiscountChange:c}}({accessToken:l}),{marginConfig:q,fetchMarginConfig:R,handleAddMargin:O,handleRemoveMargin:B,handleMarginChange:U}=function(e){let{accessToken:t}=e,[s,a]=(0,o.useState)({}),l=(0,o.useCallback)(async()=>{try{let e=(0,n.getProxyBaseUrl)(),s=await fetch(e?"".concat(e,"/config/cost_margin_config"):"/config/cost_margin_config",{method:"GET",headers:{[(0,n.getGlobalLitellmHeaderName)()]:"Bearer ".concat(t),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();a(e.values||{})}else console.error("Failed to fetch margin config")}catch(e){console.error("Error fetching margin config:",e),eZ.ZP.fromBackend("Failed to fetch margin configuration")}},[t]),r=(0,o.useCallback)(async e=>{try{let a=(0,n.getProxyBaseUrl)(),r=await fetch(a?"".concat(a,"/config/cost_margin_config"):"/config/cost_margin_config",{method:"PATCH",headers:{[(0,n.getGlobalLitellmHeaderName)()]:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok)eZ.ZP.success("Margin configuration updated successfully"),await l();else{var s;let e=await r.json(),t=(null===(s=e.detail)||void 0===s?void 0:s.error)||e.detail||"Failed to update settings";eZ.ZP.fromBackend(t)}}catch(e){console.error("Error updating margin config:",e),eZ.ZP.fromBackend("Failed to update margin configuration")}},[t,l]),i=(0,o.useCallback)(async e=>{let t,l;let{selectedProvider:n,marginType:i,percentageValue:o,fixedAmountValue:d}=e;if(!n)return eZ.ZP.fromBackend("Please select a provider"),!1;if("global"===n)t="global";else{let e=eY(n);if(!e)return eZ.ZP.fromBackend("Invalid provider selected"),!1;t=e}if(s[t]){let e="global"===t?"Global":eH.Cl[n];return eZ.ZP.fromBackend("Margin for ".concat(e," already exists. Edit it in the table above.")),!1}if("percentage"===i){let e=parseFloat(o);if(isNaN(e)||e<0||e>1e3)return eZ.ZP.fromBackend("Percentage must be between 0% and 1000%"),!1;l=e/100}else{let e=parseFloat(d);if(isNaN(e)||e<0)return eZ.ZP.fromBackend("Fixed amount must be non-negative"),!1;l={fixed_amount:e}}let c={...s,[t]:l};return a(c),await r(c),!0},[s,r]),d=(0,o.useCallback)(async e=>{let t={...s};delete t[e],a(t),await r(t)},[s,r]),c=(0,o.useCallback)(async(e,t)=>{let l={...s,[e]:t};a(l),await r(l)},[s,r]);return{marginConfig:s,setMarginConfig:a,fetchMarginConfig:l,saveMarginConfig:r,handleAddMargin:i,handleRemoveMargin:d,handleMarginChange:c}}({accessToken:l});(0,o.useEffect)(()=>{l&&(Promise.all([D(),R()]).finally(()=>{u(!1)}),(async()=>{try{let e=await (0,tk.p)(l);S(e.map(e=>e.model_group))}catch(e){console.error("Error fetching models:",e)}})())},[l,D,R]);let V=async()=>{await E(r,d)&&(i(void 0),c(""),p(!1))},G=async(e,t)=>{I.confirm({title:"Remove Provider Discount",icon:(0,a.jsx)(tj.Z,{}),content:"Are you sure you want to remove the discount for ".concat(t,"?"),okText:"Remove",okType:"danger",cancelText:"Cancel",onOk:()=>z(e)})},K=async()=>{await O({selectedProvider:y,marginType:b,percentageValue:N,fixedAmountValue:k})&&(v(void 0),Z(""),w(""),_("percentage"),j(!1))},H=async(e,t)=>{I.confirm({title:"Remove Provider Margin",icon:(0,a.jsx)(tj.Z,{}),content:"Are you sure you want to remove the margin for ".concat(t,"?"),okText:"Remove",okType:"danger",cancelText:"Cancel",onOk:()=>B(e)})};return l?(0,a.jsxs)("div",{className:"w-full p-8",children:[A,(0,a.jsx)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eh.Z,{children:"Cost Tracking Settings"}),(0,a.jsx)(tb,{items:tw})]}),(0,a.jsx)(ep.Z,{className:"text-gray-500 mt-1",children:"Configure cost discounts and margins for different LLM providers. Changes are saved automatically."})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full space-y-4",children:[L&&(0,a.jsxs)(eI.Z,{children:[(0,a.jsx)(eL.Z,{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)(ep.Z,{className:"text-lg font-semibold text-gray-900",children:"Provider Discounts"}),(0,a.jsx)(ep.Z,{className:"text-sm text-gray-500 mt-1",children:"Apply percentage-based discounts to reduce costs for specific providers"})]})}),(0,a.jsx)(eA.Z,{className:"px-0",children:(0,a.jsxs)(ec.Z,{children:[(0,a.jsxs)(em.Z,{className:"px-6 pt-4",children:[(0,a.jsx)(ed.Z,{children:"Discounts"}),(0,a.jsx)(ed.Z,{children:"Test It"})]}),(0,a.jsxs)(ex.Z,{children:[(0,a.jsx)(eu.Z,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)(ei.Z,{onClick:()=>p(!0),children:"+ Add Provider Discount"})}),m?(0,a.jsx)("div",{className:"py-12 text-center",children:(0,a.jsx)(ep.Z,{className:"text-gray-500",children:"Loading configuration..."})}):Object.keys(M).length>0?(0,a.jsx)(e$,{discountConfig:M,onDiscountChange:F,onRemoveProvider:G}):(0,a.jsxs)("div",{className:"py-16 px-6 text-center",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)(ep.Z,{className:"text-gray-700 font-medium mb-2",children:"No provider discounts configured"}),(0,a.jsx)(ep.Z,{className:"text-gray-500 text-sm",children:'Click "Add Provider Discount" to get started'})]})]})}),(0,a.jsx)(eu.Z,{children:(0,a.jsx)("div",{className:"px-6 pb-4",children:(0,a.jsx)(tZ,{})})})]})]})})]}),L&&(0,a.jsxs)(eI.Z,{children:[(0,a.jsx)(eL.Z,{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)(ep.Z,{className:"text-lg font-semibold text-gray-900",children:"Fee/Price Margin"}),(0,a.jsx)(ep.Z,{className:"text-sm text-gray-500 mt-1",children:"Add fees or margins to LLM costs for internal billing and cost recovery"})]})}),(0,a.jsx)(eA.Z,{className:"px-0",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)(ei.Z,{onClick:()=>j(!0),children:"+ Add Provider Margin"})}),m?(0,a.jsx)("div",{className:"py-12 text-center",children:(0,a.jsx)(ep.Z,{className:"text-gray-500",children:"Loading configuration..."})}):Object.keys(q).length>0?(0,a.jsx)(e0,{marginConfig:q,onMarginChange:U,onRemoveProvider:H}):(0,a.jsxs)("div",{className:"py-16 px-6 text-center",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)(ep.Z,{className:"text-gray-700 font-medium mb-2",children:"No provider margins configured"}),(0,a.jsx)(ep.Z,{className:"text-gray-500 text-sm",children:'Click "Add Provider Margin" to get started'})]})]})})]}),(0,a.jsxs)(eI.Z,{defaultOpen:!0,children:[(0,a.jsx)(eL.Z,{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)(ep.Z,{className:"text-lg font-semibold text-gray-900",children:"Pricing Calculator"}),(0,a.jsx)(ep.Z,{className:"text-sm text-gray-500 mt-1",children:"Estimate LLM costs based on expected token usage and request volume"})]})}),(0,a.jsx)(eA.Z,{className:"px-0",children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(tf,{accessToken:l,models:C})})})]})]}),(0,a.jsx)(h.Z,{title:(0,a.jsx)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Provider Discount"})}),open:x,width:1e3,onCancel:()=>{p(!1),P.resetFields(),i(void 0),c("")},footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)(ep.Z,{className:"text-sm text-gray-600 mb-6",children:"Select a provider and set its discount percentage. Enter a value between 0% and 100% (e.g., 5 for a 5% discount)."}),(0,a.jsx)(f.Z,{form:P,onFinish:()=>{V()},layout:"vertical",className:"space-y-6",children:(0,a.jsx)(eX,{discountConfig:M,selectedProvider:r,newDiscount:d,onProviderChange:i,onDiscountChange:c,onAddProvider:V})})]})}),(0,a.jsx)(h.Z,{title:(0,a.jsx)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Provider Margin"})}),open:g,width:1e3,onCancel:()=>{j(!1),T.resetFields(),v(void 0),Z(""),w(""),_("percentage")},footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)(ep.Z,{className:"text-sm text-gray-600 mb-6",children:'Select a provider (or "Global" for all providers) and configure the margin. You can use percentage-based or fixed amount.'}),(0,a.jsx)(f.Z,{form:T,layout:"vertical",className:"space-y-6",children:(0,a.jsx)(e1,{marginConfig:q,selectedProvider:y,marginType:b,percentageValue:N,fixedAmountValue:k,onProviderChange:v,onMarginTypeChange:_,onPercentageChange:Z,onFixedAmountChange:w,onAddProvider:K})})]})})]}):null},tS=s(50865),tP=s(2431),tT=s(17588),tI=s(57400),tA=s(55322),tL=s(71632),tM=s(97475),tD=s(65869),tE=s(49638),tz=s(28595);let tF="Evaluate whether this guardrail's decision was correct.\nAnalyze the user input, the guardrail action taken, and determine if it was appropriate.\n\nConsider:\n— Was the user's intent genuinely harmful or policy-violating?\n— Was the guardrail's action (block / flag / pass) appropriate?\n— Could this be a false positive or false negative?\n\nReturn a structured verdict with confidence and justification.";function tq(e){let{open:t,onClose:s,guardrailName:l,accessToken:r,onRunEvaluation:n}=e,[i,d]=(0,o.useState)(tF),[c,m]=(0,o.useState)('{\n  "verdict": "correct" | "false_positive" | "false_negative",\n  "confidence": 0.0,\n  "justification": "string",\n  "risk_category": "string",\n  "suggested_action": "keep" | "adjust threshold" | "add allowlist"\n}\n'),[u,x]=(0,o.useState)(null),[p,g]=(0,o.useState)([]),[f,j]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!t||!r){g([]);return}let e=!1;return j(!0),(0,tk.p)(r).then(t=>{e||g(t)}).catch(()=>{e||g([])}).finally(()=>{e||j(!1)}),()=>{e=!0}},[t,r]);let b=p.map(e=>({value:e.model_group,label:e.model_group}));return(0,a.jsxs)(h.Z,{title:"Evaluation Settings",open:t,onCancel:s,width:640,footer:null,closeIcon:(0,a.jsx)(tE.Z,{}),destroyOnClose:!0,children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:l?"Configure AI evaluation for ".concat(l):"Configure AI evaluation for re-running on logs"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Evaluation Prompt"}),(0,a.jsx)("button",{type:"button",onClick:()=>d(tF),className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Reset to default"})]}),(0,a.jsx)(y.default.TextArea,{value:i,onChange:e=>d(e.target.value),rows:6,className:"font-mono text-sm"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"System prompt sent to the evaluation model. Output is structured via response_format."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Response Schema"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"response_format: json_schema"}),(0,a.jsx)(y.default.TextArea,{value:c,onChange:e=>m(e.target.value),rows:6,className:"font-mono text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Model"}),(0,a.jsx)(v.default,{placeholder:f?"Loading models…":"Select a model",value:null!=u?u:void 0,onChange:x,options:b,style:{width:"100%"},showSearch:!0,optionFilterProp:"label",loading:f,notFoundContent:r?"No models available":"Sign in to see models"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 mt-6 pt-4 border-t border-gray-100",children:[(0,a.jsx)(A.ZP,{onClick:s,children:"Cancel"}),(0,a.jsx)(A.ZP,{type:"primary",icon:(0,a.jsx)(tz.Z,{}),onClick:()=>{u&&(null==n||n({prompt:i,schema:c,model:u}),s())},disabled:!u,children:"Run Evaluation"})]})]})}var tR=s(83669),tO=s(77398),tB=s.n(tO),tU=s(33877);let tV={blocked:{icon:tE.Z,color:"text-red-600",bg:"bg-red-50",border:"border-red-200",label:"Blocked"},passed:{icon:tR.Z,color:"text-green-600",bg:"bg-green-50",border:"border-green-200",label:"Passed"},flagged:{icon:ea.Z,color:"text-amber-600",bg:"bg-amber-50",border:"border-amber-200",label:"Flagged"}};function tG(e){var t,s;let{guardrailName:l,filterAction:r="all",logs:i=[],logsLoading:d=!1,totalLogs:c,accessToken:m=null,startDate:u="",endDate:x=""}=e,[p,h]=(0,o.useState)(10),[g,f]=(0,o.useState)(r),[j,y]=(0,o.useState)(null),[v,b]=(0,o.useState)(!1),_=i.filter(e=>"all"===g||e.action===g).slice(0,p),N=null!=c?c:i.length,Z=u?tB()(u).utc().format("YYYY-MM-DD HH:mm:ss"):tB()().subtract(24,"hours").utc().format("YYYY-MM-DD HH:mm:ss"),k=x?tB()(x).utc().endOf("day").format("YYYY-MM-DD HH:mm:ss"):tB()().utc().format("YYYY-MM-DD HH:mm:ss"),{data:w}=(0,tL.a)({queryKey:["spend-log-by-request",j,Z,k],queryFn:async()=>m&&j?await (0,n.uiSpendLogsCall)({accessToken:m,start_date:Z,end_date:k,page:1,page_size:10,params:{request_id:j}}):null,enabled:!!(m&&j&&v)}),C=null!==(s=null==w?void 0:null===(t=w.data)||void 0===t?void 0:t[0])&&void 0!==s?s:null,S=e=>{y(e.id),b(!0)};return(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:l?"Logs — ".concat(l):"Request Logs"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:d?"Loading…":i.length>0?"Showing ".concat(_.length," of ").concat(N," entries"):"No logs for this period. Select a guardrail and date range."})]}),i.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:["all","blocked","flagged","passed"].map(e=>(0,a.jsx)(A.ZP,{type:g===e?"primary":"default",size:"small",onClick:()=>f(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,a.jsx)("div",{className:"h-4 w-px bg-gray-200"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 mr-1",children:"Sample:"}),[10,50,100].map(e=>(0,a.jsx)(A.ZP,{type:p===e?"primary":"default",size:"small",onClick:()=>h(e),children:e},e))]})]})]})}),d&&(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(eg.Z,{})}),!d&&0===_.length&&(0,a.jsx)("div",{className:"py-12 text-center text-sm text-gray-500",children:"No logs to display. Adjust filters or date range."}),!d&&_.length>0&&(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:_.map(e=>{var t,s;let l=tV[e.action],r=l.icon;return(0,a.jsxs)("button",{type:"button",onClick:()=>S(e),className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors flex items-start gap-3",children:[(0,a.jsx)(r,{className:"w-4 h-4 mt-0.5 flex-shrink-0 ".concat(l.color)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded border ".concat(l.bg," ").concat(l.color," ").concat(l.border),children:l.label}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:e.timestamp}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"\xb7"}),e.model&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.model})]}),(0,a.jsx)("p",{className:"text-sm text-gray-800 truncate",children:null!==(s=null!==(t=e.input_snippet)&&void 0!==t?t:e.input)&&void 0!==s?s:"—"})]}),(0,a.jsx)(e7.Z,{className:"w-4 h-4 text-gray-400 flex-shrink-0 mt-1"})]},e.id)})}),(0,a.jsx)(tU.Z,{open:v,onClose:()=>{b(!1),y(null)},logEntry:C,accessToken:m,allLogs:C?[C]:[],startTime:Z})]})}function tK(e){let{label:t,value:s,valueColor:l="text-gray-900",icon:r,subtitle:n}=e;return(0,a.jsxs)("div",{className:"h-full bg-white border border-gray-200 rounded-lg p-5 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600",children:t}),r&&(0,a.jsx)("span",{className:"text-gray-400",children:r})]}),(0,a.jsx)("div",{className:"text-3xl font-semibold ".concat(l," tracking-tight"),children:s}),n&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:n})]})}let tH={healthy:{bg:"bg-green-50",text:"text-green-700",dot:"bg-green-500"},warning:{bg:"bg-amber-50",text:"text-amber-700",dot:"bg-amber-500"},critical:{bg:"bg-red-50",text:"text-red-700",dot:"bg-red-500"}};function tW(e){var t,s,l,r;let{guardrailId:i,onBack:d,accessToken:c=null,startDate:m,endDate:u}=e,[x,p]=(0,o.useState)("overview"),[h,g]=(0,o.useState)(!1),[f,j]=(0,o.useState)(1),{data:y,isLoading:v,error:b}=(0,tL.a)({queryKey:["guardrails-usage-detail",i,m,u],queryFn:()=>(0,n.getGuardrailsUsageDetail)(c,i,m,u),enabled:!!c&&!!i}),{data:_,isLoading:N}=(0,tL.a)({queryKey:["guardrails-usage-logs",i,f,50],queryFn:()=>(0,n.getGuardrailsUsageLogs)(c,{guardrailId:i,page:f,pageSize:50,startDate:m,endDate:u}),enabled:!!c&&!!i}),Z=(0,o.useMemo)(()=>{var e;return(null!==(e=null==_?void 0:_.logs)&&void 0!==e?e:[]).map(e=>({id:e.id,timestamp:e.timestamp,action:e.action,score:e.score,model:e.model,input_snippet:e.input_snippet,output_snippet:e.output_snippet,reason:e.reason}))},[null==_?void 0:_.logs]),k=y?{name:y.guardrail_name,description:null!==(t=y.description)&&void 0!==t?t:"",status:y.status,provider:y.provider,type:y.type,requestsEvaluated:y.requestsEvaluated,failRate:y.failRate,avgScore:y.avgScore,avgLatency:y.avgLatency}:{name:i,description:"",status:"healthy",provider:"—",type:"—",requestsEvaluated:0,failRate:0,avgScore:void 0,avgLatency:void 0},w=null!==(s=tH[k.status])&&void 0!==s?s:tH.healthy;return v&&!y?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(eg.Z,{size:"large"})}):b&&!y?(0,a.jsxs)("div",{children:[(0,a.jsx)(A.ZP,{type:"link",icon:(0,a.jsx)(tT.Z,{}),onClick:d,className:"pl-0 mb-4",children:"Back to Overview"}),(0,a.jsx)("p",{className:"text-red-600",children:"Failed to load guardrail details."})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(A.ZP,{type:"link",icon:(0,a.jsx)(tT.Z,{}),onClick:d,className:"pl-0 mb-4",children:"Back to Overview"}),(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,a.jsx)(tI.Z,{className:"text-xl text-gray-400"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:k.name}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-0.5 text-xs font-medium rounded-full ".concat(w.bg," ").concat(w.text),children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full ".concat(w.dot)}),k.status.charAt(0).toUpperCase()+k.status.slice(1)]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 ml-8",children:k.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-md bg-indigo-50 text-indigo-700 border border-indigo-200",children:k.provider}),(0,a.jsx)(A.ZP,{type:"default",icon:(0,a.jsx)(tA.Z,{}),onClick:()=>g(!0),title:"Evaluation settings"})]})]})]}),(0,a.jsx)(tD.default,{activeKey:x,onChange:p,items:[{key:"overview",label:"Overview"},{key:"logs",label:"Logs"}]}),"overview"===x&&(0,a.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,a.jsxs)(tM.r,{numItems:2,numItemsMd:5,className:"gap-4",children:[(0,a.jsx)(tM.J,{children:(0,a.jsx)(tK,{label:"Requests Evaluated",value:k.requestsEvaluated.toLocaleString()})}),(0,a.jsx)(tM.J,{children:(0,a.jsx)(tK,{label:"Fail Rate",value:"".concat(k.failRate,"%"),valueColor:k.failRate>15?"text-red-600":k.failRate>5?"text-amber-600":"text-green-600",subtitle:"".concat(Math.round(k.requestsEvaluated*k.failRate/100).toLocaleString()," blocked"),icon:k.failRate>15?(0,a.jsx)(ea.Z,{className:"text-red-400"}):void 0})}),(0,a.jsx)(tM.J,{children:(0,a.jsx)(tK,{label:"Avg. latency added",value:null!=k.avgLatency?"".concat(Math.round(k.avgLatency),"ms"):"—",valueColor:null!=k.avgLatency?k.avgLatency>150?"text-red-600":k.avgLatency>50?"text-amber-600":"text-green-600":"text-gray-500",subtitle:null!=k.avgLatency?"Per request (avg)":"No data"})})]}),(0,a.jsx)(tG,{guardrailName:k.name,filterAction:"all",logs:Z,logsLoading:N,totalLogs:null!==(l=null==_?void 0:_.total)&&void 0!==l?l:0,accessToken:c,startDate:m,endDate:u})]}),"logs"===x&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(tG,{guardrailName:k.name,logs:Z,logsLoading:N,totalLogs:null!==(r=null==_?void 0:_.total)&&void 0!==r?r:0,accessToken:c,startDate:m,endDate:u})}),(0,a.jsx)(tq,{open:h,onClose:()=>g(!1),guardrailName:k.name,accessToken:c})]})}var tY=s(29332),tJ=s(49804),t$=s(67101),tQ=s(40933);function tX(e){let{data:t}=e,s=t&&t.length>0?t:[];return(0,a.jsxs)(tQ.Zb,{className:"bg-white border border-gray-200",children:[(0,a.jsx)(tQ.Dx,{className:"text-base font-semibold text-gray-900 mb-4",children:"Request Outcomes Over Time"}),(0,a.jsx)("div",{className:"h-80 min-h-[280px]",children:s.length>0?(0,a.jsx)(tQ.vz,{data:s,index:"date",categories:["passed","blocked"],colors:["green","red"],valueFormatter:e=>e.toLocaleString(),yAxisWidth:48,showLegend:!0,stack:!0}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-sm text-gray-500",children:"No chart data for this period"})})]})}let t0={Bedrock:"bg-orange-100 text-orange-700 border-orange-200","Google Cloud":"bg-sky-100 text-sky-700 border-sky-200",LiteLLM:"bg-indigo-100 text-indigo-700 border-indigo-200",Custom:"bg-gray-100 text-gray-600 border-gray-200"};function t1(e){var t;let{accessToken:s=null,startDate:l,endDate:r,onSelectGuardrail:i}=e,[d,c]=(0,o.useState)("failRate"),[m,u]=(0,o.useState)("desc"),[x,p]=(0,o.useState)(!1),{data:h,isLoading:g,error:f}=(0,tL.a)({queryKey:["guardrails-usage-overview",l,r],queryFn:()=>(0,n.getGuardrailsUsageOverview)(s,l,r),enabled:!!s}),j=null!==(t=null==h?void 0:h.rows)&&void 0!==t?t:[],y=(0,o.useMemo)(()=>{if(h){var e,t,s;return{totalRequests:null!==(e=h.totalRequests)&&void 0!==e?e:0,totalBlocked:null!==(t=h.totalBlocked)&&void 0!==t?t:0,passRate:String(null!==(s=h.passRate)&&void 0!==s?s:0),avgLatency:j.length?Math.round(j.reduce((e,t)=>{var s;return e+(null!==(s=t.avgLatency)&&void 0!==s?s:0)},0)/j.length):0,count:j.length}}return function(e){let t=e.reduce((e,t)=>e+t.requestsEvaluated,0),s=e.reduce((e,t)=>e+Math.round(t.requestsEvaluated*t.failRate/100),0),a=t>0?((1-s/t)*100).toFixed(1):"0",l=e.filter(e=>null!=e.avgLatency);return{totalRequests:t,totalBlocked:s,passRate:a,avgLatency:l.length>0?Math.round(l.reduce((e,t)=>{var s;return e+(null!==(s=t.avgLatency)&&void 0!==s?s:0)},0)/l.length):0,count:e.length}}(j)},[h,j]),v=null==h?void 0:h.chart,b=(0,o.useMemo)(()=>[...j].sort((e,t)=>{var s,a;let l="desc"===m?-1:1,r=null!==(s=e[d])&&void 0!==s?s:0,n=null!==(a=t[d])&&void 0!==a?a:0;return(Number(r)-Number(n))*l}),[j,d,m]),_=[{title:"Guardrail",dataIndex:"name",key:"name",render:(e,t)=>(0,a.jsx)("button",{type:"button",className:"text-sm font-medium text-gray-900 hover:text-indigo-600 text-left",onClick:()=>i(t.id),children:e})},{title:"Provider",dataIndex:"provider",key:"provider",render:e=>{var t;return(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded border ".concat(null!==(t=t0[e])&&void 0!==t?t:t0.Custom),children:e})}},{title:"Requests",dataIndex:"requestsEvaluated",key:"requestsEvaluated",align:"right",sorter:!0,sortOrder:"requestsEvaluated"===d?"desc"===m?"descend":"ascend":null,render:e=>e.toLocaleString()},{title:"Fail Rate",dataIndex:"failRate",key:"failRate",align:"right",sorter:!0,sortOrder:"failRate"===d?"desc"===m?"descend":"ascend":null,render:(e,t)=>(0,a.jsxs)("span",{className:e>15?"text-red-600":e>5?"text-amber-600":"text-green-600",children:[e,"%","up"===t.trend&&(0,a.jsx)("span",{className:"ml-1 text-xs text-red-400",children:"↑"}),"down"===t.trend&&(0,a.jsx)("span",{className:"ml-1 text-xs text-green-400",children:"↓"})]})},{title:"Avg. latency added",dataIndex:"avgLatency",key:"avgLatency",align:"right",sorter:!0,sortOrder:"avgLatency"===d?"desc"===m?"descend":"ascend":null,render:e=>(0,a.jsx)("span",{className:null==e?"text-gray-400":e>150?"text-red-600":e>50?"text-amber-600":"text-green-600",children:null!=e?"".concat(e,"ms"):"—"})},{title:"Status",dataIndex:"status",key:"status",align:"center",render:e=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("healthy"===e?"bg-green-500":"warning"===e?"bg-amber-500":"bg-red-500")}),(0,a.jsx)("span",{className:"text-xs text-gray-600 capitalize",children:e})]})}],N=["failRate","requestsEvaluated","avgLatency"];return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(tI.Z,{className:"text-lg text-indigo-500"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Guardrails Monitor"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Monitor guardrail performance across all requests"})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)(A.ZP,{type:"default",icon:(0,a.jsx)(ts.Z,{}),title:"Coming soon",children:"Export Data"})})]}),(0,a.jsxs)(t$.Z,{numItems:2,numItemsLg:5,className:"gap-4 mb-6 items-stretch",children:[(0,a.jsx)(tJ.Z,{className:"flex flex-col",children:(0,a.jsx)(tK,{label:"Total Evaluations",value:y.totalRequests.toLocaleString()})}),(0,a.jsx)(tJ.Z,{className:"flex flex-col",children:(0,a.jsx)(tK,{label:"Blocked Requests",value:y.totalBlocked.toLocaleString(),valueColor:"text-red-600",icon:(0,a.jsx)(ea.Z,{className:"text-red-400"})})}),(0,a.jsx)(tJ.Z,{className:"flex flex-col",children:(0,a.jsx)(tK,{label:"Pass Rate",value:"".concat(y.passRate,"%"),valueColor:"text-green-600",icon:(0,a.jsx)(tY.Z,{className:"text-green-400"})})}),(0,a.jsx)(tJ.Z,{className:"flex flex-col",children:(0,a.jsx)(tK,{label:"Avg. latency added",value:"".concat(y.avgLatency,"ms"),valueColor:y.avgLatency>150?"text-red-600":y.avgLatency>50?"text-amber-600":"text-green-600"})}),(0,a.jsx)(tJ.Z,{className:"flex flex-col",children:(0,a.jsx)(tK,{label:"Active Guardrails",value:y.count})})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(tX,{data:v})}),(0,a.jsxs)(eo.Z,{className:"bg-white border border-gray-200 rounded-lg",children:[(g||f)&&(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center gap-2",children:[g&&(0,a.jsx)(eg.Z,{size:"small"}),f&&(0,a.jsx)("span",{className:"text-sm text-red-600",children:"Failed to load data. Try again."})]}),(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(eh.Z,{className:"text-base font-semibold text-gray-900",children:"Guardrail Performance"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Click a guardrail to view details, logs, and configuration"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(A.ZP,{type:"default",icon:(0,a.jsx)(tA.Z,{}),onClick:()=>p(!0),title:"Evaluation settings"})})]}),(0,a.jsx)(e4.Z,{columns:_,dataSource:b,rowKey:"id",pagination:!1,loading:g,onChange:(e,t,s)=>{(null==s?void 0:s.field)&&N.includes(s.field)&&(c(s.field),u("ascend"===s.order?"asc":"desc"))},locale:0!==j.length||g?void 0:{emptyText:"No data for this period"},onRow:e=>({onClick:()=>i(e.id),style:{cursor:"pointer"}})})]}),(0,a.jsx)(tq,{open:x,onClose:()=>p(!1),accessToken:s})]})}let t2=new Date,t4=new Date;function t5(e){let{accessToken:t=null}=e,[s,l]=(0,o.useState)({type:"overview"}),r=(0,o.useMemo)(()=>new Date(t4),[]),i=(0,o.useMemo)(()=>new Date(t2),[]),[d,c]=(0,o.useState)({from:r,to:i}),m=d.from?(0,n.formatDate)(d.from):"",u=d.to?(0,n.formatDate)(d.to):"",x=(0,o.useCallback)(e=>{c(e)},[]);return(0,a.jsxs)("div",{className:"p-6 w-full min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"flex items-center justify-end mb-4",children:(0,a.jsx)(tP.Z,{value:d,onValueChange:x,label:"",showTimeRange:!1})}),"overview"===s.type?(0,a.jsx)(t1,{accessToken:t,startDate:m,endDate:u,onSelectGuardrail:e=>{l({type:"detail",guardrailId:e})}}):(0,a.jsx)(tW,{guardrailId:s.guardrailId,onBack:()=>{l({type:"overview"})},accessToken:t,startDate:m,endDate:u})]})}t4.setDate(t4.getDate()-7);var t6=s(51811),t3=s(63073),t8=s(71125),t9=s(26554),t7=s(73316),se=s(63494),st=s(39823),ss=s(918),sa=s(73938),sl=s(88904),sr=s(23628),sn=s(86462),si=s(47686),so=s(56083),sd=s(51205),sc=s(57716),sm=s(73247),su=s(92369),sx=s(41649),sp=s(27281),sh=s(57365),sg=s(57840),sf=s(14787),sj=s(82586),sy=s(72885),sv=s(2597),sb=s(76364),s_=s(46468),sN=s(24199),sZ=s(97415),sk=s(21609),sw=s(39957),sC=s(8156);let sS=(e,t)=>{let s=[];return e&&e.models.length>0?(console.log("organization.models: ".concat(e.models)),s=e.models):s=t,(0,s_.Ob)(s,t)},sP=(e,t,s)=>"Admin"===e||!!s&&!!t&&s.some(e=>{var s;return null===(s=e.members)||void 0===s?void 0:s.some(e=>e.user_id===t&&"org_admin"===e.user_role)}),sT=(e,t,s)=>"Admin"===e?s||[]:s&&t?s.filter(e=>{var s;return null===(s=e.members)||void 0===s?void 0:s.some(e=>e.user_id===t&&"org_admin"===e.user_role)}):[],sI=(e,t)=>{if(!e||!t)return e||"N/A";let s=t.find(t=>t.organization_id===e);return(null==s?void 0:s.organization_alias)||e};var sA=e=>{var t,s,l,r;let{teams:i,searchParams:d,accessToken:c,setTeams:m,userID:u,userRole:x,organizations:p,premiumUser:g=!1}=e;console.log("organizations: ".concat(JSON.stringify(p)));let{data:j}=(0,st.q)(),[b,_]=(0,o.useState)(""),[N,k]=(0,o.useState)(null),[w,C]=(0,o.useState)(null),[S,P]=(0,o.useState)(!1),[T,L]=(0,o.useState)({team_id:"",team_alias:"",organization_id:"",sort_by:"created_at",sort_order:"desc"});(0,o.useEffect)(()=>{console.log("inside useeffect - ".concat(b)),c&&(0,eP.Z)(c,u,x,N,m),e6()},[b]);let[M]=f.Z.useForm(),[D]=f.Z.useForm(),{Title:E,Paragraph:z}=sg.default,[F,q]=(0,o.useState)(""),[R,O]=(0,o.useState)(!1),[B,U]=(0,o.useState)(null),[V,G]=(0,o.useState)(null),[W,Y]=(0,o.useState)(!1),[J,$]=(0,o.useState)(!1),[Q,X]=(0,o.useState)(!1),[et,es]=(0,o.useState)(!1),[ea,el]=(0,o.useState)([]),[er,eh]=(0,o.useState)(!1),[eg,ef]=(0,o.useState)(null),[ej,ey]=(0,o.useState)([]),[ev,eb]=(0,o.useState)({}),[e_,eN]=(0,o.useState)(!1),[ek,ew]=(0,o.useState)([]),[eC,eS]=(0,o.useState)([]),[eT,eE]=(0,o.useState)({}),[ez,eF]=(0,o.useState)([]),[eq,eK]=(0,o.useState)([]),[eH,eW]=(0,o.useState)(!1),[eY,eJ]=(0,o.useState)({}),[e$,eQ]=(0,o.useState)(null),[eX,e0]=(0,o.useState)(0);(0,o.useEffect)(()=>{console.log("currentOrgForCreateTeam: ".concat(w));let e=sS(w,ea);console.log("models: ".concat(e)),ey(e),M.setFieldValue("models",[])},[w,ea]),(0,o.useEffect)(()=>{if(J){let e=sT(x,u,p);if(1===e.length){let t=e[0];M.setFieldValue("organization_id",t.organization_id),C(t)}else M.setFieldValue("organization_id",(null==N?void 0:N.organization_id)||null),C(N)}},[J,x,u,p,N]),(0,o.useEffect)(()=>{let e=async()=>{try{if(null==c)return;let e=(await (0,n.getPoliciesList)(c)).policies.map(e=>e.policy_name);eS(e)}catch(e){console.error("Failed to fetch policies:",e)}};(async()=>{try{if(null==c)return;let e=(await (0,n.getGuardrailsList)(c)).guardrails.map(e=>e.guardrail_name);ew(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})(),e()},[c]);let e1=async()=>{try{if(null==c)return;let e=await (0,n.fetchMCPAccessGroups)(c);eK(e)}catch(e){console.error("Failed to fetch MCP access groups:",e)}};(0,o.useEffect)(()=>{e1()},[c]),(0,o.useEffect)(()=>{i&&eb(i.reduce((e,t)=>(e[t.team_id]={keys:t.keys||[],team_info:{members_with_roles:t.members_with_roles||[]}},e),{}))},[i]);let e2=async e=>{ef(e),eh(!0)},e4=async()=>{if(null!=eg&&null!=i&&null!=c)try{eN(!0),await (0,n.teamDeleteCall)(c,eg.team_id),await (0,eP.Z)(c,u,x,N,m),eZ.ZP.success("Team deleted successfully")}catch(e){eZ.ZP.fromBackend("Error deleting the team: "+e)}finally{eN(!1),eh(!1),ef(null)}};(0,o.useEffect)(()=>{(async()=>{try{if(null===u||null===x||null===c)return;let e=await (0,s_.K2)(u,x,c);e&&el(e)}catch(e){console.error("Error fetching user models:",e)}})()},[c,u,x,i]);let e5=async e=>{try{if(console.log("formValues: ".concat(JSON.stringify(e))),null!=c){var t,s,a;let l=null==e?void 0:e.team_alias,r=null!==(a=null==i?void 0:i.map(e=>e.team_alias))&&void 0!==a?a:[],o=(null==e?void 0:e.organization_id)||(null==N?void 0:N.organization_id);if(""===o||"string"!=typeof o?e.organization_id=null:e.organization_id=o.trim(),r.includes(l))throw Error("Team alias ".concat(l," already exists, please pick another alias"));if(eZ.ZP.info("Creating Team"),ez.length>0){let t={};if(e.metadata)try{t=JSON.parse(e.metadata)}catch(e){console.warn("Invalid JSON in metadata field, starting with empty object")}t={...t,logging:ez.filter(e=>e.callback_name)},e.metadata=JSON.stringify(t)}if(e.secret_manager_settings&&"string"==typeof e.secret_manager_settings){if(""===e.secret_manager_settings.trim())delete e.secret_manager_settings;else try{e.secret_manager_settings=JSON.parse(e.secret_manager_settings)}catch(e){throw Error("Failed to parse secret manager settings: "+e)}}if(e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0||e.allowed_mcp_servers_and_groups&&((null===(t=e.allowed_mcp_servers_and_groups.servers)||void 0===t?void 0:t.length)>0||(null===(s=e.allowed_mcp_servers_and_groups.accessGroups)||void 0===s?void 0:s.length)>0||e.allowed_mcp_servers_and_groups.toolPermissions)){if(e.object_permission={},e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission.vector_stores=e.allowed_vector_store_ids,delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups){let{servers:t,accessGroups:s}=e.allowed_mcp_servers_and_groups;t&&t.length>0&&(e.object_permission.mcp_servers=t),s&&s.length>0&&(e.object_permission.mcp_access_groups=s),delete e.allowed_mcp_servers_and_groups}e.mcp_tool_permissions&&Object.keys(e.mcp_tool_permissions).length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_tool_permissions=e.mcp_tool_permissions,delete e.mcp_tool_permissions)}if(e.allowed_mcp_access_groups&&e.allowed_mcp_access_groups.length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_access_groups=e.allowed_mcp_access_groups,delete e.allowed_mcp_access_groups),e.allowed_agents_and_groups){let{agents:t,accessGroups:s}=e.allowed_agents_and_groups;e.object_permission||(e.object_permission={}),t&&t.length>0&&(e.object_permission.agents=t),s&&s.length>0&&(e.object_permission.agent_access_groups=s),delete e.allowed_agents_and_groups}Object.keys(eY).length>0&&(e.model_aliases=eY),(null==e$?void 0:e$.router_settings)&&Object.values(e$.router_settings).some(e=>null!=e&&""!==e)&&(e.router_settings=e$.router_settings);let d=await (0,n.teamCreateCall)(c,e);null!==i?m([...i,d]):m([d]),console.log("response for team create call: ".concat(d)),eZ.ZP.success("Team created"),M.resetFields(),eF([]),eJ({}),eQ(null),e0(e=>e+1),$(!1)}}catch(e){console.error("Error creating the team:",e),eZ.ZP.fromBackend("Error creating the team: "+e)}},e6=()=>{_(new Date().toLocaleString())},e3=(e,t)=>{let s={...T,[e]:t};L(s),c&&(0,n.v2TeamListCall)(c,s.organization_id||null,null,s.team_id||null,s.team_alias||null).then(e=>{e&&e.teams&&m(e.teams)}).catch(e=>{console.error("Error fetching teams:",e)})};return(0,a.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,a.jsx)(t$.Z,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,a.jsxs)(tJ.Z,{numColSpan:1,className:"flex flex-col gap-2",children:[sP(x,u,p)&&(0,a.jsx)(ei.Z,{className:"w-fit",onClick:()=>$(!0),children:"+ Create New Team"}),V?(0,a.jsx)(sa.Z,{teamId:V,onUpdate:e=>{m(t=>{if(null==t)return t;let s=t.map(t=>e.team_id===t.team_id?(0,tt.nl)(t,e):t);return c&&(0,eP.Z)(c,u,x,N,m),s})},onClose:()=>{G(null),Y(!1)},accessToken:c,is_team_admin:(e=>{if(null==e||null==e.members_with_roles)return!1;for(let t=0;t<e.members_with_roles.length;t++){let s=e.members_with_roles[t];if(s.user_id==u&&"admin"==s.role)return!0}return!1})(null==i?void 0:i.find(e=>e.team_id===V)),is_proxy_admin:"Admin"==x,userModels:ea,editTeam:W,premiumUser:g}):(0,a.jsxs)(ec.Z,{className:"gap-2 h-[75vh] w-full",children:[(0,a.jsxs)(em.Z,{className:"flex justify-between mt-2 w-full items-center",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(ed.Z,{children:"Your Teams"}),(0,a.jsx)(ed.Z,{children:"Available Teams"}),(0,en.P4)(x||"")&&(0,a.jsx)(ed.Z,{children:"Default Team Settings"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[b&&(0,a.jsxs)(ep.Z,{children:["Last Refreshed: ",b]}),(0,a.jsx)(eM.Z,{icon:sr.Z,variant:"shadow",size:"xs",className:"self-center",onClick:e6})]})]}),(0,a.jsxs)(ex.Z,{children:[(0,a.jsxs)(eu.Z,{children:[(0,a.jsxs)(ep.Z,{children:["Click on “Team ID” to view team details ",(0,a.jsx)("b",{children:"and"})," manage team members."]}),(0,a.jsx)(t$.Z,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,a.jsx)(tJ.Z,{numColSpan:1,children:(0,a.jsxs)(eo.Z,{className:"w-full mx-auto flex-auto overflow-hidden overflow-y-auto max-h-[50vh]",children:[(0,a.jsx)("div",{className:"border-b px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsx)(so.H,{placeholder:"Search by Team Name...",value:T.team_alias,onChange:e=>e3("team_alias",e),icon:sm.Z}),(0,a.jsx)(sd.c,{onClick:()=>P(!S),active:S,hasActiveFilters:!!(T.team_id||T.team_alias||T.organization_id)}),(0,a.jsx)(sc.z,{onClick:()=>{L({team_id:"",team_alias:"",organization_id:"",sort_by:"created_at",sort_order:"desc"}),c&&(0,n.v2TeamListCall)(c,null,u||null,null,null).then(e=>{e&&e.teams&&m(e.teams)}).catch(e=>{console.error("Error fetching teams:",e)})}})]}),S&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[(0,a.jsx)(so.H,{placeholder:"Enter Team ID",value:T.team_id,onChange:e=>e3("team_id",e),icon:su.Z}),(0,a.jsx)("div",{className:"w-64",children:(0,a.jsx)(sp.Z,{value:T.organization_id||"",onValueChange:e=>e3("organization_id",e),placeholder:"Select Organization",children:null==p?void 0:p.map(e=>(0,a.jsx)(sh.Z,{value:e.organization_id||"",children:e.organization_alias||e.organization_id},e.organization_id))})})]})]})}),(0,a.jsxs)(eR.Z,{children:[(0,a.jsx)(eU.Z,{children:(0,a.jsxs)(eG.Z,{children:[(0,a.jsx)(eV.Z,{children:"Team Name"}),(0,a.jsx)(eV.Z,{children:"Team ID"}),(0,a.jsx)(eV.Z,{children:"Created"}),(0,a.jsx)(eV.Z,{children:"Spend (USD)"}),(0,a.jsx)(eV.Z,{children:"Budget (USD)"}),(0,a.jsx)(eV.Z,{children:"Models"}),(0,a.jsx)(eV.Z,{children:"Organization"}),(0,a.jsx)(eV.Z,{children:"Info"}),(0,a.jsx)(eV.Z,{children:"Actions"})]})}),(0,a.jsx)(eO.Z,{children:i&&i.length>0?i.filter(e=>!N||e.organization_id===N.organization_id).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>(0,a.jsxs)(eG.Z,{children:[(0,a.jsx)(eB.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.team_alias}),(0,a.jsx)(eB.Z,{children:(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)(ee.Z,{title:e.team_id,children:(0,a.jsxs)(ei.Z,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>{G(e.team_id)},children:[e.team_id.slice(0,7),"..."]})})})}),(0,a.jsx)(eB.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,a.jsx)(eB.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:(0,tt.pw)(e.spend,4)}),(0,a.jsx)(eB.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:null!==e.max_budget&&void 0!==e.max_budget?e.max_budget:"No limit"}),(0,a.jsx)(eB.Z,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:e.models.length>3?"px-0":"",children:(0,a.jsx)("div",{className:"flex flex-col",children:Array.isArray(e.models)?(0,a.jsx)("div",{className:"flex flex-col",children:0===e.models.length?(0,a.jsx)(sx.Z,{size:"xs",className:"mb-1",color:"red",children:(0,a.jsx)(ep.Z,{children:"All Proxy Models"})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-start",children:[e.models.length>3&&(0,a.jsx)("div",{children:(0,a.jsx)(eM.Z,{icon:eT[e.team_id]?sn.Z:si.Z,className:"cursor-pointer",size:"xs",onClick:()=>{eE(t=>({...t,[e.team_id]:!t[e.team_id]}))}})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.models.slice(0,3).map((e,t)=>"all-proxy-models"===e?(0,a.jsx)(sx.Z,{size:"xs",color:"red",children:(0,a.jsx)(ep.Z,{children:"All Proxy Models"})},t):(0,a.jsx)(sx.Z,{size:"xs",color:"blue",children:(0,a.jsx)(ep.Z,{children:e.length>30?"".concat((0,s_.W0)(e).slice(0,30),"..."):(0,s_.W0)(e)})},t)),e.models.length>3&&!eT[e.team_id]&&(0,a.jsx)(sx.Z,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,a.jsxs)(ep.Z,{children:["+",e.models.length-3," ",e.models.length-3==1?"more model":"more models"]})}),eT[e.team_id]&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.models.slice(3).map((e,t)=>"all-proxy-models"===e?(0,a.jsx)(sx.Z,{size:"xs",color:"red",children:(0,a.jsx)(ep.Z,{children:"All Proxy Models"})},t+3):(0,a.jsx)(sx.Z,{size:"xs",color:"blue",children:(0,a.jsx)(ep.Z,{children:e.length>30?"".concat((0,s_.W0)(e).slice(0,30),"..."):(0,s_.W0)(e)})},t+3))})]})]})})}):null})}),(0,a.jsx)(eB.Z,{children:sI(e.organization_id,j||p)}),(0,a.jsxs)(eB.Z,{children:[(0,a.jsxs)(ep.Z,{children:[ev&&e.team_id&&ev[e.team_id]&&ev[e.team_id].keys&&ev[e.team_id].keys.length," ","Keys"]}),(0,a.jsxs)(ep.Z,{children:[ev&&e.team_id&&ev[e.team_id]&&ev[e.team_id].team_info&&ev[e.team_id].team_info.members_with_roles&&ev[e.team_id].team_info.members_with_roles.length," ","Members"]})]}),(0,a.jsx)(eB.Z,{children:"Admin"==x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sw.Z,{variant:"Edit",onClick:()=>{G(e.team_id),Y(!0)},dataTestId:"edit-team-button",tooltipText:"Edit team"}),(0,a.jsx)(sw.Z,{variant:"Delete",onClick:()=>e2(e),dataTestId:"delete-team-button",tooltipText:"Delete team"})]}):null})]},e.team_id)):(0,a.jsx)(eG.Z,{children:(0,a.jsx)(eB.Z,{colSpan:9,className:"text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-4",children:[(0,a.jsx)(ep.Z,{className:"text-lg font-medium mb-2",children:"No teams found"}),(0,a.jsx)(ep.Z,{className:"text-sm",children:"Adjust your filters or create a new team"})]})})})})]}),(0,a.jsx)(sk.Z,{isOpen:er,title:"Delete Team?",alertMessage:(null==eg?void 0:null===(t=eg.keys)||void 0===t?void 0:t.length)===0?void 0:"Warning: This team has ".concat(null==eg?void 0:null===(s=eg.keys)||void 0===s?void 0:s.length," keys associated with it. Deleting the team will also delete all associated keys. This action is irreversible."),message:"Are you sure you want to delete this team and all its keys? This action cannot be undone.",resourceInformationTitle:"Team Information",resourceInformation:[{label:"Team ID",value:null==eg?void 0:eg.team_id,code:!0},{label:"Team Name",value:null==eg?void 0:eg.team_alias},{label:"Keys",value:null==eg?void 0:null===(l=eg.keys)||void 0===l?void 0:l.length},{label:"Members",value:null==eg?void 0:null===(r=eg.members_with_roles)||void 0===r?void 0:r.length}],requiredConfirmation:null==eg?void 0:eg.team_alias,onCancel:()=>{eh(!1),ef(null)},onOk:e4,confirmLoading:e_})]})})})]}),(0,a.jsx)(eu.Z,{children:(0,a.jsx)(ss.Z,{accessToken:c,userID:u})}),(0,en.P4)(x||"")&&(0,a.jsx)(eu.Z,{children:(0,a.jsx)(sl.Z,{accessToken:c,userID:u||"",userRole:x||""})})]})]}),sP(x,u,p)&&(0,a.jsx)(h.Z,{title:"Create Team",open:J,width:1e3,footer:null,onOk:()=>{$(!1),M.resetFields(),eF([]),eJ({}),eQ(null),e0(e=>e+1)},onCancel:()=>{$(!1),M.resetFields(),eF([]),eJ({}),eQ(null),e0(e=>e+1)},children:(0,a.jsxs)(f.Z,{form:M,onFinish:e5,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z.Item,{label:"Team Name",name:"team_alias",rules:[{required:!0,message:"Please input a team name"}],children:(0,a.jsx)(eD.Z,{placeholder:""})}),(()=>{let e=sT(x,u,p),t="Admin"!==x,s=1===e.length,l=0===e.length;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{children:["Organization"," ",(0,a.jsx)(ee.Z,{title:(0,a.jsxs)("span",{children:["Organizations can have multiple teams. Learn more about"," ",(0,a.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/user_management_heirarchy",target:"_blank",rel:"noopener noreferrer",style:{color:"#1890ff",textDecoration:"underline"},onClick:e=>e.stopPropagation(),children:"user management hierarchy"})]}),children:(0,a.jsx)(Z.Z,{style:{marginLeft:"4px"}})})]}),name:"organization_id",initialValue:N?N.organization_id:null,className:"mt-8",rules:t?[{required:!0,message:"Please select an organization"}]:[],help:s?"You can only create teams within this organization":t?"required":"",children:(0,a.jsx)(v.default,{showSearch:!0,allowClear:!t,disabled:s,placeholder:l?"No organizations available":"Search or select an Organization",onChange:t=>{M.setFieldValue("organization_id",t),C((null==e?void 0:e.find(e=>e.organization_id===t))||null)},filterOption:(e,t)=>{var s;return!!t&&((null===(s=t.children)||void 0===s?void 0:s.toString())||"").toLowerCase().includes(e.toLowerCase())},optionFilterProp:"children",children:null==e?void 0:e.map(e=>(0,a.jsxs)(v.default.Option,{value:e.organization_id,children:[(0,a.jsx)("span",{className:"font-medium",children:e.organization_alias})," ",(0,a.jsxs)("span",{className:"text-gray-500",children:["(",e.organization_id,")"]})]},e.organization_id))})}),t&&!s&&e.length>1&&(0,a.jsx)("div",{className:"mb-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,a.jsx)(ep.Z,{className:"text-blue-800 text-sm",children:"Please select an organization to create a team for. You can only create teams within organizations where you are an admin."})})]})})(),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{children:["Models"," ",(0,a.jsx)(ee.Z,{title:"These are the models that your selected team has access to",children:(0,a.jsx)(Z.Z,{style:{marginLeft:"4px"}})})]}),rules:[{required:!0,message:"Please select at least one model"}],name:"models",children:(0,a.jsx)(sC.q,{value:M.getFieldValue("models")||[],onChange:e=>M.setFieldValue("models",e),organizationID:M.getFieldValue("organization_id"),options:{includeSpecialOptions:!0,showAllProxyModelsOverride:!M.getFieldValue("organization_id")},context:"team",dataTestId:"create-team-models-select"})}),(0,a.jsx)(f.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,a.jsx)(sN.Z,{step:.01,precision:2,width:200})}),(0,a.jsx)(f.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,a.jsxs)(v.default,{defaultValue:null,placeholder:"n/a",children:[(0,a.jsx)(v.default.Option,{value:"24h",children:"daily"}),(0,a.jsx)(v.default.Option,{value:"7d",children:"weekly"}),(0,a.jsx)(v.default.Option,{value:"30d",children:"monthly"})]})}),(0,a.jsx)(f.Z.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,a.jsx)(sN.Z,{step:1,width:400})}),(0,a.jsx)(f.Z.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,a.jsx)(sN.Z,{step:1,width:400})}),(0,a.jsxs)(eI.Z,{className:"mt-20 mb-8",onClick:()=>{eH||(e1(),eW(!0))},children:[(0,a.jsx)(eL.Z,{children:(0,a.jsx)("b",{children:"Additional Settings"})}),(0,a.jsxs)(eA.Z,{children:[(0,a.jsx)(f.Z.Item,{label:"Team ID",name:"team_id",help:"ID of the team you want to create. If not provided, it will be generated automatically.",children:(0,a.jsx)(eD.Z,{onChange:e=>{e.target.value=e.target.value.trim()}})}),(0,a.jsx)(f.Z.Item,{label:"Team Member Budget (USD)",name:"team_member_budget",normalize:e=>e?Number(e):void 0,tooltip:"This is the individual budget for a user in the team.",children:(0,a.jsx)(sN.Z,{step:.01,precision:2,width:200})}),(0,a.jsx)(f.Z.Item,{label:"Team Member Key Duration (eg: 1d, 1mo)",name:"team_member_key_duration",tooltip:"Set a limit to the duration of a team member's key. Format: 30s (seconds), 30m (minutes), 30h (hours), 30d (days), 1mo (month)",children:(0,a.jsx)(eD.Z,{placeholder:"e.g., 30d"})}),(0,a.jsx)(f.Z.Item,{label:"Team Member RPM Limit",name:"team_member_rpm_limit",tooltip:"The RPM (Requests Per Minute) limit for individual team members",children:(0,a.jsx)(sN.Z,{step:1,width:400})}),(0,a.jsx)(f.Z.Item,{label:"Team Member TPM Limit",name:"team_member_tpm_limit",tooltip:"The TPM (Tokens Per Minute) limit for individual team members",children:(0,a.jsx)(sN.Z,{step:1,width:400})}),(0,a.jsx)(f.Z.Item,{label:"Metadata",name:"metadata",help:"Additional team metadata. Enter metadata as JSON object.",children:(0,a.jsx)(y.default.TextArea,{rows:4})}),(0,a.jsx)(f.Z.Item,{label:"Secret Manager Settings",name:"secret_manager_settings",help:g?"Enter secret manager configuration as a JSON object.":"Premium feature - Upgrade to manage secret manager settings.",rules:[{validator:async(e,t)=>{if(!t)return Promise.resolve();try{return JSON.parse(t),Promise.resolve()}catch(e){return Promise.reject(Error("Please enter valid JSON"))}}}],children:(0,a.jsx)(y.default.TextArea,{rows:4,placeholder:'{"namespace": "admin", "mount": "secret", "path_prefix": "litellm"}',disabled:!g})}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{children:["Guardrails"," ",(0,a.jsx)(ee.Z,{title:"Setup your first guardrail",children:(0,a.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(Z.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-8",help:"Select existing guardrails or enter new ones",children:(0,a.jsx)(v.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter guardrails",options:ek.map(e=>({value:e,label:e}))})}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{children:["Disable Global Guardrails"," ",(0,a.jsx)(ee.Z,{title:"When enabled, this team will bypass any guardrails configured to run on every request (global guardrails)",children:(0,a.jsx)(Z.Z,{style:{marginLeft:"4px"}})})]}),name:"disable_global_guardrails",className:"mt-4",valuePropName:"checked",help:"Bypass global guardrails for this team",children:(0,a.jsx)(I.Z,{disabled:!g,checkedChildren:g?"Yes":"Premium feature - Upgrade to disable global guardrails by team",unCheckedChildren:g?"No":"Premium feature - Upgrade to disable global guardrails by team"})}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{children:["Policies"," ",(0,a.jsx)(ee.Z,{title:"Apply policies to this team to control guardrails and other settings",children:(0,a.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/guardrail_policies",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(Z.Z,{style:{marginLeft:"4px"}})})})]}),name:"policies",className:"mt-8",help:"Select existing policies or enter new ones",children:(0,a.jsx)(v.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter policies",options:eC.map(e=>({value:e,label:e}))})}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{children:["Access Groups"," ",(0,a.jsx)(ee.Z,{title:"Assign access groups to this team. Access groups control which models, MCP servers, and agents this team can use",children:(0,a.jsx)(Z.Z,{style:{marginLeft:"4px"}})})]}),name:"access_group_ids",className:"mt-8",help:"Select access groups to assign to this team",children:(0,a.jsx)(sf.Z,{placeholder:"Select access groups (optional)"})}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{children:["Allowed Vector Stores"," ",(0,a.jsx)(ee.Z,{title:"Select which vector stores this team can access by default. Leave empty for access to all vector stores",children:(0,a.jsx)(Z.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-8",help:"Select vector stores this team can access. Leave empty for access to all vector stores",children:(0,a.jsx)(sZ.Z,{onChange:e=>M.setFieldValue("allowed_vector_store_ids",e),value:M.getFieldValue("allowed_vector_store_ids"),accessToken:c||"",placeholder:"Select vector stores (optional)"})})]})]}),(0,a.jsxs)(eI.Z,{className:"mt-8 mb-8",children:[(0,a.jsx)(eL.Z,{children:(0,a.jsx)("b",{children:"MCP Settings"})}),(0,a.jsxs)(eA.Z,{children:[(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{children:["Allowed MCP Servers"," ",(0,a.jsx)(ee.Z,{title:"Select which MCP servers or access groups this team can access",children:(0,a.jsx)(Z.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",className:"mt-4",help:"Select MCP servers or access groups this team can access",children:(0,a.jsx)(K.Z,{onChange:e=>M.setFieldValue("allowed_mcp_servers_and_groups",e),value:M.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:c||"",placeholder:"Select MCP servers or access groups (optional)"})}),(0,a.jsx)(f.Z.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,a.jsx)(y.default,{type:"hidden"})}),(0,a.jsx)(f.Z.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.allowed_mcp_servers_and_groups!==t.allowed_mcp_servers_and_groups||e.mcp_tool_permissions!==t.mcp_tool_permissions,children:()=>{var e;return(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(H.Z,{accessToken:c||"",selectedServers:(null===(e=M.getFieldValue("allowed_mcp_servers_and_groups"))||void 0===e?void 0:e.servers)||[],toolPermissions:M.getFieldValue("mcp_tool_permissions")||{},onChange:e=>M.setFieldsValue({mcp_tool_permissions:e})})})}})]})]}),(0,a.jsxs)(eI.Z,{className:"mt-8 mb-8",children:[(0,a.jsx)(eL.Z,{children:(0,a.jsx)("b",{children:"Agent Settings"})}),(0,a.jsx)(eA.Z,{children:(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{children:["Allowed Agents"," ",(0,a.jsx)(ee.Z,{title:"Select which agents or access groups this team can access",children:(0,a.jsx)(Z.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_agents_and_groups",className:"mt-4",help:"Select agents or access groups this team can access",children:(0,a.jsx)(sj.Z,{onChange:e=>M.setFieldValue("allowed_agents_and_groups",e),value:M.getFieldValue("allowed_agents_and_groups"),accessToken:c||"",placeholder:"Select agents or access groups (optional)"})})})]}),(0,a.jsxs)(eI.Z,{className:"mt-8 mb-8",children:[(0,a.jsx)(eL.Z,{children:(0,a.jsx)("b",{children:"Logging Settings"})}),(0,a.jsx)(eA.Z,{children:(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(sv.Z,{value:ez,onChange:eF,premiumUser:g})})})]}),(0,a.jsxs)(eI.Z,{className:"mt-8 mb-8",children:[(0,a.jsx)(eL.Z,{children:(0,a.jsx)("b",{children:"Router Settings"})}),(0,a.jsx)(eA.Z,{children:(0,a.jsx)("div",{className:"mt-4 w-full",children:(0,a.jsx)(sb.Z,{accessToken:c||"",value:e$||void 0,onChange:eQ,modelData:ea.length>0?{data:ea.map(e=>({model_name:e}))}:void 0},eX)})})]},"router-settings-accordion-".concat(eX)),(0,a.jsxs)(eI.Z,{className:"mt-8 mb-8",children:[(0,a.jsx)(eL.Z,{children:(0,a.jsx)("b",{children:"Model Aliases"})}),(0,a.jsx)(eA.Z,{children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(ep.Z,{className:"text-sm text-gray-600 mb-4",children:"Create custom aliases for models that can be used by team members in API calls. This allows you to create shortcuts for specific models."}),(0,a.jsx)(sy.Z,{accessToken:c||"",initialModelAliases:eY,onAliasUpdate:eJ,showExampleConfig:!1})]})})]})]}),(0,a.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,a.jsx)(A.ZP,{htmlType:"submit",children:"Create Team"})})]})})]})})})},sL=s(71098),sM=s(37636),sD=s(40562),sE=s(78093),sz=s(87526),sF=s(33145),sq=s(29),sR=s.n(sq);let{Text:sO}=sg.default;var sB=e=>{let{litellmParams:t,accessToken:s,onTestComplete:l}=e,[r,i]=(0,o.useState)(!0),[d,c]=(0,o.useState)(null),[m,u]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{i(!0);try{let e=await (0,n.testSearchToolConnection)(s,t);c(e),"success"===e.status&&eZ.ZP.success("Connection test successful!")}catch(e){c({status:"error",message:e instanceof Error?e.message:"Unknown error occurred",error_type:"NetworkError"})}finally{i(!1),l&&l()}})()},[s,t,l]);let x=(null==d?void 0:d.message)?(e=>{if(!e)return"Unknown error";let t=e.split("stack trace:")[0].trim().replace(/^litellm\.(.*?)Error:\s*/,"").replace(/^AuthenticationError:\s*/,"");if(t.includes("<html>")||t.includes("<!DOCTYPE")){let e=t.match(/<title>(.*?)<\/title>/);return e?e[1]:t.includes("401")||t.includes("Authorization Required")?"Authentication failed: Invalid API key or credentials":"Authentication error - please check your API key"}return t.length>200?t.substring(0,200)+"...":t})(d.message):"Unknown error";return r?(0,a.jsx)("div",{style:{padding:"24px",borderRadius:"8px",backgroundColor:"#fff"},children:(0,a.jsxs)("div",{style:{textAlign:"center",padding:"32px 20px"},className:"jsx-dc9a0e2d897fe63b",children:[(0,a.jsx)("div",{style:{marginBottom:"16px"},className:"jsx-dc9a0e2d897fe63b loading-spinner",children:(0,a.jsx)("div",{style:{border:"3px solid #f3f3f3",borderTop:"3px solid #1890ff",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite",margin:"0 auto"},className:"jsx-dc9a0e2d897fe63b"})}),(0,a.jsxs)(sO,{style:{fontSize:"16px"},children:["Testing connection to ",t.search_provider||"search provider","..."]}),(0,a.jsx)(sR(),{id:"dc9a0e2d897fe63b",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}):d?(0,a.jsxs)("div",{style:{padding:"24px",borderRadius:"8px",backgroundColor:"#fff"},children:["success"===d.status?(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"32px 20px"},children:[(0,a.jsx)("div",{style:{color:"#52c41a",fontSize:"24px",display:"flex",alignItems:"center"},children:(0,a.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"check-circle",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"})})}),(0,a.jsxs)("div",{style:{marginLeft:"12px"},children:[(0,a.jsxs)(sO,{type:"success",style:{fontSize:"18px",fontWeight:500,display:"block"},children:["Connection to ",t.search_provider," successful!"]}),d.test_query&&(0,a.jsxs)(sO,{style:{fontSize:"14px",color:"#666",marginTop:"8px",display:"block"},children:["Test query: ",(0,a.jsx)("code",{style:{backgroundColor:"#f0f0f0",padding:"2px 6px",borderRadius:"4px"},children:d.test_query})]}),void 0!==d.results_count&&(0,a.jsxs)(sO,{style:{fontSize:"14px",color:"#666",display:"block"},children:["Results retrieved: ",d.results_count]})]})]}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[(0,a.jsx)(ea.Z,{style:{color:"#ff4d4f",fontSize:"24px",marginRight:"12px"}}),(0,a.jsxs)(sO,{type:"danger",style:{fontSize:"18px",fontWeight:500},children:["Connection to ",t.search_provider||"search provider"," failed"]})]}),(0,a.jsxs)("div",{style:{backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:"8px",padding:"16px",marginBottom:"20px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.03)"},children:[(0,a.jsxs)(sO,{strong:!0,style:{display:"block",marginBottom:"8px"},children:["Error:"," "]}),(0,a.jsx)(sO,{type:"danger",style:{fontSize:"14px",lineHeight:"1.5"},children:x}),d.error_type&&(0,a.jsx)("div",{style:{marginTop:"8px"},children:(0,a.jsxs)(sO,{style:{fontSize:"13px",color:"#666"},children:["Error type:"," ",(0,a.jsx)("code",{style:{backgroundColor:"#ffebee",padding:"2px 6px",borderRadius:"4px",color:"#d32f2f"},children:d.error_type})]})}),d.message&&(0,a.jsx)("div",{style:{marginTop:"12px"},children:(0,a.jsx)(A.ZP,{type:"link",onClick:()=>u(!m),style:{paddingLeft:0,height:"auto"},children:m?"Hide Details":"Show Details"})})]}),m&&(0,a.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,a.jsx)(sO,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"Full Error Details"}),(0,a.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"200px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:d.message})]}),(0,a.jsxs)("div",{style:{backgroundColor:"#fffbf0",border:"1px solid #ffe58f",borderLeft:"4px solid #faad14",borderRadius:"8px",padding:"16px"},children:[(0,a.jsx)(sO,{strong:!0,style:{display:"block",marginBottom:"8px",color:"#d48806"},children:"Troubleshooting tips:"}),(0,a.jsxs)("ul",{style:{margin:"8px 0",paddingLeft:"20px",color:"#ad6800"},children:[(0,a.jsx)("li",{style:{marginBottom:"6px"},children:"Verify your API key is correct and active"}),(0,a.jsx)("li",{style:{marginBottom:"6px"},children:"Check if the search provider service is operational"}),(0,a.jsx)("li",{style:{marginBottom:"6px"},children:"Ensure you have sufficient credits/quota with the provider"}),(0,a.jsx)("li",{style:{marginBottom:"6px"},children:"Review the provider's documentation for any additional requirements"})]})]})]})}),(0,a.jsx)(b.Z,{style:{margin:"24px 0 16px"}}),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,a.jsx)(A.ZP,{type:"link",href:"https://docs.litellm.ai/docs/search",target:"_blank",icon:(0,a.jsx)(Z.Z,{}),children:"View Search Documentation"})})]}):null};let{TextArea:sU}=y.default,sV=e=>"".concat("../ui/assets/logos/").concat(e,".png"),sG=e=>{let{providerName:t,displayName:s}=e;return(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,a.jsx)(sF.default,{src:sV(t),alt:"",width:20,height:20,style:{marginRight:"8px",objectFit:"contain"},onError:e=>{e.currentTarget.style.display="none"}}),(0,a.jsx)("span",{children:s})]})};var sK=e=>{let{userRole:t,accessToken:s,onCreateSuccess:l,isModalVisible:r,setModalVisible:i}=e,[d]=f.Z.useForm(),[c,m]=(0,o.useState)(!1),[u,x]=(0,o.useState)({}),[p,g]=(0,o.useState)(!1),[j,y]=(0,o.useState)(!1),[b,_]=(0,o.useState)(""),{data:N,isLoading:k}=(0,tL.a)({queryKey:["searchProviders"],queryFn:()=>{if(!s)throw Error("Access Token required");return(0,n.fetchAvailableSearchProviders)(s)},enabled:!!s&&r}),w=(null==N?void 0:N.providers)||[],C=async e=>{m(!0);try{let t={search_tool_name:e.search_tool_name,litellm_params:{search_provider:e.search_provider,api_key:e.api_key,api_base:e.api_base,timeout:e.timeout?parseFloat(e.timeout):void 0,max_retries:e.max_retries?parseInt(e.max_retries):void 0},search_tool_info:e.description?{description:e.description}:void 0};if(console.log("Creating search tool with payload:",t),null!=s){let e=await (0,n.createSearchTool)(s,t);eZ.ZP.success("Search tool created successfully"),d.resetFields(),x({}),i(!1),l(e)}}catch(e){eZ.ZP.error("Error creating search tool: "+e)}finally{m(!1)}},S=async()=>{try{await d.validateFields(["search_provider","api_key"]),y(!0),_("test-".concat(Date.now())),g(!0)}catch(e){eZ.ZP.error("Please fill in Search Provider and API Key before testing")}};return(o.useEffect(()=>{r||x({})},[r]),(0,en.tY)(t))?(0,a.jsxs)(h.Z,{title:(0,a.jsxs)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD0D"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Search Tool"})]}),open:r,width:800,onCancel:()=>{d.resetFields(),x({}),i(!1)},footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:[(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(f.Z,{form:d,onFinish:C,onValuesChange:(e,t)=>x(t),layout:"vertical",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Search Tool Name",(0,a.jsx)(ee.Z,{title:"A unique name to identify this search tool configuration (e.g., 'perplexity-search', 'tavily-news-search').",children:(0,a.jsx)(Z.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"search_tool_name",rules:[{required:!0,message:"Please enter a search tool name"},{pattern:/^[a-zA-Z0-9_-]+$/,message:"Name can only contain letters, numbers, hyphens, and underscores"}],children:(0,a.jsx)(eQ.o,{placeholder:"e.g., perplexity-search, my-tavily-tool",className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"})}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Search Provider",(0,a.jsx)(ee.Z,{title:"Select the search provider you want to use. Each provider has different capabilities and pricing.",children:(0,a.jsx)(Z.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"search_provider",rules:[{required:!0,message:"Please select a search provider"}],children:(0,a.jsx)(v.default,{placeholder:"Select a search provider",className:"rounded-lg",size:"large",loading:k,showSearch:!0,optionFilterProp:"children",optionLabelProp:"label",children:w.map(e=>(0,a.jsx)(v.default.Option,{value:e.provider_name,label:(0,a.jsx)(sG,{providerName:e.provider_name,displayName:e.ui_friendly_name}),children:(0,a.jsx)(sG,{providerName:e.provider_name,displayName:e.ui_friendly_name})},e.provider_name))})}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["API Key",(0,a.jsx)(ee.Z,{title:"The API key for authenticating with the search provider. This will be securely stored.",children:(0,a.jsx)(Z.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"api_key",rules:[{required:!1,message:"Please enter an API key"}],children:(0,a.jsx)(eQ.o,{type:"password",placeholder:"Enter your API key",className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"})}),(0,a.jsx)(f.Z.Item,{label:(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Description (Optional)"}),name:"description",children:(0,a.jsx)(sU,{rows:3,placeholder:"Brief description of this search tool's purpose",className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-gray-100",children:[(0,a.jsx)(ee.Z,{title:"Get help on our github",children:(0,a.jsx)(sg.default.Link,{href:"https://github.com/BerriAI/litellm/issues",target:"_blank",children:"Need Help?"})}),(0,a.jsxs)("div",{className:"space-x-2",children:[(0,a.jsx)(eQ.z,{onClick:S,loading:j,children:"Test Connection"}),(0,a.jsx)(eQ.z,{loading:c,type:"submit",children:"Add Search Tool"})]})]})]})}),(0,a.jsx)(h.Z,{title:"Connection Test Results",open:p,onCancel:()=>{g(!1),y(!1)},footer:[(0,a.jsx)(eQ.z,{onClick:()=>{g(!1),y(!1)},children:"Close"},"close")],width:700,children:p&&s&&(0,a.jsx)(sB,{litellmParams:{search_provider:u.search_provider,api_key:u.api_key,api_base:u.api_base},accessToken:s,onTestComplete:()=>y(!1)},b)})]}):null};let sH=(e,t,s,l)=>[{title:"Search Tool ID",dataIndex:"search_tool_id",key:"search_tool_id",render:(t,s)=>s.is_from_config?(0,a.jsx)("span",{className:"text-xs",children:"-"}):(0,a.jsx)("button",{onClick:()=>e(s.search_tool_id),className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left cursor-pointer max-w-40",children:(0,a.jsx)("span",{className:"truncate block",children:s.search_tool_id})})},{title:"Name",dataIndex:"search_tool_name",key:"search_tool_name",render:e=>(0,a.jsx)("span",{className:"font-medium",children:e})},{title:"Provider",key:"provider",render:(e,t)=>{let s=t.litellm_params.search_provider,r=l.find(e=>e.provider_name===s),n=(null==r?void 0:r.ui_friendly_name)||s;return(0,a.jsx)("span",{className:"text-sm",children:n})}},{title:"Created At",dataIndex:"created_at",key:"created_at",render:(e,t)=>(0,a.jsx)("span",{className:"text-xs",children:t.created_at?new Date(t.created_at).toLocaleDateString():"-"})},{title:"Updated At",dataIndex:"updated_at",key:"updated_at",render:(e,t)=>(0,a.jsx)("span",{className:"text-xs",children:t.updated_at?new Date(t.updated_at).toLocaleDateString():"-"})},{title:"Source",key:"source",render:(e,t)=>{var s;let l=null!==(s=t.is_from_config)&&void 0!==s&&s;return(0,a.jsx)(_.Z,{color:l?"default":"blue",children:l?"Config":"DB"})}},{title:"Actions",key:"actions",render:(e,l)=>{var r;let n=l.search_tool_id,i=null!==(r=l.is_from_config)&&void 0!==r&&r;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(sw.Z,{variant:"Edit",tooltipText:"Edit search tool",disabled:i,disabledTooltipText:"Config search tool cannot be edited on the dashboard. Please edit it from the config file.",onClick:()=>{n&&!i&&t(n)}}),(0,a.jsx)(sw.Z,{variant:"Delete",tooltipText:"Delete search tool",disabled:i,disabledTooltipText:"Config search tool cannot be deleted on the dashboard. Please delete it from the config file.",onClick:()=>{n&&!i&&s(n)}})]})}}];var sW=s(30401),sY=s(78867),sJ=s(29436);let{Text:s$}=sg.default,sQ=e=>{var t,s,l,r;let{searchToolName:i,accessToken:d,className:c=""}=e,[m,u]=(0,o.useState)(""),[x,p]=(0,o.useState)(!1),[h,g]=(0,o.useState)([]),[f,v]=(0,o.useState)({}),[b,_]=(0,o.useState)(!1),N=async()=>{if(!m.trim()){j.ZP.warning("Please enter a search query");return}p(!0);let e=performance.now();try{let t=await (0,n.searchToolQueryCall)(d,i,m),s=performance.now(),a={query:m,response:t,timestamp:Date.now(),latency:Math.round(s-e)};g(e=>[a,...e])}catch(e){console.error("Error querying search tool:",e),eZ.ZP.fromBackend("Failed to query search tool")}finally{p(!1)}},Z=e=>new Date(e).toLocaleString(),k=(e,t)=>{let s="".concat(e,"-").concat(t);v(e=>({...e,[s]:!e[s]}))},w=(0,a.jsx)(e9.Z,{style:{fontSize:24},spin:!0}),C=h.length>0?h[0]:null;return(0,a.jsxs)(eo.Z,{className:"mt-6",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(eh.Z,{children:"Test Search Tool"})}),(0,a.jsxs)("div",{className:"flex flex-col",style:{minHeight:"600px"},children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-stretch gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center flex-1 bg-white rounded-lg px-4 transition-all duration-200",style:{border:b?"2px solid #3b82f6":"2px solid #e5e7eb",boxShadow:b?"0 0 0 3px rgba(59, 130, 246, 0.1)":"0 1px 2px 0 rgba(0, 0, 0, 0.05)",height:"48px"},children:[(0,a.jsx)(sJ.Z,{className:"text-gray-400 mr-3",style:{fontSize:"18px"}}),(0,a.jsx)(y.default,{value:m,onChange:e=>u(e.target.value),onFocus:()=>_(!0),onBlur:()=>_(!1),onPressEnter:e=>{e.shiftKey||(e.preventDefault(),N())},placeholder:"Enter your search query...",disabled:x,bordered:!1,style:{fontSize:"15px",padding:0,height:"100%",boxShadow:"none"}})]}),(0,a.jsx)(A.ZP,{type:"primary",onClick:N,disabled:x||!m.trim(),icon:(0,a.jsx)(sJ.Z,{}),loading:x,style:{height:"48px",paddingLeft:"24px",paddingRight:"24px",borderRadius:"8px",fontWeight:500,fontSize:"15px",backgroundColor:x||!m.trim()?void 0:"#1890ff",borderColor:x||!m.trim()?void 0:"#1890ff",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},children:"Search"})]})}),(0,a.jsx)("div",{className:"flex-1",children:C||x?(0,a.jsxs)("div",{children:[x&&(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center py-16",children:[(0,a.jsx)(eg.Z,{indicator:w}),(0,a.jsx)(s$,{className:"mt-4 text-gray-600 font-medium",children:"Searching..."})]}),C&&!x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",style:{boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(s$,{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Search Query"}),(0,a.jsx)("div",{className:"text-base font-semibold text-gray-900 mt-1.5",children:C.query})]}),(0,a.jsxs)("div",{className:"text-right ml-4",children:[(0,a.jsx)(s$,{className:"text-xs text-gray-500",children:Z(C.timestamp)}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-blue-600",children:[(null===(s=C.response)||void 0===s?void 0:null===(t=s.results)||void 0===t?void 0:t.length)||0," ",(null===(r=C.response)||void 0===r?void 0:null===(l=r.results)||void 0===l?void 0:l.length)===1?"result":"results"]}),void 0!==C.latency&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"•"}),(0,a.jsxs)("div",{className:"text-sm font-semibold text-green-600",children:[C.latency,"ms"]})]})]})]})]})}),C.response&&C.response.results&&C.response.results.length>0?(0,a.jsx)("div",{className:"space-y-3",children:C.response.results.map((e,t)=>{let s=f["0-".concat(t)]||!1;return(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden transition-all duration-200",style:{boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},onMouseEnter:e=>{e.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",e.currentTarget.style.borderColor="#e0e7ff"},onMouseLeave:e=>{e.currentTarget.style.boxShadow="0 1px 2px 0 rgba(0, 0, 0, 0.05)",e.currentTarget.style.borderColor="#e5e7eb"},children:(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-2",children:[(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-lg font-semibold text-blue-600 hover:text-blue-700 flex-1 leading-snug",style:{textDecoration:"none"},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:e.title}),(0,a.jsx)(A.ZP,{type:"text",size:"small",className:"flex-shrink-0",icon:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),onClick:()=>window.open(e.url,"_blank"),style:{color:"#6b7280"}})]}),(0,a.jsx)("div",{className:"text-sm text-green-700 mb-3 truncate font-medium",children:e.url}),(0,a.jsx)("div",{className:"text-sm text-gray-700 leading-relaxed",children:s?e.snippet:"".concat(e.snippet.substring(0,200)).concat(e.snippet.length>200?"...":"")}),e.snippet.length>200&&(0,a.jsx)(A.ZP,{type:"link",size:"small",className:"mt-3 p-0 h-auto",onClick:()=>k(0,t),style:{fontSize:"13px",fontWeight:500,color:"#3b82f6"},children:s?"Show less":"Show more"})]})},t)})}):(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mx-auto mb-4",children:(0,a.jsx)(sJ.Z,{style:{fontSize:"24px",color:"#9ca3af"}})}),(0,a.jsx)(s$,{className:"text-gray-600 font-medium",children:"No results found"}),(0,a.jsx)(s$,{className:"text-sm text-gray-500 mt-1",children:"Try a different search query"})]})]}),h.length>1&&(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)(s$,{className:"text-sm font-semibold text-gray-700",children:"Previous Searches"}),(0,a.jsx)(A.ZP,{onClick:()=>{g([]),v({}),eZ.ZP.success("Search history cleared")},size:"small",type:"link",style:{fontSize:"13px",fontWeight:500},children:"Clear All"})]}),(0,a.jsx)("div",{className:"space-y-2",children:h.slice(1,6).map((e,t)=>{var s,l,r,n;return(0,a.jsxs)("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-100 hover:border-gray-300",onClick:()=>{u(e.query)},children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-800 truncate",children:e.query}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1.5 flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"font-medium text-blue-600",children:[(null===(l=e.response)||void 0===l?void 0:null===(s=l.results)||void 0===s?void 0:s.length)||0," ",(null===(n=e.response)||void 0===n?void 0:null===(r=n.results)||void 0===r?void 0:r.length)===1?"result":"results"]}),void 0!==e.latency&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{className:"font-medium text-green-600",children:[e.latency,"ms"]})]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:Z(e.timestamp)})]})]},t+1)})})]})]}):(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center p-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-24 h-24 rounded-full bg-gray-100 mb-6",children:(0,a.jsx)(sJ.Z,{style:{fontSize:"48px",color:"#9ca3af"}})}),(0,a.jsx)(s$,{className:"text-lg text-gray-600 font-medium",children:"Test your search tool"}),(0,a.jsx)(s$,{className:"text-sm text-gray-500 mt-2",children:"Enter a query above to see search results"})]})})]})]})},sX=e=>{var t;let{searchTool:s,onBack:l,isEditing:r,accessToken:n,availableProviders:i}=e,[d,c]=(0,o.useState)({}),m=async(e,t)=>{await (0,tt.vQ)(e)&&(c(e=>({...e,[t]:!0})),setTimeout(()=>{c(e=>({...e,[t]:!1}))},2e3))};return(0,a.jsxs)("div",{className:"p-4 max-w-full",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(ei.Z,{icon:ej.Z,variant:"light",className:"mb-4",onClick:l,children:"Back to All Search Tools"}),(0,a.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)(eh.Z,{children:s.search_tool_name}),(0,a.jsx)(A.ZP,{type:"text",size:"small",icon:d["search-tool-name"]?(0,a.jsx)(sW.Z,{size:12}):(0,a.jsx)(sY.Z,{size:12}),onClick:()=>m(s.search_tool_name,"search-tool-name"),className:"left-2 z-10 transition-all duration-200 ".concat(d["search-tool-name"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")})]}),(0,a.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)(ep.Z,{className:"text-gray-500 font-mono",children:s.search_tool_id}),(0,a.jsx)(A.ZP,{type:"text",size:"small",icon:d["search-tool-id"]?(0,a.jsx)(sW.Z,{size:12}):(0,a.jsx)(sY.Z,{size:12}),onClick:()=>m(s.search_tool_id,"search-tool-id"),className:"left-2 z-10 transition-all duration-200 ".concat(d["search-tool-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")})]})]})}),(0,a.jsxs)(t$.Z,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,a.jsxs)(eo.Z,{children:[(0,a.jsx)(ep.Z,{children:"Provider"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(eh.Z,{children:(e=>{let t=i.find(t=>t.provider_name===e);return(null==t?void 0:t.ui_friendly_name)||e})(s.litellm_params.search_provider)})})]}),(0,a.jsxs)(eo.Z,{children:[(0,a.jsx)(ep.Z,{children:"API Key"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(ep.Z,{children:s.litellm_params.api_key?"****":"Not set"})})]}),(0,a.jsxs)(eo.Z,{children:[(0,a.jsx)(ep.Z,{children:"Created At"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(ep.Z,{children:s.created_at?new Date(s.created_at).toLocaleString():"Unknown"})})]})]}),(null===(t=s.search_tool_info)||void 0===t?void 0:t.description)&&(0,a.jsxs)(eo.Z,{className:"mt-6",children:[(0,a.jsx)(ep.Z,{children:"Description"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(ep.Z,{children:s.search_tool_info.description})})]}),(0,a.jsx)("div",{className:"mt-6",children:n&&(0,a.jsx)(sQ,{searchToolName:s.search_tool_name,accessToken:n})})]})};var s0=e=>{var t;let{accessToken:s,userRole:l,userID:r}=e,{data:i,isLoading:d,refetch:c}=(0,tL.a)({queryKey:["searchTools"],queryFn:()=>{if(!s)throw Error("Access Token required");return(0,n.fetchSearchTools)(s).then(e=>e.search_tools||[])},enabled:!!s}),{data:m,isLoading:u}=(0,tL.a)({queryKey:["searchProviders"],queryFn:()=>{if(!s)throw Error("Access Token required");return(0,n.fetchAvailableSearchProviders)(s)},enabled:!!s}),x=(null==m?void 0:m.providers)||[],[p,g]=(0,o.useState)(null),[j,b]=(0,o.useState)(!1),[_,N]=(0,o.useState)(!1),[Z,k]=(0,o.useState)(null),[w,C]=(0,o.useState)(!1),[S,P]=(0,o.useState)(!1),[T,I]=(0,o.useState)(!1),[A]=f.Z.useForm(),L=o.useMemo(()=>sH(e=>{k(e),C(!1)},e=>{let t=null==i?void 0:i.find(t=>t.search_tool_id===e);if(t){var s;A.setFieldsValue({search_tool_name:t.search_tool_name,search_provider:t.litellm_params.search_provider,api_key:t.litellm_params.api_key,api_base:t.litellm_params.api_base,timeout:t.litellm_params.timeout,max_retries:t.litellm_params.max_retries,description:null===(s=t.search_tool_info)||void 0===s?void 0:s.description}),k(e),I(!0)}},M,x),[x,i,A]);function M(e){g(e),b(!0)}let D=async()=>{if(null!=p&&null!=s){N(!0);try{await (0,n.deleteSearchTool)(s,p),eZ.ZP.success("Deleted search tool successfully"),b(!1),g(null),c()}catch(e){console.error("Error deleting the search tool:",e),eZ.ZP.error("Failed to delete search tool")}finally{N(!1)}}},E=null==i?void 0:i.find(e=>e.search_tool_id===p),z=E?x.find(e=>e.provider_name===E.litellm_params.search_provider):null,F=async()=>{if(s&&Z)try{let e=await A.validateFields(),t={search_tool_name:e.search_tool_name,litellm_params:{search_provider:e.search_provider,api_key:e.api_key,api_base:e.api_base,timeout:e.timeout?parseFloat(e.timeout):void 0,max_retries:e.max_retries?parseInt(e.max_retries):void 0},search_tool_info:e.description?{description:e.description}:void 0};await (0,n.updateSearchTool)(s,Z,t),eZ.ZP.success("Search tool updated successfully"),I(!1),A.resetFields(),k(null),c()}catch(e){console.error("Failed to update search tool:",e),eZ.ZP.error("Failed to update search tool")}};return s&&l&&r?(0,a.jsxs)("div",{className:"w-full h-full p-6",children:[(0,a.jsx)(sk.Z,{isOpen:j,title:"Delete Search Tool",message:"Are you sure you want to delete this search tool? This action cannot be undone.",resourceInformationTitle:"Search Tool Information",resourceInformation:E?[{label:"Name",value:E.search_tool_name},{label:"ID",value:E.search_tool_id,code:!0},{label:"Provider",value:(null==z?void 0:z.ui_friendly_name)||E.litellm_params.search_provider},{label:"Description",value:(null===(t=E.search_tool_info)||void 0===t?void 0:t.description)||"-"}]:[],onCancel:()=>{b(!1),g(null)},onOk:D,confirmLoading:_}),(0,a.jsx)(sK,{userRole:l,accessToken:s,onCreateSuccess:e=>{P(!1),c()},isModalVisible:S,setModalVisible:P}),(0,a.jsx)(h.Z,{title:"Edit Search Tool",open:T,onOk:F,onCancel:()=>{I(!1),A.resetFields(),k(null)},width:600,children:(0,a.jsxs)(f.Z,{form:A,layout:"vertical",children:[(0,a.jsx)(f.Z.Item,{name:"search_tool_name",label:"Search Tool Name",rules:[{required:!0,message:"Please enter a search tool name"}],children:(0,a.jsx)(y.default,{placeholder:"e.g., my-perplexity-search"})}),(0,a.jsx)(f.Z.Item,{name:"search_provider",label:"Search Provider",rules:[{required:!0,message:"Please select a search provider"}],children:(0,a.jsx)(v.default,{placeholder:"Select a search provider",loading:u,children:x.map(e=>(0,a.jsx)(v.default.Option,{value:e.provider_name,children:e.ui_friendly_name},e.provider_name))})}),(0,a.jsx)(f.Z.Item,{name:"api_key",label:"API Key",extra:"API key for the search provider",children:(0,a.jsx)(y.default.Password,{placeholder:"Enter API key"})}),(0,a.jsx)(f.Z.Item,{name:"description",label:"Description",children:(0,a.jsx)(y.default.TextArea,{rows:3,placeholder:"Description of this search tool"})})]})}),(0,a.jsx)(eh.Z,{children:"Search Tools"}),(0,a.jsx)(ep.Z,{className:"text-tremor-content mt-2",children:"Configure and manage your search providers"}),(0,en.tY)(l)&&(0,a.jsx)(ei.Z,{className:"mt-4 mb-4",onClick:()=>P(!0),children:"+ Add New Search Tool"}),(0,a.jsx)(()=>Z?(0,a.jsx)(sX,{searchTool:(null==i?void 0:i.find(e=>e.search_tool_id===Z))||{search_tool_id:"",search_tool_name:"",litellm_params:{search_provider:""}},onBack:()=>{C(!1),k(null),c()},isEditing:w,accessToken:s,availableProviders:x}):(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(eg.Z,{spinning:d,indicator:(0,a.jsx)(e9.Z,{spin:!0}),size:"large",children:(0,a.jsx)(e4.Z,{bordered:!0,dataSource:i||[],columns:L,rowKey:e=>e.search_tool_id||e.search_tool_name,pagination:!1,locale:{emptyText:"No search tools configured"},size:"small"})})}),{})]}):(console.log("Missing required authentication parameters",{accessToken:s,userRole:l,userID:r}),(0,a.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Missing required authentication parameters."}))},s1=s(89264),s2=s(11),s4=s(32489),s5=s(23133),s6=s(9245);function s3(e){let{onOpen:t,onDismiss:s,isVisible:l,title:r,description:n,buttonText:i,icon:d,accentColor:c,buttonStyle:m}=e,u=(0,s5.w)(),[x,p]=(0,o.useState)(100),[h,g]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{if(!l){p(100),g(!1);return}let e=Date.now(),t=setInterval(()=>{let s=Math.max(0,100-(Date.now()-e)/15e3*100);p(s),s<=0&&clearInterval(t)},50);return()=>clearInterval(t)},[l]),(0,o.useEffect)(()=>{if(h){let e=setTimeout(()=>{g(!1),s()},5e3);return()=>clearTimeout(e)}},[h,s]),h)?(0,a.jsx)("div",{className:"fixed bottom-6 right-6 z-40 w-80 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden transform transition-all duration-300 ease-out ".concat(l?"translate-y-0 opacity-100 scale-100":"translate-y-4 opacity-0 scale-95"),children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(sW.Z,{className:"h-5 w-5 text-green-600"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("p",{className:"text-sm text-gray-700 font-medium",children:"Got it, we will not ask again. Reactivate this at any time in the User Menu."})})]})})}):!l||u?null:(0,a.jsxs)("div",{className:"fixed bottom-6 right-6 z-40 w-80 bg-white rounded-lg shadow-xl border border-gray-200 overflow-hidden transform transition-all duration-300 ease-out ".concat(l?"translate-y-0 opacity-100 scale-100":"translate-y-4 opacity-0 scale-95"),children:[(0,a.jsx)("div",{className:"h-1 bg-gray-100 w-full",children:(0,a.jsx)("div",{className:"h-full transition-all duration-100 ease-linear",style:{width:"".concat(x,"%"),backgroundColor:c}})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",style:{color:c},children:[(0,a.jsx)(d,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold text-sm",children:r})]}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors p-0.5 rounded hover:bg-gray-100",children:(0,a.jsx)(s4.Z,{className:"h-4 w-4"})})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:n}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.ZP,{type:"primary",block:!0,onClick:t,style:m,children:i}),(0,a.jsx)(A.ZP,{variant:"outlined",danger:!0,block:!0,onClick:()=>{(0,s6.D$)("disableShowPrompts","true"),(0,s6.nO)("disableShowPrompts"),g(!0)},className:"text-xs",children:"Don't ask me again"})]})]})]})}function s8(e){let{onOpen:t,onDismiss:s,isVisible:l}=e;return(0,a.jsx)(s3,{onOpen:t,onDismiss:s,isVisible:l,title:"Quick feedback",description:"Help us improve LiteLLM! Share your experience in 5 quick questions.",buttonText:"Share feedback",icon:s2.Z,accentColor:"#3b82f6"})}var s9=s(32660),s7=s(76858),ae=s(55590),at=s(61994),as=s(68565);let aa=[{id:"oss_adoption",label:"OSS Adoption",description:"Stars, contributors, forks, community support"},{id:"ai_integration",label:"AI Integration",description:"LiteLLM had the logging/guardrail integration we needed - Langfuse, OTEL, S3 logging, Azure Content Safety guardrails"},{id:"unified_api",label:"Unified API",description:"LiteLLM had the best OpenAI-compatible API across providers - OpenAI, Anthropic, Gemini, etc."},{id:"breadth_of_models",label:"Breadth of Models/Providers",description:"LiteLLM had the provider + endpoint combinations we needed - /ocr endpoint with Mistral OCR, /batches endppint with Bedrock API, etc."},{id:"other",label:"Other",description:"Something else not listed above"}];function al(e){let{isOpen:t,onClose:s,onComplete:l}=e,[r,n]=(0,o.useState)(1),[i,d]=(0,o.useState)({usingAtCompany:null,companyName:"",startDate:"",reasons:[],otherReason:"",email:""}),[c,m]=(0,o.useState)(!1),u=!0===i.usingAtCompany?5:4;if(!t)return null;let x=async()=>{m(!0);try{let e={oss_adoption:"OSS Adoption (stars, contributors, forks)",ai_integration:"AI Integration (Langfuse, OTEL, S3, Azure Content Safety)",unified_api:"Unified API (OpenAI-compatible)",breadth_of_models:"Breadth of Models/Providers (/ocr, /batches, Bedrock, Azure OCR)"},t=i.reasons.map(t=>"other"===t&&i.otherReason?"Other: ".concat(i.otherReason):e[t]||t),s=new URLSearchParams({"entry.2015264290":i.usingAtCompany?"Yes":"No","entry.1876243786":i.companyName||"","entry.1282591459":i.startDate,"entry.393456108":t.join(", "),"entry.928142208":i.email||""});await fetch("https://feedback.litellm.ai/survey",{method:"POST",mode:"no-cors",body:s})}catch(e){console.error("Failed to submit survey:",e)}m(!1),l()},p=(e,t)=>{d(s=>({...s,[e]:t}))},h=e=>{d(t=>({...t,reasons:t.reasons.includes(e)?t.reasons.filter(t=>t!==e):[...t.reasons,e]}))},g=()=>{if(!1===i.usingAtCompany){if(1===r)return 1;if(3===r)return 2;if(4===r)return 3;if(5===r)return 4}return r},f=5===r;return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:s}),(0,a.jsxs)("div",{className:"relative w-full max-w-lg bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] transform transition-all duration-300 ease-out",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gray-50/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-blue-600",children:[(0,a.jsx)(s2.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold text-sm tracking-wide uppercase",children:"Quick Feedback"})]}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",children:(0,a.jsx)(s4.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)(as.Z,{percent:g()/u*100,showInfo:!1,strokeColor:"#2563eb",className:"m-0"}),(0,a.jsx)("div",{className:"p-8 flex-1 overflow-y-auto",children:1===r?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Are you using LiteLLM at your company?"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Help us understand how our product is being used in professional environments."}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4",children:[(0,a.jsxs)("button",{onClick:()=>p("usingAtCompany",!0),className:"p-6 rounded-lg border-2 text-left transition-all ".concat(!0===i.usingAtCompany?"border-blue-600 bg-blue-50 ring-1 ring-blue-600":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),children:[(0,a.jsx)("span",{className:"block text-lg font-semibold text-gray-900 mb-1",children:"Yes"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"We use it for work"})]}),(0,a.jsxs)("button",{onClick:()=>p("usingAtCompany",!1),className:"p-6 rounded-lg border-2 text-left transition-all ".concat(!1===i.usingAtCompany?"border-blue-600 bg-blue-50 ring-1 ring-blue-600":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),children:[(0,a.jsx)("span",{className:"block text-lg font-semibold text-gray-900 mb-1",children:"No"}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Personal project / Hobby"})]})]})]}):2===r&&!0===i.usingAtCompany?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"What company are you using LiteLLM at?"}),(0,a.jsx)("p",{className:"text-gray-500",children:"This helps us understand our user base better."}),(0,a.jsx)(y.default,{size:"large",placeholder:"Enter your company name",value:i.companyName,onChange:e=>p("companyName",e.target.value),autoFocus:!0})]}):3===r?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"When did you start using LiteLLM?"}),(0,a.jsx)(N.ZP.Group,{value:i.startDate,onChange:e=>p("startDate",e.target.value),className:"w-full",children:(0,a.jsx)(ae.Z,{direction:"vertical",className:"w-full",children:["Less than a month ago","1-3 months ago","3-6 months ago","More than 6 months ago"].map(e=>(0,a.jsx)("label",{className:"flex items-center p-4 rounded-lg border cursor-pointer transition-all w-full ".concat(i.startDate===e?"border-blue-600 bg-blue-50 ring-1 ring-blue-600":"border-gray-200 hover:bg-gray-50"),children:(0,a.jsx)(N.ZP,{value:e,children:e})},e))})})]}):4===r?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Why did you pick LiteLLM over other AI Gateways?"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Select all that apply."}),(0,a.jsx)("div",{className:"space-y-3",children:aa.map(e=>{let t=i.reasons.includes(e.id);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{role:"button",tabIndex:0,onClick:()=>h(e.id),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),h(e.id))},className:"flex items-start p-4 rounded-lg border cursor-pointer transition-all ".concat(t?"border-blue-600 bg-blue-50 ring-1 ring-blue-600":"border-gray-200 hover:bg-gray-50"),children:[(0,a.jsx)(at.Z,{checked:t,className:"mt-0.5 pointer-events-none"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("span",{className:"block font-medium text-gray-900",children:e.label}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:e.description})]})]}),"other"===e.id&&t&&(0,a.jsx)(y.default,{className:"mt-2 ml-7",placeholder:"Please specify...",value:i.otherReason,onChange:e=>p("otherReason",e.target.value),onClick:e=>e.stopPropagation(),autoFocus:!0})]},e.id)})})]}):5===r?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Want to share more?"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Leave your email and we may reach out to learn more about your experience. This is completely optional."}),(0,a.jsx)(y.default,{size:"large",type:"email",placeholder:"your@email.com (optional)",value:i.email,onChange:e=>p("email",e.target.value),autoFocus:!0}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"We will only use this to follow up on your feedback. No spam, ever."})]}):null}),(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500 font-medium",children:["Step ",g()," of ",u]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[r>1&&(0,a.jsx)(A.ZP,{onClick:()=>{3===r&&!1===i.usingAtCompany?n(1):n(r-1)},disabled:c,icon:(0,a.jsx)(s9.Z,{className:"h-4 w-4"}),children:"Back"}),(0,a.jsxs)(A.ZP,{type:"primary",onClick:()=>{1===r&&!1===i.usingAtCompany?n(3):r<5?n(r+1):x()},disabled:!(1===r?null!==i.usingAtCompany:2===r?i.companyName.trim().length>0:3===r?""!==i.startDate:4===r?i.reasons.includes("other")?i.reasons.length>0&&i.otherReason.trim().length>0:i.reasons.length>0:5===r)||c,loading:c,className:"min-w-[100px]",children:[f?"Submit":"Next",!f&&(0,a.jsx)(s7.Z,{className:"ml-2 h-4 w-4"})]})]})]})]})]})}var ar=s(64935);function an(e){let{onOpen:t,onDismiss:s,isVisible:l}=e;return(0,a.jsx)(s3,{onOpen:t,onDismiss:s,isVisible:l,title:"Claude Code Feedback",description:"Help us improve your Claude Code experience with LiteLLM! Share your feedback in 4 quick questions.",buttonText:"Share feedback",icon:ar.Z,accentColor:"#7c3aed",buttonStyle:{backgroundColor:"#7c3aed",borderColor:"#7c3aed"}})}function ai(e){let{isOpen:t,onClose:s,onComplete:l}=e;return t?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:s}),(0,a.jsxs)("div",{className:"relative w-full max-w-md bg-white rounded-xl shadow-2xl overflow-hidden transform transition-all duration-300 ease-out",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between bg-gray-50/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-purple-600",children:[(0,a.jsx)(ar.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold text-sm tracking-wide uppercase",children:"Claude Code Feedback"})]}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",children:(0,a.jsx)(s4.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Help us improve your experience"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"We'd love to hear about your experience using LiteLLM with Claude Code. Your feedback helps us improve the product for everyone."}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"This brief survey takes about 2-3 minutes to complete."}),(0,a.jsx)(A.ZP,{type:"primary",size:"large",block:!0,onClick:()=>{window.open("https://forms.gle/LZeJQ3XytBakckYa9","_blank","noopener,noreferrer"),l()},icon:(0,a.jsx)(tv.Z,{className:"h-4 w-4"}),style:{backgroundColor:"#7c3aed",borderColor:"#7c3aed"},children:"Open Feedback Form"})]})]})]}):null}var ao=s(66891),ad=s(59004),ac=s(5183),am=s(18143),au=s(79885),ax=s(50320),ap=s(29827),ah=s(21770);let ag=async(e,t)=>{let s=(0,n.getProxyBaseUrl)(),a="".concat(s,"/v1/access_group/").concat(encodeURIComponent(t)),l=await fetch(a,{method:"DELETE",headers:{[(0,n.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!l.ok){let e=await l.json(),t=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(t),Error(t)}},af=()=>{let{accessToken:e}=(0,i.Z)(),t=(0,ap.NL)();return(0,ah.D)({mutationFn:async t=>{if(!e)throw Error("Access token is required");return ag(e,t)},onSuccess:()=>{t.invalidateQueries({queryKey:ax.R.all})}})};var aj=s(71594),ay=s(24525),av=s(13817),ab=s(2651),a_=s(10868),aN=s(40049),aZ=s(28124),ak=s(96137),aw=s(82222),aC=s(47024);let aS=async(e,t)=>{let s=(0,n.getProxyBaseUrl)(),a="".concat(s,"/v1/access_group/").concat(encodeURIComponent(t)),l=await fetch(a,{method:"GET",headers:{[(0,n.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!l.ok){let e=await l.json(),t=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(t),Error(t)}return l.json()},aP=e=>{let{accessToken:t,userRole:s}=(0,i.Z)(),a=(0,ap.NL)();return(0,tL.a)({queryKey:ax.R.detail(e),queryFn:async()=>aS(t,e),enabled:!!(t&&e)&&en.ZL.includes(s||""),initialData:()=>{if(!e)return;let t=a.getQueryData(ax.R.list({}));return null==t?void 0:t.find(t=>t.access_group_id===e)}})};var aT=s(85180),aI=s(35631),aA=s(15868),aL=s(54001),aM=s(95805),aD=s(51660),aE=s(27722),az=s(68474),aF=s(33245);let{TextArea:aq}=y.default;function aR(e){var t,s;let{form:l,isNameDisabled:r=!1}=e,{data:n}=(0,aE.P)(),{data:i}=(0,az.F)(),o=null!==(t=null==n?void 0:n.agents)&&void 0!==t?t:[],d=[{key:"1",label:(0,a.jsxs)(ae.Z,{align:"center",size:4,children:[(0,a.jsx)(aF.Z,{size:16}),"General Info"]}),children:(0,a.jsxs)("div",{style:{paddingTop:16},children:[(0,a.jsx)(f.Z.Item,{name:"name",label:"Group Name",rules:[{required:!0,message:"Please enter the access group name"}],children:(0,a.jsx)(y.default,{placeholder:"e.g. Engineering Team",disabled:r})}),(0,a.jsx)(f.Z.Item,{name:"description",label:"Description",children:(0,a.jsx)(aq,{rows:4,placeholder:"Describe the purpose of this access group..."})})]})},{key:"2",label:(0,a.jsxs)(ae.Z,{align:"center",size:4,children:[(0,a.jsx)(aZ.Z,{size:16}),"Models"]}),children:(0,a.jsx)("div",{style:{paddingTop:16},children:(0,a.jsx)(f.Z.Item,{name:"modelIds",label:"Allowed Models",children:(0,a.jsx)(sC.q,{context:"global",value:null!==(s=l.getFieldValue("modelIds"))&&void 0!==s?s:[],onChange:e=>l.setFieldsValue({modelIds:e}),style:{width:"100%"}})})})},{key:"3",label:(0,a.jsxs)(ae.Z,{align:"center",size:4,children:[(0,a.jsx)(ak.Z,{size:16}),"MCP Servers"]}),children:(0,a.jsx)("div",{style:{paddingTop:16},children:(0,a.jsx)(f.Z.Item,{name:"mcpServerIds",label:"Allowed MCP Servers",children:(0,a.jsx)(v.default,{mode:"multiple",placeholder:"Select MCP servers",style:{width:"100%"},optionFilterProp:"label",allowClear:!0,options:(null!=i?i:[]).map(e=>{var t;return{label:null!==(t=e.server_name)&&void 0!==t?t:e.server_id,value:e.server_id}})})})})},{key:"4",label:(0,a.jsxs)(ae.Z,{align:"center",size:4,children:[(0,a.jsx)(aw.Z,{size:16}),"Agents"]}),children:(0,a.jsx)("div",{style:{paddingTop:16},children:(0,a.jsx)(f.Z.Item,{name:"agentIds",label:"Allowed Agents",children:(0,a.jsx)(v.default,{mode:"multiple",placeholder:"Select agents",style:{width:"100%"},optionFilterProp:"label",allowClear:!0,options:o.map(e=>({label:e.agent_name,value:e.agent_id}))})})})}];return(0,a.jsx)(f.Z,{form:l,layout:"vertical",name:"access_group_form",initialValues:{modelIds:[],mcpServerIds:[],agentIds:[]},children:(0,a.jsx)(tD.default,{defaultActiveKey:"1",items:d})})}let aO=async(e,t,s)=>{let a=(0,n.getProxyBaseUrl)(),l="".concat(a,"/v1/access_group/").concat(encodeURIComponent(t)),r=await fetch(l,{method:"PUT",headers:{[(0,n.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok){let e=await r.json(),t=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(t),Error(t)}return r.json()},aB=()=>{let{accessToken:e}=(0,i.Z)(),t=(0,ap.NL)();return(0,ah.D)({mutationFn:async t=>{let{accessGroupId:s,params:a}=t;if(!e)throw Error("Access token is required");return aO(e,s,a)},onSuccess:(e,s)=>{let{accessGroupId:a}=s;t.invalidateQueries({queryKey:ax.R.all}),t.invalidateQueries({queryKey:ax.R.detail(a)})}})};function aU(e){let{visible:t,accessGroup:s,onCancel:l,onSuccess:r}=e,[n]=f.Z.useForm(),i=aB();return(0,o.useEffect)(()=>{if(t&&s){var e,a,l,r;n.setFieldsValue({name:s.access_group_name,description:null!==(e=s.description)&&void 0!==e?e:"",modelIds:null!==(a=s.access_model_names)&&void 0!==a?a:[],mcpServerIds:null!==(l=s.access_mcp_server_ids)&&void 0!==l?l:[],agentIds:null!==(r=s.access_agent_ids)&&void 0!==r?r:[]})}},[t,s,n]),(0,a.jsx)(h.Z,{title:"Edit Access Group",open:t,onOk:()=>{n.validateFields().then(e=>{let t={access_group_name:e.name,description:e.description,access_model_names:e.modelIds,access_mcp_server_ids:e.mcpServerIds,access_agent_ids:e.agentIds};i.mutate({accessGroupId:s.access_group_id,params:t},{onSuccess:()=>{j.ZP.success("Access group updated successfully"),null==r||r(),l()}})}).catch(e=>{console.log("Validate Failed:",e)})},onCancel:l,width:700,okText:"Save Changes",cancelText:"Cancel",confirmLoading:i.isPending,destroyOnHidden:!0,children:(0,a.jsx)(aR,{form:n})})}let{Title:aV,Text:aG}=sg.default,{Content:aK}=av.default;function aH(e){var t,s,l,r,n;let{accessGroupId:i,onBack:d}=e,{data:c,isLoading:m}=aP(i),{token:u}=ab.Z.useToken(),[x,p]=(0,o.useState)(!1),[h,g]=(0,o.useState)(!1),[f,j]=(0,o.useState)(!1);if(m)return(0,a.jsx)(aK,{style:{padding:u.paddingLG,paddingInline:2*u.paddingLG},children:(0,a.jsx)(a_.Z,{justify:"center",align:"center",style:{minHeight:300},children:(0,a.jsx)(eg.Z,{size:"large"})})});if(!c)return(0,a.jsxs)(aK,{style:{padding:u.paddingLG,paddingInline:2*u.paddingLG},children:[(0,a.jsx)(A.ZP,{icon:(0,a.jsx)(s9.Z,{size:16}),onClick:d,type:"text",style:{marginBottom:16}}),(0,a.jsx)(aT.Z,{description:"Access group not found"})]});let y=null!==(t=c.access_model_names)&&void 0!==t?t:[],v=null!==(s=c.access_mcp_server_ids)&&void 0!==s?s:[],b=null!==(l=c.access_agent_ids)&&void 0!==l?l:[],N=null!==(r=c.assigned_key_ids)&&void 0!==r?r:[],Z=null!==(n=c.assigned_team_ids)&&void 0!==n?n:[],k=h?N:N.slice(0,5),w=f?Z:Z.slice(0,5),C=[{key:"models",label:(0,a.jsxs)(a_.Z,{align:"center",gap:8,children:[(0,a.jsx)(aZ.Z,{size:16}),"Models",(0,a.jsx)(_.Z,{style:{marginInlineEnd:0},children:null==y?void 0:y.length})]}),children:(null==y?void 0:y.length)>0?(0,a.jsx)(aI.Z,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4},dataSource:y,renderItem:e=>(0,a.jsx)(aI.Z.Item,{children:(0,a.jsx)(X.Z,{size:"small",children:(0,a.jsx)(aG,{code:!0,children:e})})})}):(0,a.jsx)(aT.Z,{description:"No models assigned to this group"})},{key:"mcp",label:(0,a.jsxs)(a_.Z,{align:"center",gap:8,children:[(0,a.jsx)(ak.Z,{size:16}),"MCP Servers",(0,a.jsx)(_.Z,{children:null==v?void 0:v.length})]}),children:(null==v?void 0:v.length)>0?(0,a.jsx)(aI.Z,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4},dataSource:v,renderItem:e=>(0,a.jsx)(aI.Z.Item,{children:(0,a.jsx)(X.Z,{size:"small",children:(0,a.jsx)(aG,{code:!0,children:e})})})}):(0,a.jsx)(aT.Z,{description:"No MCP servers assigned to this group"})},{key:"agents",label:(0,a.jsxs)(a_.Z,{align:"center",gap:8,children:[(0,a.jsx)(aw.Z,{size:16}),"Agents",(0,a.jsx)(_.Z,{children:null==b?void 0:b.length})]}),children:(null==b?void 0:b.length)>0?(0,a.jsx)(aI.Z,{grid:{gutter:16,xs:1,sm:2,md:3,lg:4},dataSource:b,renderItem:e=>(0,a.jsx)(aI.Z.Item,{children:(0,a.jsx)(X.Z,{size:"small",children:(0,a.jsx)(aG,{code:!0,children:e})})})}):(0,a.jsx)(aT.Z,{description:"No agents assigned to this group"})}];return(0,a.jsxs)(aK,{style:{padding:u.paddingLG,paddingInline:2*u.paddingLG},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[(0,a.jsx)(A.ZP,{icon:(0,a.jsx)(s9.Z,{size:16}),onClick:d,type:"text"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(aV,{level:2,style:{margin:0},children:c.access_group_name}),(0,a.jsxs)(aG,{type:"secondary",children:["ID: ",(0,a.jsx)(aG,{copyable:!0,children:c.access_group_id})]})]})]}),(0,a.jsx)(A.ZP,{type:"primary",icon:(0,a.jsx)(aA.Z,{size:16}),onClick:()=>{p(!0)},children:"Edit Access Group"})]}),(0,a.jsx)(e6.Z,{style:{marginBottom:24},children:(0,a.jsx)(X.Z,{children:(0,a.jsxs)(ef.Z,{title:"Group Details",column:1,children:[(0,a.jsx)(ef.Z.Item,{label:"Description",children:c.description||"—"}),(0,a.jsxs)(ef.Z.Item,{label:"Created",children:[new Date(c.created_at).toLocaleString(),c.created_by&&(0,a.jsxs)(aG,{children:["\xa0","by","\xa0",(0,a.jsx)(aD.Z,{userId:c.created_by})]})]}),(0,a.jsxs)(ef.Z.Item,{label:"Last Updated",children:[new Date(c.updated_at).toLocaleString(),c.updated_by&&(0,a.jsxs)(aG,{children:["\xa0","by","\xa0",(0,a.jsx)(aD.Z,{userId:c.updated_by})]})]})]})})}),(0,a.jsxs)(e6.Z,{gutter:[16,16],style:{marginBottom:24},children:[(0,a.jsx)(e3.Z,{xs:24,lg:12,children:(0,a.jsx)(X.Z,{title:(0,a.jsxs)(a_.Z,{align:"center",gap:8,children:[(0,a.jsx)(aL.Z,{size:16}),"Attached Keys",(0,a.jsx)(_.Z,{children:null==N?void 0:N.length})]}),extra:(null==N?void 0:N.length)>5?(0,a.jsx)(A.ZP,{type:"link",onClick:()=>g(!h),children:h?"Show Less":"View All (".concat(null==N?void 0:N.length,")")}):null,children:(null==N?void 0:N.length)>0?(0,a.jsx)(a_.Z,{wrap:"wrap",gap:8,children:k.map(e=>(0,a.jsx)(_.Z,{children:(0,a.jsx)(aG,{code:!0,style:{fontSize:12},children:e.length>20?"".concat(e.slice(0,10),"...").concat(e.slice(-6)):e})},e))}):(0,a.jsx)(aT.Z,{description:"No keys attached",image:aT.Z.PRESENTED_IMAGE_SIMPLE})})}),(0,a.jsx)(e3.Z,{xs:24,lg:12,children:(0,a.jsx)(X.Z,{title:(0,a.jsxs)(a_.Z,{align:"center",gap:8,children:[(0,a.jsx)(aM.Z,{size:16}),"Attached Teams",(0,a.jsx)(_.Z,{children:null==Z?void 0:Z.length})]}),extra:(null==Z?void 0:Z.length)>5?(0,a.jsx)(A.ZP,{type:"link",onClick:()=>j(!f),children:f?"Show Less":"View All (".concat(null==Z?void 0:Z.length,")")}):null,children:(null==Z?void 0:Z.length)>0?(0,a.jsx)(a_.Z,{wrap:"wrap",gap:8,children:w.map(e=>(0,a.jsx)(_.Z,{children:(0,a.jsx)(aG,{code:!0,style:{fontSize:12},children:e})},e))}):(0,a.jsx)(aT.Z,{description:"No teams attached",image:aT.Z.PRESENTED_IMAGE_SIMPLE})})})]}),(0,a.jsx)(X.Z,{children:(0,a.jsx)(tD.default,{defaultActiveKey:"models",items:C})}),(0,a.jsx)(aU,{visible:x,accessGroup:c,onCancel:()=>p(!1)})]})}let aW=async(e,t)=>{let s=(0,n.getProxyBaseUrl)(),a=await fetch("".concat(s,"/v1/access_group"),{method:"POST",headers:{[(0,n.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=await a.json(),t=(0,n.deriveErrorMessage)(e);throw(0,n.handleError)(t),Error(t)}return a.json()},aY=()=>{let{accessToken:e}=(0,i.Z)(),t=(0,ap.NL)();return(0,ah.D)({mutationFn:async t=>{if(!e)throw Error("Access token is required");return aW(e,t)},onSuccess:()=>{t.invalidateQueries({queryKey:ax.R.all})}})};function aJ(e){let{visible:t,onCancel:s,onSuccess:l}=e,[r]=f.Z.useForm(),n=aY();return(0,a.jsx)(h.Z,{title:"Create Access Group",open:t,onOk:()=>{r.validateFields().then(e=>{let t={access_group_name:e.name,description:e.description,access_model_names:e.modelIds,access_mcp_server_ids:e.mcpServerIds,access_agent_ids:e.agentIds};n.mutate(t,{onSuccess:()=>{j.ZP.success("Access group created successfully"),r.resetFields(),null==l||l(),s()}})}).catch(e=>{console.log("Validate Failed:",e)})},onCancel:s,width:700,okText:"Create Group",cancelText:"Cancel",confirmLoading:n.isPending,destroyOnClose:!0,children:(0,a.jsx)(aR,{form:r})})}let{Title:a$,Text:aQ}=sg.default,{Content:aX}=av.default;function a0(e){var t,s,a;return{id:e.access_group_id,name:e.access_group_name,description:null!==(t=e.description)&&void 0!==t?t:"",modelIds:e.access_model_names,mcpServerIds:e.access_mcp_server_ids,agentIds:e.access_agent_ids,keyIds:e.assigned_key_ids,teamIds:e.assigned_team_ids,createdAt:e.created_at,createdBy:null!==(s=e.created_by)&&void 0!==s?s:"",updatedAt:e.updated_at,updatedBy:null!==(a=e.updated_by)&&void 0!==a?a:""}}function a1(){var e,t;let{token:s}=ab.Z.useToken(),{data:l,isLoading:r}=(0,ax.S)(),n=(0,o.useMemo)(()=>(null!=l?l:[]).map(a0),[l]),[i,d]=(0,o.useState)(null),[c,m]=(0,o.useState)(!1),[u,x]=(0,o.useState)(""),[p,h]=(0,o.useState)(1),[g,f]=(0,o.useState)([]),[j,v]=(0,o.useState)(null),b=af();(0,o.useEffect)(()=>{h(1)},[u]);let N=(0,o.useMemo)(()=>n.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.id.toLowerCase().includes(u.toLowerCase())||e.description.toLowerCase().includes(u.toLowerCase())),[n,u]),Z=(0,o.useMemo)(()=>[{id:"id",accessorKey:"id",header:()=>(0,a.jsx)("span",{children:"ID"}),enableSorting:!1,size:170,cell:e=>{let{row:t}=e,s=t.original;return(0,a.jsx)(ee.Z,{title:s.id,children:(0,a.jsx)(aQ,{ellipsis:!0,className:"text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs cursor-pointer",style:{fontSize:14,padding:"1px 8px"},onClick:()=>d(s.id),children:s.id})})}},{id:"name",accessorKey:"name",header:()=>(0,a.jsx)("span",{children:"Name"}),enableSorting:!0,cell:e=>{let{getValue:t}=e;return t()}},{id:"resources",header:()=>(0,a.jsx)("span",{children:"Resources"}),enableSorting:!1,cell:e=>{var t,s,l;let{row:r}=e,n=r.original,i=null!==(t=n.modelIds)&&void 0!==t?t:[],o=null!==(s=n.mcpServerIds)&&void 0!==s?s:[],d=null!==(l=n.agentIds)&&void 0!==l?l:[];return(0,a.jsxs)(a_.Z,{gap:12,align:"center",children:[(0,a.jsx)(ee.Z,{title:"".concat(null==i?void 0:i.length," Models"),children:(0,a.jsx)(_.Z,{color:"blue",style:{fontSize:14,padding:"2px 8px",margin:0},children:(0,a.jsxs)(a_.Z,{align:"center",gap:6,children:[(0,a.jsx)(aZ.Z,{size:14}),null==i?void 0:i.length]})})}),(0,a.jsx)(ee.Z,{title:"".concat(null==o?void 0:o.length," MCP Servers"),children:(0,a.jsx)(_.Z,{color:"cyan",style:{fontSize:14,padding:"2px 8px",margin:0},children:(0,a.jsxs)(a_.Z,{align:"center",gap:6,children:[(0,a.jsx)(ak.Z,{size:14}),null==o?void 0:o.length]})})}),(0,a.jsx)(ee.Z,{title:"".concat(null==d?void 0:d.length," Agents"),children:(0,a.jsx)(_.Z,{color:"purple",style:{fontSize:14,padding:"2px 8px",margin:0},children:(0,a.jsxs)(a_.Z,{align:"center",gap:6,children:[(0,a.jsx)(aw.Z,{size:14}),null==d?void 0:d.length]})})})]})}},{id:"createdAt",accessorKey:"createdAt",header:()=>(0,a.jsx)("span",{children:"Created"}),enableSorting:!0,sortingFn:"datetime",cell:e=>{let{getValue:t}=e;return new Date(t()).toLocaleDateString()},meta:{responsive:["lg"]}},{id:"updatedAt",accessorKey:"updatedAt",header:()=>(0,a.jsx)("span",{children:"Updated"}),enableSorting:!1,cell:e=>{let{getValue:t}=e;return new Date(t()).toLocaleDateString()},meta:{responsive:["xl"]}},{id:"actions",header:()=>(0,a.jsx)("span",{children:"Actions"}),enableSorting:!1,cell:e=>{let{row:t}=e;return(0,a.jsx)(ae.Z,{children:(0,a.jsx)(sw.Z,{variant:"Delete",tooltipText:"Delete access group",onClick:()=>v(t.original)})})}}],[]),k=(0,aj.b7)({data:N,columns:Z,state:{sorting:g},onSortingChange:f,getCoreRowModel:(0,ay.sC)(),getSortedRowModel:(0,ay.tj)(),getRowId:e=>e.id}),w=k.getRowModel().rows,C=w.slice((p-1)*10,10*p),S=(0,o.useMemo)(()=>new Map(C.map(e=>[e.original.id,e])),[C]),P=(null!==(t=null===(e=k.getHeaderGroups()[0])||void 0===e?void 0:e.headers)&&void 0!==t?t:[]).map(e=>{let t=e.column.getCanSort(),s=e.column.getIsSorted(),l=e.column.columnDef.meta,r={title:(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.isPlaceholder?null:(0,aj.ie)(e.column.columnDef.header,e.getContext()),t&&(0,a.jsx)(aC._,{sortState:!1!==s&&s,onSortChange:t=>{f(!1===t?[]:[{id:e.column.id,desc:"desc"===t}])},columnId:e.column.id})]}),key:e.id,width:e.column.columnDef.size,render:(t,s)=>{let a=S.get(s.id);if(!a)return null;let l=a.getVisibleCells().find(t=>t.column.id===e.id);return l?(0,aj.ie)(l.column.columnDef.cell,l.getContext()):null}};return(null==l?void 0:l.responsive)&&(r.responsive=l.responsive),r}),T=C.map(e=>e.original);return i?(0,a.jsx)(aH,{accessGroupId:i,onBack:()=>d(null)}):(0,a.jsxs)(aX,{style:{padding:s.paddingLG,paddingInline:2*s.paddingLG},children:[(0,a.jsxs)(a_.Z,{justify:"space-between",align:"center",style:{marginBottom:16},children:[(0,a.jsxs)(ae.Z,{direction:"vertical",size:0,children:[(0,a.jsx)(a$,{level:2,style:{margin:0},children:"Access Groups"}),(0,a.jsx)(aQ,{type:"secondary",children:"Manage resource permissions for your organization"})]}),(0,a.jsx)(A.ZP,{type:"primary",icon:(0,a.jsx)(M.Z,{}),onClick:()=>m(!0),children:"Create Access Group"})]}),(0,a.jsxs)(X.Z,{styles:{body:{padding:0}},children:[(0,a.jsxs)(a_.Z,{justify:"space-between",align:"center",style:{padding:"12px 16px"},children:[(0,a.jsx)(y.default,{prefix:(0,a.jsx)(sm.Z,{size:16}),placeholder:"Search groups by name, ID, or description...",style:{maxWidth:400},value:u,onChange:e=>x(e.target.value),allowClear:!0}),(0,a.jsx)(aN.Z,{current:p,total:null==w?void 0:w.length,pageSize:10,onChange:e=>h(e),size:"small",showTotal:e=>"".concat(e," groups"),showSizeChanger:!1})]}),(0,a.jsx)(e4.Z,{columns:P,dataSource:T,rowKey:"id",loading:r,pagination:!1})]}),(0,a.jsx)(aJ,{visible:c,onCancel:()=>m(!1)}),(0,a.jsx)(sk.Z,{isOpen:!!j,title:"Delete Access Group",message:"Are you sure you want to delete this access group? This action cannot be undone.",resourceInformationTitle:"Access Group Information",resourceInformation:[{label:"ID",value:null==j?void 0:j.id,code:!0},{label:"Name",value:null==j?void 0:j.name},{label:"Description",value:(null==j?void 0:j.description)||"—"}],onCancel:()=>v(null),onOk:()=>{j&&b.mutate(j.id,{onSuccess:()=>{v(null)}})},confirmLoading:b.isPending})]})}var a2=s(36213),a4=s(19130),a5=s(13648),a6=s(23048);let a3=[{value:"trusted",label:"trusted",color:"#065f46",bg:"#d1fae5",border:"#6ee7b7"},{value:"blocked",label:"blocked",color:"#991b1b",bg:"#fee2e2",border:"#fca5a5"}],a8=e=>{var t;return null!==(t=a3.find(t=>t.value===e))&&void 0!==t?t:a3[1]},a9=e=>{let{value:t,toolName:s,saving:l,onChange:r}=e,n=a8(t);return(0,a.jsx)(v.default,{size:"small",value:t,disabled:l,loading:l,onChange:e=>r(s,e),onClick:e=>e.stopPropagation(),style:{minWidth:110,fontWeight:500},styles:{selector:{backgroundColor:n.bg,borderColor:n.border,color:n.color,borderRadius:999,fontSize:11,fontWeight:600,paddingLeft:8,paddingRight:4}},popupMatchSelectWidth:!1,options:a3.map(e=>({value:e.value,label:(0,a.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,fontWeight:500,color:e.color},children:[(0,a.jsx)("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:e.color,display:"inline-block",flexShrink:0}}),e.label]})}))})};var a7=e=>{let{accessToken:t}=e,[s,l]=(0,o.useState)([]),[r,i]=(0,o.useState)(!0),[d,c]=(0,o.useState)(!1),[m,u]=(0,o.useState)(null),[x,p]=(0,o.useState)(null),[h,g]=(0,o.useState)(""),[f,j]=(0,o.useState)("created_at"),[y,v]=(0,o.useState)("desc"),[b,_]=(0,o.useState)(1),[N,Z]=(0,o.useState)(!0),[k,w]=(0,o.useState)({}),C=(0,o.useDeferredValue)(d),S=d||C,P=(0,o.useCallback)(async()=>{if(t){c(!0),u(null);try{let e=await (0,n.fetchToolsList)(t);l(e)}catch(t){var e;u(null!==(e=t.message)&&void 0!==e?e:"Failed to load tools")}finally{c(!1),i(!1)}}},[t]);(0,o.useEffect)(()=>{P()},[P]),(0,o.useEffect)(()=>{if(!N)return;let e=setInterval(P,15e3);return()=>clearInterval(e)},[N,P]);let T=async(e,s)=>{if(t){p(e);try{await (0,n.updateToolPolicy)(t,e,s),l(t=>t.map(t=>t.tool_name===e?{...t,call_policy:s}:t))}catch(e){alert("Failed to update policy: ".concat(e.message))}finally{p(null)}}},A=(e,t)=>{!1===t?(j("created_at"),v("desc")):(j(e),v(t)),_(1)},L=Array.from(new Set(s.map(e=>e.team_id).filter(Boolean))).map(e=>({label:e,value:e})),M=Array.from(new Set(s.map(e=>e.key_alias).filter(Boolean))).map(e=>({label:e,value:e})),D=[{name:"Policy",label:"Policy",options:a3.map(e=>({label:e.label,value:e.value}))},{name:"Team Name",label:"Team Name",options:L},{name:"Key Name",label:"Key Name",options:M}],E=e=>{let{label:t,field:s}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:t}),(0,a.jsx)(aC._,{sortState:f===s&&y,onSortChange:e=>A(s,e)})]})},z=s.filter(e=>{if(h){var t,s,a;let l=h.toLowerCase();if(!(e.tool_name.toLowerCase().includes(l)||(null!==(t=e.team_id)&&void 0!==t?t:"").toLowerCase().includes(l)||(null!==(s=e.key_alias)&&void 0!==s?s:"").toLowerCase().includes(l)||(null!==(a=e.key_hash)&&void 0!==a?a:"").toLowerCase().includes(l)||e.call_policy.toLowerCase().includes(l)))return!1}return(!k.Policy||e.call_policy===k.Policy)&&(!k["Team Name"]||e.team_id===k["Team Name"])&&(!k["Key Name"]||e.key_alias===k["Key Name"])}),F=[...z].sort((e,t)=>{var s,a;let l=null!==(s=e[f])&&void 0!==s?s:"",r=null!==(a=t[f])&&void 0!==a?a:"";return l<r?"desc"===y?1:-1:l>r?"desc"===y?-1:1:0}),q=Math.max(1,Math.ceil(F.length/50)),R=F.slice((b-1)*50,50*b);return(0,a.jsxs)("div",{className:"p-6 w-full",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Tool Policies"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full box-border",children:[(0,a.jsxs)("div",{className:"border-b px-6 py-4 w-full max-w-full box-border",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0 w-full max-w-full box-border",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative w-64",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by Tool Name",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:h,onChange:e=>{g(e.target.value),_(1)}}),(0,a.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Live Tail"}),(0,a.jsx)(I.Z,{checked:N,onChange:Z})]}),(0,a.jsxs)("button",{onClick:P,disabled:S,className:"flex items-center gap-1.5 px-3 py-2 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-60",children:[(0,a.jsx)("svg",{className:"w-4 h-4 ".concat(S?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),S?"Fetching":"Fetch"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 whitespace-nowrap",children:[(0,a.jsxs)("span",{children:["Showing ",0===z.length?0:(b-1)*50+1," - ",Math.min(50*b,z.length)," of ",z.length," results"]}),(0,a.jsxs)("span",{children:["Page ",b," of ",q]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:()=>_(e=>Math.max(1,e-1)),disabled:1===b,className:"px-3 py-1.5 border rounded-md text-sm hover:bg-gray-50 disabled:opacity-40",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>_(e=>Math.min(q,e+1)),disabled:b===q,className:"px-3 py-1.5 border rounded-md text-sm hover:bg-gray-50 disabled:opacity-40",children:"Next"})]})]})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)(a6.Z,{options:D,onApplyFilters:e=>{w(e),_(1)},onResetFilters:()=>{w({}),_(1)},buttonLabel:"Filters"})})]}),N&&(0,a.jsxs)("div",{className:"bg-green-50 border-b border-green-100 px-6 py-2 flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-green-700",children:"Auto-refreshing every 15 seconds"}),(0,a.jsx)("button",{onClick:()=>Z(!1),className:"text-xs text-green-600 underline",children:"Stop"})]}),m&&(0,a.jsx)("div",{className:"mx-6 mt-4 p-3 bg-red-50 border border-red-200 rounded text-sm text-red-700",children:m}),(0,a.jsxs)(a4.iA,{className:"[&_td]:py-0.5 [&_th]:py-1 w-full",children:[(0,a.jsx)(a4.ss,{children:(0,a.jsxs)(a4.SC,{children:[(0,a.jsx)(a4.xs,{className:"py-1 h-8",children:(0,a.jsx)(E,{label:"Discovered",field:"created_at"})}),(0,a.jsx)(a4.xs,{className:"py-1 h-8",children:(0,a.jsx)(E,{label:"Tool Name",field:"tool_name"})}),(0,a.jsx)(a4.xs,{className:"py-1 h-8",children:(0,a.jsx)(E,{label:"Policy",field:"call_policy"})}),(0,a.jsx)(a4.xs,{className:"py-1 h-8",children:(0,a.jsx)(E,{label:"# Calls",field:"call_count"})}),(0,a.jsx)(a4.xs,{className:"py-1 h-8",children:(0,a.jsx)(E,{label:"Team Name",field:"team_id"})}),(0,a.jsx)(a4.xs,{className:"py-1 h-8",children:"Key Hash"}),(0,a.jsx)(a4.xs,{className:"py-1 h-8",children:(0,a.jsx)(E,{label:"Key Name",field:"key_alias"})}),(0,a.jsx)(a4.xs,{className:"py-1 h-8",children:"Origin"})]})}),(0,a.jsx)(a4.RM,{children:r?(0,a.jsx)(a4.SC,{children:(0,a.jsx)(a4.pj,{colSpan:8,className:"h-8 text-center text-gray-500",children:"Loading tools…"})}):0===R.length?(0,a.jsx)(a4.SC,{children:(0,a.jsx)(a4.pj,{colSpan:8,className:"h-8 text-center text-gray-500",children:"No tools discovered yet. Make a chat completion that returns tool_calls to start auto-discovery."})}):R.map(e=>{var t,s,l,r,n,i,o,d,c,m;return(0,a.jsxs)(a4.SC,{className:"h-8 hover:bg-gray-50",children:[(0,a.jsx)(a4.pj,{className:"py-0.5 max-h-8 overflow-hidden whitespace-nowrap",children:(0,a.jsx)(a5.s,{utcTime:null!==(t=e.created_at)&&void 0!==t?t:""})}),(0,a.jsx)(a4.pj,{className:"py-0.5 max-h-8 overflow-hidden",children:(0,a.jsx)(ee.Z,{title:e.tool_name,children:(0,a.jsx)("span",{className:"font-mono text-xs max-w-[20ch] truncate block font-medium",children:e.tool_name})})}),(0,a.jsx)(a4.pj,{className:"py-0.5 max-h-8",children:(0,a.jsx)(a9,{value:e.call_policy,toolName:e.tool_name,saving:x===e.tool_name,onChange:T})}),(0,a.jsx)(a4.pj,{className:"py-0.5 max-h-8 text-right tabular-nums text-sm font-mono text-gray-700",children:(null!==(s=e.call_count)&&void 0!==s?s:0).toLocaleString()}),(0,a.jsx)(a4.pj,{className:"py-0.5 max-h-8 overflow-hidden whitespace-nowrap",children:(0,a.jsx)(ee.Z,{title:null!==(l=e.team_id)&&void 0!==l?l:"-",children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:null!==(r=e.team_id)&&void 0!==r?r:"-"})})}),(0,a.jsx)(a4.pj,{className:"py-0.5 max-h-8 overflow-hidden whitespace-nowrap",children:(0,a.jsx)(ee.Z,{title:null!==(n=e.key_hash)&&void 0!==n?n:"-",children:(0,a.jsx)("span",{className:"font-mono max-w-[15ch] truncate block text-blue-600",children:null!==(i=e.key_hash)&&void 0!==i?i:"-"})})}),(0,a.jsx)(a4.pj,{className:"py-0.5 max-h-8 overflow-hidden whitespace-nowrap",children:(0,a.jsx)(ee.Z,{title:null!==(o=e.key_alias)&&void 0!==o?o:"-",children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:null!==(d=e.key_alias)&&void 0!==d?d:"-"})})}),(0,a.jsx)(a4.pj,{className:"py-0.5 max-h-8 overflow-hidden whitespace-nowrap",children:(0,a.jsx)(ee.Z,{title:null!==(c=e.origin)&&void 0!==c?c:"-",children:(0,a.jsx)("span",{className:"max-w-[15ch] truncate block",children:null!==(m=e.origin)&&void 0!==m?m:"-"})})})]},e.tool_id)})})]}),q>1&&(0,a.jsxs)("div",{className:"border-t px-6 py-3 flex items-center justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["Showing ",(b-1)*50+1," - ",Math.min(50*b,F.length)," of ",F.length]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:()=>_(e=>Math.max(1,e-1)),disabled:1===b,className:"px-3 py-1.5 border rounded-md hover:bg-gray-50 disabled:opacity-40",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>_(e=>Math.min(q,e+1)),disabled:b===q,className:"px-3 py-1.5 border rounded-md hover:bg-gray-50 disabled:opacity-40",children:"Next"})]})]})]})]})},le=s(91064),lt=s(52684),ls=s(69734),la=s(97060),ll=s(54114),lr=s(14474),ln=s(99376),li=s(18310);function lo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";document.cookie="".concat(e,"=; Max-Age=0; Path=").concat(t)}let ld=new ll.S;function lc(){let[e,t]=(0,o.useState)(""),[s,r]=(0,o.useState)(!1),[i,x]=(0,o.useState)(!1),[p,h]=(0,o.useState)(null),[g,f]=(0,o.useState)(null),[j,y]=(0,o.useState)([]),[v,b]=(0,o.useState)([]),[_,N]=(0,o.useState)([]),[Z,k]=(0,o.useState)({PROXY_BASE_URL:"",PROXY_LOGOUT_URL:""}),[w,C]=(0,o.useState)(!0),S=(0,ln.useSearchParams)(),[P,T]=(0,o.useState)({data:[]}),[I,A]=(0,o.useState)(null),[L,M]=(0,o.useState)(!1),[D,E]=(0,o.useState)(!0),[z,F]=(0,o.useState)(null),[q,R]=(0,o.useState)(!0),[O,B]=(0,o.useState)(!1),[U,V]=(0,o.useState)(!1),[G,K]=(0,o.useState)(!1),[H,W]=(0,o.useState)(!1),[Y,J]=(0,o.useState)(!1),$=S.get("invitation_id"),[Q,X]=(0,o.useState)(()=>S.get("page")||"api-keys"),[ee,et]=(0,o.useState)(null),[es,ea]=(0,o.useState)(!1),el=e=>{y(t=>t?[...t,e]:[e]),M(()=>!L)},er=!1===D&&null===I&&null===$;return((0,o.useEffect)(()=>{let e=!1;return(async()=>{try{await (0,n.getUiConfig)()}catch(e){}if(e)return;let t=function(e){let t=document.cookie.split("; ").find(t=>t.startsWith(e+"="));if(!t)return null;let s=t.slice(e.length+1);try{return decodeURIComponent(s)}catch(e){return s}}("token"),s=t&&!(0,la.vf)(t)?t:null;t&&!s&&lo("token","/"),e||(A(s),E(!1))})(),()=>{e=!0}},[]),(0,o.useEffect)(()=>{if(er){let e=(n.proxyBaseUrl||"")+"/ui/login";window.location.replace(e)}},[er]),(0,o.useEffect)(()=>{if(!I)return;if((0,la.vf)(I)){lo("token","/"),A(null);return}let e=null;try{e=(0,lr.o)(I)}catch(e){lo("token","/"),A(null);return}if(e){if(et(e.key),x(e.disabled_non_admin_personal_key_creation),e.user_role){let s=function(e){if(!e)return"Undefined Role";switch(e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"org_admin":return"Org Admin";case"internal_user":return"Internal User";case"internal_user_viewer":case"internal_viewer":return"Internal Viewer";case"app_user":return"App User";default:return"Unknown Role"}}(e.user_role);t(s),"Admin Viewer"==s&&X("usage")}e.user_email&&h(e.user_email),e.login_method&&C("username_password"==e.login_method),e.premium_user&&r(e.premium_user),e.auth_header_name&&(0,n.setGlobalLitellmHeaderName)(e.auth_header_name),e.user_id&&F(e.user_id)}},[I]),(0,o.useEffect)(()=>{ee&&z&&e&&(0,sL.Nr)(z,e,ee,N),ee&&z&&e&&(0,eP.Z)(ee,z,e,null,f),ee&&(0,sM.g)(ee,b)},[ee,z,e]),(0,o.useEffect)(()=>{ee&&I&&(async()=>{try{let e=await (0,n.getInProductNudgesCall)(ee),t=(null==e?void 0:e.is_claude_code_enabled)||!1;V(t),t&&(K(!0),R(!1))}catch(e){console.error("Failed to fetch in-product nudges:",e)}})()},[ee,I]),(0,o.useEffect)(()=>{if(q&&!O){let e=setTimeout(()=>{R(!1)},15e3);return()=>clearTimeout(e)}},[q,O]),(0,o.useEffect)(()=>{if(G&&!H){let e=setTimeout(()=>{K(!1)},15e3);return()=>clearTimeout(e)}},[G,H]),D||er)?(0,a.jsx)(eT.Z,{}):(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)(eT.Z,{}),children:(0,a.jsx)(ap.aH,{client:ld,children:(0,a.jsx)(li.ZP,{theme:{algorithm:Y?ab.Z.darkAlgorithm:ab.Z.defaultAlgorithm},children:(0,a.jsx)(ls.f,{accessToken:ee,children:$?(0,a.jsx)(au.Z,{userID:z,userRole:e,premiumUser:s,teams:g,keys:j,setUserRole:t,userEmail:p,setUserEmail:h,setTeams:f,setKeys:y,organizations:v,addKey:el,createClicked:L}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(t7.Z,{userID:z,userRole:e,premiumUser:s,userEmail:p,setProxySettings:k,proxySettings:Z,accessToken:ee,isPublicPage:!1,sidebarCollapsed:es,onToggleSidebar:()=>{ea(!es)},isDarkMode:Y,toggleDarkMode:()=>{J(!Y)}}),(0,a.jsxs)("div",{className:"flex flex-1",children:[(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(d,{setPage:e=>{let t=new URLSearchParams(S);t.set("page",e),window.history.pushState(null,"","?".concat(t.toString())),X(e)},defaultSelectedKey:Q,sidebarCollapsed:es})}),"api-keys"==Q?(0,a.jsx)(au.Z,{userID:z,userRole:e,premiumUser:s,teams:g,keys:j,setUserRole:t,userEmail:p,setUserEmail:h,setTeams:f,setKeys:y,organizations:v,addKey:el,createClicked:L}):"models"==Q?(0,a.jsx)(c.Z,{token:I,keys:j,modelData:P,setModelData:T,premiumUser:s,teams:g}):"llm-playground"==Q?(0,a.jsx)(m.default,{}):"users"==Q?(0,a.jsx)(lt.Z,{userID:z,userRole:e,token:I,keys:j,teams:g,accessToken:ee,setKeys:y}):"teams"==Q?(0,a.jsx)(sA,{teams:g,setTeams:f,accessToken:ee,userID:z,userRole:e,organizations:v,premiumUser:s,searchParams:S}):"organizations"==Q?(0,a.jsx)(sM.Z,{organizations:v,setOrganizations:b,userModels:_,accessToken:ee,userRole:e,premiumUser:s}):"admin-panel"==Q?(0,a.jsx)(u.Z,{proxySettings:Z}):"api_ref"==Q?(0,a.jsx)(l.Z,{proxySettings:Z}):"logging-and-alerts"==Q?(0,a.jsx)(s1.Z,{userID:z,userRole:e,accessToken:ee,premiumUser:s}):"budgets"==Q?(0,a.jsx)(ew.Z,{accessToken:ee}):"guardrails"==Q?(0,a.jsx)(t6.Z,{accessToken:ee,userRole:e}):"policies"==Q?(0,a.jsx)(t3.Z,{accessToken:ee,userRole:e}):"agents"==Q?(0,a.jsx)(ek,{accessToken:ee,userRole:e}):"prompts"==Q?(0,a.jsx)(sE.Z,{accessToken:ee,userRole:e}):"transform-request"==Q?(0,a.jsx)(ad.Z,{accessToken:ee}):"router-settings"==Q?(0,a.jsx)(tS.Z,{userID:z,userRole:e,accessToken:ee,modelData:P}):"ui-theme"==Q?(0,a.jsx)(ac.Z,{userID:z,userRole:e,accessToken:ee}):"cost-tracking"==Q?(0,a.jsx)(tC,{userID:z,userRole:e,accessToken:ee}):"model-hub-table"==Q?(0,en.tY)(e)?(0,a.jsx)(t9.Z,{accessToken:ee,publicPage:!1,premiumUser:s,userRole:e}):(0,a.jsx)(sz.Z,{accessToken:ee,isEmbedded:!0}):"caching"==Q?(0,a.jsx)(eC.Z,{userID:z,userRole:e,token:I,accessToken:ee,premiumUser:s}):"pass-through-settings"==Q?(0,a.jsx)(sD.Z,{userID:z,userRole:e,accessToken:ee,modelData:P,premiumUser:s}):"logs"==Q?(0,a.jsx)(le.Z,{userID:z,userRole:e,token:I,accessToken:ee,allTeams:null!=g?g:[],premiumUser:s}):"mcp-servers"==Q?(0,a.jsx)(t8.d,{accessToken:ee,userRole:e,userID:z}):"search-tools"==Q?(0,a.jsx)(s0,{accessToken:ee,userRole:e,userID:z}):"tag-management"==Q?(0,a.jsx)(ao.Z,{accessToken:ee,userRole:e,userID:z}):"claude-code-plugins"==Q?(0,a.jsx)(eS.Z,{accessToken:ee,userRole:e}):"access-groups"==Q?(0,a.jsx)(a1,{}):"vector-stores"==Q?(0,a.jsx)(a2.Z,{accessToken:ee,userRole:e,userID:z}):"tool-policies"==Q?(0,a.jsx)(a7,{accessToken:ee,userRole:e}):"guardrails-monitor"==Q?(0,a.jsx)(t5,{accessToken:ee}):"new_usage"==Q?(0,a.jsx)(se.Z,{teams:null!=g?g:[],organizations:null!=v?v:[]}):(0,a.jsx)(am.Z,{userID:z,userRole:e,token:I,accessToken:ee,keys:j,premiumUser:s})]}),(0,a.jsx)(s8,{isVisible:q,onOpen:()=>{R(!1),B(!0)},onDismiss:()=>{R(!1)}}),(0,a.jsx)(al,{isOpen:O,onClose:()=>{B(!1),R(!0)},onComplete:()=>{B(!1)}}),(0,a.jsx)(an,{isVisible:G,onOpen:()=>{K(!1),W(!0)},onDismiss:()=>{K(!1)}}),(0,a.jsx)(ai,{isOpen:H,onClose:()=>{W(!1),K(!0)},onComplete:()=>{W(!1)}})]})})})})})}function lm(){return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)(eT.Z,{}),children:(0,a.jsx)(lc,{})})}},88904:function(e,t,s){"use strict";var a=s(57437),l=s(2265),r=s(88913),n=s(57840),i=s(37592),o=s(63709),d=s(10353),c=s(19250),m=s(65925),u=s(46468),x=s(9114),p=s(8156);t.Z=e=>{var t;let{accessToken:s,userID:h,userRole:g}=e,[f,j]=(0,l.useState)(!0),[y,v]=(0,l.useState)(null),[b,_]=(0,l.useState)(!1),[N,Z]=(0,l.useState)({}),[k,w]=(0,l.useState)(!1),[C,S]=(0,l.useState)([]),{Paragraph:P}=n.default,{Option:T}=i.default;(0,l.useEffect)(()=>{(async()=>{if(!s){j(!1);return}try{let e=await (0,c.getDefaultTeamSettings)(s);if(v(e),Z(e.values||{}),s)try{let e=await (0,c.modelAvailableCall)(s,h,g);if(e&&e.data){let t=e.data.map(e=>e.id);S(t)}}catch(e){console.error("Error fetching available models:",e)}}catch(e){console.error("Error fetching team SSO settings:",e),x.ZP.fromBackend("Failed to fetch team settings")}finally{j(!1)}})()},[s]);let I=async()=>{if(s){w(!0);try{let e=await (0,c.updateDefaultTeamSettings)(s,N);v({...y,values:e.settings}),_(!1),x.ZP.success("Default team settings updated successfully")}catch(e){console.error("Error updating team settings:",e),x.ZP.fromBackend("Failed to update team settings")}finally{w(!1)}}},A=(e,t)=>{Z(s=>({...s,[e]:t}))},L=(e,t,s)=>{var l;let n=t.type;return"budget_duration"===e?(0,a.jsx)(m.Z,{value:N[e]||null,onChange:t=>A(e,t),className:"mt-2"}):"boolean"===n?(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(o.Z,{checked:!!N[e],onChange:t=>A(e,t)})}):"array"===n&&(null===(l=t.items)||void 0===l?void 0:l.enum)?(0,a.jsx)(i.default,{mode:"multiple",style:{width:"100%"},value:N[e]||[],onChange:t=>A(e,t),className:"mt-2",children:t.items.enum.map(e=>(0,a.jsx)(T,{value:e,children:e},e))}):"models"===e?(0,a.jsx)(p.q,{value:N[e]||[],onChange:t=>A(e,t),context:"global",style:{width:"100%"},options:{includeSpecialOptions:!0}}):"string"===n&&t.enum?(0,a.jsx)(i.default,{style:{width:"100%"},value:N[e]||"",onChange:t=>A(e,t),className:"mt-2",children:t.enum.map(e=>(0,a.jsx)(T,{value:e,children:e},e))}):(0,a.jsx)(r.oi,{value:void 0!==N[e]?String(N[e]):"",onChange:t=>A(e,t.target.value),placeholder:t.description||"",className:"mt-2"})},M=(e,t)=>null==t?(0,a.jsx)("span",{className:"text-gray-400",children:"Not set"}):"budget_duration"===e?(0,a.jsx)("span",{children:(0,m.m)(t)}):"boolean"==typeof t?(0,a.jsx)("span",{children:t?"Enabled":"Disabled"}):"models"===e&&Array.isArray(t)?0===t.length?(0,a.jsx)("span",{className:"text-gray-400",children:"None"}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:t.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-xs",children:(0,u.W0)(e)},t))}):"object"==typeof t?Array.isArray(t)?0===t.length?(0,a.jsx)("span",{className:"text-gray-400",children:"None"}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:t.map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-xs",children:"object"==typeof e?JSON.stringify(e):String(e)},t))}):(0,a.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(t,null,2)}):(0,a.jsx)("span",{children:String(t)});return f?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(d.Z,{size:"large"})}):y?(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(r.Dx,{className:"text-xl",children:"Default Team Settings"}),!f&&y&&(b?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(r.zx,{variant:"secondary",onClick:()=>{_(!1),Z(y.values||{})},disabled:k,children:"Cancel"}),(0,a.jsx)(r.zx,{onClick:I,loading:k,children:"Save Changes"})]}):(0,a.jsx)(r.zx,{onClick:()=>_(!0),children:"Edit Settings"}))]}),(0,a.jsx)(r.xv,{children:"These settings will be applied by default when creating new teams."}),(null==y?void 0:null===(t=y.field_schema)||void 0===t?void 0:t.description)&&(0,a.jsx)(P,{className:"mb-4 mt-2",children:y.field_schema.description}),(0,a.jsx)(r.iz,{}),(0,a.jsx)("div",{className:"mt-4 space-y-4",children:(()=>{let{values:e,field_schema:t}=y;return t&&t.properties?Object.entries(t.properties).map(t=>{let[s,l]=t,n=e[s],i=s.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());return(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200 last:border-0",children:[(0,a.jsx)(r.xv,{className:"font-medium text-lg",children:i}),(0,a.jsx)(P,{className:"text-sm text-gray-500 mt-1",children:l.description||"No description available"}),b?(0,a.jsx)("div",{className:"mt-2",children:L(s,l,n)}):(0,a.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:M(s,n)})]},s)}):(0,a.jsx)(r.xv,{children:"No schema information available"})})()})]}):(0,a.jsx)(r.Zb,{children:(0,a.jsx)(r.xv,{children:"No team settings available or you do not have permission to view them."})})}},54939:function(e,t,s){"use strict";s.d(t,{Z:function(){return D}});var a=s(57437),l=s(78489),r=s(12514),n=s(12485),i=s(18135),o=s(35242),d=s(29706),c=s(77991),m=s(21626),u=s(97214),x=s(28241),p=s(58834),h=s(69552),g=s(71876),f=s(84264),j=s(2265),y=s(17906),v=s(21609),b=s(39957),_=s(9114),N=s(19250),Z=s(87452),k=s(88829),w=s(72208),C=s(49566),S=s(10032),P=s(22116),T=s(12221),I=s(37592),A=s(5545),L=e=>{let{isModalVisible:t,accessToken:s,setIsModalVisible:l,setBudgetList:r}=e,[n]=S.Z.useForm(),i=async e=>{if(null!=s&&void 0!=s)try{_.ZP.info("Making API Call");let t=await (0,N.budgetCreateCall)(s,e);console.log("key create Response:",t),r(e=>e?[...e,t]:[t]),_.ZP.success("Budget Created"),n.resetFields()}catch(e){console.error("Error creating the key:",e),_.ZP.fromBackend("Error creating the key: ".concat(e))}};return(0,a.jsx)(P.Z,{title:"Create Budget",open:t,width:800,footer:null,onOk:()=>{l(!1),n.resetFields()},onCancel:()=>{l(!1),n.resetFields()},children:(0,a.jsxs)(S.Z,{form:n,onFinish:i,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.Z.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,a.jsx)(C.Z,{placeholder:""})}),(0,a.jsx)(S.Z.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,a.jsx)(T.Z,{step:1,precision:2,width:200})}),(0,a.jsx)(S.Z.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,a.jsx)(T.Z,{step:1,precision:2,width:200})}),(0,a.jsxs)(Z.Z,{className:"mt-20 mb-8",children:[(0,a.jsx)(w.Z,{children:(0,a.jsx)("b",{children:"Optional Settings"})}),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(S.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,a.jsx)(T.Z,{step:.01,precision:2,width:200})}),(0,a.jsx)(S.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,a.jsxs)(I.default,{defaultValue:null,placeholder:"n/a",children:[(0,a.jsx)(I.default.Option,{value:"24h",children:"daily"}),(0,a.jsx)(I.default.Option,{value:"7d",children:"weekly"}),(0,a.jsx)(I.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,a.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,a.jsx)(A.ZP,{htmlType:"submit",children:"Create Budget"})})]})})},M=e=>{let{isModalVisible:t,accessToken:s,setIsModalVisible:l,setBudgetList:r,existingBudget:n,handleUpdateCall:i}=e;console.log("existingBudget",n);let[o]=S.Z.useForm();(0,j.useEffect)(()=>{o.setFieldsValue(n)},[n,o]);let d=async e=>{if(null!=s&&void 0!=s)try{_.ZP.info("Making API Call"),l(!0);let t=await (0,N.budgetUpdateCall)(s,e);r(e=>e?[...e,t]:[t]),_.ZP.success("Budget Updated"),o.resetFields(),i()}catch(e){console.error("Error creating the key:",e),_.ZP.fromBackend("Error creating the key: ".concat(e))}};return(0,a.jsx)(P.Z,{title:"Edit Budget",open:t,width:800,footer:null,onOk:()=>{l(!1),o.resetFields()},onCancel:()=>{l(!1),o.resetFields()},children:(0,a.jsxs)(S.Z,{form:o,onFinish:d,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:n,children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.Z.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,a.jsx)(C.Z,{placeholder:""})}),(0,a.jsx)(S.Z.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,a.jsx)(T.Z,{step:1,precision:2,width:200})}),(0,a.jsx)(S.Z.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,a.jsx)(T.Z,{step:1,precision:2,width:200})}),(0,a.jsxs)(Z.Z,{className:"mt-20 mb-8",children:[(0,a.jsx)(w.Z,{children:(0,a.jsx)("b",{children:"Optional Settings"})}),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(S.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,a.jsx)(T.Z,{step:.01,precision:2,width:200})}),(0,a.jsx)(S.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,a.jsxs)(I.default,{defaultValue:null,placeholder:"n/a",children:[(0,a.jsx)(I.default.Option,{value:"24h",children:"daily"}),(0,a.jsx)(I.default.Option,{value:"7d",children:"weekly"}),(0,a.jsx)(I.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,a.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,a.jsx)(A.ZP,{htmlType:"submit",children:"Save"})})]})})},D=e=>{let{accessToken:t}=e,[s,Z]=(0,j.useState)(!1),[k,w]=(0,j.useState)(!1),[C,S]=(0,j.useState)(null),[P,T]=(0,j.useState)([]),[I,A]=(0,j.useState)(!1),[D,E]=(0,j.useState)(!1);(0,j.useEffect)(()=>{t&&(0,N.getBudgetList)(t).then(e=>{T(e)})},[t]);let z=async e=>{null!=t&&(S(e),w(!0))},F=e=>{S(e),E(!0)},q=async()=>{if(C&&null!=t){A(!0);try{await (0,N.budgetDeleteCall)(t,C.budget_id),_.ZP.success("Budget deleted."),await R()}catch(e){console.error("Error deleting budget:",e),"function"==typeof _.ZP.fromBackend?_.ZP.fromBackend("Failed to delete budget"):_.ZP.info("Failed to delete budget")}finally{A(!1),E(!1),S(null)}}},R=async()=>{null!=t&&(0,N.getBudgetList)(t).then(e=>{T(e)})};return(0,a.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,a.jsx)(l.Z,{size:"sm",variant:"primary",className:"mb-2",onClick:()=>Z(!0),children:"+ Create Budget"}),(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(n.Z,{children:"Budgets"}),(0,a.jsx)(n.Z,{children:"Examples"})]}),(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(d.Z,{children:(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)(L,{accessToken:t,isModalVisible:s,setIsModalVisible:Z,setBudgetList:T}),C&&(0,a.jsx)(M,{accessToken:t,isModalVisible:k,setIsModalVisible:w,setBudgetList:T,existingBudget:C,handleUpdateCall:R}),(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(f.Z,{children:"Create a budget to assign to customers."}),(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(p.Z,{children:(0,a.jsxs)(g.Z,{children:[(0,a.jsx)(h.Z,{children:"Budget ID"}),(0,a.jsx)(h.Z,{children:"Max Budget"}),(0,a.jsx)(h.Z,{children:"TPM"}),(0,a.jsx)(h.Z,{children:"RPM"})]})}),(0,a.jsx)(u.Z,{children:P.slice().sort((e,t)=>new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime()).map((e,t)=>(0,a.jsxs)(g.Z,{children:[(0,a.jsx)(x.Z,{children:e.budget_id}),(0,a.jsx)(x.Z,{children:e.max_budget?e.max_budget:"n/a"}),(0,a.jsx)(x.Z,{children:e.tpm_limit?e.tpm_limit:"n/a"}),(0,a.jsx)(x.Z,{children:e.rpm_limit?e.rpm_limit:"n/a"}),(0,a.jsx)(b.Z,{variant:"Edit",tooltipText:"Edit budget",onClick:()=>z(e),dataTestId:"edit-budget-button"}),(0,a.jsx)(b.Z,{variant:"Delete",tooltipText:"Delete budget",onClick:()=>F(e),dataTestId:"delete-budget-button"})]},t))})]})]}),(0,a.jsx)(v.Z,{isOpen:D,title:"Delete Budget?",message:"Are you sure you want to delete this budget? This action cannot be undone.",resourceInformationTitle:"Budget Information",resourceInformation:[{label:"Budget ID",value:null==C?void 0:C.budget_id,code:!0},{label:"Max Budget",value:null==C?void 0:C.max_budget},{label:"TPM",value:null==C?void 0:C.tpm_limit},{label:"RPM",value:null==C?void 0:C.rpm_limit}],onCancel:()=>{E(!1)},onOk:q,confirmLoading:I})]})}),(0,a.jsx)(d.Z,{children:(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)(f.Z,{className:"text-base",children:"How to use budget id"}),(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)(o.Z,{children:[(0,a.jsx)(n.Z,{children:"Assign Budget to Customer"}),(0,a.jsx)(n.Z,{children:"Test it (Curl)"}),(0,a.jsx)(n.Z,{children:"Test it (OpenAI SDK)"})]}),(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(d.Z,{children:(0,a.jsx)(y.Z,{language:"bash",children:"\ncurl -X POST --location '<your_proxy_base_url>/end_user/new' \\\n\n-H 'Authorization: Bearer <your-master-key>' \\\n\n-H 'Content-Type: application/json' \\\n\n-d '{\"user_id\": \"my-customer-id', \"budget_id\": \"<BUDGET_ID>\"}' # \uD83D\uDC48 KEY CHANGE\n\n"})}),(0,a.jsx)(d.Z,{children:(0,a.jsx)(y.Z,{language:"bash",children:'\ncurl -X POST --location \'<your_proxy_base_url>/chat/completions\' \\\n\n-H \'Authorization: Bearer <your-master-key>\' \\\n\n-H \'Content-Type: application/json\' \\\n\n-d \'{\n  "model": "gpt-3.5-turbo\',\n  "messages":[{"role": "user", "content": "Hey, how\'s it going?"}],\n  "user": "my-customer-id"\n}\' # \uD83D\uDC48 KEY CHANGE\n\n'})}),(0,a.jsx)(d.Z,{children:(0,a.jsx)(y.Z,{language:"python",children:'from openai import OpenAI\nclient = OpenAI(\n  base_url="<your_proxy_base_url>",\n  api_key="<your_proxy_key>"\n)\n\ncompletion = client.chat.completions.create(\n  model="gpt-3.5-turbo",\n  messages=[\n    {"role": "system", "content": "You are a helpful assistant."},\n    {"role": "user", "content": "Hello!"}\n  ],\n  user="my-customer-id"\n)\n\nprint(completion.choices[0].message)'})})]})]})]})})]})]})]})}},94987:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(57437),l=s(10012),r=s(91323);function n(){return(0,a.jsxs)("div",{className:(0,l.cx)("h-screen","flex items-center justify-center gap-4"),children:[(0,a.jsx)("div",{className:"text-lg font-medium py-2 pr-4 border-r border-r-gray-200",children:"\uD83D\uDE85 LiteLLM"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(r.S,{className:"size-4"}),(0,a.jsx)("span",{className:"text-gray-600 text-sm",children:"Loading..."})]})]})}},50865:function(e,t,s){"use strict";s.d(t,{Z:function(){return G}});var a=s(57437),l=s(2265),r=s(41649),n=s(78489),i=s(12514),o=s(47323),d=s(59341),c=s(21626),m=s(97214),u=s(28241),x=s(58834),p=s(69552),h=s(71876),g=s(84264),f=s(58643),j=s(19250),y=s(12221),v=s(44643),b=s(74998),_=s(16312),N=s(9114),Z=s(56334),k=e=>{let{accessToken:t,userRole:s,userID:r,modelData:n}=e,[i,o]=(0,l.useState)({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),[d,c]=(0,l.useState)([]),[m,u]=(0,l.useState)({}),[x,p]=(0,l.useState)({});return((0,l.useEffect)(()=>{t&&s&&r&&((0,j.getCallbacksCall)(t,r,s).then(e=>{console.log("callbacks",e);let t=e.router_settings;"model_group_retry_policy"in t&&delete t.model_group_retry_policy;let s=t.routing_strategy||null;o(e=>({...e,routerSettings:t,selectedStrategy:s}))}),(0,j.getRouterSettingsCall)(t).then(e=>{if(console.log("router settings from API",e),e.fields){let t={};e.fields.forEach(e=>{t[e.field_name]={ui_field_name:e.ui_field_name,field_description:e.field_description,options:e.options,link:e.link}}),u(t);let s=e.fields.find(e=>"routing_strategy"===e.field_name);(null==s?void 0:s.options)&&c(s.options),e.routing_strategy_descriptions&&p(e.routing_strategy_descriptions);let a=e.fields.find(e=>"enable_tag_filtering"===e.field_name);(null==a?void 0:a.field_value)!==null&&(null==a?void 0:a.field_value)!==void 0&&o(e=>({...e,enableTagFiltering:a.field_value}))}}))},[t,s,r]),t)?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(Z.Z,{value:i,onChange:o,routerFieldsMetadata:m,availableRoutingStrategies:d,routingStrategyDescriptions:x}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6 flex justify-end gap-3",children:[(0,a.jsx)(_.z,{variant:"secondary",size:"sm",onClick:()=>window.location.reload(),className:"text-sm",children:"Reset"}),(0,a.jsx)(_.z,{size:"sm",onClick:()=>{if(!t)return;let e=i.routerSettings;console.log("router_settings",e);let s=new Set(["allowed_fails","cooldown_time","num_retries","timeout","retry_after"]),a=new Set(["model_group_alias","retry_policy"]),l=(e,t,l)=>{if(void 0===t)return l;let r=t.trim();if("null"===r.toLowerCase())return null;if(s.has(e)){let e=Number(r);return Number.isNaN(e)?l:e}if(a.has(e)){if(""===r)return null;try{return JSON.parse(r)}catch(e){return l}}return"true"===r.toLowerCase()||"false"!==r.toLowerCase()&&r},r=Object.fromEntries(Object.entries({...e,enable_tag_filtering:i.enableTagFiltering}).map(e=>{let[t,s]=e;if("routing_strategy_args"!==t&&"routing_strategy"!==t&&"enable_tag_filtering"!==t){let e=document.querySelector('input[name="'.concat(t,'"]')),a=l(t,null==e?void 0:e.value,s);return[t,a]}if("routing_strategy"===t)return[t,i.selectedStrategy];if("enable_tag_filtering"===t)return[t,i.enableTagFiltering];if("routing_strategy_args"===t&&"latency-based-routing"===i.selectedStrategy){let e={},t=document.querySelector('input[name="lowest_latency_buffer"]'),s=document.querySelector('input[name="ttl"]');return(null==t?void 0:t.value)&&(e.lowest_latency_buffer=Number(t.value)),(null==s?void 0:s.value)&&(e.ttl=Number(s.value)),console.log("setRoutingStrategyArgs: ".concat(e)),["routing_strategy_args",e]}return null}).filter(e=>null!=e));console.log("updatedVariables",r);try{(0,j.setCallbacksCall)(t,{router_settings:r})}catch(e){N.ZP.fromBackend("Failed to update router settings: "+e)}N.ZP.success("router settings updated successfully")},className:"text-sm font-medium",children:"Save Changes"})]})]}):null},w=s(4933),C=s(31225),S=s(91126),P=s(57840),T=s(99981),I=s(7271),A=s(21609),L=s(45188),M=s(42264),D=s(5545),E=s(10703),z=s(22116),F=s(76858);function q(e){let{open:t,onCancel:s,children:l}=e;return(0,a.jsx)(z.Z,{title:(0,a.jsx)("div",{className:"pb-4 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,a.jsx)("div",{className:"p-2 bg-indigo-50 rounded-lg",children:(0,a.jsx)(F.Z,{className:"w-5 h-5 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold m-0",children:"Configure Model Fallbacks"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 font-normal m-0",children:"Manage multiple fallback chains for different models (up to 5 groups at a time)"})]})]})}),open:t,width:900,footer:null,onCancel:s,maskClosable:!1,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,a.jsx)("div",{className:"mt-6",children:l})})}var R=s(89348);function O(e){let{models:t,accessToken:s,value:r=[],onChange:n}=e,[i,o]=(0,l.useState)(!1),[d,c]=(0,l.useState)([]),[m,u]=(0,l.useState)(0),[x,p]=(0,l.useState)(!1),[h,g]=(0,l.useState)([{id:"1",primaryModel:null,fallbackModels:[]}]);(0,l.useEffect)(()=>{i&&(g([{id:"1",primaryModel:null,fallbackModels:[]}]),u(e=>e+1))},[i]),(0,l.useEffect)(()=>{let e=async()=>{try{let e=await (0,E.p)(s);console.log("Fetched models for fallbacks:",e),c(e)}catch(e){console.error("Error fetching model info for fallbacks:",e)}};i&&e()},[s,i]);let f=Array.from(new Set(d.map(e=>e.model_group))).sort(),j=()=>{o(!1),g([{id:"1",primaryModel:null,fallbackModels:[]}])},y=async()=>{let e=h.filter(e=>!e.primaryModel||0===e.fallbackModels.length);if(e.length>0){M.ZP.error("Please complete configuration for all groups. ".concat(e.length," group(s) incomplete."));return}let t=[...r||[],...h.map(e=>({[e.primaryModel]:e.fallbackModels}))];if(n){p(!0);try{await n(t),N.ZP.success("".concat(h.length," fallback configuration(s) added successfully!")),j()}catch(e){console.error("Error saving fallbacks:",e)}finally{p(!1)}}else N.ZP.fromBackend("onChange callback not provided")};return(0,a.jsxs)("div",{children:[(0,a.jsx)(_.z,{className:"mx-auto",onClick:()=>o(!0),icon:()=>(0,a.jsx)("span",{className:"mr-1",children:"+"}),children:"Add Fallbacks"}),(0,a.jsxs)(q,{open:i,onCancel:j,children:[(0,a.jsx)(R.$,{groups:h,onGroupsChange:g,availableModels:f,maxFallbacks:10,maxGroups:5},m),h.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 mt-6 border-t border-gray-100",children:[(0,a.jsx)(D.ZP,{type:"default",onClick:j,disabled:x,children:"Cancel"}),(0,a.jsx)(D.ZP,{type:"default",onClick:y,disabled:0===h.length||x,loading:x,children:x?"Saving Configuration...":"Save All Configurations"})]})]})]})}let B="inline-flex items-center gap-2 px-2.5 py-1 rounded-md border border-gray-200 bg-gray-50 text-sm font-medium text-gray-800 shrink-0";async function U(e,t){console.log=function(){};let s=window.location.origin,l=new I.ZP.OpenAI({apiKey:t,baseURL:s,dangerouslyAllowBrowser:!0});try{N.ZP.info("Testing fallback model response...");let t=await l.chat.completions.create({model:e,messages:[{role:"user",content:"Hi, this is a test message"}],mock_testing_fallbacks:!0});N.ZP.success((0,a.jsxs)("span",{children:["Test model=",(0,a.jsx)("strong",{children:e}),", received model=",(0,a.jsx)("strong",{children:t.model}),". See"," ",(0,a.jsx)("a",{href:"#",onClick:()=>window.open("https://docs.litellm.ai/docs/proxy/reliability","_blank"),style:{textDecoration:"underline",color:"blue"},children:"curl"})]}))}catch(e){N.ZP.fromBackend("Error occurred while generating model response. Please try again. Error: ".concat(e))}}var V=e=>{let{accessToken:t,userRole:s,userID:r,modelData:n}=e,[i,d]=(0,l.useState)({}),[g,f]=(0,l.useState)(!1),[y,v]=(0,l.useState)(null),[_,Z]=(0,l.useState)(!1),{data:k}=(0,w.i)(),I=e=>{if(null!=k&&"object"==typeof k&&e in k){var t;return null!==(t=k[e].litellm_provider)&&void 0!==t?t:""}return""};(0,l.useEffect)(()=>{t&&s&&r&&(0,j.getCallbacksCall)(t,r,s).then(e=>{console.log("callbacks",e);let t=e.router_settings;"model_group_retry_policy"in t&&delete t.model_group_retry_policy,d(t)})},[t,s,r]);let M=e=>{v(e),Z(!0)},D=async()=>{if(!y||!t)return;let e=Object.keys(y)[0];if(!e)return;f(!0);let s=i.fallbacks.map(t=>{let s={...t};return e in s&&Array.isArray(s[e])&&delete s[e],s}).filter(e=>Object.keys(e).length>0),a={...i,fallbacks:s};try{await (0,j.setCallbacksCall)(t,{router_settings:a}),d(a),N.ZP.success("Router settings updated successfully")}catch(e){N.ZP.fromBackend("Failed to update router settings: "+e)}finally{f(!1),Z(!1),v(null)}};if(!t)return null;let E=async e=>{if(!t)return;let a={...i,fallbacks:e};try{await (0,j.setCallbacksCall)(t,{router_settings:a}),d(a)}catch(e){throw N.ZP.fromBackend("Failed to update router settings: "+e),t&&s&&r&&(0,j.getCallbacksCall)(t,r,s).then(e=>{let t=e.router_settings;"model_group_retry_policy"in t&&delete t.model_group_retry_policy,d(t)}),e}},z=Array.isArray(i.fallbacks)&&i.fallbacks.length>0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O,{models:(null==n?void 0:n.data)?n.data.map(e=>e.model_name):[],accessToken:t||"",value:i.fallbacks||[],onChange:E}),z?(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(x.Z,{children:(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(p.Z,{children:"Model Name"}),(0,a.jsx)(p.Z,{children:"Fallbacks"}),(0,a.jsx)(p.Z,{children:"Actions"})]})}),(0,a.jsx)(m.Z,{children:i.fallbacks.map((e,s)=>Object.entries(e).map(r=>{let[n,i]=r;return(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(u.Z,{className:"align-top",children:function(e,t){var s;let l=null!==(s=null==t?void 0:t(e))&&void 0!==s?s:e;return(0,a.jsxs)("span",{className:B,children:[(0,a.jsx)(L.K,{provider:l,className:"w-4 h-4 shrink-0"}),(0,a.jsx)("span",{children:e})]})}(n,I)}),(0,a.jsx)(u.Z,{className:"align-top",children:function(e,t,s){let r=Array.isArray(t)?t:[];if(0===r.length)return null;let n=e=>{var t;let{modelName:l}=e,r=null!==(t=null==s?void 0:s(l))&&void 0!==t?t:l;return(0,a.jsxs)("span",{className:B,children:[(0,a.jsx)(L.K,{provider:r,className:"w-4 h-4 shrink-0"}),(0,a.jsx)("span",{children:l})]})};return(0,a.jsxs)("span",{className:"grid grid-cols-[auto_1fr] items-start gap-x-2 w-full min-w-0",children:[(0,a.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 shrink-0 self-start text-blue-600","aria-hidden":!0,children:(0,a.jsx)(C.Z,{className:"w-5 h-5 stroke-[2.5]"})}),(0,a.jsx)("span",{className:"flex flex-wrap items-start gap-1 min-w-0",children:r.map((e,t)=>(0,a.jsxs)(l.Fragment,{children:[t>0&&(0,a.jsx)(o.Z,{icon:C.Z,size:"xs",className:"shrink-0 text-gray-400"}),(0,a.jsx)(n,{modelName:e})]},e))})]})}(0,Array.isArray(i)?i:[],I)}),(0,a.jsxs)(u.Z,{className:"align-top",children:[(0,a.jsx)(T.Z,{title:"Test fallback",children:(0,a.jsx)(o.Z,{icon:S.Z,size:"sm",onClick:()=>U(Object.keys(e)[0],t||""),className:"cursor-pointer hover:text-blue-600"})}),(0,a.jsx)(T.Z,{title:"Delete fallback",children:(0,a.jsx)("span",{"data-testid":"delete-fallback-button",role:"button",tabIndex:0,onClick:()=>M(e),onKeyDown:t=>"Enter"===t.key&&M(e),className:"cursor-pointer inline-flex",children:(0,a.jsx)(o.Z,{icon:b.Z,size:"sm",className:"hover:text-red-600"})})})]})]},s.toString()+n)}))})]}):(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 px-4 py-6 text-center",children:(0,a.jsx)(P.default.Text,{type:"secondary",children:"No fallbacks configured. Add fallbacks to automatically try another model when the primary fails."})}),(0,a.jsx)(A.Z,{isOpen:_,title:"Delete Fallback?",message:"Are you sure you want to delete this fallback? This action cannot be undone.",resourceInformationTitle:"Fallback Information",resourceInformation:[{label:"Model Name",value:y?Object.keys(y)[0]:"",code:!0}],onCancel:()=>{Z(!1),v(null)},onOk:D,confirmLoading:g})]})},G=e=>{let{accessToken:t,userRole:s,userID:_,modelData:N}=e,[Z,w]=(0,l.useState)([]);(0,l.useEffect)(()=>{t&&(0,j.getGeneralSettingsCall)(t).then(e=>{w(e)})},[t]);let C=(e,t)=>{w(Z.map(s=>s.field_name===e?{...s,field_value:t}:s))},S=(e,s)=>{if(!t)return;let a=Z[s].field_value;if(null!=a&&void 0!=a)try{(0,j.updateConfigFieldSetting)(t,e,a);let s=Z.map(t=>t.field_name===e?{...t,stored_in_db:!0}:t);w(s)}catch(e){}},P=(e,s)=>{if(t)try{(0,j.deleteConfigFieldSetting)(t,e);let s=Z.map(t=>t.field_name===e?{...t,stored_in_db:null,field_value:null}:t);w(s)}catch(e){}};return t?(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)(f.v0,{className:"h-[75vh] w-full",children:[(0,a.jsxs)(f.td,{variant:"line",defaultValue:"1",className:"px-8 pt-4",children:[(0,a.jsx)(f.OK,{value:"1",children:"Loadbalancing"}),(0,a.jsx)(f.OK,{value:"2",children:"Fallbacks"}),(0,a.jsx)(f.OK,{value:"3",children:"General"})]}),(0,a.jsxs)(f.nP,{className:"px-8 py-6",children:[(0,a.jsx)(f.x4,{children:(0,a.jsx)(k,{accessToken:t,userRole:s,userID:_,modelData:N})}),(0,a.jsx)(f.x4,{children:(0,a.jsx)(V,{accessToken:t,userRole:s,userID:_,modelData:N})}),(0,a.jsx)(f.x4,{children:(0,a.jsx)(i.Z,{children:(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(x.Z,{children:(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(p.Z,{children:"Setting"}),(0,a.jsx)(p.Z,{children:"Value"}),(0,a.jsx)(p.Z,{children:"Status"}),(0,a.jsx)(p.Z,{children:"Action"})]})}),(0,a.jsx)(m.Z,{children:Z.filter(e=>"TypedDictionary"!==e.field_type).map((e,t)=>(0,a.jsxs)(h.Z,{children:[(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(g.Z,{children:e.field_name}),(0,a.jsx)("p",{style:{fontSize:"0.65rem",color:"#808080",fontStyle:"italic"},className:"mt-1",children:e.field_description})]}),(0,a.jsx)(u.Z,{children:"Integer"==e.field_type?(0,a.jsx)(y.Z,{step:1,value:e.field_value,onChange:t=>C(e.field_name,t)}):"Boolean"==e.field_type?(0,a.jsx)(d.Z,{checked:!0===e.field_value||"true"===e.field_value,onChange:t=>C(e.field_name,t)}):null}),(0,a.jsx)(u.Z,{children:!0==e.stored_in_db?(0,a.jsx)(r.Z,{icon:v.Z,className:"text-white",children:"In DB"}):!1==e.stored_in_db?(0,a.jsx)(r.Z,{className:"text-gray bg-white outline",children:"In Config"}):(0,a.jsx)(r.Z,{className:"text-gray bg-white outline",children:"Not Set"})}),(0,a.jsxs)(u.Z,{children:[(0,a.jsx)(n.Z,{onClick:()=>S(e.field_name,t),children:"Update"}),(0,a.jsx)(o.Z,{icon:b.Z,color:"red",onClick:()=>P(e.field_name,t),children:"Reset"})]})]},t))})]})})})]})]})}):null}},918:function(e,t,s){"use strict";var a=s(57437),l=s(2265),r=s(62490),n=s(19250),i=s(9114);t.Z=e=>{let{accessToken:t,userID:s}=e,[o,d]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{if(t&&s)try{let e=await (0,n.availableTeamListCall)(t);d(e)}catch(e){console.error("Error fetching available teams:",e)}})()},[t,s]);let c=async e=>{if(t&&s)try{await (0,n.teamMemberAddCall)(t,e,{user_id:s,role:"user"}),i.ZP.success("Successfully joined team"),d(t=>t.filter(t=>t.team_id!==e))}catch(e){console.error("Error joining team:",e),i.ZP.fromBackend("Failed to join team")}};return(0,a.jsx)(r.Zb,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh]",children:(0,a.jsxs)(r.iA,{children:[(0,a.jsx)(r.ss,{children:(0,a.jsxs)(r.SC,{children:[(0,a.jsx)(r.xs,{children:"Team Name"}),(0,a.jsx)(r.xs,{children:"Description"}),(0,a.jsx)(r.xs,{children:"Members"}),(0,a.jsx)(r.xs,{children:"Models"}),(0,a.jsx)(r.xs,{children:"Actions"})]})}),(0,a.jsxs)(r.RM,{children:[o.map(e=>(0,a.jsxs)(r.SC,{children:[(0,a.jsx)(r.pj,{children:(0,a.jsx)(r.xv,{children:e.team_alias})}),(0,a.jsx)(r.pj,{children:(0,a.jsx)(r.xv,{children:e.description||"No description available"})}),(0,a.jsx)(r.pj,{children:(0,a.jsxs)(r.xv,{children:[e.members_with_roles.length," members"]})}),(0,a.jsx)(r.pj,{children:(0,a.jsx)("div",{className:"flex flex-col",children:e.models&&0!==e.models.length?e.models.map((e,t)=>(0,a.jsx)(r.Ct,{size:"xs",className:"mb-1",color:"blue",children:(0,a.jsx)(r.xv,{children:e.length>30?"".concat(e.slice(0,30),"..."):e})},t)):(0,a.jsx)(r.Ct,{size:"xs",color:"red",children:(0,a.jsx)(r.xv,{children:"All Proxy Models"})})})}),(0,a.jsx)(r.pj,{children:(0,a.jsx)(r.zx,{size:"xs",variant:"secondary",onClick:()=>c(e.team_id),children:"Join Team"})})]},e.team_id)),0===o.length&&(0,a.jsx)(r.SC,{children:(0,a.jsx)(r.pj,{colSpan:5,className:"text-center",children:(0,a.jsxs)(r.xv,{children:["No available teams to join. See how to set available teams"," ",(0,a.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/self_serve#all-settings-for-self-serve--sso-flow",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 underline",children:"here"}),"."]})})})]})]})})}},59004:function(e,t,s){"use strict";var a=s(57437),l=s(2265),r=s(5545),n=s(23639),i=s(21700),o=s(19250),d=s(9114);t.Z=e=>{let{accessToken:t}=e,[s,c]=(0,l.useState)('{\n  "model": "openai/gpt-4o",\n  "messages": [\n    {\n      "role": "system",\n      "content": "You are a helpful assistant."\n    },\n    {\n      "role": "user",\n      "content": "Explain quantum computing in simple terms"\n    }\n  ],\n  "temperature": 0.7,\n  "max_tokens": 500,\n  "stream": true\n}'),[m,u]=(0,l.useState)(""),[x,p]=(0,l.useState)(!1),h=(e,t,s)=>{let a=JSON.stringify(t,null,2).split("\n").map(e=>"  ".concat(e)).join("\n"),l=Object.entries(s).map(e=>{let[t,s]=e;return"-H '".concat(t,": ").concat(s,"'")}).join(" \\\n  ");return"curl -X POST \\\n  ".concat(e," \\\n  ").concat(l?"".concat(l," \\\n  "):"","-H 'Content-Type: application/json' \\\n  -d '{\n").concat(a,"\n  }'")},g=async()=>{p(!0);try{let e;try{e=JSON.parse(s)}catch(e){d.ZP.fromBackend("Invalid JSON in request body"),p(!1);return}let a={call_type:"completion",request_body:e};if(!t){d.ZP.fromBackend("No access token found"),p(!1);return}let l=await (0,o.transformRequestCall)(t,a);if(l.raw_request_api_base&&l.raw_request_body){let e=h(l.raw_request_api_base,l.raw_request_body,l.raw_request_headers||{});u(e),d.ZP.success("Request transformed successfully")}else{let e="string"==typeof l?l:JSON.stringify(l);u(e),d.ZP.info("Transformed request received in unexpected format")}}catch(e){console.error("Error transforming request:",e),d.ZP.fromBackend("Failed to transform request")}finally{p(!1)}};return(0,a.jsxs)("div",{className:"w-full m-2",style:{overflow:"hidden"},children:[(0,a.jsx)(i.D,{children:"Playground"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"See how LiteLLM transforms your request for the specified provider."}),(0,a.jsxs)("div",{style:{display:"flex",gap:"16px",width:"100%",minWidth:0,overflow:"hidden"},className:"mt-4",children:[(0,a.jsxs)("div",{style:{flex:"1 1 50%",display:"flex",flexDirection:"column",border:"1px solid #e8e8e8",borderRadius:"8px",padding:"24px",overflow:"hidden",maxHeight:"600px",minWidth:0},children:[(0,a.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,a.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 4px 0"},children:"Original Request"}),(0,a.jsx)("p",{style:{color:"#666",margin:0},children:"The request you would send to LiteLLM /chat/completions endpoint."})]}),(0,a.jsx)("textarea",{style:{flex:"1 1 auto",width:"100%",minHeight:"240px",padding:"16px",border:"1px solid #e8e8e8",borderRadius:"6px",fontFamily:"monospace",fontSize:"14px",resize:"none",marginBottom:"24px",overflow:"auto"},value:s,onChange:e=>c(e.target.value),onKeyDown:e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),g())},placeholder:"Press Cmd/Ctrl + Enter to transform"}),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"auto"},children:(0,a.jsxs)(r.ZP,{type:"primary",style:{backgroundColor:"#000",display:"flex",alignItems:"center",gap:"8px"},onClick:g,loading:x,children:[(0,a.jsx)("span",{children:"Transform"}),(0,a.jsx)("span",{children:"→"})]})})]}),(0,a.jsxs)("div",{style:{flex:"1 1 50%",display:"flex",flexDirection:"column",border:"1px solid #e8e8e8",borderRadius:"8px",padding:"24px",overflow:"hidden",maxHeight:"800px",minWidth:0},children:[(0,a.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,a.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 4px 0"},children:"Transformed Request"}),(0,a.jsx)("p",{style:{color:"#666",margin:0},children:"How LiteLLM transforms your request for the specified provider."}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{style:{color:"#666",margin:0},className:"text-xs",children:"Note: Sensitive headers are not shown."})]}),(0,a.jsxs)("div",{style:{position:"relative",backgroundColor:"#f5f5f5",borderRadius:"6px",flex:"1 1 auto",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,a.jsx)("pre",{style:{padding:"16px",fontFamily:"monospace",fontSize:"14px",margin:0,overflow:"auto",flex:"1 1 auto"},children:m||'curl -X POST \\\n  https://api.openai.com/v1/chat/completions \\\n  -H \'Authorization: Bearer sk-xxx\' \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n  "model": "gpt-4",\n  "messages": [\n    {\n      "role": "system",\n      "content": "You are a helpful assistant."\n    }\n  ],\n  "temperature": 0.7\n  }\''}),(0,a.jsx)(r.ZP,{type:"text",icon:(0,a.jsx)(n.Z,{}),style:{position:"absolute",right:"8px",top:"8px"},size:"small",onClick:()=>{navigator.clipboard.writeText(m||""),d.ZP.success("Copied to clipboard")}})]})]})]}),(0,a.jsx)("div",{className:"mt-4 text-right w-full",children:(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Found an error? File an issue"," ",(0,a.jsx)("a",{href:"https://github.com/BerriAI/litellm/issues",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})})]})}},5183:function(e,t,s){"use strict";var a=s(57437),l=s(2265),r=s(19046),n=s(69734),i=s(19250),o=s(9114);t.Z=e=>{let{userID:t,userRole:s,accessToken:d}=e,{logoUrl:c,setLogoUrl:m,faviconUrl:u,setFaviconUrl:x}=(0,n.F)(),[p,h]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),[j,y]=(0,l.useState)(!1);(0,l.useEffect)(()=>{d&&v()},[d]);let v=async()=>{try{let l=(0,i.getProxyBaseUrl)(),r=await fetch(l?"".concat(l,"/get/ui_theme_settings"):"/get/ui_theme_settings",{method:"GET",headers:{[(0,i.getGlobalLitellmHeaderName)()]:"Bearer ".concat(d),"Content-Type":"application/json"}});if(r.ok){var e,t,s,a;let l=await r.json();h((null===(e=l.values)||void 0===e?void 0:e.logo_url)||""),f((null===(t=l.values)||void 0===t?void 0:t.favicon_url)||""),m((null===(s=l.values)||void 0===s?void 0:s.logo_url)||null),x((null===(a=l.values)||void 0===a?void 0:a.favicon_url)||null)}}catch(e){console.error("Error fetching theme settings:",e)}},b=async()=>{y(!0);try{let e=(0,i.getProxyBaseUrl)();if((await fetch(e?"".concat(e,"/update/ui_theme_settings"):"/update/ui_theme_settings",{method:"PATCH",headers:{[(0,i.getGlobalLitellmHeaderName)()]:"Bearer ".concat(d),"Content-Type":"application/json"},body:JSON.stringify({logo_url:p||null,favicon_url:g||null})})).ok)o.ZP.success("Theme settings updated successfully!"),m(p||null),x(g||null);else throw Error("Failed to update settings")}catch(e){console.error("Error updating theme settings:",e),o.ZP.fromBackend("Failed to update theme settings")}finally{y(!1)}},_=async()=>{h(""),f(""),m(null),x(null),y(!0);try{let e=(0,i.getProxyBaseUrl)();if((await fetch(e?"".concat(e,"/update/ui_theme_settings"):"/update/ui_theme_settings",{method:"PATCH",headers:{[(0,i.getGlobalLitellmHeaderName)()]:"Bearer ".concat(d),"Content-Type":"application/json"},body:JSON.stringify({logo_url:null,favicon_url:null})})).ok)o.ZP.success("Theme settings reset to default!");else throw Error("Failed to reset")}catch(e){console.error("Error resetting theme settings:",e),o.ZP.fromBackend("Failed to reset theme settings")}finally{y(!1)}};return d?(0,a.jsxs)("div",{className:"w-full mx-auto max-w-4xl px-6 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(r.Dx,{className:"text-2xl font-bold mb-2",children:"UI Theme Customization"}),(0,a.jsx)(r.xv,{className:"text-gray-600",children:"Customize your LiteLLM admin dashboard with a custom logo and favicon."})]}),(0,a.jsx)(r.Zb,{className:"shadow-sm p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(r.xv,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Custom Logo URL"}),(0,a.jsx)(r.oi,{placeholder:"https://example.com/logo.png",value:p,onValueChange:e=>{h(e),m(e||null)},className:"w-full"}),(0,a.jsx)(r.xv,{className:"text-xs text-gray-500 mt-1",children:"Enter a URL for your custom logo or leave empty for default"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(r.xv,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Custom Favicon URL"}),(0,a.jsx)(r.oi,{placeholder:"https://example.com/favicon.ico",value:g,onValueChange:e=>{f(e),x(e||null)},className:"w-full"}),(0,a.jsx)(r.xv,{className:"text-xs text-gray-500 mt-1",children:"Enter a URL for your custom favicon (.ico, .png, or .svg) or leave empty for default"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(r.zx,{onClick:b,loading:j,disabled:j,color:"indigo",children:"Save Changes"}),(0,a.jsx)(r.zx,{onClick:_,loading:j,disabled:j,variant:"secondary",color:"gray",children:"Reset to Default"})]})]})})]}):null}}},function(e){e.O(0,[9546,1047,6990,7271,5173,7651,4865,7840,337,3367,5869,2652,2926,353,172,3709,536,7474,6894,9258,6941,9190,9967,6609,5319,2618,9442,9961,7906,5986,2442,9348,8667,3560,1956,3717,5733,8921,8758,9042,236,3889,6191,5791,8640,1098,694,7526,1953,7714,6554,3729,7636,9599,1064,1811,1125,3494,3073,3837,4221,8093,2684,6213,9264,6600,9885,8143,6891,1112,2971,2117,1744],function(){return e(e.s=36362)}),_N_E=e.O()}]);