(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8461],{8672:function(t,e,s){Promise.resolve().then(s.bind(s,24308))},24308:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return N}});var i=s(57437),n=s(2265),r=s(99376),a=s(54114),o=s(29827),u=s(14474),l=s(19250),c=s(71632),d=s(21770),h=s(76191);let m=(0,s(90246).n)("onboarding"),p=t=>{let{isLoading:e}=(0,h.p)();return(0,c.a)({queryKey:m.detail(null!=t?t:""),queryFn:async()=>{if(!t)throw Error("inviteId is required");return(0,l.getOnboardingCredentials)(t)},enabled:!!t&&!e})},f=()=>(0,d.D)({mutationFn:async t=>{let{accessToken:e,inviteId:s,userId:i,password:n}=t;return await (0,l.claimOnboardingToken)(e,s,i,n)}});var g=s(10353),v=s(61935);function x(){return(0,i.jsx)("div",{className:"mx-auto w-full max-w-md mt-10 flex justify-center",children:(0,i.jsx)(g.Z,{indicator:(0,i.jsx)(v.Z,{spin:!0}),size:"large"})})}var y=s(51653),b=s(5545);function w(){return(0,i.jsxs)("div",{className:"mx-auto w-full max-w-md mt-10",children:[(0,i.jsx)(y.Z,{type:"error",message:"Failed to load invitation",description:"The invitation link may be invalid or expired.",showIcon:!0}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(b.ZP,{href:"/ui/login",children:"Back to Login"})})]})}var j=s(10032),P=s(5945),O=s(57840),S=s(4260);function k(t){let{variant:e,userEmail:s,isPending:r,claimError:a,onSubmit:o}=t,[u]=j.Z.useForm();return n.useEffect(()=>{s&&u.setFieldValue("user_email",s)},[s,u]),(0,i.jsx)("div",{className:"mx-auto w-full max-w-md mt-10",children:(0,i.jsxs)(P.Z,{children:[(0,i.jsx)(O.default.Title,{level:5,className:"text-center mb-5",children:"\uD83D\uDE85 LiteLLM"}),(0,i.jsx)(O.default.Title,{level:3,children:"reset_password"===e?"Reset Password":"Sign Up"}),(0,i.jsx)(O.default.Text,{children:"reset_password"===e?"Reset your password to access Admin UI.":"Claim your user account to login to Admin UI."}),"signup"===e&&(0,i.jsx)(y.Z,{className:"mt-4",type:"info",message:"SSO",description:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{children:"SSO is under the Enterprise Tier."}),(0,i.jsx)(b.ZP,{type:"primary",size:"small",href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"Get Free Trial"})]}),showIcon:!0}),(0,i.jsxs)(j.Z,{className:"mt-10 mb-5",layout:"vertical",form:u,onFinish:t=>o({password:t.password}),children:[(0,i.jsx)(j.Z.Item,{label:"Email Address",name:"user_email",children:(0,i.jsx)(S.default,{type:"email",disabled:!0})}),(0,i.jsx)(j.Z.Item,{label:"Password",name:"password",rules:[{required:!0,message:"password required to sign up"}],help:"reset_password"===e?"Enter your new password":"Create a password for your account",children:(0,i.jsx)(S.default.Password,{})}),a&&(0,i.jsx)(y.Z,{type:"error",message:a,showIcon:!0,className:"mb-4"}),(0,i.jsx)("div",{className:"mt-10",children:(0,i.jsx)(b.ZP,{htmlType:"submit",loading:r,children:"reset_password"===e?"Reset Password":"Sign Up"})})]})]})})}function E(t){var e,s,a,o;let{variant:c}=t,d=(0,r.useSearchParams)().get("invitation_id"),[h,m]=n.useState(null),{data:g,isLoading:v,isError:y}=p(d),{mutate:b,isPending:j}=f(),P=(null==g?void 0:g.token)?(0,u.o)(g.token):null,O=null!==(e=null==P?void 0:P.user_email)&&void 0!==e?e:"",S=null!==(s=null==P?void 0:P.user_id)&&void 0!==s?s:null,E=null!==(a=null==P?void 0:P.key)&&void 0!==a?a:null,M=null!==(o=null==g?void 0:g.token)&&void 0!==o?o:null;return v?(0,i.jsx)(x,{}):y?(0,i.jsx)(w,{}):(0,i.jsx)(k,{variant:c,userEmail:O,isPending:j,claimError:h,onSubmit:t=>{E&&M&&S&&d&&(m(null),b({accessToken:E,inviteId:d,userId:S,password:t.password},{onSuccess:()=>{document.cookie="token=".concat(M,"; path=/; SameSite=Lax");let t=(0,l.getProxyBaseUrl)();window.location.href=t?"".concat(t,"/ui/?login=success"):"/ui/?login=success"},onError:t=>{m(t.message||"Failed to submit. Please try again.")}}))}})}let M=new a.S;function _(){let t=(0,r.useSearchParams)().get("action");return(0,i.jsx)(E,{variant:"reset_password"===t?"reset_password":"signup"})}function N(){return(0,i.jsx)(o.aH,{client:M,children:(0,i.jsx)(n.Suspense,{fallback:(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}),children:(0,i.jsx)(_,{})})})}},21636:function(t,e,s){"use strict";s.d(e,{Gm:function(){return n},Qy:function(){return o},ZF:function(){return u}});var i=s(45345);function n(t){return{onFetch:(e,s)=>{let n=e.options,o=e.fetchOptions?.meta?.fetchMore?.direction,u=e.state.data?.pages||[],l=e.state.data?.pageParams||[],c={pages:[],pageParams:[]},d=0,h=async()=>{let s=!1,h=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(e.signal.aborted?s=!0:e.signal.addEventListener("abort",()=>{s=!0}),e.signal)})},m=(0,i.cG)(e.options,e.fetchOptions),p=async(t,n,r)=>{if(s)return Promise.reject();if(null==n&&t.pages.length)return Promise.resolve(t);let a=(()=>{let t={client:e.client,queryKey:e.queryKey,pageParam:n,direction:r?"backward":"forward",meta:e.options.meta};return h(t),t})(),o=await m(a),{maxPages:u}=e.options,l=r?i.Ht:i.VX;return{pages:l(t.pages,o,u),pageParams:l(t.pageParams,n,u)}};if(o&&u.length){let t="backward"===o,e={pages:u,pageParams:l},s=(t?a:r)(n,e);c=await p(e,s,t)}else{let e=t??u.length;do{let t=0===d?l[0]??n.initialPageParam:r(n,c);if(d>0&&null==t)break;c=await p(c,t),d++}while(d<e)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s):e.fetchFn=h}}}function r(t,{pages:e,pageParams:s}){let i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,s[i],s):void 0}function a(t,{pages:e,pageParams:s}){return e.length>0?t.getPreviousPageParam?.(e[0],e,s[0],s):void 0}function o(t,e){return!!e&&null!=r(t,e)}function u(t,e){return!!e&&!!t.getPreviousPageParam&&null!=a(t,e)}},21770:function(t,e,s){"use strict";s.d(e,{D:function(){return c}});var i=s(2265),n=s(2894),r=s(18238),a=s(24112),o=s(45345),u=class extends a.l{#t;#e=void 0;#s;#i;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.VS)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(e.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#r(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#r()}mutate(t,e){return this.#i=e,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#n(){let t=this.#s?.state??(0,n.R)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#r(t){r.Vr.batch(()=>{if(this.#i&&this.hasListeners()){let e=this.#e.variables,s=this.#e.context,i={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#i.onSuccess?.(t.data,e,s,i),this.#i.onSettled?.(t.data,null,e,s,i)):t?.type==="error"&&(this.#i.onError?.(t.error,e,s,i),this.#i.onSettled?.(void 0,t.error,e,s,i))}this.listeners.forEach(t=>{t(this.#e)})})}},l=s(29827);function c(t,e){let s=(0,l.NL)(e),[n]=i.useState(()=>new u(s,t));i.useEffect(()=>{n.setOptions(t)},[n,t]);let a=i.useSyncExternalStore(i.useCallback(t=>n.subscribe(r.Vr.batchCalls(t)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),c=i.useCallback((t,e)=>{n.mutate(t,e).catch(o.ZT)},[n]);if(a.error&&(0,o.L3)(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:c,mutateAsync:a.mutate}}}},function(t){t.O(0,[7271,5173,7651,7840,337,3367,5869,353,536,4114,6191,2971,2117,1744],function(){return t(t.s=8672)}),_N_E=t.O()}]);