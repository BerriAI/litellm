(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8598:function(e,r,t){Promise.resolve().then(t.t.bind(t,5250,23)),Promise.resolve().then(t.bind(t,7476))},7476:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return U}});var n=t(3827),s=t(4090);let l=async(e,r,t,n)=>{try{console.log("Form Values in keyCreateCall:",n);let s=await fetch("".concat(e,"/key/generate"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({user_id:t,...n})});if(!s.ok){let e=await s.json();throw console.error("Error response from the server:",e),Error("Network response was not ok")}let l=await s.json();return console.log("API Response:",l),l}catch(e){throw console.error("Failed to create key:",e),e}},o=async(e,r,t)=>{try{let n=await fetch("".concat(e,"/key/delete"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({keys:[t]})});if(!n.ok)throw Error("Network response was not ok");let s=await n.json();return console.log(s),s}catch(e){throw console.error("Failed to create key:",e),e}},a=async(e,r,t)=>{try{let n=await fetch("".concat(e,"/user/info?user_id=").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});if(!n.ok)throw Error("Network response was not ok");let s=await n.json();return console.log(s),s}catch(e){throw console.error("Failed to create key:",e),e}};var i=t(384),c=t(6453),d=t(2179),h=t(1801),u=t(6776),x=t(2902),j=t(588),m=t(7171),y=t(9714),p=t(8707),Z=t(1861);let{Option:g}=u.default;var k=e=>{let{userID:r,accessToken:t,proxyBaseUrl:o,data:a,setData:u}=e,[g]=x.Z.useForm(),[k,w]=(0,s.useState)(!1),[f,b]=(0,s.useState)(null),C=()=>{w(!1),g.resetFields()},v=()=>{w(!1),b(null),g.resetFields()},S=async e=>{try{j.ZP.info("Making API Call"),e.models&&""!==e.models.trim()?e.models=e.models.split(",").map(e=>e.trim()):e.models=[],w(!0);let n=await l(o,t,r,e);u(e=>e?[...e,n]:[n]),b(n.key),j.ZP.success("API Key Created"),g.resetFields()}catch(e){console.error("Error creating the key:",e)}};return(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z,{className:"mx-auto",onClick:()=>w(!0),children:"+ Create New Key"}),(0,n.jsx)(m.Z,{title:"Create Key",visible:k,width:800,footer:null,onOk:C,onCancel:v,children:(0,n.jsxs)(x.Z,{form:g,onFinish:S,labelCol:{span:6},wrapperCol:{span:16},labelAlign:"left",children:[(0,n.jsx)(x.Z.Item,{label:"Key Name",name:"key_alias",children:(0,n.jsx)(y.Z,{})}),(0,n.jsx)(x.Z.Item,{label:"Models (Comma Separated). Eg: gpt-3.5-turbo,gpt-4",name:"models",children:(0,n.jsx)(y.Z,{placeholder:"gpt-4,gpt-3.5-turbo"})}),(0,n.jsx)(x.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,n.jsx)(p.Z,{step:.01,precision:2,width:200})}),(0,n.jsx)(x.Z.Item,{label:"Duration (eg: 30s, 30h, 30d)",name:"duration",children:(0,n.jsx)(y.Z,{})}),(0,n.jsx)(x.Z.Item,{label:"Metadata",name:"metadata",children:(0,n.jsx)(y.Z.TextArea,{rows:4,placeholder:"Enter metadata as JSON"})}),(0,n.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,n.jsx)(Z.ZP,{htmlType:"submit",children:"Create Key"})})]})}),f&&(0,n.jsx)(m.Z,{title:"Save your key",visible:k,onOk:C,onCancel:v,footer:null,children:(0,n.jsxs)(c.Z,{numItems:1,className:"gap-2 w-full",children:[(0,n.jsx)(i.Z,{numColSpan:1,children:(0,n.jsxs)("p",{children:["Please save this secret key somewhere safe and accessible. For security reasons, ",(0,n.jsx)("b",{children:"you will not be able to view it again"})," ","through your LiteLLM account. If you lose this secret key, you will need to generate a new one."]})}),(0,n.jsx)(i.Z,{numColSpan:1,children:null!=f?(0,n.jsxs)(h.Z,{children:["API Key: ",f]}):(0,n.jsx)(h.Z,{children:"Key being created, this might take 30s"})})]})})]})},w=t(3393),f=t(3810),b=t(1244),C=t(827),v=t(3851),S=t(2044),E=t(4167),I=t(4480),N=t(2287),P=t(2440),D=e=>{let{userID:r,accessToken:t,proxyBaseUrl:s,data:l,setData:a}=e,i=async e=>{if(null!=l)try{await o(s,t,e);let r=l.filter(r=>r.token!==e);a(r)}catch(e){console.error("Error deleting the key:",e)}};if(null!=l)return console.log("RERENDER TRIGGERED"),(0,n.jsxs)(f.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh] mb-4",children:[(0,n.jsx)(P.Z,{children:"API Keys"}),(0,n.jsxs)(C.Z,{className:"mt-5",children:[(0,n.jsx)(E.Z,{children:(0,n.jsxs)(N.Z,{children:[(0,n.jsx)(I.Z,{children:"Secret Key"}),(0,n.jsx)(I.Z,{children:"Spend (USD)"}),(0,n.jsx)(I.Z,{children:"Key Budget (USD)"}),(0,n.jsx)(I.Z,{children:"Expires"})]})}),(0,n.jsx)(v.Z,{children:l.map(e=>(console.log(e),(0,n.jsxs)(N.Z,{children:[(0,n.jsx)(S.Z,{children:null!=e.key_name?(0,n.jsx)(h.Z,{children:e.key_name}):(0,n.jsx)(h.Z,{children:e.token})}),(0,n.jsx)(S.Z,{children:(0,n.jsx)(h.Z,{children:e.spend})}),(0,n.jsx)(S.Z,{children:null!=e.max_budget?(0,n.jsx)(h.Z,{children:e.max_budget}):(0,n.jsx)(h.Z,{children:"Unlimited Budget"})}),(0,n.jsx)(S.Z,{children:null!=e.expires?(0,n.jsx)(h.Z,{children:e.expires}):(0,n.jsx)(h.Z,{children:"Never expires"})}),(0,n.jsx)(S.Z,{children:(0,n.jsx)(b.Z,{onClick:()=>i(e.token),icon:w.Z,size:"xs"})})]},e.token)))})]})]})},_=t(891),A=()=>{let[e,r]=(0,s.useState)(""),[t,l]=(0,s.useState)(!1),o="".concat(window.location.href,"?proxyBaseUrl=").concat(e);return(0,n.jsx)("div",{children:(0,n.jsxs)(f.Z,{decoration:"top",decorationColor:"blue",style:{width:"1000px"},children:[(0,n.jsx)(h.Z,{children:"Admin Configuration"}),(0,n.jsx)("label",{htmlFor:"proxyUrl",children:"Enter Proxy URL:"}),(0,n.jsx)(_.Z,{type:"text",id:"proxyUrl",value:e,onChange:e=>{r(e.target.value),l(!1)},placeholder:"https://your-proxy-endpoint.com"}),(0,n.jsx)(d.Z,{onClick:()=>{l(!0)},className:"gap-2",children:"Save"}),t&&(0,n.jsx)("div",{children:(0,n.jsxs)(c.Z,{numItems:1,className:"gap-2",children:[(0,n.jsx)(i.Z,{children:(0,n.jsxs)("p",{children:["Proxy Admin UI (Save this URL): ",o]})}),(0,n.jsx)(i.Z,{children:(0,n.jsxs)("p",{children:["Get Started with Proxy Admin UI  \uD83D\uDC49",(0,n.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:o})]})})]})})]})})},T=t(7907),U=()=>{let[e,r]=(0,s.useState)(null),t=(0,T.useSearchParams)(),l=t.get("userID"),o=t.get("accessToken"),d=t.get("proxyBaseUrl");if((0,s.useEffect)(()=>{l&&o&&d&&!e&&(async()=>{try{let e=await a(d,o,l);r(e.keys)}catch(e){console.error("There was an error fetching the data",e)}})()},[l,o,d,e]),null==d)return(0,n.jsx)("div",{children:(0,n.jsx)(A,{})});if(null==l||null==o){let e=d.endsWith("/")?d:d+"/";return window.location.href="".concat(e,"sso/key/generate"),null}return(0,n.jsx)(c.Z,{numItems:1,className:"gap-0 p-10 h-[75vh] w-full",children:(0,n.jsxs)(i.Z,{numColSpan:1,children:[(0,n.jsx)(D,{userID:l,accessToken:o,proxyBaseUrl:d,data:e,setData:r}),(0,n.jsx)(k,{userID:l,accessToken:o,proxyBaseUrl:d,data:e,setData:r})]})})}}},function(e){e.O(0,[86,971,69,744],function(){return e(e.s=8598)}),_N_E=e.O()}]);