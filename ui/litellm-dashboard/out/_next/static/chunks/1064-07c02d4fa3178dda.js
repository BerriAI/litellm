"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1064],{12363:function(e,t,s){s.d(t,{d:function(){return n},n:function(){return a}});var l=s(2265);let a=()=>{let[e,t]=(0,l.useState)("http://localhost:4000");return(0,l.useEffect)(()=>{{let{protocol:e,host:s}=window.location;t("".concat(e,"//").concat(s))}},[]),e},n=25},30841:function(e,t,s){s.d(t,{IE:function(){return n},LO:function(){return a},cT:function(){return r}});var l=s(19250);let a=async e=>{if(!e)return[];try{let{aliases:t}=await (0,l.keyAliasesCall)(e);return Array.from(new Set((t||[]).filter(Boolean)))}catch(e){return console.error("Error fetching all key aliases:",e),[]}},n=async(e,t)=>{if(!e)return[];try{let s=[],a=1,n=!0;for(;n;){let r=await (0,l.teamListCall)(e,t||null,null);s=[...s,...r],a<r.total_pages?a++:n=!1}return s}catch(e){return console.error("Error fetching all teams:",e),[]}},r=async e=>{if(!e)return[];try{let t=[],s=1,a=!0;for(;a;){let n=await (0,l.organizationListCall)(e);t=[...t,...n],s<n.total_pages?s++:a=!1}return t}catch(e){return console.error("Error fetching all organizations:",e),[]}}},23048:function(e,t,s){var l=s(57437),a=s(2356),n=s(5545),r=s(37592),i=s(4260),o=s(7310),d=s.n(o),c=s(2265);t.Z=e=>{let{options:t,onApplyFilters:s,onResetFilters:o,initialValues:u={},buttonLabel:m="Filters"}=e,[x,h]=(0,c.useState)(!1),[p,g]=(0,c.useState)(u),[f,j]=(0,c.useState)({}),[v,y]=(0,c.useState)({}),[b,N]=(0,c.useState)({}),[_,w]=(0,c.useState)({}),k=(0,c.useCallback)(d()(async(e,t)=>{if(t.isSearchable&&t.searchFn){y(e=>({...e,[t.name]:!0}));try{let s=await t.searchFn(e);j(e=>({...e,[t.name]:s}))}catch(e){console.error("Error searching:",e),j(e=>({...e,[t.name]:[]}))}finally{y(e=>({...e,[t.name]:!1}))}}},300),[]),S=(0,c.useCallback)(async e=>{if(e.isSearchable&&e.searchFn&&!_[e.name]){y(t=>({...t,[e.name]:!0})),w(t=>({...t,[e.name]:!0}));try{let t=await e.searchFn("");j(s=>({...s,[e.name]:t}))}catch(t){console.error("Error loading initial options:",t),j(t=>({...t,[e.name]:[]}))}finally{y(t=>({...t,[e.name]:!1}))}}},[_]);(0,c.useEffect)(()=>{x&&t.forEach(e=>{e.isSearchable&&!_[e.name]&&S(e)})},[x,t,S,_]);let C=(e,t)=>{let l={...p,[e]:t};g(l),s(l)},L=(e,t)=>{e&&t.isSearchable&&!_[t.name]&&S(t)};return(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,l.jsx)(n.ZP,{icon:(0,l.jsx)(a.Z,{className:"h-4 w-4"}),onClick:()=>h(!x),className:"flex items-center gap-2",children:m}),(0,l.jsx)(n.ZP,{onClick:()=>{let e={};t.forEach(t=>{e[t.name]=""}),g(e),o()},children:"Reset Filters"})]}),x&&(0,l.jsx)("div",{className:"grid grid-cols-3 gap-x-6 gap-y-4 mb-6",children:["Team ID","Status","Organization ID","Key Alias","User ID","End User","Error Code","Error Message","Key Hash","Model"].map(e=>{let s=t.find(t=>t.label===e||t.name===e);return s?(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("label",{className:"text-sm text-gray-600",children:s.label||s.name}),s.isSearchable?(0,l.jsx)(r.default,{showSearch:!0,className:"w-full",placeholder:"Search ".concat(s.label||s.name,"..."),value:p[s.name]||void 0,onChange:e=>C(s.name,e),onOpenChange:e=>L(e,s),onSearch:e=>{N(t=>({...t,[s.name]:e})),s.searchFn&&k(e,s)},filterOption:!1,loading:v[s.name],options:f[s.name]||[],allowClear:!0,notFoundContent:v[s.name]?"Loading...":"No results found"}):s.options?(0,l.jsx)(r.default,{className:"w-full",placeholder:"Select ".concat(s.label||s.name,"..."),value:p[s.name]||void 0,onChange:e=>C(s.name,e),allowClear:!0,children:s.options.map(e=>(0,l.jsx)(r.default.Option,{value:e.value,children:e.label},e.value))}):s.customComponent?(()=>{let e=s.customComponent;return(0,l.jsx)(e,{value:p[s.name]||void 0,onChange:e=>C(s.name,null!=e?e:""),placeholder:"Select ".concat(s.label||s.name,"...")})})():(0,l.jsx)(i.default,{className:"w-full",placeholder:"Enter ".concat(s.label||s.name,"..."),value:p[s.name]||"",onChange:e=>C(s.name,e.target.value),allowClear:!0})]},s.name):null})})]})}},15273:function(e,t,s){s.d(t,{I:function(){return a}});var l=s(57437);s(2265);let a=e=>{let{show:t,onOpenSettings:s}=e;return t?(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start",children:[(0,l.jsx)("div",{className:"text-blue-500 mr-3 flex-shrink-0 mt-0.5",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,l.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,l.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"Request/Response Data Not Available"}),(0,l.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["To view request and response details, enable prompt storage in your LiteLLM configuration by adding the following to your ",(0,l.jsx)("code",{className:"bg-blue-100 px-1 py-0.5 rounded",children:"proxy_config.yaml"})," file",s&&(0,l.jsxs)(l.Fragment,{children:[" or"," ",(0,l.jsx)("button",{onClick:s,className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"open the settings"})," ","to configure this directly."]})]}),(0,l.jsx)("pre",{className:"mt-2 bg-white p-3 rounded border border-blue-200 text-xs font-mono overflow-auto",children:"general_settings:\n  store_model_in_db: true\n  store_prompts_in_spend_logs: true"}),(0,l.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:"Note: This will only affect new requests after the configuration change."})]})]}):null}},84933:function(e,t,s){s.d(t,{d:function(){return o}});var l=s(57437);s(2265);var a=s(44851),n=s(59872);let r=e=>null==e?"-":"$".concat((0,n.pw)(e,8)),i=e=>null==e?"-":"".concat((100*e).toFixed(2),"%"),o=e=>{var t;let{costBreakdown:s,totalSpend:n,promptTokens:o,completionTokens:d,cacheHit:c}=e,u=(null==c?void 0:c.toLowerCase())==="true";if(!((null==s?void 0:s.input_cost)!==void 0||(null==s?void 0:s.output_cost)!==void 0||void 0!==o||void 0!==d||s&&(void 0!==s.discount_percent&&0!==s.discount_percent||void 0!==s.discount_amount&&0!==s.discount_amount||void 0!==s.margin_percent&&0!==s.margin_percent||void 0!==s.margin_fixed_amount&&0!==s.margin_fixed_amount||void 0!==s.margin_total_amount&&0!==s.margin_total_amount)))return null;let m=s&&(void 0!==s.discount_percent&&0!==s.discount_percent||void 0!==s.discount_amount&&0!==s.discount_amount),x=s&&(void 0!==s.margin_percent&&0!==s.margin_percent||void 0!==s.margin_fixed_amount&&0!==s.margin_fixed_amount||void 0!==s.margin_total_amount&&0!==s.margin_total_amount),h=u?0:null==s?void 0:s.input_cost,p=u?0:null==s?void 0:s.output_cost,g=u?0:null==s?void 0:s.original_cost,f=u?0:null!==(t=null==s?void 0:s.total_cost)&&void 0!==t?t:n;return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(a.default,{expandIconPosition:"start",items:[{key:"1",label:(0,l.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Cost Breakdown"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 mr-4",children:[(0,l.jsx)("span",{className:"text-sm text-gray-500",children:"Total:"}),(0,l.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[r(n),u&&" (Cached)"]})]})]}),children:(0,l.jsxs)("div",{className:"p-6 space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2 max-w-2xl",children:[(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Input Cost:"}),(0,l.jsxs)("span",{className:"text-gray-900",children:[r(h),void 0!==o&&(0,l.jsxs)("span",{className:"text-gray-500 font-normal ml-1",children:["(",o.toLocaleString()," prompt tokens)"]})]})]}),(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Output Cost:"}),(0,l.jsxs)("span",{className:"text-gray-900",children:[r(p),void 0!==d&&(0,l.jsxs)("span",{className:"text-gray-500 font-normal ml-1",children:["(",d.toLocaleString()," completion tokens)"]})]})]}),(null==s?void 0:s.tool_usage_cost)!==void 0&&s.tool_usage_cost>0&&(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Tool Usage Cost:"}),(0,l.jsx)("span",{className:"text-gray-900",children:r(s.tool_usage_cost)})]}),(null==s?void 0:s.additional_costs)&&Object.keys(s.additional_costs).length>0&&(0,l.jsx)(l.Fragment,{children:Object.entries(s.additional_costs).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsxs)("span",{className:"text-gray-600 font-medium w-1/3",children:[t,":"]}),(0,l.jsx)("span",{className:"text-gray-900",children:r(s)})]},t)})})]}),!u&&(0,l.jsx)("div",{className:"pt-2 border-t border-gray-100 max-w-2xl",children:(0,l.jsxs)("div",{className:"flex text-sm font-semibold",children:[(0,l.jsx)("span",{className:"text-gray-900 w-1/3",children:"Original LLM Cost:"}),(0,l.jsx)("span",{className:"text-gray-900",children:r(g)})]})}),(m||x)&&(0,l.jsxs)("div",{className:"pt-2 space-y-2 max-w-2xl",children:[m&&(0,l.jsxs)("div",{className:"space-y-2",children:[void 0!==s.discount_percent&&0!==s.discount_percent&&(0,l.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,l.jsxs)("span",{className:"font-medium w-1/3",children:["Discount (",i(s.discount_percent),"):"]}),(0,l.jsxs)("span",{className:"text-gray-900",children:["-",r(s.discount_amount)]})]}),void 0!==s.discount_amount&&void 0===s.discount_percent&&(0,l.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Discount Amount:"}),(0,l.jsxs)("span",{className:"text-gray-900",children:["-",r(s.discount_amount)]})]})]}),x&&(0,l.jsxs)("div",{className:"space-y-2",children:[void 0!==s.margin_percent&&0!==s.margin_percent&&(0,l.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,l.jsxs)("span",{className:"font-medium w-1/3",children:["Margin (",i(s.margin_percent),"):"]}),(0,l.jsxs)("span",{className:"text-gray-900",children:["+",r((s.margin_total_amount||0)-(s.margin_fixed_amount||0))]})]}),void 0!==s.margin_fixed_amount&&0!==s.margin_fixed_amount&&(0,l.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Margin:"}),(0,l.jsxs)("span",{className:"text-gray-900",children:["+",r(s.margin_fixed_amount)]})]})]})]}),(0,l.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 max-w-2xl",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("span",{className:"font-bold text-sm text-gray-900 w-1/3",children:"Final Calculated Cost:"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:[r(f),u&&" (Cached)"]})]})})]})}]})})}},73834:function(e,t,s){s.d(t,{Z:function(){return H}});var l=s(57437),a=s(2265),n=s(99981);let r=e=>e>=.8?"text-green-600":"text-yellow-600";var i=e=>{let{entities:t}=e,[s,n]=(0,a.useState)(!0),[i,o]=(0,a.useState)({}),d=e=>{o(t=>({...t,[e]:!t[e]}))};return t&&0!==t.length?(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"flex items-center mb-2 cursor-pointer",onClick:()=>n(!s),children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-2 transition-transform ".concat(s?"transform rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsxs)("h4",{className:"font-medium",children:["Detected Entities (",t.length,")"]})]}),s&&(0,l.jsx)("div",{className:"space-y-2",children:t.map((e,t)=>{let s=i[t]||!1;return(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>d(t),children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-2 transition-transform ".concat(s?"transform rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsx)("span",{className:"font-medium mr-2",children:e.entity_type}),(0,l.jsxs)("span",{className:"font-mono ".concat(r(e.score)),children:["Score: ",e.score.toFixed(2)]})]}),(0,l.jsxs)("span",{className:"text-xs text-gray-500",children:["Position: ",e.start,"-",e.end]})]}),s&&(0,l.jsx)("div",{className:"p-3 border-t bg-white",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Entity Type:"}),(0,l.jsx)("span",{children:e.entity_type})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Position:"}),(0,l.jsxs)("span",{children:["Characters ",e.start,"-",e.end]})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Confidence:"}),(0,l.jsx)("span",{className:r(e.score),children:e.score.toFixed(2)})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[e.recognition_metadata&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Recognizer:"}),(0,l.jsx)("span",{children:e.recognition_metadata.recognizer_name})]}),(0,l.jsxs)("div",{className:"flex overflow-hidden",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Identifier:"}),(0,l.jsx)("span",{className:"truncate text-xs font-mono",children:e.recognition_metadata.recognizer_identifier})]})]}),e.analysis_explanation&&(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Explanation:"}),(0,l.jsx)("span",{children:e.analysis_explanation})]})]})]})})]},t)})})]}):null};let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"slate";return(0,l.jsx)("span",{className:"px-2 py-1 rounded-md text-xs font-medium inline-block ".concat({green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",blue:"bg-blue-50 text-blue-700",slate:"bg-slate-100 text-slate-800",amber:"bg-amber-100 text-amber-800"}[t]),children:e})},d=e=>e?o("detected","red"):o("not detected","slate"),c=e=>{let{title:t,count:s,defaultOpen:n=!0,right:r,children:i}=e,[o,d]=(0,a.useState)(n);return(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>d(e=>!e),children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-2 transition-transform ".concat(o?"transform rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsxs)("h5",{className:"font-medium",children:[t," ","number"==typeof s&&(0,l.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",s,")"]})]})]}),(0,l.jsx)("div",{children:r})]}),o&&(0,l.jsx)("div",{className:"p-3 border-t bg-white",children:i})]})},u=e=>{let{label:t,children:s,mono:a}=e;return(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:t}),(0,l.jsx)("span",{className:a?"font-mono text-sm break-all":"",children:s})]})},m=()=>(0,l.jsx)("div",{className:"my-3 border-t"});var x=e=>{var t,s,a,n,r,i,x,h,p,g;let{response:f}=e;if(!f)return null;let j=null!==(r=null!==(n=f.outputs)&&void 0!==n?n:f.output)&&void 0!==r?r:[],v="GUARDRAIL_INTERVENED"===f.action?"red":"green",y=(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(null===(t=f.guardrailCoverage)||void 0===t?void 0:t.textCharacters)&&o("text guarded ".concat(null!==(i=f.guardrailCoverage.textCharacters.guarded)&&void 0!==i?i:0,"/").concat(null!==(x=f.guardrailCoverage.textCharacters.total)&&void 0!==x?x:0),"blue"),(null===(s=f.guardrailCoverage)||void 0===s?void 0:s.images)&&o("images guarded ".concat(null!==(h=f.guardrailCoverage.images.guarded)&&void 0!==h?h:0,"/").concat(null!==(p=f.guardrailCoverage.images.total)&&void 0!==p?p:0),"blue")]}),b=f.usage&&(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(f.usage).map(e=>{let[t,s]=e;return"number"==typeof s?(0,l.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 rounded-md text-xs font-medium",children:[t,": ",s]},t):null})});return(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u,{label:"Action:",children:o(null!==(g=f.action)&&void 0!==g?g:"N/A",v)}),f.actionReason&&(0,l.jsx)(u,{label:"Action Reason:",children:f.actionReason}),f.blockedResponse&&(0,l.jsx)(u,{label:"Blocked Response:",children:(0,l.jsx)("span",{className:"italic",children:f.blockedResponse})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u,{label:"Coverage:",children:y}),(0,l.jsx)(u,{label:"Usage:",children:b})]})]}),j.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m,{}),(0,l.jsx)("h4",{className:"font-medium mb-2",children:"Outputs"}),(0,l.jsx)("div",{className:"space-y-2",children:j.map((e,t)=>{var s;return(0,l.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,l.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:null!==(s=e.text)&&void 0!==s?s:(0,l.jsx)("em",{children:"(non-text output)"})})},t)})})]})]}),(null===(a=f.assessments)||void 0===a?void 0:a.length)?(0,l.jsx)("div",{className:"space-y-3",children:f.assessments.map((e,t)=>{var s,a,n,r,i,m,x,h,p,g,f,j,v,y,b,N,_,w,k,S,C,L,M,D;let T=(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.wordPolicy&&o("word","slate"),e.contentPolicy&&o("content","slate"),e.topicPolicy&&o("topic","slate"),e.sensitiveInformationPolicy&&o("sensitive-info","slate"),e.contextualGroundingPolicy&&o("contextual-grounding","slate"),e.automatedReasoningPolicy&&o("automated-reasoning","slate")]});return(0,l.jsxs)(c,{title:"Assessment #".concat(t+1),defaultOpen:!0,right:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(null===(s=e.invocationMetrics)||void 0===s?void 0:s.guardrailProcessingLatency)!=null&&o("".concat(e.invocationMetrics.guardrailProcessingLatency," ms"),"amber"),T]}),children:[e.wordPolicy&&(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"font-medium mb-2",children:"Word Policy"}),(null!==(N=null===(a=e.wordPolicy.customWords)||void 0===a?void 0:a.length)&&void 0!==N?N:0)>0&&(0,l.jsx)(c,{title:"Custom Words",defaultOpen:!0,children:(0,l.jsx)("div",{className:"space-y-2",children:e.wordPolicy.customWords.map((e,t)=>{var s;return(0,l.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o(null!==(s=e.action)&&void 0!==s?s:"N/A",e.detected?"red":"slate"),(0,l.jsx)("span",{className:"font-mono text-sm break-all",children:e.match})]}),d(e.detected)]},t)})})}),(null!==(_=null===(n=e.wordPolicy.managedWordLists)||void 0===n?void 0:n.length)&&void 0!==_?_:0)>0&&(0,l.jsx)(c,{title:"Managed Word Lists",defaultOpen:!1,children:(0,l.jsx)("div",{className:"space-y-2",children:e.wordPolicy.managedWordLists.map((e,t)=>{var s;return(0,l.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o(null!==(s=e.action)&&void 0!==s?s:"N/A",e.detected?"red":"slate"),(0,l.jsx)("span",{className:"font-mono text-sm break-all",children:e.match}),e.type&&o(e.type,"slate")]}),d(e.detected)]},t)})})})]}),(null===(i=e.contentPolicy)||void 0===i?void 0:null===(r=i.filters)||void 0===r?void 0:r.length)?(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"font-medium mb-2",children:"Content Policy"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,l.jsx)("th",{className:"py-1 pr-4",children:"Type"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Action"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Detected"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Strength"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Confidence"})]})}),(0,l.jsx)("tbody",{children:e.contentPolicy.filters.map((e,t)=>{var s,a,n,r;return(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"py-1 pr-4",children:null!==(s=e.type)&&void 0!==s?s:"—"}),(0,l.jsx)("td",{className:"py-1 pr-4",children:o(null!==(a=e.action)&&void 0!==a?a:"—",e.detected?"red":"slate")}),(0,l.jsx)("td",{className:"py-1 pr-4",children:d(e.detected)}),(0,l.jsx)("td",{className:"py-1 pr-4",children:null!==(n=e.filterStrength)&&void 0!==n?n:"—"}),(0,l.jsx)("td",{className:"py-1 pr-4",children:null!==(r=e.confidence)&&void 0!==r?r:"—"})]},t)})})]})})]}):null,(null===(x=e.contextualGroundingPolicy)||void 0===x?void 0:null===(m=x.filters)||void 0===m?void 0:m.length)?(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"font-medium mb-2",children:"Contextual Grounding"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,l.jsx)("th",{className:"py-1 pr-4",children:"Type"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Action"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Detected"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Score"}),(0,l.jsx)("th",{className:"py-1 pr-4",children:"Threshold"})]})}),(0,l.jsx)("tbody",{children:e.contextualGroundingPolicy.filters.map((e,t)=>{var s,a,n,r;return(0,l.jsxs)("tr",{className:"border-t",children:[(0,l.jsx)("td",{className:"py-1 pr-4",children:null!==(s=e.type)&&void 0!==s?s:"—"}),(0,l.jsx)("td",{className:"py-1 pr-4",children:o(null!==(a=e.action)&&void 0!==a?a:"—",e.detected?"red":"slate")}),(0,l.jsx)("td",{className:"py-1 pr-4",children:d(e.detected)}),(0,l.jsx)("td",{className:"py-1 pr-4",children:null!==(n=e.score)&&void 0!==n?n:"—"}),(0,l.jsx)("td",{className:"py-1 pr-4",children:null!==(r=e.threshold)&&void 0!==r?r:"—"})]},t)})})]})})]}):null,e.sensitiveInformationPolicy&&(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"font-medium mb-2",children:"Sensitive Information"}),(null!==(w=null===(h=e.sensitiveInformationPolicy.piiEntities)||void 0===h?void 0:h.length)&&void 0!==w?w:0)>0&&(0,l.jsx)(c,{title:"PII Entities",defaultOpen:!0,children:(0,l.jsx)("div",{className:"space-y-2",children:e.sensitiveInformationPolicy.piiEntities.map((e,t)=>{var s;return(0,l.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o(null!==(s=e.action)&&void 0!==s?s:"N/A",e.detected?"red":"slate"),e.type&&o(e.type,"slate"),(0,l.jsx)("span",{className:"font-mono text-xs break-all",children:e.match})]}),d(e.detected)]},t)})})}),(null!==(k=null===(p=e.sensitiveInformationPolicy.regexes)||void 0===p?void 0:p.length)&&void 0!==k?k:0)>0&&(0,l.jsx)(c,{title:"Custom Regexes",defaultOpen:!1,children:(0,l.jsx)("div",{className:"space-y-2",children:e.sensitiveInformationPolicy.regexes.map((e,t)=>{var s,a;return(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-2 bg-gray-50 rounded gap-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o(null!==(s=e.action)&&void 0!==s?s:"N/A",e.detected?"red":"slate"),(0,l.jsx)("span",{className:"font-medium",children:null!==(a=e.name)&&void 0!==a?a:"regex"}),(0,l.jsx)("span",{className:"font-mono text-xs break-all",children:e.regex})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[d(e.detected),e.match&&(0,l.jsx)("span",{className:"font-mono text-xs break-all",children:e.match})]})]},t)})})})]}),(null===(f=e.topicPolicy)||void 0===f?void 0:null===(g=f.topics)||void 0===g?void 0:g.length)?(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("h6",{className:"font-medium mb-2",children:"Topic Policy"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:e.topicPolicy.topics.map((e,t)=>{var s,a;return(0,l.jsx)("div",{className:"px-3 py-1.5 bg-gray-50 rounded-md text-xs",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o(null!==(s=e.action)&&void 0!==s?s:"N/A",e.detected?"red":"slate"),(0,l.jsx)("span",{className:"font-medium",children:null!==(a=e.name)&&void 0!==a?a:"topic"}),e.type&&o(e.type,"slate"),d(e.detected)]})},t)})})]}):null,e.invocationMetrics&&(0,l.jsx)(c,{title:"Invocation Metrics",defaultOpen:!1,children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(u,{label:"Latency (ms)",children:null!==(S=e.invocationMetrics.guardrailProcessingLatency)&&void 0!==S?S:"—"}),(0,l.jsx)(u,{label:"Coverage:",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(null===(j=e.invocationMetrics.guardrailCoverage)||void 0===j?void 0:j.textCharacters)&&o("text ".concat(null!==(C=e.invocationMetrics.guardrailCoverage.textCharacters.guarded)&&void 0!==C?C:0,"/").concat(null!==(L=e.invocationMetrics.guardrailCoverage.textCharacters.total)&&void 0!==L?L:0),"blue"),(null===(v=e.invocationMetrics.guardrailCoverage)||void 0===v?void 0:v.images)&&o("images ".concat(null!==(M=e.invocationMetrics.guardrailCoverage.images.guarded)&&void 0!==M?M:0,"/").concat(null!==(D=e.invocationMetrics.guardrailCoverage.images.total)&&void 0!==D?D:0),"blue")]})})]}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsx)(u,{label:"Usage:",children:(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:e.invocationMetrics.usage&&Object.entries(e.invocationMetrics.usage).map(e=>{let[t,s]=e;return"number"==typeof s?(0,l.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 rounded-md text-xs font-medium",children:[t,": ",s]},t):null})})})})]})}),(null===(b=e.automatedReasoningPolicy)||void 0===b?void 0:null===(y=b.findings)||void 0===y?void 0:y.length)?(0,l.jsx)(c,{title:"Automated Reasoning Findings",defaultOpen:!1,children:(0,l.jsx)("div",{className:"space-y-2",children:e.automatedReasoningPolicy.findings.map((e,t)=>(0,l.jsx)("pre",{className:"bg-gray-50 rounded p-2 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)},t))})}):null]},t)})}):null,(0,l.jsx)(c,{title:"Raw Bedrock Guardrail Response",defaultOpen:!1,children:(0,l.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(f,null,2)})})]})};let h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"slate";return(0,l.jsx)("span",{className:"px-2 py-1 rounded-md text-xs font-medium inline-block ".concat({green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",blue:"bg-blue-50 text-blue-700",slate:"bg-slate-100 text-slate-800",amber:"bg-amber-100 text-amber-800"}[t]),children:e})},p=e=>{let{title:t,count:s,defaultOpen:n=!0,children:r}=e,[i,o]=(0,a.useState)(n);return(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>o(e=>!e),children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-2 transition-transform ".concat(i?"transform rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsxs)("h5",{className:"font-medium",children:[t," ","number"==typeof s&&(0,l.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",s,")"]})]})]})}),i&&(0,l.jsx)("div",{className:"p-3 border-t bg-white",children:r})]})},g=e=>{let{label:t,children:s,mono:a}=e;return(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:t}),(0,l.jsx)("span",{className:a?"font-mono text-sm break-all":"",children:s})]})};var f=e=>{let{response:t}=e;if(!t||"string"==typeof t)return"string"==typeof t&&t?(0,l.jsx)("div",{className:"bg-white rounded-lg border border-red-200 p-4",children:(0,l.jsxs)("div",{className:"text-red-800",children:[(0,l.jsx)("h5",{className:"font-medium mb-2",children:"Error"}),(0,l.jsx)("p",{className:"text-sm",children:t})]})}):null;let s=Array.isArray(t)?t:[];if(0===s.length)return(0,l.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,l.jsx)("div",{className:"text-gray-600 text-sm",children:"No detections found"})});let a=s.filter(e=>"pattern"===e.type),n=s.filter(e=>"blocked_word"===e.type),r=s.filter(e=>"category_keyword"===e.type),i=s.filter(e=>"BLOCK"===e.action).length,o=s.filter(e=>"MASK"===e.action).length,d=s.length;return(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(g,{label:"Total Detections:",children:(0,l.jsx)("span",{className:"font-semibold",children:d})}),(0,l.jsx)(g,{label:"Actions:",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[i>0&&h("".concat(i," blocked"),"red"),o>0&&h("".concat(o," masked"),"blue"),0===i&&0===o&&h("passed","green")]})})]}),(0,l.jsx)("div",{className:"space-y-2",children:(0,l.jsx)(g,{label:"By Type:",children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.length>0&&h("".concat(a.length," patterns"),"slate"),n.length>0&&h("".concat(n.length," keywords"),"slate"),r.length>0&&h("".concat(r.length," categories"),"slate")]})})})]})}),a.length>0&&(0,l.jsx)(p,{title:"Patterns Matched",count:a.length,defaultOpen:!0,children:(0,l.jsx)("div",{className:"space-y-2",children:a.map((e,t)=>(0,l.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)("div",{className:"space-y-1",children:(0,l.jsx)(g,{label:"Pattern:",children:e.pattern_name||"unknown"})}),(0,l.jsx)("div",{className:"space-y-1",children:(0,l.jsx)(g,{label:"Action:",children:h(e.action,"BLOCK"===e.action?"red":"blue")})})]})},t))})}),n.length>0&&(0,l.jsx)(p,{title:"Blocked Words Detected",count:n.length,defaultOpen:!0,children:(0,l.jsx)("div",{className:"space-y-2",children:n.map((e,t)=>(0,l.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(g,{label:"Keyword:",mono:!0,children:e.keyword||"unknown"}),e.description&&(0,l.jsx)(g,{label:"Description:",children:e.description})]}),(0,l.jsx)("div",{className:"space-y-1",children:(0,l.jsx)(g,{label:"Action:",children:h(e.action,"BLOCK"===e.action?"red":"blue")})})]})},t))})}),r.length>0&&(0,l.jsx)(p,{title:"Category Keywords Detected",count:r.length,defaultOpen:!0,children:(0,l.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,l.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(g,{label:"Category:",children:e.category||"unknown"}),(0,l.jsx)(g,{label:"Keyword:",mono:!0,children:e.keyword||"unknown"}),e.severity&&(0,l.jsx)(g,{label:"Severity:",children:h(e.severity,"high"===e.severity?"red":"medium"===e.severity?"amber":"slate")})]}),(0,l.jsx)("div",{className:"space-y-1",children:(0,l.jsx)(g,{label:"Action:",children:h(e.action,"BLOCK"===e.action?"red":"blue")})})]})},t))})}),(0,l.jsx)(p,{title:"Raw Detection Data",defaultOpen:!1,children:(0,l.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(s,null,2)})})]})},j=s(19250);let v=()=>(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,l.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:"#16A34A",strokeWidth:"1.5",fill:"#F0FDF4"}),(0,l.jsx)("path",{d:"M5 8l2 2 4-4",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),y=()=>(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,l.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:"#DC2626",strokeWidth:"1.5",fill:"#FEF2F2"}),(0,l.jsx)("path",{d:"M6 6l4 4M10 6l-4 4",stroke:"#DC2626",strokeWidth:"1.5",strokeLinecap:"round"})]}),b=()=>(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:"animate-spin",children:[(0,l.jsx)("circle",{cx:"8",cy:"8",r:"6",stroke:"#D1D5DB",strokeWidth:"2"}),(0,l.jsx)("path",{d:"M8 2a6 6 0 0 1 6 6",stroke:"#6366F1",strokeWidth:"2",strokeLinecap:"round"})]}),N=e=>{let{title:t,data:s,loading:r,error:i}=e,[o,d]=(0,a.useState)(!1);return(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>d(!o),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[r?(0,l.jsx)(b,{}):i?(0,l.jsx)(n.Z,{title:i,children:(0,l.jsx)("span",{className:"text-gray-400 text-sm",children:"--"})}):(null==s?void 0:s.compliant)?(0,l.jsx)(v,{}):(0,l.jsx)(y,{}),(0,l.jsx)("span",{className:"font-medium text-sm text-gray-900",children:t})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[!r&&!i&&s&&(0,l.jsx)("span",{className:"px-2 py-0.5 rounded text-[11px] font-semibold uppercase ".concat(s.compliant?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"),children:s.compliant?"COMPLIANT":"NON-COMPLIANT"}),i&&(0,l.jsx)("span",{className:"px-2 py-0.5 rounded text-[11px] font-medium bg-gray-100 text-gray-500 border border-gray-200",children:"UNAVAILABLE"}),(0,l.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:"transition-transform ".concat(o?"rotate-180":""),children:(0,l.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),o&&(0,l.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3",children:[r&&(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Checking compliance..."}),i&&(0,l.jsx)("p",{className:"text-sm text-red-600",children:i}),s&&(0,l.jsx)("div",{className:"space-y-2",children:s.checks.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[(0,l.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:e.passed?(0,l.jsx)(v,{}):(0,l.jsx)(y,{})}),(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.check_name}),(0,l.jsx)("span",{className:"text-[10px] font-mono text-gray-400",children:e.article})]}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.detail})]})]},t))})]})]})};var _=e=>{let{accessToken:t,logEntry:s}=e,[n,r]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),[p,g]=(0,a.useState)(null);return(0,a.useEffect)(()=>{var e;if(!t||!s.request_id)return;let l={request_id:s.request_id,user_id:s.user,model:s.model,timestamp:s.startTime,guardrail_information:null===(e=s.metadata)||void 0===e?void 0:e.guardrail_information};c(!0),h(null),(0,j.checkEuAiActCompliance)(t,l).then(r).catch(e=>h(e.message||"Failed to check EU AI Act compliance")).finally(()=>c(!1)),m(!0),g(null),(0,j.checkGdprCompliance)(t,l).then(o).catch(e=>g(e.message||"Failed to check GDPR compliance")).finally(()=>m(!1))},[t,s]),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Regulatory Compliance"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(N,{title:"EU AI Act",data:n,loading:d,error:x}),(0,l.jsx)(N,{title:"GDPR",data:i,loading:u,error:p})]})]})};let w=new Set(["presidio","bedrock","litellm_content_filter"]),k=e=>null==e||""===e?"—":("string"==typeof e?e:String(e)).replace(/_/g,"-").toUpperCase(),S=e=>"".concat(Math.round(1e3*e),"ms"),C=e=>Object.values(e.masked_entity_count||{}).reduce((e,t)=>e+("number"==typeof t?t:0),0),L=e=>{var t;return"success"===(null!==(t=e.guardrail_status)&&void 0!==t?t:"").toLowerCase()},M=e=>e<=3?"text-green-600 bg-green-50 border-green-200":e<=6?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200",D=e=>{var t,s;if(!L(e))return null;if(null!=e.risk_score)return e.risk_score;let l=C(e),a=null!==(t=e.patterns_checked)&&void 0!==t?t:0,n=null!==(s=e.confidence_score)&&void 0!==s?s:0;if(0===a&&0===n)return 0;let r=7*(a>0?l/a:0)+3*n;return l>0&&r<2&&(r=2),Math.min(10,Math.round(10*r)/10)},T=e=>e.policy_template||e.guardrail_name,E=()=>(0,l.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,l.jsx)("circle",{cx:"20",cy:"20",r:"20",fill:"#EEF2FF"}),(0,l.jsx)("path",{d:"M20 10l8 4v6c0 5.25-3.4 10.15-8 11.5C15.4 30.15 12 25.25 12 20v-6l8-4z",stroke:"#6366F1",strokeWidth:"1.5",fill:"none"}),(0,l.jsx)("path",{d:"M16 20l3 3 5-6",stroke:"#6366F1",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),z=e=>{let{className:t}=e;return(0,l.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",className:t,children:[(0,l.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#16A34A",strokeWidth:"1.5",fill:"#F0FDF4"}),(0,l.jsx)("path",{d:"M7 11l3 3 5-6",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},A=e=>{let{className:t}=e;return(0,l.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",className:t,children:[(0,l.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#DC2626",strokeWidth:"1.5",fill:"#FEF2F2"}),(0,l.jsx)("path",{d:"M8 8l6 6M14 8l-6 6",stroke:"#DC2626",strokeWidth:"1.5",strokeLinecap:"round"})]})},Z=()=>(0,l.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:[(0,l.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#3B82F6",strokeWidth:"1.5",fill:"#EFF6FF"}),(0,l.jsx)("path",{d:"M9 7.5l6 3.5-6 3.5V7.5z",fill:"#3B82F6"})]}),I=()=>(0,l.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:(0,l.jsx)("circle",{cx:"11",cy:"11",r:"5",fill:"#9CA3AF"})}),R=e=>{let{expanded:t}=e;return(0,l.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:"transition-transform ".concat(t?"rotate-180":""),children:(0,l.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})},O=()=>(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,l.jsx)("path",{d:"M8 2v8m0 0l-3-3m3 3l3-3M3 12h10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),P=e=>{let{matchDetails:t}=e;return t&&0!==t.length?(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsxs)("h5",{className:"text-sm font-medium mb-2 text-gray-700",children:["Match Details (",t.length,")"]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b text-left text-gray-500",children:[(0,l.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Type"}),(0,l.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Method"}),(0,l.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Action"}),(0,l.jsx)("th",{className:"pb-2 font-medium",children:"Detail"})]})}),(0,l.jsx)("tbody",{children:t.map((e,t)=>{var s,a,n;return(0,l.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,l.jsx)("td",{className:"py-2 pr-4",children:e.type}),(0,l.jsx)("td",{className:"py-2 pr-4",children:(0,l.jsx)("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-700 rounded text-xs",children:null!==(s=e.detection_method)&&void 0!==s?s:"-"})}),(0,l.jsx)("td",{className:"py-2 pr-4",children:(0,l.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat("BLOCK"===e.action_taken?"bg-red-100 text-red-800":"bg-blue-50 text-blue-700"),children:null!==(a=e.action_taken)&&void 0!==a?a:"-"})}),(0,l.jsxs)("td",{className:"py-2 font-mono text-xs text-gray-600 break-all",children:[e.category?"[".concat(e.category,"] "):"",null!==(n=e.snippet)&&void 0!==n?n:"-"]})]},t)})})]})})]}):null},F=e=>{let{response:t}=e,[s,n]=(0,a.useState)(!1);return(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>n(!s),children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(R,{expanded:s}),(0,l.jsx)("h5",{className:"font-medium text-sm ml-1",children:"Raw Guardrail Response"})]})}),s&&(0,l.jsx)("div",{className:"p-3 border-t bg-white",children:(0,l.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(t,null,2)})})]})})},B=e=>{let{entries:t}=e,s=(0,a.useMemo)(()=>[...t].sort((e,t)=>{var s,l;return(null!==(s=e.start_time)&&void 0!==s?s:0)-(null!==(l=t.start_time)&&void 0!==l?l:0)}),[t]),n=(0,a.useMemo)(()=>{if(0===s.length)return[];let e=s[0].start_time,t=[];t.push({type:"request",label:"Request received",offsetMs:0});let l=s.filter(e=>"pre_call"===e.guardrail_mode),a=s.filter(e=>"post_call"===e.guardrail_mode||"logging_only"===e.guardrail_mode),n=s.filter(e=>"during_call"===e.guardrail_mode);for(let s of l){let l=Math.round((s.end_time-e)*1e3);t.push({type:"guardrail",label:"Pre-call guardrail: ".concat(T(s)),offsetMs:l,status:L(s)?"PASSED":"FAILED",isSuccess:L(s)})}let r=l.length>0?Math.max(...l.map(e=>e.end_time)):e,i=a.length>0?Math.min(...a.map(e=>e.start_time)):void 0;for(let s of(t.push({type:"llm",label:"LLM call",offsetMs:Math.round(((null!=i?i:r+1)-e)*1e3)}),n)){let l=Math.round((s.end_time-e)*1e3);t.push({type:"guardrail",label:"During-call guardrail: ".concat(T(s)),offsetMs:l,status:L(s)?"PASSED":"FAILED",isSuccess:L(s)})}for(let s of a){let l=Math.round((s.end_time-e)*1e3);t.push({type:"guardrail",label:"Post-call guardrail: ".concat(T(s)),offsetMs:l,status:L(s)?"PASSED":"FAILED",isSuccess:L(s)})}let o=Math.max(...s.map(e=>e.end_time));return t.push({type:"response",label:"Response returned",offsetMs:Math.round((o-e)*1e3)+1}),t},[s]);return(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Request Lifecycle"}),(0,l.jsx)("div",{className:"relative",children:n.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-start gap-3 relative",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:"request"===e.type||"response"===e.type?(0,l.jsx)(I,{}):"llm"===e.type?(0,l.jsx)(Z,{}):e.isSuccess?(0,l.jsx)(z,{}):(0,l.jsx)(A,{})}),t<n.length-1&&(0,l.jsx)("div",{className:"w-0.5 bg-gray-200 flex-grow",style:{minHeight:"24px"}})]}),(0,l.jsx)("div",{className:"pb-4 flex-1 min-w-0",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,l.jsx)("span",{className:"text-sm ".concat("llm"===e.type?"text-blue-600 font-medium":"text-gray-900"),children:e.label}),e.status&&(0,l.jsx)("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold uppercase ".concat(e.isSuccess?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.status}),(0,l.jsxs)("span",{className:"text-xs text-gray-400 font-mono ml-auto flex-shrink-0",children:["T+",e.offsetMs,"ms"]})]})})]},t))})]})},q=e=>{var t;let{entry:s}=e,[r,o]=(0,a.useState)(!1),d=L(s),c=C(s),u=T(s),m=S(s.duration),h=k(s.guardrail_mode),p=D(s),g=null!==(t=s.guardrail_provider)&&void 0!==t?t:"presidio",j=s.guardrail_response,v=Array.isArray(j)?j:[],y="bedrock"!==g||null===j||"object"!=typeof j||Array.isArray(j)?void 0:j,b=null!=s.patterns_checked?"".concat(c,"/").concat(s.patterns_checked," matched"):c>0?"".concat(c," matched"):null;return(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>o(!r),children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:d?(0,l.jsx)(z,{}):(0,l.jsx)(A,{})}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-0",children:[(0,l.jsx)("span",{className:"font-semibold text-gray-900 text-sm truncate",children:u}),(0,l.jsx)("span",{className:"px-2 py-0.5 border border-blue-200 bg-blue-50 text-blue-700 rounded text-[11px] font-semibold uppercase flex-shrink-0",children:h}),(0,l.jsx)("span",{className:"px-2 py-0.5 rounded text-[11px] font-semibold uppercase flex-shrink-0 ".concat(d?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"),children:d?"PASSED":"FAILED"}),b&&(0,l.jsx)("span",{className:"px-2 py-0.5 rounded text-[11px] font-medium flex-shrink-0 ".concat(0===c?"bg-green-50 text-green-700 border border-green-200":"bg-amber-50 text-amber-700 border border-amber-200"),children:b}),null!=s.confidence_score&&(0,l.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 border border-gray-200 rounded text-[11px] font-medium flex-shrink-0",children:[(100*s.confidence_score).toFixed(0),"% conf"]}),null!=p&&d&&(0,l.jsx)(n.Z,{title:"Risk score: ".concat(p,"/10"),children:(0,l.jsxs)("span",{className:"px-2 py-0.5 border rounded text-[11px] font-semibold flex-shrink-0 ".concat(M(p)),children:["Risk ",p,"/10"]})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,l.jsx)("span",{className:"text-sm text-gray-500 font-mono",children:m}),s.detection_method&&(0,l.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 border border-gray-200 rounded text-[11px] font-medium",children:s.detection_method.split(",")[0].trim()}),(0,l.jsx)(R,{expanded:r})]})]}),r&&(0,l.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3",children:[s.classification&&(0,l.jsxs)("div",{className:"mb-3 bg-gray-50 rounded-lg p-3 space-y-1",children:[(0,l.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Classification"}),s.classification.category&&(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Category:"}),(0,l.jsx)("span",{children:s.classification.category})]}),s.classification.article_reference&&(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Reference:"}),(0,l.jsx)("span",{className:"font-mono",children:s.classification.article_reference})]}),null!=s.classification.confidence&&(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Confidence:"}),(0,l.jsxs)("span",{children:[(100*s.classification.confidence).toFixed(0),"%"]})]}),s.classification.reason&&(0,l.jsxs)("div",{className:"flex text-sm",children:[(0,l.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Reason:"}),(0,l.jsx)("span",{children:s.classification.reason})]})]}),s.match_details&&s.match_details.length>0&&(0,l.jsx)(P,{matchDetails:s.match_details}),c>0&&(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Masked Entities"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(s.masked_entity_count||{}).map(e=>{let[t,s]=e;return(0,l.jsxs)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium",children:[t,": ",s]},t)})})]}),"presidio"===g&&v.length>0&&(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(i,{entities:v})}),"bedrock"===g&&y&&(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(x,{response:y})}),"litellm_content_filter"===g&&j&&(0,l.jsx)("div",{className:"mt-3",children:(0,l.jsx)(f,{response:j})}),g&&!w.has(g)&&j&&(0,l.jsx)(F,{response:j})]})]})};var H=e=>{let{data:t,accessToken:s,logEntry:n}=e,r=(0,a.useMemo)(()=>Array.isArray(t)?t.filter(e=>!!e):t?[t]:[],[t]),i=r.filter(L).length,o=i===r.length,d=(0,a.useMemo)(()=>Math.round(1e3*r.reduce((e,t)=>{var s;return e+(null!==(s=t.duration)&&void 0!==s?s:0)},0)),[r]);return((0,a.useMemo)(()=>Array.from(new Set(r.map(e=>e.policy_template).filter(Boolean))),[r]),0===r.length)?null:(0,l.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm w-full max-w-full overflow-hidden mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(E,{}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Guardrails & Policy Compliance"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-500",children:[r.length," guardrail",1!==r.length?"s":""," evaluated"]}),(0,l.jsx)("span",{className:"text-gray-300",children:"|"}),(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold ".concat(o?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"),children:[o?(0,l.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,l.jsx)("path",{d:"M3 6l2.5 2.5L9 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}):null,i," Passed"]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-6",children:[(0,l.jsx)("div",{className:"text-right",children:(0,l.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Total: ",d,"ms overhead"]})}),(0,l.jsxs)("button",{onClick:()=>{let e=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="guardrail-compliance-log-".concat(new Date().toISOString().slice(0,10),".json"),s.click(),URL.revokeObjectURL(t)},className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,l.jsx)(O,{}),"Export Compliance Log"]})]})]}),s&&n&&(0,l.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,l.jsx)(_,{accessToken:s,logEntry:n})}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"w-[340px] flex-shrink-0 border-r border-gray-100 px-6 py-5",children:(0,l.jsx)(B,{entries:r})}),(0,l.jsxs)("div",{className:"flex-1 px-6 py-5 min-w-0",children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Evaluation Details"}),(0,l.jsx)("div",{className:"space-y-3",children:r.map((e,t)=>{var s;return(0,l.jsx)(q,{entry:e},"".concat(null!==(s=e.guardrail_name)&&void 0!==s?s:"guardrail","-").concat(t))})})]})]})]})}},33877:function(e,t,s){s.d(t,{Z:function(){return eW}});var l=s(57437),a=s(2265),n=s(63134),r=s(5545),i=s(15327),o=s(77565),d=s(9738),c=s(23639),u=s(29525),m=s(82023),x=s(25449),h=s(57840),p=s(55590),g=s(99981),f=s(3810),j=s(59352),v=s(70464),y=s(49638),b=s(77398),N=s.n(b),_=s(42673);let w="24px",k="request",S="response",C="monospace",L="#f0f0f0",{Text:M}=h.default;function D(e){let{log:t,onClose:s,onPrevious:a,onNext:n,statusLabel:r,statusColor:i,environment:o}=e,d=t.custom_llm_provider||"",c=d?(0,_.dr)(d):null;return(0,l.jsxs)("div",{style:{padding:"16px 24px",borderBottom:"1px solid ".concat(L),backgroundColor:"#fff",position:"sticky",top:0,zIndex:10},children:[(0,l.jsx)(T,{model:t.model,providerLogo:null==c?void 0:c.logo,providerName:null==c?void 0:c.displayName}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[(0,l.jsx)(E,{requestId:t.request_id}),(0,l.jsx)(z,{onPrevious:a,onNext:n,onClose:s})]}),(0,l.jsx)(A,{log:t,statusLabel:r,statusColor:i,environment:o})]})}function T(e){let{model:t,providerLogo:s,providerName:a}=e;return(0,l.jsxs)(p.Z,{size:8,style:{marginBottom:8},children:[s&&(0,l.jsx)("img",{src:s,alt:a||"Provider",style:{width:24,height:24},onError:e=>{e.target.style.display="none"}}),(0,l.jsxs)(p.Z,{size:8,direction:"horizontal",children:[(0,l.jsx)(M,{strong:!0,style:{fontSize:14},children:t}),a&&(0,l.jsx)(M,{type:"secondary",style:{fontSize:12},children:a})]})]})}function E(e){let{requestId:t}=e;return(0,l.jsx)("div",{style:{flex:1,minWidth:0},children:(0,l.jsx)(g.Z,{title:t,children:(0,l.jsx)(M,{strong:!0,copyable:{text:t,tooltips:["Copy Request ID","Copied!"]},style:{fontSize:16,fontFamily:C,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:t})})})}function z(e){let{onPrevious:t,onNext:s,onClose:a}=e,n={border:"1px solid #d9d9d9",borderRadius:4,padding:"0 4px",fontSize:12,fontFamily:"monospace",marginLeft:4,background:"#fafafa"};return(0,l.jsxs)(p.Z,{size:4,split:(0,l.jsx)("div",{style:{width:1,height:20,background:L}}),children:[(0,l.jsxs)(r.ZP,{type:"text",size:"small",onClick:t,children:[(0,l.jsx)(j.Z,{}),(0,l.jsx)("span",{style:n,children:"K"})]}),(0,l.jsxs)(r.ZP,{type:"text",size:"small",onClick:s,children:[(0,l.jsx)(v.Z,{}),(0,l.jsx)("span",{style:n,children:"J"})]}),(0,l.jsx)(g.Z,{title:"ESC to close",children:(0,l.jsx)(r.ZP,{type:"text",icon:(0,l.jsx)(y.Z,{}),onClick:a})})]})}function A(e){let{log:t,statusLabel:s,statusColor:a,environment:n}=e;return(0,l.jsxs)(p.Z,{size:12,children:[(0,l.jsx)(f.Z,{color:a,children:s}),(0,l.jsxs)(f.Z,{children:["Env: ",n]}),(0,l.jsxs)(p.Z,{size:8,children:[(0,l.jsx)(M,{type:"secondary",style:{fontSize:13},children:N()(t.startTime).format("MMM D, YYYY h:mm:ss A")}),(0,l.jsxs)(M,{type:"secondary",style:{fontSize:13},children:["(",N()(t.startTime).fromNow(),")"]})]})]})}var Z=s(51653),I=s(5945),R=s(76188),O=s(10353),P=s(44851),F=s(29967),B=s(65869),q=s(59872),H=s(73834),K=s(84933),Y=s(15273),U=s(35618);let{Text:V}=h.default;function W(e){let{value:t,maxWidth:s=180}=e;return t?(0,l.jsx)(g.Z,{title:t,children:(0,l.jsx)(V,{copyable:{text:t,tooltips:["Copy","Copied!"]},style:{maxWidth:s,display:"inline-block",verticalAlign:"bottom",fontFamily:C,fontSize:12},ellipsis:!0,children:t})}):(0,l.jsx)(V,{type:"secondary",children:"-"})}let{Text:J}=h.default;function G(e){let{prompt:t=0,completion:s=0,total:a=0}=e;return(0,l.jsxs)(J,{children:[a.toLocaleString()," (",t.toLocaleString()," prompt tokens + ",s.toLocaleString()," completion tokens)"]})}var $=s(86669);s(52621);let{Text:Q}=h.default;function X(e){let{data:t}=e;return t?(0,l.jsx)("div",{style:{maxHeight:400,overflow:"auto",background:"#fafafa",padding:12,borderRadius:4},children:(0,l.jsx)("div",{className:"[&_[role='tree']]:bg-white [&_[role='tree']]:text-slate-900",children:(0,l.jsx)($.gc,{data:t,style:$.jF,clickToExpandNode:!0})})}):(0,l.jsx)(Q,{type:"secondary",children:"No data"})}function ee(e){if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e}function et(e){return Array.isArray(e)?e:e?[e]:[]}function es(e){if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e}var el=s(58630),ea=s(56609);let{Text:en}=h.default;function er(e){var t;let{tool:s}=e,a=Object.entries((null===(t=s.parameters)||void 0===t?void 0:t.properties)||{}).map(e=>{var t,l;let[a,n]=e;return{key:a,name:a,type:n.type||"any",description:n.description||"-",required:(null===(l=s.parameters)||void 0===l?void 0:null===(t=l.required)||void 0===t?void 0:t.includes(a))||!1}}),n=[{title:"Parameter",dataIndex:"name",key:"name",render:(e,t)=>(0,l.jsxs)(en,{code:!0,children:[e,t.required&&(0,l.jsx)(en,{type:"danger",children:"*"})]})},{title:"Type",dataIndex:"type",key:"type",render:e=>(0,l.jsx)(en,{code:!0,style:{color:"#1890ff"},children:e})},{title:"Description",dataIndex:"description",key:"description",render:e=>(0,l.jsx)(en,{type:"secondary",children:e})}];return(0,l.jsxs)("div",{children:[s.description&&(0,l.jsx)("div",{style:{marginBottom:16},children:(0,l.jsx)(en,{style:{lineHeight:1.6},children:s.description})}),a.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)(en,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:8},children:"Parameters"}),(0,l.jsx)(ea.Z,{dataSource:a,columns:n,pagination:!1,size:"small",bordered:!0})]}),s.called&&s.callData&&(0,l.jsxs)("div",{style:{marginTop:16},children:[(0,l.jsx)(en,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:8},children:"Called With"}),(0,l.jsx)("div",{style:{background:"#f6ffed",border:"1px solid #b7eb8f",borderRadius:4,padding:12},children:(0,l.jsx)("pre",{style:{margin:0,fontSize:12,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(s.callData.arguments,null,2)})})]})]})}function ei(e){let{tool:t}=e,s={type:"function",function:{name:t.name,description:t.description,parameters:t.parameters}};return(0,l.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:12,background:"#fafafa",padding:12,borderRadius:4,maxHeight:300,overflow:"auto"},children:JSON.stringify(s,null,2)})}let{Text:eo}=h.default;function ed(e){let{tool:t}=e,[s,n]=(0,a.useState)("formatted");return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12},children:[(0,l.jsx)(eo,{type:"secondary",style:{fontSize:12},children:"Description"}),(0,l.jsxs)(F.ZP.Group,{size:"small",value:s,onChange:e=>n(e.target.value),children:[(0,l.jsx)(F.ZP.Button,{value:"formatted",children:"Formatted"}),(0,l.jsx)(F.ZP.Button,{value:"json",children:"JSON"})]})]}),"formatted"===s?(0,l.jsx)(er,{tool:t}):(0,l.jsx)(ei,{tool:t})]})}let{Text:ec}=h.default;function eu(e){let{tool:t}=e,[s,n]=(0,a.useState)(!1);return(0,l.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:8,overflow:"hidden"},children:[(0,l.jsxs)("div",{onClick:()=>n(!s),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",cursor:"pointer",background:s?"#fafafa":"#fff",transition:"background 0.2s"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,l.jsx)(el.Z,{style:{color:"#8c8c8c",fontSize:14}}),(0,l.jsxs)(ec,{style:{fontSize:14},children:[t.index,". ",t.name]})]}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,l.jsx)(f.Z,{color:t.called?"blue":"default",children:t.called?"called":"not called"}),s?(0,l.jsx)(v.Z,{style:{fontSize:12,color:"#8c8c8c"}}):(0,l.jsx)(o.Z,{style:{fontSize:12,color:"#8c8c8c"}})]})]}),s&&(0,l.jsx)("div",{style:{padding:"16px",borderTop:"1px solid #f0f0f0",background:"#fff"},children:(0,l.jsx)(ed,{tool:t})})]})}let{Text:em}=h.default;function ex(e){let{log:t}=e,s=function(e){let t=function(e){let t=es(e.proxy_server_request||e.messages);return!t||Array.isArray(t)?[]:"object"==typeof t&&t.tools&&Array.isArray(t.tools)?t.tools:[]}(e);if(0===t.length)return[];let s=function(e){let t=es(e.response);if(!t||"object"!=typeof t)return[];let s=t.choices;if(Array.isArray(s)&&s.length>0){let e=s[0].message;if(e&&Array.isArray(e.tool_calls))return e.tool_calls}if(Array.isArray(t.content)){let e=t.content.filter(e=>"tool_use"===e.type);if(e.length>0)return e.map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.input||{})}}))}return[]}(e),l=new Set(s.map(e=>{var t;return null===(t=e.function)||void 0===t?void 0:t.name}).filter(Boolean)),a=new Map;return s.forEach(e=>{var t,s;let l=null===(t=e.function)||void 0===t?void 0:t.name;l&&a.set(l,{id:e.id,name:l,arguments:function(e){try{return JSON.parse(e)}catch(e){return{}}}((null===(s=e.function)||void 0===s?void 0:s.arguments)||"{}")})}),t.map((e,t)=>{var s,n,r;let i=(null===(s=e.function)||void 0===s?void 0:s.name)||e.name||"Tool ".concat(t+1);return{index:t+1,name:i,description:(null===(n=e.function)||void 0===n?void 0:n.description)||e.description||"",parameters:(null===(r=e.function)||void 0===r?void 0:r.parameters)||e.input_schema||{},called:l.has(i),callData:a.get(i)}})}(t);if(0===s.length)return null;let a=s.length,n=s.filter(e=>e.called).length,r=s.slice(0,2).map(e=>e.name).join(", "),i=s.length>2;return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(P.default,{expandIconPosition:"start",items:[{key:"1",label:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Tools"}),(0,l.jsxs)(em,{type:"secondary",style:{fontSize:14},children:[a," provided, ",n," called"]}),(0,l.jsxs)(em,{type:"secondary",style:{fontSize:14},children:["• ",r,i&&"..."]})]}),children:(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:s.map(e=>(0,l.jsx)(eu,{tool:e},e.name))})}]})})}let eh=(e,t)=>{var s,l;let a=[];(null==e?void 0:e.messages)&&Array.isArray(e.messages)&&e.messages.forEach(e=>{a.push({role:e.role||"user",content:ep(e.content),toolCallId:e.tool_call_id})});let n=null,r=null==t?void 0:null===(l=t.choices)||void 0===l?void 0:null===(s=l[0])||void 0===s?void 0:s.message;return r&&(n={role:r.role||"assistant",content:r.content||"",toolCalls:eg(r.tool_calls)}),{requestMessages:a,responseMessage:n}},ep=e=>"string"==typeof e?e:Array.isArray(e)?e.map(e=>"string"==typeof e?e:"text"===e.type?e.text:"image_url"===e.type?"[Image]":JSON.stringify(e)).join("\n"):JSON.stringify(e),eg=e=>{if(e&&Array.isArray(e))return e.map(e=>{var t,s;return{id:e.id||"",name:(null===(t=e.function)||void 0===t?void 0:t.name)||"unknown",arguments:ef(null===(s=e.function)||void 0===s?void 0:s.arguments)}})},ef=e=>{if(!e)return{};if("string"==typeof e)try{return JSON.parse(e)}catch(t){return{raw:e}}return e};var ej=s(42264),ev=s(61340);let{Text:ey}=h.default;function eb(e){let{type:t,tokens:s,cost:a,onCopy:n,isCollapsed:i,onToggleCollapse:o}=e;return(0,l.jsxs)("div",{onClick:o,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",borderBottom:i?"none":"1px solid #f0f0f0",background:"#fafafa",cursor:o?"pointer":"default",transition:"background 0.15s ease"},onMouseEnter:e=>{o&&(e.currentTarget.style.background="#f5f5f5")},onMouseLeave:e=>{e.currentTarget.style.background="#fafafa"},children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[o&&(0,l.jsx)("div",{style:{display:"flex",alignItems:"center"},children:i?(0,l.jsx)(v.Z,{style:{fontSize:10,color:"#8c8c8c"}}):(0,l.jsx)(j.Z,{style:{fontSize:10,color:"#8c8c8c"}})}),(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:["input"===t?(0,l.jsx)(ev.Z,{style:{color:"#8c8c8c",fontSize:14}}):(0,l.jsx)("span",{style:{fontSize:14,filter:"grayscale(1)",opacity:.6},children:"✨"}),(0,l.jsx)(ey,{style:{fontWeight:500,fontSize:14},children:"input"===t?"Input":"Output"})]}),void 0!==s&&(0,l.jsxs)(ey,{type:"secondary",style:{fontSize:12},children:["Tokens: ",s.toLocaleString()]}),void 0!==a&&(0,l.jsxs)(ey,{type:"secondary",style:{fontSize:12},children:["Cost: $",a.toFixed(6)]})]}),(0,l.jsx)(g.Z,{title:"Copy",children:(0,l.jsx)(r.ZP,{type:"text",size:"small",icon:(0,l.jsx)(c.Z,{}),onClick:e=>{e.stopPropagation(),n()}})})]})}let{Text:eN}=h.default;function e_(e){let{label:t,content:s,defaultExpanded:n=!1}=e,[r,i]=(0,a.useState)(n),[d,c]=(0,a.useState)(!1),u=(null==s?void 0:s.length)||0;return s&&0!==u?(0,l.jsxs)("div",{style:{marginBottom:8},children:[(0,l.jsxs)("div",{onClick:()=>i(!r),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",padding:"4px 0",borderRadius:4,background:d?"#f5f5f5":"transparent",transition:"background 0.15s ease",marginBottom:r?4:0},children:[r?(0,l.jsx)(v.Z,{style:{fontSize:10,color:"#8c8c8c"}}):(0,l.jsx)(o.Z,{style:{fontSize:10,color:"#8c8c8c"}}),(0,l.jsx)(eN,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase"},children:t}),(0,l.jsxs)(eN,{type:"secondary",style:{fontSize:10},children:["(",u.toLocaleString()," chars)"]})]}),(0,l.jsx)("div",{style:{maxHeight:r?"2000px":"0px",overflow:"hidden",transition:"max-height 0.2s ease-out, opacity 0.2s ease-out",opacity:r?1:0},children:(0,l.jsx)("div",{style:{paddingLeft:16,fontSize:13,lineHeight:1.7,color:"#262626",borderLeft:"1px solid #f0f0f0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:s})})]}):null}let{Text:ew}=h.default;function ek(e){let{tool:t,compact:s=!1}=e;return(0,l.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:6,padding:s?"6px 10px":"10px 14px",marginTop:8,fontFamily:"monospace",fontSize:12,position:"relative"},children:[(0,l.jsx)("div",{style:{position:"absolute",top:-8,left:12,background:"#fff",padding:"0 6px",fontSize:10,color:"#8c8c8c",border:"1px solid #e9ecef",borderRadius:3},children:"function"}),(0,l.jsx)(ew,{strong:!0,style:{fontSize:13,display:"block",marginBottom:6},children:t.name}),Object.keys(t.arguments).length>0&&(0,l.jsx)("div",{children:Object.entries(t.arguments).map(e=>{let[t,s]=e;return(0,l.jsxs)("div",{style:{marginBottom:2},children:[(0,l.jsxs)(ew,{type:"secondary",style:{fontSize:12},children:[t,":"," "]}),(0,l.jsx)(ew,{style:{fontSize:12},children:JSON.stringify(s)})]},t)})})]})}let{Text:eS}=h.default;function eC(e){let{label:t,content:s,toolCalls:a,isCompact:n=!1}=e,r=s&&"null"!==s&&s.length>0?s:null,i=a&&a.length>0;return r||i?(0,l.jsxs)("div",{style:{marginBottom:n?8:0},children:[(0,l.jsx)(eS,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase",display:"block",marginBottom:3},children:t}),r&&(0,l.jsx)("div",{style:{fontSize:13,lineHeight:1.7,color:"#262626",whiteSpace:"pre-wrap",wordBreak:"break-word",marginBottom:i?6:0},children:r}),i&&(0,l.jsx)("div",{children:a.map((e,t)=>(0,l.jsx)(ek,{tool:e,compact:n},e.id||t))})]}):null}let{Text:eL}=h.default;function eM(e){let{messages:t}=e,[s,n]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1);return 0===t.length?null:(0,l.jsxs)("div",{style:{marginBottom:8},children:[(0,l.jsxs)("div",{onClick:()=>n(!s),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",padding:"4px 0",borderRadius:4,background:r?"#f5f5f5":"transparent",transition:"background 0.15s ease",marginBottom:s?4:0},children:[s?(0,l.jsx)(v.Z,{style:{fontSize:10,color:"#8c8c8c"}}):(0,l.jsx)(o.Z,{style:{fontSize:10,color:"#8c8c8c"}}),(0,l.jsxs)(eL,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase"},children:["HISTORY (",t.length," message",1!==t.length?"s":"",")"]})]}),(0,l.jsx)("div",{style:{maxHeight:s?"2000px":"0px",overflow:"hidden",transition:"max-height 0.2s ease-out, opacity 0.2s ease-out",opacity:s?1:0},children:(0,l.jsx)("div",{style:{paddingLeft:16,borderLeft:"1px solid #f0f0f0"},children:t.map((e,t)=>(0,l.jsx)(eC,{label:e.role.toUpperCase(),content:e.content,toolCalls:e.toolCalls,isCompact:!0},t))})})]})}function eD(e){let{messages:t,promptTokens:s,inputCost:n}=e,[r,i]=(0,a.useState)(!1);if(0===t.length)return null;let o=t.find(e=>"system"===e.role),d=t.filter(e=>"system"!==e.role),c=d.length>0?d[d.length-1]:null,u=d.slice(0,-1);return(0,l.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,marginBottom:8,overflow:"hidden"},children:[(0,l.jsx)(eb,{type:"input",tokens:s,cost:n,onCopy:()=>{let e=(null==c?void 0:c.content)||"";navigator.clipboard.writeText(e),ej.ZP.success("Input copied")},isCollapsed:r,onToggleCollapse:()=>i(!r)}),(0,l.jsx)("div",{style:{maxHeight:r?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:r?0:1},children:(0,l.jsxs)("div",{style:{padding:"12px 16px"},children:[o&&(0,l.jsx)(e_,{label:"SYSTEM",content:o.content,defaultExpanded:!!(o.content&&o.content.length<200)}),u.length>0&&(0,l.jsx)(eM,{messages:u}),c&&(0,l.jsx)(eC,{label:c.role.toUpperCase(),content:c.content,toolCalls:c.toolCalls})]})})]})}let{Text:eT}=h.default;function eE(e){let{message:t,completionTokens:s,outputCost:n}=e,[r,i]=(0,a.useState)(!1),o=()=>{if(!t)return;let e=t.content||"";navigator.clipboard.writeText(e),ej.ZP.success("Output copied")};return t?(0,l.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,overflow:"hidden"},children:[(0,l.jsx)(eb,{type:"output",tokens:s,cost:n,onCopy:o,isCollapsed:r,onToggleCollapse:()=>i(!r)}),(0,l.jsx)("div",{style:{maxHeight:r?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:r?0:1},children:(0,l.jsx)("div",{style:{padding:"12px 16px"},children:(0,l.jsx)(eC,{label:"ASSISTANT",content:t.content,toolCalls:t.toolCalls})})})]}):(0,l.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,overflow:"hidden"},children:[(0,l.jsx)(eb,{type:"output",tokens:s,cost:n,onCopy:o,isCollapsed:r,onToggleCollapse:()=>i(!r)}),(0,l.jsx)("div",{style:{maxHeight:r?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:r?0:1},children:(0,l.jsx)("div",{style:{padding:"12px 16px"},children:(0,l.jsx)(eT,{type:"secondary",style:{fontSize:13,fontStyle:"italic"},children:"No response data available"})})})]})}function ez(e){let{request:t,response:s,metrics:a}=e,{requestMessages:n,responseMessage:r}=eh(t,s);return(0,l.jsxs)("div",{children:[(0,l.jsx)(eD,{messages:n,promptTokens:null==a?void 0:a.prompt_tokens,inputCost:null==a?void 0:a.input_cost}),(0,l.jsx)(eE,{message:r,completionTokens:null==a?void 0:a.completion_tokens,outputCost:null==a?void 0:a.output_cost})]})}let{Text:eA}=h.default;function eZ(e){var t,s,a,n,r;let{logEntry:i,onOpenSettings:o,isLoadingDetails:d=!1,accessToken:c}=e,u=i.metadata||{},m="failure"===u.status,x=m?u.error_information:null,h=!!(s=i.messages)&&(Array.isArray(s)?s.length>0:"object"==typeof s&&Object.keys(s).length>0),p=!!(a=i.response)&&Object.keys(ee(a)).length>0,g=!h&&!p&&!m&&!d,f=null==u?void 0:u.guardrail_information,j=et(f),v=j.length>0,y=j.reduce((e,t)=>{let s=null==t?void 0:t.masked_entity_count;return s?e+Object.values(s).reduce((e,t)=>"number"==typeof t?e+t:e,0):e},0),b=0===j.length?"-":1===j.length?null!==(r=null===(n=j[0])||void 0===n?void 0:n.guardrail_name)&&void 0!==r?r:"-":"".concat(j.length," guardrails"),N=u.vector_store_request_metadata&&Array.isArray(u.vector_store_request_metadata)&&u.vector_store_request_metadata.length>0;return(0,l.jsxs)("div",{style:{padding:"".concat(w," ").concat(w," 0")},children:[m&&x&&(0,l.jsx)(Z.Z,{type:"error",showIcon:!0,message:"Request Failed",description:(0,l.jsx)(eI,{errorInfo:x}),className:"mb-6"}),i.request_tags&&Object.keys(i.request_tags).length>0&&(0,l.jsx)(eR,{tags:i.request_tags}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(I.Z,{title:"Request Details",size:"small",bordered:!1,style:{marginBottom:0},children:(0,l.jsxs)(R.Z,{column:2,size:"small",children:[(0,l.jsx)(R.Z.Item,{label:"Model",children:i.model}),(0,l.jsx)(R.Z.Item,{label:"Provider",children:i.custom_llm_provider||"-"}),(0,l.jsx)(R.Z.Item,{label:"Call Type",children:i.call_type}),(0,l.jsx)(R.Z.Item,{label:"Model ID",children:(0,l.jsx)(W,{value:i.model_id})}),(0,l.jsx)(R.Z.Item,{label:"API Base",children:(0,l.jsx)(W,{value:i.api_base,maxWidth:200})}),i.requester_ip_address&&(0,l.jsx)(R.Z.Item,{label:"IP Address",children:i.requester_ip_address}),v&&(0,l.jsx)(R.Z.Item,{label:"Guardrail",children:(0,l.jsx)(eO,{label:b,maskedCount:y})})]})})}),(0,l.jsx)(eP,{logEntry:i,metadata:u}),(0,l.jsx)(K.d,{costBreakdown:null==u?void 0:u.cost_breakdown,totalSpend:null!==(t=i.spend)&&void 0!==t?t:0,promptTokens:i.prompt_tokens,completionTokens:i.completion_tokens,cacheHit:i.cache_hit}),(0,l.jsx)(ex,{log:i}),g&&(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)(Y.I,{show:g,onOpenSettings:o})}),d?(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6 p-8 text-center",children:[(0,l.jsx)(O.Z,{size:"default"}),(0,l.jsx)("div",{style:{marginTop:8,color:"#999"},children:"Loading request & response data..."})]}):(0,l.jsx)(eF,{hasResponse:p,hasError:m,getRawRequest:()=>ee(i.proxy_server_request||i.messages),getFormattedResponse:()=>m&&x?{error:{message:x.error_message||"An error occurred",type:x.error_class||"error",code:x.error_code||"unknown",param:null}}:ee(i.response),logEntry:i}),v&&(0,l.jsx)("div",{id:"guardrail-section",children:(0,l.jsx)(H.Z,{data:f,accessToken:null!=c?c:null,logEntry:{request_id:i.request_id,user:i.user,model:i.model,startTime:i.startTime,metadata:i.metadata}})}),N&&(0,l.jsx)(U.r,{data:u.vector_store_request_metadata}),i.metadata&&Object.keys(i.metadata).length>0&&(0,l.jsx)(eq,{metadata:i.metadata}),(0,l.jsx)("div",{style:{height:w}})]})}function eI(e){let{errorInfo:t}=e;return(0,l.jsxs)("div",{children:[t.error_code&&(0,l.jsxs)("div",{children:[(0,l.jsx)(eA,{strong:!0,children:"Error Code:"})," ",t.error_code]}),t.error_message&&(0,l.jsxs)("div",{children:[(0,l.jsx)(eA,{strong:!0,children:"Message:"})," ",t.error_message]})]})}function eR(e){let{tags:t}=e;return(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden p-4 mb-6",children:[(0,l.jsx)(eA,{strong:!0,style:{display:"block",marginBottom:8,fontSize:16},children:"Tags"}),(0,l.jsx)(p.Z,{size:8,wrap:!0,children:Object.entries(t).map(e=>{let[t,s]=e;return(0,l.jsxs)(f.Z,{children:[t,": ",String(s)]},t)})})]})}function eO(e){let{label:t,maskedCount:s}=e;return(0,l.jsxs)(p.Z,{size:8,children:[(0,l.jsx)("a",{onClick:()=>{let e=document.getElementById("guardrail-section");e&&e.scrollIntoView({behavior:"smooth"})},style:{cursor:"pointer"},children:t}),s>0&&(0,l.jsxs)(f.Z,{color:"blue",children:[s," masked"]})]})}function eP(e){var t,s,a,n,r;let{logEntry:i,metadata:o}=e,d=i.cache_hit||(null==o?void 0:null===(t=o.additional_usage_values)||void 0===t?void 0:t.cache_read_input_tokens)&&o.additional_usage_values.cache_read_input_tokens>0,c=String(null!==(r=i.cache_hit)&&void 0!==r?r:"None"),u="true"===c.toLowerCase()?"green":"false"===c.toLowerCase()?"red":"default";return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(I.Z,{title:"Metrics",size:"small",style:{marginBottom:0},children:(0,l.jsxs)(R.Z,{column:2,size:"small",children:[(0,l.jsx)(R.Z.Item,{label:"Tokens",children:(0,l.jsx)(G,{prompt:i.prompt_tokens,completion:i.completion_tokens,total:i.total_tokens})}),(0,l.jsxs)(R.Z.Item,{label:"Cost",children:["$",(0,q.pw)(i.spend||0,8)]}),(0,l.jsxs)(R.Z.Item,{label:"Duration",children:[null===(s=i.duration)||void 0===s?void 0:s.toFixed(3)," s"]}),d&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(R.Z.Item,{label:"Cache Hit",children:(0,l.jsx)(f.Z,{color:u,children:c})}),(null==o?void 0:null===(a=o.additional_usage_values)||void 0===a?void 0:a.cache_read_input_tokens)>0&&(0,l.jsx)(R.Z.Item,{label:"Cache Read Tokens",children:(0,q.pw)(o.additional_usage_values.cache_read_input_tokens)}),(null==o?void 0:null===(n=o.additional_usage_values)||void 0===n?void 0:n.cache_creation_input_tokens)>0&&(0,l.jsx)(R.Z.Item,{label:"Cache Creation Tokens",children:(0,q.pw)(o.additional_usage_values.cache_creation_input_tokens)})]}),(null==o?void 0:o.litellm_overhead_time_ms)!==void 0&&null!==o.litellm_overhead_time_ms&&(0,l.jsxs)(R.Z.Item,{label:"LiteLLM Overhead",children:[o.litellm_overhead_time_ms.toFixed(2)," ms"]}),(0,l.jsx)(R.Z.Item,{label:"Retries",children:(null==o?void 0:o.attempted_retries)!==void 0&&(null==o?void 0:o.attempted_retries)!==null?o.attempted_retries>0?(0,l.jsxs)(l.Fragment,{children:[o.attempted_retries,void 0!==o.max_retries&&null!==o.max_retries?" / ".concat(o.max_retries):""]}):(0,l.jsx)(f.Z,{color:"green",children:"None"}):"-"}),(0,l.jsx)(R.Z.Item,{label:"Start Time",children:N()(i.startTime).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}),(0,l.jsx)(R.Z.Item,{label:"End Time",children:N()(i.endTime).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")})]})})})}function eF(e){var t,s,n,r;let{hasResponse:i,hasError:o,getRawRequest:d,getFormattedResponse:c,logEntry:u}=e,[m,x]=(0,a.useState)(k),[h,p]=(0,a.useState)("pretty"),g=null!==(s=u.spend)&&void 0!==s?s:0,f=u.prompt_tokens||0,j=u.completion_tokens||0,v=f+j,y=null===(t=u.metadata)||void 0===t?void 0:t.cost_breakdown,b=(null==y?void 0:y.input_cost)!==void 0&&(null==y?void 0:y.output_cost)!==void 0,N=b?null!==(n=y.input_cost)&&void 0!==n?n:0:v>0?g*f/v:0,_=b?null!==(r=y.output_cost)&&void 0!==r?r:0:v>0?g*j/v:0;return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(P.default,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},onClick:e=>{e.target.closest(".ant-radio-group")&&e.stopPropagation()},children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",style:{margin:0},children:"Request & Response"}),(0,l.jsxs)(F.ZP.Group,{size:"small",value:h,onChange:e=>p(e.target.value),children:[(0,l.jsx)(F.ZP.Button,{value:"pretty",children:"Pretty"}),(0,l.jsx)(F.ZP.Button,{value:"json",children:"JSON"})]})]}),children:(0,l.jsx)("div",{children:"pretty"===h?(0,l.jsx)(ez,{request:d(),response:c(),metrics:{prompt_tokens:f,completion_tokens:j,input_cost:N,output_cost:_}}):(0,l.jsx)(B.default,{activeKey:m,onChange:e=>x(e),tabBarExtraContent:(0,l.jsx)(eA,{copyable:{text:JSON.stringify(m===k?d():c(),null,2),tooltips:["Copy JSON","Copied!"]},disabled:m===S&&!i&&!o}),items:[{key:k,label:"Request",children:(0,l.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,l.jsx)(X,{data:d(),mode:"formatted"})})},{key:S,label:"Response",children:(0,l.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:i||o?(0,l.jsx)(X,{data:c(),mode:"formatted"}):(0,l.jsx)("div",{style:{textAlign:"center",padding:20,color:"#999",fontStyle:"italic"},children:"Response data not available"})})}]})})}]})})}function eB(e){let{guardrailEntries:t}=e,s=t.every(e=>{let t=(null==e?void 0:e.guardrail_status)||(null==e?void 0:e.status);return"pass"===t||"passed"===t||"success"===t});return(0,l.jsx)("div",{style:{textAlign:"left",marginBottom:12},children:(0,l.jsxs)("div",{onClick:()=>{let e=document.getElementById("guardrail-section");e&&e.scrollIntoView({behavior:"smooth"})},style:{display:"inline-flex",alignItems:"center",gap:6,padding:"4px 12px",borderRadius:16,cursor:"pointer",fontSize:13,fontWeight:500,backgroundColor:s?"#f0fdf4":"#fef2f2",color:s?"#15803d":"#b91c1c",border:"1px solid ".concat(s?"#bbf7d0":"#fecaca")},children:[s?"✓":"✗"," ",t.length," guardrail",1!==t.length?"s":""," evaluated",(0,l.jsx)("span",{style:{fontSize:11,opacity:.7},children:"↓"})]})})}function eq(e){let{metadata:t}=e;return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(P.default,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Metadata"}),children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:(0,l.jsx)(eA,{copyable:{text:JSON.stringify(t,null,2),tooltips:["Copy Metadata","Copied!"]}})}),(0,l.jsx)("pre",{style:{maxHeight:300,overflowY:"auto",fontSize:12,fontFamily:C,whiteSpace:"pre-wrap",wordBreak:"break-all",margin:0},children:JSON.stringify(t,null,2)})]})}]})})}var eH=s(19250),eK=s(71632),eY=s(39760);let eU=(e,t,s)=>{let{accessToken:l}=(0,eY.Z)();return(0,eK.a)({queryKey:["logDetails",e,t,l],queryFn:async()=>l&&e&&t?await (0,eH.uiSpendLogDetailsCall)(l,e,t):null,enabled:s&&!!l&&!!e&&!!t,staleTime:6e5,gcTime:6e5})};function eV(e){let{row:t,isSelected:s,onClick:a}=e,n=x.vt.includes(t.call_type),r=null!=t.duration?t.duration.toFixed(3):t.startTime&&t.endTime?((Date.parse(t.endTime)-Date.parse(t.startTime))/1e3).toFixed(3):"-";return(0,l.jsxs)("button",{type:"button",className:"w-full text-left pl-8 pr-2 py-1 transition-colors ".concat(s?"bg-blue-50":"hover:bg-slate-100"),onClick:a,children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[n?(0,l.jsx)(u.Z,{size:12,className:"text-slate-500 flex-shrink-0"}):(0,l.jsx)(m.Z,{size:12,className:"text-slate-500 flex-shrink-0"}),(0,l.jsx)("span",{className:"text-xs font-medium text-slate-900 truncate",children:function(e,t){let s=(t||"").trim();if(x.vt.includes(e))return s.replace(/^mcp:\s*/i,"").split("/").pop()||s||"mcp_tool";let l=(s.split("/").pop()||s).replace(/-20\d{6}.*$/i,"").replace(/:.*$/,""),a=l.match(/claude-[a-z0-9-]+/i);return a?a[0]:l||"llm_call"}(t.call_type,t.model)})]}),(0,l.jsxs)("div",{className:"text-[10px] text-slate-500 mt-0 flex items-center gap-1.5 font-mono",children:[(0,l.jsxs)("span",{children:[r,"s"]}),t.spend?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"\xb7"}),(0,l.jsx)("span",{children:(0,q.GS)(t.spend)})]}):null,t.total_tokens?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"\xb7"}),(0,l.jsxs)("span",{children:[t.total_tokens," tok"]})]}):null]})]})}function eW(e){let{open:t,onClose:s,logEntry:u,sessionId:m,accessToken:h,onOpenSettings:p,allLogs:g=[],onSelectLog:f,startTime:j}=e,v=!!m,[y,b]=(0,a.useState)(null),[N,_]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),{data:S=[]}=(0,eK.a)({queryKey:["sessionLogs",m],queryFn:async()=>{if(!m||!h)return[];let e=await (0,eH.sessionSpendLogsCall)(h,m);return(e.data||e||[]).map(e=>({...e,duration:(Date.parse(e.endTime)-Date.parse(e.startTime))/1e3})).sort((e,t)=>{let s=x.vt.includes(e.call_type)?1:0,l=x.vt.includes(t.call_type)?1:0;return s!==l?s-l:new Date(e.startTime).getTime()-new Date(t.startTime).getTime()})},enabled:!!(t&&v&&m&&h)}),C=(0,a.useMemo)(()=>v?S.length?y?S.find(e=>e.request_id===y)||S[0]:(null==u?void 0:u.request_id)&&S.find(e=>e.request_id===u.request_id)||S[0]:null:u,[v,u,y,S]);(0,a.useEffect)(()=>{v&&S.length&&(!y||!S.some(e=>e.request_id===y))&&b((null==u?void 0:u.request_id)&&S.some(e=>e.request_id===u.request_id)?u.request_id:S[0].request_id)},[v,u,y,S]),(0,a.useEffect)(()=>{t?_(!1):(v&&b(null),k(!1))},[t,v]);let{selectNextLog:L,selectPreviousLog:M}=function(e){let{isOpen:t,currentLog:s,allLogs:l,onClose:n,onSelectLog:r}=e;(0,a.useEffect)(()=>{let e=e=>{var s;if(!((s=e.target)instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&t)switch(e.key){case"Escape":n();break;case"j":case"J":o();break;case"k":case"K":i()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,s,l]);let i=()=>{if(!s||!l.length||!r)return;let e=l.findIndex(e=>e.request_id===s.request_id);e<l.length-1&&r(l[e+1])},o=()=>{if(!s||!l.length||!r)return;let e=l.findIndex(e=>e.request_id===s.request_id);e>0&&r(l[e-1])};return{selectNextLog:i,selectPreviousLog:o}}({isOpen:t,currentLog:C,allLogs:v?S:g,onClose:s,onSelectLog:e=>{v&&b(e.request_id),null==f||f(e)}}),T=eU(null==C?void 0:C.request_id,j,t&&!!(null==C?void 0:C.request_id)),E=T.data,z=T.isLoading,A=(0,a.useMemo)(()=>C?{...C,messages:(null==E?void 0:E.messages)||C.messages,response:(null==E?void 0:E.response)||C.response,proxy_server_request:(null==E?void 0:E.proxy_server_request)||C.proxy_server_request}:null,[C,E]),Z=(null==C?void 0:C.metadata)||{},I="failure"===Z.status?"Failure":"Success",R="failure"===Z.status?"error":"success",O=(null==Z?void 0:Z.user_api_key_team_alias)||"default",P=S.reduce((e,t)=>e+(t.spend||0),0),F=S.length>0?new Date(Math.min(...S.map(e=>new Date(e.startTime).getTime()))):null,B=S.length>0?new Date(Math.max(...S.map(e=>new Date(e.endTime).getTime()))):null,H=F&&B?((B.getTime()-F.getTime())/1e3).toFixed(2):"0.00",K=S.filter(e=>!x.vt.includes(e.call_type)).length,Y=S.filter(e=>x.vt.includes(e.call_type)).length,U=v?S:C?[C]:[],V=v?m||"":(null==C?void 0:C.request_id)||"",W=V.length>14?"".concat(V.slice(0,11),"..."):V,J=async()=>{if(V)try{await navigator.clipboard.writeText(V),k(!0),setTimeout(()=>k(!1),1200)}catch(e){}};return C&&A?(0,l.jsx)(n.Z,{title:null,placement:"right",onClose:s,open:t,width:"60%",closable:!1,mask:!0,maskClosable:!0,styles:{body:{padding:0,overflow:"hidden"},header:{display:"none"}},children:(0,l.jsxs)("div",{style:{height:"100%"},className:"flex relative",children:[N?(0,l.jsx)(r.ZP,{type:"text",size:"small",icon:(0,l.jsx)(o.Z,{}),onClick:()=>_(!1),className:"absolute top-2 left-2 z-20 !bg-white !border !border-slate-200 !rounded-md","aria-label":"Expand trace sidebar"}):(0,l.jsx)(r.ZP,{type:"text",size:"small",icon:(0,l.jsx)(i.Z,{}),onClick:()=>_(!0),className:"absolute top-2 left-2 z-20 !bg-white !border !border-slate-200 !rounded-md","aria-label":"Collapse trace sidebar"}),!N&&(0,l.jsxs)("div",{className:"border-r border-slate-200 bg-slate-50 flex flex-col",style:{width:224},children:[(0,l.jsxs)("div",{className:"pl-12 pr-3 py-2 border-b border-slate-200 bg-white",children:[(0,l.jsx)("div",{className:"flex items-start justify-between gap-2",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:v?"Session":"Trace"}),(0,l.jsxs)("div",{className:"font-mono text-[12px] text-slate-900 leading-tight flex items-center gap-1",children:[(0,l.jsx)("span",{className:"truncate",children:W}),(0,l.jsx)("button",{type:"button",onClick:J,className:"text-slate-400 hover:text-slate-600","aria-label":"Copy trace id",children:w?(0,l.jsx)(d.Z,{className:"text-[11px]"}):(0,l.jsx)(c.Z,{className:"text-[11px]"})})]})]})}),(0,l.jsxs)("div",{className:"mt-1 text-[11px] text-slate-500 font-mono",children:[U.length," req",(0,l.jsx)("span",{className:"mx-1.5",children:"\xb7"}),v?"".concat(K," LLM"):"".concat(U.filter(e=>!x.vt.includes(e.call_type)).length," LLM"),(0,l.jsx)("span",{className:"mx-1.5",children:"\xb7"}),v?"".concat(Y," MCP"):"".concat(U.filter(e=>x.vt.includes(e.call_type)).length," MCP"),(0,l.jsx)("span",{className:"mx-1.5",children:"\xb7"}),v?(0,q.GS)(P):(0,q.GS)(C.spend||0),v&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"mx-1.5",children:"\xb7"}),H,"s"]})]})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[et(null==Z?void 0:Z.guardrail_information).length>0&&(0,l.jsx)("div",{className:"px-3 pt-2",children:(0,l.jsx)(eB,{guardrailEntries:et(null==Z?void 0:Z.guardrail_information)})}),v?(0,l.jsx)("div",{className:"py-1",children:(0,l.jsxs)("div",{className:"relative pl-2",children:[(0,l.jsx)("div",{className:"absolute left-4 top-1 bottom-1 border-l border-slate-300"}),U.map((e,t)=>{let s=t===U.length-1;return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute left-4 top-3 w-3 border-t border-slate-300"}),s&&(0,l.jsx)("div",{className:"absolute left-4 top-3 bottom-0 w-px bg-slate-50"}),(0,l.jsx)(eV,{row:e,isSelected:e.request_id===C.request_id,onClick:()=>{b(e.request_id),null==f||f(e)}})]},e.request_id)})]})}):(0,l.jsx)("div",{className:"py-1",children:U.map(e=>(0,l.jsx)(eV,{row:e,isSelected:e.request_id===C.request_id,onClick:()=>null==f?void 0:f(e)},e.request_id))})]})]}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,l.jsx)(D,{log:C,onClose:s,onPrevious:M,onNext:L,statusLabel:I,statusColor:R,environment:O}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,l.jsx)(eZ,{logEntry:A,onOpenSettings:p,isLoadingDetails:z,accessToken:null!=h?h:null})})]})]})}):null}},35618:function(e,t,s){s.d(t,{r:function(){return i}});var l=s(57437),a=s(2265),n=s(44851),r=s(42673);function i(e){let{data:t}=e,[s,i]=(0,a.useState)({});if(!t||0===t.length)return null;let o=e=>new Date(1e3*e).toLocaleString(),d=(e,t)=>"".concat(((t-e)*1e3).toFixed(2),"ms"),c=(e,t)=>{let s="".concat(e,"-").concat(t);i(e=>({...e,[s]:!e[s]}))};return(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,l.jsx)(n.default,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Vector Store Requests"}),children:(0,l.jsx)("div",{className:"p-4",children:t.map((e,t)=>(0,l.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,l.jsx)("div",{className:"bg-white rounded-lg border p-4 mb-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Query:"}),(0,l.jsx)("span",{className:"font-mono",children:e.query})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Vector Store ID:"}),(0,l.jsx)("span",{className:"font-mono",children:e.vector_store_id})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Provider:"}),(0,l.jsx)("span",{className:"flex items-center",children:(()=>{let{logo:t,displayName:s}=(0,r.dr)(e.custom_llm_provider);return(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)("img",{src:t,alt:"".concat(s," logo"),className:"h-5 w-5 mr-2"}),s]})})()})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Start Time:"}),(0,l.jsx)("span",{children:o(e.start_time)})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"End Time:"}),(0,l.jsx)("span",{children:o(e.end_time)})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("span",{className:"font-medium w-1/3",children:"Duration:"}),(0,l.jsx)("span",{children:d(e.start_time,e.end_time)})]})]})]})}),(0,l.jsx)("h4",{className:"font-medium mb-2",children:"Search Results"}),(0,l.jsx)("div",{className:"space-y-2",children:e.vector_store_search_response.data.map((e,a)=>{let n=s["".concat(t,"-").concat(a)]||!1;return(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 cursor-pointer",onClick:()=>c(t,a),children:[(0,l.jsx)("svg",{className:"w-5 h-5 mr-2 transition-transform ".concat(n?"transform rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("span",{className:"font-medium mr-2",children:["Result ",a+1]}),(0,l.jsxs)("span",{className:"text-gray-500 text-sm",children:["Score: ",(0,l.jsx)("span",{className:"font-mono",children:e.score.toFixed(4)})]})]})]}),n&&(0,l.jsx)("div",{className:"p-3 border-t bg-white",children:e.content.map((e,t)=>(0,l.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,l.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.type}),(0,l.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap break-all bg-gray-50 p-2 rounded",children:e.text})]},t))})]},a)})})]},t))})}]})})}},25449:function(e,t,s){s.d(t,{$A:function(){return l},kF:function(){return n},vt:function(){return a}});let l=[{label:"400 - Bad Request",value:"400"},{label:"401 - Invalid Authentication",value:"401"},{label:"403 - Permission Denied",value:"403"},{label:"404 - Not Found",value:"404"},{label:"408 - Request Timeout",value:"408"},{label:"422 - Unprocessable Entity",value:"422"},{label:"429 - Rate Limited",value:"429"},{label:"500 - Internal Server Error",value:"500"},{label:"502 - Bad Gateway",value:"502"},{label:"503 - Service Unavailable",value:"503"},{label:"529 - Overloaded",value:"529"}],a=["call_mcp_tool","list_mcp_tools"],n=[{label:"Last 15 Minutes",value:15,unit:"minutes"},{label:"Last Hour",value:1,unit:"hours"},{label:"Last 4 Hours",value:4,unit:"hours"},{label:"Last 24 Hours",value:24,unit:"hours"},{label:"Last 7 Days",value:7,unit:"days"}]},91064:function(e,t,s){s.d(t,{Z:function(){return eP}});var l=s(57437),a=s(29827),n=s(71632),r=s(45345),i=s(77398),o=s.n(i),d=s(2265);s(73834);var c=s(59872),u=s(55322),m=s(30356),x=s(59341),h=s(12485),p=s(18135),g=s(35242),f=s(29706),j=s(77991),v=s(5545),y=s(20347),b=s(30280),N=s(44633),_=s(86462),w=s(49084),k=s(71594),S=s(24525),C=s(19130),L=s(99981);function M(e){let{keys:t,totalCount:s,isLoading:a,isFetching:n,pageIndex:r,pageSize:i,onPageChange:o}=e,[u,m]=(0,d.useState)([{id:"deleted_at",desc:!0}]),[x,h]=(0,d.useState)({pageIndex:r,pageSize:i});d.useEffect(()=>{h({pageIndex:r,pageSize:i})},[r,i]);let p=[{id:"token",accessorKey:"token",header:"Key ID",size:150,maxSize:250,cell:e=>{let t=e.getValue();return(0,l.jsx)(L.Z,{title:t,children:(0,l.jsx)("span",{className:"font-mono text-blue-500 text-xs truncate block max-w-[250px]",children:t||"-"})})}},{id:"key_alias",accessorKey:"key_alias",header:"Key Alias",size:150,maxSize:200,cell:e=>{let t=e.getValue();return(0,l.jsx)(L.Z,{title:t,children:(0,l.jsx)("span",{className:"font-mono text-xs truncate block max-w-[200px]",children:null!=t?t:"-"})})}},{id:"team_alias",accessorKey:"team_alias",header:"Team Alias",size:120,maxSize:180,cell:e=>{let t=e.getValue();return(0,l.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})}},{id:"spend",accessorKey:"spend",header:"Spend (USD)",size:100,maxSize:140,cell:e=>(0,l.jsx)("span",{className:"block max-w-[140px]",children:(0,c.pw)(e.getValue(),4)})},{id:"max_budget",accessorKey:"max_budget",header:"Budget (USD)",size:110,maxSize:150,cell:e=>{let t=e.getValue();return(0,l.jsx)("span",{className:"block max-w-[150px]",children:null===t?"Unlimited":"$".concat((0,c.pw)(t))})}},{id:"user_email",accessorKey:"user_email",header:"User Email",size:160,maxSize:250,cell:e=>{let t=e.getValue();return(0,l.jsx)(L.Z,{title:t,children:(0,l.jsx)("span",{className:"font-mono text-xs truncate block max-w-[250px]",children:null!=t?t:"-"})})}},{id:"user_id",accessorKey:"user_id",header:"User ID",size:120,maxSize:200,cell:e=>{let t=e.getValue();return(0,l.jsx)(L.Z,{title:t||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[200px]",children:t||"-"})})}},{id:"created_at",accessorKey:"created_at",header:"Created At",size:120,maxSize:140,cell:e=>{let t=e.getValue();return(0,l.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"created_by",accessorKey:"created_by",header:"Created By",size:120,maxSize:180,cell:e=>{let t=e.row.original.created_by;return(0,l.jsx)(L.Z,{title:t||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})})}},{id:"deleted_at",accessorKey:"deleted_at",header:"Deleted At",size:120,maxSize:140,cell:e=>{let t=e.row.original.deleted_at;return(0,l.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"deleted_by",accessorKey:"deleted_by",header:"Deleted By",size:120,maxSize:180,cell:e=>{let t=e.row.original.deleted_by;return(0,l.jsx)(L.Z,{title:t||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})})}}],g=(0,k.b7)({data:t,columns:p,columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:u,pagination:x},onSortingChange:m,onPaginationChange:e=>{let t="function"==typeof e?e(x):e;h(t),o(t.pageIndex)},getCoreRowModel:(0,S.sC)(),getSortedRowModel:(0,S.tj)(),getPaginationRowModel:(0,S.G_)(),enableSorting:!0,manualSorting:!1,manualPagination:!0,pageCount:Math.ceil(s/i)}),{pageIndex:f}=g.getState().pagination,j=f*i+1,v="".concat(j," - ").concat(Math.min((f+1)*i,s));return(0,l.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,l.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[a||n?(0,l.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:"Loading..."}):(0,l.jsxs)("span",{className:"inline-flex text-sm text-gray-700",children:["Showing ",v," of ",s," results"]}),(0,l.jsxs)("div",{className:"inline-flex items-center gap-2",children:[a||n?(0,l.jsx)("span",{className:"text-sm text-gray-700",children:"Loading..."}):(0,l.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",f+1," of ",g.getPageCount()]}),(0,l.jsx)("button",{onClick:()=>g.previousPage(),disabled:a||n||!g.getCanPreviousPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,l.jsx)("button",{onClick:()=>g.nextPage(),disabled:a||n||!g.getCanNextPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),(0,l.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,l.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)(C.iA,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:g.getCenterTotalSize()},children:[(0,l.jsx)(C.ss,{children:g.getHeaderGroups().map(e=>(0,l.jsx)(C.SC,{children:e.headers.map(e=>(0,l.jsx)(C.xs,{"data-header-id":e.id,className:"py-1 h-8 relative hover:bg-gray-50",style:{width:e.getSize(),maxWidth:e.column.columnDef.maxSize,position:"relative"},onMouseEnter:()=>{let t=document.querySelector('[data-header-id="'.concat(e.id,'"] .resizer'));t&&(t.style.opacity="0.5")},onMouseLeave:()=>{let t=document.querySelector('[data-header-id="'.concat(e.id,'"] .resizer'));t&&!e.column.getIsResizing()&&(t.style.opacity="0")},onClick:e.column.getToggleSortingHandler(),children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,k.ie)(e.column.columnDef.header,e.getContext())}),(0,l.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,l.jsx)(N.Z,{className:"h-4 w-4 text-blue-500"}),desc:(0,l.jsx)(_.Z,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,l.jsx)(w.Z,{className:"h-4 w-4 text-gray-400"})}),(0,l.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:"resizer ".concat(g.options.columnResizeDirection," ").concat(e.column.getIsResizing()?"isResizing":""),style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:e.column.getIsResizing()?1:0}})]})},e.id))},e.id))}),(0,l.jsx)(C.RM,{children:a||n?(0,l.jsx)(C.SC,{children:(0,l.jsx)(C.pj,{colSpan:p.length,className:"h-8 text-center",children:(0,l.jsx)("div",{className:"text-center text-gray-500",children:(0,l.jsx)("p",{children:"\uD83D\uDE85 Loading keys..."})})})}):t.length>0?g.getRowModel().rows.map(e=>(0,l.jsx)(C.SC,{className:"h-8",children:e.getVisibleCells().map(e=>(0,l.jsx)(C.pj,{style:{width:e.column.getSize(),maxWidth:e.column.columnDef.maxSize,whiteSpace:"pre-wrap",overflow:"hidden"},className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,k.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(C.SC,{children:(0,l.jsx)(C.pj,{colSpan:p.length,className:"h-8 text-center",children:(0,l.jsx)("div",{className:"text-center text-gray-500",children:(0,l.jsx)("p",{children:"No deleted keys found"})})})})})]})})})})]})})}function D(){let[e,t]=(0,d.useState)(0),[s]=(0,d.useState)(50),{data:a,isPending:n,isFetching:r}=(0,b.Tv)(e+1,s);return(0,l.jsx)(M,{keys:(null==a?void 0:a.keys)||[],totalCount:(null==a?void 0:a.total_count)||0,isLoading:n,isFetching:r,pageIndex:e,pageSize:s,onPageChange:t})}var T=s(47359),E=s(41649),z=s(21626),A=s(97214),Z=s(28241),I=s(58834),R=s(69552),O=s(71876),P=s(84264),F=s(46468);function B(e){let{teams:t,isLoading:s,isFetching:a}=e,[n,r]=(0,d.useState)([{id:"deleted_at",desc:!0}]),i=[{id:"team_alias",accessorKey:"team_alias",header:"Team Name",size:150,maxSize:200,cell:e=>{let t=e.getValue();return(0,l.jsx)(L.Z,{title:t||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[200px]",children:t||"-"})})}},{id:"team_id",accessorKey:"team_id",header:"Team ID",size:150,maxSize:250,cell:e=>{let t=e.getValue();return(0,l.jsx)(L.Z,{title:t,children:(0,l.jsx)("span",{className:"font-mono text-blue-500 text-xs truncate block max-w-[250px]",children:t||"-"})})}},{id:"created_at",accessorKey:"created_at",header:"Created",size:120,maxSize:140,cell:e=>{let t=e.getValue();return(0,l.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"spend",accessorKey:"spend",header:"Spend (USD)",size:100,maxSize:140,cell:e=>{let t=e.row.original.spend;return(0,l.jsx)("span",{className:"block max-w-[140px]",children:void 0!==t?(0,c.pw)(t,4):"-"})}},{id:"max_budget",accessorKey:"max_budget",header:"Budget (USD)",size:110,maxSize:150,cell:e=>{let t=e.getValue();return(0,l.jsx)("span",{className:"block max-w-[150px]",children:null==t?"No limit":"$".concat((0,c.pw)(t))})}},{id:"models",accessorKey:"models",header:"Models",size:200,maxSize:300,cell:e=>{let t=e.getValue();return Array.isArray(t)&&0!==t.length?(0,l.jsxs)("div",{className:"flex flex-wrap gap-1 max-w-[300px]",children:[t.slice(0,3).map((e,t)=>"all-proxy-models"===e?(0,l.jsx)(E.Z,{size:"xs",color:"red",children:(0,l.jsx)(P.Z,{children:"All Proxy Models"})},t):(0,l.jsx)(E.Z,{size:"xs",color:"blue",children:(0,l.jsx)(P.Z,{children:e.length>30?"".concat((0,F.W0)(e).slice(0,30),"..."):(0,F.W0)(e)})},t)),t.length>3&&(0,l.jsx)(E.Z,{size:"xs",color:"gray",children:(0,l.jsxs)(P.Z,{children:["+",t.length-3," ",t.length-3==1?"more model":"more models"]})})]}):(0,l.jsx)(E.Z,{size:"xs",color:"red",children:(0,l.jsx)(P.Z,{children:"All Proxy Models"})})}},{id:"organization_id",accessorKey:"organization_id",header:"Organization",size:150,maxSize:200,cell:e=>{let t=e.getValue();return(0,l.jsx)(L.Z,{title:t||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[200px]",children:t||"-"})})}},{id:"deleted_at",accessorKey:"deleted_at",header:"Deleted At",size:120,maxSize:140,cell:e=>{let t=e.row.original.deleted_at;return(0,l.jsx)("span",{className:"block max-w-[140px]",children:t?new Date(t).toLocaleDateString():"-"})}},{id:"deleted_by",accessorKey:"deleted_by",header:"Deleted By",size:120,maxSize:180,cell:e=>{let t=e.row.original.deleted_by;return(0,l.jsx)(L.Z,{title:t||void 0,children:(0,l.jsx)("span",{className:"truncate block max-w-[180px]",children:t||"-"})})}}],o=(0,k.b7)({data:t,columns:i,columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:n},onSortingChange:r,getCoreRowModel:(0,S.sC)(),getSortedRowModel:(0,S.tj)(),enableSorting:!0,manualSorting:!1});return(0,l.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,l.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,l.jsx)("div",{className:"flex items-center justify-between w-full mb-4",children:s||a?(0,l.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:"Loading..."}):(0,l.jsxs)("span",{className:"inline-flex text-sm text-gray-700",children:["Showing ",t.length," ",1===t.length?"team":"teams"]})}),(0,l.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,l.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)(z.Z,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:o.getCenterTotalSize()},children:[(0,l.jsx)(I.Z,{children:o.getHeaderGroups().map(e=>(0,l.jsx)(O.Z,{children:e.headers.map(e=>(0,l.jsx)(R.Z,{"data-header-id":e.id,className:"py-1 h-8 relative hover:bg-gray-50",style:{width:e.getSize(),maxWidth:e.column.columnDef.maxSize,position:"relative"},onMouseEnter:()=>{let t=document.querySelector('[data-header-id="'.concat(e.id,'"] .resizer'));t&&(t.style.opacity="0.5")},onMouseLeave:()=>{let t=document.querySelector('[data-header-id="'.concat(e.id,'"] .resizer'));t&&!e.column.getIsResizing()&&(t.style.opacity="0")},onClick:e.column.getToggleSortingHandler(),children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,k.ie)(e.column.columnDef.header,e.getContext())}),(0,l.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,l.jsx)(N.Z,{className:"h-4 w-4 text-blue-500"}),desc:(0,l.jsx)(_.Z,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,l.jsx)(w.Z,{className:"h-4 w-4 text-gray-400"})}),(0,l.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:"resizer ".concat(o.options.columnResizeDirection," ").concat(e.column.getIsResizing()?"isResizing":""),style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:e.column.getIsResizing()?1:0}})]})},e.id))},e.id))}),(0,l.jsx)(A.Z,{children:s||a?(0,l.jsx)(O.Z,{children:(0,l.jsx)(Z.Z,{colSpan:i.length,className:"h-8 text-center",children:(0,l.jsx)("div",{className:"text-center text-gray-500",children:(0,l.jsx)("p",{children:"\uD83D\uDE85 Loading teams..."})})})}):t.length>0?o.getRowModel().rows.map(e=>(0,l.jsx)(O.Z,{className:"h-8",children:e.getVisibleCells().map(e=>(0,l.jsx)(Z.Z,{style:{width:e.column.getSize(),maxWidth:e.column.columnDef.maxSize,whiteSpace:"pre-wrap",overflow:"hidden"},className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,k.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(O.Z,{children:(0,l.jsx)(Z.Z,{colSpan:i.length,className:"h-8 text-center",children:(0,l.jsx)("div",{className:"text-center text-gray-500",children:(0,l.jsx)("p",{children:"No deleted teams found"})})})})})]})})})})]})})}function q(){let{data:e,isPending:t,isFetching:s}=(0,T.iN)(1,100);return(0,l.jsx)(B,{teams:e||[],isLoading:t,isFetching:s})}var H=s(30841),K=s(52178),Y=s(61935),U=s(19616),V=s(57840),W=s(55590),J=s(37592);let{Text:G}=V.default,$=e=>{let{value:t,onChange:s,placeholder:a="Select a model",style:n,pageSize:r=50,allowClear:i=!0,disabled:o=!1}=e,[c,u]=(0,d.useState)(""),[m,x]=(0,U.G)("",{wait:300}),{data:h,fetchNextPage:p,hasNextPage:g,isFetchingNextPage:f,isLoading:j}=(0,K.QT)(r,m||void 0),v=(0,d.useMemo)(()=>{if(!(null==h?void 0:h.pages))return[];let e=new Set,t=[];for(let n of h.pages)for(let r of n.data){var s,l,a;let n=null!==(l=null===(s=r.model_info)||void 0===s?void 0:s.id)&&void 0!==l?l:"",i=null!==(a=r.model_name)&&void 0!==a?a:"";!n||e.has(n)||(e.add(n),t.push({label:i?"".concat(i," (").concat(n,")"):n,value:n,modelName:i,modelId:n}))}return t},[h]);return(0,l.jsx)(J.default,{value:t||void 0,onChange:e=>{var t;let l="string"==typeof e?e:Array.isArray(e)&&null!==(t=e[0])&&void 0!==t?t:"";null==s||s(l)},placeholder:a,style:{width:"100%",...n},allowClear:i,disabled:o,showSearch:!0,filterOption:!1,onSearch:e=>{u(e),x(e)},searchValue:c,onPopupScroll:e=>{let t=e.currentTarget;(t.scrollTop+t.clientHeight)/t.scrollHeight>=.8&&g&&!f&&p()},loading:j,notFoundContent:j?(0,l.jsx)(Y.Z,{spin:!0}):"No models found",options:v,optionRender:e=>{let{modelName:t,modelId:s}=e.data;return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsxs)(W.Z,{direction:"vertical",children:[(0,l.jsxs)(W.Z,{direction:"horizontal",children:[(0,l.jsx)(G,{strong:!0,children:"Model name:"}),(0,l.jsx)(G,{ellipsis:!0,children:t})]}),(0,l.jsxs)(G,{ellipsis:!0,type:"secondary",children:["Model ID: ",s]})]}):(0,l.jsxs)(G,{ellipsis:!0,type:"secondary",children:["Model ID: ",s]})})},popupRender:e=>(0,l.jsxs)(l.Fragment,{children:[e,f&&(0,l.jsx)("div",{style:{textAlign:"center",padding:8},children:(0,l.jsx)(Y.Z,{spin:!0})})]})})};var Q=s(23048),X=s(19250),ee=s(70694),et=s(12322),es=s(78489),el=s(42673),ea=s(47024),en=s(13648),er=s(25449);let ei=e=>{let{size:t=12}=e;return(0,l.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0 text-gray-400",children:(0,l.jsx)("path",{d:"M12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0-1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0-1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3z"})})},eo=e=>{let{size:t=10}=e;return(0,l.jsx)("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:(0,l.jsx)("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})})},ed=e=>{let{count:t}=e;return(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,l.jsx)(ei,{}),null!=t?t:"LLM"]})},ec=e=>{let{count:t}=e;return(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-50 text-amber-700 border border-amber-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,l.jsx)(eo,{}),null!=t?t:"MCP"]})},eu=(e,t)=>{var s,l;return(null===(l=e.metadata)||void 0===l?void 0:null===(s=l.mcp_tool_call_metadata)||void 0===s?void 0:s.mcp_server_logo_url)?e.metadata.mcp_tool_call_metadata.mcp_server_logo_url:t?(0,el.dr)(t).logo:""},em=e=>{let{label:t,field:s,sortBy:a,sortOrder:n,onSortChange:r}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{children:t}),(0,l.jsx)(ea._,{sortState:a===s&&n,onSortChange:e=>{!1===e?r("startTime","desc"):r(s,e)}})]})},ex=e=>[{header:e?()=>(0,l.jsx)(em,{label:"Time",field:"startTime",sortBy:e.sortBy,sortOrder:e.sortOrder,onSortChange:e.onSortChange}):"Time",accessorKey:"startTime",cell:e=>(0,l.jsx)(en.s,{utcTime:e.getValue()})},{header:"Type",id:"type",cell:e=>{var t,s;let a=e.row.original,n=a.session_total_count||1,r=er.vt.includes(a.call_type),i=null!==(t=a.session_llm_count)&&void 0!==t?t:r?0:n,o=null!==(s=a.session_mcp_count)&&void 0!==s?s:r?n:0;if(r)return(0,l.jsx)(ec,{});if(n<=1)return(0,l.jsx)(ed,{});let d=(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,l.jsx)(ei,{}),(0,l.jsx)("span",{children:n}),o>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-blue-300",children:"\xb7"}),(0,l.jsx)(eo,{})]})]});return(0,l.jsx)(L.Z,{title:"".concat(i," LLM • ").concat(o," MCP"),children:d})}},{header:"Status",accessorKey:"metadata.status",cell:e=>{let t="failure"!==(e.getValue()||"Success").toLowerCase();return(0,l.jsx)("span",{className:"px-2 py-1 rounded-md text-xs font-medium inline-block text-center w-16 ".concat(t?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:t?"Success":"Failure"})}},{header:"Session ID",accessorKey:"session_id",cell:e=>{let t=String(e.getValue()||""),s=e.row.original.onSessionClick;return(0,l.jsx)(L.Z,{title:String(e.getValue()||""),children:(0,l.jsx)(es.Z,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal text-xs max-w-[15ch] truncate block",onClick:()=>null==s?void 0:s(t),children:String(e.getValue()||"")})})}},{header:"Request ID",accessorKey:"request_id",cell:e=>(0,l.jsx)(L.Z,{title:String(e.getValue()||""),children:(0,l.jsx)("span",{className:"font-mono text-xs max-w-[15ch] truncate block",children:String(e.getValue()||"")})})},{header:e?()=>(0,l.jsx)(em,{label:"Cost",field:"spend",sortBy:e.sortBy,sortOrder:e.sortOrder,onSortChange:e.onSortChange}):"Cost",accessorKey:"spend",cell:e=>{let t=e.row.original,s=t.mcp_tool_call_count||0,a=t.mcp_tool_call_spend||0;return(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)(L.Z,{title:"$".concat(String(e.getValue()||0)),children:(0,l.jsx)("span",{children:(0,c.GS)(e.getValue()||0)})}),s>0&&a>0&&(0,l.jsxs)("span",{className:"text-[10px] text-amber-600",children:["incl. ",(0,c.GS)(a)," from ",s," MCP"]})]})}},{header:"Duration (s)",accessorKey:"duration",cell:e=>(0,l.jsx)(L.Z,{title:String(e.getValue()||"-"),children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Team Name",accessorKey:"metadata.user_api_key_team_alias",cell:e=>(0,l.jsx)(L.Z,{title:String(e.getValue()||"-"),children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Key Hash",accessorKey:"metadata.user_api_key",cell:e=>{let t=String(e.getValue()||"-"),s=e.row.original.onKeyHashClick;return(0,l.jsx)(L.Z,{title:t,children:(0,l.jsx)("span",{className:"font-mono max-w-[15ch] truncate block cursor-pointer hover:text-blue-600",onClick:()=>null==s?void 0:s(t),children:t})})}},{header:"Key Name",accessorKey:"metadata.user_api_key_alias",cell:e=>(0,l.jsx)(L.Z,{title:String(e.getValue()||"-"),children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Model",accessorKey:"model",cell:e=>{let t=e.row.original,s=t.custom_llm_provider,a=String(e.getValue()||"");return(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[s&&(0,l.jsx)("img",{src:eu(t,s),alt:"",className:"w-4 h-4",onError:e=>{e.target.style.display="none"}}),(0,l.jsx)(L.Z,{title:a,children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:a})})]})}},{header:e?()=>(0,l.jsx)(em,{label:"Tokens",field:"total_tokens",sortBy:e.sortBy,sortOrder:e.sortOrder,onSortChange:e.onSortChange}):"Tokens",accessorKey:"total_tokens",cell:e=>{let t=e.row.original;return(0,l.jsxs)("span",{className:"text-sm",children:[String(t.total_tokens||"0"),(0,l.jsxs)("span",{className:"text-gray-400 text-xs ml-1",children:["(",String(t.prompt_tokens||"0"),"+",String(t.completion_tokens||"0"),")"]})]})}},{header:"Internal User",accessorKey:"user",cell:e=>(0,l.jsx)(L.Z,{title:String(e.getValue()||"-"),children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"End User",accessorKey:"end_user",cell:e=>(0,l.jsx)(L.Z,{title:String(e.getValue()||"-"),children:(0,l.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Tags",accessorKey:"request_tags",cell:e=>{let t=e.getValue();if(!t||0===Object.keys(t).length)return"-";let s=Object.entries(t),a=s[0],n=s.slice(1);return(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:(0,l.jsx)(L.Z,{title:(0,l.jsx)("div",{className:"flex flex-col gap-1",children:s.map(e=>{let[t,s]=e;return(0,l.jsxs)("span",{children:[t,": ",String(s)]},t)})}),children:(0,l.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:[a[0],": ",String(a[1]),n.length>0&&" +".concat(n.length)]})})})}}];ex();let eh=e=>(0,l.jsx)(E.Z,{color:"gray",className:"flex items-center gap-1",children:(0,l.jsx)("span",{className:"whitespace-nowrap text-xs",children:e})}),ep=[{id:"expander",header:()=>null,cell:e=>{let{row:t}=e;return(0,l.jsx)(()=>{let[e,s]=d.useState(t.getIsExpanded()),a=d.useCallback(()=>{s(e=>!e),t.getToggleExpandedHandler()()},[t]);return t.getCanExpand()?(0,l.jsx)("button",{onClick:a,style:{cursor:"pointer"},"aria-label":e?"Collapse row":"Expand row",className:"w-6 h-6 flex items-center justify-center focus:outline-none",children:(0,l.jsx)("svg",{className:"w-4 h-4 transform transition-transform ".concat(e?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):(0,l.jsx)("span",{className:"w-6 h-6 flex items-center justify-center",children:"●"})},{})}},{header:"Timestamp",accessorKey:"updated_at",cell:e=>(0,l.jsx)(en.s,{utcTime:e.getValue()})},{header:"Table Name",accessorKey:"table_name",cell:e=>{let t=e.getValue(),s=t;switch(t){case"LiteLLM_VerificationToken":s="Keys";break;case"LiteLLM_TeamTable":s="Teams";break;case"LiteLLM_OrganizationTable":s="Organizations";break;case"LiteLLM_UserTable":s="Users";break;case"LiteLLM_ProxyModelTable":s="Models";break;default:s=t}return(0,l.jsx)("span",{children:s})}},{header:"Action",accessorKey:"action",cell:e=>(0,l.jsx)("span",{children:eh(e.getValue())})},{header:"Changed By",accessorKey:"changed_by",cell:e=>{let t=e.row.original.changed_by,s=e.row.original.changed_by_api_key;return(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"font-medium",children:t}),s&&(0,l.jsx)(L.Z,{title:s,children:(0,l.jsxs)("div",{className:"text-xs text-muted-foreground max-w-[15ch] truncate",children:[" ",s]})})]})}},{header:"Affected Item ID",accessorKey:"object_id",cell:e=>(0,l.jsx)(()=>{let t=e.getValue(),[s,a]=(0,d.useState)(!1);if(!t)return(0,l.jsx)(l.Fragment,{children:"-"});let n=async()=>{try{await navigator.clipboard.writeText(String(t)),a(!0),setTimeout(()=>a(!1),1500)}catch(e){console.error("Failed to copy object ID: ",e)}};return(0,l.jsx)(L.Z,{title:s?"Copied!":String(t),children:(0,l.jsx)("span",{className:"max-w-[20ch] truncate block cursor-pointer hover:text-blue-600",onClick:n,children:String(t)})})},{})}];var eg=s(92280);let ef="".concat("../ui/assets/","audit-logs-preview.png");function ej(e){let{userID:t,userRole:s,token:a,accessToken:r,isActive:i,premiumUser:u,allTeams:m}=e,[x,h]=(0,d.useState)(o()().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),p=(0,d.useRef)(null),g=(0,d.useRef)(null),[f,j]=(0,d.useState)(1),[v]=(0,d.useState)(50),[y,b]=(0,d.useState)({}),[N,_]=(0,d.useState)(""),[w,k]=(0,d.useState)(""),[S,C]=(0,d.useState)(""),[L,M]=(0,d.useState)("all"),[D,T]=(0,d.useState)("all"),[E,z]=(0,d.useState)(!1),[A,Z]=(0,d.useState)(!1),I=(0,n.a)({queryKey:["all_audit_logs",r,a,s,t,x],queryFn:async()=>{if(!r||!a||!s||!t)return[];let e=o()(x).utc().format("YYYY-MM-DD HH:mm:ss"),l=o()().utc().format("YYYY-MM-DD HH:mm:ss"),n=[],i=1,d=1;do{let t=await (0,X.uiAuditLogsCall)(r,e,l,i,50);n=n.concat(t.audit_logs),d=t.total_pages,i++}while(i<=d);return n},enabled:!!r&&!!a&&!!s&&!!t&&i,refetchInterval:5e3,refetchIntervalInBackground:!0}),R=(0,d.useCallback)(async e=>{if(r)try{let t=(await (0,X.keyListCall)(r,null,null,e,null,null,1,10)).keys.find(t=>t.key_alias===e);t?k(t.token):k("")}catch(e){console.error("Error fetching key hash for alias:",e),k("")}},[r]);(0,d.useEffect)(()=>{if(!r)return;let e=!1,t=!1;y["Team ID"]?N!==y["Team ID"]&&(_(y["Team ID"]),e=!0):""!==N&&(_(""),e=!0),y["Key Hash"]?w!==y["Key Hash"]&&(k(y["Key Hash"]),t=!0):y["Key Alias"]?R(y["Key Alias"]):""!==w&&(k(""),t=!0),(e||t)&&j(1)},[y,r,R,N,w]),(0,d.useEffect)(()=>{j(1)},[N,w,x,S,L,D]),(0,d.useEffect)(()=>{function e(e){p.current&&!p.current.contains(e.target)&&z(!1),g.current&&!g.current.contains(e.target)&&Z(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let O=(0,d.useMemo)(()=>I.data?I.data.filter(e=>{var t,s,l,a,n,r,i;let o=!0,d=!0,c=!0,u=!0,m=!0;if(N){let n="string"==typeof e.before_value?null===(t=JSON.parse(e.before_value))||void 0===t?void 0:t.team_id:null===(s=e.before_value)||void 0===s?void 0:s.team_id,r="string"==typeof e.updated_values?null===(l=JSON.parse(e.updated_values))||void 0===l?void 0:l.team_id:null===(a=e.updated_values)||void 0===a?void 0:a.team_id;o=n===N||r===N}if(w)try{let t="string"==typeof e.before_value?JSON.parse(e.before_value):e.before_value,s="string"==typeof e.updated_values?JSON.parse(e.updated_values):e.updated_values,l=null==t?void 0:t.token,a=null==s?void 0:s.token;d="string"==typeof l&&l.includes(w)||"string"==typeof a&&a.includes(w)}catch(e){d=!1}if(S&&(c=null===(n=e.object_id)||void 0===n?void 0:n.toLowerCase().includes(S.toLowerCase())),"all"!==L&&(u=(null===(r=e.action)||void 0===r?void 0:r.toLowerCase())===L.toLowerCase()),"all"!==D){let t="";switch(D){case"keys":t="litellm_verificationtoken";break;case"teams":t="litellm_teamtable";break;case"users":t="litellm_usertable";break;default:t=D}m=(null===(i=e.table_name)||void 0===i?void 0:i.toLowerCase())===t}return o&&d&&c&&u&&m}):[],[I.data,N,w,S,L,D]),P=O.length,F=Math.ceil(P/v)||1,B=(0,d.useMemo)(()=>{let e=(f-1)*v,t=e+v;return O.slice(e,t)},[O,f,v]),q=!I.data||0===I.data.length,H=(0,d.useCallback)(e=>{let{row:t}=e;return(0,l.jsx)(e=>{let{rowData:t}=e,{before_value:s,updated_values:a,table_name:n,action:r}=t,i=(e,t)=>{if(!e||0===Object.keys(e).length)return(0,l.jsx)(eg.x,{children:"N/A"});if(t){let t=Object.keys(e),s=["token","spend","max_budget"];if(t.every(e=>s.includes(e))&&t.length>0)return(0,l.jsxs)("div",{children:[t.includes("token")&&(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Token:"})," ",e.token||"N/A"]}),t.includes("spend")&&(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Spend:"})," ",void 0!==e.spend?"$".concat((0,c.pw)(e.spend,6)):"N/A"]}),t.includes("max_budget")&&(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Max Budget:"})," ",void 0!==e.max_budget?"$".concat((0,c.pw)(e.max_budget,6)):"N/A"]})]});if(e["No differing fields detected in 'before' state"]||e["No differing fields detected in 'updated' state"]||e["No fields changed"])return(0,l.jsx)(eg.x,{children:e[Object.keys(e)[0]]})}return(0,l.jsx)("pre",{className:"p-2 bg-gray-50 border rounded text-xs overflow-auto max-h-60",children:JSON.stringify(e,null,2)})},o=s,d=a;if(("updated"===r||"rotated"===r)&&s&&a&&("LiteLLM_TeamTable"===n||"LiteLLM_UserTable"===n||"LiteLLM_VerificationToken"===n)){let e={},t={};new Set([...Object.keys(s),...Object.keys(a)]).forEach(l=>{JSON.stringify(s[l])!==JSON.stringify(a[l])&&(s.hasOwnProperty(l)&&(e[l]=s[l]),a.hasOwnProperty(l)&&(t[l]=a[l]))}),Object.keys(s).forEach(l=>{a.hasOwnProperty(l)||e.hasOwnProperty(l)||(e[l]=s[l],t[l]=void 0)}),Object.keys(a).forEach(l=>{s.hasOwnProperty(l)||t.hasOwnProperty(l)||(t[l]=a[l],e[l]=void 0)}),o=Object.keys(e).length>0?e:{"No differing fields detected in 'before' state":"N/A"},d=Object.keys(t).length>0?t:{"No differing fields detected in 'updated' state":"N/A"},0===Object.keys(e).length&&0===Object.keys(t).length&&(o={"No fields changed":"N/A"},d={"No fields changed":"N/A"})}return(0,l.jsxs)("div",{className:"-mx-4 p-4 bg-slate-100 border-y border-slate-300 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold mb-2 text-sm text-slate-700",children:"Before Value:"}),i(o,"LiteLLM_VerificationToken"===n)]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold mb-2 text-sm text-slate-700",children:"Updated Value:"}),i(d,"LiteLLM_VerificationToken"===n)]})]})},{rowData:t.original})},[]);if(!u)return(0,l.jsxs)("div",{style:{textAlign:"center",marginTop:"20px"},children:[(0,l.jsx)("h1",{style:{display:"block",marginBottom:"10px"},children:"✨ Enterprise Feature."}),(0,l.jsx)(eg.x,{style:{display:"block",marginBottom:"10px"},children:"This is a LiteLLM Enterprise feature, and requires a valid key to use."}),(0,l.jsx)(eg.x,{style:{display:"block",marginBottom:"20px",fontStyle:"italic"},children:"Here's a preview of what Audit Logs offer:"}),(0,l.jsx)("img",{src:ef,alt:"Audit Logs Preview",style:{maxWidth:"100%",maxHeight:"700px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",margin:"0 auto"},onError:e=>{console.error("Failed to load audit logs preview image"),e.target.style.display="none"}})]});let K=P>0?(f-1)*v+1:0,Y=Math.min(f*v,P);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-4"}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,l.jsxs)("div",{className:"border-b px-6 py-4",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold py-4",children:"Audit Logs"}),(0,l.jsx)(e=>{let{show:t}=e;return t?(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start mb-6",children:[(0,l.jsx)("div",{className:"text-blue-500 mr-3 flex-shrink-0 mt-0.5",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,l.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,l.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"Audit Logs Not Available"}),(0,l.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"To enable audit logging, add the following configuration to your LiteLLM proxy configuration file:"}),(0,l.jsx)("pre",{className:"mt-2 bg-white p-3 rounded border border-blue-200 text-xs font-mono overflow-auto",children:"litellm_settings:\n  store_audit_logs: true"}),(0,l.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:"Note: This will only affect new requests after the configuration change and proxy restart."})]})]}):null},{show:q}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0",children:[(0,l.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)("input",{type:"text",placeholder:"Search by Object ID...",value:S,onChange:e=>C(e.target.value),className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),(0,l.jsxs)("button",{onClick:()=>{I.refetch()},className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",title:"Refresh data",children:[(0,l.jsx)("svg",{className:"w-4 h-4 ".concat(I.isFetching?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,l.jsx)("span",{children:"Refresh"})]})]})}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("div",{className:"relative",ref:p,children:[(0,l.jsx)("label",{htmlFor:"actionFilterDisplay",className:"mr-2 text-sm font-medium text-gray-700 sr-only",children:"Action:"}),(0,l.jsxs)("button",{id:"actionFilterDisplay",onClick:()=>z(!E),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 bg-white w-40 text-left justify-between",children:[(0,l.jsxs)("span",{children:["all"===L&&"All Actions","created"===L&&"Created","updated"===L&&"Updated","deleted"===L&&"Deleted","rotated"===L&&"Rotated"]}),(0,l.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),E&&(0,l.jsx)("div",{className:"absolute left-0 mt-2 w-40 bg-white rounded-lg shadow-lg border p-1 z-50",children:(0,l.jsx)("div",{className:"space-y-1",children:[{label:"All Actions",value:"all"},{label:"Created",value:"created"},{label:"Updated",value:"updated"},{label:"Deleted",value:"deleted"},{label:"Rotated",value:"rotated"}].map(e=>(0,l.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ".concat(L===e.value?"bg-blue-50 text-blue-600 font-medium":"font-normal"),onClick:()=>{M(e.value),z(!1)},children:e.label},e.value))})})]}),(0,l.jsxs)("div",{className:"relative",ref:g,children:[(0,l.jsx)("label",{htmlFor:"tableFilterDisplay",className:"mr-2 text-sm font-medium text-gray-700 sr-only",children:"Table:"}),(0,l.jsxs)("button",{id:"tableFilterDisplay",onClick:()=>Z(!A),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 bg-white w-40 text-left justify-between",children:[(0,l.jsxs)("span",{children:["all"===D&&"All Tables","keys"===D&&"Keys","teams"===D&&"Teams","users"===D&&"Users"]}),(0,l.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),A&&(0,l.jsx)("div",{className:"absolute left-0 mt-2 w-40 bg-white rounded-lg shadow-lg border p-1 z-50",children:(0,l.jsx)("div",{className:"space-y-1",children:[{label:"All Tables",value:"all"},{label:"Keys",value:"keys"},{label:"Teams",value:"teams"},{label:"Users",value:"users"}].map(e=>(0,l.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ".concat(D===e.value?"bg-blue-50 text-blue-600 font-medium":"font-normal"),onClick:()=>{T(e.value),Z(!1)},children:e.label},e.value))})})]}),(0,l.jsxs)("span",{className:"text-sm text-gray-700",children:["Showing ",I.isLoading?"...":K," -"," ",I.isLoading?"...":Y," of"," ",I.isLoading?"...":P," results"]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",I.isLoading?"...":f," of"," ",I.isLoading?"...":F]}),(0,l.jsx)("button",{onClick:()=>j(e=>Math.max(1,e-1)),disabled:I.isLoading||1===f,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,l.jsx)("button",{onClick:()=>j(e=>Math.min(F,e+1)),disabled:I.isLoading||f===F,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),(0,l.jsx)(et.w,{columns:ep,data:B,renderSubComponent:H,getRowCanExpand:()=>!0})]})]})}s(15273),s(84933);var ev=s(7310),ey=s.n(ev),eb=s(12363);let eN={TEAM_ID:"Team ID",KEY_HASH:"Key Hash",REQUEST_ID:"Request ID",MODEL:"Model",USER_ID:"User ID",END_USER:"End User",STATUS:"Status",KEY_ALIAS:"Key Alias",ERROR_CODE:"Error Code",ERROR_MESSAGE:"Error Message"};var e_=s(33877);let ew=(e,t,s)=>{if(e)return"".concat(o()(t).format("MMM D, h:mm A")," - ").concat(o()(s).format("MMM D, h:mm A"));let l=o()(),a=o()(t),n=l.diff(a,"minutes");if(n>=0&&n<2)return"Last 1 Minute";if(n>=2&&n<16)return"Last 15 Minutes";if(n>=16&&n<61)return"Last Hour";let r=l.diff(a,"hours");return r>=1&&r<5?"Last 4 Hours":r>=5&&r<25?"Last 24 Hours":r>=25&&r<169?"Last 7 Days":"".concat(a.format("MMM D")," - ").concat(l.format("MMM D"))};var ek=s(9114);s(86669),s(52621);var eS=s(11776),eC=s(21770),eL=s(39760);let eM=async(e,t)=>{let s=(0,X.getProxyBaseUrl)(),l=await fetch(s?"".concat(s,"/config/update"):"/config/update",{method:"POST",headers:{[(0,X.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({general_settings:{store_prompts_in_spend_logs:t.store_prompts_in_spend_logs,...t.maximum_spend_logs_retention_period&&{maximum_spend_logs_retention_period:t.maximum_spend_logs_retention_period}}})});if(!l.ok){var a;let e=await l.json().catch(()=>({}));throw Error((null==e?void 0:null===(a=e.error)||void 0===a?void 0:a.message)||(null==e?void 0:e.message)||(null==e?void 0:e.detail)||"Failed to update spend logs settings")}return await l.json()},eD=()=>{let{accessToken:e}=(0,eL.Z)();return(0,eC.D)({mutationFn:async t=>{if(!e)throw Error("Access token is required");return await eM(e,t)}})};var eT=s(85968),eE=s(5540),ez=s(10032),eA=s(22116),eZ=s(50337),eI=s(63709),eR=s(4260),eO=e=>{var t,s;let{isVisible:a,onCancel:n,onSuccess:r}=e,[i]=ez.Z.useForm(),{mutateAsync:o,isPending:c}=eD(),{mutateAsync:u,isPending:m}=(0,eS.SX)(),{data:x,isLoading:h,refetch:p}=(0,eS.nt)(eS.rO.GENERAL_SETTINGS),g=ez.Z.useWatch("store_prompts_in_spend_logs",i);(0,d.useEffect)(()=>{a&&p()},[a,p]);let f=(0,d.useMemo)(()=>{var e,t;if(!x)return{store_prompts_in_spend_logs:!1,maximum_spend_logs_retention_period:void 0};let s=x.find(e=>"store_prompts_in_spend_logs"===e.field_name),l=x.find(e=>"maximum_spend_logs_retention_period"===e.field_name);return{store_prompts_in_spend_logs:null!==(e=null==s?void 0:s.field_value)&&void 0!==e&&e,maximum_spend_logs_retention_period:null!==(t=null==l?void 0:l.field_value)&&void 0!==t?t:void 0}},[x]),j=async e=>{try{let t=e.maximum_spend_logs_retention_period;if(!t||"string"==typeof t&&""===t.trim())try{await u({config_type:eS.rO.GENERAL_SETTINGS,field_name:eS.lD.MAXIMUM_SPEND_LOGS_RETENTION_PERIOD})}catch(e){console.warn("Failed to delete retention period field (may not exist):",e)}let s={store_prompts_in_spend_logs:e.store_prompts_in_spend_logs,...t&&"string"==typeof t&&""!==t.trim()&&{maximum_spend_logs_retention_period:t}};await o(s,{onSuccess:()=>{ek.ZP.success("Spend logs settings updated successfully"),p(),null==r||r()},onError:e=>{ek.ZP.fromBackend("Failed to save spend logs settings: "+(0,eT.O)(e))}})}catch(e){ek.ZP.fromBackend("Failed to save spend logs settings: "+(0,eT.O)(e))}},y=()=>{i.resetFields(),n()};return(0,l.jsx)(eA.Z,{title:(0,l.jsx)(V.default.Title,{level:5,children:"Spend Logs Settings"}),open:a,footer:(0,l.jsxs)(W.Z,{children:[(0,l.jsx)(v.ZP,{onClick:y,disabled:c||m||h,children:"Cancel"}),(0,l.jsx)(v.ZP,{type:"primary",loading:c||m,disabled:h,onClick:()=>i.submit(),children:c||m?"Saving...":"Save Settings"})]}),onCancel:y,children:(0,l.jsxs)(ez.Z,{form:i,layout:"horizontal",onFinish:j,initialValues:f,children:[(0,l.jsx)(ez.Z.Item,{label:"Store Prompts in Spend Logs",name:"store_prompts_in_spend_logs",tooltip:(null==x?void 0:null===(t=x.find(e=>"store_prompts_in_spend_logs"===e.field_name))||void 0===t?void 0:t.field_description)||"When enabled, prompts will be stored in spend logs for tracking and analysis purposes.",valuePropName:"checked",children:(0,l.jsx)("div",{children:h?(0,l.jsx)(eZ.Z.Input,{active:!0,block:!0}):(0,l.jsx)(eI.Z,{checked:null!=g&&g,onChange:e=>i.setFieldValue("store_prompts_in_spend_logs",e)})})}),(0,l.jsx)(ez.Z.Item,{label:"Maximum Spend Logs Retention Period (Optional)",name:"maximum_spend_logs_retention_period",tooltip:(null==x?void 0:null===(s=x.find(e=>"maximum_spend_logs_retention_period"===e.field_name))||void 0===s?void 0:s.field_description)||"Set the maximum retention period for spend logs (e.g., '7d' for 7 days, '30d' for 30 days). Leave empty for no limit.",children:h?(0,l.jsx)(eZ.Z.Input,{active:!0,block:!0}):(0,l.jsx)(eR.default,{placeholder:"e.g., 7d, 30d",prefix:(0,l.jsx)(eE.Z,{})})})]},x?JSON.stringify(f):"loading")})};function eP(e){let{accessToken:t,token:s,userRole:i,userID:c,allTeams:b,premiumUser:N}=e,[_,w]=(0,d.useState)(""),[k,S]=(0,d.useState)(!1),[C,L]=(0,d.useState)(!1),[M,T]=(0,d.useState)(1),[E]=(0,d.useState)(50),z=(0,d.useRef)(null),A=(0,d.useRef)(null),Z=(0,d.useRef)(null),[I,R]=(0,d.useState)(o()().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),[O,P]=(0,d.useState)(o()().format("YYYY-MM-DDTHH:mm")),[F,B]=(0,d.useState)(!1),[K,Y]=(0,d.useState)(!1),[U,V]=(0,d.useState)(""),[W,J]=(0,d.useState)(""),[G,es]=(0,d.useState)(""),[el,ea]=(0,d.useState)(""),[en,ei]=(0,d.useState)(""),[eo,ed]=(0,d.useState)(null),[ec,eu]=(0,d.useState)(null),[em,eh]=(0,d.useState)(""),[ep,eg]=(0,d.useState)(""),[ef,ev]=(0,d.useState)(i&&y.lo.includes(i)),[ek,eS]=(0,d.useState)("request logs"),[eC,eL]=(0,d.useState)(null),[eM,eD]=(0,d.useState)(!1),[eT,eE]=(0,d.useState)(null),[ez,eA]=(0,d.useState)(!1),[eZ,eI]=(0,d.useState)("startTime"),[eR,eP]=(0,d.useState)("desc"),[eF,eB]=(0,d.useState)(!0);(0,a.NL)();let[eq,eH]=(0,d.useState)(()=>{let e=sessionStorage.getItem("isLiveTail");return null===e||JSON.parse(e)});(0,d.useEffect)(()=>{sessionStorage.setItem("isLiveTail",JSON.stringify(eq))},[eq]);let[eK,eY]=(0,d.useState)({value:24,unit:"hours"});(0,d.useEffect)(()=>{(async()=>{ec&&t&&ed({...(await (0,X.keyInfoV1Call)(t,ec)).info,token:ec,api_key:ec})})()},[ec,t]),(0,d.useEffect)(()=>{function e(e){z.current&&!z.current.contains(e.target)&&L(!1),A.current&&!A.current.contains(e.target)&&S(!1),Z.current&&!Z.current.contains(e.target)&&Y(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,d.useEffect)(()=>{i&&y.lo.includes(i)&&ev(!0)},[i]);let eU=(0,n.a)({queryKey:["logs","table",M,E,I,O,G,el,ef?c:null,em,en,eZ,eR],queryFn:async()=>{if(!t||!s||!i||!c)return{data:[],total:0,page:1,page_size:E,total_pages:0};let e=o()(I).utc().format("YYYY-MM-DD HH:mm:ss"),l=F?o()(O).utc().format("YYYY-MM-DD HH:mm:ss"):o()().utc().format("YYYY-MM-DD HH:mm:ss");return await (0,X.uiSpendLogsCall)({accessToken:t,start_date:e,end_date:l,page:M,page_size:E,params:{api_key:el||void 0,team_id:G||void 0,user_id:ef&&null!=c?c:void 0,end_user:ep||void 0,status_filter:em||void 0,model_id:en||void 0,sort_by:eZ,sort_order:eR}})},enabled:!!t&&!!s&&!!i&&!!c&&"request logs"===ek&&eF,refetchInterval:!!eq&&1===M&&15e3,placeholderData:r.Wk,refetchIntervalInBackground:!0}),eV=(0,d.useDeferredValue)(eU.isFetching),eW=eU.isFetching||eV,{filters:eJ,filteredLogs:eG,hasBackendFilters:e$,allTeams:eQ,allKeyAliases:eX,handleFilterChange:e0,handleFilterReset:e1}=function(e){let{logs:t,accessToken:s,startTime:l,endTime:a,pageSize:r=eb.d,isCustomDate:i,setCurrentPage:c,userID:u,userRole:m,sortBy:x="startTime",sortOrder:h="desc",currentPage:p=1}=e,g=(0,d.useMemo)(()=>({[eN.TEAM_ID]:"",[eN.KEY_HASH]:"",[eN.REQUEST_ID]:"",[eN.MODEL]:"",[eN.USER_ID]:"",[eN.END_USER]:"",[eN.STATUS]:"",[eN.KEY_ALIAS]:"",[eN.ERROR_CODE]:"",[eN.ERROR_MESSAGE]:""}),[]),[f,j]=(0,d.useState)(g),[v,y]=(0,d.useState)({data:[],total:0,page:1,page_size:50,total_pages:0}),b=(0,d.useRef)(0),N=(0,d.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!s)return;console.log("Filters being sent to API:",e);let n=Date.now();b.current=n;let d=o()(l).utc().format("YYYY-MM-DD HH:mm:ss"),c=i?o()(a).utc().format("YYYY-MM-DD HH:mm:ss"):o()().utc().format("YYYY-MM-DD HH:mm:ss");try{let l=await (0,X.uiSpendLogsCall)({accessToken:s,start_date:d,end_date:c,page:t,page_size:r,params:{api_key:e[eN.KEY_HASH]||void 0,team_id:e[eN.TEAM_ID]||void 0,request_id:e[eN.REQUEST_ID]||void 0,user_id:e[eN.USER_ID]||void 0,end_user:e[eN.END_USER]||void 0,status_filter:e[eN.STATUS]||void 0,model_id:e[eN.MODEL]||void 0,key_alias:e[eN.KEY_ALIAS]||void 0,error_code:e[eN.ERROR_CODE]||void 0,error_message:e[eN.ERROR_MESSAGE]||void 0,sort_by:x,sort_order:h}});n===b.current&&l.data&&y(l)}catch(e){console.error("Error searching users:",e)}},[s,l,a,i,r,x,h]),_=(0,d.useMemo)(()=>ey()((e,t)=>N(e,t),300),[N]);(0,d.useEffect)(()=>()=>_.cancel(),[_]);let w=(0,n.a)({queryKey:["allKeys"],queryFn:async()=>{if(!s)throw Error("Access token required");return await (0,H.LO)(s)},enabled:!!s}).data||[],k=(0,d.useMemo)(()=>!!(f[eN.KEY_ALIAS]||f[eN.KEY_HASH]||f[eN.REQUEST_ID]||f[eN.USER_ID]||f[eN.END_USER]||f[eN.ERROR_CODE]||f[eN.ERROR_MESSAGE]||f[eN.MODEL]),[f]);(0,d.useEffect)(()=>{k&&s&&(_.cancel(),N(f,p))},[x,h,p,l,a,i]);let S=(0,d.useMemo)(()=>{if(!t||!t.data)return{data:[],total:0,page:1,page_size:50,total_pages:0};if(k)return t;let e=[...t.data];return f[eN.TEAM_ID]&&(e=e.filter(e=>e.team_id===f[eN.TEAM_ID])),f[eN.STATUS]&&(e=e.filter(e=>"success"===f[eN.STATUS]?!e.status||"success"===e.status:e.status===f[eN.STATUS])),f[eN.MODEL]&&(e=e.filter(e=>e.model_id===f[eN.MODEL])),f[eN.KEY_HASH]&&(e=e.filter(e=>e.api_key===f[eN.KEY_HASH])),f[eN.END_USER]&&(e=e.filter(e=>e.end_user===f[eN.END_USER])),f[eN.ERROR_CODE]&&(e=e.filter(e=>{let t=(e.metadata||{}).error_information;return t&&t.error_code===f[eN.ERROR_CODE]})),{data:e,total:t.total,page:t.page,page_size:t.page_size,total_pages:t.total_pages}},[t,f,k]),C=(0,d.useMemo)(()=>k?v&&v.data&&v.data.length>0?v:t||{data:[],total:0,page:1,page_size:50,total_pages:0}:S,[k,v,S,t]),{data:L}=(0,n.a)({queryKey:["allTeamsForLogFilters",s],queryFn:async()=>s&&await (0,H.IE)(s)||[],enabled:!!s});return{filters:f,filteredLogs:C,hasBackendFilters:k,allKeyAliases:w,allTeams:L,handleFilterChange:e=>{j(t=>{let s={...t,...e};for(let e of Object.keys(g))e in s||(s[e]=g[e]);return JSON.stringify(s)!==JSON.stringify(t)&&(c(1),_(s,1)),s})},handleFilterReset:()=>{j(g),y({data:[],total:0,page:1,page_size:50,total_pages:0}),_(g,1)}}}({logs:eU.data||{data:[],total:0,page:1,page_size:E||10,total_pages:1},accessToken:t,startTime:I,endTime:O,pageSize:E,isCustomDate:F,setCurrentPage:T,userID:c,userRole:i,sortBy:eZ,sortOrder:eR,currentPage:M}),e2=(0,d.useCallback)(()=>{e1(),R(o()().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),P(o()().format("YYYY-MM-DDTHH:mm")),B(!1),eY({value:24,unit:"hours"}),T(1)},[e1]);if((0,d.useEffect)(()=>{eB(!e$)},[e$]),(0,d.useEffect)(()=>{t&&(eJ["Team ID"]?es(eJ["Team ID"]):es(""),eh(eJ.Status||""),ei(eJ.Model||""),eg(eJ["End User"]||""),ea(eJ["Key Hash"]||""))},[eJ,t]),!t||!s||!i||!c)return null;let e5=eG.data.filter(e=>!_||e.request_id.includes(_)||e.model.includes(_)||e.user&&e.user.includes(_)),e4=e5.reduce((e,t)=>(t.session_id&&(e[t.session_id]||(e[t.session_id]={llm:0,mcp:0}),er.vt.includes(t.call_type)?e[t.session_id].mcp+=1:e[t.session_id].llm+=1),e),{}),e3=new Map;for(let e of e5){if(!e.session_id||1>=(e.session_total_count||1))continue;let t=er.vt.includes(e.call_type),s=e3.get(e.session_id);s&&(!s.isMcp||t)||e3.set(e.session_id,{requestId:e.request_id,isMcp:t})}let e6=e5.map(e=>{var t,s;let l=e.session_id?e4[e.session_id]:void 0;return{...e,duration:(Date.parse(e.endTime)-Date.parse(e.startTime))/1e3,session_llm_count:null!==(t=null==l?void 0:l.llm)&&void 0!==t?t:void 0,session_mcp_count:null!==(s=null==l?void 0:l.mcp)&&void 0!==s?s:void 0,onKeyHashClick:e=>eu(e),onSessionClick:t=>{t&&(eE(t),eL(e),eD(!0))}}}).filter(e=>{var t;return!e.session_id||1>=(e.session_total_count||1)||(null===(t=e3.get(e.session_id))||void 0===t?void 0:t.requestId)===e.request_id})||[],e8=[{name:"Team ID",label:"Team ID",isSearchable:!0,searchFn:async e=>b&&0!==b.length?b.filter(t=>t.team_id.toLowerCase().includes(e.toLowerCase())||t.team_alias&&t.team_alias.toLowerCase().includes(e.toLowerCase())).map(e=>({label:"".concat(e.team_alias||e.team_id," (").concat(e.team_id,")"),value:e.team_id})):[]},{name:"Status",label:"Status",isSearchable:!1,options:[{label:"Success",value:"success"},{label:"Failure",value:"failure"}]},{name:"Model",label:"Model",customComponent:$},{name:"Key Alias",label:"Key Alias",isSearchable:!0,searchFn:async e=>t?(await (0,H.LO)(t)).filter(t=>t.toLowerCase().includes(e.toLowerCase())).map(e=>({label:e,value:e})):[]},{name:"End User",label:"End User",isSearchable:!0,searchFn:async e=>{if(!t)return[];let s=await (0,X.allEndUsersCall)(t);return((null==s?void 0:s.map(e=>e.user_id))||[]).filter(t=>t.toLowerCase().includes(e.toLowerCase())).map(e=>({label:e,value:e}))}},{name:"Error Code",label:"Error Code",isSearchable:!0,searchFn:async e=>{if(!e)return er.$A;let t=e.toLowerCase(),s=er.$A.filter(e=>e.label.toLowerCase().includes(t));return!er.$A.some(t=>t.value===e.trim())&&e.trim()&&s.push({label:"Use custom code: ".concat(e.trim()),value:e.trim()}),s}},{name:"Key Hash",label:"Key Hash",isSearchable:!1},{name:"Error Message",label:"Error Message",isSearchable:!1}],e7=er.kF.find(e=>e.value===eK.value&&e.unit===eK.unit),e9=F?ew(F,I,O):null==e7?void 0:e7.label;return(0,l.jsxs)("div",{className:"w-full max-w-screen p-6 overflow-x-hidden box-border",children:[(0,l.jsxs)(p.Z,{defaultIndex:0,onIndexChange:e=>eS(0===e?"request logs":"audit logs"),children:[(0,l.jsxs)(g.Z,{children:[(0,l.jsx)(h.Z,{children:"Request Logs"}),(0,l.jsx)(h.Z,{children:"Audit Logs"}),(0,l.jsx)(h.Z,{children:"Deleted Keys"}),(0,l.jsx)(h.Z,{children:"Deleted Teams"})]}),(0,l.jsxs)(j.Z,{children:[(0,l.jsxs)(f.Z,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold",children:"Request Logs"}),(0,l.jsx)(v.ZP,{icon:(0,l.jsx)(u.Z,{}),onClick:()=>eA(!0),title:"Spend Logs Settings"})]}),eo&&ec&&eo.api_key===ec?(0,l.jsx)(ee.Z,{keyId:ec,keyData:eo,teams:b,onClose:()=>eu(null),backButtonText:"Back to Logs"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Q.Z,{options:e8,onApplyFilters:e0,onResetFilters:e2}),(0,l.jsx)(eO,{isVisible:ez,onCancel:()=>eA(!1),onSuccess:()=>eA(!1)}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full box-border",children:[(0,l.jsx)("div",{className:"border-b px-6 py-4 w-full max-w-full box-border",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0 w-full max-w-full box-border",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3 w-full max-w-full box-border",children:[(0,l.jsxs)("div",{className:"relative w-64 min-w-0 flex-shrink-0",children:[(0,l.jsx)("input",{type:"text",placeholder:"Search by Request ID",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:_,onChange:e=>w(e.target.value)}),(0,l.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-shrink",children:[(0,l.jsxs)("div",{className:"relative z-50",ref:Z,children:[(0,l.jsxs)("button",{onClick:()=>Y(!K),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e9]}),K&&(0,l.jsx)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border p-2 z-50",children:(0,l.jsxs)("div",{className:"space-y-1",children:[er.kF.map(e=>(0,l.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ".concat(e9===e.label?"bg-blue-50 text-blue-600":""),onClick:()=>{T(1),P(o()().format("YYYY-MM-DDTHH:mm")),R(o()().subtract(e.value,e.unit).format("YYYY-MM-DDTHH:mm")),eY({value:e.value,unit:e.unit}),B(!1),Y(!1)},children:e.label},e.label)),(0,l.jsx)("div",{className:"border-t my-2"}),(0,l.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ".concat(F?"bg-blue-50 text-blue-600":""),onClick:()=>B(!F),children:"Custom Range"})]})})]}),(0,l.jsx)(()=>(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Live Tail"}),(0,l.jsx)(x.Z,{color:"green",checked:eq,defaultChecked:!0,onChange:eH})]}),{}),(0,l.jsx)(v.ZP,{type:"default",icon:(0,l.jsx)(m.Z,{spin:eW}),onClick:()=>{eU.refetch()},disabled:eW,title:"Fetch data",children:eW?"Fetching":"Fetch"})]}),F&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"datetime-local",value:I,onChange:e=>{R(e.target.value),T(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),(0,l.jsx)("span",{className:"text-gray-500",children:"to"}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{type:"datetime-local",value:O,onChange:e=>{P(e.target.value),T(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-700 whitespace-nowrap",children:["Showing ",eU.isLoading?"...":eG?(M-1)*E+1:0," -"," ",eU.isLoading?"...":eG?Math.min(M*E,eG.total):0," ","of ",eU.isLoading?"...":eG?eG.total:0," results"]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)("span",{className:"text-sm text-gray-700 min-w-[90px]",children:["Page ",eU.isLoading?"...":M," of"," ",eU.isLoading?"...":eG?eG.total_pages:1]}),(0,l.jsx)("button",{onClick:()=>T(e=>Math.max(1,e-1)),disabled:eU.isLoading||1===M,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,l.jsx)("button",{onClick:()=>T(e=>Math.min(eG.total_pages||1,e+1)),disabled:eU.isLoading||M===(eG.total_pages||1),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}),eq&&1===M&&eF&&(0,l.jsxs)("div",{className:"mb-4 px-4 py-2 bg-green-50 border border-greem-200 rounded-md flex items-center justify-between",children:[(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsx)("span",{className:"text-sm text-green-700",children:"Auto-refreshing every 15 seconds"})}),(0,l.jsx)("button",{onClick:()=>eH(!1),className:"text-sm text-green-600 hover:text-green-800",children:"Stop"})]}),(0,l.jsx)(et.w,{columns:ex({sortBy:eZ,sortOrder:eR,onSortChange:(e,t)=>{eI(e),eP(t),T(1)}}),data:e6,onRowClick:e=>{if(e.session_id&&(e.session_total_count||1)>1){eE(e.session_id),eL(e),eD(!0);return}eE(null),eL(e),eD(!0)},isLoading:eU.isLoading})]})]})]}),(0,l.jsx)(f.Z,{children:(0,l.jsx)(ej,{userID:c,userRole:i,token:s,accessToken:t,isActive:"audit logs"===ek,premiumUser:N,allTeams:b})}),(0,l.jsx)(f.Z,{children:(0,l.jsx)(D,{})}),(0,l.jsx)(f.Z,{children:(0,l.jsx)(q,{})})]})]}),(0,l.jsx)(e_.Z,{open:eM,onClose:()=>{eD(!1),eE(null)},logEntry:eC,sessionId:eT,accessToken:t,onOpenSettings:()=>eA(!0),allLogs:e6,onSelectLog:e=>{eL(e)},startTime:o()(I).utc().format("YYYY-MM-DD HH:mm:ss")})]})}s(35618)},13648:function(e,t,s){s.d(t,{s:function(){return n}});var l=s(57437);s(2265);let a=e=>{try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).replace(",","")}catch(e){return"Error converting time"}},n=e=>{let{utcTime:t}=e;return(0,l.jsx)("span",{style:{fontFamily:"monospace",width:"180px",display:"inline-block"},children:a(t)})}}}]);