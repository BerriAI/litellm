(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,608856,e=>{"use strict";e.i(247167);var t=e.i(271645),a=e.i(343794),r=e.i(209428),n=e.i(392221),l=e.i(951160),s=e.i(174428),o=t.createContext(null),i=t.createContext({}),c=e.i(211577),d=e.i(931067),m=e.i(361275),p=e.i(404948),u=e.i(244009),x=e.i(703923),h=e.i(611935),g=["prefixCls","className","containerRef"];let f=function(e){var r=e.prefixCls,n=e.className,l=e.containerRef,s=(0,x.default)(e,g),o=t.useContext(i).panel,c=(0,h.useComposeRef)(o,l);return t.createElement("div",(0,d.default)({className:(0,a.default)("".concat(r,"-content"),n),role:"dialog",ref:c},(0,u.default)(e,{aria:!0}),{"aria-modal":"true"},s))};var v=e.i(883110);function y(e){return"string"==typeof e&&String(Number(e))===e?((0,v.default)(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}e.i(654310);var b={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"},j=t.forwardRef(function(e,l){var s,i,x,h=e.prefixCls,g=e.open,v=e.placement,j=e.inline,N=e.push,w=e.forceRender,$=e.autoFocus,C=e.keyboard,k=e.classNames,S=e.rootClassName,T=e.rootStyle,_=e.zIndex,O=e.className,E=e.id,P=e.style,I=e.motion,B=e.width,D=e.height,M=e.children,z=e.mask,L=e.maskClosable,R=e.maskMotion,A=e.maskClassName,F=e.maskStyle,H=e.afterOpenChange,U=e.onClose,W=e.onMouseEnter,J=e.onMouseOver,V=e.onMouseLeave,K=e.onClick,q=e.onKeyDown,X=e.onKeyUp,G=e.styles,Y=e.drawerRender,Z=t.useRef(),Q=t.useRef(),ee=t.useRef();t.useImperativeHandle(l,function(){return Z.current}),t.useEffect(function(){if(g&&$){var e;null==(e=Z.current)||e.focus({preventScroll:!0})}},[g]);var et=t.useState(!1),ea=(0,n.default)(et,2),er=ea[0],en=ea[1],el=t.useContext(o),es=null!=(s=null!=(i=null==(x="boolean"==typeof N?N?{}:{distance:0}:N||{})?void 0:x.distance)?i:null==el?void 0:el.pushDistance)?s:180,eo=t.useMemo(function(){return{pushDistance:es,push:function(){en(!0)},pull:function(){en(!1)}}},[es]);t.useEffect(function(){var e,t;g?null==el||null==(e=el.push)||e.call(el):null==el||null==(t=el.pull)||t.call(el)},[g]),t.useEffect(function(){return function(){var e;null==el||null==(e=el.pull)||e.call(el)}},[]);var ei=t.createElement(m.default,(0,d.default)({key:"mask"},R,{visible:z&&g}),function(e,n){var l=e.className,s=e.style;return t.createElement("div",{className:(0,a.default)("".concat(h,"-mask"),l,null==k?void 0:k.mask,A),style:(0,r.default)((0,r.default)((0,r.default)({},s),F),null==G?void 0:G.mask),onClick:L&&g?U:void 0,ref:n})}),ec="function"==typeof I?I(v):I,ed={};if(er&&es)switch(v){case"top":ed.transform="translateY(".concat(es,"px)");break;case"bottom":ed.transform="translateY(".concat(-es,"px)");break;case"left":ed.transform="translateX(".concat(es,"px)");break;default:ed.transform="translateX(".concat(-es,"px)")}"left"===v||"right"===v?ed.width=y(B):ed.height=y(D);var em={onMouseEnter:W,onMouseOver:J,onMouseLeave:V,onClick:K,onKeyDown:q,onKeyUp:X},ep=t.createElement(m.default,(0,d.default)({key:"panel"},ec,{visible:g,forceRender:w,onVisibleChanged:function(e){null==H||H(e)},removeOnLeave:!1,leavedClassName:"".concat(h,"-content-wrapper-hidden")}),function(n,l){var s=n.className,o=n.style,i=t.createElement(f,(0,d.default)({id:E,containerRef:l,prefixCls:h,className:(0,a.default)(O,null==k?void 0:k.content),style:(0,r.default)((0,r.default)({},P),null==G?void 0:G.content)},(0,u.default)(e,{aria:!0}),em),M);return t.createElement("div",(0,d.default)({className:(0,a.default)("".concat(h,"-content-wrapper"),null==k?void 0:k.wrapper,s),style:(0,r.default)((0,r.default)((0,r.default)({},ed),o),null==G?void 0:G.wrapper)},(0,u.default)(e,{data:!0})),Y?Y(i):i)}),eu=(0,r.default)({},T);return _&&(eu.zIndex=_),t.createElement(o.Provider,{value:eo},t.createElement("div",{className:(0,a.default)(h,"".concat(h,"-").concat(v),S,(0,c.default)((0,c.default)({},"".concat(h,"-open"),g),"".concat(h,"-inline"),j)),style:eu,tabIndex:-1,ref:Z,onKeyDown:function(e){var t,a,r=e.keyCode,n=e.shiftKey;switch(r){case p.default.TAB:r===p.default.TAB&&(n||document.activeElement!==ee.current?n&&document.activeElement===Q.current&&(null==(a=ee.current)||a.focus({preventScroll:!0})):null==(t=Q.current)||t.focus({preventScroll:!0}));break;case p.default.ESC:U&&C&&(e.stopPropagation(),U(e))}}},ei,t.createElement("div",{tabIndex:0,ref:Q,style:b,"aria-hidden":"true","data-sentinel":"start"}),ep,t.createElement("div",{tabIndex:0,ref:ee,style:b,"aria-hidden":"true","data-sentinel":"end"})))});let N=function(e){var a=e.open,o=e.prefixCls,c=e.placement,d=e.autoFocus,m=e.keyboard,p=e.width,u=e.mask,x=void 0===u||u,h=e.maskClosable,g=e.getContainer,f=e.forceRender,v=e.afterOpenChange,y=e.destroyOnClose,b=e.onMouseEnter,N=e.onMouseOver,w=e.onMouseLeave,$=e.onClick,C=e.onKeyDown,k=e.onKeyUp,S=e.panelRef,T=t.useState(!1),_=(0,n.default)(T,2),O=_[0],E=_[1],P=t.useState(!1),I=(0,n.default)(P,2),B=I[0],D=I[1];(0,s.default)(function(){D(!0)},[]);var M=!!B&&void 0!==a&&a,z=t.useRef(),L=t.useRef();(0,s.default)(function(){M&&(L.current=document.activeElement)},[M]);var R=t.useMemo(function(){return{panel:S}},[S]);if(!f&&!O&&!M&&y)return null;var A=(0,r.default)((0,r.default)({},e),{},{open:M,prefixCls:void 0===o?"rc-drawer":o,placement:void 0===c?"right":c,autoFocus:void 0===d||d,keyboard:void 0===m||m,width:void 0===p?378:p,mask:x,maskClosable:void 0===h||h,inline:!1===g,afterOpenChange:function(e){var t,a;E(e),null==v||v(e),e||!L.current||null!=(t=z.current)&&t.contains(L.current)||null==(a=L.current)||a.focus({preventScroll:!0})},ref:z},{onMouseEnter:b,onMouseOver:N,onMouseLeave:w,onClick:$,onKeyDown:C,onKeyUp:k});return t.createElement(i.Provider,{value:R},t.createElement(l.default,{open:M||f||O,autoDestroy:!1,getContainer:g,autoLock:x&&(M||O)},t.createElement(j,A)))};var w=e.i(981444),$=e.i(617206),C=e.i(122767),k=e.i(613541),S=e.i(340010),T=e.i(242064),_=e.i(922611),O=e.i(563113),E=e.i(185793);let P=e=>{var r,n,l,s;let o,{prefixCls:i,ariaId:c,title:d,footer:m,extra:p,closable:u,loading:x,onClose:h,headerStyle:g,bodyStyle:f,footerStyle:v,children:y,classNames:b,styles:j}=e,N=(0,T.useComponentConfig)("drawer");o=!1===u?void 0:void 0===u||!0===u?"start":(null==u?void 0:u.placement)==="end"?"end":"start";let w=t.useCallback(e=>t.createElement("button",{type:"button",onClick:h,className:(0,a.default)(`${i}-close`,{[`${i}-close-${o}`]:"end"===o})},e),[h,i,o]),[$,C]=(0,O.useClosable)((0,O.pickClosable)(e),(0,O.pickClosable)(N),{closable:!0,closeIconRender:w});return t.createElement(t.Fragment,null,d||$?t.createElement("div",{style:Object.assign(Object.assign(Object.assign({},null==(l=N.styles)?void 0:l.header),g),null==j?void 0:j.header),className:(0,a.default)(`${i}-header`,{[`${i}-header-close-only`]:$&&!d&&!p},null==(s=N.classNames)?void 0:s.header,null==b?void 0:b.header)},t.createElement("div",{className:`${i}-header-title`},"start"===o&&C,d&&t.createElement("div",{className:`${i}-title`,id:c},d)),p&&t.createElement("div",{className:`${i}-extra`},p),"end"===o&&C):null,t.createElement("div",{className:(0,a.default)(`${i}-body`,null==b?void 0:b.body,null==(r=N.classNames)?void 0:r.body),style:Object.assign(Object.assign(Object.assign({},null==(n=N.styles)?void 0:n.body),f),null==j?void 0:j.body)},x?t.createElement(E.default,{active:!0,title:!1,paragraph:{rows:5},className:`${i}-body-skeleton`}):y),(()=>{var e,r;if(!m)return null;let n=`${i}-footer`;return t.createElement("div",{className:(0,a.default)(n,null==(e=N.classNames)?void 0:e.footer,null==b?void 0:b.footer),style:Object.assign(Object.assign(Object.assign({},null==(r=N.styles)?void 0:r.footer),v),null==j?void 0:j.footer)},m)})())};e.i(296059);var I=e.i(915654),B=e.i(183293),D=e.i(246422),M=e.i(838378);let z=(e,t)=>({"&-enter, &-appear":Object.assign(Object.assign({},e),{"&-active":t}),"&-leave":Object.assign(Object.assign({},t),{"&-active":e})}),L=(e,t)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${t}`}}},z({opacity:e},{opacity:1})),R=(0,D.genStyleHooks)("Drawer",e=>{let t=(0,M.mergeToken)(e,{});return[(e=>{let{borderRadiusSM:t,componentCls:a,zIndexPopup:r,colorBgMask:n,colorBgElevated:l,motionDurationSlow:s,motionDurationMid:o,paddingXS:i,padding:c,paddingLG:d,fontSizeLG:m,lineHeightLG:p,lineWidth:u,lineType:x,colorSplit:h,marginXS:g,colorIcon:f,colorIconHover:v,colorBgTextHover:y,colorBgTextActive:b,colorText:j,fontWeightStrong:N,footerPaddingBlock:w,footerPaddingInline:$,calc:C}=e,k=`${a}-content-wrapper`;return{[a]:{position:"fixed",inset:0,zIndex:r,pointerEvents:"none",color:j,"&-pure":{position:"relative",background:l,display:"flex",flexDirection:"column",[`&${a}-left`]:{boxShadow:e.boxShadowDrawerLeft},[`&${a}-right`]:{boxShadow:e.boxShadowDrawerRight},[`&${a}-top`]:{boxShadow:e.boxShadowDrawerUp},[`&${a}-bottom`]:{boxShadow:e.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${a}-mask`]:{position:"absolute",inset:0,zIndex:r,background:n,pointerEvents:"auto"},[k]:{position:"absolute",zIndex:r,maxWidth:"100vw",transition:`all ${s}`,"&-hidden":{display:"none"}},[`&-left > ${k}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowDrawerLeft},[`&-right > ${k}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:e.boxShadowDrawerRight},[`&-top > ${k}`]:{top:0,insetInline:0,boxShadow:e.boxShadowDrawerUp},[`&-bottom > ${k}`]:{bottom:0,insetInline:0,boxShadow:e.boxShadowDrawerDown},[`${a}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:l,pointerEvents:"auto"},[`${a}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${(0,I.unit)(c)} ${(0,I.unit)(d)}`,fontSize:m,lineHeight:p,borderBottom:`${(0,I.unit)(u)} ${x} ${h}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${a}-extra`]:{flex:"none"},[`${a}-close`]:Object.assign({display:"inline-flex",width:C(m).add(i).equal(),height:C(m).add(i).equal(),borderRadius:t,justifyContent:"center",alignItems:"center",color:f,fontWeight:N,fontSize:m,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${o}`,textRendering:"auto",[`&${a}-close-end`]:{marginInlineStart:g},[`&:not(${a}-close-end)`]:{marginInlineEnd:g},"&:hover":{color:v,backgroundColor:y,textDecoration:"none"},"&:active":{backgroundColor:b}},(0,B.genFocusStyle)(e)),[`${a}-title`]:{flex:1,margin:0,fontWeight:e.fontWeightStrong,fontSize:m,lineHeight:p},[`${a}-body`]:{flex:1,minWidth:0,minHeight:0,padding:d,overflow:"auto",[`${a}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},[`${a}-footer`]:{flexShrink:0,padding:`${(0,I.unit)(w)} ${(0,I.unit)($)}`,borderTop:`${(0,I.unit)(u)} ${x} ${h}`},"&-rtl":{direction:"rtl"}}}})(t),(e=>{let{componentCls:t,motionDurationSlow:a}=e;return{[t]:{[`${t}-mask-motion`]:L(0,a),[`${t}-panel-motion`]:["left","right","top","bottom"].reduce((e,t)=>{let r;return Object.assign(Object.assign({},e),{[`&-${t}`]:[L(.7,a),z({transform:(r="100%",({left:`translateX(-${r})`,right:`translateX(${r})`,top:`translateY(-${r})`,bottom:`translateY(${r})`})[t])},{transform:"none"})]})},{})}}})(t)]},e=>({zIndexPopup:e.zIndexPopupBase,footerPaddingBlock:e.paddingXS,footerPaddingInline:e.padding}));var A=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};let F={distance:180},H=e=>{let{rootClassName:r,width:n,height:l,size:s="default",mask:o=!0,push:i=F,open:c,afterOpenChange:d,onClose:m,prefixCls:p,getContainer:u,panelRef:x=null,style:g,className:f,"aria-labelledby":v,visible:y,afterVisibleChange:b,maskStyle:j,drawerStyle:O,contentWrapperStyle:E,destroyOnClose:I,destroyOnHidden:B}=e,D=A(e,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","panelRef","style","className","aria-labelledby","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle","destroyOnClose","destroyOnHidden"]),M=(0,w.default)(),z=D.title?M:void 0,{getPopupContainer:L,getPrefixCls:H,direction:U,className:W,style:J,classNames:V,styles:K}=(0,T.useComponentConfig)("drawer"),q=H("drawer",p),[X,G,Y]=R(q),Z=void 0===u&&L?()=>L(document.body):u,Q=(0,a.default)({"no-mask":!o,[`${q}-rtl`]:"rtl"===U},r,G,Y),ee=t.useMemo(()=>null!=n?n:"large"===s?736:378,[n,s]),et=t.useMemo(()=>null!=l?l:"large"===s?736:378,[l,s]),ea={motionName:(0,k.getTransitionName)(q,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},er=(0,_.usePanelRef)(),en=(0,h.composeRef)(x,er),[el,es]=(0,C.useZIndex)("Drawer",D.zIndex),{classNames:eo={},styles:ei={}}=D;return X(t.createElement($.default,{form:!0,space:!0},t.createElement(S.default.Provider,{value:es},t.createElement(N,Object.assign({prefixCls:q,onClose:m,maskMotion:ea,motion:e=>({motionName:(0,k.getTransitionName)(q,`panel-motion-${e}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500})},D,{classNames:{mask:(0,a.default)(eo.mask,V.mask),content:(0,a.default)(eo.content,V.content),wrapper:(0,a.default)(eo.wrapper,V.wrapper)},styles:{mask:Object.assign(Object.assign(Object.assign({},ei.mask),j),K.mask),content:Object.assign(Object.assign(Object.assign({},ei.content),O),K.content),wrapper:Object.assign(Object.assign(Object.assign({},ei.wrapper),E),K.wrapper)},open:null!=c?c:y,mask:o,push:i,width:ee,height:et,style:Object.assign(Object.assign({},J),g),className:(0,a.default)(W,f),rootClassName:Q,getContainer:Z,afterOpenChange:null!=d?d:b,panelRef:en,zIndex:el,"aria-labelledby":null!=v?v:z,destroyOnClose:null!=B?B:I}),t.createElement(P,Object.assign({prefixCls:q},D,{ariaId:z,onClose:m}))))))};H._InternalPanelDoNotUseOrYouWillBeFired=e=>{let{prefixCls:r,style:n,className:l,placement:s="right"}=e,o=A(e,["prefixCls","style","className","placement"]),{getPrefixCls:i}=t.useContext(T.ConfigContext),c=i("drawer",r),[d,m,p]=R(c),u=(0,a.default)(c,`${c}-pure`,`${c}-${s}`,m,p,l);return d(t.createElement("div",{className:u,style:n},t.createElement(P,Object.assign({prefixCls:c},o))))},e.s(["Drawer",0,H],608856)},573421,e=>{"use strict";e.i(247167);var t=e.i(8211),a=e.i(271645),r=e.i(343794),n=e.i(887719),l=e.i(908206),s=e.i(242064),o=e.i(721132),i=e.i(517455),c=e.i(264042),d=e.i(150073),m=e.i(165370),p=e.i(244451);let u=a.default.createContext({});u.Consumer;var x=e.i(763731),h=e.i(211576),g=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};let f=a.default.forwardRef((e,t)=>{let n,{prefixCls:l,children:o,actions:i,extra:c,styles:d,className:m,classNames:p,colStyle:f}=e,v=g(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:y,itemLayout:b}=(0,a.useContext)(u),{getPrefixCls:j,list:N}=(0,a.useContext)(s.ConfigContext),w=e=>{var t,a;return(0,r.default)(null==(a=null==(t=null==N?void 0:N.item)?void 0:t.classNames)?void 0:a[e],null==p?void 0:p[e])},$=e=>{var t,a;return Object.assign(Object.assign({},null==(a=null==(t=null==N?void 0:N.item)?void 0:t.styles)?void 0:a[e]),null==d?void 0:d[e])},C=j("list",l),k=i&&i.length>0&&a.default.createElement("ul",{className:(0,r.default)(`${C}-item-action`,w("actions")),key:"actions",style:$("actions")},i.map((e,t)=>a.default.createElement("li",{key:`${C}-item-action-${t}`},e,t!==i.length-1&&a.default.createElement("em",{className:`${C}-item-action-split`})))),S=a.default.createElement(y?"div":"li",Object.assign({},v,y?{}:{ref:t},{className:(0,r.default)(`${C}-item`,{[`${C}-item-no-flex`]:!("vertical"===b?!!c:(n=!1,a.Children.forEach(o,e=>{"string"==typeof e&&(n=!0)}),!(n&&a.Children.count(o)>1)))},m)}),"vertical"===b&&c?[a.default.createElement("div",{className:`${C}-item-main`,key:"content"},o,k),a.default.createElement("div",{className:(0,r.default)(`${C}-item-extra`,w("extra")),key:"extra",style:$("extra")},c)]:[o,k,(0,x.cloneElement)(c,{key:"extra"})]);return y?a.default.createElement(h.Col,{ref:t,flex:1,style:f},S):S});f.Meta=e=>{var{prefixCls:t,className:n,avatar:l,title:o,description:i}=e,c=g(e,["prefixCls","className","avatar","title","description"]);let{getPrefixCls:d}=(0,a.useContext)(s.ConfigContext),m=d("list",t),p=(0,r.default)(`${m}-item-meta`,n),u=a.default.createElement("div",{className:`${m}-item-meta-content`},o&&a.default.createElement("h4",{className:`${m}-item-meta-title`},o),i&&a.default.createElement("div",{className:`${m}-item-meta-description`},i));return a.default.createElement("div",Object.assign({},c,{className:p}),l&&a.default.createElement("div",{className:`${m}-item-meta-avatar`},l),(o||i)&&u)},e.i(296059);var v=e.i(915654),y=e.i(183293),b=e.i(246422),j=e.i(838378);let N=(0,b.genStyleHooks)("List",e=>{let t=(0,j.mergeToken)(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[(e=>{let{componentCls:t,antCls:a,controlHeight:r,minHeight:n,paddingSM:l,marginLG:s,padding:o,itemPadding:i,colorPrimary:c,itemPaddingSM:d,itemPaddingLG:m,paddingXS:p,margin:u,colorText:x,colorTextDescription:h,motionDurationSlow:g,lineWidth:f,headerBg:b,footerBg:j,emptyTextPadding:N,metaMarginBottom:w,avatarMarginRight:$,titleMarginBottom:C,descriptionFontSize:k}=e;return{[t]:Object.assign(Object.assign({},(0,y.resetComponent)(e)),{position:"relative","--rc-virtual-list-scrollbar-bg":e.colorSplit,"*":{outline:"none"},[`${t}-header`]:{background:b},[`${t}-footer`]:{background:j},[`${t}-header, ${t}-footer`]:{paddingBlock:l},[`${t}-pagination`]:{marginBlockStart:s,[`${a}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:n,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:i,color:x,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:$},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:x},[`${t}-item-meta-title`]:{margin:`0 0 ${(0,v.unit)(e.marginXXS)} 0`,color:x,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:x,transition:`all ${g}`,"&:hover":{color:c}}},[`${t}-item-meta-description`]:{color:h,fontSize:k,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${(0,v.unit)(p)}`,color:h,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:f,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${(0,v.unit)(o)} 0`,color:h,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:N,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${a}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:u,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:s},[`${t}-item-meta`]:{marginBlockEnd:w,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:C,color:x,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:o,marginInlineStart:"auto","> li":{padding:`0 ${(0,v.unit)(o)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${(0,v.unit)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${(0,v.unit)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${(0,v.unit)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${a}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${(0,v.unit)(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:m},[`${t}-sm ${t}-item`]:{padding:d},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}})(t),(e=>{let{listBorderedCls:t,componentCls:a,paddingLG:r,margin:n,itemPaddingSM:l,itemPaddingLG:s,marginLG:o,borderRadiusLG:i}=e,c=(0,v.unit)(e.calc(i).sub(e.lineWidth).equal());return{[t]:{border:`${(0,v.unit)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:i,[`${a}-header`]:{borderRadius:`${c} ${c} 0 0`},[`${a}-footer`]:{borderRadius:`0 0 ${c} ${c}`},[`${a}-header,${a}-footer,${a}-item`]:{paddingInline:r},[`${a}-pagination`]:{margin:`${(0,v.unit)(n)} ${(0,v.unit)(o)}`}},[`${t}${a}-sm`]:{[`${a}-item,${a}-header,${a}-footer`]:{padding:l}},[`${t}${a}-lg`]:{[`${a}-item,${a}-header,${a}-footer`]:{padding:s}}}})(t),(e=>{let{componentCls:t,screenSM:a,screenMD:r,marginLG:n,marginSM:l,margin:s}=e;return{[`@media screen and (max-width:${r}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:n}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:n}}}},[`@media screen and (max-width: ${a}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:l}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${(0,v.unit)(s)}`}}}}}})(t)]},e=>({contentWidth:220,itemPadding:`${(0,v.unit)(e.paddingContentVertical)} 0`,itemPaddingSM:`${(0,v.unit)(e.paddingContentVerticalSM)} ${(0,v.unit)(e.paddingContentHorizontal)}`,itemPaddingLG:`${(0,v.unit)(e.paddingContentVerticalLG)} ${(0,v.unit)(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}));var w=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};let $=a.forwardRef(function(e,x){let{pagination:h=!1,prefixCls:g,bordered:f=!1,split:v=!0,className:y,rootClassName:b,style:j,children:$,itemLayout:C,loadMore:k,grid:S,dataSource:T=[],size:_,header:O,footer:E,loading:P=!1,rowKey:I,renderItem:B,locale:D}=e,M=w(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),z=h&&"object"==typeof h?h:{},[L,R]=a.useState(z.defaultCurrent||1),[A,F]=a.useState(z.defaultPageSize||10),{getPrefixCls:H,direction:U,className:W,style:J}=(0,s.useComponentConfig)("list"),{renderEmpty:V}=a.useContext(s.ConfigContext),K=e=>(t,a)=>{var r;R(t),F(a),h&&(null==(r=null==h?void 0:h[e])||r.call(h,t,a))},q=K("onChange"),X=K("onShowSizeChange"),G=!!(k||h||E),Y=H("list",g),[Z,Q,ee]=N(Y),et=P;"boolean"==typeof et&&(et={spinning:et});let ea=!!(null==et?void 0:et.spinning),er=(0,i.default)(_),en="";switch(er){case"large":en="lg";break;case"small":en="sm"}let el=(0,r.default)(Y,{[`${Y}-vertical`]:"vertical"===C,[`${Y}-${en}`]:en,[`${Y}-split`]:v,[`${Y}-bordered`]:f,[`${Y}-loading`]:ea,[`${Y}-grid`]:!!S,[`${Y}-something-after-last-item`]:G,[`${Y}-rtl`]:"rtl"===U},W,y,b,Q,ee),es=(0,n.default)({current:1,total:0,position:"bottom"},{total:T.length,current:L,pageSize:A},h||{}),eo=Math.ceil(es.total/es.pageSize);es.current=Math.min(es.current,eo);let ei=h&&a.createElement("div",{className:(0,r.default)(`${Y}-pagination`)},a.createElement(m.default,Object.assign({align:"end"},es,{onChange:q,onShowSizeChange:X}))),ec=(0,t.default)(T);h&&T.length>(es.current-1)*es.pageSize&&(ec=(0,t.default)(T).splice((es.current-1)*es.pageSize,es.pageSize));let ed=Object.keys(S||{}).some(e=>["xs","sm","md","lg","xl","xxl"].includes(e)),em=(0,d.default)(ed),ep=a.useMemo(()=>{for(let e=0;e<l.responsiveArray.length;e+=1){let t=l.responsiveArray[e];if(em[t])return t}},[em]),eu=a.useMemo(()=>{if(!S)return;let e=ep&&S[ep]?S[ep]:S.column;if(e)return{width:`${100/e}%`,maxWidth:`${100/e}%`}},[JSON.stringify(S),ep]),ex=ea&&a.createElement("div",{style:{minHeight:53}});if(ec.length>0){let e=ec.map((e,t)=>{let r;return B?((r="function"==typeof I?I(e):I?e[I]:e.key)||(r=`list-item-${t}`),a.createElement(a.Fragment,{key:r},B(e,t))):null});ex=S?a.createElement(c.Row,{gutter:S.gutter},a.Children.map(e,e=>a.createElement("div",{key:null==e?void 0:e.key,style:eu},e))):a.createElement("ul",{className:`${Y}-items`},e)}else $||ea||(ex=a.createElement("div",{className:`${Y}-empty-text`},(null==D?void 0:D.emptyText)||(null==V?void 0:V("List"))||a.createElement(o.default,{componentName:"List"})));let eh=es.position,eg=a.useMemo(()=>({grid:S,itemLayout:C}),[JSON.stringify(S),C]);return Z(a.createElement(u.Provider,{value:eg},a.createElement("div",Object.assign({ref:x,style:Object.assign(Object.assign({},J),j),className:el},M),("top"===eh||"both"===eh)&&ei,O&&a.createElement("div",{className:`${Y}-header`},O),a.createElement(p.default,Object.assign({},et),ex,$),E&&a.createElement("div",{className:`${Y}-footer`},E),k||("bottom"===eh||"both"===eh)&&ei)))});$.Item=f,e.s(["List",0,$],573421)},191403,180127,516430,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(994388),n=e.i(212931),l=e.i(764205),s=e.i(269200),o=e.i(942232),i=e.i(977572),c=e.i(427612),d=e.i(64848),m=e.i(496020),p=e.i(94629),u=e.i(360820),x=e.i(871943),h=e.i(68155),g=e.i(592968),f=e.i(166406),v=e.i(152990),y=e.i(682830),b=e.i(916925);let j=e=>{let t=new Set,a=/\{\{(\w+)\}\}/g;if(e.messages.forEach(e=>{let r;for(;null!==(r=a.exec(e.content));)t.add(r[1])}),e.developerMessage){let r;for(;null!==(r=a.exec(e.developerMessage));)t.add(r[1])}return Array.from(t)},N=e=>{let t=j(e),a=`---
model: ${e.model}
`;return void 0!==e.config.temperature&&(a+=`temperature: ${e.config.temperature}
`),void 0!==e.config.max_tokens&&(a+=`max_tokens: ${e.config.max_tokens}
`),void 0!==e.config.top_p&&(a+=`top_p: ${e.config.top_p}
`),a+=`input:
  schema:
`,t.forEach(e=>{a+=`    ${e}: string
`}),a+=`output:
  format: text
`,e.tools&&e.tools.length>0&&(a+=`tools:
`,e.tools.forEach(e=>{let t=JSON.parse(e.json);a+=`  - ${JSON.stringify(t)}
`})),a+=`---

`,e.developerMessage&&""!==e.developerMessage.trim()&&(a+=`Developer: ${e.developerMessage.trim()}

`),e.messages.forEach(e=>{let t=e.role.charAt(0).toUpperCase()+e.role.slice(1);a+=`${t}: ${e.content}

`}),a.trim()},w=e=>{let t=Number(e);return Number.isFinite(t)?t:void 0},$=e=>{let t=e?.prompt_spec?.litellm_params?.dotprompt_content||"";if(!t)throw Error("No dotprompt_content found in API response");let a=t.split("---");if(a.length<3)throw Error("Invalid dotprompt format");let r=a[1],n=a.slice(2).join("---").trim(),l=(e=>{let t={config:{},tools:[]},a=e.split("\n");for(let e of(t.tools=(e=>{let t=[],a=!1;for(let r of e){let e=r.trim();if(!a){("tools:"===e||e.startsWith("tools:"))&&(a=!0);continue}if(r.length>0&&!/^\s/.test(r)&&"-"!==e&&!e.startsWith("-"))break;let n=e.match(/^-+\s*(.+)$/);if(!n)continue;let l=n[1].trim();if(l)try{let e=JSON.parse(l);t.push({name:e?.function?.name||"Unnamed Tool",description:e?.function?.description||"",json:JSON.stringify(e,null,2)})}catch{}}return t})(a),a)){let a=e.trim();if(!a||a.startsWith("input:")||a.startsWith("output:")||a.startsWith("schema:")||a.startsWith("format:")||a.startsWith("tools:")||a.startsWith("-"))continue;let r=a.indexOf(":");if(r<=0)continue;let n=a.substring(0,r).trim(),l=a.substring(r+1).trim();if("model"===n){t.model=l;continue}"temperature"===n&&(t.config.temperature=w(l)),"max_tokens"===n&&(t.config.max_tokens=w(l)),"top_p"===n&&(t.config.top_p=w(l))}return t})(r),s=(e=>{let t=/^(System|Developer|User|Assistant):(?:\s(.*)|\s*)$/,a=[],r="",n=null,l=[],s=()=>{if(!n)return;let e=l.join("\n").trim();"developer"===n?e&&(r=r?`${r}

${e}`:e):e?a.push({role:n,content:e}):a.push({role:n,content:""})};for(let a of e.split("\n")){let e=a.match(t);if(e){s(),n=e[1].toLowerCase(),l=[e[2]??""];continue}n&&l.push(a)}return s(),{developerMessage:r,messages:a}})(n),o=e?.prompt_spec?.prompt_id||"Unnamed Prompt";return{name:C(o)||o,model:l.model||"gpt-4o",config:l.config,tools:l.tools,developerMessage:s.developerMessage,messages:s.messages.length>0?s.messages:[{role:"user",content:"Enter task specifics. Use {{template_variables}} for dynamic inputs"}]}},C=e=>e?e.replace(/[._-]v\d+$/,""):"",k=e=>e?.prompt_id||"",S=e=>{try{let t=e.litellm_params;if(t?.dotprompt_content){let e=t.dotprompt_content.match(/model:\s*([^\n]+)/);if(e)return e[1].trim()}if(t?.prompt_data?.model)return t.prompt_data.model;if(t?.model)return t.model;return null}catch(e){return console.error("Error extracting model:",e),null}},T=({promptsList:e,isLoading:n,onPromptClick:j,onDeleteClick:N,accessToken:w,isAdmin:$})=>{let[C,k]=(0,a.useState)([{id:"created_at",desc:!0}]),[T,_]=(0,a.useState)(new Map);(0,a.useEffect)(()=>{(async()=>{if(w)try{let e=await (0,l.modelHubCall)(w);if(e?.data){let t=new Map;e.data.forEach(e=>{t.set(e.model_group,e)}),_(t)}}catch(e){console.error("Error fetching model hub data:",e)}})()},[w]);let O=e=>e?new Date(e).toLocaleString():"-",E=[{header:"Prompt ID",accessorKey:"prompt_id",cell:e=>{let a=String(e.getValue()||""),n=a.length>25?`${a.slice(0,25)}...`:a;return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Tooltip,{title:a,children:(0,t.jsx)(r.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate min-w-[220px] justify-start",onClick:()=>e.getValue()&&j?.(e.getValue()),children:n})}),(0,t.jsx)(g.Tooltip,{title:"Copy prompt ID",children:(0,t.jsx)(f.CopyOutlined,{onClick:e=>{e.stopPropagation(),navigator.clipboard.writeText(a)},className:"cursor-pointer text-gray-500 hover:text-blue-500 text-xs"})})]})}},{header:"Model",accessorKey:"model",cell:({row:e})=>{let a=S(e.original);if(!a)return(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"-"});let r=((e,t)=>{if(!e)return null;let a=t.get(e);return a&&a.providers&&a.providers.length>0?a.providers[0]:null})(a,T),{logo:n}=(0,b.getProviderLogoAndName)(r||"");return(0,t.jsx)(g.Tooltip,{title:a,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:r&&n?(0,t.jsx)("img",{src:n,alt:`${r} logo`,className:"w-4 h-4",onError:e=>{let t=e.currentTarget,a=t.parentElement;if(a&&a.contains(t))try{let e=document.createElement("div");e.className="w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=r?.charAt(0)||"-",a.replaceChild(e,t)}catch(e){console.error("Failed to replace provider logo fallback:",e)}}}):(0,t.jsx)("div",{className:"w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",children:"-"})}),(0,t.jsx)("span",{className:"max-w-[15ch] truncate block",children:a})]})})}},{header:"Created At",accessorKey:"created_at",cell:({row:e})=>{let a=e.original;return(0,t.jsx)(g.Tooltip,{title:a.created_at,children:(0,t.jsx)("span",{className:"text-xs",children:O(a.created_at)})})}},{header:"Updated At",accessorKey:"updated_at",cell:({row:e})=>{let a=e.original;return(0,t.jsx)(g.Tooltip,{title:a.updated_at,children:(0,t.jsx)("span",{className:"text-xs",children:O(a.updated_at)})})}},{header:"Type",accessorKey:"prompt_info.prompt_type",cell:({row:e})=>{let a=e.original;return(0,t.jsx)(g.Tooltip,{title:a.prompt_info.prompt_type,children:(0,t.jsx)("span",{className:"text-xs",children:a.prompt_info.prompt_type})})}},...$?[{header:"Actions",id:"actions",enableSorting:!1,cell:({row:e})=>{let a=e.original,n=a.prompt_id||"Unknown Prompt";return(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)(g.Tooltip,{title:"Delete prompt",children:(0,t.jsx)(r.Button,{size:"xs",variant:"light",color:"red",onClick:e=>{e.stopPropagation(),N?.(a.prompt_id,n)},icon:h.TrashIcon,className:"text-red-500 hover:text-red-700 hover:bg-red-50"})})})}}]:[]],P=(0,v.useReactTable)({data:e,columns:E,state:{sorting:C},onSortingChange:k,getCoreRowModel:(0,y.getCoreRowModel)(),getSortedRowModel:(0,y.getSortedRowModel)(),enableSorting:!0});return(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(s.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,t.jsx)(c.TableHead,{children:P.getHeaderGroups().map(e=>(0,t.jsx)(m.TableRow,{children:e.headers.map(e=>(0,t.jsx)(d.TableHeaderCell,{className:"py-1 h-8",onClick:e.column.getToggleSortingHandler(),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,v.flexRender)(e.column.columnDef.header,e.getContext())}),(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(u.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(x.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(p.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})})]})},e.id))},e.id))}),(0,t.jsx)(o.TableBody,{children:n?(0,t.jsx)(m.TableRow,{children:(0,t.jsx)(i.TableCell,{colSpan:E.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"Loading..."})})})}):e.length>0?P.getRowModel().rows.map(e=>(0,t.jsx)(m.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(i.TableCell,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,v.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(m.TableRow,{children:(0,t.jsx)(i.TableCell,{colSpan:E.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No prompts found"})})})})})]})})})};var _=e.i(304967),O=e.i(629569),E=e.i(599724),P=e.i(350967),I=e.i(389083),B=e.i(197647),D=e.i(653824),M=e.i(881073),z=e.i(404206),L=e.i(723731),R=e.i(464571),A=e.i(530212),F=e.i(797672),H=e.i(500330),U=e.i(678784),W=e.i(118366),J=e.i(727749),V=e.i(199133),K=e.i(653496),q=e.i(245094),X=e.i(650056),G=e.i(219470);let Y=({promptId:e,model:l,promptVariables:s={},accessToken:o,version:i="1",proxySettings:c})=>{let[d,m]=(0,a.useState)(!1),[p,u]=(0,a.useState)("curl"),[x,h]=(0,a.useState)("basic"),[g,f]=(0,a.useState)(""),v=window.location.origin,y=c?.LITELLM_UI_API_DOC_BASE_URL;y&&y.trim()?v=y:c?.PROXY_BASE_URL&&(v=c.PROXY_BASE_URL);let b=o||"sk-1234";return a.default.useEffect(()=>{d&&f((()=>{let t=Object.keys(s).length>0;if("curl"===p)if("basic"===x)return`curl -X POST '${v}/chat/completions' \\
  -H 'Content-Type: application/json' \\
  -H 'Authorization: Bearer ${b}' \\
  -d '{
    "model": "${l}",
    "prompt_id": "${e}"${t?`,
    "prompt_variables": ${JSON.stringify(s,null,6).replace(/\n/g,"\n    ")}`:""}
  }' | jq`;else if("messages"===x)return`curl -X POST '${v}/chat/completions' \\
  -H 'Content-Type: application/json' \\
  -H 'Authorization: Bearer ${b}' \\
  -d '{
    "model": "${l}",
    "prompt_id": "${e}"${t?`,
    "prompt_variables": ${JSON.stringify(s,null,6).replace(/\n/g,"\n    ")}`:""},
    "messages": [
      {
        "role": "user",
        "content": "hi"
      }
    ]
  }' | jq`;else return`curl -X POST '${v}/chat/completions' \\
  -H 'Content-Type: application/json' \\
  -H 'Authorization: Bearer ${b}' \\
  -d '{
    "model": "${l}",
    "prompt_id": "${e}",
    "prompt_version": ${i},
    "messages": [
      {
        "role": "user",
        "content": "Who are u"
      }
    ]
  }' | jq`;if("python"===p){let a=`import openai

client = openai.OpenAI(
    api_key="${b}",
    base_url="${v}"
)
`;return"basic"===x?`${a}
response = client.chat.completions.create(
    model="${l}",
    extra_body={
        "prompt_id": "${e}"${t?`,
        "prompt_variables": ${JSON.stringify(s,null,8).replace(/\n/g,"\n        ")}`:""}
    }
)

print(response)`:"messages"===x?`${a}
response = client.chat.completions.create(
    model="${l}",
    messages=[
        {"role": "user", "content": "hi"}
    ],
    extra_body={
        "prompt_id": "${e}"${t?`,
        "prompt_variables": ${JSON.stringify(s,null,8).replace(/\n/g,"\n        ")}`:""}
    }
)

print(response)`:`${a}
response = client.chat.completions.create(
    model="${l}",
    messages=[
        {"role": "user", "content": "Who are u"}
    ],
    extra_body={
        "prompt_id": "${e}",
        "prompt_version": ${i}
    }
)

print(response)`}{let a=`import OpenAI from 'openai';

const client = new OpenAI({
    apiKey: "${b}",
    baseURL: "${v}"
});
`;return"basic"===x?`${a}
async function main() {
    const response = await client.chat.completions.create({
        model: "${l}",
        ${t?`prompt_id: "${e}",
        prompt_variables: ${JSON.stringify(s,null,8).replace(/\n/g,"\n        ")}`:`prompt_id: "${e}"`}
    });
    
    console.log(response);
}

main();`:"messages"===x?`${a}
async function main() {
    const response = await client.chat.completions.create({
        model: "${l}",
        messages: [
            { role: "user", content: "hi" }
        ],
        ${t?`prompt_id: "${e}",
        prompt_variables: ${JSON.stringify(s,null,8).replace(/\n/g,"\n        ")}`:`prompt_id: "${e}"`}
    });
    
    console.log(response);
}

main();`:`${a}
async function main() {
    const response = await client.chat.completions.create({
        model: "${l}",
        messages: [
            { role: "user", content: "Who are u" }
        ],
        prompt_id: "${e}",
        prompt_version: ${i}
    });
    
    console.log(response);
}

main();`}})())},[d,p,x,e,l,s]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Button,{variant:"secondary",icon:q.CodeOutlined,onClick:()=>{m(!0)},children:"Get Code"}),(0,t.jsxs)(n.Modal,{title:"Generated Code",open:d,onCancel:()=>{m(!1)},footer:null,width:800,children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Text,{className:"font-medium block mb-1 text-gray-700",children:"Language"}),(0,t.jsx)(V.Select,{value:p,onChange:e=>u(e),style:{width:180},options:[{value:"curl",label:"cURL"},{value:"python",label:"Python (OpenAI SDK)"},{value:"javascript",label:"JavaScript (OpenAI SDK)"}]})]}),(0,t.jsx)(R.Button,{onClick:()=>{navigator.clipboard.writeText(g),J.default.success("Copied to clipboard!")},children:"Copy to Clipboard"})]}),(0,t.jsx)(K.Tabs,{activeKey:x,onChange:h,items:[{label:"Basic",key:"basic"},{label:"With Messages",key:"messages"},{label:"With Version",key:"version"}]}),(0,t.jsx)(X.Prism,{language:"curl"===p?"bash":"python"===p?"python":"javascript",style:G.coy,wrapLines:!0,wrapLongLines:!0,className:"rounded-md mt-0",customStyle:{maxHeight:"60vh",overflowY:"auto",marginTop:0,borderTopLeftRadius:0,borderTopRightRadius:0},children:g})]})]})},Z=({promptId:e,onClose:s,accessToken:o,isAdmin:i,onDelete:c,onEdit:d})=>{let[m,p]=(0,a.useState)(null),[u,x]=(0,a.useState)(null),[g,f]=(0,a.useState)(null),[v,y]=(0,a.useState)(!0),[b,j]=(0,a.useState)({}),[N,w]=(0,a.useState)(!1),[$,C]=(0,a.useState)(!1),T=async()=>{try{if(y(!0),!o)return;let t=await (0,l.getPromptInfo)(o,e);p(t.prompt_spec),x(t.raw_prompt_template),f(t)}catch(e){J.default.fromBackend("Failed to load prompt information"),console.error("Error fetching prompt info:",e)}finally{y(!1)}};if((0,a.useEffect)(()=>{T()},[e,o]),v)return(0,t.jsx)("div",{className:"p-4",children:"Loading..."});if(!m)return(0,t.jsx)("div",{className:"p-4",children:"Prompt not found"});let V=e=>e?new Date(e).toLocaleString():"-",K=async(e,t)=>{await (0,H.copyToClipboard)(e)&&(j(e=>({...e,[t]:!0})),setTimeout(()=>{j(e=>({...e,[t]:!1}))},2e3))},q=async()=>{if(o&&m){C(!0);try{await (0,l.deletePromptCall)(o,G),J.default.success(`Prompt "${G}" deleted successfully`),c?.(),s()}catch(e){console.error("Error deleting prompt:",e),J.default.fromBackend("Failed to delete prompt")}finally{C(!1),w(!1)}}},X=m&&S(m)||"gpt-4o",G=k(m),Z=(e=>{let t;if(e?.version)return String(e.version);var a=(t=k(e),e?.litellm_params?.prompt_id||t);if(!a)return"1";let r=a.match(/[._-]v(\d+)$/);return r?r[1]:"1"})(m);return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(r.Button,{icon:A.ArrowLeftIcon,variant:"light",onClick:s,className:"mb-4",children:"Back to Prompts"}),(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(O.Title,{children:"Prompt Details"}),(0,t.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)(E.Text,{className:"text-gray-500 font-mono",children:G}),(0,t.jsx)(R.Button,{type:"text",size:"small",icon:b["prompt-id"]?(0,t.jsx)(U.CheckIcon,{size:12}):(0,t.jsx)(W.CopyIcon,{size:12}),onClick:()=>K(G,"prompt-id"),className:`left-2 z-10 transition-all duration-200 ${b["prompt-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(Y,{promptId:G,model:X,promptVariables:(e=>{let t;if(!e)return{};let a={},r=/\{\{(\w+)\}\}/g;for(;null!==(t=r.exec(e));){let e=t[1];a[e]||(a[e]=`example_${e}`)}return a})(u?.content),accessToken:o,version:Z}),(0,t.jsx)(r.Button,{icon:F.PencilIcon,variant:"primary",onClick:()=>d?.(g),className:"flex items-center",children:"Prompt Studio"}),i&&(0,t.jsx)(r.Button,{icon:h.TrashIcon,variant:"secondary",onClick:()=>{w(!0)},className:"flex items-center",children:"Delete Prompt"})]})]})]}),(0,t.jsxs)(D.TabGroup,{children:[(0,t.jsxs)(M.TabList,{className:"mb-4",children:[(0,t.jsx)(B.Tab,{children:"Overview"},"overview"),u?(0,t.jsx)(B.Tab,{children:"Prompt Template"},"prompt-template"):(0,t.jsx)(t.Fragment,{}),i?(0,t.jsx)(B.Tab,{children:"Details"},"details"):(0,t.jsx)(t.Fragment,{}),(0,t.jsx)(B.Tab,{children:"Raw JSON"},"raw-json")]}),(0,t.jsxs)(L.TabPanels,{children:[(0,t.jsxs)(z.TabPanel,{children:[(0,t.jsxs)(P.Grid,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,t.jsxs)(_.Card,{children:[(0,t.jsx)(E.Text,{children:"Prompt ID"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(O.Title,{className:"font-mono text-sm",children:G})})]}),(0,t.jsxs)(_.Card,{children:[(0,t.jsx)(E.Text,{children:"Version"}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)(O.Title,{children:Z}),(0,t.jsxs)(I.Badge,{color:"blue",className:"mt-1",children:["v",Z]})]})]}),(0,t.jsxs)(_.Card,{children:[(0,t.jsx)(E.Text,{children:"Prompt Type"}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)(O.Title,{children:m.prompt_info?.prompt_type||"-"}),(0,t.jsx)(I.Badge,{color:"blue",className:"mt-1",children:m.prompt_info?.prompt_type||"Unknown"})]})]}),(0,t.jsxs)(_.Card,{children:[(0,t.jsx)(E.Text,{children:"Created At"}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)(O.Title,{children:V(m.created_at)}),(0,t.jsxs)(E.Text,{children:["Last Updated: ",V(m.updated_at)]})]})]})]}),m.litellm_params&&Object.keys(m.litellm_params).length>0&&(0,t.jsxs)(_.Card,{className:"mt-6",children:[(0,t.jsx)(E.Text,{className:"font-medium",children:"LiteLLM Parameters"}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md",children:(0,t.jsx)("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap",children:JSON.stringify(m.litellm_params,null,2)})})]})]}),u&&(0,t.jsx)(z.TabPanel,{children:(0,t.jsxs)(_.Card,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(O.Title,{children:"Prompt Template"}),(0,t.jsx)(R.Button,{type:"text",size:"small",icon:b["prompt-content"]?(0,t.jsx)(U.CheckIcon,{size:16}):(0,t.jsx)(W.CopyIcon,{size:16}),onClick:()=>K(u.content,"prompt-content"),className:`transition-all duration-200 ${b["prompt-content"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:b["prompt-content"]?"Copied!":"Copy Content"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Text,{className:"font-medium",children:"Template ID"}),(0,t.jsx)("div",{className:"font-mono text-sm bg-gray-50 p-2 rounded",children:u.litellm_prompt_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Text,{className:"font-medium",children:"Content"}),(0,t.jsx)("div",{className:"mt-2 p-4 bg-gray-50 rounded-md border overflow-auto max-h-96",children:(0,t.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:u.content})})]}),u.metadata&&Object.keys(u.metadata).length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Text,{className:"font-medium",children:"Template Metadata"}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md border",children:(0,t.jsx)("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap overflow-auto max-h-64",children:JSON.stringify(u.metadata,null,2)})})]})]})]})}),i&&(0,t.jsx)(z.TabPanel,{children:(0,t.jsxs)(_.Card,{children:[(0,t.jsx)(O.Title,{className:"mb-4",children:"Prompt Details"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Text,{className:"font-medium",children:"Prompt ID"}),(0,t.jsx)("div",{className:"font-mono text-sm bg-gray-50 p-2 rounded",children:G})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Text,{className:"font-medium",children:"Prompt Type"}),(0,t.jsx)("div",{children:m.prompt_info?.prompt_type||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Text,{className:"font-medium",children:"Created At"}),(0,t.jsx)("div",{children:V(m.created_at)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Text,{className:"font-medium",children:"Last Updated"}),(0,t.jsx)("div",{children:V(m.updated_at)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Text,{className:"font-medium",children:"LiteLLM Parameters"}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md border",children:(0,t.jsx)("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap overflow-auto max-h-96",children:JSON.stringify(m.litellm_params,null,2)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Text,{className:"font-medium",children:"Prompt Info"}),(0,t.jsx)("div",{className:"mt-2 p-3 bg-gray-50 rounded-md border",children:(0,t.jsx)("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap",children:JSON.stringify(m.prompt_info,null,2)})})]})]})]})}),(0,t.jsx)(z.TabPanel,{children:(0,t.jsxs)(_.Card,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(O.Title,{children:"Raw API Response"}),(0,t.jsx)(R.Button,{type:"text",size:"small",icon:b["raw-json"]?(0,t.jsx)(U.CheckIcon,{size:16}):(0,t.jsx)(W.CopyIcon,{size:16}),onClick:()=>K(JSON.stringify(g,null,2),"raw-json"),className:`transition-all duration-200 ${b["raw-json"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:b["raw-json"]?"Copied!":"Copy JSON"})]}),(0,t.jsx)("div",{className:"p-4 bg-gray-50 rounded-md border overflow-auto",children:(0,t.jsx)("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap",children:JSON.stringify(g,null,2)})})]})})]})]}),(0,t.jsxs)(n.Modal,{title:"Delete Prompt",open:N,onOk:q,onCancel:()=>{w(!1)},confirmLoading:$,okText:"Delete",okButtonProps:{danger:!0},children:[(0,t.jsxs)("p",{children:["Are you sure you want to delete prompt: ",(0,t.jsx)("strong",{children:G}),"?"]}),(0,t.jsx)("p",{children:"This action cannot be undone."})]})]})};var Q=e.i(808613),ee=e.i(515831),et=e.i(312361),ea=e.i(779241),er=e.i(519756);let{Option:en}=V.Select,el=({visible:e,onClose:r,accessToken:s,onSuccess:o})=>{let[i]=Q.Form.useForm(),[c,d]=(0,a.useState)(!1),[m,p]=(0,a.useState)([]),[u,x]=(0,a.useState)("dotprompt"),h=()=>{i.resetFields(),p([]),x("dotprompt"),r()},g=async()=>{try{let e=await i.validateFields();if(console.log("values: ",e),!s)return void J.default.fromBackend("Access token is required");if("dotprompt"===u&&0===m.length)return void J.default.fromBackend("Please upload a .prompt file");d(!0);let t={};if("dotprompt"===u&&m.length>0){let a=m[0].originFileObj;try{let r=await (0,l.convertPromptFileToJson)(s,a);console.log("Conversion result:",r),t={prompt_id:e.prompt_id,litellm_params:{prompt_integration:"dotprompt",prompt_id:r.prompt_id,prompt_data:r.json_data},prompt_info:{prompt_type:"db"}}}catch(e){console.error("Error converting prompt file:",e),J.default.fromBackend("Failed to convert prompt file to JSON"),d(!1);return}}try{await (0,l.createPromptCall)(s,t),J.default.success("Prompt created successfully!"),h(),o()}catch(e){console.error("Error creating prompt:",e),J.default.fromBackend("Failed to create prompt")}}catch(e){console.error("Form validation error:",e)}finally{d(!1)}};return(0,t.jsx)(n.Modal,{title:"Add New Prompt",open:e,onCancel:h,footer:[(0,t.jsx)(R.Button,{onClick:h,children:"Cancel"},"cancel"),(0,t.jsx)(R.Button,{loading:c,onClick:g,children:"Create Prompt"},"submit")],width:600,children:(0,t.jsxs)(Q.Form,{form:i,layout:"vertical",requiredMark:!1,children:[(0,t.jsx)(Q.Form.Item,{label:"Prompt ID",name:"prompt_id",rules:[{required:!0,message:"Please enter a prompt ID"},{pattern:/^[a-zA-Z0-9_-]+$/,message:"Prompt ID can only contain letters, numbers, underscores, and hyphens"}],children:(0,t.jsx)(ea.TextInput,{placeholder:"Enter unique prompt ID (e.g., my_prompt_id)"})}),(0,t.jsx)(Q.Form.Item,{label:"Prompt Integration",name:"prompt_integration",initialValue:"dotprompt",children:(0,t.jsx)(V.Select,{value:u,onChange:x,children:(0,t.jsx)(en,{value:"dotprompt",children:"dotprompt"})})}),"dotprompt"===u&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(et.Divider,{}),(0,t.jsxs)(Q.Form.Item,{label:"Prompt File",extra:"Upload a .prompt file that follows the Dotprompt specification",children:[(0,t.jsx)(ee.Upload,{...{beforeUpload:e=>(e.name.endsWith(".prompt")||J.default.fromBackend("Please upload a .prompt file"),!1),fileList:m,onChange:({fileList:e})=>{p(e.slice(-1))},onRemove:()=>{p([])}},children:(0,t.jsx)(R.Button,{icon:(0,t.jsx)(er.UploadOutlined,{}),children:"Select .prompt File"})}),m.length>0&&(0,t.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",m[0].name]})]})]})]})})},es=`{
  "type": "function",
  "function": {
    "name": "get_current_weather",
    "description": "Get the current weather in a given location",
    "parameters": {
      "type": "object",
      "properties": {
        "location": {
          "type": "string",
          "description": "The city and state, e.g. San Francisco, CA"
        },
        "unit": {
          "type": "string",
          "enum": ["celsius", "fahrenheit"]
        }
      },
      "required": ["location"]
    }
  }
}`,eo=({visible:e,initialJson:r,onSave:l,onClose:s})=>{let[o,i]=(0,a.useState)(r||es),[c,d]=(0,a.useState)(null),m=()=>{d(null),s()};return(0,t.jsx)(n.Modal,{title:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("span",{className:"text-lg font-medium",children:"Add Tool"})}),open:e,onCancel:m,width:800,footer:[(0,t.jsx)(R.Button,{onClick:m,children:"Cancel"},"cancel"),(0,t.jsx)(R.Button,{type:"primary",onClick:()=>{try{JSON.parse(o),d(null),l(o)}catch(e){d("Invalid JSON format. Please check your syntax.")}},children:"Add"},"save")],children:(0,t.jsxs)("div",{className:"space-y-3",children:[c&&(0,t.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-600 text-sm",children:c}),(0,t.jsx)("textarea",{value:o,onChange:e=>i(e.target.value),className:"w-full min-h-[400px] px-4 py-3 border border-gray-300 rounded-lg text-sm font-mono focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Paste your tool JSON here..."})]})})};var ei=e.i(311451),ec=e.i(475254);let ed=(0,ec.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["default",()=>ed],180127),e.s(["ArrowLeftIcon",()=>ed],516430);let em=(0,ec.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),ep=(0,ec.default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),eu=({promptName:e,onNameChange:a,onBack:n,onSave:l,isSaving:s,editMode:o=!1,onShowHistory:i,version:c,promptModel:d="gpt-4o",promptVariables:m={},accessToken:p,proxySettings:u})=>(0,t.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(r.Button,{icon:ed,variant:"light",onClick:n,size:"xs",children:"Back"}),(0,t.jsx)(ei.Input,{value:e,onChange:e=>a(e.target.value),className:"text-base font-medium border-none shadow-none",style:{width:"200px"}}),c&&(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded font-medium",children:c}),(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:"Draft"}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"Unsaved changes"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(Y,{promptId:e,model:d,promptVariables:m,accessToken:p,version:c?.replace("v","")||"1",proxySettings:u}),o&&i&&(0,t.jsx)(r.Button,{icon:ep,variant:"secondary",onClick:i,children:"History"}),(0,t.jsx)(r.Button,{icon:em,onClick:l,loading:s,disabled:s,children:o?"Update":"Save"})]})]});var ex=e.i(903446),ex=ex,eh=e.i(992619);let eg=({model:e,temperature:r=1,maxTokens:n=1e3,accessToken:l,onModelChange:s,onTemperatureChange:o,onMaxTokensChange:i})=>{let[c,d]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-[300px]",children:(0,t.jsx)(eh.default,{accessToken:l||"",value:e,onChange:s,showLabel:!1})}),(0,t.jsxs)("button",{onClick:()=>d(!c),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,t.jsx)(ex.default,{size:16}),(0,t.jsx)("span",{children:"Parameters"})]}),c&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-30",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-96",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Model Parameters"}),(0,t.jsx)("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)(E.Text,{className:"text-sm text-gray-700",children:"Temperature"}),(0,t.jsx)(ei.Input,{type:"number",size:"small",min:0,max:2,step:.1,value:r,onChange:e=>o(parseFloat(e.target.value)||0),className:"w-20"})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)(E.Text,{className:"text-sm text-gray-700",children:"Max Tokens"}),(0,t.jsx)(ei.Input,{type:"number",size:"small",min:1,max:32768,value:n,onChange:e=>i(parseInt(e.target.value)||1e3),className:"w-24"})]})})]})]})})]})};var ef=e.i(603908),ef=ef;let ev=(0,ec.default)("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),ey=({tools:e,onAddTool:a,onEditTool:r,onRemoveTool:n})=>(0,t.jsxs)(_.Card,{className:"p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)(E.Text,{className:"text-sm font-medium",children:"Tools"}),(0,t.jsxs)("button",{onClick:a,className:"text-xs text-blue-600 hover:text-blue-700 flex items-center",children:[(0,t.jsx)(ef.default,{size:14,className:"mr-1"}),"Add"]})]}),0===e.length?(0,t.jsx)(E.Text,{className:"text-gray-500 text-xs",children:"No tools added"}):(0,t.jsx)("div",{className:"space-y-2",children:e.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 border border-gray-200 rounded",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-xs truncate",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500 truncate",children:e.description})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[(0,t.jsx)("button",{onClick:()=>r(a),className:"text-xs text-blue-600 hover:text-blue-700",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>n(a),className:"text-gray-400 hover:text-red-500",children:(0,t.jsx)(ev,{size:14})})]})]},a))})]});var eb=e.i(282786),ej=e.i(262218),eN=e.i(751904);let{TextArea:ew}=ei.Input,e$=({value:e,onChange:r,placeholder:n,rows:l=4,className:s})=>{let[o,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),m=()=>{c.trim()&&o&&(r(e.substring(0,o.start)+`{{${c}}}`+e.substring(o.end)),i(null),d(""))},p=(()=>{let t,a=/\{\{(\w+)\}\}/g,r=[];for(;null!==(t=a.exec(e));)r.push({name:t[1],start:t.index,end:t.index+t[0].length});return r})();return(0,t.jsxs)("div",{className:`variable-textarea-container ${s}`,children:[(0,t.jsx)("style",{children:`
          .variable-highlight-text {
            color: #f97316;
            background-color: #fff7ed;
            border-radius: 4px;
            padding: 0 2px;
            border: 1px solid #fed7aa;
            font-family: monospace;
          }
        `}),(0,t.jsx)(ew,{value:e,onChange:e=>r(e.target.value),placeholder:n,rows:l,className:"font-sans"}),p.length>0&&(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2 items-center",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500 mr-1",children:"Detected variables:"}),p.map((e,a)=>(0,t.jsx)(eb.Popover,{content:(0,t.jsxs)("div",{className:"p-2",style:{minWidth:"200px"},children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Edit variable name"}),(0,t.jsx)(ei.Input,{size:"small",value:c,onChange:e=>d(e.target.value),onPressEnter:m,placeholder:"Variable name",autoFocus:!0}),(0,t.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,t.jsx)("button",{onClick:m,className:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"}),(0,t.jsx)("button",{onClick:()=>{i(null),d("")},className:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancel"})]})]}),open:o?.start===e.start,onOpenChange:e=>{e||(i(null),d(""))},trigger:"click",children:(0,t.jsx)(ej.Tag,{color:"orange",className:"cursor-pointer hover:opacity-80 transition-all m-0",icon:(0,t.jsx)(eN.EditOutlined,{}),onClick:()=>{i({oldName:e.name,start:e.start,end:e.end}),d(e.name)},children:e.name})},`${e.start}-${a}`))]})]})},eC=({value:e,onChange:a})=>(0,t.jsxs)(_.Card,{className:"p-3",children:[(0,t.jsx)(E.Text,{className:"block mb-2 text-sm font-medium",children:"Developer message"}),(0,t.jsx)(E.Text,{className:"text-gray-500 text-xs mb-2",children:"Optional system instructions for the model"}),(0,t.jsx)(e$,{value:e,onChange:a,rows:3,placeholder:"e.g., You are a helpful assistant..."})]});var ef=ef;let ek=(0,ec.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),{Option:eS}=V.Select,eT=({messages:e,onAddMessage:r,onUpdateMessage:n,onRemoveMessage:l,onMoveMessage:s})=>{let[o,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),m=()=>{i(null),d(null)};return(0,t.jsxs)(_.Card,{className:"p-3",children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)(E.Text,{className:"text-sm font-medium",children:"Prompt messages"}),(0,t.jsxs)(E.Text,{className:"text-gray-500 text-xs mt-1",children:["Use ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 rounded text-xs",children:"{{variable}}"})," syntax for template variables"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:e.map((a,r)=>(0,t.jsxs)("div",{draggable:!0,onDragStart:()=>{i(r)},onDragOver:e=>{e.preventDefault(),d(r)},onDrop:e=>{e.preventDefault(),null!==o&&o!==r&&s(o,r),i(null),d(null)},onDragEnd:m,className:`border border-gray-300 rounded overflow-hidden bg-white transition-all ${o===r?"opacity-50":""} ${c===r&&o!==r?"border-blue-500 border-2":""}`,children:[(0,t.jsxs)("div",{className:"bg-gray-50 px-2 py-1.5 border-b border-gray-300 flex items-center justify-between",children:[(0,t.jsxs)(V.Select,{value:a.role,onChange:e=>n(r,"role",e),style:{width:100},size:"small",bordered:!1,children:[(0,t.jsx)(eS,{value:"user",children:"User"}),(0,t.jsx)(eS,{value:"assistant",children:"Assistant"}),(0,t.jsx)(eS,{value:"system",children:"System"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[e.length>1&&(0,t.jsx)("button",{onClick:()=>l(r),className:"text-gray-400 hover:text-red-500",children:(0,t.jsx)(ev,{size:14})}),(0,t.jsx)("div",{className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",children:(0,t.jsx)(ek,{size:16})})]})]}),(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(e$,{value:a.content,onChange:e=>n(r,"content",e),rows:3,placeholder:"Enter prompt content..."})})]},r))}),(0,t.jsxs)("button",{onClick:r,className:"mt-2 text-xs text-blue-600 hover:text-blue-700 flex items-center",children:[(0,t.jsx)(ef.default,{size:14,className:"mr-1"}),"Add message"]})]})};var e_=e.i(447593);let eO=({extractedVariables:e,variables:a,onVariableChange:r})=>0===e.length?null:(0,t.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-blue-50",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Fill in template variables to start testing"}),(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-xs text-gray-600 mb-1 font-medium",children:["{{",e,"}}"]}),(0,t.jsx)(ei.Input,{value:a[e]||"",onChange:t=>r(e,t.target.value),placeholder:`Enter value for ${e}`,size:"small"})]},e))})]});var eE=e.i(56456),eP=e.i(482725),eI=e.i(983561);let eB=({hasVariables:e})=>(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,t.jsx)(eI.RobotOutlined,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,t.jsx)("span",{className:"text-base",children:e?"Fill in the variables above, then type a message to start testing":"Type a message below to start testing your prompt"})]});var eD=e.i(771674),eM=e.i(918789),ez=e.i(989022);let eL=({message:e})=>(0,t.jsx)("div",{className:`mb-4 flex ${"user"===e.role?"justify-end":"justify-start"}`,children:(0,t.jsxs)("div",{className:"max-w-[85%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"user"===e.role?"#f0f8ff":"#ffffff",border:"user"===e.role?"1px solid #e6f0fa":"1px solid #f0f0f0"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"user"===e.role?"#e6f0fa":"#f5f5f5"},children:"user"===e.role?(0,t.jsx)(eD.UserOutlined,{style:{fontSize:"12px",color:"#2563eb"}}):(0,t.jsx)(eI.RobotOutlined,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,t.jsx)("strong",{className:"text-sm capitalize",children:e.role}),"assistant"===e.role&&e.model&&(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600 font-normal",children:e.model})]}),(0,t.jsxs)("div",{className:"whitespace-pre-wrap break-words max-w-full message-content",style:{wordWrap:"break-word",overflowWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},children:["assistant"===e.role?(0,t.jsx)(eM.default,{components:{code({node:e,inline:a,className:r,children:n,...l}){let s=/language-(\w+)/.exec(r||"");return!a&&s?(0,t.jsx)(X.Prism,{style:G.coy,language:s[1],PreTag:"div",className:"rounded-md my-2",wrapLines:!0,wrapLongLines:!0,...l,children:String(n).replace(/\n$/,"")}):(0,t.jsx)("code",{className:`${r} px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono`,style:{wordBreak:"break-word"},...l,children:n})},pre:({node:e,...a})=>(0,t.jsx)("pre",{style:{overflowX:"auto",maxWidth:"100%"},...a})},children:e.content}):(0,t.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),"assistant"===e.role&&(e.timeToFirstToken||e.totalLatency||e.usage)&&(0,t.jsx)(ez.default,{timeToFirstToken:e.timeToFirstToken,totalLatency:e.totalLatency,usage:e.usage})]})]})}),eR=({messages:e,isLoading:a,hasVariables:r,messagesEndRef:n})=>{let l=(0,t.jsx)(eE.LoadingOutlined,{style:{fontSize:24},spin:!0});return(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 pb-0",children:[0===e.length&&(0,t.jsx)(eB,{hasVariables:r}),e.map((e,a)=>(0,t.jsx)(eL,{message:e},a)),a&&(0,t.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,t.jsx)(eP.Spin,{indicator:l})}),(0,t.jsx)("div",{ref:n,style:{height:"1px"}})]})},eA=({extractedVariables:e,variables:a})=>{let r=e.filter(e=>!a[e]||""===a[e].trim());return 0===r.length?null:(0,t.jsx)("div",{className:"mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-yellow-600 text-sm",children:""}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm text-yellow-800 font-medium mb-1",children:"Please fill in all template variables above"}),(0,t.jsxs)("p",{className:"text-xs text-yellow-700",children:["Missing: ",r.map(e=>`{{${e}}}`).join(", ")]})]})]})})};var eF=e.i(132104);let{TextArea:eH}=ei.Input,eU=({inputMessage:e,isLoading:a,isDisabled:n,onInputChange:l,onSend:s,onKeyDown:o,onCancel:i})=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center flex-1 bg-white border border-gray-300 rounded-xl px-3 py-1 min-h-[44px]",children:[(0,t.jsx)(eH,{value:e,onChange:e=>l(e.target.value),onKeyDown:o,placeholder:"Type your message... (Shift+Enter for new line)",disabled:a,className:"flex-1",autoSize:{minRows:1,maxRows:4},style:{resize:"none",border:"none",boxShadow:"none",background:"transparent",padding:"4px 0",fontSize:"14px",lineHeight:"20px"}}),(0,t.jsx)(r.Button,{onClick:s,disabled:n,className:"flex-shrink-0 ml-2 !w-8 !h-8 !min-w-8 !p-0 !rounded-full !bg-blue-600 hover:!bg-blue-700 disabled:!bg-gray-300 !border-none !text-white disabled:!text-gray-500 !flex !items-center !justify-center",children:(0,t.jsx)(eF.ArrowUpOutlined,{style:{fontSize:"14px"}})})]}),a&&(0,t.jsx)(r.Button,{onClick:i,className:"bg-red-50 hover:bg-red-100 text-red-600 border-red-200",children:"Cancel"})]}),eW=({prompt:e,accessToken:n})=>{let{isLoading:s,messages:o,inputMessage:i,variables:c,variablesFilled:d,extractedVariables:m,allVariablesFilled:p,messagesEndRef:u,setInputMessage:x,handleSendMessage:h,handleCancelRequest:g,handleClearConversation:f,handleKeyDown:v,handleVariableChange:y}=((e,t)=>{let[r,n]=(0,a.useState)(!1),[s,o]=(0,a.useState)([]),[i,c]=(0,a.useState)(""),[d,m]=(0,a.useState)({}),[p,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),g=(0,a.useRef)(null),f=j(e),v=f.every(e=>d[e]&&""!==d[e].trim());(0,a.useEffect)(()=>{g.current&&setTimeout(()=>{g.current?.scrollIntoView({behavior:"smooth",block:"end"})},100)},[s]);let y=async()=>{let a;if(!t)return void J.default.fromBackend("Access token is required");if(f.length>0&&!v)return void J.default.fromBackend("Please fill in all template variables");if(!i.trim())return;!p&&f.length>0&&u(!0);let r={role:"user",content:i};o(e=>[...e,r]),c("");let m=new AbortController;h(m),n(!0);let x=Date.now();try{let r,n,c=N(e),p=(0,l.getProxyBaseUrl)(),u={dotprompt_content:c};0===s.length?u.prompt_variables=d:u.conversation_history=[...s.map(e=>({role:e.role,content:e.content})),{role:"user",content:i}];let h=await fetch(`${p}/prompts/test`,{method:"POST",headers:{[(0,l.getGlobalLitellmHeaderName)()]:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(u),signal:m.signal});if(!h.ok){let e=await h.text();throw Error(`HTTP error! status: ${h.status}, ${e}`)}if(!h.body)throw Error("No response body");let g=h.body.getReader(),f=new TextDecoder,v="";for(o(e=>[...e,{role:"assistant",content:""}]);;){let{done:e,value:t}=await g.read();if(e)break;for(let e of f.decode(t).split("\n"))if(e.startsWith("data: ")){let t=e.slice(6);if("[DONE]"===t)continue;try{let e=JSON.parse(t);!r&&e.model&&(r=e.model),e.usage&&(n=e.usage);let l=e.choices?.[0]?.delta?.content;l&&(a||(a=Date.now()-x),v+=l,o(e=>{let t=[...e];return t[t.length-1]={role:"assistant",content:v,model:r,timeToFirstToken:a},t}))}catch(e){console.error("Error parsing chunk:",e)}}}let y=Date.now()-x;o(e=>{let t=[...e];return t[t.length-1]={...t[t.length-1],totalLatency:y,usage:n},t})}catch(e){"AbortError"===e.name?console.log("Request was cancelled"):(console.error("Error testing prompt:",e),o(t=>{let a=t[t.length-1];return a&&"assistant"===a.role&&""===a.content?[...t.slice(0,-1),{role:"assistant",content:`Error: ${e.message}`}]:[...t,{role:"assistant",content:`Error: ${e.message}`}]}))}finally{n(!1),h(null)}};return{isLoading:r,messages:s,inputMessage:i,variables:d,variablesFilled:p,extractedVariables:f,allVariablesFilled:v,messagesEndRef:g,setInputMessage:c,handleSendMessage:y,handleCancelRequest:()=>{x&&(x.abort(),h(null),n(!1),J.default.info("Request cancelled"))},handleClearConversation:()=>{o([]),u(!1),J.default.success("Chat history cleared.")},handleKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y())},handleVariableChange:(e,t)=>{m({...d,[e]:t})}}})(e,n);return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[!d&&(0,t.jsx)(eO,{extractedVariables:m,variables:c,onVariableChange:y}),o.length>0&&(0,t.jsx)("div",{className:"p-3 border-b border-gray-200 bg-white flex justify-end",children:(0,t.jsx)(r.Button,{onClick:f,className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:e_.ClearOutlined,children:"Clear Chat"})}),(0,t.jsx)(eR,{messages:o,isLoading:s,hasVariables:m.length>0,messagesEndRef:u}),(0,t.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[(0,t.jsx)(eA,{extractedVariables:m,variables:c}),(0,t.jsx)(eU,{inputMessage:i,isLoading:s,isDisabled:s||!i.trim()||m.length>0&&!p,onInputChange:x,onSend:h,onKeyDown:v,onCancel:g})]})]})},eJ=({visible:e,promptName:a,isSaving:l,onNameChange:s,onPublish:o,onCancel:i})=>(0,t.jsx)(n.Modal,{title:"Publish Prompt",open:e,onCancel:i,footer:[(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(r.Button,{variant:"secondary",onClick:i,children:"Cancel"}),(0,t.jsx)(r.Button,{onClick:o,loading:l,children:"Publish"})]},"footer")],children:(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsx)(E.Text,{className:"mb-2",children:"Name"}),(0,t.jsx)(ei.Input,{value:a,onChange:e=>s(e.target.value),placeholder:"Enter prompt name",onPressEnter:o,autoFocus:!0}),(0,t.jsx)(E.Text,{className:"text-gray-500 text-xs mt-2",children:"Published prompts can be used in API calls and are versioned for easy tracking."})]})}),eV=({prompt:e})=>{let a=N(e);return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Generated .prompt file"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"This is the dotprompt format that will be saved to the database"})]}),(0,t.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 overflow-auto",children:(0,t.jsx)("pre",{className:"text-sm text-gray-900 font-mono whitespace-pre-wrap",children:a})})]})};var eK=e.i(608856),eq=e.i(573421),eX=e.i(981339);let{Text:eG}=e.i(898586).Typography,eY=({isOpen:e,onClose:r,accessToken:n,promptId:s,activeVersionId:o,onSelectVersion:i})=>{let[c,d]=(0,a.useState)([]),[m,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e&&n&&s&&u()},[e,n,s]);let u=async()=>{p(!0);try{let e=s.includes(".v")?s.split(".v")[0]:s,t=await (0,l.getPromptVersions)(n,e);d(t.prompts)}catch(e){console.error("Error fetching prompt versions:",e)}finally{p(!1)}},x=e=>{if(e.version)return`v${e.version}`;let t=e.litellm_params?.prompt_id||e.prompt_id;return t.includes(".v")?`v${t.split(".v")[1]}`:t.includes("_v")?`v${t.split("_v")[1]}`:"v1"};return(0,t.jsx)(eK.Drawer,{title:"Version History",placement:"right",onClose:r,open:e,width:400,mask:!1,maskClosable:!1,children:m?(0,t.jsx)(eX.Skeleton,{active:!0,paragraph:{rows:4}}):0===c.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No version history available."}):(0,t.jsx)(eq.List,{dataSource:c,renderItem:(e,a)=>{var r;let n=e.version||parseInt(x(e).replace("v","")),l=null;o&&(o.includes(".v")?l=parseInt(o.split(".v")[1]):o.includes("_v")&&(l=parseInt(o.split("_v")[1])));let s=l?n===l:0===a;return(0,t.jsxs)("div",{className:`mb-4 p-4 rounded-lg border cursor-pointer transition-all hover:shadow-md ${s?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300"}`,onClick:()=>i?.(e),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ej.Tag,{className:"m-0",children:x(e)}),0===a&&(0,t.jsx)(ej.Tag,{color:"blue",className:"m-0",children:"Latest"})]}),s&&(0,t.jsx)(ej.Tag,{color:"green",className:"m-0",children:"Active"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(eG,{className:"text-sm text-gray-600 font-medium",children:(r=e.created_at)?new Date(r).toLocaleString():"-"}),(0,t.jsx)(eG,{type:"secondary",className:"text-xs",children:e.prompt_info?.prompt_type==="db"?"Saved to Database":"Config Prompt"})]})]},`${e.prompt_id}-v${e.version||n}`)}})})},eZ=({onClose:e,onSuccess:r,accessToken:n,initialPromptData:s})=>{let[o,i]=(0,a.useState)((()=>{if(s)try{return $(s)}catch(e){console.error("Error parsing existing prompt:",e),J.default.fromBackend("Failed to parse prompt data")}return{name:"New prompt",model:"gpt-4o",config:{temperature:1,max_tokens:1e3},tools:[],developerMessage:"",messages:[{role:"user",content:"Enter task specifics. Use {{template_variables}} for dynamic inputs"}]}})()),[c,d]=(0,a.useState)(!!s),[m,p]=(0,a.useState)(!1),[u,x]=(0,a.useState)((()=>{if(!s?.prompt_spec)return;let e=s.prompt_spec.prompt_id,t=s.prompt_spec.version||s.prompt_spec.litellm_params?.prompt_id;return"number"==typeof t?`${e}.v${t}`:"string"==typeof t&&(t.includes(".v")||t.includes("_v"))?t:e})()),[h,g]=(0,a.useState)(!1),[f,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),[j,w]=(0,a.useState)(!1),[C,k]=(0,a.useState)("pretty"),S=e=>{void 0!==e?b(e):b(null),g(!0)},T=async()=>{if(!n)return void J.default.fromBackend("Access token is required");if(!o.name||""===o.name.trim())return void J.default.fromBackend("Please enter a valid prompt name");w(!0);try{let t=o.name.replace(/[^a-zA-Z0-9_-]/g,"_").toLowerCase(),a=N(o),i={prompt_id:t,litellm_params:{prompt_integration:"dotprompt",prompt_id:t,dotprompt_content:a},prompt_info:{prompt_type:"db"}};c&&s?.prompt_spec?.prompt_id?(await (0,l.updatePromptCall)(n,s.prompt_spec.prompt_id,i),J.default.success("Prompt updated successfully!")):(await (0,l.createPromptCall)(n,i),J.default.success("Prompt created successfully!")),r(),e()}catch(e){console.error("Error saving prompt:",e),J.default.fromBackend(c?"Failed to update prompt":"Failed to save prompt")}finally{w(!1),v(!1)}},_=u&&u.includes(".v")?`v${u.split(".v")[1]}`:null;return(0,t.jsxs)("div",{className:"flex h-full bg-white",children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)(eu,{promptName:o.name,onNameChange:e=>i({...o,name:e}),onBack:e,onSave:()=>{o.name&&""!==o.name.trim()&&"New prompt"!==o.name?T():v(!0)},isSaving:j,editMode:c,onShowHistory:()=>p(!0),version:_,promptModel:o.model,promptVariables:(()=>{let e,t={},a=[o.developerMessage,...o.messages.map(e=>e.content)].join(" "),r=/\{\{(\w+)\}\}/g;for(;null!==(e=r.exec(a));){let a=e[1];t[a]||(t[a]=`example_${a}`)}return t})(),accessToken:n}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsxs)("div",{className:"w-1/2 overflow-y-auto bg-white border-r border-gray-200 flex-shrink-0",children:[(0,t.jsxs)("div",{className:"border-b border-gray-200 bg-white px-6 py-4 flex items-center gap-3",children:[(0,t.jsx)(eg,{model:o.model,temperature:o.config.temperature,maxTokens:o.config.max_tokens,accessToken:n,onModelChange:e=>i({...o,model:e}),onTemperatureChange:e=>i({...o,config:{...o.config,temperature:e}}),onMaxTokensChange:e=>i({...o,config:{...o.config,max_tokens:e}})}),(0,t.jsxs)("div",{className:"ml-auto inline-flex items-center bg-gray-200 rounded-full p-0.5",children:[(0,t.jsx)("button",{className:`px-3 py-1 text-xs font-medium rounded-full transition-colors ${"pretty"===C?"bg-white text-gray-900 shadow-sm":"text-gray-600"}`,onClick:()=>k("pretty"),children:"PRETTY"}),(0,t.jsx)("button",{className:`px-3 py-1 text-xs font-medium rounded-full transition-colors ${"dotprompt"===C?"bg-white text-gray-900 shadow-sm":"text-gray-600"}`,onClick:()=>k("dotprompt"),children:"DOTPROMPT"})]})]}),"pretty"===C?(0,t.jsxs)("div",{className:"p-6 space-y-4 pb-20",children:[(0,t.jsx)(ey,{tools:o.tools,onAddTool:()=>S(),onEditTool:S,onRemoveTool:e=>{i({...o,tools:o.tools.filter((t,a)=>a!==e)})}}),(0,t.jsx)(eC,{value:o.developerMessage,onChange:e=>i({...o,developerMessage:e})}),(0,t.jsx)(eT,{messages:o.messages,onAddMessage:()=>{i({...o,messages:[...o.messages,{role:"user",content:""}]})},onUpdateMessage:(e,t,a)=>{let r=[...o.messages];r[e][t]=a,i({...o,messages:r})},onRemoveMessage:e=>{o.messages.length>1&&i({...o,messages:o.messages.filter((t,a)=>a!==e)})},onMoveMessage:(e,t)=>{let a=[...o.messages],[r]=a.splice(e,1);a.splice(t,0,r),i({...o,messages:a})}})]}):(0,t.jsx)(eV,{prompt:o})]}),(0,t.jsx)("div",{className:"w-1/2 flex-shrink-0",children:(0,t.jsx)(eW,{prompt:o,accessToken:n})})]})]}),(0,t.jsx)(eJ,{visible:f,promptName:o.name,isSaving:j,onNameChange:e=>i({...o,name:e}),onPublish:T,onCancel:()=>v(!1)}),h&&(0,t.jsx)(eo,{visible:h,initialJson:null!==y?o.tools[y].json:"",onSave:e=>{try{let t=JSON.parse(e),a={name:t.function?.name||"Unnamed Tool",description:t.function?.description||"",json:e};if(null!==y){let e=[...o.tools];e[y]=a,i({...o,tools:e})}else i({...o,tools:[...o.tools,a]});g(!1),b(null)}catch(e){J.default.fromBackend("Invalid JSON format")}},onClose:()=>{g(!1),b(null)}}),(0,t.jsx)(eY,{isOpen:m,onClose:()=>p(!1),accessToken:n,promptId:s?.prompt_spec?.prompt_id||o.name,activeVersionId:u,onSelectVersion:e=>{try{let t=$({prompt_spec:e});i(t);let a=e.version||1;x(`${e.prompt_id}.v${a}`)}catch(e){console.error("Error loading version:",e),J.default.fromBackend("Failed to load prompt version")}}})]})};var eQ=e.i(708347);e.s(["default",0,({accessToken:e,userRole:s})=>{let[o,i]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null),[u,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[f,v]=(0,a.useState)(null),[y,b]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),w=!!s&&(0,eQ.isAdminRole)(s),$=async()=>{if(e){d(!0);try{let t=await (0,l.getPromptsList)(e);console.log(`prompts: ${JSON.stringify(t)}`),i(t.prompts)}catch(e){console.error("Error fetching prompts:",e)}finally{d(!1)}}};(0,a.useEffect)(()=>{$()},[e]);let C=()=>{$(),g(!1),v(null),p(null)},k=async()=>{if(j&&e){b(!0);try{await (0,l.deletePromptCall)(e,j.id),J.default.success(`Prompt "${j.name}" deleted successfully`),$()}catch(e){console.error("Error deleting prompt:",e),J.default.fromBackend("Failed to delete prompt")}finally{b(!1),N(null)}}};return(0,t.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[h?(0,t.jsx)(eZ,{onClose:()=>{g(!1),v(null)},onSuccess:C,accessToken:e,initialPromptData:f}):m?(0,t.jsx)(Z,{promptId:m,onClose:()=>p(null),accessToken:e,isAdmin:w,onDelete:$,onEdit:e=>{v(e),g(!0)}}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Button,{onClick:()=>{m&&p(null),v(null),g(!0)},disabled:!e,children:"+ Add New Prompt"}),(0,t.jsx)(r.Button,{onClick:()=>{m&&p(null),x(!0)},disabled:!e,variant:"secondary",children:"Upload .prompt File"})]})}),(0,t.jsx)(T,{promptsList:o,isLoading:c,onPromptClick:e=>{p(e)},onDeleteClick:(e,t)=>{N({id:e,name:t})},accessToken:e,isAdmin:w})]}),(0,t.jsx)(el,{visible:u,onClose:()=>{x(!1)},accessToken:e,onSuccess:C}),j&&(0,t.jsxs)(n.Modal,{title:"Delete Prompt",open:null!==j,onOk:k,onCancel:()=>{N(null)},confirmLoading:y,okText:"Delete",okButtonProps:{danger:!0},children:[(0,t.jsxs)("p",{children:["Are you sure you want to delete prompt: ",j.name," ?"]}),(0,t.jsx)("p",{children:"This action cannot be undone."})]})]})}],191403)}]);