(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,207082,e=>{"use strict";var t=e.i(619273),s=e.i(266027),l=e.i(243652),a=e.i(764205),r=e.i(135214);let i=(0,l.createQueryKeys)("keys"),n=async(e,t,s,l={})=>{try{let r=(0,a.getProxyBaseUrl)(),i=new URLSearchParams(Object.entries({team_id:l.teamID,project_id:l.projectID,organization_id:l.organizationID,key_alias:l.selectedKeyAlias,key_hash:l.keyHash,user_id:l.userID,page:t,size:s,sort_by:l.sortBy,sort_order:l.sortOrder,expand:l.expand,status:l.status,return_full_object:"true",include_team_keys:"true",include_created_by_keys:"true"}).filter(([,e])=>null!=e).map(([e,t])=>[e,String(t)])),n=`${r?`${r}/key/list`:"/key/list"}?${i}`,o=await fetch(n,{method:"GET",headers:{[(0,a.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!o.ok){let e=await o.json(),t=(0,a.deriveErrorMessage)(e);throw(0,a.handleError)(t),Error(t)}let d=await o.json();return console.log("/key/list API Response:",d),d}catch(e){throw console.error("Failed to list keys:",e),e}},o=(0,l.createQueryKeys)("deletedKeys");e.s(["keyKeys",0,i,"useDeletedKeys",0,(e,l,a={})=>{let{accessToken:i}=(0,r.default)();return(0,s.useQuery)({queryKey:o.list({page:e,limit:l,...a}),queryFn:async()=>await n(i,e,l,{...a,status:"deleted"}),enabled:!!i,staleTime:3e4,placeholderData:t.keepPreviousData})},"useKeys",0,(e,l,a={})=>{let{accessToken:o}=(0,r.default)();return(0,s.useQuery)({queryKey:i.list({page:e,limit:l,...a}),queryFn:async()=>await n(o,e,l,a),enabled:!!o,staleTime:3e4,placeholderData:t.keepPreviousData})}])},510674,392110,939510,e=>{"use strict";var t=e.i(266027),s=e.i(243652),l=e.i(764205),a=e.i(708347),r=e.i(135214);let i=(0,s.createQueryKeys)("projects"),n=async e=>{let t=(0,l.getProxyBaseUrl)(),s=`${t}/project/list`,a=await fetch(s,{method:"GET",headers:{[(0,l.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok){let e=await a.json(),t=(0,l.deriveErrorMessage)(e);throw(0,l.handleError)(t),Error(t)}return a.json()};e.s(["projectKeys",0,i,"useProjects",0,()=>{let{accessToken:e,userRole:s}=(0,r.default)();return(0,t.useQuery)({queryKey:i.list({}),queryFn:async()=>n(e),enabled:!!e&&a.all_admin_roles.includes(s||"")})}],510674);var o=e.i(843476),d=e.i(271645),c=e.i(199133),u=e.i(592968),m=e.i(312361),p=e.i(790848),h=e.i(827252),g=e.i(779241);let{Option:x}=c.Select;e.s(["default",0,({form:e,autoRotationEnabled:t,onAutoRotationChange:s,rotationInterval:l,onRotationIntervalChange:a,isCreateMode:r=!1})=>{let i=l&&!["7d","30d","90d","180d","365d"].includes(l),[n,y]=(0,d.useState)(i),[f,_]=(0,d.useState)(i?l:""),[j,b]=(0,d.useState)(e?.getFieldValue?.("duration")||"");return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Key Expiry Settings"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Expire Key"}),(0,o.jsx)(u.Tooltip,{title:r?"Set when this key should expire. Format: 30s (seconds), 30m (minutes), 30h (hours), 30d (days). Leave empty to never expire.":"Set when this key should expire. Format: 30s (seconds), 30m (minutes), 30h (hours), 30d (days). Use -1 to never expire.",children:(0,o.jsx)(h.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,o.jsx)(g.TextInput,{name:"duration",placeholder:r?"e.g., 30d or leave empty to never expire":"e.g., 30d or -1 to never expire",className:"w-full",value:j,onValueChange:t=>{b(t),e&&"function"==typeof e.setFieldValue?e.setFieldValue("duration",t):e&&"function"==typeof e.setFieldsValue&&e.setFieldsValue({duration:t})}})]})]}),(0,o.jsx)(m.Divider,{}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Auto-Rotation Settings"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Enable Auto-Rotation"}),(0,o.jsx)(u.Tooltip,{title:"Key will automatically regenerate at the specified interval for enhanced security.",children:(0,o.jsx)(h.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,o.jsx)(p.Switch,{checked:t,onChange:s,size:"default",className:t?"":"bg-gray-400"})]}),t&&(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[(0,o.jsx)("span",{children:"Rotation Interval"}),(0,o.jsx)(u.Tooltip,{title:"How often the key should be automatically rotated. Choose the interval that best fits your security requirements.",children:(0,o.jsx)(h.InfoCircleOutlined,{className:"text-gray-400 cursor-help text-xs"})})]}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)(c.Select,{value:n?"custom":l,onChange:e=>{"custom"===e?y(!0):(y(!1),_(""),a(e))},className:"w-full",placeholder:"Select interval",children:[(0,o.jsx)(x,{value:"7d",children:"7 days"}),(0,o.jsx)(x,{value:"30d",children:"30 days"}),(0,o.jsx)(x,{value:"90d",children:"90 days"}),(0,o.jsx)(x,{value:"180d",children:"180 days"}),(0,o.jsx)(x,{value:"365d",children:"365 days"}),(0,o.jsx)(x,{value:"custom",children:"Custom interval"})]}),n&&(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)(g.TextInput,{value:f,onChange:e=>{let t=e.target.value;_(t),a(t)},placeholder:"e.g., 1s, 5m, 2h, 14d"}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"Supported formats: seconds (s), minutes (m), hours (h), days (d)"})]})]})]})]}),t&&(0,o.jsx)("div",{className:"bg-blue-50 p-3 rounded-md text-sm text-blue-700",children:"When rotation occurs, you'll receive a notification with the new key. The old key will be deactivated after a brief grace period."})]})]})}],392110);var y=e.i(808613);let{Option:f}=c.Select;e.s(["default",0,({type:e,name:t,showDetailedDescriptions:s=!0,className:l="",initialValue:a=null,form:r,onChange:i})=>{let n=e.toUpperCase(),d=e.toLowerCase(),m=`Select 'guaranteed_throughput' to prevent overallocating ${n} limit when the key belongs to a Team with specific ${n} limits.`;return(0,o.jsx)(y.Form.Item,{label:(0,o.jsxs)("span",{children:[n," Rate Limit Type"," ",(0,o.jsx)(u.Tooltip,{title:m,children:(0,o.jsx)(h.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:t,initialValue:a,className:l,children:(0,o.jsx)(c.Select,{defaultValue:s?"default":void 0,placeholder:"Select rate limit type",style:{width:"100%"},optionLabelProp:s?"label":void 0,onChange:e=>{r&&r.setFieldValue(t,e),i&&i(e)},children:s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f,{value:"best_effort_throughput",label:"Default",children:(0,o.jsxs)("div",{style:{padding:"4px 0"},children:[(0,o.jsx)("div",{style:{fontWeight:500},children:"Default"}),(0,o.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["Best effort throughput - no error if we're overallocating ",d," (Team/Key Limits checked at runtime)."]})]})}),(0,o.jsx)(f,{value:"guaranteed_throughput",label:"Guaranteed throughput",children:(0,o.jsxs)("div",{style:{padding:"4px 0"},children:[(0,o.jsx)("div",{style:{fontWeight:500},children:"Guaranteed throughput"}),(0,o.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["Guaranteed throughput - raise an error if we're overallocating ",d," (also checks model-specific limits)"]})]})}),(0,o.jsx)(f,{value:"dynamic",label:"Dynamic",children:(0,o.jsxs)("div",{style:{padding:"4px 0"},children:[(0,o.jsx)("div",{style:{fontWeight:500},children:"Dynamic"}),(0,o.jsxs)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:["If the key has a set ",n," (e.g. 2 ",n,") and there are no 429 errors, it can dynamically exceed the limit when the model being called is not erroring."]})]})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f,{value:"best_effort_throughput",children:"Best effort throughput"}),(0,o.jsx)(f,{value:"guaranteed_throughput",children:"Guaranteed throughput"}),(0,o.jsx)(f,{value:"dynamic",children:"Dynamic"})]})})})}],939510)},460285,575260,e=>{"use strict";var t=e.i(843476),s=e.i(271645),l=e.i(404206),a=e.i(723731),r=e.i(653824),i=e.i(881073),n=e.i(197647),o=e.i(764205),d=e.i(158392),c=e.i(419470),u=e.i(689020);let m=(0,s.forwardRef)(({accessToken:e,value:m,onChange:p,modelData:h},g)=>{let[x,y]=(0,s.useState)({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),[f,_]=(0,s.useState)([]),[j,b]=(0,s.useState)([]),[v,w]=(0,s.useState)([]),[k,S]=(0,s.useState)([]),[C,N]=(0,s.useState)({}),[T,I]=(0,s.useState)({}),A=(0,s.useRef)(!1),F=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=m?.router_settings?JSON.stringify({routing_strategy:m.router_settings.routing_strategy,fallbacks:m.router_settings.fallbacks,enable_tag_filtering:m.router_settings.enable_tag_filtering}):null;if(A.current&&e===F.current){A.current=!1;return}if(A.current&&e!==F.current&&(A.current=!1),e!==F.current)if(F.current=e,m?.router_settings){let e=m.router_settings,{fallbacks:t,...s}=e;y({routerSettings:s,selectedStrategy:e.routing_strategy||null,enableTagFiltering:e.enable_tag_filtering??!1});let l=e.fallbacks||[];_(l),b(l&&0!==l.length?l.map((e,t)=>{let[s,l]=Object.entries(e)[0];return{id:(t+1).toString(),primaryModel:s||null,fallbackModels:l||[]}}):[{id:"1",primaryModel:null,fallbackModels:[]}])}else y({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),_([]),b([{id:"1",primaryModel:null,fallbackModels:[]}])},[m]),(0,s.useEffect)(()=>{e&&(0,o.getRouterSettingsCall)(e).then(e=>{if(e.fields){let t={};e.fields.forEach(e=>{t[e.field_name]={ui_field_name:e.ui_field_name,field_description:e.field_description,options:e.options,link:e.link}}),N(t);let s=e.fields.find(e=>"routing_strategy"===e.field_name);s?.options&&S(s.options),e.routing_strategy_descriptions&&I(e.routing_strategy_descriptions)}})},[e]),(0,s.useEffect)(()=>{e&&(async()=>{try{let t=await (0,u.fetchAvailableModels)(e);w(t)}catch(e){console.error("Error fetching model info for fallbacks:",e)}})()},[e]);let P=()=>{let e=new Set(["allowed_fails","cooldown_time","num_retries","timeout","retry_after"]),t=new Set(["model_group_alias","retry_policy"]),s=Object.fromEntries(Object.entries({...x.routerSettings,enable_tag_filtering:x.enableTagFiltering,routing_strategy:x.selectedStrategy,fallbacks:f.length>0?f:null}).map(([s,l])=>{if("routing_strategy_args"!==s&&"routing_strategy"!==s&&"enable_tag_filtering"!==s&&"fallbacks"!==s){let a=document.querySelector(`input[name="${s}"]`);if(a&&void 0!==a.value&&""!==a.value){let r=((s,l,a)=>{if(null==l)return a;let r=String(l).trim();if(""===r||"null"===r.toLowerCase())return null;if(e.has(s)){let e=Number(r);return Number.isNaN(e)?a:e}if(t.has(s)){if(""===r)return null;try{return JSON.parse(r)}catch{return a}}return"true"===r.toLowerCase()||"false"!==r.toLowerCase()&&r})(s,a.value,l);return[s,r]}}else if("routing_strategy"===s)return[s,x.selectedStrategy];else if("enable_tag_filtering"===s)return[s,x.enableTagFiltering];else if("fallbacks"===s)return[s,f.length>0?f:null];else if("routing_strategy_args"===s&&"latency-based-routing"===x.selectedStrategy){let e=document.querySelector('input[name="lowest_latency_buffer"]'),t=document.querySelector('input[name="ttl"]'),s={};return e?.value&&(s.lowest_latency_buffer=Number(e.value)),t?.value&&(s.ttl=Number(t.value)),["routing_strategy_args",Object.keys(s).length>0?s:null]}return[s,l]}).filter(e=>null!=e)),l=(e,t=!1)=>null==e||"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length||t&&("number"!=typeof e||Number.isNaN(e))?null:e;return{routing_strategy:l(s.routing_strategy),allowed_fails:l(s.allowed_fails,!0),cooldown_time:l(s.cooldown_time,!0),num_retries:l(s.num_retries,!0),timeout:l(s.timeout,!0),retry_after:l(s.retry_after,!0),fallbacks:f.length>0?f:null,context_window_fallbacks:l(s.context_window_fallbacks),retry_policy:l(s.retry_policy),model_group_alias:l(s.model_group_alias),enable_tag_filtering:x.enableTagFiltering,routing_strategy_args:l(s.routing_strategy_args)}};(0,s.useEffect)(()=>{if(!p)return;let e=setTimeout(()=>{A.current=!0,p({router_settings:P()})},100);return()=>clearTimeout(e)},[x,f]);let L=Array.from(new Set(v.map(e=>e.model_group))).sort();return((0,s.useImperativeHandle)(g,()=>({getValue:()=>({router_settings:P()})})),e)?(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)(r.TabGroup,{className:"w-full",children:[(0,t.jsxs)(i.TabList,{variant:"line",defaultValue:"1",className:"px-8 pt-4",children:[(0,t.jsx)(n.Tab,{value:"1",children:"Loadbalancing"}),(0,t.jsx)(n.Tab,{value:"2",children:"Fallbacks"})]}),(0,t.jsxs)(a.TabPanels,{className:"px-8 py-6",children:[(0,t.jsx)(l.TabPanel,{children:(0,t.jsx)(d.default,{value:x,onChange:y,routerFieldsMetadata:C,availableRoutingStrategies:k,routingStrategyDescriptions:T})}),(0,t.jsx)(l.TabPanel,{children:(0,t.jsx)(c.FallbackSelectionForm,{groups:j,onGroupsChange:e=>{b(e),_(e.filter(e=>e.primaryModel&&e.fallbackModels.length>0).map(e=>({[e.primaryModel]:e.fallbackModels})))},availableModels:L,maxGroups:5})})]})]})}):null});m.displayName="RouterSettingsAccordion",e.s(["default",0,m],460285);var p=e.i(199133),h=e.i(482725),g=e.i(56456);e.s(["default",0,({projects:e,value:s,onChange:l,disabled:a,loading:r,teamId:i})=>{let n=i?e?.filter(e=>e.team_id===i):e;return(0,t.jsx)(p.Select,{showSearch:!0,placeholder:"Search or select a project",value:s,onChange:l,disabled:a,loading:r,allowClear:!0,notFoundContent:r?(0,t.jsx)(h.Spin,{indicator:(0,t.jsx)(g.LoadingOutlined,{spin:!0}),size:"small"}):void 0,filterOption:(e,t)=>{if(!t)return!1;let s=n?.find(e=>e.project_id===t.key);if(!s)return!1;let l=e.toLowerCase().trim(),a=(s.project_alias||"").toLowerCase(),r=(s.project_id||"").toLowerCase();return a.includes(l)||r.includes(l)},optionFilterProp:"children",children:!r&&n?.map(e=>(0,t.jsxs)(p.Select.Option,{value:e.project_id,children:[(0,t.jsx)("span",{className:"font-medium",children:e.project_alias||e.project_id})," ",(0,t.jsxs)("span",{className:"text-gray-500",children:["(",e.project_id,")"]})]},e.project_id))})}],575260)},364769,e=>{"use strict";var t=e.i(843476),s=e.i(271645),l=e.i(237016),a=e.i(464571),r=e.i(998573);e.s(["default",0,({apiKey:e})=>{let[i,n]=(0,s.useState)(!1);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"mb-2",children:["Please save this secret key somewhere safe and accessible. For security reasons,"," ",(0,t.jsx)("b",{children:"you will not be able to view it again"})," through your LiteLLM account. If you lose this secret key, you will need to generate a new one."]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Virtual Key:"}),(0,t.jsx)("div",{style:{background:"#f8f8f8",padding:"10px",borderRadius:"5px",marginBottom:"10px"},children:(0,t.jsx)("pre",{style:{wordWrap:"break-word",whiteSpace:"normal",margin:0},children:e})}),(0,t.jsx)(l.CopyToClipboard,{text:e,onCopy:()=>{n(!0),r.message.success("Key copied to clipboard"),setTimeout(()=>n(!1),2e3)},children:(0,t.jsx)(a.Button,{type:"primary",style:{marginTop:12},children:i?"Copied!":"Copy Virtual Key"})})]})}])},702597,e=>{"use strict";var t=e.i(843476),s=e.i(207082),l=e.i(510674),a=e.i(292639),r=e.i(135214),i=e.i(500330),n=e.i(827252),o=e.i(912598),d=e.i(677667),c=e.i(130643),u=e.i(898667),m=e.i(994388),p=e.i(309426),h=e.i(350967),g=e.i(599724),x=e.i(779241),y=e.i(629569),f=e.i(464571),_=e.i(808613),j=e.i(311451),b=e.i(212931),v=e.i(91739),w=e.i(199133),k=e.i(790848),S=e.i(262218),C=e.i(592968),N=e.i(374009),T=e.i(271645),I=e.i(708347),A=e.i(552130),F=e.i(557662),P=e.i(9314),L=e.i(860585),O=e.i(82946),M=e.i(392110),E=e.i(533882),V=e.i(844565),R=e.i(651904),K=e.i(939510),U=e.i(460285),D=e.i(663435),B=e.i(575260),q=e.i(371455),$=e.i(355619),G=e.i(75921),H=e.i(390605),W=e.i(727749),J=e.i(764205),z=e.i(364769),Q=e.i(435451),Y=e.i(916940);let{Option:X}=w.Select,Z=async(e,t,s,l)=>{try{if(null===e||null===t)return[];if(null!==s){let a=(await (0,J.modelAvailableCall)(s,e,t,!0,l,!0)).data.map(e=>e.id);return console.log("available_model_names:",a),a}return[]}catch(e){return console.error("Error fetching user models:",e),[]}},ee=async(e,t,s,l)=>{try{if(null===e||null===t)return;if(null!==s){let a=(await (0,J.modelAvailableCall)(s,e,t)).data.map(e=>e.id);console.log("available_model_names:",a),l(a)}}catch(e){console.error("Error fetching user models:",e)}};e.s(["default",0,({team:e,teams:et,data:es,addKey:el})=>{let{accessToken:ea,userId:er,userRole:ei,premiumUser:en}=(0,r.default)(),{data:eo,isLoading:ed}=(0,l.useProjects)(),{data:ec}=(0,a.useUISettings)(),eu=!!ec?.values?.enable_projects_ui,em=(0,o.useQueryClient)(),[ep]=_.Form.useForm(),[eh,eg]=(0,T.useState)(!1),[ex,ey]=(0,T.useState)(null),[ef,e_]=(0,T.useState)(null),[ej,eb]=(0,T.useState)([]),[ev,ew]=(0,T.useState)([]),[ek,eS]=(0,T.useState)("you"),[eC,eN]=(0,T.useState)((e=>{let t=[];if(console.log("data:",JSON.stringify(e)),e)for(let s of e)s.metadata&&s.metadata.tags&&t.push(...s.metadata.tags);let s=Array.from(new Set(t)).map(e=>({value:e,label:e}));return console.log("uniqueTags:",s),s})(es)),[eT,eI]=(0,T.useState)([]),[eA,eF]=(0,T.useState)([]),[eP,eL]=(0,T.useState)([]),[eO,eM]=(0,T.useState)([]),[eE,eV]=(0,T.useState)(e),[eR,eK]=(0,T.useState)(null),[eU,eD]=(0,T.useState)(!1),[eB,eq]=(0,T.useState)(null),[e$,eG]=(0,T.useState)({}),[eH,eW]=(0,T.useState)([]),[eJ,ez]=(0,T.useState)(!1),[eQ,eY]=(0,T.useState)([]),[eX,eZ]=(0,T.useState)([]),[e0,e4]=(0,T.useState)("llm_api"),[e1,e2]=(0,T.useState)({}),[e3,e5]=(0,T.useState)(!1),[e6,e7]=(0,T.useState)("30d"),[e8,e9]=(0,T.useState)(null),[te,tt]=(0,T.useState)(0),[ts,tl]=(0,T.useState)([]),[ta,tr]=(0,T.useState)(null),ti=()=>{eg(!1),ep.resetFields(),eM([]),eZ([]),e4("llm_api"),e2({}),e5(!1),e7("30d"),e9(null),tt(e=>e+1),tr(null),eK(null)},tn=()=>{eg(!1),ey(null),eV(null),ep.resetFields(),eM([]),eZ([]),e4("llm_api"),e2({}),e5(!1),e7("30d"),e9(null),tt(e=>e+1),tr(null),eK(null)};(0,T.useEffect)(()=>{er&&ei&&ea&&ee(er,ei,ea,eb)},[ea,er,ei]),(0,T.useEffect)(()=>{ea&&(0,J.getAgentsList)(ea).then(e=>tl(e?.agents||[])).catch(()=>tl([]))},[ea]),(0,T.useEffect)(()=>{let e=async()=>{try{let e=(await (0,J.getPoliciesList)(ea)).policies.map(e=>e.policy_name);eF(e)}catch(e){console.error("Failed to fetch policies:",e)}},t=async()=>{try{let e=await (0,J.getPromptsList)(ea);eL(e.prompts.map(e=>e.prompt_id))}catch(e){console.error("Failed to fetch prompts:",e)}};(async()=>{try{let e=(await (0,J.getGuardrailsList)(ea)).guardrails.map(e=>e.guardrail_name);eI(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})(),e(),t()},[ea]),(0,T.useEffect)(()=>{(async()=>{try{if(ea){let e=sessionStorage.getItem("possibleUserRoles");if(e)eG(JSON.parse(e));else{let e=await (0,J.getPossibleUserRoles)(ea);sessionStorage.setItem("possibleUserRoles",JSON.stringify(e)),eG(e)}}}catch(e){console.error("Error fetching possible user roles:",e)}})()},[ea]);let to=ev.includes("no-default-models")&&!eE,td=async e=>{try{let t,l=e?.key_alias??"",a=e?.team_id??null;if((es?.filter(e=>e.team_id===a).map(e=>e.key_alias)??[]).includes(l))throw Error(`Key alias ${l} already exists for team with ID ${a}, please provide another key alias`);if(W.default.info("Making API Call"),eg(!0),"you"===ek)e.user_id=er;else if("agent"===ek){if(!ta)return void W.default.fromBackend("Please select an agent");e.agent_id=ta}let r={};try{r=JSON.parse(e.metadata||"{}")}catch(e){console.error("Error parsing metadata:",e)}if("service_account"===ek&&(r.service_account_id=e.key_alias),eO.length>0&&(r={...r,logging:eO.filter(e=>e.callback_name)}),eX.length>0){let e=(0,F.mapDisplayToInternalNames)(eX);r={...r,litellm_disabled_callbacks:e}}if(e3&&(e.auto_rotate=!0,e.rotation_interval=e6),e.duration&&""!==e.duration.trim()||(e.duration=null),e.metadata=JSON.stringify(r),e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission={vector_stores:e.allowed_vector_store_ids},delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0)){e.object_permission||(e.object_permission={});let{servers:t,accessGroups:s}=e.allowed_mcp_servers_and_groups;t&&t.length>0&&(e.object_permission.mcp_servers=t),s&&s.length>0&&(e.object_permission.mcp_access_groups=s),delete e.allowed_mcp_servers_and_groups}let i=e.mcp_tool_permissions||{};if(Object.keys(i).length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_tool_permissions=i),delete e.mcp_tool_permissions,e.allowed_mcp_access_groups&&e.allowed_mcp_access_groups.length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_access_groups=e.allowed_mcp_access_groups,delete e.allowed_mcp_access_groups),e.allowed_agents_and_groups&&(e.allowed_agents_and_groups.agents?.length>0||e.allowed_agents_and_groups.accessGroups?.length>0)){e.object_permission||(e.object_permission={});let{agents:t,accessGroups:s}=e.allowed_agents_and_groups;t&&t.length>0&&(e.object_permission.agents=t),s&&s.length>0&&(e.object_permission.agent_access_groups=s),delete e.allowed_agents_and_groups}Object.keys(e1).length>0&&(e.aliases=JSON.stringify(e1)),e8?.router_settings&&Object.values(e8.router_settings).some(e=>null!=e&&""!==e)&&(e.router_settings=e8.router_settings),t="service_account"===ek?await (0,J.keyCreateServiceAccountCall)(ea,e):await (0,J.keyCreateCall)(ea,er,e),console.log("key create Response:",t),el(t),em.invalidateQueries({queryKey:s.keyKeys.lists()}),ey(t.key),e_(t.soft_budget),W.default.success("Virtual Key Created"),ep.resetFields(),localStorage.removeItem("userData"+er)}catch(t){console.log("error in create key:",t);let e=(e=>{let t;if(!(t=!e||"object"!=typeof e||e instanceof Error?String(e):JSON.stringify(e)).includes("/key/generate")&&!t.includes("KeyManagementRoutes.KEY_GENERATE"))return`Error creating the key: ${e}`;let s=t;try{if(!e||"object"!=typeof e||e instanceof Error){let e=t.match(/\{[\s\S]*\}/);if(e){let t=JSON.parse(e[0]),l=t?.error||t;l?.message&&(s=l.message)}}else{let t=e?.error||e;t?.message&&(s=t.message)}}catch(e){}return t.includes("team_member_permission_error")||s.includes("Team member does not have permissions")?"Team member does not have permission to generate key for this team. Ask your proxy admin to configure the team member permission settings.":`Error creating the key: ${e}`})(t);W.default.fromBackend(e)}};(0,T.useEffect)(()=>{if(eR){let e=eo?.find(e=>e.project_id===eR);ew(e?.models??[]),ep.setFieldValue("models",[]);return}er&&ei&&ea&&Z(er,ei,ea,eE?.team_id??null).then(e=>{ew(Array.from(new Set([...eE?.models??[],...e])))}),ep.setFieldValue("models",[])},[eE,eR,ea,er,ei]),(0,T.useEffect)(()=>{if(!eR||!et)return;let e=eo?.find(e=>e.project_id===eR);if(!e?.team_id||eE?.team_id===e.team_id)return;let t=et.find(t=>t.team_id===e.team_id)||null;t&&(eV(t),ep.setFieldValue("team_id",t.team_id))},[et,eR,eo]);let tc=async e=>{if(!e)return void eW([]);ez(!0);try{let t=new URLSearchParams;if(t.append("user_email",e),null==ea)return;let s=(await (0,J.userFilterUICall)(ea,t)).map(e=>({label:`${e.user_email} (${e.user_id})`,value:e.user_id,user:e}));eW(s)}catch(e){console.error("Error fetching users:",e),W.default.fromBackend("Failed to search for users")}finally{ez(!1)}},tu=(0,T.useCallback)((0,N.default)(e=>tc(e),300),[ea]);return(0,t.jsxs)("div",{children:[ei&&I.rolesWithWriteAccess.includes(ei)&&(0,t.jsx)(m.Button,{className:"mx-auto",onClick:()=>eg(!0),children:"+ Create New Key"}),(0,t.jsx)(b.Modal,{open:eh,width:1e3,footer:null,onOk:ti,onCancel:tn,children:(0,t.jsxs)(_.Form,{form:ep,onFinish:td,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(y.Title,{className:"mb-4",children:"Key Ownership"}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Owned By"," ",(0,t.jsx)(C.Tooltip,{title:"Select who will own this Virtual Key",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),className:"mb-4",children:(0,t.jsxs)(v.Radio.Group,{onChange:e=>eS(e.target.value),value:ek,children:[(0,t.jsx)(v.Radio,{value:"you",children:"You"}),(0,t.jsx)(v.Radio,{value:"service_account",children:"Service Account"}),"Admin"===ei&&(0,t.jsx)(v.Radio,{value:"another_user",children:"Another User"}),(0,t.jsxs)(v.Radio,{value:"agent",children:["Agent ",(0,t.jsx)(S.Tag,{color:"purple",children:"New"})]})]})}),"another_user"===ek&&(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["User ID"," ",(0,t.jsx)(C.Tooltip,{title:"The user who will own this key and be responsible for its usage",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"user_id",className:"mt-4",rules:[{required:"another_user"===ek,message:"Please input the user ID of the user you are assigning the key to"}],children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",marginBottom:"8px"},children:[(0,t.jsx)(w.Select,{showSearch:!0,placeholder:"Type email to search for users",filterOption:!1,onSearch:e=>{tu(e)},onSelect:(e,t)=>{let s;return s=t.user,void ep.setFieldsValue({user_id:s.user_id})},options:eH,loading:eJ,allowClear:!0,style:{width:"100%"},notFoundContent:eJ?"Searching...":"No users found"}),(0,t.jsx)(f.Button,{onClick:()=>eD(!0),style:{marginLeft:"8px"},children:"Create User"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Search by email to find users"})]})}),"agent"===ek&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-purple-50 border border-purple-200 rounded-md",children:[(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Select Agent ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]})}),(0,t.jsx)(w.Select,{showSearch:!0,placeholder:"Select an agent",style:{width:"100%"},value:ta,onChange:e=>tr(e),filterOption:(e,t)=>t?.label?.toLowerCase().includes(e.toLowerCase()),options:ts.map(e=>({label:e.agent_name||e.agent_id,value:e.agent_id}))}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"This key will be used by the selected agent to make requests to LiteLLM"})]}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Team"," ",(0,t.jsx)(C.Tooltip,{title:"The team this key belongs to, which determines available models and budget limits",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"team_id",initialValue:e?e.team_id:null,className:"mt-4",rules:[{required:"service_account"===ek,message:"Please select a team for the service account"}],help:"service_account"===ek?"required":"",children:(0,t.jsx)(D.default,{teams:et,disabled:null!==eR,loading:!et,onChange:e=>{eV(et?.find(t=>t.team_id===e)||null),eK(null),ep.setFieldValue("project_id",void 0)}})}),eu&&(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Project"," ",(0,t.jsx)(C.Tooltip,{title:"Assign this key to a project. Selecting a project will lock the team to the project's team.",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"project_id",className:"mt-4",children:(0,t.jsx)(B.default,{projects:eo,teamId:eE?.team_id,loading:ed||!et,onChange:e=>{if(!e){eK(null),eV(null),ep.setFieldValue("team_id",void 0);return}eK(e)}})})]}),to&&(0,t.jsx)("div",{className:"mb-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,t.jsx)(g.Text,{className:"text-blue-800 text-sm",children:"Please select a team to continue configuring your Virtual Key. If you do not see any teams, please contact your Proxy Admin to either provide you with access to models or to add you to a team."})}),!to&&(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)(y.Title,{className:"mb-4",children:"Key Details"}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["you"===ek||"another_user"===ek?"Key Name":"Service Account ID"," ",(0,t.jsx)(C.Tooltip,{title:"you"===ek||"another_user"===ek?"A descriptive name to identify this key":"Unique identifier for this service account",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"key_alias",rules:[{required:!0,message:`Please input a ${"you"===ek?"key name":"service account ID"}`}],help:"required",children:(0,t.jsx)(x.TextInput,{placeholder:""})}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Models"," ",(0,t.jsx)(C.Tooltip,{title:"Select which models this key can access. Choose 'All Team Models' to grant access to all models available to the team",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"models",rules:"management"===e0||"read_only"===e0?[]:[{required:!0,message:"Please select a model"}],help:"management"===e0||"read_only"===e0?"Models field is disabled for this key type":"required",className:"mt-4",children:(0,t.jsxs)(w.Select,{mode:"multiple",placeholder:"Select models",style:{width:"100%"},disabled:"management"===e0||"read_only"===e0,onChange:e=>{e.includes("all-team-models")&&ep.setFieldsValue({models:["all-team-models"]})},children:[!eR&&(0,t.jsx)(X,{value:"all-team-models",children:"All Team Models"},"all-team-models"),ev.map(e=>(0,t.jsx)(X,{value:e,children:(0,$.getModelDisplayName)(e)},e))]})}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Key Type"," ",(0,t.jsx)(C.Tooltip,{title:"Select the type of key to determine what routes and operations this key can access",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"key_type",initialValue:"llm_api",className:"mt-4",children:(0,t.jsxs)(w.Select,{defaultValue:"llm_api",placeholder:"Select key type",style:{width:"100%"},optionLabelProp:"label",onChange:e=>{e4(e),("management"===e||"read_only"===e)&&ep.setFieldsValue({models:[]})},children:[(0,t.jsx)(X,{value:"default",label:"Default",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"Default"}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"Can call AI APIs + Management routes"})]})}),(0,t.jsx)(X,{value:"llm_api",label:"AI APIs",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"AI APIs"}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"Can call only AI API routes (chat/completions, embeddings, etc.)"})]})}),(0,t.jsx)(X,{value:"management",label:"Management",children:(0,t.jsxs)("div",{style:{padding:"4px 0"},children:[(0,t.jsx)("div",{style:{fontWeight:500},children:"Management"}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"2px"},children:"Can call only management routes (user/team/key management)"})]})})]})})]}),!to&&(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)(d.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.AccordionHeader,{children:(0,t.jsx)(y.Title,{className:"m-0",children:"Optional Settings"})}),(0,t.jsxs)(c.AccordionBody,{children:[(0,t.jsx)(_.Form.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["Max Budget (USD)"," ",(0,t.jsx)(C.Tooltip,{title:"Maximum amount in USD this key can spend. When reached, the key will be blocked from making further requests",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"max_budget",help:`Budget cannot exceed team max budget: $${e?.max_budget!==null&&e?.max_budget!==void 0?e?.max_budget:"unlimited"}`,rules:[{validator:async(t,s)=>{if(s&&e&&null!==e.max_budget&&s>e.max_budget)throw Error(`Budget cannot exceed team max budget: $${(0,i.formatNumberWithCommas)(e.max_budget,4)}`)}}],children:(0,t.jsx)(Q.default,{step:.01,precision:2,width:200})}),(0,t.jsx)(_.Form.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["Reset Budget"," ",(0,t.jsx)(C.Tooltip,{title:"How often the budget should reset. For example, setting 'daily' will reset the budget every 24 hours",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"budget_duration",help:`Team Reset Budget: ${e?.budget_duration!==null&&e?.budget_duration!==void 0?e?.budget_duration:"None"}`,children:(0,t.jsx)(L.default,{onChange:e=>ep.setFieldValue("budget_duration",e)})}),(0,t.jsx)(_.Form.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["Tokens per minute Limit (TPM)"," ",(0,t.jsx)(C.Tooltip,{title:"Maximum number of tokens this key can process per minute. Helps control usage and costs",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"tpm_limit",help:`TPM cannot exceed team TPM limit: ${e?.tpm_limit!==null&&e?.tpm_limit!==void 0?e?.tpm_limit:"unlimited"}`,rules:[{validator:async(t,s)=>{if(s&&e&&null!==e.tpm_limit&&s>e.tpm_limit)throw Error(`TPM limit cannot exceed team TPM limit: ${e.tpm_limit}`)}}],children:(0,t.jsx)(Q.default,{step:1,width:400})}),(0,t.jsx)(K.default,{type:"tpm",name:"tpm_limit_type",className:"mt-4",initialValue:null,form:ep,showDetailedDescriptions:!0}),(0,t.jsx)(_.Form.Item,{className:"mt-4",label:(0,t.jsxs)("span",{children:["Requests per minute Limit (RPM)"," ",(0,t.jsx)(C.Tooltip,{title:"Maximum number of API requests this key can make per minute. Helps prevent abuse and manage load",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"rpm_limit",help:`RPM cannot exceed team RPM limit: ${e?.rpm_limit!==null&&e?.rpm_limit!==void 0?e?.rpm_limit:"unlimited"}`,rules:[{validator:async(t,s)=>{if(s&&e&&null!==e.rpm_limit&&s>e.rpm_limit)throw Error(`RPM limit cannot exceed team RPM limit: ${e.rpm_limit}`)}}],children:(0,t.jsx)(Q.default,{step:1,width:400})}),(0,t.jsx)(K.default,{type:"rpm",name:"rpm_limit_type",className:"mt-4",initialValue:null,form:ep,showDetailedDescriptions:!0}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Guardrails"," ",(0,t.jsx)(C.Tooltip,{title:"Apply safety guardrails to this key to filter content or enforce policies",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-4",help:en?"Select existing guardrails or enter new ones":"Premium feature - Upgrade to set guardrails by key",children:(0,t.jsx)(w.Select,{mode:"tags",style:{width:"100%"},disabled:!en,placeholder:en?"Select or enter guardrails":"Premium feature - Upgrade to set guardrails by key",options:eT.map(e=>({value:e,label:e}))})}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Disable Global Guardrails"," ",(0,t.jsx)(C.Tooltip,{title:"When enabled, this key will bypass any guardrails configured to run on every request (global guardrails)",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"disable_global_guardrails",className:"mt-4",valuePropName:"checked",help:en?"Bypass global guardrails for this key":"Premium feature - Upgrade to disable global guardrails by key",children:(0,t.jsx)(k.Switch,{disabled:!en,checkedChildren:"Yes",unCheckedChildren:"No"})}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Policies"," ",(0,t.jsx)(C.Tooltip,{title:"Apply policies to this key to control guardrails and other settings",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/guardrail_policies",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"policies",className:"mt-4",help:en?"Select existing policies or enter new ones":"Premium feature - Upgrade to set policies by key",children:(0,t.jsx)(w.Select,{mode:"tags",style:{width:"100%"},disabled:!en,placeholder:en?"Select or enter policies":"Premium feature - Upgrade to set policies by key",options:eA.map(e=>({value:e,label:e}))})}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Prompts"," ",(0,t.jsx)(C.Tooltip,{title:"Allow this key to use specific prompt templates",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/prompt_management",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"prompts",className:"mt-4",help:en?"Select existing prompts or enter new ones":"Premium feature - Upgrade to set prompts by key",children:(0,t.jsx)(w.Select,{mode:"tags",style:{width:"100%"},disabled:!en,placeholder:en?"Select or enter prompts":"Premium feature - Upgrade to set prompts by key",options:eP.map(e=>({value:e,label:e}))})}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Access Groups"," ",(0,t.jsx)(C.Tooltip,{title:"Assign access groups to this key. Access groups control which models, MCP servers, and agents this key can use",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"access_group_ids",className:"mt-4",help:"Select access groups to assign to this key",children:(0,t.jsx)(P.default,{placeholder:"Select access groups (optional)"})}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Allowed Pass Through Routes"," ",(0,t.jsx)(C.Tooltip,{title:"Allow this key to use specific pass through routes",children:(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/pass_through",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})})]}),name:"allowed_passthrough_routes",className:"mt-4",help:en?"Select existing pass through routes or enter new ones":"Premium feature - Upgrade to set pass through routes by key",children:(0,t.jsx)(V.default,{onChange:e=>ep.setFieldValue("allowed_passthrough_routes",e),value:ep.getFieldValue("allowed_passthrough_routes"),accessToken:ea,placeholder:en?"Select or enter pass through routes":"Premium feature - Upgrade to set pass through routes by key",disabled:!en,teamId:eE?eE.team_id:null})}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Allowed Vector Stores"," ",(0,t.jsx)(C.Tooltip,{title:"Select which vector stores this key can access. If none selected, the key will have access to all available vector stores",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-4",help:"Select vector stores this key can access. Leave empty for access to all vector stores",children:(0,t.jsx)(Y.default,{onChange:e=>ep.setFieldValue("allowed_vector_store_ids",e),value:ep.getFieldValue("allowed_vector_store_ids"),accessToken:ea,placeholder:"Select vector stores (optional)"})}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Metadata"," ",(0,t.jsx)(C.Tooltip,{title:"JSON object with additional information about this key. Used for tracking or custom logic",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"metadata",className:"mt-4",children:(0,t.jsx)(j.Input.TextArea,{rows:4,placeholder:"Enter metadata as JSON"})}),(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Tags"," ",(0,t.jsx)(C.Tooltip,{title:"Tags for tracking spend and/or doing tag-based routing. Used for analytics and filtering",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"tags",className:"mt-4",help:"Tags for tracking spend and/or doing tag-based routing.",children:(0,t.jsx)(w.Select,{mode:"tags",style:{width:"100%"},placeholder:"Enter tags",tokenSeparators:[","],options:eC})}),(0,t.jsxs)(d.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.AccordionHeader,{children:(0,t.jsx)("b",{children:"MCP Settings"})}),(0,t.jsxs)(c.AccordionBody,{children:[(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Allowed MCP Servers"," ",(0,t.jsx)(C.Tooltip,{title:"Select which MCP servers or access groups this key can access",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",help:"Select MCP servers or access groups this key can access",children:(0,t.jsx)(G.default,{onChange:e=>ep.setFieldValue("allowed_mcp_servers_and_groups",e),value:ep.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:ea,placeholder:"Select MCP servers or access groups (optional)"})}),(0,t.jsx)(_.Form.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,t.jsx)(j.Input,{type:"hidden"})}),(0,t.jsx)(_.Form.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.allowed_mcp_servers_and_groups!==t.allowed_mcp_servers_and_groups||e.mcp_tool_permissions!==t.mcp_tool_permissions,children:()=>(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(H.default,{accessToken:ea,selectedServers:ep.getFieldValue("allowed_mcp_servers_and_groups")?.servers||[],toolPermissions:ep.getFieldValue("mcp_tool_permissions")||{},onChange:e=>ep.setFieldsValue({mcp_tool_permissions:e})})})})]})]}),(0,t.jsxs)(d.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.AccordionHeader,{children:(0,t.jsx)("b",{children:"Agent Settings"})}),(0,t.jsx)(c.AccordionBody,{children:(0,t.jsx)(_.Form.Item,{label:(0,t.jsxs)("span",{children:["Allowed Agents"," ",(0,t.jsx)(C.Tooltip,{title:"Select which agents or access groups this key can access",children:(0,t.jsx)(n.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_agents_and_groups",help:"Select agents or access groups this key can access",children:(0,t.jsx)(A.default,{onChange:e=>ep.setFieldValue("allowed_agents_and_groups",e),value:ep.getFieldValue("allowed_agents_and_groups"),accessToken:ea,placeholder:"Select agents or access groups (optional)"})})})]}),en?(0,t.jsxs)(d.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.AccordionHeader,{children:(0,t.jsx)("b",{children:"Logging Settings"})}),(0,t.jsx)(c.AccordionBody,{children:(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(R.default,{value:eO,onChange:eM,premiumUser:!0,disabledCallbacks:eX,onDisabledCallbacksChange:eZ})})})]}):(0,t.jsx)(C.Tooltip,{title:(0,t.jsxs)("span",{children:["Key-level logging settings is an enterprise feature, get in touch -",(0,t.jsx)("a",{href:"https://www.litellm.ai/enterprise",target:"_blank",children:"https://www.litellm.ai/enterprise"})]}),placement:"top",children:(0,t.jsxs)("div",{style:{position:"relative"},children:[(0,t.jsx)("div",{style:{opacity:.5},children:(0,t.jsxs)(d.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.AccordionHeader,{children:(0,t.jsx)("b",{children:"Logging Settings"})}),(0,t.jsx)(c.AccordionBody,{children:(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(R.default,{value:eO,onChange:eM,premiumUser:!1,disabledCallbacks:eX,onDisabledCallbacksChange:eZ})})})]})}),(0,t.jsx)("div",{style:{position:"absolute",inset:0,cursor:"not-allowed"}})]})}),(0,t.jsxs)(d.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.AccordionHeader,{children:(0,t.jsx)("b",{children:"Router Settings"})}),(0,t.jsx)(c.AccordionBody,{children:(0,t.jsx)("div",{className:"mt-4 w-full",children:(0,t.jsx)(U.default,{accessToken:ea||"",value:e8||void 0,onChange:e9,modelData:ej.length>0?{data:ej.map(e=>({model_name:e}))}:void 0},te)})})]},`router-settings-accordion-${te}`),(0,t.jsxs)(d.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.AccordionHeader,{children:(0,t.jsx)("b",{children:"Model Aliases"})}),(0,t.jsx)(c.AccordionBody,{children:(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)(g.Text,{className:"text-sm text-gray-600 mb-4",children:"Create custom aliases for models that can be used in API calls. This allows you to create shortcuts for specific models."}),(0,t.jsx)(E.default,{accessToken:ea,initialModelAliases:e1,onAliasUpdate:e2,showExampleConfig:!1})]})})]}),(0,t.jsxs)(d.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.AccordionHeader,{children:(0,t.jsx)("b",{children:"Key Lifecycle"})}),(0,t.jsx)(c.AccordionBody,{children:(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(M.default,{form:ep,autoRotationEnabled:e3,onAutoRotationChange:e5,rotationInterval:e6,onRotationIntervalChange:e7,isCreateMode:!0})})}),(0,t.jsx)(_.Form.Item,{name:"duration",hidden:!0,initialValue:null,children:(0,t.jsx)(j.Input,{})})]}),(0,t.jsxs)(d.Accordion,{className:"mt-4 mb-4",children:[(0,t.jsx)(u.AccordionHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("b",{children:"Advanced Settings"}),(0,t.jsx)(C.Tooltip,{title:(0,t.jsxs)("span",{children:["Learn more about advanced settings in our"," ",(0,t.jsx)("a",{href:J.proxyBaseUrl?`${J.proxyBaseUrl}/#/key%20management/generate_key_fn_key_generate_post`:"/#/key%20management/generate_key_fn_key_generate_post",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"documentation"})]}),children:(0,t.jsx)(n.InfoCircleOutlined,{className:"text-gray-400 hover:text-gray-300 cursor-help"})})]})}),(0,t.jsx)(c.AccordionBody,{children:(0,t.jsx)(O.default,{schemaComponent:"GenerateKeyRequest",form:ep,excludedFields:["key_alias","team_id","models","duration","metadata","tags","guardrails","max_budget","budget_duration","tpm_limit","rpm_limit"]})})]})]})]})}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(f.Button,{htmlType:"submit",disabled:to,style:{opacity:to?.5:1},children:"Create Key"})})]})}),eU&&(0,t.jsx)(b.Modal,{title:"Create New User",open:eU,onCancel:()=>eD(!1),footer:null,width:800,children:(0,t.jsx)(q.CreateUserButton,{userID:er,accessToken:ea,teams:et,possibleUIRoles:e$,onUserCreated:e=>{eq(e),ep.setFieldsValue({user_id:e}),eD(!1)},isEmbedded:!0})}),ex&&(0,t.jsx)(b.Modal,{open:eh,onOk:ti,onCancel:tn,footer:null,children:(0,t.jsxs)(h.Grid,{numItems:1,className:"gap-2 w-full",children:[(0,t.jsx)(y.Title,{children:"Save your Key"}),(0,t.jsx)(p.Col,{numColSpan:1,children:null!=ex?(0,t.jsx)(z.default,{apiKey:ex}):(0,t.jsx)(g.Text,{children:"Key being created, this might take 30s"})})]})})]})},"fetchTeamModels",0,Z,"fetchUserModels",0,ee],702597)}]);