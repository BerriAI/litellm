"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9599],{4933:function(e,l,t){t.d(l,{i:function(){return i}});var s=t(19250),a=t(71632);let r=(0,t(90246).n)("modelCostMap"),i=()=>(0,a.a)({queryKey:r.list({}),queryFn:async()=>await (0,s.modelCostMap)(),staleTime:6e4,gcTime:6e4})},11776:function(e,l,t){t.d(l,{SX:function(){return x},lD:function(){return a},nt:function(){return h},rO:function(){return s}});var s,a,r=t(71632),i=t(21770),n=t(90246),o=t(39760),d=t(19250);(s||(s={})).GENERAL_SETTINGS="general_settings",(a||(a={})).MAXIMUM_SPEND_LOGS_RETENTION_PERIOD="maximum_spend_logs_retention_period";let c=async(e,l)=>{try{let t=d.proxyBaseUrl?"".concat(d.proxyBaseUrl,"/config/list?config_type=").concat(l):"/config/list?config_type=".concat(l),s=await fetch(t,{method:"GET",headers:{[(0,d.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!s.ok){let e=await s.json(),l=(0,d.deriveErrorMessage)(e);throw(0,d.handleError)(l),Error(l)}return await s.json()}catch(e){throw console.error("Failed to get proxy config for ".concat(l,":"),e),e}},m=(0,n.n)("proxyConfig"),u=async(e,l)=>{try{let t=d.proxyBaseUrl?"".concat(d.proxyBaseUrl,"/config/field/delete"):"/config/field/delete",s=await fetch(t,{method:"POST",headers:{[(0,d.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(l)});if(!s.ok){let e=await s.json(),l=(0,d.deriveErrorMessage)(e);throw(0,d.handleError)(l),Error(l)}return await s.json()}catch(e){throw console.error("Failed to delete proxy config field ".concat(l.field_name,":"),e),e}},h=e=>{let{accessToken:l}=(0,o.Z)();return(0,r.a)({queryKey:m.list({filters:{configType:e}}),queryFn:async()=>await c(l,e),enabled:!!l})},x=()=>{let{accessToken:e}=(0,o.Z)();return(0,i.D)({mutationFn:async l=>{if(!e)throw Error("Access token is required");return await u(e,l)}})}},29599:function(e,l,t){t.d(l,{Z:function(){return td}});var s=t(57437),a=t(19250),r=t(71632),i=t(90246),n=t(39760);let o=(0,i.n)("credentials"),d=()=>{let{accessToken:e}=(0,n.Z)();return(0,r.a)({queryKey:o.list({}),queryFn:async()=>await (0,a.credentialListCall)(e),enabled:!!e})};var c=t(4933),m=t(52178),u=t(55584),h=t(47359),x=t(71594),p=t(24525),g=t(2265),f=t(19130),j=t(47024);function v(e){let{data:l=[],columns:t,isLoading:a=!1,sorting:r=[],onSortingChange:i,pagination:n,onPaginationChange:o,enablePagination:d=!1}=e,[c]=g.useState("onChange"),[m,u]=g.useState({}),[h,v]=g.useState({}),_=(0,x.b7)({data:l,columns:t,state:{sorting:r,columnSizing:m,columnVisibility:h,...d&&n?{pagination:n}:{}},columnResizeMode:c,onSortingChange:i,onColumnSizingChange:u,onColumnVisibilityChange:v,...d&&o?{onPaginationChange:o}:{},getCoreRowModel:(0,p.sC)(),...d?{getPaginationRowModel:(0,p.G_)()}:{},enableSorting:!0,enableColumnResizing:!0,manualSorting:!0,defaultColumn:{minSize:40,maxSize:500}});return(0,s.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsx)("div",{className:"relative min-w-full",children:(0,s.jsxs)(f.iA,{className:"[&_td]:py-2 [&_th]:py-2",style:{width:_.getTotalSize(),minWidth:"100%",tableLayout:"fixed"},children:[(0,s.jsx)(f.ss,{children:_.getHeaderGroups().map(e=>(0,s.jsx)(f.SC,{children:e.headers.map(e=>{var l;return(0,s.jsxs)(f.xs,{className:"py-1 h-8 relative ".concat("actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)] w-[120px] ml-8":""," ").concat((null===(l=e.column.columnDef.meta)||void 0===l?void 0:l.className)||""),style:{width:"actions"===e.id?120:e.getSize(),position:"actions"===e.id?"sticky":"relative",right:"actions"===e.id?0:"auto"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,x.ie)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&e.column.getCanSort()&&i&&(0,s.jsx)(j._,{sortState:!1!==e.column.getIsSorted()&&e.column.getIsSorted(),onSortChange:l=>{!1===l?i([]):i([{id:e.column.id,desc:"desc"===l}])},columnId:e.column.id})]}),e.column.getCanResize()&&(0,s.jsx)("div",{onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:"absolute right-0 top-0 h-full w-2 cursor-col-resize select-none touch-none ".concat(e.column.getIsResizing()?"bg-blue-500":"hover:bg-blue-200")})]},e.id)})},e.id))}),(0,s.jsx)(f.RM,{children:a?(0,s.jsx)(f.SC,{children:(0,s.jsx)(f.pj,{colSpan:t.length,className:"h-8 text-center",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsx)("p",{children:"\uD83D\uDE85 Loading models..."})})})}):_.getRowModel().rows.length>0?_.getRowModel().rows.map(e=>(0,s.jsx)(f.SC,{children:e.getVisibleCells().map(e=>{var l;return(0,s.jsx)(f.pj,{className:"py-0.5 overflow-hidden ".concat("actions"===e.column.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)] w-[120px] ml-8":""," ").concat((null===(l=e.column.columnDef.meta)||void 0===l?void 0:l.className)||""),style:{width:"actions"===e.column.id?120:e.column.getSize(),position:"actions"===e.column.id?"sticky":"relative",right:"actions"===e.column.id?0:"auto"},children:(0,x.ie)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)):(0,s.jsx)(f.SC,{children:(0,s.jsx)(f.pj,{colSpan:t.length,className:"h-8 text-center",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsx)("p",{children:"No models found"})})})})})]})})})})}var _=t(30356),y=t(13377),b=t(15424),N=t(74998),Z=t(41649),w=t(78489),C=t(47323),S=t(57840),k=t(55590),P=t(10868),E=t(23496),A=t(99981),M=t(79326),L=t(45188);let{Text:T,Title:F}=S.default,I=(0,s.jsxs)(k.Z,{direction:"vertical",size:12,children:[(0,s.jsx)(T,{strong:!0,style:{fontSize:13},children:"Credential types"}),(0,s.jsxs)(k.Z,{direction:"vertical",size:8,children:[(0,s.jsx)(P.Z,{align:"center",gap:8,children:(0,s.jsxs)(k.Z,{direction:"vertical",children:[(0,s.jsxs)(P.Z,{align:"center",gap:8,children:[(0,s.jsx)(_.Z,{style:{color:"#1890ff"}}),(0,s.jsx)(F,{level:5,style:{margin:0,color:"#1890ff"},children:"Reusable"})]}),(0,s.jsx)(T,{type:"secondary",children:"Credentials saved in LiteLLM that can be added to models repeatedly."})]})}),(0,s.jsx)(E.Z,{size:"small"}),(0,s.jsx)(P.Z,{align:"center",gap:8,children:(0,s.jsxs)(k.Z,{direction:"vertical",size:8,children:[(0,s.jsxs)(P.Z,{align:"center",gap:8,children:[(0,s.jsx)(y.Z,{style:{color:"#8c8c8c",fontSize:14,flexShrink:0}}),(0,s.jsx)(F,{level:5,style:{margin:0},children:"Manual"})]}),(0,s.jsx)(T,{type:"secondary",children:"Credentials added directly during model creation or defined in the config file."})]})})]})]}),R=(e,l,t,a,r,i,n,o,d,c)=>[{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Model ID"}),accessorKey:"model_info.id",enableSorting:!1,size:130,minSize:80,cell:e=>{let{row:l}=e,t=l.original;return(0,s.jsx)(A.Z,{title:t.model_info.id,children:(0,s.jsx)(T,{ellipsis:!0,className:"text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs cursor-pointer w-full block",style:{fontSize:14,padding:"1px 8px"},onClick:()=>a(t.model_info.id),children:t.model_info.id})})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Model Information"}),accessorKey:"model_name",size:250,minSize:120,cell:e=>{let{row:l}=e,t=l.original,a=i(l.original)||"-",r=(0,s.jsxs)(k.Z,{direction:"vertical",size:12,style:{minWidth:220},children:[(0,s.jsxs)(P.Z,{align:"center",gap:8,children:[(0,s.jsx)(L.K,{provider:t.provider}),(0,s.jsx)(T,{type:"secondary",style:{fontSize:12},ellipsis:!0,children:t.provider||"Unknown provider"})]}),(0,s.jsxs)(k.Z,{direction:"vertical",size:6,children:[(0,s.jsxs)(k.Z,{direction:"vertical",size:2,style:{width:"100%"},children:[(0,s.jsx)(T,{type:"secondary",style:{fontSize:11},children:"Public Model Name"}),(0,s.jsx)(T,{strong:!0,style:{fontSize:13,maxWidth:480},ellipsis:!0,title:a,children:a})]}),(0,s.jsxs)(k.Z,{direction:"vertical",size:2,children:[(0,s.jsx)(T,{type:"secondary",style:{fontSize:11},children:"LiteLLM Model Name"}),(0,s.jsx)(T,{style:{fontSize:13},copyable:{text:t.litellm_model_name||"-"},ellipsis:!0,title:t.litellm_model_name||"-",children:t.litellm_model_name||"-"})]})]})]});return(0,s.jsx)(M.Z,{content:r,placement:"right",arrow:{pointAtCenter:!0},styles:{root:{maxWidth:500}},children:(0,s.jsxs)("div",{className:"flex items-start space-x-2 min-w-0 w-full cursor-pointer",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:t.provider?(0,s.jsx)(L.K,{provider:t.provider}):(0,s.jsx)("div",{className:"w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",children:"-"})}),(0,s.jsxs)("div",{className:"flex flex-col min-w-0 flex-1",children:[(0,s.jsx)(T,{ellipsis:!0,className:"text-gray-900",style:{fontSize:12,fontWeight:500,lineHeight:"16px"},children:a}),(0,s.jsx)(T,{ellipsis:!0,type:"secondary",style:{fontSize:12,lineHeight:"16px",marginTop:2},children:t.litellm_model_name||"-"})]})]})})}},{header:()=>(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Credentials"}),(0,s.jsx)(M.Z,{content:I,placement:"bottom",arrow:{pointAtCenter:!0},children:(0,s.jsx)(b.Z,{className:"cursor-pointer text-gray-400 hover:text-gray-600",style:{fontSize:12}})})]}),accessorKey:"litellm_credential_name",enableSorting:!1,size:180,minSize:100,cell:e=>{var l;let{row:t}=e,a=null===(l=t.original.litellm_params)||void 0===l?void 0:l.litellm_credential_name,r=!!a;return(0,s.jsx)("div",{className:"flex items-center space-x-2 min-w-0 w-full",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Z,{className:"flex-shrink-0",style:{color:"#1890ff",fontSize:14}}),(0,s.jsx)("span",{className:"text-xs truncate text-blue-600",title:a,children:a})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{className:"flex-shrink-0",style:{color:"#8c8c8c",fontSize:14}}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Manual"})]})})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Created By"}),accessorKey:"model_info.created_by",sortingFn:"datetime",size:160,minSize:100,cell:e=>{var l;let{row:t}=e,a=t.original,r=!(null===(l=a.model_info)||void 0===l?void 0:l.db_model),i=a.model_info.created_by,n=a.model_info.created_at?new Date(a.model_info.created_at).toLocaleDateString():null;return(0,s.jsxs)("div",{className:"flex flex-col min-w-0 w-full",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-gray-900 truncate",title:r?"Defined in config":i||"Unknown",children:r?"Defined in config":i||"Unknown"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 truncate mt-0.5",title:r?"Config file":n||"Unknown date",children:r?"-":n||"Unknown date"})]})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Updated At"}),accessorKey:"model_info.updated_at",sortingFn:"datetime",size:120,minSize:80,cell:e=>{let{row:l}=e,t=l.original;return(0,s.jsx)("span",{className:"text-xs",children:t.model_info.updated_at?new Date(t.model_info.updated_at).toLocaleDateString():"-"})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Costs"}),accessorKey:"input_cost",size:120,minSize:80,cell:e=>{let{row:l}=e,t=l.original,a=t.input_cost,r=t.output_cost;return null==a&&null==r?(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"-"})}):(0,s.jsx)(A.Z,{title:"Cost per 1M tokens",children:(0,s.jsxs)("div",{className:"flex flex-col min-w-0 w-full",children:[null!=a&&(0,s.jsxs)("div",{className:"text-xs font-medium text-gray-900 truncate",children:["In: $",a]}),null!=r&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:["Out: $",r]})]})})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Team ID"}),accessorKey:"model_info.team_id",enableSorting:!1,size:130,minSize:80,cell:e=>{let{row:l}=e,t=l.original;return t.model_info.team_id?(0,s.jsx)("div",{className:"overflow-hidden w-full",children:(0,s.jsx)(A.Z,{title:t.model_info.team_id,children:(0,s.jsxs)(w.Z,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate w-full",onClick:()=>r(t.model_info.team_id),children:[t.model_info.team_id.slice(0,7),"..."]})})}):"-"}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Model Access Group"}),accessorKey:"model_info.model_access_group",enableSorting:!1,size:180,minSize:100,cell:e=>{let{row:l}=e,t=l.original,a=t.model_info.access_groups;if(!a||0===a.length)return"-";let r=t.model_info.id,i=d.has(r),n=a.length>1,o=()=>{let e=new Set(d);i?e.delete(r):e.add(r),c(e)};return(0,s.jsxs)("div",{className:"flex items-center gap-1 overflow-hidden w-full",children:[(0,s.jsx)(Z.Z,{size:"xs",color:"blue",className:"text-xs px-1.5 py-0.5 h-5 leading-tight flex-shrink-0",children:a[0]}),(i||!n&&2===a.length)&&a.slice(1).map((e,l)=>(0,s.jsx)(Z.Z,{size:"xs",color:"blue",className:"text-xs px-1.5 py-0.5 h-5 leading-tight flex-shrink-0",children:e},l+1)),n&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"text-xs text-blue-600 hover:text-blue-800 px-1 py-0.5 rounded hover:bg-blue-50 h-5 leading-tight flex-shrink-0 whitespace-nowrap",children:i?"âˆ’":"+".concat(a.length-1)})]})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Status"}),accessorKey:"model_info.db_model",size:120,minSize:80,cell:e=>{let{row:l}=e,t=l.original;return(0,s.jsx)("div",{className:"\n          inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium\n          ".concat(t.model_info.db_model?"bg-blue-50 text-blue-600":"bg-gray-100 text-gray-600","\n        "),children:t.model_info.db_model?"DB Model":"Config Model"})}},{id:"actions",header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Actions"}),size:60,minSize:40,enableResizing:!1,cell:t=>{var r,i;let{row:n}=t,o=n.original,d="Admin"===e||(null===(r=o.model_info)||void 0===r?void 0:r.created_by)===l,c=!(null===(i=o.model_info)||void 0===i?void 0:i.db_model);return(0,s.jsx)("div",{className:"flex items-center justify-end gap-2 pr-4",children:c?(0,s.jsx)(A.Z,{title:"Config model cannot be deleted on the dashboard. Please delete it from the config file.",children:(0,s.jsx)(C.Z,{icon:N.Z,size:"sm",className:"opacity-50 cursor-not-allowed"})}):(0,s.jsx)(A.Z,{title:"Delete model",children:(0,s.jsx)(C.Z,{icon:N.Z,size:"sm",onClick:()=>{d&&a(o.model_info.id)},className:d?"cursor-pointer hover:text-red-600":"opacity-50 cursor-not-allowed"})})})}}],z=e=>{var l;return(null==e?void 0:null===(l=e.model_info)||void 0===l?void 0:l.team_public_model_name)?e.model_info.team_public_model_name:(null==e?void 0:e.model_name)||"-"};var O=t(55322),q=t(67101),V=t(29706),D=t(50337),B=t(37592),G=t(33866),U=t(5545),H=t(11776),K=t(21770);let J=async(e,l)=>{let t=(0,a.getProxyBaseUrl)(),s=await fetch(t?"".concat(t,"/config/field/update"):"/config/field/update",{method:"POST",headers:{[(0,a.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({field_name:"store_model_in_db",field_value:l.store_model_in_db,config_type:"general_settings"})});if(!s.ok){var r;let e=await s.json().catch(()=>({}));throw Error((null==e?void 0:null===(r=e.error)||void 0===r?void 0:r.message)||(null==e?void 0:e.message)||(null==e?void 0:e.detail)||"Failed to update model storage settings")}return await s.json()},W=()=>{let{accessToken:e}=(0,n.Z)();return(0,K.D)({mutationFn:async l=>{if(!e)throw Error("Access token is required");return await J(e,l)}})};var Y=t(9114),X=t(85968),Q=t(10032),$=t(22116),ee=t(63709),el=e=>{var l;let{isVisible:t,onCancel:a,onSuccess:r}=e,[i]=Q.Z.useForm(),{mutateAsync:n,isPending:o}=W(),{data:d,isLoading:c,refetch:m}=(0,H.nt)(H.rO.GENERAL_SETTINGS);(0,g.useEffect)(()=>{t&&m()},[t,m]);let u=(0,g.useMemo)(()=>{var e;if(!d)return{store_model_in_db:!1};let l=d.find(e=>"store_model_in_db"===e.field_name);return{store_model_in_db:null!==(e=null==l?void 0:l.field_value)&&void 0!==e&&e}},[d]),h=async e=>{try{await n(e,{onSuccess:()=>{Y.ZP.success("Model storage settings updated successfully"),m(),null==r||r()},onError:e=>{Y.ZP.fromBackend("Failed to save model storage settings: "+(0,X.O)(e))}})}catch(e){Y.ZP.fromBackend("Failed to save model storage settings: "+(0,X.O)(e))}},x=()=>{i.resetFields(),a()};return(0,s.jsx)($.Z,{title:(0,s.jsx)(S.default.Title,{level:5,children:"Model Settings"}),open:t,footer:(0,s.jsxs)(k.Z,{children:[(0,s.jsx)(U.ZP,{onClick:x,disabled:o||c,children:"Cancel"}),(0,s.jsx)(U.ZP,{type:"primary",loading:o,disabled:c,onClick:()=>i.submit(),children:o?"Saving...":"Save Settings"})]}),onCancel:x,children:(0,s.jsx)(Q.Z,{form:i,layout:"horizontal",onFinish:h,initialValues:u,children:(0,s.jsx)(Q.Z.Item,{label:"Store Model in DB",name:"store_model_in_db",tooltip:(null==d?void 0:null===(l=d.find(e=>"store_model_in_db"===e.field_name))||void 0===l?void 0:l.field_description)||"If enabled, models and config are stored in and loaded from the database.",valuePropName:"checked",children:c?(0,s.jsx)(D.Z.Input,{active:!0,block:!0}):(0,s.jsx)(ee.Z,{})})},d?JSON.stringify(u):"loading")})},et=t(7310),es=t.n(et);let ea=(e,l)=>{if(!(null==e?void 0:e.data))return{data:[]};let t=JSON.parse(JSON.stringify(e.data));for(let e=0;e<t.length;e++){var s,a,r;let i=t[e],n=null==i?void 0:null===(s=i.litellm_params)||void 0===s?void 0:s.model,o=null==i?void 0:null===(a=i.litellm_params)||void 0===a?void 0:a.custom_llm_provider,d=null==i?void 0:i.model_info,c="",m=null,u=null,h="Undefined",x="Undefined",p={};if(n){let e=n.split("/"),t=e[0];(c=o)||(c=1===e.length?l(n):t)}else c="-";d&&(m=null==d?void 0:d.input_cost_per_token,u=null==d?void 0:d.output_cost_per_token,h=null==d?void 0:d.max_tokens,x=null==d?void 0:d.max_input_tokens),(null==i?void 0:i.litellm_params)&&(p=Object.fromEntries(Object.entries(null==i?void 0:i.litellm_params).filter(e=>{let[l]=e;return"model"!==l&&"api_base"!==l}))),t[e].provider=c,t[e].input_cost=m,t[e].output_cost=u,t[e].litellm_model_name=n,null!=t[e].input_cost&&(t[e].input_cost=(1e6*Number(t[e].input_cost)).toFixed(2)),null!=t[e].output_cost&&(t[e].output_cost=(1e6*Number(t[e].output_cost)).toFixed(2)),t[e].max_tokens=h,t[e].max_input_tokens=x,t[e].api_base=null==i?void 0:null===(r=i.litellm_params)||void 0===r?void 0:r.api_base,t[e].cleanedLitellmParams=p}return{data:t}},{Text:er}=S.default;var ei=e=>{var l;let{selectedModelGroup:t,setSelectedModelGroup:a,availableModelGroups:r,availableModelAccessGroups:i,setSelectedModelId:o,setSelectedTeamId:d}=e,{data:u,isLoading:x}=(0,c.i)(),{userId:p,userRole:f,premiumUser:j}=(0,n.Z)(),{data:_,isLoading:y}=(0,h.y2)(),[N,Z]=(0,g.useState)(""),[w,C]=(0,g.useState)(""),[S,P]=(0,g.useState)("current_team"),[E,A]=(0,g.useState)("personal"),[M,L]=(0,g.useState)(!1),[T,F]=(0,g.useState)(null),[I,H]=(0,g.useState)(new Set),[K,J]=(0,g.useState)(1),[W]=(0,g.useState)(50),[Y,X]=(0,g.useState)({pageIndex:0,pageSize:50}),[Q,$]=(0,g.useState)([]),[ee,et]=(0,g.useState)(!1),ei=(0,g.useMemo)(()=>es()(e=>{C(e),J(1),X(e=>({...e,pageIndex:0}))},200),[]);(0,g.useEffect)(()=>(ei(N),()=>{ei.cancel()}),[N,ei]);let en="personal"===E?void 0:E.team_id,eo=(0,g.useMemo)(()=>{if(0===Q.length)return;let e=Q[0];return({input_cost:"costs",model_info_db_model:"status",model_info_created_by:"created_at",model_info_updated_at:"updated_at"})[e.id]||e.id},[Q]),ed=(0,g.useMemo)(()=>{if(0!==Q.length)return Q[0].desc?"desc":"asc"},[Q]),{data:ec,isLoading:em}=(0,m.XP)(K,W,w||void 0,void 0,en,eo,ed),eu=em||x,eh=e=>null!=u&&"object"==typeof u&&e in u?u[e].litellm_provider:"openai",ex=(0,g.useMemo)(()=>ec?ea(ec,eh):{data:[]},[ec,u]),ep=(0,g.useMemo)(()=>{var e,l,t,s;return ec?{total_count:null!==(e=ec.total_count)&&void 0!==e?e:0,current_page:null!==(l=ec.current_page)&&void 0!==l?l:1,total_pages:null!==(t=ec.total_pages)&&void 0!==t?t:1,size:null!==(s=ec.size)&&void 0!==s?s:W}:{total_count:0,current_page:1,total_pages:1,size:W}},[ec,W]),eg=(0,g.useMemo)(()=>ex&&ex.data&&0!==ex.data.length?ex.data.filter(e=>{var l,s;let a="all"===t||e.model_name===t||!t||"wildcard"===t&&(null===(l=e.model_name)||void 0===l?void 0:l.includes("*")),r="all"===T||(null===(s=e.model_info.access_groups)||void 0===s?void 0:s.includes(T))||!T;return a&&r}):[],[ex,t,T]);return(0,g.useEffect)(()=>{X(e=>({...e,pageIndex:0})),J(1)},[t,T]),(0,g.useEffect)(()=>{J(1),X(e=>({...e,pageIndex:0}))},[en]),(0,g.useEffect)(()=>{J(1),X(e=>({...e,pageIndex:0}))},[Q]),(0,s.jsxs)(V.Z,{children:[(0,s.jsx)(q.Z,{children:(0,s.jsx)("div",{className:"flex flex-col space-y-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"border-b px-6 py-4 bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(er,{className:"text-lg font-semibold text-gray-900",children:"Current Team:"}),(0,s.jsx)("div",{className:"w-80",children:eu?(0,s.jsx)(D.Z.Input,{active:!0,block:!0,size:"large"}):(0,s.jsx)(B.default,{style:{width:"100%"},size:"large",defaultValue:"personal",value:"personal"===E?"personal":E.team_id,onChange:e=>{if("personal"===e)A("personal"),J(1),X(e=>({...e,pageIndex:0}));else{let l=null==_?void 0:_.find(l=>l.team_id===e);l&&(A(l),J(1),X(e=>({...e,pageIndex:0})))}},loading:y,options:[{value:"personal",label:(0,s.jsxs)(k.Z,{direction:"horizontal",align:"center",children:[(0,s.jsx)(G.Z,{color:"blue",size:"small"}),(0,s.jsx)(er,{style:{fontSize:16},children:"Personal"})]})},...null!==(l=null==_?void 0:_.filter(e=>e.team_id).map(e=>({value:e.team_id,label:(0,s.jsxs)(k.Z,{direction:"horizontal",align:"center",children:[(0,s.jsx)(G.Z,{color:"green",size:"small"}),(0,s.jsx)(er,{ellipsis:!0,style:{fontSize:16},children:e.team_alias?e.team_alias:e.team_id})]})})))&&void 0!==l?l:[]]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(er,{className:"text-lg font-semibold text-gray-900",children:"View:"}),(0,s.jsx)("div",{className:"w-64",children:eu?(0,s.jsx)(D.Z.Input,{active:!0,block:!0,size:"large"}):(0,s.jsx)(B.default,{style:{width:"100%"},size:"large",defaultValue:"current_team",value:S,onChange:e=>P(e),options:[{value:"current_team",label:(0,s.jsxs)(k.Z,{direction:"horizontal",align:"center",children:[(0,s.jsx)(G.Z,{color:"purple",size:"small"}),(0,s.jsx)(er,{style:{fontSize:16},children:"Current Team Models"})]})},{value:"all",label:(0,s.jsxs)(k.Z,{direction:"horizontal",align:"center",children:[(0,s.jsx)(G.Z,{color:"gray",size:"small"}),(0,s.jsx)(er,{style:{fontSize:16},children:"All Available Models"})]})}]})})]})]}),"current_team"===S&&(0,s.jsxs)("div",{className:"flex items-start gap-2 mt-3",children:[(0,s.jsx)(b.Z,{className:"text-gray-400 mt-0.5 flex-shrink-0 text-xs"}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"personal"===E?(0,s.jsxs)("span",{children:["To access these models: Create a Virtual Key without selecting a team on the"," ",(0,s.jsx)("a",{href:"/public?login=success&page=api-keys",className:"text-gray-600 hover:text-gray-800 underline",children:"Virtual Keys page"})]}):(0,s.jsxs)("span",{children:['To access these models: Create a Virtual Key and select Team as "',"string"!=typeof E?E.team_alias||E.team_id:"",'" on the'," ",(0,s.jsx)("a",{href:"/public?login=success&page=api-keys",className:"text-gray-600 hover:text-gray-800 underline",children:"Virtual Keys page"})]})})]})]}),(0,s.jsx)("div",{className:"border-b px-6 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative w-64",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search model names...",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:N,onChange:e=>Z(e.target.value)}),(0,s.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,s.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 ".concat(M?"bg-gray-100":""),onClick:()=>L(!M),children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]}),(0,s.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",onClick:()=>{Z(""),a("all"),F(null),A("personal"),P("current_team"),J(1),X({pageIndex:0,pageSize:50}),$([])},children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Filters"]})]}),(0,s.jsx)(U.ZP,{icon:(0,s.jsx)(O.Z,{}),onClick:()=>et(!0),title:"Model Settings"})]}),M&&(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[(0,s.jsx)("div",{className:"w-64",children:(0,s.jsx)(B.default,{className:"w-full",value:null!=t?t:"all",onChange:e=>a("all"===e?"all":e),placeholder:"Filter by Public Model Name",showSearch:!0,options:[{value:"all",label:"All Models"},{value:"wildcard",label:"Wildcard Models (*)"},...r.map((e,l)=>({value:e,label:e}))]})}),(0,s.jsx)("div",{className:"w-64",children:(0,s.jsx)(B.default,{className:"w-full",value:null!=T?T:"all",onChange:e=>F("all"===e?null:e),placeholder:"Filter by Model Access Group",showSearch:!0,options:[{value:"all",label:"All Model Access Groups"},...i.map((e,l)=>({value:e,label:e}))]})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[eu?(0,s.jsx)(D.Z.Input,{active:!0,style:{width:184,height:20}}):(0,s.jsx)("span",{className:"text-sm text-gray-700",children:ep.total_count>0?"Showing ".concat((K-1)*W+1," - ").concat(Math.min(K*W,ep.total_count)," of ").concat(ep.total_count," results"):"Showing 0 results"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[eu?(0,s.jsx)(D.Z.Button,{active:!0,style:{width:84,height:30}}):(0,s.jsx)("button",{onClick:()=>{J(K-1),X(e=>({...e,pageIndex:0}))},disabled:1===K,className:"px-3 py-1 text-sm border rounded-md ".concat(1===K?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-gray-50"),children:"Previous"}),eu?(0,s.jsx)(D.Z.Button,{active:!0,style:{width:56,height:30}}):(0,s.jsx)("button",{onClick:()=>{J(K+1),X(e=>({...e,pageIndex:0}))},disabled:K>=ep.total_pages,className:"px-3 py-1 text-sm border rounded-md ".concat(K>=ep.total_pages?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-gray-50"),children:"Next"})]})]})]})}),(0,s.jsx)(v,{columns:R(f,p,j,o,d,z,()=>{},()=>{},I,H),data:eg,isLoading:em,sorting:Q,onSortingChange:$,pagination:Y,onPaginationChange:X,enablePagination:!0})]})})}),(0,s.jsx)(el,{isVisible:ee,onCancel:()=>et(!1),onSuccess:()=>et(!1)})]})},en=t(27281),eo=t(57365),ed=t(84264),ec=t(96761),em=t(12221);let eu={"BadRequestError (400)":"BadRequestErrorRetries","AuthenticationError  (401)":"AuthenticationErrorRetries","TimeoutError (408)":"TimeoutErrorRetries","RateLimitError (429)":"RateLimitErrorRetries","ContentPolicyViolationError (400)":"ContentPolicyViolationErrorRetries","InternalServerError (500)":"InternalServerErrorRetries"};var eh=e=>{let{selectedModelGroup:l,setSelectedModelGroup:t,availableModelGroups:a,globalRetryPolicy:r,setGlobalRetryPolicy:i,defaultRetry:n,modelGroupRetryPolicy:o,setModelGroupRetryPolicy:d,handleSaveRetrySettings:c}=e;return(0,s.jsxs)(V.Z,{children:[(0,s.jsx)("div",{className:"flex items-center gap-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ed.Z,{children:"Retry Policy Scope:"}),(0,s.jsxs)(en.Z,{className:"ml-2 w-48",defaultValue:"global",value:"global"===l?"global":l||a[0],onValueChange:e=>t(e),children:[(0,s.jsx)(eo.Z,{value:"global",children:"Global Default"}),a.map((e,l)=>(0,s.jsx)(eo.Z,{value:e,onClick:()=>t(e),children:e},l))]})]})}),"global"===l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ec.Z,{children:"Global Retry Policy"}),(0,s.jsx)(ed.Z,{className:"mb-6",children:"Default retry settings applied to all model groups unless overridden"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ec.Z,{children:["Retry Policy for ",l]}),(0,s.jsx)(ed.Z,{className:"mb-6",children:"Model-specific retry settings. Falls back to global defaults if not set."})]}),eu&&(0,s.jsx)("table",{children:(0,s.jsx)("tbody",{children:Object.entries(eu).map((e,t)=>{var a,c,m,u;let h,[x,p]=e;if("global"===l)h=null!==(a=null==r?void 0:r[p])&&void 0!==a?a:n;else{let e=null==o?void 0:null===(c=o[l])||void 0===c?void 0:c[p];h=null!=e?e:null!==(m=null==r?void 0:r[p])&&void 0!==m?m:n}return(0,s.jsxs)("tr",{className:"flex justify-between items-center mt-2",children:[(0,s.jsxs)("td",{children:[(0,s.jsx)(ed.Z,{children:x}),"global"!==l&&(0,s.jsxs)(ed.Z,{className:"text-xs text-gray-500 ml-2",children:["(Global: ",null!==(u=null==r?void 0:r[p])&&void 0!==u?u:n,")"]})]}),(0,s.jsx)("td",{children:(0,s.jsx)(em.Z,{className:"ml-5",value:h,min:0,step:1,onChange:e=>{"global"===l?i(l=>null==e?l:{...null!=l?l:{},[p]:e}):d(t=>{var s;let a=null!==(s=null==t?void 0:t[l])&&void 0!==s?s:{};return{...null!=t?t:{},[l]:{...a,[p]:e}}})}})})]},t)})})}),(0,s.jsx)(w.Z,{className:"mt-6 mr-8",onClick:c,children:"Save"})]})},ex=t(867),ep=t(5945),eg=t(3810),ef=t(89245),ej=t(5540),ev=t(8881),e_=t(87933),ey=t(44625),eb=t(35291);let{Text:eN}=S.default;var eZ=e=>{let{accessToken:l,onReloadSuccess:t,buttonText:r="Reload Price Data",showIcon:i=!0,size:n="middle",type:o="primary",className:d=""}=e,[c,m]=(0,g.useState)(!1),[u,h]=(0,g.useState)(!1),[x,p]=(0,g.useState)(!1),[f,j]=(0,g.useState)(!1),[v,_]=(0,g.useState)(6),[y,N]=(0,g.useState)(null),[Z,w]=(0,g.useState)(!1),[C,S]=(0,g.useState)(null),[P,M]=(0,g.useState)(!1);(0,g.useEffect)(()=>{L(),T();let e=setInterval(()=>{L(),T()},3e4);return()=>clearInterval(e)},[l]);let L=async()=>{if(l){w(!0);try{console.log("Fetching reload status...");let e=await (0,a.getModelCostMapReloadStatus)(l);console.log("Received status:",e),N(e)}catch(e){console.error("Failed to fetch reload status:",e),N({scheduled:!1,interval_hours:null,last_run:null,next_run:null})}finally{w(!1)}}},T=async()=>{if(l){M(!0);try{let e=await (0,a.getModelCostMapSource)(l);S(e)}catch(e){console.error("Failed to fetch cost map source info:",e)}finally{M(!1)}}},F=async()=>{if(!l){Y.ZP.fromBackend("No access token available");return}m(!0);try{let e=await (0,a.reloadModelCostMap)(l);"success"===e.status?(Y.ZP.success("Price data reloaded successfully! ".concat(e.models_count||0," models updated.")),null==t||t(),await L(),await T()):Y.ZP.fromBackend("Failed to reload price data")}catch(e){console.error("Error reloading price data:",e),Y.ZP.fromBackend("Failed to reload price data. Please try again.")}finally{m(!1)}},I=async()=>{if(!l){Y.ZP.fromBackend("No access token available");return}if(v<=0){Y.ZP.fromBackend("Hours must be greater than 0");return}h(!0);try{let e=await (0,a.scheduleModelCostMapReload)(l,v);"success"===e.status?(Y.ZP.success("Periodic reload scheduled for every ".concat(v," hours")),j(!1),await L()):Y.ZP.fromBackend("Failed to schedule periodic reload")}catch(e){console.error("Error scheduling reload:",e),Y.ZP.fromBackend("Failed to schedule periodic reload. Please try again.")}finally{h(!1)}},R=async()=>{if(!l){Y.ZP.fromBackend("No access token available");return}p(!0);try{let e=await (0,a.cancelModelCostMapReload)(l);"success"===e.status?(Y.ZP.success("Periodic reload cancelled successfully"),await L()):Y.ZP.fromBackend("Failed to cancel periodic reload")}catch(e){console.error("Error cancelling reload:",e),Y.ZP.fromBackend("Failed to cancel periodic reload. Please try again.")}finally{p(!1)}},z=e=>{if(!e)return"Never";try{return new Date(e).toLocaleString()}catch(l){return e}};return(0,s.jsxs)("div",{className:d,children:[(0,s.jsxs)(k.Z,{direction:"horizontal",size:"middle",style:{marginBottom:16},children:[(0,s.jsx)(ex.Z,{title:"Hard Refresh Price Data",description:"This will immediately fetch the latest pricing information from the remote source. Continue?",onConfirm:F,okText:"Yes",cancelText:"No",okButtonProps:{style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem",transition:"all 0.2s ease-in-out"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4f46e5"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1"}},children:(0,s.jsx)(U.ZP,{type:o,size:n,loading:c,icon:i?(0,s.jsx)(ef.Z,{}):void 0,style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem",transition:"all 0.2s ease-in-out"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4f46e5"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1"},children:r})}),(null==y?void 0:y.scheduled)?(0,s.jsx)(U.ZP,{type:"default",size:n,danger:!0,icon:(0,s.jsx)(ev.Z,{}),loading:x,onClick:R,style:{borderColor:"#ff4d4f",color:"#ff4d4f",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem"},children:"Cancel Periodic Reload"}):(0,s.jsx)(U.ZP,{type:"default",size:n,icon:(0,s.jsx)(ej.Z,{}),onClick:()=>j(!0),style:{borderColor:"#d9d9d9",color:"#6366f1",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem"},children:"Set Up Periodic Reload"})]}),C&&(0,s.jsx)(ep.Z,{size:"small",style:{backgroundColor:"remote"===C.source?"#f0f7ff":"#fff8f0",border:"1px solid ".concat("remote"===C.source?"#bae0ff":"#ffd591"),borderRadius:8,marginBottom:12},children:(0,s.jsxs)(k.Z,{direction:"vertical",size:"small",style:{width:"100%"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:["remote"===C.source?(0,s.jsx)(e_.Z,{style:{color:"#1677ff",fontSize:16}}):(0,s.jsx)(ey.Z,{style:{color:"#fa8c16",fontSize:16}}),(0,s.jsx)(eN,{strong:!0,style:{fontSize:"13px"},children:"Pricing Data Source"}),(0,s.jsx)(eg.Z,{color:"remote"===C.source?"blue":"orange",style:{marginLeft:"auto",fontWeight:600,textTransform:"uppercase",fontSize:"11px"},children:"remote"===C.source?"Remote":"Local"})]}),(0,s.jsx)(E.Z,{style:{margin:"6px 0"}}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(eN,{type:"secondary",style:{fontSize:"12px"},children:"Models loaded:"}),(0,s.jsx)(eN,{strong:!0,style:{fontSize:"12px"},children:C.model_count.toLocaleString()})]}),C.url&&(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:8},children:[(0,s.jsx)(eN,{type:"secondary",style:{fontSize:"12px",whiteSpace:"nowrap"},children:"remote"===C.source?"Loaded from:":"Attempted URL:"}),(0,s.jsx)(A.Z,{title:C.url,children:(0,s.jsx)(eN,{style:{fontSize:"11px",maxWidth:240,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block",color:"#1677ff",cursor:"default"},children:C.url})})]}),C.is_env_forced&&(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,marginTop:2},children:[(0,s.jsx)(b.Z,{style:{color:"#fa8c16",fontSize:12}}),(0,s.jsxs)(eN,{type:"secondary",style:{fontSize:"11px"},children:["Local mode forced via ",(0,s.jsx)("code",{children:"LITELLM_LOCAL_MODEL_COST_MAP=True"})]})]}),C.fallback_reason&&(0,s.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:6,backgroundColor:"#fff7e6",border:"1px solid #ffd591",borderRadius:4,padding:"4px 8px",marginTop:2},children:[(0,s.jsx)(eb.Z,{style:{color:"#fa8c16",fontSize:12,marginTop:2}}),(0,s.jsxs)(eN,{style:{fontSize:"11px",color:"#614700"},children:["Fell back to local: ",C.fallback_reason]})]})]})}),y&&(0,s.jsx)(ep.Z,{size:"small",style:{backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8},children:(0,s.jsxs)(k.Z,{direction:"vertical",size:"small",style:{width:"100%"},children:[y.scheduled?(0,s.jsx)("div",{children:(0,s.jsxs)(eg.Z,{color:"green",icon:(0,s.jsx)(ej.Z,{}),children:["Scheduled every ",y.interval_hours," hours"]})}):(0,s.jsx)(eN,{type:"secondary",children:"No periodic reload scheduled"}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(eN,{type:"secondary",style:{fontSize:"12px"},children:"Last run:"}),(0,s.jsx)(eN,{style:{fontSize:"12px"},children:z(y.last_run)})]}),y.scheduled&&(0,s.jsxs)(s.Fragment,{children:[y.next_run&&(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(eN,{type:"secondary",style:{fontSize:"12px"},children:"Next run:"}),(0,s.jsx)(eN,{style:{fontSize:"12px"},children:z(y.next_run)})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(eN,{type:"secondary",style:{fontSize:"12px"},children:"Status:"}),(0,s.jsx)(eg.Z,{color:(null==y?void 0:y.scheduled)?y.last_run?"success":"processing":"default",children:(null==y?void 0:y.scheduled)?y.last_run?"Active":"Ready":"Not scheduled"})]})]})]})}),(0,s.jsxs)($.Z,{title:"Set Up Periodic Reload",open:f,onOk:I,onCancel:()=>j(!1),confirmLoading:u,okText:"Schedule",cancelText:"Cancel",okButtonProps:{style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white"}},children:[(0,s.jsx)("div",{style:{marginBottom:16},children:(0,s.jsx)(eN,{children:"Set up automatic reload of price data every:"})}),(0,s.jsx)("div",{style:{marginBottom:16},children:(0,s.jsx)(em.Z,{min:1,max:168,value:v,onChange:e=>_(e||6),addonAfter:"hours",style:{width:"100%"}})}),(0,s.jsx)("div",{children:(0,s.jsxs)(eN,{type:"secondary",children:["This will automatically fetch the latest pricing data from the remote source every ",v," hours."]})})]})]})},ew=()=>{let{accessToken:e}=(0,n.Z)(),{refetch:l}=(0,c.i)();return(0,s.jsx)(V.Z,{children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)(ec.Z,{children:"Price Data Management"}),(0,s.jsx)(ed.Z,{className:"text-tremor-content",children:"Manage model pricing data and configure automatic reload schedules"})]}),(0,s.jsx)(eZ,{accessToken:e,onReloadSuccess:()=>{l()},buttonText:"Reload Price Data",size:"middle",type:"primary",className:"w-full"})]})})},eC=t(42673);let eS=async(e,l,t)=>{try{var s,a;console.log("handling submit for formValues:",e);let l=e.model_mappings||[];if("model_mappings"in e&&delete e.model_mappings,e.model&&e.model.includes("all-wildcard")){let t=e.custom_llm_provider,a=(null!==(s=eC.fK[t])&&void 0!==s?s:t.toLowerCase())+"/*";e.model_name=a,l.push({public_name:a,litellm_model:a}),e.model=a}let t=[];for(let s of l){let l={},r={},i=s.public_name;for(let[t,i]of(l.model=s.litellm_model,e.input_cost_per_token&&(e.input_cost_per_token=Number(e.input_cost_per_token)/1e6),e.output_cost_per_token&&(e.output_cost_per_token=Number(e.output_cost_per_token)/1e6),l.model=s.litellm_model,console.log("formValues add deployment:",e),Object.entries(e)))if(""!==i&&"custom_pricing"!==t&&"pricing_model"!==t&&"cache_control"!==t){if("model_name"==t)l.model=i;else if("custom_llm_provider"==t){console.log("custom_llm_provider:",i);let e=null!==(a=eC.fK[i])&&void 0!==a?a:i.toLowerCase();l.custom_llm_provider=e,console.log("custom_llm_provider mappingResult:",e)}else if("model"==t)continue;else if("base_model"===t)r[t]=i;else if("team_id"===t)r.team_id=i;else if("model_access_group"===t)r.access_groups=i;else if("mode"==t)console.log("placing mode in modelInfo"),r.mode=i,delete l.mode;else if("custom_model_name"===t)l.model=i;else if("litellm_extra_params"==t){console.log("litellm_extra_params:",i);let e={};if(i&&void 0!=i){try{e=JSON.parse(i)}catch(e){throw Y.ZP.fromBackend("Failed to parse LiteLLM Extra Params: "+e),Error("Failed to parse litellm_extra_params: "+e)}for(let[t,s]of Object.entries(e))l[t]=s}}else if("model_info_params"==t){console.log("model_info_params:",i);let e={};if(i&&void 0!=i){try{e=JSON.parse(i)}catch(e){throw Y.ZP.fromBackend("Failed to parse LiteLLM Extra Params: "+e),Error("Failed to parse litellm_extra_params: "+e)}for(let[l,t]of Object.entries(e))r[l]=t}}else if("input_cost_per_token"===t||"output_cost_per_token"===t||"input_cost_per_second"===t){i&&(l[t]=Number(i));continue}else l[t]=i}t.push({litellmParamsObj:l,modelInfoObj:r,modelName:i})}return t}catch(e){Y.ZP.fromBackend("Failed to create model: "+e)}},ek=async(e,l,t,s)=>{try{let r=await eS(e,l,t);if(!r||0===r.length)return;for(let e of r){let{litellmParamsObj:t,modelInfoObj:s,modelName:r}=e,i={model_name:r,litellm_params:t,model_info:s},n=await (0,a.modelCreateCall)(l,i);console.log("response for model create call: ".concat(n.data))}s&&s(),t.resetFields()}catch(e){Y.ZP.fromBackend("Failed to add model: "+e)}};var eP=t(53410),eE=t(62490),eA=t(21609),eM=t(31283);let eL=(0,i.n)("providerFields"),eT=()=>(0,r.a)({queryKey:eL.list({}),queryFn:async()=>await (0,a.getProviderCreateMetadata)(),staleTime:864e5,gcTime:864e5});var eF=t(3632),eI=t(56522),eR=t(47451),ez=t(69410),eO=t(65319),eq=t(4260);let{Link:eV}=S.default,eD=e=>{var l,t,s,a,r;let i="password"===e.field_type?"password":"select"===e.field_type?"select":"upload"===e.field_type?"upload":"textarea"===e.field_type?"textarea":"text";return{key:e.key,label:e.label,placeholder:null!==(l=e.placeholder)&&void 0!==l?l:void 0,tooltip:null!==(t=e.tooltip)&&void 0!==t?t:void 0,required:null!==(s=e.required)&&void 0!==s&&s,type:i,options:null!==(a=e.options)&&void 0!==a?a:void 0,defaultValue:null!==(r=e.default_value)&&void 0!==r?r:void 0}},eB={};var eG=e=>{let{selectedProvider:l,uploadProps:t}=e,a=eC.Cl[l],r=Q.Z.useFormInstance(),{data:i,isLoading:n,error:o}=eT(),d=g.useMemo(()=>{if(!i)return null;let e={};return i.forEach(l=>{let t=l.provider_display_name,s=l.credential_fields.map(eD);e[t]=s,l.provider&&(e[l.provider]=s),l.litellm_provider&&(e[l.litellm_provider]=s)}),e},[i]);g.useEffect(()=>{d&&Object.assign(eB,d)},[d]);let c=g.useMemo(()=>{var e;let t=null!==(e=eB[a])&&void 0!==e?e:eB[l];if(t)return t;if(!i)return[];let s=i.find(e=>e.provider_display_name===a||e.provider===l||e.litellm_provider===l);if(!s)return[];let r=s.credential_fields.map(eD);return eB[s.provider_display_name]=r,s.provider&&(eB[s.provider]=r),s.litellm_provider&&(eB[s.litellm_provider]=r),r},[a,l,i]),m={name:"file",accept:".json",beforeUpload:e=>{if("application/json"===e.type){let l=new FileReader;l.onload=e=>{if(e.target){let l=e.target.result;console.log("Setting field value from JSON, length: ".concat(l.length)),r.setFieldsValue({vertex_credentials:l}),console.log("Form values after setting:",r.getFieldsValue())}},l.readAsText(e)}return!1},onChange(e){console.log("Upload onChange triggered in ProviderSpecificFields"),console.log("Current form values:",r.getFieldsValue()),"uploading"!==e.file.status&&console.log(e.file,e.fileList)}};return(0,s.jsxs)(s.Fragment,{children:[n&&0===c.length&&(0,s.jsx)(eR.Z,{children:(0,s.jsx)(ez.Z,{span:24,children:(0,s.jsx)(eI.x,{className:"mb-2",children:"Loading provider fields..."})})}),o&&0===c.length&&(0,s.jsx)(eR.Z,{children:(0,s.jsx)(ez.Z,{span:24,children:(0,s.jsx)(eI.x,{className:"mb-2 text-red-500",children:o instanceof Error?o.message:"Failed to load provider credential fields"})})}),c.map(e=>{var l;return(0,s.jsxs)(g.Fragment,{children:[(0,s.jsx)(Q.Z.Item,{label:e.label,name:e.key,rules:e.required?[{required:!0,message:"Required"}]:void 0,tooltip:e.tooltip,className:"vertex_credentials"===e.key?"mb-0":void 0,children:"select"===e.type?(0,s.jsx)(B.default,{placeholder:e.placeholder,defaultValue:e.defaultValue,children:null===(l=e.options)||void 0===l?void 0:l.map(e=>(0,s.jsx)(B.default.Option,{value:e,children:e},e))}):"upload"===e.type?(0,s.jsx)(eO.default,{...m,onChange:l=>{(null==t?void 0:t.onChange)&&t.onChange(l),setTimeout(()=>{let l=r.getFieldValue(e.key);console.log("".concat(e.key," value after upload:"),JSON.stringify(l))},500)},children:(0,s.jsx)(U.ZP,{icon:(0,s.jsx)(eF.Z,{}),children:"Click to Upload"})}):"textarea"===e.type?(0,s.jsx)(eq.default.TextArea,{placeholder:e.placeholder,defaultValue:e.defaultValue,rows:6,style:{fontFamily:"monospace",fontSize:"12px"}}):(0,s.jsx)(eI.o,{placeholder:e.placeholder,type:"password"===e.type?"password":"text",defaultValue:e.defaultValue})}),"vertex_credentials"===e.key&&(0,s.jsx)(eR.Z,{children:(0,s.jsx)(ez.Z,{children:(0,s.jsx)(eI.x,{className:"mb-3 mt-1",children:"Give a gcp service account(.json file)"})})}),"base_model"===e.key&&(0,s.jsxs)(eR.Z,{children:[(0,s.jsx)(ez.Z,{span:10}),(0,s.jsx)(ez.Z,{span:10,children:(0,s.jsxs)(eI.x,{className:"mb-2",children:["The actual model your azure deployment uses. Used for accurate cost tracking. Select name from"," ",(0,s.jsx)(eV,{href:"https://github.com/BerriAI/litellm/blob/main/model_prices_and_context_window.json",target:"_blank",children:"here"})]})})]})]},e.key)})]})};let{Link:eU}=S.default;var eH=e=>{let{open:l,onCancel:t,onAddCredential:a,uploadProps:r}=e,[i]=Q.Z.useForm(),[n,o]=(0,g.useState)(eC.Cl.OpenAI);return(0,s.jsx)($.Z,{title:"Add New Credential",open:l,onCancel:()=>{t(),i.resetFields()},footer:null,width:600,children:(0,s.jsxs)(Q.Z,{form:i,onFinish:e=>{a(Object.entries(e).reduce((e,l)=>{let[t,s]=l;return""!==s&&null!=s&&(e[t]=s),e},{})),i.resetFields()},layout:"vertical",children:[(0,s.jsx)(Q.Z.Item,{label:"Credential Name:",name:"credential_name",rules:[{required:!0,message:"Credential name is required"}],children:(0,s.jsx)(eM.o,{placeholder:"Enter a friendly name for these credentials"})}),(0,s.jsx)(Q.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Provider:",name:"custom_llm_provider",tooltip:"Helper to auto-populate provider specific fields",children:(0,s.jsx)(B.default,{showSearch:!0,onChange:e=>{o(e),i.setFieldValue("custom_llm_provider",e)},children:Object.entries(eC.Cl).map(e=>{let[l,t]=e;return(0,s.jsx)(B.default.Option,{value:l,children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("img",{src:eC.cd[t],alt:"".concat(l," logo"),className:"w-5 h-5",onError:e=>{let l=e.target,s=l.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,l)}}}),(0,s.jsx)("span",{children:t})]})},l)})})}),(0,s.jsx)(eG,{selectedProvider:n,uploadProps:r}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(A.Z,{title:"Get help on our github",children:(0,s.jsx)(eU,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(U.ZP,{onClick:()=>{t(),i.resetFields()},style:{marginRight:10},children:"Cancel"}),(0,s.jsx)(U.ZP,{htmlType:"submit",children:"Add Credential"})]})]})]})})};let{Link:eK}=S.default;function eJ(e){let{open:l,onCancel:t,onUpdateCredential:a,uploadProps:r,existingCredential:i}=e,[n]=Q.Z.useForm(),[o,d]=(0,g.useState)(eC.Cl.Anthropic);return(0,g.useEffect)(()=>{if(i){let e=Object.entries(i.credential_values||{}).reduce((e,l)=>{let[t,s]=l;return e[t]=null!=s?s:null,e},{});n.setFieldsValue({credential_name:i.credential_name,custom_llm_provider:i.credential_info.custom_llm_provider,...e}),d(i.credential_info.custom_llm_provider)}},[i]),(0,s.jsx)($.Z,{title:"Edit Credential",open:l,onCancel:()=>{t(),n.resetFields()},footer:null,width:600,destroyOnHidden:!0,children:(0,s.jsxs)(Q.Z,{form:n,onFinish:e=>{a(Object.entries(e).reduce((e,l)=>{let[t,s]=l;return""!==s&&null!=s&&(e[t]=s),e},{})),n.resetFields()},layout:"vertical",children:[(0,s.jsx)(Q.Z.Item,{label:"Credential Name:",name:"credential_name",rules:[{required:!0,message:"Credential name is required"}],initialValue:null==i?void 0:i.credential_name,children:(0,s.jsx)(eM.o,{placeholder:"Enter a friendly name for these credentials",disabled:null!=i&&!!i.credential_name})}),(0,s.jsx)(Q.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Provider:",name:"custom_llm_provider",tooltip:"Helper to auto-populate provider specific fields",children:(0,s.jsx)(B.default,{showSearch:!0,onChange:e=>{d(e),n.setFieldValue("custom_llm_provider",e)},children:Object.entries(eC.Cl).map(e=>{let[l,t]=e;return(0,s.jsx)(B.default.Option,{value:l,children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("img",{src:eC.cd[t],alt:"".concat(l," logo"),className:"w-5 h-5",onError:e=>{let l=e.target,s=l.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,l)}}}),(0,s.jsx)("span",{children:t})]})},l)})})}),(0,s.jsx)(eG,{selectedProvider:o,uploadProps:r}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(A.Z,{title:"Get help on our github",children:(0,s.jsx)(eK,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(U.ZP,{onClick:()=>{t(),n.resetFields()},style:{marginRight:10},children:"Cancel"}),(0,s.jsx)(U.ZP,{htmlType:"submit",children:"Update Credential"})]})]})]})})}var eW=e=>{var l;let{uploadProps:t}=e,{accessToken:r}=(0,n.Z)(),{data:i,refetch:o}=d(),c=(null==i?void 0:i.credentials)||[],[m,u]=(0,g.useState)(!1),[h,x]=(0,g.useState)(!1),[p,f]=(0,g.useState)(null),[j,v]=(0,g.useState)(null),[_,y]=(0,g.useState)(!1),[b,Z]=(0,g.useState)(!1),[w]=Q.Z.useForm(),C=["credential_name","custom_llm_provider"],S=async e=>{if(!r)return;let l=Object.entries(e).filter(e=>{let[l]=e;return!C.includes(l)}).reduce((e,l)=>{let[t,s]=l;return{...e,[t]:s}},{}),t={credential_name:e.credential_name,credential_values:l,credential_info:{custom_llm_provider:e.custom_llm_provider}};await (0,a.credentialUpdateCall)(r,e.credential_name,t),Y.ZP.success("Credential updated successfully"),x(!1),await o()},k=async e=>{if(!r)return;let l=Object.entries(e).filter(e=>{let[l]=e;return!C.includes(l)}).reduce((e,l)=>{let[t,s]=l;return{...e,[t]:s}},{}),t={credential_name:e.credential_name,credential_values:l,credential_info:{custom_llm_provider:e.custom_llm_provider}};await (0,a.credentialCreateCall)(r,t),Y.ZP.success("Credential added successfully"),u(!1),await o()},P=e=>{let l={openai:"blue",azure:"indigo",anthropic:"purple",default:"gray"},t=l[e.toLowerCase()]||l.default;return(0,s.jsx)(eE.Ct,{color:t,size:"xs",children:e})},E=async()=>{if(r&&j){Z(!0);try{await (0,a.credentialDeleteCall)(r,j.credential_name),Y.ZP.success("Credential deleted successfully"),await o()}catch(e){Y.ZP.error("Failed to delete credential")}finally{v(null),y(!1),Z(!1)}}},A=e=>{v(e),y(!0)};return(0,s.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto p-2",children:[(0,s.jsx)(eE.zx,{onClick:()=>u(!0),children:"Add Credential"}),(0,s.jsx)("div",{className:"flex justify-between items-center mt-4 mb-4",children:(0,s.jsx)(eE.xv,{children:"Configured credentials for different AI providers. Add and manage your API credentials."})}),(0,s.jsx)(eE.Zb,{children:(0,s.jsxs)(eE.iA,{children:[(0,s.jsx)(eE.ss,{children:(0,s.jsxs)(eE.SC,{children:[(0,s.jsx)(eE.xs,{children:"Credential Name"}),(0,s.jsx)(eE.xs,{children:"Provider"}),(0,s.jsx)(eE.xs,{children:"Actions"})]})}),(0,s.jsx)(eE.RM,{children:c&&0!==c.length?c.map((e,l)=>{var t;return(0,s.jsxs)(eE.SC,{children:[(0,s.jsx)(eE.pj,{children:e.credential_name}),(0,s.jsx)(eE.pj,{children:P((null===(t=e.credential_info)||void 0===t?void 0:t.custom_llm_provider)||"-")}),(0,s.jsxs)(eE.pj,{children:[(0,s.jsx)(eE.zx,{icon:eP.Z,variant:"light",size:"sm",onClick:()=>{f(e),x(!0)}}),(0,s.jsx)(eE.zx,{icon:N.Z,variant:"light",size:"sm",onClick:()=>A(e),className:"ml-2"})]})]},l)}):(0,s.jsx)(eE.SC,{children:(0,s.jsx)(eE.pj,{colSpan:4,className:"text-center py-4 text-gray-500",children:"No credentials configured"})})})]})}),m&&(0,s.jsx)(eH,{onAddCredential:k,open:m,onCancel:()=>u(!1),uploadProps:t}),h&&(0,s.jsx)(eJ,{open:h,existingCredential:p,onUpdateCredential:S,uploadProps:t,onCancel:()=>x(!1)}),(0,s.jsx)(eA.Z,{isOpen:_,onCancel:()=>{v(null),y(!1)},onOk:E,title:"Delete Credential?",message:"Are you sure you want to delete this credential? This action cannot be undone and may break existing integrations.",resourceInformationTitle:"Credential Information",resourceInformation:[{label:"Credential Name",value:null==j?void 0:j.credential_name},{label:"Provider",value:(null==j?void 0:null===(l=j.credential_info)||void 0===l?void 0:l.custom_llm_provider)||"-"}],confirmLoading:b,requiredConfirmation:null==j?void 0:j.credential_name})]})},eY=t(20347),eX=t(23628),eQ=t(29827),e$=t(49804),e0=t(12485),e1=t(18135),e2=t(35242),e4=t(77991),e5=t(34419),e6=t(58643),e3=t(29967),e8=t(29),e7=t.n(e8),e9=t(23639);let{Text:le}=S.default;var ll=e=>{let{formValues:l,accessToken:t,testMode:r,modelName:i="this model",onClose:n,onTestComplete:o}=e,[d,c]=g.useState(null),[m,u]=g.useState(null),[h,x]=g.useState(null),[p,f]=g.useState(!0),[j,v]=g.useState(!1),[_,y]=g.useState(!1),N=async()=>{f(!0),y(!1),c(null),u(null),x(null),v(!1),await new Promise(e=>setTimeout(e,100));try{console.log("Testing connection with form values:",l);let r=await eS(l,t,null);if(!r){console.log("No result from prepareModelAddRequest"),c("Failed to prepare model data. Please check your form inputs."),v(!1),f(!1);return}console.log("Result from prepareModelAddRequest:",r);let{litellmParamsObj:i,modelInfoObj:n,modelName:o}=r[0],d=await (0,a.testConnectionRequest)(t,i,n,null==n?void 0:n.mode);if("success"===d.status)Y.ZP.success("Connection test successful!"),c(null),v(!0);else{var e,s;let l=(null===(e=d.result)||void 0===e?void 0:e.error)||d.message||"Unknown error";c(l),u(i),x(null===(s=d.result)||void 0===s?void 0:s.raw_request_typed_dict),v(!1)}}catch(e){console.error("Test connection error:",e),c(e instanceof Error?e.message:String(e)),v(!1)}finally{f(!1),o&&o()}};g.useEffect(()=>{let e=setTimeout(()=>{N()},200);return()=>clearTimeout(e)},[]);let Z=e=>e?e.split("stack trace:")[0].trim().replace(/^litellm\.(.*?)Error: /,""):"Unknown error",w="string"==typeof d?Z(d):(null==d?void 0:d.message)?Z(d.message):"Unknown error",C=h?((e,l,t)=>{let s=JSON.stringify(l,null,2).split("\n").map(e=>"  ".concat(e)).join("\n"),a=Object.entries(t).map(e=>{let[l,t]=e;return"-H '".concat(l,": ").concat(t,"'")}).join(" \\\n  ");return"curl -X POST \\\n  ".concat(e," \\\n  ").concat(a?"".concat(a," \\\n  "):"","-H 'Content-Type: application/json' \\\n  -d '{\n").concat(s,"\n  }'")})(h.raw_request_api_base,h.raw_request_body,h.raw_request_headers||{}):"";return(0,s.jsxs)("div",{style:{padding:"24px",borderRadius:"8px",backgroundColor:"#fff"},children:[p?(0,s.jsxs)("div",{style:{textAlign:"center",padding:"32px 20px"},className:"jsx-dc9a0e2d897fe63b",children:[(0,s.jsx)("div",{style:{marginBottom:"16px"},className:"jsx-dc9a0e2d897fe63b loading-spinner",children:(0,s.jsx)("div",{style:{border:"3px solid #f3f3f3",borderTop:"3px solid #1890ff",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite",margin:"0 auto"},className:"jsx-dc9a0e2d897fe63b"})}),(0,s.jsxs)(le,{style:{fontSize:"16px"},children:["Testing connection to ",i,"..."]}),(0,s.jsx)(e7(),{id:"dc9a0e2d897fe63b",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):j?(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"32px 20px"},children:[(0,s.jsx)("div",{style:{color:"#52c41a",fontSize:"24px",display:"flex",alignItems:"center"},children:(0,s.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"check-circle",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"})})}),(0,s.jsxs)(le,{type:"success",style:{fontSize:"18px",fontWeight:500,marginLeft:"10px"},children:["Connection to ",i," successful!"]})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[(0,s.jsx)(eb.Z,{style:{color:"#ff4d4f",fontSize:"24px",marginRight:"12px"}}),(0,s.jsxs)(le,{type:"danger",style:{fontSize:"18px",fontWeight:500},children:["Connection to ",i," failed"]})]}),(0,s.jsxs)("div",{style:{backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:"8px",padding:"16px",marginBottom:"20px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.03)"},children:[(0,s.jsxs)(le,{strong:!0,style:{display:"block",marginBottom:"8px"},children:["Error:"," "]}),(0,s.jsx)(le,{type:"danger",style:{fontSize:"14px",lineHeight:"1.5"},children:w}),d&&(0,s.jsx)("div",{style:{marginTop:"12px"},children:(0,s.jsx)(U.ZP,{type:"link",onClick:()=>y(!_),style:{paddingLeft:0,height:"auto"},children:_?"Hide Details":"Show Details"})})]}),_&&(0,s.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,s.jsx)(le,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"Troubleshooting Details"}),(0,s.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"200px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5"},children:"string"==typeof d?d:JSON.stringify(d,null,2)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(le,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"API Request"}),(0,s.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"250px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5"},children:C||"No request data available"}),(0,s.jsx)(U.ZP,{style:{marginTop:"8px"},icon:(0,s.jsx)(e9.Z,{}),onClick:()=>{navigator.clipboard.writeText(C||""),Y.ZP.success("Copied to clipboard")},children:"Copy to Clipboard"})]})]})}),(0,s.jsx)(E.Z,{style:{margin:"24px 0 16px"}}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,s.jsx)(U.ZP,{type:"link",href:"https://docs.litellm.ai/docs/providers",target:"_blank",icon:(0,s.jsx)(b.Z,{}),children:"View Documentation"})})]})};let lt=async(e,l,t,s)=>{try{let r;console.log("=== AUTO ROUTER SUBMIT HANDLER CALLED ==="),console.log("handling auto router submit for formValues:",e),console.log("Model type:",e.model_type),"complexity_router"===e.model_type?(console.log("Creating complexity router configuration"),r={model_name:e.auto_router_name,litellm_params:{model:"auto_router/complexity_router",complexity_router_config:e.complexity_router_config,complexity_router_default_model:e.auto_router_default_model},model_info:{}},console.log("Complexity router config:",e.complexity_router_config)):(console.log("Creating semantic router configuration"),r={model_name:e.auto_router_name,litellm_params:{model:"auto_router/".concat(e.auto_router_name),auto_router_config:JSON.stringify(e.auto_router_config),auto_router_default_model:e.auto_router_default_model},model_info:{}},e.auto_router_embedding_model&&"custom"!==e.auto_router_embedding_model?r.litellm_params.auto_router_embedding_model=e.auto_router_embedding_model:e.custom_embedding_model&&(r.litellm_params.auto_router_embedding_model=e.custom_embedding_model),console.log("Semantic router config (stringified):",r.litellm_params.auto_router_config)),e.team_id&&(r.model_info.team_id=e.team_id),e.model_access_group&&e.model_access_group.length>0&&(r.model_info.access_groups=e.model_access_group),console.log("Auto router configuration to be created:",r),console.log("Calling modelCreateCall...");let i=await (0,a.modelCreateCall)(l,r);console.log("response for auto router create call:",i);let n="complexity_router"===e.model_type?"Complexity Router":"Semantic Router";Y.ZP.success("Successfully created ".concat(n,": ").concat(e.auto_router_name)),t.resetFields(),s&&s()}catch(e){console.error("Failed to add auto router:",e),Y.ZP.fromBackend("Failed to add auto router: "+e)}};var ls=t(10703),la=t(96473),lr=t(26349),li=t(85180),ln=t(44851);let{Text:lo}=S.default,{TextArea:ld}=eq.default;var lc=e=>{let{modelInfo:l,value:t,onChange:a}=e,[r,i]=(0,g.useState)([]),[n,o]=(0,g.useState)(!1),[d,c]=(0,g.useState)([]);(0,g.useEffect)(()=>{let e=null==t?void 0:t.routes;if(e){let l=[];i(t=>e.map((e,s)=>{var a;let r=t[s],i=(null==r?void 0:r.id)||e.id||"route-".concat(s,"-").concat(Date.now());return l.push(i),{id:i,model:e.name||e.model||"",utterances:e.utterances||[],description:e.description||"",score_threshold:null!==(a=e.score_threshold)&&void 0!==a?a:.5}})),c(l)}else i([]),c([])},[t]);let m=e=>{let l=r.filter(l=>l.id!==e);i(l),h(l),c(l=>l.filter(l=>l!==e))},u=(e,l,t)=>{let s=r.map(s=>s.id===e?{...s,[l]:t}:s);i(s),h(s)},h=e=>{let l={routes:e.map(e=>({name:e.model,utterances:e.utterances,description:e.description,score_threshold:e.score_threshold}))};null==a||a(l)},x=l.map(e=>({value:e.model_group,label:e.model_group}));return(0,s.jsxs)("div",{className:"w-full max-w-none",children:[(0,s.jsxs)(P.Z,{justify:"space-between",align:"center",gap:"middle",style:{width:"100%",marginBottom:24},children:[(0,s.jsxs)(k.Z,{align:"center",children:[(0,s.jsx)(S.default.Title,{level:4,style:{margin:0},children:"Routes Configuration"}),(0,s.jsx)(A.Z,{title:"Configure routing logic to automatically select the best model based on user input patterns",children:(0,s.jsx)(b.Z,{className:"text-gray-400"})})]}),(0,s.jsx)(U.ZP,{type:"primary",icon:(0,s.jsx)(la.Z,{}),onClick:()=>{let e="route-".concat(Date.now()),l=[...r,{id:e,model:"",utterances:[],description:"",score_threshold:.5}];i(l),h(l),c(l=>[...l,e])},className:"bg-blue-600 hover:bg-blue-700",children:"Add Route"})]}),0===r.length?(0,s.jsx)(ep.Z,{children:(0,s.jsx)(li.Z,{description:'No routes configured. Click "Add Route" to get started.'})}):(0,s.jsx)(ln.default,{activeKey:d,onChange:e=>c(Array.isArray(e)?e:[e].filter(Boolean)),style:{width:"100%"},items:r.map((e,l)=>({key:e.id,label:(0,s.jsxs)(lo,{style:{fontSize:16},children:["Route ",l+1,": ",e.model||"Unnamed"]}),extra:(0,s.jsx)(U.ZP,{type:"text",danger:!0,size:"small",icon:(0,s.jsx)(lr.Z,{}),onClick:l=>{l.stopPropagation(),m(e.id)}}),children:(0,s.jsxs)(ep.Z,{children:[(0,s.jsxs)("div",{className:"mb-4 w-full",children:[(0,s.jsx)(lo,{className:"text-sm font-medium mb-2 block",children:"Model"}),(0,s.jsx)(B.default,{value:e.model,onChange:l=>u(e.id,"model",l),placeholder:"Select model",showSearch:!0,style:{width:"100%"},options:x})]}),(0,s.jsxs)("div",{className:"mb-4 w-full",children:[(0,s.jsx)(lo,{className:"text-sm font-medium mb-2 block",children:"Description"}),(0,s.jsx)(ld,{value:e.description,onChange:l=>u(e.id,"description",l.target.value),placeholder:"Describe when this route should be used...",rows:2,style:{width:"100%"}})]}),(0,s.jsxs)("div",{className:"mb-4 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(lo,{className:"text-sm font-medium",children:"Score Threshold"}),(0,s.jsx)(A.Z,{title:"Minimum similarity score to route to this model (0-1)",children:(0,s.jsx)(b.Z,{className:"text-gray-400"})})]}),(0,s.jsx)(em.Z,{value:e.score_threshold,onChange:l=>u(e.id,"score_threshold",l||0),min:0,max:1,step:.1,style:{width:"100%"},placeholder:"0.5"})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(lo,{className:"text-sm font-medium",children:"Example Utterances"}),(0,s.jsx)(A.Z,{title:"Training examples for this route. Type an utterance and press Enter to add it.",children:(0,s.jsx)(b.Z,{className:"text-gray-400"})})]}),(0,s.jsx)(lo,{className:"text-xs text-gray-500 mb-2",children:"Type an utterance and press Enter to add it. You can also paste multiple lines."}),(0,s.jsx)(B.default,{mode:"tags",value:e.utterances,onChange:l=>u(e.id,"utterances",l),placeholder:"Type an utterance and press Enter...",style:{width:"100%"},tokenSeparators:["\n"],maxTagCount:"responsive",allowClear:!0})]})]},e.id)}))}),(0,s.jsx)(E.Z,{}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 w-full",children:[(0,s.jsx)(lo,{className:"text-lg font-semibold",children:"JSON Preview"}),(0,s.jsx)(U.ZP,{type:"link",onClick:()=>o(!n),className:"text-blue-600 p-0",children:n?"Hide":"Show"})]}),n&&(0,s.jsx)(ep.Z,{className:"bg-gray-50 w-full",children:(0,s.jsx)("pre",{className:"text-sm overflow-auto max-h-64 w-full",children:JSON.stringify({routes:r.map(e=>({name:e.model,utterances:e.utterances,description:e.description,score_threshold:e.score_threshold}))},null,2)})})]})};let{Text:lm}=S.default,lu={SIMPLE:{label:"Simple",description:"Basic questions, greetings, simple factual queries",examples:'"Hello!", "What is Python?", "Thanks!"'},MEDIUM:{label:"Medium",description:"Standard queries requiring some reasoning or explanation",examples:'"Explain how REST APIs work", "Debug this error"'},COMPLEX:{label:"Complex",description:"Technical, multi-part requests requiring deep knowledge",examples:'"Design a microservices architecture", "Implement a rate limiter"'},REASONING:{label:"Reasoning",description:"Chain-of-thought, analysis, explicit reasoning requests",examples:'"Think step by step...", "Analyze the pros and cons..."'}};var lh=e=>{let{modelInfo:l,value:t,onChange:a}=e,r=l.map(e=>({value:e.model_group,label:e.model_group})),i=(e,l)=>{a({...t,[e]:l})};return(0,s.jsxs)("div",{className:"w-full max-w-none",children:[(0,s.jsxs)(k.Z,{align:"center",style:{marginBottom:16},children:[(0,s.jsx)(S.default.Title,{level:4,style:{margin:0},children:"Complexity Tier Configuration"}),(0,s.jsx)(A.Z,{title:"Map each complexity tier to a model. Simple queries use cheaper/faster models, complex queries use more capable models.",children:(0,s.jsx)(b.Z,{className:"text-gray-400"})})]}),(0,s.jsx)(lm,{type:"secondary",style:{display:"block",marginBottom:24},children:"The complexity router automatically classifies requests by complexity using rule-based scoring (no API calls, <1ms latency). Configure which model handles each tier."}),(0,s.jsx)(ep.Z,{children:Object.keys(lu).map((e,l)=>{let a=lu[e];return(0,s.jsxs)("div",{children:[l>0&&(0,s.jsx)(E.Z,{style:{margin:"16px 0"}}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsxs)(lm,{strong:!0,style:{fontSize:16},children:[a.label," Tier"]}),(0,s.jsx)(A.Z,{title:a.description,children:(0,s.jsx)(b.Z,{className:"text-gray-400"})})]}),(0,s.jsxs)(lm,{type:"secondary",style:{display:"block",marginBottom:8,fontSize:12},children:["Examples: ",a.examples]}),(0,s.jsx)(B.default,{value:t[e],onChange:l=>i(e,l),placeholder:"Select model for ".concat(a.label.toLowerCase()," queries"),showSearch:!0,style:{width:"100%"},options:r})]})]},e)})}),(0,s.jsx)(E.Z,{}),(0,s.jsxs)(ep.Z,{className:"bg-gray-50",children:[(0,s.jsx)(lm,{strong:!0,style:{display:"block",marginBottom:8},children:"How Classification Works"}),(0,s.jsx)(lm,{type:"secondary",style:{fontSize:13},children:"The router scores each request across 7 dimensions: token count, code presence, reasoning markers, technical terms, simple indicators, multi-step patterns, and question complexity. The weighted score determines the tier:"}),(0,s.jsxs)("ul",{style:{marginTop:8,marginBottom:0,paddingLeft:20,fontSize:13,color:"rgba(0, 0, 0, 0.45)"},children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"SIMPLE"}),": Score < 0.15"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"MEDIUM"}),": Score 0.15 - 0.35"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"COMPLEX"}),": Score 0.35 - 0.60"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"REASONING"}),": Score > 0.60 (or 2+ reasoning markers)"]})]})]})]})},lx=t(19574),lp=t(81680);let{Title:lg,Link:lf}=S.default;var lj=e=>{let{form:l,handleOk:t,accessToken:r,userRole:i}=e,[n,o]=(0,g.useState)(!1),[d,c]=(0,g.useState)(!1),[m,u]=(0,g.useState)(""),[h,x]=(0,g.useState)([]),[p,f]=(0,g.useState)([]),[j,v]=(0,g.useState)(!1),[_,y]=(0,g.useState)(!1),[b,N]=(0,g.useState)("complexity"),[Z,w]=(0,g.useState)(null),[C,P]=(0,g.useState)({SIMPLE:"",MEDIUM:"",COMPLEX:"",REASONING:""});(0,g.useEffect)(()=>{(async()=>{x((await (0,a.modelAvailableCall)(r,"","",!1,null,!0,!0)).data.map(e=>e.id))})()},[r]),(0,g.useEffect)(()=>{(async()=>{try{let e=await (0,ls.p)(r);console.log("Fetched models for auto router:",e),f(e)}catch(e){console.error("Error fetching model info for auto router:",e)}})()},[r]);let E=eY.ZL.includes(i),M=async()=>{c(!0),u("test-".concat(Date.now())),o(!0)},L=()=>{console.log("Auto router submit triggered!"),console.log("Router type:",b);let e=l.getFieldsValue();if(console.log("Form values:",e),!e.auto_router_name){Y.ZP.fromBackend("Please enter an Auto Router Name");return}if("complexity"===b){if(0===Object.values(C).filter(Boolean).length){Y.ZP.fromBackend("Please select at least one model for a complexity tier");return}let s=C.MEDIUM||C.SIMPLE||C.COMPLEX||C.REASONING;l.setFieldsValue({custom_llm_provider:"auto_router",model:e.auto_router_name,api_key:"not_required_for_auto_router",auto_router_default_model:s}),l.validateFields(["auto_router_name"]).then(a=>{console.log("Complexity router validation passed");let i={...a,auto_router_name:e.auto_router_name,auto_router_default_model:s,model_type:"complexity_router",complexity_router_config:{tiers:C},model_access_group:e.model_access_group};console.log("Final submit values:",i),lt(i,r,l,t)}).catch(e=>{console.error("Validation failed:",e),Y.ZP.fromBackend("Please fill in all required fields")})}else{if(!e.auto_router_default_model){Y.ZP.fromBackend("Please select a Default Model");return}if(l.setFieldsValue({custom_llm_provider:"auto_router",model:e.auto_router_name,api_key:"not_required_for_auto_router"}),!Z||!Z.routes||0===Z.routes.length){Y.ZP.fromBackend("Please configure at least one route for the auto router");return}if(Z.routes.filter(e=>!e.name||!e.description||0===e.utterances.length).length>0){Y.ZP.fromBackend("Please ensure all routes have a target model, description, and at least one utterance");return}l.validateFields().then(e=>{console.log("Form validation passed, submitting with values:",e);let s={...e,auto_router_config:Z,model_type:"semantic_router"};console.log("Final submit values:",s),lt(s,r,l,t)}).catch(e=>{console.error("Validation failed:",e);let l=e.errorFields||[];if(l.length>0){let e=l.map(e=>{let l=e.name[0];return({auto_router_name:"Auto Router Name",auto_router_default_model:"Default Model",auto_router_embedding_model:"Embedding Model"})[l]||l});Y.ZP.fromBackend("Please fill in the following required fields: ".concat(e.join(", ")))}else Y.ZP.fromBackend("Please fill in all required fields")})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(lg,{level:2,children:"Add Auto Router"}),(0,s.jsx)(eI.x,{className:"text-gray-600 mb-6",children:"Create an auto router that automatically selects the best model based on request complexity or semantic matching."}),(0,s.jsx)(ep.Z,{className:"mb-4",children:(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)(eI.x,{className:"text-sm font-medium mb-2 block",children:"Router Type"}),(0,s.jsx)(e3.ZP.Group,{value:b,onChange:e=>N(e.target.value),className:"w-full",children:(0,s.jsxs)(k.Z,{direction:"vertical",className:"w-full",children:[(0,s.jsxs)(e3.ZP,{value:"complexity",className:"w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(lx.Z,{className:"text-yellow-500"}),(0,s.jsx)("span",{className:"font-medium",children:"Complexity Router"}),(0,s.jsx)(G.Z,{count:"Recommended",style:{backgroundColor:"#52c41a",fontSize:"10px",padding:"0 6px"}})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 ml-6 mt-1",children:["Automatically routes based on request complexity. No training data needed â€” just pick 4 models and go.",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-green-600",children:"âœ“ Zero API calls"})," \xb7 ",(0,s.jsx)("span",{className:"text-green-600",children:"âœ“ <1ms latency"})," \xb7 ",(0,s.jsx)("span",{className:"text-green-600",children:"âœ“ No cost"})]})]}),(0,s.jsxs)(e3.ZP,{value:"semantic",className:"w-full mt-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(lp.Z,{className:"text-blue-500"}),(0,s.jsx)("span",{className:"font-medium",children:"Semantic Router"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-500 ml-6 mt-1",children:"Routes based on semantic similarity to example utterances. Requires embedding model and training examples."})]})]})})]})}),(0,s.jsx)(ep.Z,{children:(0,s.jsxs)(Q.Z,{form:l,onFinish:L,labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",children:[(0,s.jsx)(Q.Z.Item,{rules:[{required:!0,message:"Auto router name is required"}],label:"Auto Router Name",name:"auto_router_name",tooltip:"Unique name for this auto router configuration",labelCol:{span:10},labelAlign:"left",children:(0,s.jsx)(eI.o,{placeholder:"e.g., smart_router, auto_router_1"})}),"complexity"===b?(0,s.jsx)("div",{className:"w-full mb-4",children:(0,s.jsx)(lh,{modelInfo:p,value:C,onChange:e=>{P(e)}})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-full mb-4",children:(0,s.jsx)(lc,{modelInfo:p,value:Z,onChange:e=>{w(e),l.setFieldValue("auto_router_config",e)}})}),(0,s.jsx)(Q.Z.Item,{rules:[{required:"semantic"===b,message:"Default model is required"}],label:"Default Model",name:"auto_router_default_model",tooltip:"Fallback model to use when auto routing logic cannot determine the best model",labelCol:{span:10},labelAlign:"left",children:(0,s.jsx)(B.default,{placeholder:"Select a default model",onChange:e=>{v("custom"===e)},options:[...Array.from(new Set(p.map(e=>e.model_group))).map(e=>({value:e,label:e})),{value:"custom",label:"Enter custom model name"}],style:{width:"100%"},showSearch:!0})}),(0,s.jsx)(Q.Z.Item,{label:"Embedding Model",name:"auto_router_embedding_model",tooltip:"Optional: Embedding model to use for semantic routing decisions",labelCol:{span:10},labelAlign:"left",children:(0,s.jsx)(B.default,{value:l.getFieldValue("auto_router_embedding_model"),placeholder:"Select an embedding model (optional)",onChange:e=>{y("custom"===e),l.setFieldValue("auto_router_embedding_model",e)},options:[...Array.from(new Set(p.map(e=>e.model_group))).map(e=>({value:e,label:e})),{value:"custom",label:"Enter custom model name"}],style:{width:"100%"},showSearch:!0,allowClear:!0})})]}),(0,s.jsxs)("div",{className:"flex items-center my-4",children:[(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,s.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"Additional Settings"}),(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),E&&(0,s.jsx)(Q.Z.Item,{label:"Model Access Group",name:"model_access_group",className:"mb-4",tooltip:"Use model access groups to control who can access this auto router",children:(0,s.jsx)(B.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],options:h.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(A.Z,{title:"Get help on our github",children:(0,s.jsx)(S.default.Link,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(U.ZP,{onClick:M,loading:d,children:"Test Connection"}),(0,s.jsx)(U.ZP,{type:"primary",onClick:()=>{console.log("Add Auto Router button clicked!"),L()},children:"Add Auto Router"})]})]})]})}),(0,s.jsx)($.Z,{title:"Connection Test Results",open:n,onCancel:()=>{o(!1),c(!1)},footer:[(0,s.jsx)(U.ZP,{onClick:()=>{o(!1),c(!1)},children:"Close"},"close")],width:700,children:n&&(0,s.jsx)(ll,{formValues:l.getFieldsValue(),accessToken:r,testMode:"chat",modelName:l.getFieldValue("auto_router_name"),onClose:()=>{o(!1),c(!1)},onTestComplete:()=>c(!1)},m)})]})};let lv=(0,i.n)("guardrails"),l_=()=>{let{accessToken:e,userId:l,userRole:t}=(0,n.Z)();return(0,r.a)({queryKey:lv.list({}),queryFn:async()=>(await (0,a.getGuardrailsList)(e)).guardrails.map(e=>e.guardrail_name),enabled:!!(e&&l&&t)})},ly=(0,i.n)("tags"),lb=()=>{let{accessToken:e,userId:l,userRole:t}=(0,n.Z)();return(0,r.a)({queryKey:ly.list({}),queryFn:async()=>await (0,a.tagListCall)(e),enabled:!!(e&&l&&t)})};var lN=t(59341),lZ=t(51653),lw=t(84376),lC=t(26210),lS=t(34766),lk=t(45246),lP=t(24199);let{Text:lE}=S.default;var lA=e=>{let{form:l,showCacheControl:t,onCacheControlChange:a}=e,r=e=>{let t=l.getFieldValue("litellm_extra_params");try{let s=t?JSON.parse(t):{};e.length>0?s.cache_control_injection_points=e:delete s.cache_control_injection_points,Object.keys(s).length>0?l.setFieldValue("litellm_extra_params",JSON.stringify(s,null,2)):l.setFieldValue("litellm_extra_params","")}catch(e){console.error("Error updating cache control points:",e)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Q.Z.Item,{label:"Cache Control Injection Points",name:"cache_control",valuePropName:"checked",className:"mb-4",tooltip:"Tell litellm where to inject cache control checkpoints. You can specify either by role (to apply to all messages of that role) or by specific message index.",children:(0,s.jsx)(ee.Z,{onChange:a,className:"bg-gray-600"})}),t&&(0,s.jsxs)("div",{className:"ml-6 pl-4 border-l-2 border-gray-200",children:[(0,s.jsx)(lE,{className:"text-sm text-gray-500 block mb-4",children:"Providers like Anthropic, Bedrock API require users to specify where to inject cache control checkpoints, litellm can automatically add them for you as a cost saving feature."}),(0,s.jsx)(Q.Z.List,{name:"cache_control_injection_points",initialValue:[{location:"message"}],children:(e,t)=>{let{add:a,remove:i}=t;return(0,s.jsxs)(s.Fragment,{children:[e.map((t,a)=>(0,s.jsxs)("div",{className:"flex items-center mb-4 gap-4",children:[(0,s.jsx)(Q.Z.Item,{...t,label:"Type",name:[t.name,"location"],initialValue:"message",className:"mb-0",style:{width:"180px"},children:(0,s.jsx)(B.default,{disabled:!0,options:[{value:"message",label:"Message"}]})}),(0,s.jsx)(Q.Z.Item,{...t,label:"Role",name:[t.name,"role"],className:"mb-0",style:{width:"180px"},tooltip:"LiteLLM will mark all messages of this role as cacheable",children:(0,s.jsx)(B.default,{placeholder:"Select a role",allowClear:!0,options:[{value:"user",label:"User"},{value:"system",label:"System"},{value:"assistant",label:"Assistant"}],onChange:()=>{r(l.getFieldValue("cache_control_points"))}})}),(0,s.jsx)(Q.Z.Item,{...t,label:"Index",name:[t.name,"index"],className:"mb-0",style:{width:"180px"},tooltip:"(Optional) If set litellm will mark the message at this index as cacheable",children:(0,s.jsx)(lP.Z,{type:"number",placeholder:"Optional",step:1,onChange:()=>{r(l.getFieldValue("cache_control_points"))}})}),e.length>1&&(0,s.jsx)(lk.Z,{className:"text-red-500 cursor-pointer text-lg ml-12",onClick:()=>{i(t.name),setTimeout(()=>{r(l.getFieldValue("cache_control_points"))},0)}})]},t.key)),(0,s.jsx)(Q.Z.Item,{children:(0,s.jsxs)("button",{type:"button",className:"flex items-center justify-center w-full border border-dashed border-gray-300 py-2 px-4 text-gray-600 hover:text-blue-600 hover:border-blue-300 transition-all rounded",onClick:()=>a(),children:[(0,s.jsx)(la.Z,{className:"mr-2"}),"Add Injection Point"]})})]})}})]})]})},lM=t(9309);let{Link:lL}=S.default;var lT=e=>{let{showAdvancedSettings:l,setShowAdvancedSettings:t,teams:a,guardrailsList:r,tagsList:i}=e,[n]=Q.Z.useForm(),[o,d]=g.useState(!1),[c,m]=g.useState("per_token"),[u,h]=g.useState(!1),x=(e,l)=>l&&(isNaN(Number(l))||0>Number(l))?Promise.reject("Please enter a valid positive number"):Promise.resolve();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(lC.UQ,{className:"mt-2 mb-4",children:[(0,s.jsx)(lC._m,{children:(0,s.jsx)("b",{children:"Advanced Settings"})}),(0,s.jsx)(lC.X1,{children:(0,s.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,s.jsx)(Q.Z.Item,{label:"Custom Pricing",name:"custom_pricing",valuePropName:"checked",className:"mb-4",children:(0,s.jsx)(ee.Z,{onChange:e=>{d(e),e||n.setFieldsValue({input_cost_per_token:void 0,output_cost_per_token:void 0,input_cost_per_second:void 0})},className:"bg-gray-600"})}),(0,s.jsx)(Q.Z.Item,{label:(0,s.jsxs)("span",{children:["Guardrails"," ",(0,s.jsx)(A.Z,{title:"Apply safety guardrails to this key to filter content or enforce policies",children:(0,s.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(b.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-4",help:"Select existing guardrails. Go to 'Guardrails' tab to create new guardrails.",children:(0,s.jsx)(B.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter guardrails",options:r.map(e=>({value:e,label:e}))})}),(0,s.jsx)(Q.Z.Item,{label:"Tags",name:"tags",className:"mb-4",children:(0,s.jsx)(B.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter tags",options:Object.values(i).map(e=>({value:e.name,label:e.name,title:e.description||e.name}))})}),o&&(0,s.jsxs)("div",{className:"ml-6 pl-4 border-l-2 border-gray-200",children:[(0,s.jsx)(Q.Z.Item,{label:"Pricing Model",name:"pricing_model",className:"mb-4",children:(0,s.jsx)(B.default,{defaultValue:"per_token",onChange:e=>m(e),options:[{value:"per_token",label:"Per Million Tokens"},{value:"per_second",label:"Per Second"}]})}),"per_token"===c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Q.Z.Item,{label:"Input Cost (per 1M tokens)",name:"input_cost_per_token",rules:[{validator:x}],className:"mb-4",children:(0,s.jsx)(lC.oi,{})}),(0,s.jsx)(Q.Z.Item,{label:"Output Cost (per 1M tokens)",name:"output_cost_per_token",rules:[{validator:x}],className:"mb-4",children:(0,s.jsx)(lC.oi,{})})]}):(0,s.jsx)(Q.Z.Item,{label:"Cost Per Second",name:"input_cost_per_second",rules:[{validator:x}],className:"mb-4",children:(0,s.jsx)(lC.oi,{})})]}),(0,s.jsx)(Q.Z.Item,{label:"Use in pass through routes",name:"use_in_pass_through",valuePropName:"checked",className:"mb-4 mt-4",tooltip:(0,s.jsxs)("span",{children:["Allow using these credentials in pass through routes."," ",(0,s.jsx)(lL,{href:"https://docs.litellm.ai/docs/pass_through/vertex_ai",target:"_blank",children:"Learn more"})]}),children:(0,s.jsx)(ee.Z,{onChange:e=>{let l=n.getFieldValue("litellm_extra_params");try{let t=l?JSON.parse(l):{};e?t.use_in_pass_through=!0:delete t.use_in_pass_through,Object.keys(t).length>0?n.setFieldValue("litellm_extra_params",JSON.stringify(t,null,2)):n.setFieldValue("litellm_extra_params","")}catch(l){e?n.setFieldValue("litellm_extra_params",JSON.stringify({use_in_pass_through:!0},null,2)):n.setFieldValue("litellm_extra_params","")}},className:"bg-gray-600"})}),(0,s.jsx)(lA,{form:n,showCacheControl:u,onCacheControlChange:e=>{if(h(e),!e){let e=n.getFieldValue("litellm_extra_params");try{let l=e?JSON.parse(e):{};delete l.cache_control_injection_points,Object.keys(l).length>0?n.setFieldValue("litellm_extra_params",JSON.stringify(l,null,2)):n.setFieldValue("litellm_extra_params","")}catch(e){n.setFieldValue("litellm_extra_params","")}}}}),(0,s.jsx)(Q.Z.Item,{label:"LiteLLM Params",name:"litellm_extra_params",tooltip:"Optional litellm params used for making a litellm.completion() call.",className:"mb-4 mt-4",rules:[{validator:lM.Ac}],children:(0,s.jsx)(lS.Z,{rows:4,placeholder:'{ "rpm": 100, "timeout": 0, "stream_timeout": 0 }'})}),(0,s.jsxs)(eR.Z,{className:"mb-4",children:[(0,s.jsx)(ez.Z,{span:10}),(0,s.jsx)(ez.Z,{span:10,children:(0,s.jsxs)(lC.xv,{className:"text-gray-600 text-sm",children:["Pass JSON of litellm supported params"," ",(0,s.jsx)(lL,{href:"https://docs.litellm.ai/docs/completion/input",target:"_blank",children:"litellm.completion() call"})]})})]}),(0,s.jsx)(Q.Z.Item,{label:"Model Info",name:"model_info_params",tooltip:"Optional model info params. Returned when calling `/model/info` endpoint.",className:"mb-0",rules:[{validator:lM.Ac}],children:(0,s.jsx)(lS.Z,{rows:4,placeholder:'{ "mode": "chat" }'})})]})})]})})},lF=t(56609),lI=t(67187);let lR=e=>{let{content:l,children:t,width:a="auto",className:r=""}=e,[i,n]=(0,g.useState)(!1),[o,d]=(0,g.useState)("top"),c=(0,g.useRef)(null),m=()=>{if(c.current){let e=c.current.getBoundingClientRect(),l=e.top,t=window.innerHeight-e.bottom;l<300&&t>300?d("bottom"):d("top")}};return(0,s.jsxs)("div",{className:"relative inline-block",ref:c,children:[t||(0,s.jsx)(lI.Z,{className:"ml-1 text-gray-500 cursor-help",onMouseEnter:()=>{m(),n(!0)},onMouseLeave:()=>n(!1)}),i&&(0,s.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 z-50 bg-black/90 text-white p-2 rounded-md text-sm font-normal shadow-lg ".concat(r),style:{["top"===o?"bottom":"top"]:"100%",width:a,marginBottom:"top"===o?"8px":"0",marginTop:"bottom"===o?"8px":"0"},children:[l,(0,s.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 w-0 h-0",style:{top:"top"===o?"100%":"auto",bottom:"bottom"===o?"100%":"auto",borderTop:"top"===o?"6px solid rgba(0, 0, 0, 0.9)":"6px solid transparent",borderBottom:"bottom"===o?"6px solid rgba(0, 0, 0, 0.9)":"6px solid transparent",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"}})]})]})};var lz=()=>{let e=Q.Z.useFormInstance(),[l,t]=(0,g.useState)(0),a=Q.Z.useWatch("model",e)||[],r=Array.isArray(a)?a:[a],i=Q.Z.useWatch("custom_model_name",e),n=!r.includes("all-wildcard"),o=Q.Z.useWatch("custom_llm_provider",e);if((0,g.useEffect)(()=>{if(i&&r.includes("custom")){let l=(e.getFieldValue("model_mappings")||[]).map(e=>"custom"===e.public_name||"custom"===e.litellm_model?o===eC.Cl.Azure?{public_name:i,litellm_model:"azure/".concat(i)}:{public_name:i,litellm_model:i}:e);e.setFieldValue("model_mappings",l),t(e=>e+1)}},[i,r,o,e]),(0,g.useEffect)(()=>{if(r.length>0&&!r.includes("all-wildcard")){let l=e.getFieldValue("model_mappings")||[];if(l.length!==r.length||!r.every(e=>l.some(l=>"custom"===e?"custom"===l.litellm_model||l.litellm_model===i:o===eC.Cl.Azure?l.litellm_model==="azure/".concat(e):l.litellm_model===e))){let l=r.map(e=>"custom"===e&&i?o===eC.Cl.Azure?{public_name:i,litellm_model:"azure/".concat(i)}:{public_name:i,litellm_model:i}:o===eC.Cl.Azure?{public_name:e,litellm_model:"azure/".concat(e)}:{public_name:e,litellm_model:e});e.setFieldValue("model_mappings",l),t(e=>e+1)}}},[r,i,o,e]),!n)return null;let d=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-2 font-normal",children:"The name you specify in your API calls to LiteLLM Proxy"}),(0,s.jsxs)("div",{className:"mb-2 font-normal",children:[(0,s.jsx)("strong",{children:"Example:"})," If you name your public model"," ",(0,s.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"example-name"}),", and choose"," ",(0,s.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"openai/qwen-plus-latest"})," as the LiteLLM model"]}),(0,s.jsxs)("div",{className:"mb-2 font-normal",children:[(0,s.jsx)("strong",{children:"Usage:"})," You make an API call to the LiteLLM proxy with"," ",(0,s.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:'model = "example-name"'})]}),(0,s.jsxs)("div",{className:"font-normal",children:[(0,s.jsx)("strong",{children:"Result:"})," LiteLLM sends"," ",(0,s.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"qwen-plus-latest"})," to the provider"]})]}),c=(0,s.jsx)("div",{children:"The model name LiteLLM will send to the LLM API"}),m=[{title:(0,s.jsxs)("span",{className:"flex items-center",children:["Public Model Name",(0,s.jsx)(lR,{content:d,width:"500px"})]}),dataIndex:"public_name",key:"public_name",render:(l,t,a)=>(0,s.jsx)(eM.o,{value:l,onChange:l=>{let t=l.target.value,s=[...e.getFieldValue("model_mappings")],r=o===eC.Cl.Anthropic,i=t.endsWith("-1m"),n=e.getFieldValue("litellm_extra_params"),d=!n||""===n.trim(),c=t;if(r&&i&&d){let l=JSON.stringify({extra_headers:{"anthropic-beta":"context-1m-2025-08-07"}},null,2);e.setFieldValue("litellm_extra_params",l),c=t.slice(0,-3)}s[a].public_name=c,e.setFieldValue("model_mappings",s)}})},{title:(0,s.jsxs)("span",{className:"flex items-center",children:["LiteLLM Model Name",(0,s.jsx)(lR,{content:c,width:"360px"})]}),dataIndex:"litellm_model",key:"litellm_model"}];return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Q.Z.Item,{label:"Model Mappings",name:"model_mappings",tooltip:"Map public model names to LiteLLM model names for load balancing",labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",rules:[{required:!0,validator:async(e,l)=>{if(!l||0===l.length)throw Error("At least one model mapping is required");if(l.filter(e=>!e.public_name||""===e.public_name.trim()).length>0)throw Error("All model mappings must have valid public names")}}],children:(0,s.jsx)(lF.Z,{dataSource:e.getFieldValue("model_mappings"),columns:m,pagination:!1,size:"small"},l)})})},lO=e=>{let{selectedProvider:l,providerModels:t,getPlaceholder:a}=e,r=Q.Z.useFormInstance(),i=e=>{let t=e.target.value,s=(r.getFieldValue("model_mappings")||[]).map(e=>"custom"===e.public_name||"custom"===e.litellm_model?l===eC.Cl.Azure?{public_name:t,litellm_model:"azure/".concat(t)}:{public_name:t,litellm_model:t}:e);r.setFieldsValue({model_mappings:s})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(Q.Z.Item,{label:"LiteLLM Model Name(s)",tooltip:"The model name LiteLLM will send to the LLM API",className:"mb-0",children:[(0,s.jsx)(Q.Z.Item,{name:"model",rules:[{required:!0,message:"Please enter ".concat(l===eC.Cl.Azure?"a deployment name":"at least one model",".")}],noStyle:!0,children:l===eC.Cl.Azure||l===eC.Cl.OpenAI_Compatible||l===eC.Cl.Ollama?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eI.o,{placeholder:a(l),onChange:l===eC.Cl.Azure?e=>{let l=e.target.value,t=l?[{public_name:l,litellm_model:"azure/".concat(l)}]:[];r.setFieldsValue({model:l,model_mappings:t})}:void 0})}):t.length>0?(0,s.jsx)(B.default,{mode:"multiple",allowClear:!0,showSearch:!0,placeholder:"Select models",onChange:e=>{let t=Array.isArray(e)?e:[e];if(t.includes("all-wildcard"))r.setFieldsValue({model_name:void 0,model_mappings:[]});else if(JSON.stringify(r.getFieldValue("model"))!==JSON.stringify(t)){let e=t.map(e=>l===eC.Cl.Azure?{public_name:e,litellm_model:"azure/".concat(e)}:{public_name:e,litellm_model:e});r.setFieldsValue({model:t,model_mappings:e})}},optionFilterProp:"children",filterOption:(e,l)=>{var t;return(null!==(t=null==l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:[{label:"Custom Model Name (Enter below)",value:"custom"},{label:"All ".concat(l," Models (Wildcard)"),value:"all-wildcard"},...t.map(e=>({label:e,value:e}))],style:{width:"100%"}}):(0,s.jsx)(eI.o,{placeholder:a(l)})}),(0,s.jsx)(Q.Z.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.model!==l.model,children:e=>{let{getFieldValue:t}=e,a=t("model")||[];return(Array.isArray(a)?a:[a]).includes("custom")&&(0,s.jsx)(Q.Z.Item,{name:"custom_model_name",rules:[{required:!0,message:"Please enter a custom model name."}],className:"mt-2",children:(0,s.jsx)(eI.o,{placeholder:l===eC.Cl.Azure?"Enter Azure deployment name":"Enter custom model name",onChange:i})})}})]}),(0,s.jsxs)(eR.Z,{children:[(0,s.jsx)(ez.Z,{span:10}),(0,s.jsx)(ez.Z,{span:14,children:(0,s.jsx)(eI.x,{className:"mb-3 mt-1",children:l===eC.Cl.Azure?"Your deployment name will be saved as the public model name, and LiteLLM will use 'azure/deployment-name' internally":"The model name LiteLLM will send to the LLM API"})})]})]})};let lq=[{value:"chat",label:"Chat - /chat/completions"},{value:"completion",label:"Completion - /completions"},{value:"embedding",label:"Embedding - /embeddings"},{value:"audio_speech",label:"Audio Speech - /audio/speech"},{value:"audio_transcription",label:"Audio Transcription - /audio/transcriptions"},{value:"image_generation",label:"Image Generation - /images/generations"},{value:"video_generation",label:"Video Generation - /videos"},{value:"rerank",label:"Rerank - /rerank"},{value:"realtime",label:"Realtime - /realtime"},{value:"batch",label:"Batch - /batch"},{value:"ocr",label:"OCR - /ocr"}],{Title:lV,Link:lD}=S.default;var lB=e=>{let{form:l,handleOk:t,selectedProvider:r,setSelectedProvider:i,providerModels:o,setProviderModelsFn:d,getPlaceholder:c,uploadProps:m,showAdvancedSettings:u,setShowAdvancedSettings:h,teams:x,credentials:p}=e,[f,j]=(0,g.useState)("chat"),[v,_]=(0,g.useState)(!1),[y,b]=(0,g.useState)(!1),[N,Z]=(0,g.useState)(""),{accessToken:w,userRole:C,premiumUser:k,userId:P}=(0,n.Z)(),{data:E,isLoading:M,error:T}=eT(),{data:F,isLoading:I,error:R}=l_(),{data:z,isLoading:O,error:q}=lb(),V=async()=>{b(!0),Z("test-".concat(Date.now())),_(!0)},[D,G]=(0,g.useState)(!1),[H,K]=(0,g.useState)([]),[J,W]=(0,g.useState)(null);(0,g.useEffect)(()=>{(async()=>{K((await (0,a.modelAvailableCall)(w,"","",!1,null,!0,!0)).data.map(e=>e.id))})()},[w]);let Y=(0,g.useMemo)(()=>E?[...E].sort((e,l)=>e.provider_display_name.localeCompare(l.provider_display_name)):[],[E]),X=T?T instanceof Error?T.message:"Failed to load providers":null,ee=eY.ZL.includes(C),el=(0,eY.yV)(x,P);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(lV,{level:2,children:"Add Model"}),(0,s.jsx)(ep.Z,{children:(0,s.jsx)(Q.Z,{form:l,onFinish:async e=>{console.log("\uD83D\uDD25 Form onFinish triggered with values:",e),await t().then(()=>{W(null)})},onFinishFailed:e=>{console.log("\uD83D\uDCA5 Form onFinishFailed triggered:",e)},labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",children:(0,s.jsxs)(s.Fragment,{children:[el&&!ee&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Q.Z.Item,{label:"Select Team",name:"team_id",rules:[{required:!0,message:"Please select a team to continue"}],tooltip:"Select the team for which you want to add this model",children:(0,s.jsx)(lw.Z,{teams:x,onChange:e=>{W(e)}})}),!J&&(0,s.jsx)(lZ.Z,{message:"Team Selection Required",description:"As a team admin, you need to select your team first before adding models.",type:"info",showIcon:!0,className:"mb-4"})]}),(ee||el&&J)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Q.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Provider:",name:"custom_llm_provider",tooltip:"E.g. OpenAI, Azure OpenAI, Anthropic, Bedrock, etc.",labelCol:{span:10},labelAlign:"left",children:(0,s.jsxs)(B.default,{virtual:!1,showSearch:!0,loading:M,placeholder:M?"Loading providers...":"Select a provider",optionFilterProp:"data-label",onChange:e=>{i(e),d(e),l.setFieldsValue({custom_llm_provider:e}),l.setFieldsValue({model:[],model_name:void 0})},children:[X&&0===Y.length&&(0,s.jsx)(B.default.Option,{value:"",children:X},"__error"),Y.map(e=>{let l=e.provider_display_name,t=e.provider;return eC.cd[l],(0,s.jsx)(B.default.Option,{value:t,"data-label":l,children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(L.K,{provider:t,className:"w-5 h-5"}),(0,s.jsx)("span",{children:l})]})},t)})]})}),(0,s.jsx)(lO,{selectedProvider:r,providerModels:o,getPlaceholder:c}),(0,s.jsx)(lz,{}),(0,s.jsx)(Q.Z.Item,{label:"Mode",name:"mode",className:"mb-1",children:(0,s.jsx)(B.default,{style:{width:"100%"},value:f,onChange:e=>j(e),options:lq})}),(0,s.jsxs)(eR.Z,{children:[(0,s.jsx)(ez.Z,{span:10}),(0,s.jsx)(ez.Z,{span:10,children:(0,s.jsxs)(ed.Z,{className:"mb-5 mt-1",children:[(0,s.jsx)("strong",{children:"Optional"})," - LiteLLM endpoint to use when health checking this model"," ",(0,s.jsx)(lD,{href:"https://docs.litellm.ai/docs/proxy/health#health",target:"_blank",children:"Learn more"})]})})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(S.default.Text,{className:"text-sm text-gray-500 mb-2",children:"Either select existing credentials OR enter new provider credentials below"})}),(0,s.jsx)(Q.Z.Item,{label:"Existing Credentials",name:"litellm_credential_name",initialValue:null,children:(0,s.jsx)(B.default,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,l)=>{var t;return(null!==(t=null==l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:[{value:null,label:"None"},...p.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,s.jsx)(Q.Z.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.litellm_credential_name!==l.litellm_credential_name||e.provider!==l.provider,children:e=>{let{getFieldValue:l}=e,t=l("litellm_credential_name");return(console.log("\uD83D\uDD11 Credential Name Changed:",t),t)?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center my-4",children:[(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,s.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(0,s.jsx)(eG,{selectedProvider:r,uploadProps:m})]})}}),(0,s.jsxs)("div",{className:"flex items-center my-4",children:[(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,s.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"Additional Model Info Settings"}),(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(ee||!el)&&(0,s.jsx)(Q.Z.Item,{label:"Team-BYOK Model",tooltip:"Only use this model + credential combination for this team. Useful when teams want to onboard their own OpenAI keys.",className:"mb-4",children:(0,s.jsx)(A.Z,{title:k?"":"This is an enterprise-only feature. Upgrade to premium to restrict model+credential combinations to a specific team.",placement:"top",children:(0,s.jsx)(lN.Z,{checked:D,onChange:e=>{G(e),e||l.setFieldValue("team_id",void 0)},disabled:!k})})}),D&&(ee||!el)&&(0,s.jsx)(Q.Z.Item,{label:"Select Team",name:"team_id",className:"mb-4",tooltip:"Only keys for this team will be able to call this model.",rules:[{required:D&&!ee,message:"Please select a team."}],children:(0,s.jsx)(lw.Z,{teams:x,disabled:!k})}),ee&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Q.Z.Item,{label:"Model Access Group",name:"model_access_group",className:"mb-4",tooltip:"Use model access groups to give users access to select models, and add new ones to the group over time.",children:(0,s.jsx)(B.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],options:H.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})})}),(0,s.jsx)(lT,{showAdvancedSettings:u,setShowAdvancedSettings:h,teams:x,guardrailsList:F||[],tagsList:z||{}})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(A.Z,{title:"Get help on our github",children:(0,s.jsx)(S.default.Link,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(U.ZP,{onClick:V,loading:y,children:"Test Connect"}),(0,s.jsx)(U.ZP,{htmlType:"submit",children:"Add Model"})]})]})]})})}),(0,s.jsx)($.Z,{title:"Connection Test Results",open:v,onCancel:()=>{_(!1),b(!1)},footer:[(0,s.jsx)(U.ZP,{onClick:()=>{_(!1),b(!1)},children:"Close"},"close")],width:700,children:v&&(0,s.jsx)(ll,{formValues:l.getFieldsValue(),accessToken:w,testMode:f,modelName:l.getFieldValue("model_name")||l.getFieldValue("model"),onClose:()=>{_(!1),b(!1)},onTestComplete:()=>b(!1)},N)})]})},lG=e=>{let{form:l,handleOk:t,selectedProvider:a,setSelectedProvider:r,providerModels:i,setProviderModelsFn:n,getPlaceholder:o,uploadProps:d,showAdvancedSettings:c,setShowAdvancedSettings:m,teams:u,credentials:h,accessToken:x,userRole:p}=e,[g]=Q.Z.useForm();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(e6.v0,{className:"w-full",children:[(0,s.jsxs)(e6.td,{className:"mb-4",children:[(0,s.jsx)(e6.OK,{children:"Add Model"}),(0,s.jsx)(e6.OK,{children:"Add Auto Router"})]}),(0,s.jsxs)(e6.nP,{children:[(0,s.jsx)(e6.x4,{children:(0,s.jsx)(lB,{form:l,handleOk:t,selectedProvider:a,setSelectedProvider:r,providerModels:i,setProviderModelsFn:n,getPlaceholder:o,uploadProps:d,showAdvancedSettings:c,setShowAdvancedSettings:m,teams:u,credentials:h})}),(0,s.jsx)(e6.x4,{children:(0,s.jsx)(lj,{form:g,handleOk:()=>{g.validateFields().then(e=>{lt(e,x,g,t)}).catch(e=>{console.error("Validation failed:",e)})},accessToken:x,userRole:p})})]})]})})},lU=t(8048),lH=t(61994),lK=t(92280),lJ=t(15731),lW=t(91126);let lY=(e,l,t,a,r,i,n,o,d,c,m,u)=>[{header:()=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(lH.Z,{checked:t,indeterminate:l.length>0&&!t,onChange:e=>r(e.target.checked),onClick:e=>e.stopPropagation()}),(0,s.jsx)("span",{children:"Model ID"})]}),accessorKey:"model_info.id",enableSorting:!0,sortingFn:"alphanumeric",cell:e=>{var t,r;let{row:i}=e,n=i.original,o=null!==(r=null===(t=n.model_info)||void 0===t?void 0:t.id)&&void 0!==r?r:"",d=l.includes(o);return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(lH.Z,{checked:d,onChange:e=>a(o,e.target.checked),onClick:e=>e.stopPropagation()}),(0,s.jsx)(A.Z,{title:n.model_info.id,children:(0,s.jsx)("div",{className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",onClick:()=>m&&m(n.model_info.id),children:n.model_info.id})})]})}},{header:"Model Name",accessorKey:"model_name",enableSorting:!0,sortingFn:"alphanumeric",cell:e=>{let{row:l}=e,t=l.original,a=o(t)||t.model_name;return(0,s.jsx)("div",{className:"font-medium text-sm",children:(0,s.jsx)(A.Z,{title:a,children:(0,s.jsx)("div",{className:"truncate max-w-[200px]",children:a})})})}},{header:"Team Alias",accessorKey:"model_info.team_id",enableSorting:!0,sortingFn:"alphanumeric",cell:e=>{var l;let{row:t}=e,a=null===(l=t.original.model_info)||void 0===l?void 0:l.team_id;if(!a)return(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"-"});let r=null==u?void 0:u.find(e=>e.team_id===a),i=(null==r?void 0:r.team_alias)||a;return(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)(A.Z,{title:i,children:(0,s.jsx)("div",{className:"truncate max-w-[150px]",children:i})})})}},{header:"Health Status",accessorKey:"health_status",enableSorting:!0,sortingFn:(e,l,t)=>{var s,a;let r=e.getValue("health_status")||"unknown",i=l.getValue("health_status")||"unknown",n={healthy:0,checking:1,unknown:2,unhealthy:3};return(null!==(s=n[r])&&void 0!==s?s:4)-(null!==(a=n[i])&&void 0!==a?a:4)},cell:l=>{var t,a,r;let{row:i}=l,d=i.original,m={status:d.health_status,loading:d.health_loading,error:d.health_error};if(m.loading)return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),(0,s.jsx)(lK.x,{className:"text-gray-600 text-sm",children:"Checking..."})]});let u=null!==(r=null===(t=d.model_info)||void 0===t?void 0:t.id)&&void 0!==r?r:"",h=o(d)||d.model_name,x="healthy"===m.status&&(null===(a=e[u])||void 0===a?void 0:a.successResponse);return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[n(m.status),x&&c&&(0,s.jsx)(A.Z,{title:"View response details",placement:"top",children:(0,s.jsx)("button",{onClick:()=>{var l;return c(h,null===(l=e[u])||void 0===l?void 0:l.successResponse)},className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-50 rounded cursor-pointer transition-colors",children:(0,s.jsx)(lJ.Z,{className:"h-4 w-4"})})})]})}},{header:"Error Details",accessorKey:"health_error",enableSorting:!1,cell:l=>{var t,a;let{row:r}=l,i=r.original,n=null!==(a=null===(t=i.model_info)||void 0===t?void 0:t.id)&&void 0!==a?a:"",c=o(i)||i.model_name,m=e[n];if(!(null==m?void 0:m.error))return(0,s.jsx)(lK.x,{className:"text-gray-400 text-sm",children:"No errors"});let u=m.error,h=m.fullError||m.error;return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"max-w-[200px]",children:(0,s.jsx)(A.Z,{title:u,placement:"top",children:(0,s.jsx)(lK.x,{className:"text-red-600 text-sm truncate",children:u})})}),d&&h!==u&&(0,s.jsx)(A.Z,{title:"View full error details",placement:"top",children:(0,s.jsx)("button",{onClick:()=>d(c,u,h),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded cursor-pointer transition-colors",children:(0,s.jsx)(lJ.Z,{className:"h-4 w-4"})})})]})}},{header:"Last Check",accessorKey:"last_check",enableSorting:!0,sortingFn:(e,l,t)=>{let s=e.getValue("last_check")||"Never checked",a=l.getValue("last_check")||"Never checked";if("Never checked"===s&&"Never checked"===a)return 0;if("Never checked"===s)return 1;if("Never checked"===a)return -1;if("Check in progress..."===s&&"Check in progress..."===a)return 0;if("Check in progress..."===s)return -1;if("Check in progress..."===a)return 1;let r=new Date(s),i=new Date(a);return isNaN(r.getTime())&&isNaN(i.getTime())?0:isNaN(r.getTime())?1:isNaN(i.getTime())?-1:i.getTime()-r.getTime()},cell:e=>{let{row:l}=e,t=l.original;return(0,s.jsx)(lK.x,{className:"text-gray-600 text-sm",children:t.health_loading?"Check in progress...":t.last_check})}},{header:"Last Success",accessorKey:"last_success",enableSorting:!0,sortingFn:(e,l,t)=>{let s=e.getValue("last_success")||"Never succeeded",a=l.getValue("last_success")||"Never succeeded";if("Never succeeded"===s&&"Never succeeded"===a)return 0;if("Never succeeded"===s)return 1;if("Never succeeded"===a)return -1;if("None"===s&&"None"===a)return 0;if("None"===s)return 1;if("None"===a)return -1;let r=new Date(s),i=new Date(a);return isNaN(r.getTime())&&isNaN(i.getTime())?0:isNaN(r.getTime())?1:isNaN(i.getTime())?-1:i.getTime()-r.getTime()},cell:l=>{var t,a;let{row:r}=l,i=e[null!==(a=null===(t=r.original.model_info)||void 0===t?void 0:t.id)&&void 0!==a?a:""],n=(null==i?void 0:i.lastSuccess)||"None";return(0,s.jsx)(lK.x,{className:"text-gray-600 text-sm",children:n})}},{header:"Actions",id:"actions",cell:e=>{var l,t;let{row:a}=e,r=a.original,n=null!==(t=null===(l=r.model_info)||void 0===l?void 0:l.id)&&void 0!==t?t:"",o=r.health_status&&"none"!==r.health_status,d=r.health_loading?"Checking...":o?"Re-run Health Check":"Run Health Check";return(0,s.jsx)(A.Z,{title:d,placement:"top",children:(0,s.jsx)("button",{"data-testid":"run-health-check-btn",className:"p-2 rounded-md transition-colors ".concat(r.health_loading?"text-gray-400 cursor-not-allowed bg-gray-100":"text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50"),onClick:()=>{r.health_loading||i(n)},disabled:r.health_loading,children:r.health_loading?(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}):o?(0,s.jsx)(eX.Z,{className:"h-4 w-4"}):(0,s.jsx)(lW.Z,{className:"h-4 w-4"})})})},enableSorting:!1}],lX=[{pattern:/Missing .* API Key/i,replacement:"Missing API Key"},{pattern:/Connection timeout/i,replacement:"Connection timeout"},{pattern:/Network.*not.*ok/i,replacement:"Network connection failed"},{pattern:/403.*Forbidden/i,replacement:"Access forbidden - check API key permissions"},{pattern:/401.*Unauthorized/i,replacement:"Unauthorized - invalid API key"},{pattern:/429.*rate limit/i,replacement:"Rate limit exceeded"},{pattern:/500.*Internal Server Error/i,replacement:"Provider internal server error"},{pattern:/litellm\.AuthenticationError/i,replacement:"Authentication failed"},{pattern:/litellm\.RateLimitError/i,replacement:"Rate limit exceeded"},{pattern:/litellm\.APIError/i,replacement:"API error"}];var lQ=e=>{let{accessToken:l,modelData:t,all_models_on_proxy:r,getDisplayModelName:i,setSelectedModelId:n,teams:o}=e,[d,c]=(0,g.useState)({}),[m,u]=(0,g.useState)([]),[h,x]=(0,g.useState)(!1),[p,f]=(0,g.useState)(!1),[j,v]=(0,g.useState)(null),[_,y]=(0,g.useState)(!1),[b,N]=(0,g.useState)(null);(0,g.useRef)(null),(0,g.useEffect)(()=>{l&&(null==t?void 0:t.data)&&(async()=>{let e={};t.data.forEach(l=>{var t;let s=null===(t=l.model_info)||void 0===t?void 0:t.id;s&&(e[s]={status:"none",lastCheck:"None",lastSuccess:"None",loading:!1,error:void 0,fullError:void 0,successResponse:void 0})});try{let s=await (0,a.latestHealthChecksCall)(l);s&&s.latest_health_checks&&"object"==typeof s.latest_health_checks&&Object.entries(s.latest_health_checks).forEach(l=>{let[s,a]=l;if(!a||!t.data.some(e=>{var l;return(null===(l=e.model_info)||void 0===l?void 0:l.id)===s}))return;let r=a.error_message||void 0;e[s]={status:a.status||"unknown",lastCheck:a.checked_at?new Date(a.checked_at).toLocaleString():"None",lastSuccess:"healthy"===a.status&&a.checked_at?new Date(a.checked_at).toLocaleString():"None",loading:!1,error:r?C(r):void 0,fullError:r,successResponse:"healthy"===a.status?a:void 0}})}catch(e){console.warn("Failed to load health check history (using default states):",e)}c(e)})()},[l,t]);let C=e=>{var l;if(!e)return"Health check failed";let t="string"==typeof e?e:JSON.stringify(e),s=t.match(/(\w+Error):\s*(\d{3})/i);if(s)return"".concat(s[1],": ").concat(s[2]);let a=t.match(/(AuthenticationError|RateLimitError|BadRequestError|InternalServerError|TimeoutError|NotFoundError|ForbiddenError|ServiceUnavailableError|BadGatewayError|ContentPolicyViolationError|\w+Error)/i),r=t.match(/\b(400|401|403|404|408|429|500|502|503|504)\b/);if(a&&r)return"".concat(a[1],": ").concat(r[1]);if(r){let e=r[1];return"".concat({400:"BadRequestError",401:"AuthenticationError",403:"ForbiddenError",404:"NotFoundError",408:"TimeoutError",429:"RateLimitError",500:"InternalServerError",502:"BadGatewayError",503:"ServiceUnavailableError",504:"GatewayTimeoutError"}[e],": ").concat(e)}if(a){let e=a[1],l={AuthenticationError:"401",RateLimitError:"429",BadRequestError:"400",InternalServerError:"500",TimeoutError:"408",NotFoundError:"404",ForbiddenError:"403",ServiceUnavailableError:"503",BadGatewayError:"502",GatewayTimeoutError:"504",ContentPolicyViolationError:"400"}[e];return l?"".concat(e,": ").concat(l):e}for(let{pattern:e,replacement:l}of lX)if(e.test(t))return l;if(/missing.*api.*key|invalid.*key|unauthorized/i.test(t))return"AuthenticationError: 401";if(/rate.*limit|too.*many.*requests/i.test(t))return"RateLimitError: 429";if(/timeout|timed.*out/i.test(t))return"TimeoutError: 408";if(/not.*found/i.test(t))return"NotFoundError: 404";if(/forbidden|access.*denied/i.test(t))return"ForbiddenError: 403";if(/internal.*server.*error/i.test(t))return"InternalServerError: 500";let i=t.replace(/[\n\r]+/g," ").replace(/\s+/g," ").trim(),n=null===(l=i.split(/[.!?]/)[0])||void 0===l?void 0:l.trim();return n&&n.length>0?n.length>100?n.substring(0,97)+"...":n:i.length>100?i.substring(0,97)+"...":i},S=async e=>{if(l){c(l=>({...l,[e]:{...l[e],loading:!0,status:"checking"}}));try{var t,s;let r=await (0,a.individualModelHealthCheckCall)(l,e),i=new Date().toLocaleString();if(r.unhealthy_count>0&&r.unhealthy_endpoints&&r.unhealthy_endpoints.length>0){let l=(null===(t=r.unhealthy_endpoints[0])||void 0===t?void 0:t.error)||"Health check failed",s=C(l);c(t=>{var a;return{...t,[e]:{status:"unhealthy",lastCheck:i,lastSuccess:(null===(a=t[e])||void 0===a?void 0:a.lastSuccess)||"None",loading:!1,error:s,fullError:l}}})}else c(l=>({...l,[e]:{status:"healthy",lastCheck:i,lastSuccess:i,loading:!1,successResponse:r}}));try{let t=await (0,a.latestHealthChecksCall)(l),r=null===(s=t.latest_health_checks)||void 0===s?void 0:s[e];if(r){let l=r.error_message||void 0;c(t=>{var s,a,i,n,o,d,c;return{...t,[e]:{status:r.status||(null===(s=t[e])||void 0===s?void 0:s.status)||"unknown",lastCheck:r.checked_at?new Date(r.checked_at).toLocaleString():(null===(a=t[e])||void 0===a?void 0:a.lastCheck)||"None",lastSuccess:"healthy"===r.status?r.checked_at?new Date(r.checked_at).toLocaleString():(null===(i=t[e])||void 0===i?void 0:i.lastSuccess)||"None":(null===(n=t[e])||void 0===n?void 0:n.lastSuccess)||"None",loading:!1,error:l?C(l):null===(o=t[e])||void 0===o?void 0:o.error,fullError:l||(null===(d=t[e])||void 0===d?void 0:d.fullError),successResponse:"healthy"===r.status?r:null===(c=t[e])||void 0===c?void 0:c.successResponse}}})}}catch(e){console.debug("Could not fetch updated status from database (non-critical):",e)}}catch(a){let l=new Date().toLocaleString(),t=a instanceof Error?a.message:String(a),s=C(t);c(a=>{var r;return{...a,[e]:{status:"unhealthy",lastCheck:l,lastSuccess:(null===(r=a[e])||void 0===r?void 0:r.lastSuccess)||"None",loading:!1,error:s,fullError:t}}})}}},k=async()=>{let e=m.length>0?m:r,t=e.reduce((e,l)=>(e[l]={...d[l],loading:!0,status:"checking"},e),{});c(e=>({...e,...t}));let s={},i=e.map(async e=>{if(l)try{let r=await (0,a.individualModelHealthCheckCall)(l,e);s[e]=r;let i=new Date().toLocaleString();if(r.unhealthy_count>0&&r.unhealthy_endpoints&&r.unhealthy_endpoints.length>0){var t;let l=(null===(t=r.unhealthy_endpoints[0])||void 0===t?void 0:t.error)||"Health check failed",s=C(l);c(t=>{var a;return{...t,[e]:{status:"unhealthy",lastCheck:i,lastSuccess:(null===(a=t[e])||void 0===a?void 0:a.lastSuccess)||"None",loading:!1,error:s,fullError:l}}})}else c(l=>({...l,[e]:{status:"healthy",lastCheck:i,lastSuccess:i,loading:!1,successResponse:r}}))}catch(a){console.error("Health check failed for model id ".concat(e,":"),a);let l=new Date().toLocaleString(),t=a instanceof Error?a.message:String(a),s=C(t);c(a=>{var r;return{...a,[e]:{status:"unhealthy",lastCheck:l,lastSuccess:(null===(r=a[e])||void 0===r?void 0:r.lastSuccess)||"None",loading:!1,error:s,fullError:t}}})}});await Promise.allSettled(i);try{if(!l)return;let t=await (0,a.latestHealthChecksCall)(l);t.latest_health_checks&&Object.entries(t.latest_health_checks).forEach(l=>{let[t,s]=l;if(e.includes(t)&&s){let e=s.error_message||void 0;c(l=>{let a=l[t];return{...l,[t]:{status:s.status||(null==a?void 0:a.status)||"unknown",lastCheck:s.checked_at?new Date(s.checked_at).toLocaleString():(null==a?void 0:a.lastCheck)||"None",lastSuccess:"healthy"===s.status&&s.checked_at?new Date(s.checked_at).toLocaleString():(null==a?void 0:a.lastSuccess)||"None",loading:!1,error:e?C(e):null==a?void 0:a.error,fullError:e||(null==a?void 0:a.fullError),successResponse:"healthy"===s.status?s:null==a?void 0:a.successResponse}}})}})}catch(e){console.warn("Failed to fetch updated health statuses from database (non-critical):",e)}},P=e=>{x(e),e?u(r):u([])},E=()=>{f(!1),v(null)},A=()=>{y(!1),N(null)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(ec.Z,{children:"Model Health Status"}),(0,s.jsx)(ed.Z,{className:"text-gray-600 mt-1",children:"Run health checks on individual models to verify they are working correctly"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[m.length>0&&(0,s.jsx)(w.Z,{size:"sm",variant:"light",onClick:()=>P(!1),className:"px-3 py-1 text-sm",children:"Clear Selection"}),(0,s.jsx)(w.Z,{size:"sm",variant:"secondary",onClick:k,disabled:Object.values(d).some(e=>e.loading),className:"px-3 py-1 text-sm",children:m.length>0&&m.length<r.length?"Run Selected Checks":"Run All Checks"})]})]})}),(0,s.jsx)("div",{children:(0,s.jsx)(lU.C,{columns:lY(d,m,h,(e,l)=>{l?u(l=>[...l,e]):(u(l=>l.filter(l=>l!==e)),x(!1))},P,S,e=>{switch(e){case"healthy":return(0,s.jsx)(Z.Z,{color:"emerald",children:"healthy"});case"unhealthy":return(0,s.jsx)(Z.Z,{color:"red",children:"unhealthy"});case"checking":return(0,s.jsx)(Z.Z,{color:"blue",children:"checking"});case"none":return(0,s.jsx)(Z.Z,{color:"gray",children:"none"});default:return(0,s.jsx)(Z.Z,{color:"gray",children:"unknown"})}},i,(e,l,t)=>{v({modelName:e,cleanedError:l,fullError:t}),f(!0)},(e,l)=>{N({modelName:e,response:l}),y(!0)},n,o),data:t.data.map(e=>{var l;let t=null===(l=e.model_info)||void 0===l?void 0:l.id,s=(t?d[t]:null)||{status:"none",lastCheck:"None",loading:!1};return{model_name:e.model_name,model_info:e.model_info,provider:e.provider,litellm_model_name:e.litellm_model_name,health_status:s.status,last_check:s.lastCheck,last_success:s.lastSuccess||"None",health_loading:s.loading,health_error:s.error,health_full_error:s.fullError}}),isLoading:!1})}),(0,s.jsx)($.Z,{title:j?"Health Check Error - ".concat(j.modelName):"Error Details",open:p,onCancel:E,footer:[(0,s.jsx)(U.ZP,{onClick:E,children:"Close"},"close")],width:800,children:j&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Error:"}),(0,s.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsx)(ed.Z,{className:"text-red-800",children:j.cleanedError})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Full Error Details:"}),(0,s.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md max-h-96 overflow-y-auto",children:(0,s.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:j.fullError})})]})]})}),(0,s.jsx)($.Z,{title:b?"Health Check Response - ".concat(b.modelName):"Response Details",open:_,onCancel:A,footer:[(0,s.jsx)(U.ZP,{onClick:A,children:"Close"},"close")],width:800,children:b&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Status:"}),(0,s.jsx)("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,s.jsx)(ed.Z,{className:"text-green-800",children:"Health check passed successfully"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Response Details:"}),(0,s.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md max-h-96 overflow-y-auto",children:(0,s.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:JSON.stringify(b.response,null,2)})})]})]})})]})},l$=t(86462),l0=t(47686),l1=t(77355),l2=t(93416),l4=t(95704),l5=e=>{let{accessToken:l,initialModelGroupAlias:t={},onAliasUpdate:r}=e,[i,n]=(0,g.useState)([]),[o,d]=(0,g.useState)({aliasName:"",targetModelGroup:""}),[c,m]=(0,g.useState)(null),[u,h]=(0,g.useState)(!0);(0,g.useEffect)(()=>{n(Object.entries(t).map((e,l)=>{var t;let[s,a]=e;return{id:"".concat(l,"-").concat(s),aliasName:s,targetModelGroup:"string"==typeof a?a:null!==(t=null==a?void 0:a.model)&&void 0!==t?t:""}}))},[t]);let x=async e=>{if(!l)return console.error("Access token is missing"),!1;try{let t={};return e.forEach(e=>{t[e.aliasName]=e.targetModelGroup}),console.log("Saving model group alias:",t),await (0,a.setCallbacksCall)(l,{router_settings:{model_group_alias:t}}),r&&r(t),!0}catch(e){return console.error("Failed to save model group alias settings:",e),Y.ZP.fromBackend("Failed to save model group alias settings"),!1}},p=async()=>{if(!o.aliasName||!o.targetModelGroup){Y.ZP.fromBackend("Please provide both alias name and target model group");return}if(i.some(e=>e.aliasName===o.aliasName)){Y.ZP.fromBackend("An alias with this name already exists");return}let e=[...i,{id:"".concat(Date.now(),"-").concat(o.aliasName),aliasName:o.aliasName,targetModelGroup:o.targetModelGroup}];await x(e)&&(n(e),d({aliasName:"",targetModelGroup:""}),Y.ZP.success("Alias added successfully"))},f=e=>{m({...e})},j=async()=>{if(!c)return;if(!c.aliasName||!c.targetModelGroup){Y.ZP.fromBackend("Please provide both alias name and target model group");return}if(i.some(e=>e.id!==c.id&&e.aliasName===c.aliasName)){Y.ZP.fromBackend("An alias with this name already exists");return}let e=i.map(e=>e.id===c.id?c:e);await x(e)&&(n(e),m(null),Y.ZP.success("Alias updated successfully"))},v=()=>{m(null)},_=async e=>{let l=i.filter(l=>l.id!==e);await x(l)&&(n(l),Y.ZP.success("Alias deleted successfully"))},y=i.reduce((e,l)=>(e[l.aliasName]=l.targetModelGroup,e),{});return(0,s.jsxs)(l4.Zb,{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>h(!u),children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(l4.Dx,{className:"mb-0",children:"Model Group Alias Settings"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Create aliases for your model groups to simplify API calls. For example, you can create an alias 'gpt-4o' that points to 'gpt-4o-mini-openai' model group."})]}),(0,s.jsx)("div",{className:"flex items-center",children:u?(0,s.jsx)(l$.Z,{className:"w-5 h-5 text-gray-500"}):(0,s.jsx)(l0.Z,{className:"w-5 h-5 text-gray-500"})})]}),u&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)(l4.xv,{className:"text-sm font-medium text-gray-700 mb-2",children:"Add New Alias"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Alias Name"}),(0,s.jsx)("input",{type:"text",value:o.aliasName,onChange:e=>d({...o,aliasName:e.target.value}),placeholder:"e.g., gpt-4o",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Target Model Group"}),(0,s.jsx)("input",{type:"text",value:o.targetModelGroup,onChange:e=>d({...o,targetModelGroup:e.target.value}),placeholder:"e.g., gpt-4o-mini-openai",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("button",{onClick:p,disabled:!o.aliasName||!o.targetModelGroup,className:"flex items-center px-4 py-2 rounded-md text-sm ".concat(o.aliasName&&o.targetModelGroup?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,s.jsx)(l1.Z,{className:"w-4 h-4 mr-1"}),"Add Alias"]})})]})]}),(0,s.jsx)(l4.xv,{className:"text-sm font-medium text-gray-700 mb-2",children:"Manage Existing Aliases"}),(0,s.jsx)("div",{className:"rounded-lg custom-border relative mb-6",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(l4.iA,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,s.jsx)(l4.ss,{children:(0,s.jsxs)(l4.SC,{children:[(0,s.jsx)(l4.xs,{className:"py-1 h-8",children:"Alias Name"}),(0,s.jsx)(l4.xs,{className:"py-1 h-8",children:"Target Model Group"}),(0,s.jsx)(l4.xs,{className:"py-1 h-8",children:"Actions"})]})}),(0,s.jsxs)(l4.RM,{children:[i.map(e=>(0,s.jsx)(l4.SC,{className:"h-8",children:c&&c.id===e.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l4.pj,{className:"py-0.5",children:(0,s.jsx)("input",{type:"text",value:c.aliasName,onChange:e=>m({...c,aliasName:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})}),(0,s.jsx)(l4.pj,{className:"py-0.5",children:(0,s.jsx)("input",{type:"text",value:c.targetModelGroup,onChange:e=>m({...c,targetModelGroup:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})}),(0,s.jsx)(l4.pj,{className:"py-0.5 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:j,className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:"Save"}),(0,s.jsx)("button",{onClick:v,className:"text-xs bg-gray-50 text-gray-600 px-2 py-1 rounded hover:bg-gray-100",children:"Cancel"})]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l4.pj,{className:"py-0.5 text-sm text-gray-900",children:e.aliasName}),(0,s.jsx)(l4.pj,{className:"py-0.5 text-sm text-gray-500",children:e.targetModelGroup}),(0,s.jsx)(l4.pj,{className:"py-0.5 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>f(e),className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:(0,s.jsx)(l2.Z,{className:"w-3 h-3"})}),(0,s.jsx)("button",{onClick:()=>_(e.id),className:"text-xs bg-red-50 text-red-600 px-2 py-1 rounded hover:bg-red-100",children:(0,s.jsx)(N.Z,{className:"w-3 h-3"})})]})})]})},e.id)),0===i.length&&(0,s.jsx)(l4.SC,{children:(0,s.jsx)(l4.pj,{colSpan:3,className:"py-0.5 text-sm text-gray-500 text-center",children:"No aliases added yet. Add a new alias above."})})]})]})})}),(0,s.jsxs)(l4.Zb,{children:[(0,s.jsx)(l4.Dx,{className:"mb-4",children:"Configuration Example"}),(0,s.jsx)(l4.xv,{className:"text-gray-600 mb-4",children:"Here's how your current aliases would look in the config.yaml:"}),(0,s.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 font-mono text-sm",children:(0,s.jsxs)("div",{className:"text-gray-700",children:["router_settings:",(0,s.jsx)("br",{}),"\xa0\xa0model_group_alias:",0===Object.keys(y).length?(0,s.jsxs)("span",{className:"text-gray-500",children:[(0,s.jsx)("br",{}),"\xa0\xa0\xa0\xa0# No aliases configured yet"]}):Object.entries(y).map(e=>{let[l,t]=e;return(0,s.jsxs)("span",{children:[(0,s.jsx)("br",{}),'\xa0\xa0\xa0\xa0"',l,'": "',t,'"']},l)})]})})]})]})]})},l6=t(10900),l3=t(45589),l8=t(12514),l7=t(49566),l9=t(30401),te=t(78867),tl=t(59872),tt=e=>{let{isVisible:l,onCancel:t,onSuccess:r,modelData:i,accessToken:n,userRole:o}=e,[d]=Q.Z.useForm(),[c,m]=(0,g.useState)(!1),[u,h]=(0,g.useState)([]),[x,p]=(0,g.useState)([]),[f,j]=(0,g.useState)(!1),[v,_]=(0,g.useState)(!1),[y,b]=(0,g.useState)(null);(0,g.useEffect)(()=>{l&&i&&N()},[l,i]),(0,g.useEffect)(()=>{let e=async()=>{if(n)try{let e=await (0,a.modelAvailableCall)(n,"","",!1,null,!0,!0);h(e.data.map(e=>e.id))}catch(e){console.error("Error fetching model access groups:",e)}},t=async()=>{if(n)try{let e=await (0,ls.p)(n);p(e)}catch(e){console.error("Error fetching model info:",e)}};l&&(e(),t())},[l,n]);let N=()=>{try{var e,l,t,s,a,r;let n=null;(null===(e=i.litellm_params)||void 0===e?void 0:e.auto_router_config)&&(n="string"==typeof i.litellm_params.auto_router_config?JSON.parse(i.litellm_params.auto_router_config):i.litellm_params.auto_router_config),b(n),d.setFieldsValue({auto_router_name:i.model_name,auto_router_default_model:(null===(l=i.litellm_params)||void 0===l?void 0:l.auto_router_default_model)||"",auto_router_embedding_model:(null===(t=i.litellm_params)||void 0===t?void 0:t.auto_router_embedding_model)||"",model_access_group:(null===(s=i.model_info)||void 0===s?void 0:s.access_groups)||[]});let o=new Set(x.map(e=>e.model_group));j(!o.has(null===(a=i.litellm_params)||void 0===a?void 0:a.auto_router_default_model)),_(!o.has(null===(r=i.litellm_params)||void 0===r?void 0:r.auto_router_embedding_model))}catch(e){console.error("Error parsing auto router config:",e),Y.ZP.fromBackend("Error loading auto router configuration")}},Z=async()=>{try{m(!0);let e=await d.validateFields(),l={...i.litellm_params,auto_router_config:JSON.stringify(y),auto_router_default_model:e.auto_router_default_model,auto_router_embedding_model:e.auto_router_embedding_model||void 0},s={...i.model_info,access_groups:e.model_access_group||[]},o={model_name:e.auto_router_name,litellm_params:l,model_info:s};await (0,a.modelPatchUpdateCall)(n,o,i.model_info.id);let c={...i,model_name:e.auto_router_name,litellm_params:l,model_info:s};Y.ZP.success("Auto router configuration updated successfully"),r(c),t()}catch(e){console.error("Error updating auto router:",e),Y.ZP.fromBackend("Failed to update auto router configuration")}finally{m(!1)}},w=x.map(e=>({value:e.model_group,label:e.model_group}));return(0,s.jsx)($.Z,{title:"Edit Auto Router Configuration",open:l,onCancel:t,footer:[(0,s.jsx)(U.ZP,{onClick:t,children:"Cancel"},"cancel"),(0,s.jsx)(U.ZP,{loading:c,onClick:Z,children:"Save Changes"},"submit")],width:1e3,destroyOnHidden:!0,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(eI.x,{className:"text-gray-600",children:"Edit the auto router configuration including routing logic, default models, and access settings."}),(0,s.jsxs)(Q.Z,{form:d,layout:"vertical",className:"space-y-4",children:[(0,s.jsx)(Q.Z.Item,{label:"Auto Router Name",name:"auto_router_name",rules:[{required:!0,message:"Auto router name is required"}],children:(0,s.jsx)(eI.o,{placeholder:"e.g., auto_router_1, smart_routing"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(lc,{modelInfo:x,value:y,onChange:e=>{b(e)}})}),(0,s.jsx)(Q.Z.Item,{label:"Default Model",name:"auto_router_default_model",rules:[{required:!0,message:"Default model is required"}],children:(0,s.jsx)(B.default,{placeholder:"Select a default model",onChange:e=>{j("custom"===e)},options:[...w,{value:"custom",label:"Enter custom model name"}],showSearch:!0})}),(0,s.jsx)(Q.Z.Item,{label:"Embedding Model",name:"auto_router_embedding_model",children:(0,s.jsx)(B.default,{placeholder:"Select an embedding model (optional)",onChange:e=>{_("custom"===e)},options:[...w,{value:"custom",label:"Enter custom model name"}],showSearch:!0,allowClear:!0})}),"Admin"===o&&(0,s.jsx)(Q.Z.Item,{label:"Model Access Groups",name:"model_access_group",tooltip:"Control who can access this auto router",children:(0,s.jsx)(B.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],options:u.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})})]})]})})};let{Title:ts,Link:ta}=S.default;var tr=e=>{let{isVisible:l,onCancel:t,onAddCredential:a,existingCredential:r,setIsCredentialModalOpen:i}=e,[n]=Q.Z.useForm();return console.log("existingCredential in add credentials tab: ".concat(JSON.stringify(r))),(0,s.jsx)($.Z,{title:"Reuse Credentials",open:l,onCancel:()=>{t(),n.resetFields()},footer:null,width:600,children:(0,s.jsxs)(Q.Z,{form:n,onFinish:e=>{a(e),n.resetFields(),i(!1)},layout:"vertical",children:[(0,s.jsx)(Q.Z.Item,{label:"Credential Name:",name:"credential_name",rules:[{required:!0,message:"Credential name is required"}],initialValue:null==r?void 0:r.credential_name,children:(0,s.jsx)(eM.o,{placeholder:"Enter a friendly name for these credentials"})}),Object.entries((null==r?void 0:r.credential_values)||{}).map(e=>{let[l,t]=e;return(0,s.jsx)(Q.Z.Item,{label:l,name:l,initialValue:t,children:(0,s.jsx)(eM.o,{placeholder:"Enter ".concat(l),disabled:!0})},l)}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(A.Z,{title:"Get help on our github",children:(0,s.jsx)(ta,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(U.ZP,{onClick:()=>{t(),n.resetFields()},style:{marginRight:10},children:"Cancel"}),(0,s.jsx)(U.ZP,{htmlType:"submit",children:"Reuse Credentials"})]})]})]})})};function ti(e){var l,t,r,i,n,o,d,u,h,x,p,f,j,v,_,y,Z,C,S,k,P,E,M,L,T,F,I,R,O,D,G,H,K;let{modelId:J,onClose:W,accessToken:X,userID:ee,userRole:el,onModelUpdate:et,modelAccessGroups:es}=e,[er]=Q.Z.useForm(),[ei,en]=(0,g.useState)(null),[eo,em]=(0,g.useState)(!1),[eu,eh]=(0,g.useState)(!1),[ex,ep]=(0,g.useState)(!1),[eg,ef]=(0,g.useState)(!1),[ej,ev]=(0,g.useState)(!1),[e_,ey]=(0,g.useState)(!1),[eb,eN]=(0,g.useState)(null),[eZ,ew]=(0,g.useState)(!1),[eS,ek]=(0,g.useState)({}),[eP,eE]=(0,g.useState)(!1),[eM,eL]=(0,g.useState)([]),[eT,eF]=(0,g.useState)({}),{data:eI,isLoading:eR}=(0,m.XP)(1,50,void 0,J),{data:ez}=(0,c.i)(),{data:eO}=(0,m.VI)(),eV=e=>null!=ez&&"object"==typeof ez&&e in ez?ez[e].litellm_provider:"openai",eD=(0,g.useMemo)(()=>(null==eI?void 0:eI.data)&&0!==eI.data.length&&ea(eI,eV).data[0]||null,[eI,ez]),eB=("Admin"===el||(null==eD?void 0:null===(l=eD.model_info)||void 0===l?void 0:l.created_by)===ee)&&(null==eD?void 0:null===(t=eD.model_info)||void 0===t?void 0:t.db_model),eG="Admin"===el,eU=(null==eD?void 0:null===(r=eD.litellm_params)||void 0===r?void 0:r.auto_router_config)!=null,eH=(null==eD?void 0:null===(i=eD.litellm_params)||void 0===i?void 0:i.litellm_credential_name)!=null&&(null==eD?void 0:null===(n=eD.litellm_params)||void 0===n?void 0:n.litellm_credential_name)!=void 0;(0,g.useEffect)(()=>{if(eD&&!ei){var e,l,t,s,a,r,i;let n=eD;n.litellm_model_name||(n={...n,litellm_model_name:null!==(i=null!==(r=null!==(a=null==n?void 0:null===(l=n.litellm_params)||void 0===l?void 0:l.litellm_model_name)&&void 0!==a?a:null==n?void 0:null===(t=n.litellm_params)||void 0===t?void 0:t.model)&&void 0!==r?r:null==n?void 0:null===(s=n.model_info)||void 0===s?void 0:s.key)&&void 0!==i?i:null}),en(n),(null==n?void 0:null===(e=n.litellm_params)||void 0===e?void 0:e.cache_control_injection_points)&&ew(!0)}},[eD,ei]),(0,g.useEffect)(()=>{let e=async()=>{var e,l,t,s,r,i,n;if(!X||eD)return;let o=(await (0,a.modelInfoV1Call)(X,J)).data[0];o&&!o.litellm_model_name&&(o={...o,litellm_model_name:null!==(n=null!==(i=null!==(r=null==o?void 0:null===(l=o.litellm_params)||void 0===l?void 0:l.litellm_model_name)&&void 0!==r?r:null==o?void 0:null===(t=o.litellm_params)||void 0===t?void 0:t.model)&&void 0!==i?i:null==o?void 0:null===(s=o.model_info)||void 0===s?void 0:s.key)&&void 0!==n?n:null}),en(o),(null==o?void 0:null===(e=o.litellm_params)||void 0===e?void 0:e.cache_control_injection_points)&&ew(!0)},l=async()=>{if(X)try{let e=(await (0,a.getGuardrailsList)(X)).guardrails.map(e=>e.guardrail_name);eL(e)}catch(e){console.error("Failed to fetch guardrails:",e)}},t=async()=>{if(X)try{let e=await (0,a.tagListCall)(X);eF(e)}catch(e){console.error("Failed to fetch tags:",e)}};(async()=>{if(!X||eH)return;let e=await (0,a.credentialGetCall)(X,null,J);eN({credential_name:e.credential_name,credential_values:e.credential_values,credential_info:e.credential_info})})(),e(),l(),t()},[X,J]);let eK=async e=>{var l;if(!X)return;let t={credential_name:e.credential_name,model_id:J,credential_info:{custom_llm_provider:null===(l=ei.litellm_params)||void 0===l?void 0:l.custom_llm_provider}};Y.ZP.info("Storing credential.."),await (0,a.credentialCreateCall)(X,t),Y.ZP.success("Credential stored successfully")},eJ=async e=>{try{var l;let t;if(!X)return;ev(!0);let s={};try{s=e.litellm_extra_params?JSON.parse(e.litellm_extra_params):{}}catch(e){Y.ZP.fromBackend("Invalid JSON in LiteLLM Params"),ev(!1);return}let r={...e.litellm_params,...s,model:e.litellm_model_name,api_base:e.api_base,custom_llm_provider:e.custom_llm_provider,organization:e.organization,tpm:e.tpm,rpm:e.rpm,max_retries:e.max_retries,timeout:e.timeout,stream_timeout:e.stream_timeout,input_cost_per_token:e.input_cost/1e6,output_cost_per_token:e.output_cost/1e6,tags:e.tags};e.guardrails&&(r.guardrails=e.guardrails),e.cache_control&&(null===(l=e.cache_control_injection_points)||void 0===l?void 0:l.length)>0?r.cache_control_injection_points=e.cache_control_injection_points:delete r.cache_control_injection_points;try{t=e.model_info?JSON.parse(e.model_info):eD.model_info,e.model_access_group&&(t={...t,access_groups:e.model_access_group}),void 0!==e.health_check_model&&(t={...t,health_check_model:e.health_check_model})}catch(e){Y.ZP.fromBackend("Invalid JSON in Model Info");return}let i={model_name:e.model_name,litellm_params:r,model_info:t};await (0,a.modelPatchUpdateCall)(X,i,J);let n={...ei,model_name:e.model_name,litellm_model_name:e.litellm_model_name,litellm_params:r,model_info:t};en(n),et&&et(n),Y.ZP.success("Model settings updated successfully"),ef(!1),ey(!1)}catch(e){console.error("Error updating model:",e),Y.ZP.fromBackend("Failed to update model settings")}finally{ev(!1)}};if(eR)return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)(w.Z,{icon:l6.Z,variant:"light",onClick:W,className:"mb-4",children:"Back to Models"}),(0,s.jsx)(ed.Z,{children:"Loading..."})]});if(!eD)return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)(w.Z,{icon:l6.Z,variant:"light",onClick:W,className:"mb-4",children:"Back to Models"}),(0,s.jsx)(ed.Z,{children:"Model not found"})]});let eW=async()=>{if(X)try{var e,l,t;Y.ZP.info("Testing connection...");let s=await (0,a.testConnectionRequest)(X,{custom_llm_provider:ei.litellm_params.custom_llm_provider,litellm_credential_name:ei.litellm_params.litellm_credential_name,model:ei.litellm_model_name},{mode:null===(e=ei.model_info)||void 0===e?void 0:e.mode},null===(l=ei.model_info)||void 0===l?void 0:l.mode);if("success"===s.status)Y.ZP.success("Connection test successful!");else throw Error((null==s?void 0:null===(t=s.result)||void 0===t?void 0:t.error)||(null==s?void 0:s.message)||"Unknown error")}catch(e){e instanceof Error?Y.ZP.error("Error testing connection: "+(0,lM.aS)(e.message,100)):Y.ZP.error("Error testing connection: "+String(e))}},eY=async()=>{try{if(eh(!0),!X)return;await (0,a.modelDeleteCall)(X,J),Y.ZP.success("Model deleted successfully"),et&&et({deleted:!0,model_info:{id:J}}),W()}catch(e){console.error("Error deleting the model:",e),Y.ZP.fromBackend("Failed to delete model")}finally{eh(!1),em(!1)}},eQ=async(e,l)=>{await (0,tl.vQ)(e)&&(ek(e=>({...e,[l]:!0})),setTimeout(()=>{ek(e=>({...e,[l]:!1}))},2e3))},e$=eD.litellm_model_name.includes("*");return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(w.Z,{icon:l6.Z,variant:"light",onClick:W,className:"mb-4",children:"Back to Models"}),(0,s.jsxs)(ec.Z,{children:["Public Model Name: ",z(eD)]}),(0,s.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,s.jsx)(ed.Z,{className:"text-gray-500 font-mono",children:eD.model_info.id}),(0,s.jsx)(U.ZP,{type:"text",size:"small",icon:eS["model-id"]?(0,s.jsx)(l9.Z,{size:12}):(0,s.jsx)(te.Z,{size:12}),onClick:()=>eQ(eD.model_info.id,"model-id"),className:"left-2 z-10 transition-all duration-200 ".concat(eS["model-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(w.Z,{variant:"secondary",icon:eX.Z,onClick:eW,className:"flex items-center gap-2","data-testid":"test-connection-button",children:"Test Connection"}),(0,s.jsx)(w.Z,{icon:l3.Z,variant:"secondary",onClick:()=>ep(!0),className:"flex items-center",disabled:!eG,"data-testid":"reuse-credentials-button",children:"Re-use Credentials"}),(0,s.jsx)(w.Z,{icon:N.Z,variant:"secondary",onClick:()=>em(!0),className:"flex items-center text-red-500 border-red-500 hover:text-red-700",disabled:!eB,"data-testid":"delete-model-button",children:"Delete Model"})]})]}),(0,s.jsxs)(e1.Z,{children:[(0,s.jsxs)(e2.Z,{className:"mb-6",children:[(0,s.jsx)(e0.Z,{children:"Overview"}),(0,s.jsx)(e0.Z,{children:"Raw JSON"})]}),(0,s.jsxs)(e4.Z,{children:[(0,s.jsxs)(V.Z,{children:[(0,s.jsxs)(q.Z,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6 mb-6",children:[(0,s.jsxs)(l8.Z,{children:[(0,s.jsx)(ed.Z,{children:"Provider"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[eD.provider&&(0,s.jsx)("img",{src:(0,eC.dr)(eD.provider).logo,alt:"".concat(eD.provider," logo"),className:"w-4 h-4",onError:e=>{let l=e.currentTarget,t=l.parentElement;if(t&&t.contains(l))try{var s;let e=document.createElement("div");e.className="w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=(null===(s=eD.provider)||void 0===s?void 0:s.charAt(0))||"-",t.replaceChild(e,l)}catch(e){console.error("Failed to replace provider logo fallback:",e)}}}),(0,s.jsx)(ec.Z,{children:eD.provider||"Not Set"})]})]}),(0,s.jsxs)(l8.Z,{children:[(0,s.jsx)(ed.Z,{children:"LiteLLM Model"}),(0,s.jsx)("div",{className:"mt-2 overflow-hidden",children:(0,s.jsx)(A.Z,{title:eD.litellm_model_name||"Not Set",children:(0,s.jsx)("div",{className:"break-all text-sm font-medium leading-relaxed cursor-pointer",children:eD.litellm_model_name||"Not Set"})})})]}),(0,s.jsxs)(l8.Z,{children:[(0,s.jsx)(ed.Z,{children:"Pricing"}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)(ed.Z,{children:["Input: $",eD.input_cost,"/1M tokens"]}),(0,s.jsxs)(ed.Z,{children:["Output: $",eD.output_cost,"/1M tokens"]})]})]})]}),(0,s.jsxs)("div",{className:"mb-6 text-sm text-gray-500 flex items-center gap-x-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Created At"," ",eD.model_info.created_at?new Date(eD.model_info.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not Set"]}),(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Created By ",eD.model_info.created_by||"Not Set"]})]}),(0,s.jsxs)(l8.Z,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(ec.Z,{children:"Model Settings"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[eU&&eB&&!e_&&(0,s.jsx)(w.Z,{onClick:()=>eE(!0),className:"flex items-center",children:"Edit Auto Router"}),eB?!e_&&(0,s.jsx)(w.Z,{onClick:()=>ey(!0),className:"flex items-center",children:"Edit Settings"}):(0,s.jsx)(A.Z,{title:"Only DB models can be edited. You must be an admin or the creator of the model to edit it.",children:(0,s.jsx)(b.Z,{})})]})]}),ei?(0,s.jsx)(Q.Z,{form:er,onFinish:eJ,initialValues:{model_name:ei.model_name,litellm_model_name:ei.litellm_model_name,api_base:ei.litellm_params.api_base,custom_llm_provider:ei.litellm_params.custom_llm_provider,organization:ei.litellm_params.organization,tpm:ei.litellm_params.tpm,rpm:ei.litellm_params.rpm,max_retries:ei.litellm_params.max_retries,timeout:ei.litellm_params.timeout,stream_timeout:ei.litellm_params.stream_timeout,input_cost:ei.litellm_params.input_cost_per_token?1e6*ei.litellm_params.input_cost_per_token:(null===(o=ei.model_info)||void 0===o?void 0:o.input_cost_per_token)*1e6||null,output_cost:(null===(d=ei.litellm_params)||void 0===d?void 0:d.output_cost_per_token)?1e6*ei.litellm_params.output_cost_per_token:(null===(u=ei.model_info)||void 0===u?void 0:u.output_cost_per_token)*1e6||null,cache_control:null!==(h=ei.litellm_params)&&void 0!==h&&!!h.cache_control_injection_points,cache_control_injection_points:(null===(x=ei.litellm_params)||void 0===x?void 0:x.cache_control_injection_points)||[],model_access_group:Array.isArray(null===(p=ei.model_info)||void 0===p?void 0:p.access_groups)?ei.model_info.access_groups:[],guardrails:Array.isArray(null===(f=ei.litellm_params)||void 0===f?void 0:f.guardrails)?ei.litellm_params.guardrails:[],tags:Array.isArray(null===(j=ei.litellm_params)||void 0===j?void 0:j.tags)?ei.litellm_params.tags:[],health_check_model:e$?null===(v=ei.model_info)||void 0===v?void 0:v.health_check_model:null,litellm_extra_params:JSON.stringify(ei.litellm_params||{},null,2)},layout:"vertical",onValuesChange:()=>ef(!0),children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Model Name"}),e_?(0,s.jsx)(Q.Z.Item,{name:"model_name",className:"mb-0",children:(0,s.jsx)(l7.Z,{placeholder:"Enter model name"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:ei.model_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"LiteLLM Model Name"}),e_?(0,s.jsx)(Q.Z.Item,{name:"litellm_model_name",className:"mb-0",children:(0,s.jsx)(l7.Z,{placeholder:"Enter LiteLLM model name"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:ei.litellm_model_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Input Cost (per 1M tokens)"}),e_?(0,s.jsx)(Q.Z.Item,{name:"input_cost",className:"mb-0",children:(0,s.jsx)(lP.Z,{placeholder:"Enter input cost"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null==ei?void 0:null===(_=ei.litellm_params)||void 0===_?void 0:_.input_cost_per_token)?((null===(y=ei.litellm_params)||void 0===y?void 0:y.input_cost_per_token)*1e6).toFixed(4):(null==ei?void 0:null===(Z=ei.model_info)||void 0===Z?void 0:Z.input_cost_per_token)?(1e6*ei.model_info.input_cost_per_token).toFixed(4):"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Output Cost (per 1M tokens)"}),e_?(0,s.jsx)(Q.Z.Item,{name:"output_cost",className:"mb-0",children:(0,s.jsx)(lP.Z,{placeholder:"Enter output cost"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null==ei?void 0:null===(C=ei.litellm_params)||void 0===C?void 0:C.output_cost_per_token)?(1e6*ei.litellm_params.output_cost_per_token).toFixed(4):(null==ei?void 0:null===(S=ei.model_info)||void 0===S?void 0:S.output_cost_per_token)?(1e6*ei.model_info.output_cost_per_token).toFixed(4):"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"API Base"}),e_?(0,s.jsx)(Q.Z.Item,{name:"api_base",className:"mb-0",children:(0,s.jsx)(l7.Z,{placeholder:"Enter API base"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(k=ei.litellm_params)||void 0===k?void 0:k.api_base)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Custom LLM Provider"}),e_?(0,s.jsx)(Q.Z.Item,{name:"custom_llm_provider",className:"mb-0",children:(0,s.jsx)(l7.Z,{placeholder:"Enter custom LLM provider"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(P=ei.litellm_params)||void 0===P?void 0:P.custom_llm_provider)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Organization"}),e_?(0,s.jsx)(Q.Z.Item,{name:"organization",className:"mb-0",children:(0,s.jsx)(l7.Z,{placeholder:"Enter organization"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(E=ei.litellm_params)||void 0===E?void 0:E.organization)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"TPM (Tokens per Minute)"}),e_?(0,s.jsx)(Q.Z.Item,{name:"tpm",className:"mb-0",children:(0,s.jsx)(lP.Z,{placeholder:"Enter TPM"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(M=ei.litellm_params)||void 0===M?void 0:M.tpm)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"RPM (Requests per Minute)"}),e_?(0,s.jsx)(Q.Z.Item,{name:"rpm",className:"mb-0",children:(0,s.jsx)(lP.Z,{placeholder:"Enter RPM"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(L=ei.litellm_params)||void 0===L?void 0:L.rpm)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Max Retries"}),e_?(0,s.jsx)(Q.Z.Item,{name:"max_retries",className:"mb-0",children:(0,s.jsx)(lP.Z,{placeholder:"Enter max retries"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(T=ei.litellm_params)||void 0===T?void 0:T.max_retries)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Timeout (seconds)"}),e_?(0,s.jsx)(Q.Z.Item,{name:"timeout",className:"mb-0",children:(0,s.jsx)(lP.Z,{placeholder:"Enter timeout"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(F=ei.litellm_params)||void 0===F?void 0:F.timeout)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Stream Timeout (seconds)"}),e_?(0,s.jsx)(Q.Z.Item,{name:"stream_timeout",className:"mb-0",children:(0,s.jsx)(lP.Z,{placeholder:"Enter stream timeout"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(I=ei.litellm_params)||void 0===I?void 0:I.stream_timeout)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Model Access Groups"}),e_?(0,s.jsx)(Q.Z.Item,{name:"model_access_group",className:"mb-0",children:(0,s.jsx)(B.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:null==es?void 0:es.map(e=>({value:e,label:e}))})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(R=ei.model_info)||void 0===R?void 0:R.access_groups)?Array.isArray(ei.model_info.access_groups)?ei.model_info.access_groups.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:ei.model_info.access_groups.map((e,l)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},l))}):"No groups assigned":ei.model_info.access_groups:"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(ed.Z,{className:"font-medium",children:["Guardrails",(0,s.jsx)(A.Z,{title:"Apply safety guardrails to this model to filter content or enforce policies",children:(0,s.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(b.Z,{style:{marginLeft:"4px"}})})})]}),e_?(0,s.jsx)(Q.Z.Item,{name:"guardrails",className:"mb-0",children:(0,s.jsx)(B.default,{mode:"tags",showSearch:!0,placeholder:"Select existing guardrails or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:eM.map(e=>({value:e,label:e}))})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(O=ei.litellm_params)||void 0===O?void 0:O.guardrails)?Array.isArray(ei.litellm_params.guardrails)?ei.litellm_params.guardrails.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:ei.litellm_params.guardrails.map((e,l)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e},l))}):"No guardrails assigned":ei.litellm_params.guardrails:"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Tags"}),e_?(0,s.jsx)(Q.Z.Item,{name:"tags",className:"mb-0",children:(0,s.jsx)(B.default,{mode:"tags",showSearch:!0,placeholder:"Select existing tags or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:Object.values(eT).map(e=>({value:e.name,label:e.name,title:e.description||e.name}))})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(D=ei.litellm_params)||void 0===D?void 0:D.tags)?Array.isArray(ei.litellm_params.tags)?ei.litellm_params.tags.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:ei.litellm_params.tags.map((e,l)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:e},l))}):"No tags assigned":ei.litellm_params.tags:"Not Set"})]}),e$&&(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Health Check Model"}),e_?(0,s.jsx)(Q.Z.Item,{name:"health_check_model",className:"mb-0",children:(0,s.jsx)(B.default,{showSearch:!0,placeholder:"Select existing health check model",optionFilterProp:"children",allowClear:!0,options:(()=>{var e;let l=eD.litellm_model_name.split("/")[0];return(null==eO?void 0:null===(e=eO.data)||void 0===e?void 0:e.filter(e=>{var t;return(null===(t=e.providers)||void 0===t?void 0:t.includes(l))&&e.model_group!==eD.litellm_model_name}).map(e=>({value:e.model_group,label:e.model_group})))||[]})()})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(G=ei.model_info)||void 0===G?void 0:G.health_check_model)||"Not Set"})]}),e_?(0,s.jsx)(lA,{form:er,showCacheControl:eZ,onCacheControlChange:e=>ew(e)}):(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Cache Control"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(H=ei.litellm_params)||void 0===H?void 0:H.cache_control_injection_points)?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Enabled"}),(0,s.jsx)("div",{className:"mt-2",children:ei.litellm_params.cache_control_injection_points.map((e,l)=>(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Location: ",e.location,",",e.role&&(0,s.jsxs)("span",{children:[" Role: ",e.role]}),void 0!==e.index&&(0,s.jsxs)("span",{children:[" Index: ",e.index]})]},l))})]}):"Disabled"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Model Info"}),e_?(0,s.jsx)(Q.Z.Item,{name:"model_info",className:"mb-0",children:(0,s.jsx)(eq.default.TextArea,{rows:4,placeholder:'{"gpt-4": 100, "claude-v1": 200}',defaultValue:JSON.stringify(eD.model_info,null,2)})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(0,s.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(ei.model_info,null,2)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(ed.Z,{className:"font-medium",children:["LiteLLM Params",(0,s.jsx)(A.Z,{title:"Optional litellm params used for making a litellm.completion() call. Some params are automatically added by LiteLLM.",children:(0,s.jsx)("a",{href:"https://docs.litellm.ai/docs/completion/input",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(b.Z,{style:{marginLeft:"4px"}})})})]}),e_?(0,s.jsx)(Q.Z.Item,{name:"litellm_extra_params",rules:[{validator:lM.Ac}],children:(0,s.jsx)(eq.default.TextArea,{rows:4,placeholder:'{ "rpm": 100, "timeout": 0, "stream_timeout": 0 }'})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(0,s.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(ei.litellm_params,null,2)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(ed.Z,{className:"font-medium",children:"Team ID"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:eD.model_info.team_id||"Not Set"})]})]}),e_&&(0,s.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,s.jsx)(w.Z,{variant:"secondary",onClick:()=>{er.resetFields(),ef(!1),ey(!1)},disabled:ej,children:"Cancel"}),(0,s.jsx)(w.Z,{variant:"primary",onClick:()=>er.submit(),loading:ej,children:"Save Changes"})]})]})}):(0,s.jsx)(ed.Z,{children:"Loading..."})]})]}),(0,s.jsx)(V.Z,{children:(0,s.jsx)(l8.Z,{children:(0,s.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-auto",children:JSON.stringify(eD,null,2)})})})]})]}),(0,s.jsx)(eA.Z,{isOpen:eo,title:"Delete Model",alertMessage:"This action cannot be undone.",message:"Are you sure you want to delete this model?",resourceInformationTitle:"Model Information",resourceInformation:[{label:"Model Name",value:(null==eD?void 0:eD.model_name)||"Not Set"},{label:"LiteLLM Model Name",value:(null==eD?void 0:eD.litellm_model_name)||"Not Set"},{label:"Provider",value:(null==eD?void 0:eD.provider)||"Not Set"},{label:"Created By",value:(null==eD?void 0:null===(K=eD.model_info)||void 0===K?void 0:K.created_by)||"Not Set"}],onCancel:()=>em(!1),onOk:eY,confirmLoading:eu}),ex&&!eH?(0,s.jsx)(tr,{isVisible:ex,onCancel:()=>ep(!1),onAddCredential:eK,existingCredential:eb,setIsCredentialModalOpen:ep}):(0,s.jsx)($.Z,{open:ex,onCancel:()=>ep(!1),title:"Using Existing Credential",children:(0,s.jsx)(ed.Z,{children:eD.litellm_params.litellm_credential_name})}),(0,s.jsx)(tt,{isVisible:eP,onCancel:()=>eE(!1),onSuccess:e=>{en(e),et&&et(e)},modelData:ei||eD,accessToken:X||"",userRole:el||""})]})}var tn=t(40562),to=t(73938),td=e=>{var l;let{premiumUser:t,teams:r}=e,{accessToken:i,token:o,userRole:h,userId:x}=(0,n.Z)(),[p]=Q.Z.useForm(),[f,j]=(0,g.useState)(""),[v,_]=(0,g.useState)([]),[y,b]=(0,g.useState)(eC.Cl.Anthropic),[N,Z]=(0,g.useState)(null),[w,k]=(0,g.useState)(null),[P,E]=(0,g.useState)(null),[A,M]=(0,g.useState)(0),[L,T]=(0,g.useState)({}),[F,I]=(0,g.useState)(!1),[R,O]=(0,g.useState)(null),[D,B]=(0,g.useState)(null),[G,U]=(0,g.useState)(0),H=(0,eQ.NL)(),{data:K,isLoading:J,refetch:W}=(0,m.XP)(),{data:X,isLoading:$}=(0,c.i)(),{data:ee,isLoading:el}=d(),et=(null==ee?void 0:ee.credentials)||[],{data:es,isLoading:er}=(0,u.L)(),en=(0,g.useMemo)(()=>{if(!(null==K?void 0:K.data))return[];let e=new Set;for(let l of K.data)e.add(l.model_name);return Array.from(e).sort()},[null==K?void 0:K.data]),eo=(0,g.useMemo)(()=>{if(!(null==K?void 0:K.data))return[];let e=new Set;for(let l of K.data){let t=l.model_info;if(null==t?void 0:t.access_groups)for(let l of t.access_groups)e.add(l)}return Array.from(e)},[null==K?void 0:K.data]),ec=(0,g.useMemo)(()=>(null==K?void 0:K.data)?K.data.map(e=>e.model_name):[],[null==K?void 0:K.data]),em=(0,g.useMemo)(()=>(null==K?void 0:K.data)?K.data.map(e=>{var l;return null===(l=e.model_info)||void 0===l?void 0:l.id}).filter(e=>!!e):[],[null==K?void 0:K.data]),eu=e=>null!=X&&"object"==typeof X&&e in X?X[e].litellm_provider:"openai",ex=(0,g.useMemo)(()=>(null==K?void 0:K.data)?ea(K,eu):{data:[]},[null==K?void 0:K.data,eu]),ep=h&&(0,eY.P4)(h),eg=h&&eY.lo.includes(h),ef=x&&(0,eY.yV)(r,x),ej=eg&&(null==es?void 0:null===(l=es.values)||void 0===l?void 0:l.disable_model_add_for_internal_users)===!0,ev=!ep&&(ej||!ef),e_={name:"file",accept:".json",pastable:!1,beforeUpload:e=>{if("application/json"===e.type){let l=new FileReader;l.onload=e=>{if(e.target){let l=e.target.result;p.setFieldsValue({vertex_credentials:l})}},l.readAsText(e)}return!1},onChange(e){"done"===e.file.status?Y.ZP.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&Y.ZP.fromBackend("".concat(e.file.name," file upload failed."))}},ey=()=>{j(new Date().toLocaleString()),H.invalidateQueries({queryKey:["models","list"]}),W()},eb=async()=>{if(i)try{let e={router_settings:{}};"global"===N?(P&&(e.router_settings.retry_policy=P),Y.ZP.success("Global retry settings saved successfully")):(w&&(e.router_settings.model_group_retry_policy=w),Y.ZP.success("Retry settings saved successfully for ".concat(N))),await (0,a.setCallbacksCall)(i,e)}catch(e){Y.ZP.fromBackend("Failed to save retry settings")}};if((0,g.useEffect)(()=>{if(!i||!o||!h||!x||!K)return;let e=async()=>{try{let e=(await (0,a.getCallbacksCall)(i,x,h)).router_settings,l=e.model_group_retry_policy,t=e.num_retries;k(l),E(e.retry_policy),M(t);let s=e.model_group_alias||{};T(s)}catch(e){console.error("Error fetching model data:",e)}};i&&o&&h&&x&&K&&e()},[i,o,h,x,K]),h&&"Admin Viewer"==h){let{Title:e,Paragraph:l}=S.default;return(0,s.jsxs)("div",{children:[(0,s.jsx)(e,{level:1,children:"Access Denied"}),(0,s.jsx)(l,{children:"Ask your proxy admin for access to view all models"})]})}let eN=async()=>{try{let e=await p.validateFields();await ek(e,i,p,ey)}catch(t){var e;let l=(null===(e=t.errorFields)||void 0===e?void 0:e.map(e=>"".concat(e.name.join("."),": ").concat(e.errors.join(", "))).join(" | "))||"Unknown validation error";Y.ZP.fromBackend("Please fill in the following required fields: ".concat(l))}};return(Object.keys(eC.Cl).find(e=>eC.Cl[e]===y),D)?(0,s.jsx)("div",{className:"w-full h-full",children:(0,s.jsx)(to.Z,{teamId:D,onClose:()=>B(null),accessToken:i,is_team_admin:"Admin"===h,is_proxy_admin:"Proxy Admin"===h,userModels:ec,editTeam:!1,onUpdate:ey,premiumUser:t})}):(0,s.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,s.jsx)(q.Z,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,s.jsxs)(e$.Z,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Model Management"}),eY.ZL.includes(h)?(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Add and manage models for the proxy"}):(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Add models for teams you are an admin for."})]})}),(0,s.jsxs)("div",{className:"mb-4 px-4 py-3 bg-blue-50 rounded-lg border border-blue-100 flex items-center gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-white rounded-full flex items-center justify-center border border-blue-200",children:(0,s.jsx)(e5.Z,{style:{fontSize:"18px",color:"#6366f1"}})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-gray-900 font-semibold text-sm m-0",children:"Missing a provider?"}),(0,s.jsx)("p",{className:"text-gray-500 text-xs m-0 mt-0.5",children:"The LiteLLM engineering team is constantly adding support for new LLM models, providers, endpoints. If you don't see the one you need, let us know and we'll prioritize it."})]}),(0,s.jsxs)("a",{href:"https://models.litellm.ai/?request=true",target:"_blank",rel:"noopener noreferrer",className:"flex-shrink-0 inline-flex items-center gap-2 px-4 py-2 bg-[#6366f1] hover:bg-[#5558e3] text-white text-sm font-medium rounded-lg transition-colors",children:["Request Provider",(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]}),R&&!(J||$||el||er)?(0,s.jsx)(ti,{modelId:R,onClose:()=>{O(null)},accessToken:i,userID:x,userRole:h,onModelUpdate:e=>{H.invalidateQueries({queryKey:["models","list"]}),ey()},modelAccessGroups:eo}):(0,s.jsxs)(e1.Z,{index:G,onIndexChange:U,className:"gap-2 h-[75vh] w-full ",children:[(0,s.jsxs)(e2.Z,{className:"flex justify-between mt-2 w-full items-center",children:[(0,s.jsxs)("div",{className:"flex",children:[eY.ZL.includes(h)?(0,s.jsx)(e0.Z,{children:"All Models"}):(0,s.jsx)(e0.Z,{children:"Your Models"}),!ev&&(0,s.jsx)(e0.Z,{children:"Add Model"}),eY.ZL.includes(h)&&(0,s.jsx)(e0.Z,{children:"LLM Credentials"}),eY.ZL.includes(h)&&(0,s.jsx)(e0.Z,{children:"Pass-Through Endpoints"}),eY.ZL.includes(h)&&(0,s.jsx)(e0.Z,{children:"Health Status"}),eY.ZL.includes(h)&&(0,s.jsx)(e0.Z,{children:"Model Retry Settings"}),eY.ZL.includes(h)&&(0,s.jsx)(e0.Z,{children:"Model Group Alias"}),eY.ZL.includes(h)&&(0,s.jsx)(e0.Z,{children:"Price Data Reload"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[f&&(0,s.jsxs)(ed.Z,{children:["Last Refreshed: ",f]}),(0,s.jsx)(C.Z,{icon:eX.Z,variant:"shadow",size:"xs",className:"self-center",onClick:ey})]})]}),(0,s.jsxs)(e4.Z,{children:[(0,s.jsx)(ei,{selectedModelGroup:N,setSelectedModelGroup:Z,availableModelGroups:en,availableModelAccessGroups:eo,setSelectedModelId:O,setSelectedTeamId:B}),!ev&&(0,s.jsx)(V.Z,{className:"h-full",children:(0,s.jsx)(lG,{form:p,handleOk:eN,selectedProvider:y,setSelectedProvider:b,providerModels:v,setProviderModelsFn:e=>{_((0,eC.bK)(e,X))},getPlaceholder:eC.ph,uploadProps:e_,showAdvancedSettings:F,setShowAdvancedSettings:I,teams:r,credentials:et,accessToken:i,userRole:h})}),(0,s.jsx)(V.Z,{children:(0,s.jsx)(eW,{uploadProps:e_})}),(0,s.jsx)(V.Z,{children:(0,s.jsx)(tn.Z,{accessToken:i,userRole:h,userID:x,modelData:ex,premiumUser:t})}),(0,s.jsx)(V.Z,{children:(0,s.jsx)(lQ,{accessToken:i,modelData:ex,all_models_on_proxy:em,getDisplayModelName:z,setSelectedModelId:O,teams:r})}),(0,s.jsx)(eh,{selectedModelGroup:N,setSelectedModelGroup:Z,availableModelGroups:en,globalRetryPolicy:P,setGlobalRetryPolicy:E,defaultRetry:A,modelGroupRetryPolicy:w,setModelGroupRetryPolicy:k,handleSaveRetrySettings:eb}),(0,s.jsx)(V.Z,{children:(0,s.jsx)(l5,{accessToken:i,initialModelGroupAlias:L,onAliasUpdate:T})}),(0,s.jsx)(ew,{})]})]})]})})})}},47024:function(e,l,t){t.d(l,{_:function(){return c}});var s=t(57437);t(2265);var a=t(73705),r=t(5545),i=t(44633),n=t(86462),o=t(3837),d=t(49084);let c=e=>{let{sortState:l,onSortChange:t}=e,c=[{key:"asc",label:"Ascending",icon:(0,s.jsx)(i.Z,{className:"h-4 w-4"})},{key:"desc",label:"Descending",icon:(0,s.jsx)(n.Z,{className:"h-4 w-4"})},{key:"reset",label:"Reset",icon:(0,s.jsx)(o.Z,{className:"h-4 w-4"})}];return(0,s.jsx)(a.Z,{menu:{items:c,onClick:e=>{let{key:l}=e;"asc"===l?t("asc"):"desc"===l?t("desc"):"reset"===l&&t(!1)},selectable:!0,selectedKeys:l?[l]:[]},trigger:["click"],autoAdjustOverflow:!0,children:(0,s.jsx)(r.ZP,{type:"text",onClick:e=>e.stopPropagation(),icon:"asc"===l?(0,s.jsx)(i.Z,{className:"h-4 w-4"}):"desc"===l?(0,s.jsx)(n.Z,{className:"h-4 w-4"}):(0,s.jsx)(d.Z,{className:"h-4 w-4"}),className:l?"text-blue-500 hover:text-blue-600":"text-gray-400 hover:text-blue-500"})})}},45188:function(e,l,t){t.d(l,{K:function(){return i}});var s=t(57437),a=t(2265),r=t(42673);let i=e=>{let{provider:l,className:t="w-4 h-4"}=e,[i,n]=(0,a.useState)(!1),{logo:o}=(0,r.dr)(l);return i||!o?(0,s.jsx)("div",{className:"".concat(t," rounded-full bg-gray-200 flex items-center justify-center text-xs"),children:(null==l?void 0:l.charAt(0))||"-"}):(0,s.jsx)("img",{src:o,alt:"".concat(l," logo"),className:t,onError:()=>n(!0)})}},40562:function(e,l,t){t.d(l,{Z:function(){return ei}});var s=t(57437),a=t(2265),r=t(78489),i=t(47323),n=t(84264),o=t(96761),d=t(19250),c=t(99981),m=t(33866),u=t(15731),h=t(53410),x=t(74998),p=t(59341),g=t(49566),f=t(12514),j=t(97765),v=t(37592),_=t(10032),y=t(22116),b=t(51653),N=t(24199),Z=t(12660),w=t(15424),C=t(55590),S=t(5545),k=t(45246),P=t(96473),E=t(31283),A=e=>{let{value:l={},onChange:t}=e,[r,i]=(0,a.useState)(Object.entries(l)),n=e=>{let l=r.filter((l,t)=>t!==e);i(l),null==t||t(Object.fromEntries(l))},o=(e,l,s)=>{let a=[...r];a[e]=[l,s],i(a),null==t||t(Object.fromEntries(a))};return(0,s.jsxs)("div",{children:[r.map((e,l)=>{let[t,a]=e;return(0,s.jsxs)(C.Z,{style:{display:"flex",marginBottom:8},align:"center",children:[(0,s.jsx)(E.o,{placeholder:"Header Name",value:t,onChange:e=>o(l,e.target.value,a)}),(0,s.jsx)(E.o,{placeholder:"Header Value",value:a,onChange:e=>o(l,t,e.target.value)}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,s.jsx)(k.Z,{onClick:()=>n(l),style:{cursor:"pointer"}})})]},l)}),(0,s.jsx)(S.ZP,{type:"dashed",onClick:()=>{i([...r,["",""]])},icon:(0,s.jsx)(P.Z,{}),children:"Add Header"})]})},M=e=>{let{value:l={},onChange:t}=e,[r,i]=(0,a.useState)(Object.entries(l)),n=e=>{let l=r.filter((l,t)=>t!==e);i(l),null==t||t(Object.fromEntries(l))},o=(e,l,s)=>{let a=[...r];a[e]=[l,s],i(a),null==t||t(Object.fromEntries(a))};return(0,s.jsxs)("div",{children:[r.map((e,l)=>{let[t,a]=e;return(0,s.jsxs)(C.Z,{style:{display:"flex",marginBottom:8},align:"center",children:[(0,s.jsx)(E.o,{placeholder:"Parameter Name (e.g., version)",value:t,onChange:e=>o(l,e.target.value,a)}),(0,s.jsx)(E.o,{placeholder:"Parameter Value (e.g., v1)",value:a,onChange:e=>o(l,t,e.target.value)}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,s.jsx)(k.Z,{onClick:()=>n(l),style:{cursor:"pointer"}})})]},l)}),(0,s.jsx)(S.ZP,{type:"dashed",onClick:()=>{i([...r,["",""]])},icon:(0,s.jsx)(P.Z,{}),children:"Add Query Parameter"})]})},L=t(77565),T=e=>{let{pathValue:l,targetValue:t,includeSubpath:a}=e,r=(0,d.getProxyBaseUrl)();return l&&t?(0,s.jsxs)(f.Z,{className:"p-5",children:[(0,s.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Route Preview"}),(0,s.jsx)(j.Z,{className:"text-gray-600 mb-5",children:"How your requests will be routed"}),(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-3",children:"Basic routing:"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Your endpoint"}),(0,s.jsx)("code",{className:"font-mono text-sm text-gray-900",children:l?"".concat(r).concat(l):""})]}),(0,s.jsx)("div",{className:"text-gray-400",children:(0,s.jsx)(L.Z,{className:"text-lg"})}),(0,s.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Forwards to"}),(0,s.jsx)("code",{className:"font-mono text-sm text-gray-900",children:t})]})]})]}),a&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-3",children:"With subpaths:"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Your endpoint + subpath"}),(0,s.jsxs)("code",{className:"font-mono text-sm text-gray-900",children:[l&&"".concat(r).concat(l),(0,s.jsx)("span",{className:"text-blue-600",children:"/v1/text-to-image/base/model"})]})]}),(0,s.jsx)("div",{className:"text-gray-400",children:(0,s.jsx)(L.Z,{className:"text-lg"})}),(0,s.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Forwards to"}),(0,s.jsxs)("code",{className:"font-mono text-sm text-gray-900",children:[t,(0,s.jsx)("span",{className:"text-blue-600",children:"/v1/text-to-image/base/model"})]})]})]}),(0,s.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["Any path after ",l," will be appended to the target URL"]})]})}),!a&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-md border border-blue-200",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)(w.Z,{className:"text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),(0,s.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,s.jsx)("span",{className:"font-medium",children:"Not seeing the routing you wanted?"})," Try enabling - Include Subpaths - above - this allows subroutes like"," ",(0,s.jsx)("code",{className:"bg-blue-100 px-1 py-0.5 rounded font-mono text-xs",children:"/api/v1/models"})," to be forwarded automatically."]})]})})]})]}):null},F=t(9114),I=t(63709),R=e=>{let{premiumUser:l,authEnabled:t,onAuthChange:a}=e;return(0,s.jsxs)(f.Z,{className:"p-6",children:[(0,s.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Security"}),(0,s.jsx)(j.Z,{className:"text-gray-600 mb-4",children:"When enabled, requests to this endpoint will require a valid LiteLLM Virtual Key"}),l?(0,s.jsx)(_.Z.Item,{name:"auth",valuePropName:"checked",className:"mb-0",children:(0,s.jsx)(I.Z,{checked:t,onChange:e=>{a(e)}})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center mb-3",children:[(0,s.jsx)(I.Z,{disabled:!0,checked:!1,style:{outline:"2px solid #d1d5db",outlineOffset:"2px"}}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-400",children:"Authentication (Premium)"})]}),(0,s.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,s.jsxs)(n.Z,{className:"text-sm text-yellow-800",children:["Setting authentication for pass-through endpoints is a LiteLLM Enterprise feature. Get a trial key"," ",(0,s.jsx)("a",{href:"https://www.litellm.ai/#pricing",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"here"}),"."]})})]})]})},z=t(67479),O=e=>{let{accessToken:l,value:t={},onChange:r,disabled:i=!1}=e,[n,d]=(0,a.useState)(Object.keys(t)),[m,u]=(0,a.useState)(t);(0,a.useEffect)(()=>{u(t),d(Object.keys(t))},[t]);let h=(e,l,t)=>{var s,a;let i=m[e]||{},n={...m,[e]:{...i,[l]:t.length>0?t:void 0}};(null===(s=n[e])||void 0===s?void 0:s.request_fields)||(null===(a=n[e])||void 0===a?void 0:a.response_fields)||(n[e]=null),u(n),r&&r(n)};return(0,s.jsxs)(f.Z,{className:"p-6",children:[(0,s.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Guardrails"}),(0,s.jsx)(j.Z,{className:"text-gray-600 mb-6",children:"Configure guardrails to enforce policies on requests and responses. Guardrails are opt-in for passthrough endpoints."}),(0,s.jsx)(b.Z,{message:(0,s.jsxs)("span",{children:["Field-Level Targeting"," ",(0,s.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/pass_through_guardrails#field-level-targeting",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"(Learn More)"})]}),description:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{children:"Optionally specify which fields to check. If left empty, the entire request/response is sent to the guardrail."}),(0,s.jsxs)("div",{className:"text-xs space-y-1 mt-2",children:[(0,s.jsx)("div",{className:"font-medium",children:"Common Examples:"}),(0,s.jsxs)("div",{children:["â€¢ ",(0,s.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"query"})," - Single field"]}),(0,s.jsxs)("div",{children:["â€¢ ",(0,s.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"documents[*].text"})," - All text in documents array"]}),(0,s.jsxs)("div",{children:["â€¢ ",(0,s.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"messages[*].content"})," - All message contents"]})]})]}),type:"info",showIcon:!0,className:"mb-4"}),(0,s.jsx)(_.Z.Item,{label:(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Select Guardrails",(0,s.jsx)(c.Z,{title:"Choose which guardrails should run on this endpoint. Org/team/key level guardrails will also be included.",children:(0,s.jsx)(w.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),children:(0,s.jsx)(z.Z,{accessToken:l,value:n,onChange:e=>{d(e);let l={};e.forEach(e=>{l[e]=m[e]||null}),u(l),r&&r(l)},disabled:i})}),n.length>0&&(0,s.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Field Targeting (Optional)"}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 Tip: Leave empty to check entire payload"})]}),n.map(e=>{var l,t;return(0,s.jsxs)(f.Z,{className:"p-4 bg-gray-50",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 mb-3",children:e}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsxs)("label",{className:"text-xs text-gray-600 flex items-center",children:["Request Fields (pre_call)",(0,s.jsx)(c.Z,{title:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"Specify which request fields to check"}),(0,s.jsxs)("div",{className:"text-xs space-y-1",children:[(0,s.jsx)("div",{children:"Examples:"}),(0,s.jsx)("div",{children:"â€¢ query"}),(0,s.jsx)("div",{children:"â€¢ documents[*].text"}),(0,s.jsx)("div",{children:"â€¢ messages[*].content"})]})]}),children:(0,s.jsx)(w.Z,{className:"ml-1 text-gray-400"})})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{var l;let t=(null===(l=m[e])||void 0===l?void 0:l.request_fields)||[];h(e,"request_fields",[...t,"query"])},className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50",disabled:i,children:"+ query"}),(0,s.jsx)("button",{type:"button",onClick:()=>{var l;let t=(null===(l=m[e])||void 0===l?void 0:l.request_fields)||[];h(e,"request_fields",[...t,"documents[*]"])},className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50",disabled:i,children:"+ documents[*]"})]})]}),(0,s.jsx)(v.default,{mode:"tags",style:{width:"100%"},placeholder:"Type field name or use + buttons above (e.g., query, documents[*].text)",value:(null===(l=m[e])||void 0===l?void 0:l.request_fields)||[],onChange:l=>h(e,"request_fields",l),disabled:i,tokenSeparators:[","]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsxs)("label",{className:"text-xs text-gray-600 flex items-center",children:["Response Fields (post_call)",(0,s.jsx)(c.Z,{title:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"Specify which response fields to check"}),(0,s.jsxs)("div",{className:"text-xs space-y-1",children:[(0,s.jsx)("div",{children:"Examples:"}),(0,s.jsx)("div",{children:"â€¢ results[*].text"}),(0,s.jsx)("div",{children:"â€¢ choices[*].message.content"})]})]}),children:(0,s.jsx)(w.Z,{className:"ml-1 text-gray-400"})})]}),(0,s.jsx)("div",{className:"flex gap-1",children:(0,s.jsx)("button",{type:"button",onClick:()=>{var l;let t=(null===(l=m[e])||void 0===l?void 0:l.response_fields)||[];h(e,"response_fields",[...t,"results[*]"])},className:"text-xs px-2 py-1 bg-white border border-gray-300 rounded hover:bg-gray-50",disabled:i,children:"+ results[*]"})})]}),(0,s.jsx)(v.default,{mode:"tags",style:{width:"100%"},placeholder:"Type field name or use + buttons above (e.g., results[*].text)",value:(null===(t=m[e])||void 0===t?void 0:t.response_fields)||[],onChange:l=>h(e,"response_fields",l),disabled:i,tokenSeparators:[","]})]})]})]},e)})]})]})};let{Option:q}=v.default,V=["GET","POST","PUT","DELETE","PATCH"];var D=e=>{let{accessToken:l,setPassThroughItems:t,passThroughItems:i,premiumUser:n=!1}=e,[m]=_.Z.useForm(),[u,h]=(0,a.useState)(!1),[x,C]=(0,a.useState)(!1),[S,k]=(0,a.useState)(""),[P,E]=(0,a.useState)(""),[L,I]=(0,a.useState)(""),[z,D]=(0,a.useState)(!0),[B,G]=(0,a.useState)(!1),[U,H]=(0,a.useState)([]),[K,J]=(0,a.useState)({}),W=()=>{m.resetFields(),E(""),I(""),D(!0),H([]),J({}),h(!1)},Y=e=>{let l=e;e&&!e.startsWith("/")&&(l="/"+e),E(l),m.setFieldsValue({path:l})},X=async e=>{console.log("addPassThrough called with:",e),C(!0);try{!n&&"auth"in e&&delete e.auth,K&&Object.keys(K).length>0&&(e.guardrails=K),U&&U.length>0&&(e.methods=U),console.log("formValues: ".concat(JSON.stringify(e)));let s=(await (0,d.createPassThroughEndpoint)(l,e)).endpoints[0],a=[...i,s];t(a),F.ZP.success("Pass-through endpoint created successfully"),m.resetFields(),E(""),I(""),D(!0),H([]),J({}),h(!1)}catch(e){F.ZP.fromBackend("Error creating pass-through endpoint: "+e)}finally{C(!1)}};return(0,s.jsxs)("div",{children:[(0,s.jsx)(r.Z,{className:"mx-auto mb-4 mt-4",onClick:()=>h(!0),children:"+ Add Pass-Through Endpoint"}),(0,s.jsx)(y.Z,{title:(0,s.jsxs)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:[(0,s.jsx)(Z.Z,{className:"text-xl text-blue-500"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Pass-Through Endpoint"})]}),open:u,width:1e3,onCancel:W,footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)(b.Z,{message:"What is a Pass-Through Endpoint?",description:"Route requests from your LiteLLM proxy to any external API. Perfect for custom models, image generation APIs, or any service you want to proxy through LiteLLM.",type:"info",showIcon:!0,className:"mb-6"}),(0,s.jsxs)(_.Z,{form:m,onFinish:X,layout:"vertical",className:"space-y-6",initialValues:{include_subpath:!0,path:P,target:L},children:[(0,s.jsxs)(f.Z,{className:"p-5",children:[(0,s.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Route Configuration"}),(0,s.jsx)(j.Z,{className:"text-gray-600 mb-5",children:"Configure how requests to your domain will be forwarded to the target API"}),(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsx)(_.Z.Item,{label:(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Path Prefix"}),name:"path",rules:[{required:!0,message:"Path is required",pattern:/^\//}],extra:(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Example: /bria, /adobe-photoshop, /elasticsearch"}),className:"mb-4",children:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(g.Z,{placeholder:"bria",value:P,onChange:e=>Y(e.target.value),className:"flex-1"})})}),(0,s.jsx)(_.Z.Item,{label:(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Target URL"}),name:"target",rules:[{required:!0,message:"Target URL is required"},{type:"url",message:"Please enter a valid URL"}],extra:(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Example:https://engine.prod.bria-api.com"}),className:"mb-4",children:(0,s.jsx)(g.Z,{placeholder:"https://engine.prod.bria-api.com",value:L,onChange:e=>{I(e.target.value),m.setFieldsValue({target:e.target.value})}})}),(0,s.jsx)(_.Z.Item,{label:(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["HTTP Methods (Optional)",(0,s.jsx)(c.Z,{title:"Select specific HTTP methods. Leave empty to support all methods (GET, POST, PUT, DELETE, PATCH). Useful when the same path needs different targets for different methods.",children:(0,s.jsx)(w.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"methods",extra:(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:0===U.length?"All HTTP methods supported (default)":"Only ".concat(U.join(", ")," requests will be routed to this endpoint")}),className:"mb-4",children:(0,s.jsx)(v.default,{mode:"multiple",placeholder:"Select methods (leave empty for all)",value:U,onChange:H,allowClear:!0,style:{width:"100%"},children:V.map(e=>(0,s.jsx)(q,{value:e,children:e},e))})}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Include Subpaths"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:"Forward all subpaths to the target API (recommended for REST APIs)"})]}),(0,s.jsx)(_.Z.Item,{name:"include_subpath",valuePropName:"checked",className:"mb-0",children:(0,s.jsx)(p.Z,{checked:z,onChange:D})})]})]})]}),(0,s.jsx)(T,{pathValue:P,targetValue:L,includeSubpath:z}),(0,s.jsxs)(f.Z,{className:"p-6",children:[(0,s.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Headers"}),(0,s.jsx)(j.Z,{className:"text-gray-600 mb-6",children:"Add headers that will be sent with every request to the target API"}),(0,s.jsx)(_.Z.Item,{label:(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Authentication Headers",(0,s.jsx)(c.Z,{title:"Authentication and other headers to forward with requests",children:(0,s.jsx)(w.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"headers",rules:[{required:!0,message:"Please configure the headers"}],extra:(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"Add authentication tokens and other required headers"}),(0,s.jsx)("div",{children:"Common examples: auth_token, Authorization, x-api-key"})]}),children:(0,s.jsx)(A,{})})]}),(0,s.jsxs)(f.Z,{className:"p-6",children:[(0,s.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Default Query Parameters"}),(0,s.jsx)(j.Z,{className:"text-gray-600 mb-6",children:"Add query parameters that will be automatically sent with every request to the target API"}),(0,s.jsx)(_.Z.Item,{label:(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Default Query Parameters (Optional)",(0,s.jsx)(c.Z,{title:"Query parameters that will be added to all requests. Clients can override these by providing their own values.",children:(0,s.jsx)(w.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"default_query_params",extra:(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"Parameters are sent with all GET, POST, PUT, PATCH requests"}),(0,s.jsx)("div",{children:"Client parameters override defaults. Examples: version=v1, format=json, key=default"})]}),children:(0,s.jsx)(M,{})})]}),(0,s.jsx)(R,{premiumUser:n,authEnabled:B,onAuthChange:e=>{G(e),m.setFieldsValue({auth:e})}}),(0,s.jsx)(O,{accessToken:l,value:K,onChange:J}),(0,s.jsxs)(f.Z,{className:"p-6",children:[(0,s.jsx)(o.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Billing"}),(0,s.jsx)(j.Z,{className:"text-gray-600 mb-6",children:"Optional cost tracking for this endpoint"}),(0,s.jsx)(_.Z.Item,{label:(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Cost Per Request (USD)",(0,s.jsx)(c.Z,{title:"Optional: Track costs for requests to this endpoint",children:(0,s.jsx)(w.Z,{className:"ml-2 text-gray-400 hover:text-gray-600"})})]}),name:"cost_per_request",extra:(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"The cost charged for each request through this endpoint"}),children:(0,s.jsx)(N.Z,{min:0,step:.001,precision:4,placeholder:"2.0000",size:"large"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-100",children:[(0,s.jsx)(r.Z,{variant:"secondary",onClick:W,children:"Cancel"}),(0,s.jsx)(r.Z,{variant:"primary",loading:x,onClick:()=>{console.log("Submit button clicked"),m.submit()},children:x?"Creating...":"Add Pass-Through Endpoint"})]})]})]})})]})},B=t(41649),G=t(67101),U=t(12485),H=t(18135),K=t(35242),J=t(29706),W=t(77991),Y=t(4260),X=t(12221),Q=t(87769),$=t(42208);let ee=["GET","POST","PUT","DELETE","PATCH"],{Option:el}=v.default,et=e=>{let{value:l}=e,[t,r]=(0,a.useState)(!1),i=JSON.stringify(l,null,2);return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("pre",{className:"font-mono text-xs bg-gray-50 p-2 rounded max-w-md overflow-auto",children:t?i:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),(0,s.jsx)("button",{onClick:()=>r(!t),className:"p-1 hover:bg-gray-100 rounded",type:"button",children:t?(0,s.jsx)(Q.Z,{className:"w-4 h-4 text-gray-500"}):(0,s.jsx)($.Z,{className:"w-4 h-4 text-gray-500"})})]})};var es=e=>{let{endpointData:l,onClose:t,accessToken:i,isAdmin:c,premiumUser:m=!1,onEndpointUpdated:u}=e,[h,x]=(0,a.useState)(l),[p,j]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[N,Z]=(0,a.useState)((null==l?void 0:l.auth)||!1),[w,C]=(0,a.useState)((null==l?void 0:l.methods)||[]),[k,P]=(0,a.useState)((null==l?void 0:l.guardrails)||{}),[E]=_.Z.useForm(),A=async e=>{try{if(!i||!(null==h?void 0:h.id))return;let l={};if(e.headers)try{l="string"==typeof e.headers?JSON.parse(e.headers):e.headers}catch(e){F.ZP.fromBackend("Invalid JSON format for headers");return}let t={path:h.path,target:e.target,headers:l,include_subpath:e.include_subpath,cost_per_request:e.cost_per_request,auth:m?e.auth:void 0,methods:w&&w.length>0?w:void 0,guardrails:k&&Object.keys(k).length>0?k:void 0};await (0,d.updatePassThroughEndpoint)(i,h.id,t),x({...h,...t}),b(!1),u&&u()}catch(e){console.error("Error updating endpoint:",e),F.ZP.fromBackend("Failed to update pass through endpoint")}},M=async()=>{try{if(!i||!(null==h?void 0:h.id))return;await (0,d.deletePassThroughEndpointsCall)(i,h.id),F.ZP.success("Pass through endpoint deleted successfully"),t(),u&&u()}catch(e){console.error("Error deleting endpoint:",e),F.ZP.fromBackend("Failed to delete pass through endpoint")}};return p?(0,s.jsx)("div",{className:"p-4",children:"Loading..."}):h?(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(S.ZP,{onClick:t,className:"mb-4",children:"â† Back"}),(0,s.jsxs)(o.Z,{children:["Pass Through Endpoint: ",h.path]}),(0,s.jsx)(n.Z,{className:"text-gray-500 font-mono",children:h.id})]})}),(0,s.jsxs)(H.Z,{children:[(0,s.jsxs)(K.Z,{className:"mb-4",children:[(0,s.jsx)(U.Z,{children:"Overview"},"overview"),c?(0,s.jsx)(U.Z,{children:"Settings"},"settings"):(0,s.jsx)(s.Fragment,{})]}),(0,s.jsxs)(W.Z,{children:[(0,s.jsxs)(J.Z,{children:[(0,s.jsxs)(G.Z,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(n.Z,{children:"Path"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(o.Z,{className:"font-mono",children:h.path})})]}),(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(n.Z,{children:"Target"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(o.Z,{children:h.target})})]}),(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(n.Z,{children:"Configuration"}),(0,s.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(B.Z,{color:h.include_subpath?"green":"gray",children:h.include_subpath?"Include Subpath":"Exact Path"})}),(0,s.jsx)("div",{children:(0,s.jsx)(B.Z,{color:h.auth?"blue":"gray",children:h.auth?"Auth Required":"No Auth"})}),h.methods&&h.methods.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Z,{className:"text-xs text-gray-500",children:"HTTP Methods:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:h.methods.map(e=>(0,s.jsx)(B.Z,{color:"indigo",size:"sm",children:e},e))})]}),(!h.methods||0===h.methods.length)&&(0,s.jsx)("div",{children:(0,s.jsx)(n.Z,{className:"text-xs text-gray-500",children:"All HTTP methods supported"})}),void 0!==h.cost_per_request&&(0,s.jsx)("div",{children:(0,s.jsxs)(n.Z,{children:["Cost per request: $",h.cost_per_request]})})]})]})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(T,{pathValue:h.path,targetValue:h.target,includeSubpath:h.include_subpath||!1})}),h.headers&&Object.keys(h.headers).length>0&&(0,s.jsxs)(f.Z,{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(n.Z,{className:"font-medium",children:"Headers"}),(0,s.jsxs)(B.Z,{color:"blue",children:[Object.keys(h.headers).length," headers configured"]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(et,{value:h.headers})})]}),h.guardrails&&Object.keys(h.guardrails).length>0&&(0,s.jsxs)(f.Z,{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(n.Z,{className:"font-medium",children:"Guardrails"}),(0,s.jsxs)(B.Z,{color:"purple",children:[Object.keys(h.guardrails).length," guardrails configured"]})]}),(0,s.jsx)("div",{className:"mt-4 space-y-2",children:Object.entries(h.guardrails).map(e=>{let[l,t]=e;return(0,s.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:l}),t&&(t.request_fields||t.response_fields)&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-gray-600 space-y-1",children:[t.request_fields&&(0,s.jsxs)("div",{children:["Request fields: ",t.request_fields.join(", ")]}),t.response_fields&&(0,s.jsxs)("div",{children:["Response fields: ",t.response_fields.join(", ")]})]}),!t&&(0,s.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:"Uses entire payload"})]},l)})})]})]}),c&&(0,s.jsx)(J.Z,{children:(0,s.jsxs)(f.Z,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(o.Z,{children:"Pass Through Endpoint Settings"}),(0,s.jsx)("div",{className:"space-x-2",children:!y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{onClick:()=>b(!0),children:"Edit Settings"}),(0,s.jsx)(r.Z,{onClick:M,variant:"secondary",color:"red",children:"Delete Endpoint"})]})})]}),y?(0,s.jsxs)(_.Z,{form:E,onFinish:A,initialValues:{target:h.target,headers:h.headers?JSON.stringify(h.headers,null,2):"",include_subpath:h.include_subpath||!1,cost_per_request:h.cost_per_request,auth:h.auth||!1,methods:h.methods||[]},layout:"vertical",children:[(0,s.jsx)(_.Z.Item,{label:"Target URL",name:"target",rules:[{required:!0,message:"Please input a target URL"}],children:(0,s.jsx)(g.Z,{placeholder:"https://api.example.com"})}),(0,s.jsx)(_.Z.Item,{label:"Headers (JSON)",name:"headers",children:(0,s.jsx)(Y.default.TextArea,{rows:5,placeholder:'{"Authorization": "Bearer your-token", "Content-Type": "application/json"}'})}),(0,s.jsx)(_.Z.Item,{label:"HTTP Methods (Optional)",name:"methods",extra:0===w.length?"All HTTP methods supported (default)":"Only ".concat(w.join(", ")," requests will be routed to this endpoint"),children:(0,s.jsx)(v.default,{mode:"multiple",placeholder:"Select methods (leave empty for all)",value:w,onChange:C,allowClear:!0,style:{width:"100%"},children:ee.map(e=>(0,s.jsx)(el,{value:e,children:e},e))})}),(0,s.jsx)(_.Z.Item,{label:"Include Subpath",name:"include_subpath",valuePropName:"checked",children:(0,s.jsx)(I.Z,{})}),(0,s.jsx)(_.Z.Item,{label:"Cost per Request",name:"cost_per_request",children:(0,s.jsx)(X.Z,{min:0,step:.01,precision:2,placeholder:"0.00",addonBefore:"$"})}),(0,s.jsx)(R,{premiumUser:m,authEnabled:N,onAuthChange:e=>{Z(e),E.setFieldsValue({auth:e})}}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(O,{accessToken:i||"",value:k,onChange:P})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,s.jsx)(S.ZP,{onClick:()=>b(!1),children:"Cancel"}),(0,s.jsx)(r.Z,{children:"Save Changes"})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Z,{className:"font-medium",children:"Path"}),(0,s.jsx)("div",{className:"font-mono",children:h.path})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Z,{className:"font-medium",children:"Target URL"}),(0,s.jsx)("div",{children:h.target})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Z,{className:"font-medium",children:"Include Subpath"}),(0,s.jsx)(B.Z,{color:h.include_subpath?"green":"gray",children:h.include_subpath?"Yes":"No"})]}),void 0!==h.cost_per_request&&(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Z,{className:"font-medium",children:"Cost per Request"}),(0,s.jsxs)("div",{children:["$",h.cost_per_request]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Z,{className:"font-medium",children:"Authentication Required"}),(0,s.jsx)(B.Z,{color:h.auth?"green":"gray",children:h.auth?"Yes":"No"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Z,{className:"font-medium",children:"Headers"}),h.headers&&Object.keys(h.headers).length>0?(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(et,{value:h.headers})}):(0,s.jsx)("div",{className:"text-gray-500",children:"No headers configured"})]})]})]})})]})]})]}):(0,s.jsx)("div",{className:"p-4",children:"Pass through endpoint not found"})},ea=t(12322);let er=e=>{let{value:l}=e,[t,r]=(0,a.useState)(!1),i=JSON.stringify(l);return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"font-mono text-xs",children:t?i:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),(0,s.jsx)("button",{onClick:()=>r(!t),className:"p-1 hover:bg-gray-100 rounded",type:"button",children:t?(0,s.jsx)(Q.Z,{className:"w-4 h-4 text-gray-500"}):(0,s.jsx)($.Z,{className:"w-4 h-4 text-gray-500"})})]})};var ei=e=>{let{accessToken:l,userRole:t,userID:p,modelData:g,premiumUser:f}=e,[j,v]=(0,a.useState)([]),[_,y]=(0,a.useState)(null),[b,N]=(0,a.useState)(!1),[Z,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{l&&t&&p&&(0,d.getPassThroughEndpointsCall)(l).then(e=>{v(e.endpoints)})},[l,t,p]);let C=async e=>{w(e),N(!0)},S=async()=>{if(null!=Z&&l){try{await (0,d.deletePassThroughEndpointsCall)(l,Z);let e=j.filter(e=>e.id!==Z);v(e),F.ZP.success("Endpoint deleted successfully.")}catch(e){console.error("Error deleting the endpoint:",e),F.ZP.fromBackend("Error deleting the endpoint: "+e)}N(!1),w(null)}},k=(e,l)=>{C(e)},P=[{header:"ID",accessorKey:"id",cell:e=>(0,s.jsx)(c.Z,{title:e.row.original.id,children:(0,s.jsx)("div",{className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",onClick:()=>e.row.original.id&&y(e.row.original.id),children:e.row.original.id})})},{header:"Path",accessorKey:"path"},{header:"Target",accessorKey:"target",cell:e=>(0,s.jsx)(n.Z,{children:e.getValue()})},{header:()=>(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:"Methods"}),(0,s.jsx)(c.Z,{title:"HTTP methods supported by this endpoint",children:(0,s.jsx)(u.Z,{className:"w-4 h-4 text-gray-400 cursor-help"})})]}),accessorKey:"methods",cell:e=>{let l=e.getValue();return l&&0!==l.length?(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:l.map(e=>(0,s.jsx)(m.Z,{color:"indigo",className:"text-xs",children:e},e))}):(0,s.jsx)(m.Z,{color:"blue",children:"ALL"})}},{header:()=>(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:"Authentication"}),(0,s.jsx)(c.Z,{title:"LiteLLM Virtual Key required to call endpoint",children:(0,s.jsx)(u.Z,{className:"w-4 h-4 text-gray-400 cursor-help"})})]}),accessorKey:"auth",cell:e=>(0,s.jsx)(m.Z,{color:e.getValue()?"green":"gray",children:e.getValue()?"Yes":"No"})},{header:"Headers",accessorKey:"headers",cell:e=>(0,s.jsx)(er,{value:e.getValue()||{}})},{header:"Actions",id:"actions",cell:e=>{let{row:l}=e;return(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(i.Z,{icon:h.Z,size:"sm",onClick:()=>l.original.id&&y(l.original.id),title:"Edit"}),(0,s.jsx)(i.Z,{icon:x.Z,size:"sm",onClick:()=>k(l.original.id,l.index),title:"Delete"})]})}}];if(!l)return null;if(_){console.log("selectedEndpointId",_),console.log("generalSettings",j);let e=j.find(e=>e.id===_);return e?(0,s.jsx)(es,{endpointData:e,onClose:()=>y(null),accessToken:l,isAdmin:"Admin"===t||"admin"===t,premiumUser:f,onEndpointUpdated:()=>{l&&(0,d.getPassThroughEndpointsCall)(l).then(e=>{v(e.endpoints)})}}):(0,s.jsx)("div",{children:"Endpoint not found"})}return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(o.Z,{children:"Pass Through Endpoints"}),(0,s.jsx)(n.Z,{className:"text-tremor-content",children:"Configure and manage your pass-through endpoints"})]}),(0,s.jsx)(D,{accessToken:l,setPassThroughItems:v,passThroughItems:j,premiumUser:f}),(0,s.jsx)(ea.w,{data:j,columns:P,renderSubComponent:()=>(0,s.jsx)("div",{}),getRowCanExpand:()=>!1,isLoading:!1,noDataMessage:"No pass-through endpoints configured"}),b&&(0,s.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,s.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,s.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,s.jsx)("div",{className:"sm:flex sm:items-start",children:(0,s.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Pass-Through Endpoint"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this pass-through endpoint? This action cannot be undone."})})]})})}),(0,s.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,s.jsx)(r.Z,{onClick:S,color:"red",className:"ml-2",children:"Delete"}),(0,s.jsx)(r.Z,{onClick:()=>{N(!1),w(null)},children:"Cancel"})]})]})]})})]})}},12322:function(e,l,t){t.d(l,{w:function(){return o}});var s=t(57437),a=t(2265),r=t(71594),i=t(24525),n=t(19130);function o(e){let{data:l=[],columns:t,onRowClick:o,renderSubComponent:d,renderChildRows:c,getRowCanExpand:m,isLoading:u=!1,loadingMessage:h="\uD83D\uDE85 Loading logs...",noDataMessage:x="No logs found"}=e,p=!!(d||c)&&!!m,g=(0,r.b7)({data:l,columns:t,...p&&{getRowCanExpand:m},getRowId:(e,l)=>{var t;return null!==(t=null==e?void 0:e.request_id)&&void 0!==t?t:String(l)},getCoreRowModel:(0,i.sC)(),...p&&{getExpandedRowModel:(0,i.rV)()}});return(0,s.jsx)("div",{className:"rounded-lg custom-border overflow-x-auto w-full max-w-full box-border",children:(0,s.jsxs)(n.iA,{className:"[&_td]:py-0.5 [&_th]:py-1 table-fixed w-full box-border",style:{minWidth:"400px"},children:[(0,s.jsx)(n.ss,{children:g.getHeaderGroups().map(e=>(0,s.jsx)(n.SC,{children:e.headers.map(e=>(0,s.jsx)(n.xs,{className:"py-1 h-8",children:e.isPlaceholder?null:(0,r.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(n.RM,{children:u?(0,s.jsx)(n.SC,{children:(0,s.jsx)(n.pj,{colSpan:t.length,className:"h-8 text-center",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsx)("p",{children:h})})})}):g.getRowModel().rows.length>0?g.getRowModel().rows.map(e=>(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(n.SC,{className:"h-8 ".concat(o?"cursor-pointer hover:bg-gray-50":""),onClick:()=>null==o?void 0:o(e.original),children:e.getVisibleCells().map(e=>(0,s.jsx)(n.pj,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,r.ie)(e.column.columnDef.cell,e.getContext())},e.id))}),p&&e.getIsExpanded()&&c&&c({row:e}),p&&e.getIsExpanded()&&d&&!c&&(0,s.jsx)(n.SC,{children:(0,s.jsx)(n.pj,{colSpan:e.getVisibleCells().length,className:"p-0",children:(0,s.jsx)("div",{className:"w-full max-w-full overflow-hidden box-border",children:d({row:e})})})})]},e.id)):(0,s.jsx)(n.SC,{children:(0,s.jsx)(n.pj,{colSpan:t.length,className:"h-8 text-center",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsx)("p",{children:x})})})})})]})})}}}]);