name: liteLLM Dev Tests

on: [push, pull_request]

env:
  OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
  ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
  AZURE_API_BASE: ${{ secrets.AZURE_API_BASE }}
  AZURE_API_VERSION: ${{ secrets.AZURE_API_VERSION }}
  AZURE_API_KEY: ${{ secrets.AZURE_API_KEY }}
  REPLICATE_API_TOKEN: ${{ secrets.REPLICATE_API_TOKEN }}
  COHERE_API_KEY: ${{ secrets.COHERE_API_KEY }}
  POSTHOG_API_KEY: ${{ secrets.POSTHOG_API_KEY }}
  POSTHOG_API_URL: ${{ secrets.POSTHOG_API_URL }}
  SLACK_API_TOKEN: ${{ secrets.SLACK_API_TOKEN }}
  SLACK_API_SECRET: ${{ secrets.SLACK_API_SECRET }}
  SLACK_API_CHANNEL: ${{ secrets.SLACK_API_CHANNEL }}
  SENTRY_API_URL: ${{ secrets.SENTRY_API_URL }}
  SENTRY_API_TRACE_RATE: ${{ secrets.SENTRY_API_TRACE_RATE }}

jobs:
  test:
    name: Run Tests
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: 3.9.6 # Replace 'x' with the desired version (e.g., 3.6, 3.7, 3.8)

    - name: Install dependencies
      run: pip install -r requirements.txt

    - name: Run tests
      run: pytest litellm/tests
