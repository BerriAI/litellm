============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-7.4.4, pluggy-1.6.0 -- /home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/bin/python
cachedir: .pytest_cache
rootdir: /home/lucky_2004/repos/litellm
configfile: pyproject.toml
plugins: asyncio-0.21.2, respx-0.22.0, retry-1.7.0, anyio-4.11.0, xdist-3.8.0, requests-mock-1.12.1, mock-3.15.1
asyncio: mode=Mode.AUTO
collecting ... collected 1 item

tests/test_litellm/a2a_protocol/test_cost_calculator.py::test_asend_message_uses_cost_per_query RETRY [100%]
tests/test_litellm/a2a_protocol/test_cost_calculator.py::test_asend_message_uses_cost_per_query FAILED [100%]

=================================== FAILURES ===================================
____________________ test_asend_message_uses_cost_per_query ____________________

    @pytest.mark.asyncio
    async def test_asend_message_uses_cost_per_query():
        """
        Test that asend_message uses cost_per_query param for response_cost.
        """
>       from litellm.a2a_protocol import asend_message

tests/test_litellm/a2a_protocol/test_cost_calculator.py:33: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
litellm/a2a_protocol/__init__.py:48: in <module>
    from litellm.a2a_protocol.main import (
litellm/a2a_protocol/main.py:46: in <module>
    from litellm.a2a_protocol.card_resolver import LiteLLMA2ACardResolver
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    """
    Custom A2A Card Resolver for LiteLLM.
    
    Extends the A2A SDK's card resolver to support multiple well-known paths.
    """
    
    from typing import TYPE_CHECKING, Any, Dict, Optional
    
    from litellm._logging import verbose_logger
    from litellm.constants import LOCALHOST_URL_PATTERNS
    
    if TYPE_CHECKING:
        from a2a.types import AgentCard
    
    # Runtime imports with availability check
    _A2ACardResolver: Any = None
    AGENT_CARD_WELL_KNOWN_PATH: str = "/.well-known/agent-card.json"
    PREV_AGENT_CARD_WELL_KNOWN_PATH: str = "/.well-known/agent.json"
    
    try:
        from a2a.client import A2ACardResolver as _A2ACardResolver  # type: ignore[no-redef]
        from a2a.utils.constants import (  # type: ignore[no-redef]
            AGENT_CARD_WELL_KNOWN_PATH,
            PREV_AGENT_CARD_WELL_KNOWN_PATH,
        )
    except ImportError:
        pass
    
    
    def is_localhost_or_internal_url(url: Optional[str]) -> bool:
        """
        Check if a URL is a localhost or internal URL.
    
        This detects common development URLs that are accidentally left in
        agent cards when deploying to production.
    
        Args:
            url: The URL to check
    
        Returns:
            True if the URL is localhost/internal
        """
        if not url:
            return False
    
        url_lower = url.lower()
    
        return any(pattern in url_lower for pattern in LOCALHOST_URL_PATTERNS)
    
    
    def fix_agent_card_url(agent_card: "AgentCard", base_url: str) -> "AgentCard":
        """
        Fix the agent card URL if it contains a localhost/internal address.
    
        Many A2A agents are deployed with agent cards that contain internal URLs
        like "http://0.0.0.0:8001/" or "http://localhost:8000/". This function
        replaces such URLs with the provided base_url.
    
        Args:
            agent_card: The agent card to fix
            base_url: The base URL to use as replacement
    
        Returns:
            The agent card with the URL fixed if necessary
        """
        card_url = getattr(agent_card, "url", None)
    
        if card_url and is_localhost_or_internal_url(card_url):
            # Normalize base_url to ensure it ends with /
            fixed_url = base_url.rstrip("/") + "/"
            agent_card.url = fixed_url
    
        return agent_card
    
    
>   class LiteLLMA2ACardResolver(_A2ACardResolver):  # type: ignore[misc]
E   TypeError: NoneType takes no arguments

litellm/a2a_protocol/card_resolver.py:76: TypeError
---------------------------- Captured stdout setup -----------------------------
<module 'litellm' from '/home/lucky_2004/repos/litellm/litellm/__init__.py'>

======================= the following tests were retried =======================
	test_asend_message_uses_cost_per_query failed on attempt 1! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 262, in <lambda>
	    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
	            ^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 2! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 3! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 4! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 5! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 6! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 7! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 8! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 9! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 10! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 11! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 12! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 13! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 14! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 15! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 16! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 17! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 18! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 19! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed on attempt 20! Retrying!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

	test_asend_message_uses_cost_per_query failed after 21 attempts!
	Traceback (most recent call last):
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/_pytest/runner.py", line 341, in from_call
	    result: Optional[TResult] = func()
	                                ^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pytest_retry/retry_plugin.py", line 238, in <lambda>
	    call = pytest.CallInfo.from_call(lambda: hook.pytest_runtest_call(item=item), when="call")
	                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	  File "/home/lucky_2004/.cache/pypoetry/virtualenvs/litellm-gd7OQ2ia-py3.12/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
	    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
	           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	TypeError: NoneType takes no arguments

=========================== end of test retry report ===========================

=========================== short test summary info ============================
FAILED tests/test_litellm/a2a_protocol/test_cost_calculator.py::test_asend_message_uses_cost_per_query
=================== 1 failed, 1 retried in 99.80s (0:01:39) ====================
