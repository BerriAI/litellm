"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6213],{36213:function(e,t,r){r.d(t,{Z:function(){return eS}});var s,l,a=r(57437),o=r(2265),n=r(78489),i=r(49804),c=r(67101),d=r(47323),m=r(12485),x=r(18135),u=r(35242),h=r(29706),p=r(77991),v=r(84264),g=r(23628),j=r(19250),f=r(44633),y=r(86462),_=r(49084),b=r(71594),N=r(24525),w=r(19130),S=r(99981),Z=r(39957),C=r(42673),k=e=>{let{data:t,onView:r,onEdit:s,onDelete:l}=e,[n,i]=o.useState([{id:"created_at",desc:!0}]),c=[{header:"Vector Store ID",accessorKey:"vector_store_id",cell:e=>{let{row:t}=e,s=t.original;return(0,a.jsx)("button",{onClick:()=>r(s.vector_store_id),className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",children:s.vector_store_id.length>15?"".concat(s.vector_store_id.slice(0,15),"..."):s.vector_store_id})}},{header:"Name",accessorKey:"vector_store_name",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)(S.Z,{title:r.vector_store_name,children:(0,a.jsx)("span",{className:"text-xs",children:r.vector_store_name||"-"})})}},{header:"Description",accessorKey:"vector_store_description",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)(S.Z,{title:r.vector_store_description,children:(0,a.jsx)("span",{className:"text-xs",children:r.vector_store_description||"-"})})}},{header:"Files",accessorKey:"vector_store_metadata",cell:e=>{var t;let{row:r}=e,s=(null===(t=r.original.vector_store_metadata)||void 0===t?void 0:t.ingested_files)||[];if(0===s.length)return(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"-"});let l=s.map(e=>e.filename||e.file_url||"Unknown").join(", "),o=1===s.length?s[0].filename||s[0].file_url||"1 file":"".concat(s.length," files");return(0,a.jsx)(S.Z,{title:l,children:(0,a.jsx)("span",{className:"text-xs text-blue-600",children:o})})}},{header:"Provider",accessorKey:"custom_llm_provider",cell:e=>{let{row:t}=e,r=t.original,{displayName:s,logo:l}=(0,C.dr)(r.custom_llm_provider);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&(0,a.jsx)("img",{src:l,alt:s,className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-xs",children:s})]})}},{header:"Created At",accessorKey:"created_at",sortingFn:"datetime",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("span",{className:"text-xs",children:new Date(r.created_at).toLocaleDateString()})}},{header:"Updated At",accessorKey:"updated_at",sortingFn:"datetime",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("span",{className:"text-xs",children:new Date(r.updated_at).toLocaleDateString()})}},{id:"actions",header:"",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(Z.Z,{variant:"Edit",tooltipText:"Edit vector store",onClick:()=>s(r.vector_store_id)}),(0,a.jsx)(Z.Z,{variant:"Delete",tooltipText:"Delete vector store",onClick:()=>l(r.vector_store_id)})]})}}],d=(0,b.b7)({data:t,columns:c,state:{sorting:n},onSortingChange:i,getCoreRowModel:(0,N.sC)(),getSortedRowModel:(0,N.tj)(),enableSorting:!0});return(0,a.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(w.iA,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,a.jsx)(w.ss,{children:d.getHeaderGroups().map(e=>(0,a.jsx)(w.SC,{children:e.headers.map(e=>(0,a.jsx)(w.xs,{className:"py-1 h-8 ".concat("actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""),onClick:e.column.getToggleSortingHandler(),children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,b.ie)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&(0,a.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,a.jsx)(f.Z,{className:"h-4 w-4 text-blue-500"}),desc:(0,a.jsx)(y.Z,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,a.jsx)(_.Z,{className:"h-4 w-4 text-gray-400"})})]})},e.id))},e.id))}),(0,a.jsx)(w.RM,{children:d.getRowModel().rows.length>0?d.getRowModel().rows.map(e=>(0,a.jsx)(w.SC,{className:"h-8",children:e.getVisibleCells().map(e=>(0,a.jsx)(w.pj,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ".concat("actions"===e.column.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""),children:(0,b.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(w.SC,{children:(0,a.jsx)(w.pj,{colSpan:c.length,className:"h-8 text-center",children:(0,a.jsx)("div",{className:"text-center text-gray-500",children:(0,a.jsx)("p",{children:"No vector stores found"})})})})})]})})})},I=r(64504),A=r(10032),E=r(22116),L=r(37592),V=r(51653),D=r(4260),P=r(15424);(s=l||(l={})).Bedrock="Amazon Bedrock",s.S3Vectors="Amazon S3 Vectors",s.PgVector="PostgreSQL pgvector (LiteLLM Connector)",s.VertexRagEngine="Vertex AI RAG Engine",s.OpenAI="OpenAI",s.Azure="Azure OpenAI",s.Milvus="Milvus";let z={Bedrock:"bedrock",PgVector:"pg_vector",VertexRagEngine:"vertex_ai",OpenAI:"openai",Azure:"azure",Milvus:"milvus",S3Vectors:"s3_vectors"},O="../ui/assets/logos/",T={"Amazon Bedrock":"".concat(O,"bedrock.svg"),"PostgreSQL pgvector (LiteLLM Connector)":"".concat(O,"postgresql.svg"),"Vertex AI RAG Engine":"".concat(O,"google.svg"),OpenAI:"".concat(O,"openai_small.svg"),"Azure OpenAI":"".concat(O,"microsoft_azure.svg"),Milvus:"".concat(O,"milvus.svg"),"Amazon S3 Vectors":"".concat(O,"s3_vector.png")},q={bedrock:[],pg_vector:[{name:"api_base",label:"API Base",tooltip:"Enter the base URL of your deployed litellm-pgvector server (e.g., http://your-server:8000)",placeholder:"http://your-deployed-server:8000",required:!0,type:"text"},{name:"api_key",label:"API Key",tooltip:"Enter the API key from your deployed litellm-pgvector server",placeholder:"your-deployed-api-key",required:!0,type:"password"}],vertex_rag_engine:[],openai:[{name:"api_key",label:"API Key",tooltip:"Enter your OpenAI API key",placeholder:"sk-...",required:!0,type:"password"}],azure:[{name:"api_key",label:"API Key",tooltip:"Enter your Azure OpenAI API key",placeholder:"your-azure-api-key",required:!0,type:"password"},{name:"api_base",label:"API Base",tooltip:"Enter your Azure OpenAI endpoint (e.g., https://your-resource.openai.azure.com/)",placeholder:"https://your-resource.openai.azure.com/",required:!0,type:"text"}],milvus:[{name:"api_key",label:"API Key",tooltip:"To obtain a token, you should use a colon (:) to concatenate the username and password that you use to access your Milvus instance (e.g., username:password)",placeholder:"username:password or api key",required:!0,type:"password"},{name:"api_base",label:"API Base",tooltip:"Enter your Milvus endpoint (e.g., https://your-milvus-endpoint.com/)",placeholder:"https://your-milvus-endpoint.com/",required:!0,type:"text"},{name:"embedding_model",label:"Embedding Model",tooltip:"Select the embedding model to use",placeholder:"text-embedding-3-small",required:!0,type:"select"}],s3_vectors:[{name:"vector_bucket_name",label:"Vector Bucket Name",tooltip:"S3 bucket name for vector storage (will be auto-created if it doesn't exist)",placeholder:"my-vector-bucket",required:!0,type:"text"},{name:"index_name",label:"Index Name",tooltip:"Name for the vector index (optional, will be auto-generated if not provided)",placeholder:"my-vector-index",required:!1,type:"text"},{name:"aws_region_name",label:"AWS Region",tooltip:"AWS region where the S3 bucket is located (e.g., us-west-2)",placeholder:"us-west-2",required:!0,type:"text"},{name:"embedding_model",label:"Embedding Model",tooltip:"Select the embedding model to use for vector generation",placeholder:"text-embedding-3-small",required:!0,type:"select"}]},B=e=>q[e]||[];var M=r(10703),R=r(9114),F=e=>{let{isVisible:t,onCancel:r,onSuccess:s,accessToken:n,credentials:i}=e,[c]=A.Z.useForm(),[d,m]=(0,o.useState)("{}"),[x,u]=(0,o.useState)("bedrock"),[h,p]=(0,o.useState)([]);(0,o.useEffect)(()=>{n&&(async()=>{try{let e=await (0,M.p)(n);e.length>0&&p(e)}catch(e){console.error("Error fetching model info:",e)}})()},[n]);let v=async e=>{if(n)try{let t={};try{t=d.trim()?JSON.parse(d):{}}catch(e){R.Z.fromBackend("Invalid JSON in metadata field");return}let r={vector_store_id:e.vector_store_id,custom_llm_provider:e.custom_llm_provider,vector_store_name:e.vector_store_name,vector_store_description:e.vector_store_description,vector_store_metadata:t,litellm_credential_name:e.litellm_credential_name},l=B(e.custom_llm_provider).reduce((t,r)=>("milvus"===e.custom_llm_provider&&"embedding_model"===r.name?t.litellm_embedding_model=e[r.name]:t[r.name]=e[r.name],t),{});r.litellm_params=l,await (0,j.vectorStoreCreateCall)(n,r),R.Z.success("Vector store created successfully"),c.resetFields(),m("{}"),s()}catch(e){console.error("Error creating vector store:",e),R.Z.fromBackend("Error creating vector store: "+e)}},g=()=>{c.resetFields(),m("{}"),u("bedrock"),r()};return(0,a.jsx)(E.Z,{title:"Add New Vector Store",visible:t,width:1e3,footer:null,onCancel:g,children:(0,a.jsxs)(A.Z,{form:c,onFinish:v,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Provider"," ",(0,a.jsx)(S.Z,{title:"Select the provider for this vector store",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),name:"custom_llm_provider",rules:[{required:!0,message:"Please select a provider"}],initialValue:"bedrock",children:(0,a.jsx)(L.default,{onChange:e=>u(e),children:Object.entries(l).map(e=>{let[t,r]=e;return(0,a.jsx)(L.default.Option,{value:z[t],children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:T[r],alt:"".concat(t," logo"),className:"w-5 h-5",onError:e=>{let t=e.target,s=t.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=r.charAt(0),s.replaceChild(e,t)}}}),(0,a.jsx)("span",{children:r})]})},t)})})}),"pg_vector"===x&&(0,a.jsx)(V.Z,{message:"PG Vector Setup Required",description:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"LiteLLM provides a server to connect to PG Vector. To use this provider:"}),(0,a.jsxs)("ol",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,a.jsxs)("li",{children:["Deploy the litellm-pgvector server from:"," ",(0,a.jsx)("a",{href:"https://github.com/BerriAI/litellm-pgvector",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/BerriAI/litellm-pgvector"})]}),(0,a.jsx)("li",{children:"Configure your PostgreSQL database with pgvector extension"}),(0,a.jsx)("li",{children:"Start the server and note the API base URL and API key"}),(0,a.jsx)("li",{children:"Enter those details in the fields below"})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),"vertex_rag_engine"===x&&(0,a.jsx)(V.Z,{message:"Vertex AI RAG Engine Setup",description:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"To use Vertex AI RAG Engine:"}),(0,a.jsxs)("ol",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,a.jsxs)("li",{children:["Set up your Vertex AI RAG Engine corpus following the guide:"," ",(0,a.jsx)("a",{href:"https://cloud.google.com/vertex-ai/generative-ai/docs/rag-engine/rag-overview",target:"_blank",rel:"noopener noreferrer",children:"Vertex AI RAG Engine Overview"})]}),(0,a.jsx)("li",{children:"Create a corpus in your Google Cloud project"}),(0,a.jsx)("li",{children:"Note the corpus ID from the Vertex AI console"}),(0,a.jsx)("li",{children:"Enter the corpus ID in the Vector Store ID field below"})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Vector Store ID"," ",(0,a.jsx)(S.Z,{title:"Enter the vector store ID from your api provider",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),name:"vector_store_id",rules:[{required:!0,message:"Please input the vector store ID from your api provider"}],children:(0,a.jsx)(I.o,{placeholder:"vertex_rag_engine"===x?"6917529027641081856 (Get corpus ID from Vertex AI console)":"Enter vector store ID from your provider"})}),B(x).map(e=>{if("select"===e.type){let t=h.filter(e=>"embedding"===e.mode||null===e.mode).map(e=>({value:e.model_group,label:e.model_group}));return(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:[e.label," ",(0,a.jsx)(S.Z,{title:e.tooltip,children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),name:e.name,rules:e.required?[{required:!0,message:"Please select the ".concat(e.label.toLowerCase())}]:[],children:(0,a.jsx)(L.default,{placeholder:e.placeholder,showSearch:!0,filterOption:(e,t)=>{var r;return(null!==(r=null==t?void 0:t.label)&&void 0!==r?r:"").toLowerCase().includes(e.toLowerCase())},options:t,style:{width:"100%"}})},e.name)}return(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:[e.label," ",(0,a.jsx)(S.Z,{title:e.tooltip,children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),name:e.name,rules:e.required?[{required:!0,message:"Please input the ".concat(e.label.toLowerCase())}]:[],children:(0,a.jsx)(I.o,{type:e.type||"text",placeholder:e.placeholder})},e.name)}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Vector Store Name"," ",(0,a.jsx)(S.Z,{title:"Custom name you want to give to the vector store, this name will be rendered on the LiteLLM UI",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),name:"vector_store_name",children:(0,a.jsx)(I.o,{})}),(0,a.jsx)(A.Z.Item,{label:"Description",name:"vector_store_description",children:(0,a.jsx)(D.default.TextArea,{rows:4})}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Existing Credentials"," ",(0,a.jsx)(S.Z,{title:"Optionally select API provider credentials for this vector store eg. Bedrock API KEY",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),name:"litellm_credential_name",children:(0,a.jsx)(L.default,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,t)=>{var r;return(null!==(r=null==t?void 0:t.label)&&void 0!==r?r:"").toLowerCase().includes(e.toLowerCase())},options:[{value:null,label:"None"},...i.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Metadata"," ",(0,a.jsx)(S.Z,{title:"JSON metadata for the vector store (optional)",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),children:(0,a.jsx)(D.default.TextArea,{rows:4,value:d,onChange:e=>m(e.target.value),placeholder:'{"key": "value"}'})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(I.z,{onClick:g,variant:"secondary",children:"Cancel"}),(0,a.jsx)(I.z,{variant:"primary",type:"submit",children:"Create"})]})]})})},K=r(21609),U=r(64748),G=r(5545),J=r(10900),W=r(57840),X=r(42264),Q=r(5945),H=r(23496),Y=r(10353),$=r(44625),ee=r(70464),et=r(77565),er=r(61935),es=r(23907);let{TextArea:el}=D.default,{Text:ea,Title:eo}=W.default,en=e=>{let{vectorStoreId:t,accessToken:r,className:s=""}=e,[l,n]=(0,o.useState)(""),[i,c]=(0,o.useState)(!1),[d,m]=(0,o.useState)([]),[x,u]=(0,o.useState)({}),h=async()=>{if(!l.trim()){X.ZP.warning("Please enter a search query");return}c(!0);try{let e=await (0,j.vectorStoreSearchCall)(r,t,l),s={query:l,response:e,timestamp:Date.now()};m(e=>[s,...e]),n("")}catch(e){console.error("Error searching vector store:",e),R.Z.fromBackend("Failed to search vector store")}finally{c(!1)}},p=e=>new Date(e).toLocaleString(),v=(e,t)=>{let r="".concat(e,"-").concat(t);u(e=>({...e,[r]:!e[r]}))};return(0,a.jsx)(Q.Z,{className:"w-full rounded-xl shadow-md",children:(0,a.jsxs)("div",{className:"flex flex-col h-[600px]",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)($.Z,{className:"mr-2 text-blue-500"}),(0,a.jsx)(eo,{level:4,className:"mb-0",children:"Test Vector Store"})]}),d.length>0&&(0,a.jsx)(G.ZP,{onClick:()=>{m([]),u({}),R.Z.success("Search history cleared")},size:"small",children:"Clear History"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-4 pb-0",children:[0===d.length?(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,a.jsx)($.Z,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,a.jsx)(ea,{children:"Test your vector store by entering a search query below"})]}):(0,a.jsx)("div",{className:"space-y-4",children:d.map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3 bg-blue-50 border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("strong",{className:"text-sm",children:"Query"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:p(e.timestamp)})]}),(0,a.jsx)("div",{className:"text-left",children:e.query})]})}),(0,a.jsx)("div",{className:"text-left",children:(0,a.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3 bg-white border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)($.Z,{className:"text-green-500"}),(0,a.jsx)("strong",{className:"text-sm",children:"Vector Store Results"}),e.response&&(0,a.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600",children:[(null===(r=e.response.data)||void 0===r?void 0:r.length)||0," results"]})]}),e.response&&e.response.data&&e.response.data.length>0?(0,a.jsx)("div",{className:"space-y-3",children:e.response.data.map((e,r)=>{let s=x["".concat(t,"-").concat(r)]||!1;return(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>v(t,r),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[s?(0,a.jsx)(ee.Z,{className:"text-gray-500 mr-2"}):(0,a.jsx)(et.Z,{className:"text-gray-500 mr-2"}),(0,a.jsxs)("span",{className:"font-medium text-sm",children:["Result ",r+1]}),!s&&e.content&&e.content[0]&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500 truncate max-w-md",children:["- ",e.content[0].text.substring(0,100),"..."]})]}),(0,a.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Score: ",e.score.toFixed(4)]})]}),s&&(0,a.jsxs)("div",{className:"border-t bg-white p-3",children:[e.content&&e.content.map((e,t)=>(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["Content (",e.type,")"]}),(0,a.jsx)("div",{className:"text-sm bg-gray-50 p-3 rounded border text-gray-800 max-h-40 overflow-y-auto",children:e.text})]},t)),(e.file_id||e.filename||e.attributes)&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Metadata"}),(0,a.jsxs)("div",{className:"space-y-2 text-xs",children:[e.file_id&&(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsx)("span",{className:"font-medium",children:"File ID:"})," ",e.file_id]}),e.filename&&(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsx)("span",{className:"font-medium",children:"Filename:"})," ",e.filename]}),e.attributes&&Object.keys(e.attributes).length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsx)("span",{className:"font-medium block mb-1",children:"Attributes:"}),(0,a.jsx)("pre",{className:"text-xs bg-white p-2 rounded border overflow-x-auto",children:JSON.stringify(e.attributes,null,2)})]})]})]})]})]},r)})}):(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"No results found"})]})}),t<d.length-1&&(0,a.jsx)(H.Z,{})]},t)})}),i&&(0,a.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,a.jsx)(Y.Z,{indicator:(0,a.jsx)(er.Z,{style:{fontSize:24},spin:!0})})})]}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-200 bg-white",children:(0,a.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(el,{value:l,onChange:e=>n(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},placeholder:"Enter your search query... (Shift+Enter for new line)",disabled:i,autoSize:{minRows:1,maxRows:4},style:{resize:"none"}})}),(0,a.jsx)(G.ZP,{type:"primary",onClick:h,disabled:i||!l.trim(),icon:(0,a.jsx)(es.Z,{}),loading:i,children:"Search"})]})})]})})};var ei=e=>{let{vectorStoreId:t,onClose:r,accessToken:s,is_admin:l,editVectorStore:n}=e,[i]=A.Z.useForm(),[c,d]=(0,o.useState)(null),[m,x]=(0,o.useState)(n),[u,h]=(0,o.useState)("{}"),[p,v]=(0,o.useState)([]),[g,f]=(0,o.useState)("details"),y=async()=>{if(s)try{let e=await (0,j.vectorStoreInfoCall)(s,t);if(e&&e.vector_store){if(d(e.vector_store),e.vector_store.vector_store_metadata){let t="string"==typeof e.vector_store.vector_store_metadata?JSON.parse(e.vector_store.vector_store_metadata):e.vector_store.vector_store_metadata;h(JSON.stringify(t,null,2))}n&&i.setFieldsValue({vector_store_id:e.vector_store.vector_store_id,custom_llm_provider:e.vector_store.custom_llm_provider,vector_store_name:e.vector_store.vector_store_name,vector_store_description:e.vector_store.vector_store_description})}}catch(e){console.error("Error fetching vector store details:",e),R.Z.fromBackend("Error fetching vector store details: "+e)}},_=async()=>{if(s)try{let e=await (0,j.credentialListCall)(s);console.log("List credentials response:",e),v(e.credentials||[])}catch(e){console.error("Error fetching credentials:",e)}};(0,o.useEffect)(()=>{y(),_()},[t,s]);let b=async e=>{if(s)try{let t={};try{t=u?JSON.parse(u):{}}catch(e){R.Z.fromBackend("Invalid JSON in metadata field");return}let r={vector_store_id:e.vector_store_id,custom_llm_provider:e.custom_llm_provider,vector_store_name:e.vector_store_name,vector_store_description:e.vector_store_description,vector_store_metadata:t};await (0,j.vectorStoreUpdateCall)(s,r),R.Z.success("Vector store updated successfully"),x(!1),y()}catch(e){console.error("Error updating vector store:",e),R.Z.fromBackend("Error updating vector store: "+e)}};return c?(0,a.jsxs)("div",{className:"p-4 max-w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(U.zx,{icon:J.Z,variant:"light",className:"mb-4",onClick:r,children:"Back to Vector Stores"}),(0,a.jsxs)(U.Dx,{children:["Vector Store ID: ",c.vector_store_id]}),(0,a.jsx)(U.xv,{className:"text-gray-500",children:c.vector_store_description||"No description"})]}),l&&!m&&(0,a.jsx)(U.zx,{onClick:()=>x(!0),children:"Edit Vector Store"})]}),(0,a.jsxs)(U.v0,{children:[(0,a.jsxs)(U.td,{className:"mb-6",children:[(0,a.jsx)(U.OK,{children:"Details"}),(0,a.jsx)(U.OK,{children:"Test Vector Store"})]}),(0,a.jsxs)(U.nP,{children:[(0,a.jsx)(U.x4,{children:m?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)(U.Dx,{children:"Edit Vector Store"})}),(0,a.jsx)(U.Zb,{children:(0,a.jsxs)(A.Z,{form:i,onFinish:b,layout:"vertical",initialValues:c,children:[(0,a.jsx)(A.Z.Item,{label:"Vector Store ID",name:"vector_store_id",rules:[{required:!0,message:"Please input a vector store ID"}],children:(0,a.jsx)(D.default,{disabled:!0})}),(0,a.jsx)(A.Z.Item,{label:"Vector Store Name",name:"vector_store_name",children:(0,a.jsx)(D.default,{})}),(0,a.jsx)(A.Z.Item,{label:"Description",name:"vector_store_description",children:(0,a.jsx)(D.default.TextArea,{rows:4})}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Provider"," ",(0,a.jsx)(S.Z,{title:"Select the provider for this vector store",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),name:"custom_llm_provider",rules:[{required:!0,message:"Please select a provider"}],children:(0,a.jsx)(L.default,{children:Object.entries(C.Cl).map(e=>{let[t,r]=e;return"Bedrock"===t?(0,a.jsx)(L.default.Option,{value:C.fK[t],children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:C.cd[r],alt:"".concat(t," logo"),className:"w-5 h-5",onError:e=>{let t=e.target,s=t.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=r.charAt(0),s.replaceChild(e,t)}}}),(0,a.jsx)("span",{children:r})]})},t):null})})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(U.xv,{className:"text-sm text-gray-500 mb-2",children:"Either select existing credentials OR enter provider credentials below"})}),(0,a.jsx)(A.Z.Item,{label:"Existing Credentials",name:"litellm_credential_name",children:(0,a.jsx)(L.default,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,t)=>{var r;return(null!==(r=null==t?void 0:t.label)&&void 0!==r?r:"").toLowerCase().includes(e.toLowerCase())},options:[{value:null,label:"None"},...p.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,a.jsxs)("div",{className:"flex items-center my-4",children:[(0,a.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,a.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,a.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Metadata"," ",(0,a.jsx)(S.Z,{title:"JSON metadata for the vector store",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),children:(0,a.jsx)(D.default.TextArea,{rows:4,value:u,onChange:e=>h(e.target.value),placeholder:'{"key": "value"}'})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(G.ZP,{onClick:()=>x(!1),children:"Cancel"}),(0,a.jsx)(G.ZP,{type:"primary",htmlType:"submit",children:"Save Changes"})]})]})})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(U.Dx,{children:"Vector Store Details"}),l&&(0,a.jsx)(U.zx,{onClick:()=>x(!0),children:"Edit Vector Store"})]}),(0,a.jsx)(U.Zb,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(U.xv,{className:"font-medium",children:"ID"}),(0,a.jsx)(U.xv,{children:c.vector_store_id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(U.xv,{className:"font-medium",children:"Name"}),(0,a.jsx)(U.xv,{children:c.vector_store_name||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(U.xv,{className:"font-medium",children:"Description"}),(0,a.jsx)(U.xv,{children:c.vector_store_description||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(U.xv,{className:"font-medium",children:"Provider"}),(0,a.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(()=>{let e=c.custom_llm_provider||"bedrock",{displayName:t,logo:r}=(()=>{let t=Object.keys(C.fK).find(t=>C.fK[t].toLowerCase()===e.toLowerCase());if(!t)return{displayName:e,logo:""};let r=C.Cl[t],s=C.cd[r];return{displayName:r,logo:s}})();return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)("img",{src:r,alt:"".concat(t," logo"),className:"w-5 h-5",onError:e=>{let r=e.target,s=r.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,r)}}}),(0,a.jsx)(U.Ct,{color:"blue",children:t})]})})()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(U.xv,{className:"font-medium",children:"Metadata"}),(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded mt-2 font-mono text-xs overflow-auto max-h-48",children:(0,a.jsx)("pre",{children:u})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(U.xv,{className:"font-medium",children:"Created"}),(0,a.jsx)(U.xv,{children:c.created_at?new Date(c.created_at).toLocaleString():"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(U.xv,{className:"font-medium",children:"Last Updated"}),(0,a.jsx)(U.xv,{children:c.updated_at?new Date(c.updated_at).toLocaleString():"-"})]})]})})]})}),(0,a.jsx)(U.x4,{children:(0,a.jsx)(en,{vectorStoreId:c.vector_store_id,accessToken:s||""})})]})]})]}):(0,a.jsx)("div",{children:"Loading..."})},ec=r(44803),ed=r(65319),em=r(46783),ex=r(33866),eu=r(56609),eh=r(6520),ep=r(23639),ev=r(26349),eg=e=>{let{documents:t,onRemove:r}=e,s=e=>{navigator.clipboard.writeText(e),X.ZP.success("Document ID copied to clipboard")},l=e=>{let t={uploading:{color:"blue",text:"Uploading"},done:{color:"green",text:"Ready"},error:{color:"red",text:"Error"},removed:{color:"default",text:"Removed"}}[e];return(0,a.jsx)(ex.Z,{color:t.color,text:t.text})},o=e=>{if(!e)return"-";let t=e/1024;return t<1024?"".concat(t.toFixed(2)," KB"):"".concat((t/1024).toFixed(2)," MB")};return(0,a.jsx)(eu.Z,{dataSource:t,columns:[{title:"Name",dataIndex:"name",key:"name",render:(e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm",children:e}),t.size&&(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:["(",o(t.size),")"]})]})},{title:"Status",dataIndex:"status",key:"status",width:150,render:e=>l(e)},{title:"Actions",key:"actions",width:120,render:(e,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(S.Z,{title:"View details",children:(0,a.jsx)(eh.Z,{className:"cursor-pointer text-gray-600 hover:text-blue-500",onClick:()=>console.log("View",t)})}),(0,a.jsx)(S.Z,{title:"Copy ID",children:(0,a.jsx)(ep.Z,{className:"cursor-pointer text-gray-600 hover:text-blue-500",onClick:()=>s(t.uid)})}),(0,a.jsx)(S.Z,{title:"Remove",children:(0,a.jsx)(ev.Z,{className:"cursor-pointer text-gray-600 hover:text-red-500",onClick:()=>r(t.uid)})})]})}],rowKey:"uid",pagination:!1,locale:{emptyText:"No documents uploaded yet. Upload documents above to get started."},size:"small"})},ej=e=>{let{accessToken:t,providerParams:r,onParamsChange:s}=e,[l,n]=(0,o.useState)([]),[i,c]=(0,o.useState)(!1);(0,o.useEffect)(()=>{t&&(async()=>{c(!0);try{let e=(await (0,M.p)(t)).filter(e=>"embedding"===e.mode);n(e)}catch(e){console.error("Error fetching embedding models:",e)}finally{c(!1)}})()},[t]);let d=(e,t)=>{s({...r,[e]:t})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.Z,{message:"AWS S3 Vectors Setup",description:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"AWS S3 Vectors allows you to store and query vector embeddings directly in S3:"}),(0,a.jsxs)("ul",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,a.jsx)("li",{children:"Vector buckets and indexes will be automatically created if they don't exist"}),(0,a.jsx)("li",{children:"Vector dimensions are auto-detected from your selected embedding model"}),(0,a.jsx)("li",{children:"Ensure your AWS credentials have permissions for S3 Vectors operations"}),(0,a.jsxs)("li",{children:["Learn more:"," ",(0,a.jsx)("a",{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-vector-buckets.html",target:"_blank",rel:"noopener noreferrer",children:"AWS S3 Vectors Documentation"})]})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Vector Bucket Name"," ",(0,a.jsx)(S.Z,{title:"S3 bucket name for vector storage (must be at least 3 characters, lowercase letters, numbers, hyphens, and periods only)",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),required:!0,validateStatus:r.vector_bucket_name&&r.vector_bucket_name.length<3?"error":void 0,help:r.vector_bucket_name&&r.vector_bucket_name.length<3?"Bucket name must be at least 3 characters":void 0,children:(0,a.jsx)(D.default,{value:r.vector_bucket_name||"",onChange:e=>d("vector_bucket_name",e.target.value),placeholder:"my-vector-bucket (min 3 chars)",size:"large",className:"rounded-md"})}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Index Name"," ",(0,a.jsx)(S.Z,{title:"Name for the vector index (optional, will be auto-generated if not provided). If provided, must be at least 3 characters.",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),validateStatus:r.index_name&&r.index_name.length>0&&r.index_name.length<3?"error":void 0,help:r.index_name&&r.index_name.length>0&&r.index_name.length<3?"Index name must be at least 3 characters if provided":void 0,children:(0,a.jsx)(D.default,{value:r.index_name||"",onChange:e=>d("index_name",e.target.value),placeholder:"my-vector-index (optional, min 3 chars)",size:"large",className:"rounded-md"})}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["AWS Region"," ",(0,a.jsx)(S.Z,{title:"AWS region where the S3 bucket is located (e.g., us-west-2)",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),required:!0,children:(0,a.jsx)(D.default,{value:r.aws_region_name||"",onChange:e=>d("aws_region_name",e.target.value),placeholder:"us-west-2",size:"large",className:"rounded-md"})}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Embedding Model"," ",(0,a.jsx)(S.Z,{title:"Select the embedding model to use for vector generation",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),required:!0,children:(0,a.jsx)(L.default,{value:r.embedding_model||void 0,onChange:e=>d("embedding_model",e),placeholder:"Select an embedding model",size:"large",showSearch:!0,loading:i,filterOption:(e,t)=>{var r;return(null!==(r=null==t?void 0:t.label)&&void 0!==r?r:"").toLowerCase().includes(e.toLowerCase())},options:l.map(e=>({value:e.model_group,label:e.model_group})),style:{width:"100%"}})})]})};let{Dragger:ef}=ed.default;var ey=e=>{var t;let{accessToken:r,onSuccess:s}=e,[n]=A.Z.useForm(),[i,c]=(0,o.useState)([]),[d,m]=(0,o.useState)(!1),[x,u]=(0,o.useState)("bedrock"),[h,p]=(0,o.useState)(""),[v,g]=(0,o.useState)(""),[f,y]=(0,o.useState)([]),[_,b]=(0,o.useState)({}),N={name:"file",multiple:!0,accept:".pdf,.txt,.docx,.md,.doc",beforeUpload:e=>{if(!["application/pdf","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/markdown"].includes(e.type))return X.ZP.error("".concat(e.name," is not a supported file type. Please upload PDF, TXT, DOCX, or MD files.")),ed.default.LIST_IGNORE;if(!(e.size/1024/1024<50))return X.ZP.error("".concat(e.name," must be smaller than 50MB!")),ed.default.LIST_IGNORE;let t={uid:e.uid,name:e.name,status:"done",size:e.size,type:e.type,originFileObj:e};return c(e=>[...e,t]),!1},onRemove:e=>{c(t=>t.filter(t=>t.uid!==e.uid))},fileList:i.map(e=>({uid:e.uid,name:e.name,status:e.status,size:e.size})),showUploadList:!1},w=async()=>{let e;if(0===i.length){X.ZP.warning("Please upload at least one document");return}if(!x){X.ZP.warning("Please select a provider");return}for(let e of B(x).filter(e=>e.required))if(!_[e.name]){X.ZP.warning("Please provide ".concat(e.label));return}if("s3_vectors"===x){if(_.vector_bucket_name&&_.vector_bucket_name.length<3){X.ZP.warning("Vector bucket name must be at least 3 characters");return}if(_.index_name&&_.index_name.length>0&&_.index_name.length<3){X.ZP.warning("Index name must be at least 3 characters if provided");return}}if(!r){X.ZP.error("No access token available");return}m(!0);let t=[];try{for(let s of i)if(s.originFileObj){c(e=>e.map(e=>e.uid===s.uid?{...e,status:"uploading"}:e));try{let l=await (0,j.ragIngestCall)(r,s.originFileObj,x,e,h||void 0,v||void 0,_);!e&&l.vector_store_id&&(e=l.vector_store_id),t.push(l),c(e=>e.map(e=>e.uid===s.uid?{...e,status:"done"}:e))}catch(e){throw console.error("Error ingesting ".concat(s.name,":"),e),c(e=>e.map(e=>e.uid===s.uid?{...e,status:"error"}:e)),e}}y(t),R.Z.success("Successfully created vector store with ".concat(t.length," document(s). Vector Store ID: ").concat(e)),s&&e&&s(e),setTimeout(()=>{c([]),y([])},3e3)}catch(e){console.error("Error creating vector store:",e),R.Z.fromBackend("Failed to create vector store: ".concat(e))}finally{m(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ec.Dx,{children:"Create Vector Store"}),(0,a.jsx)(ec.xv,{className:"text-gray-500",children:"Upload documents and select a provider to create a new vector store with embedded content."})]}),(0,a.jsxs)(ec.Zb,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)(ec.xv,{className:"font-medium",children:"Step 1: Upload Documents"}),(0,a.jsx)(ec.xv,{className:"text-sm text-gray-500 block mt-1",children:"Upload one or more documents (PDF, TXT, DOCX, MD). Maximum file size: 50MB per file."})]}),(0,a.jsxs)(ef,{...N,children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(em.Z,{style:{fontSize:"48px",color:"#1890ff"}})}),(0,a.jsx)("p",{className:"ant-upload-text",children:"Click or drag files to this area to upload"}),(0,a.jsx)("p",{className:"ant-upload-hint",children:"Support for single or bulk upload. Supported formats: PDF, TXT, DOCX, MD"})]})]}),i.length>0&&(0,a.jsxs)(ec.Zb,{children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)(ec.xv,{className:"font-medium",children:["Uploaded Documents (",i.length,")"]})}),(0,a.jsx)(eg,{documents:i,onRemove:e=>{c(t=>t.filter(t=>t.uid!==e))}})]}),(0,a.jsx)(ec.Zb,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(ec.xv,{className:"font-medium",children:"Step 2: Configure Vector Store"}),(0,a.jsx)(ec.xv,{className:"text-sm text-gray-500 block mt-1",children:"Choose the provider and optionally provide a name and description for your vector store."})]}),(0,a.jsxs)(A.Z,{form:n,layout:"vertical",children:[(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Vector Store Name"," ",(0,a.jsx)(S.Z,{title:"Optional: Give your vector store a meaningful name",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),children:(0,a.jsx)(D.default,{value:h,onChange:e=>p(e.target.value),placeholder:"e.g., Product Documentation, Customer Support KB",size:"large",className:"rounded-md"})}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Description"," ",(0,a.jsx)(S.Z,{title:"Optional: Describe what this vector store contains",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),children:(0,a.jsx)(D.default.TextArea,{value:v,onChange:e=>g(e.target.value),placeholder:"e.g., Contains all product documentation and user guides",rows:2,size:"large",className:"rounded-md"})}),(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:["Provider"," ",(0,a.jsx)(S.Z,{title:"Select the provider for embedding and vector store operations",children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),required:!0,children:(0,a.jsx)(L.default,{value:x,onChange:u,placeholder:"Select a provider",size:"large",style:{width:"100%"},children:Object.entries(l).map(e=>{let[t,r]=e;return(0,a.jsx)(L.default.Option,{value:z[t],children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:T[r],alt:"".concat(t," logo"),className:"w-5 h-5",onError:e=>{let t=e.target,s=t.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=r.charAt(0),s.replaceChild(e,t)}}}),(0,a.jsx)("span",{children:r})]})},t)})})}),"s3_vectors"===x&&(0,a.jsx)(ej,{accessToken:r,providerParams:_,onParamsChange:b}),"s3_vectors"!==x&&B(x).map(e=>"select"===e.type?(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:[e.label," ",(0,a.jsx)(S.Z,{title:e.tooltip,children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),required:e.required,children:(0,a.jsx)(D.default,{value:_[e.name]||"",onChange:t=>b(r=>({...r,[e.name]:t.target.value})),placeholder:e.placeholder,size:"large",className:"rounded-md"})},e.name):(0,a.jsx)(A.Z.Item,{label:(0,a.jsxs)("span",{children:[e.label," ",(0,a.jsx)(S.Z,{title:e.tooltip,children:(0,a.jsx)(P.Z,{style:{marginLeft:"4px"}})})]}),required:e.required,children:(0,a.jsx)(D.default,{type:"password"===e.type?"password":"text",value:_[e.name]||"",onChange:t=>b(r=>({...r,[e.name]:t.target.value})),placeholder:e.placeholder,size:"large",className:"rounded-md"})},e.name))]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(G.ZP,{type:"primary",size:"large",onClick:w,loading:d,disabled:0===i.length||!x,children:d?"Creating Vector Store...":"Create Vector Store"})})]})}),f.length>0&&(0,a.jsx)(V.Z,{message:"Vector Store Created Successfully",description:(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Vector Store ID:"})," ",null===(t=f[0])||void 0===t?void 0:t.vector_store_id]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Documents Ingested:"})," ",f.length]})]}),type:"success",showIcon:!0,closable:!0})]})};let{Text:e_,Title:eb}=W.default;var eN=e=>{let{accessToken:t,vectorStores:r}=e,[s,l]=(0,o.useState)(r.length>0?r[0].vector_store_id:void 0);return t?0===r.length?(0,a.jsx)(Q.Z,{children:(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)(e_,{type:"secondary",children:"No vector stores available. Create one first to test it."})})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(Q.Z,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(eb,{level:5,children:"Select Vector Store"}),(0,a.jsx)(e_,{type:"secondary",children:"Choose a vector store to test search queries against"})]}),(0,a.jsx)(L.default,{value:s,onChange:l,placeholder:"Select a vector store",size:"large",style:{width:"100%"},showSearch:!0,optionFilterProp:"children",children:r.map(e=>(0,a.jsx)(L.default.Option,{value:e.vector_store_id,children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:e.vector_store_name||e.vector_store_id}),e.vector_store_name&&(0,a.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:e.vector_store_id})]})},e.vector_store_id))})]})}),s&&(0,a.jsx)(en,{vectorStoreId:s,accessToken:t})]}):(0,a.jsx)(Q.Z,{children:(0,a.jsx)(e_,{type:"secondary",children:"Access token is required to test vector stores."})})},ew=r(20347),eS=e=>{let{accessToken:t,userID:r,userRole:s}=e,[l,f]=(0,o.useState)([]),[y,_]=(0,o.useState)(!1),[b,N]=(0,o.useState)(!1),[w,S]=(0,o.useState)(null),[Z,C]=(0,o.useState)(""),[I,A]=(0,o.useState)([]),[E,L]=(0,o.useState)(null),[V,D]=(0,o.useState)(!1),[P,z]=(0,o.useState)(!1),O=async()=>{if(t)try{let e=await (0,j.vectorStoreListCall)(t);console.log("List vector stores response:",e),f(e.data||[])}catch(e){console.error("Error fetching vector stores:",e),R.Z.fromBackend("Error fetching vector stores: "+e)}},T=async()=>{if(t)try{let e=await (0,j.credentialListCall)(t);console.log("List credentials response:",e),A(e.credentials||[])}catch(e){console.error("Error fetching credentials:",e),R.Z.fromBackend("Error fetching credentials: "+e)}},q=async e=>{S(e),N(!0)},B=async()=>{if(t&&w){z(!0);try{await (0,j.vectorStoreDeleteCall)(t,w),R.Z.success("Vector store deleted successfully"),O()}catch(e){console.error("Error deleting vector store:",e),R.Z.fromBackend("Error deleting vector store: "+e)}finally{z(!1),N(!1),S(null)}}};return(0,o.useEffect)(()=>{O(),T()},[t]),E?(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(ei,{vectorStoreId:E,onClose:()=>{L(null),D(!1),O()},accessToken:t,is_admin:(0,ew.tY)(s||""),editVectorStore:V})}):(0,a.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,a.jsxs)("div",{className:"gap-2 p-8 h-[75vh] w-full mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between mt-2 w-full items-center mb-4",children:[(0,a.jsx)("h1",{children:"Vector Store Management"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[Z&&(0,a.jsxs)(v.Z,{children:["Last Refreshed: ",Z]}),(0,a.jsx)(d.Z,{icon:g.Z,variant:"shadow",size:"xs",className:"self-center cursor-pointer",onClick:()=>{O(),T(),C(new Date().toLocaleString())}})]})]}),(0,a.jsx)(v.Z,{className:"mb-4",children:(0,a.jsx)("p",{children:"You can use vector stores to store and retrieve LLM embeddings."})}),(0,a.jsxs)(x.Z,{children:[(0,a.jsxs)(u.Z,{className:"mb-6",children:[(0,a.jsx)(m.Z,{children:"Create Vector Store"}),(0,a.jsx)(m.Z,{children:"Manage Vector Stores"}),(0,a.jsx)(m.Z,{children:"Test Vector Store"})]}),(0,a.jsxs)(p.Z,{children:[(0,a.jsx)(h.Z,{children:(0,a.jsx)(ey,{accessToken:t,onSuccess:e=>{console.log("Vector store created:",e),O()}})}),(0,a.jsxs)(h.Z,{children:[(0,a.jsx)(n.Z,{className:"mb-4",onClick:()=>_(!0),children:"+ Add Vector Store"}),(0,a.jsx)(c.Z,{numItems:1,className:"gap-2 pt-2 pb-2 w-full mt-2",children:(0,a.jsx)(i.Z,{numColSpan:1,children:(0,a.jsx)(k,{data:l,onView:e=>{L(e),D(!1)},onEdit:e=>{L(e),D(!0)},onDelete:q})})})]}),(0,a.jsx)(h.Z,{children:(0,a.jsx)(eN,{accessToken:t,vectorStores:l})})]})]}),(0,a.jsx)(F,{isVisible:y,onCancel:()=>_(!1),onSuccess:()=>{_(!1),O()},accessToken:t,credentials:I}),(0,a.jsx)(K.Z,{isOpen:b,title:"Delete Vector Store",message:"Are you sure you want to delete this vector store? This action cannot be undone.",resourceInformationTitle:"Vector Store Information",resourceInformation:[{label:"Vector Store ID",value:w,code:!0}],onCancel:()=>N(!1),onOk:B,confirmLoading:P})]})})}}}]);