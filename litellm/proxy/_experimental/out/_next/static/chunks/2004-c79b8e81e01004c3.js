"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2004],{33860:function(e,l,s){var i=s(57437),a=s(2265),r=s(13634),t=s(82680),n=s(52787),d=s(89970),o=s(73002),c=s(7310),m=s.n(c),u=s(19250);l.Z=e=>{let{isVisible:l,onCancel:s,onSubmit:c,accessToken:x,title:h="Add Team Member",roles:_=[{label:"admin",value:"admin",description:"Admin role. Can create team keys, add members, and manage settings."},{label:"user",value:"user",description:"User role. Can view team info, but not manage it."}],defaultRole:p="user"}=e,[j]=r.Z.useForm(),[g,v]=(0,a.useState)([]),[b,Z]=(0,a.useState)(!1),[f,w]=(0,a.useState)("user_email"),y=async(e,l)=>{if(!e){v([]);return}Z(!0);try{let s=new URLSearchParams;if(s.append(l,e),null==x)return;let i=(await (0,u.userFilterUICall)(x,s)).map(e=>({label:"user_email"===l?"".concat(e.user_email):"".concat(e.user_id),value:"user_email"===l?e.user_email:e.user_id,user:e}));v(i)}catch(e){console.error("Error fetching users:",e)}finally{Z(!1)}},N=(0,a.useCallback)(m()((e,l)=>y(e,l),300),[]),z=(e,l)=>{w(l),N(e,l)},C=(e,l)=>{let s=l.user;j.setFieldsValue({user_email:s.user_email,user_id:s.user_id,role:j.getFieldValue("role")})};return(0,i.jsx)(t.Z,{title:h,open:l,onCancel:()=>{j.resetFields(),v([]),s()},footer:null,width:800,children:(0,i.jsxs)(r.Z,{form:j,onFinish:c,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:{role:p},children:[(0,i.jsx)(r.Z.Item,{label:"Email",name:"user_email",className:"mb-4",children:(0,i.jsx)(n.default,{showSearch:!0,className:"w-full",placeholder:"Search by email",filterOption:!1,onSearch:e=>z(e,"user_email"),onSelect:(e,l)=>C(e,l),options:"user_email"===f?g:[],loading:b,allowClear:!0})}),(0,i.jsx)("div",{className:"text-center mb-4",children:"OR"}),(0,i.jsx)(r.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,i.jsx)(n.default,{showSearch:!0,className:"w-full",placeholder:"Search by user ID",filterOption:!1,onSearch:e=>z(e,"user_id"),onSelect:(e,l)=>C(e,l),options:"user_id"===f?g:[],loading:b,allowClear:!0})}),(0,i.jsx)(r.Z.Item,{label:"Member Role",name:"role",className:"mb-4",children:(0,i.jsx)(n.default,{defaultValue:p,children:_.map(e=>(0,i.jsx)(n.default.Option,{value:e.value,children:(0,i.jsxs)(d.Z,{title:e.description,children:[(0,i.jsx)("span",{className:"font-medium",children:e.label}),(0,i.jsxs)("span",{className:"ml-2 text-gray-500 text-sm",children:["- ",e.description]})]})},e.value))})}),(0,i.jsx)("div",{className:"text-right mt-4",children:(0,i.jsx)(o.ZP,{type:"default",htmlType:"submit",children:"Add Member"})})]})})}},22004:function(e,l,s){s.d(l,{Z:function(){return X},g:function(){return K}});var i=s(57437),a=s(2265),r=s(41649),t=s(20831),n=s(12514),d=s(49804),o=s(67101),c=s(47323),m=s(12485),u=s(18135),x=s(35242),h=s(29706),_=s(77991),p=s(21626),j=s(97214),g=s(28241),v=s(58834),b=s(69552),Z=s(71876),f=s(84264),w=s(24199),y=s(64482),N=s(13634),z=s(89970),C=s(82680),S=s(52787),O=s(15424),k=s(23628),M=s(86462),I=s(47686),F=s(53410),P=s(74998),A=s(31283),D=s(46468),T=s(49566),R=s(96761),L=s(73002),U=s(77331),E=s(19250),V=s(33860),B=s(10901),q=s(98015),G=s(97415),W=s(95920),$=s(59872),J=s(30401),Q=s(78867),Y=s(9114),H=e=>{var l,s,d,z,C;let{organizationId:O,onClose:k,accessToken:M,is_org_admin:I,is_proxy_admin:A,userModels:H,editOrg:K}=e,[X,ee]=(0,a.useState)(null),[el,es]=(0,a.useState)(!0),[ei]=N.Z.useForm(),[ea,er]=(0,a.useState)(!1),[et,en]=(0,a.useState)(!1),[ed,eo]=(0,a.useState)(!1),[ec,em]=(0,a.useState)(null),[eu,ex]=(0,a.useState)({}),eh=I||A,e_=async()=>{try{if(es(!0),!M)return;let e=await (0,E.organizationInfoCall)(M,O);ee(e)}catch(e){Y.Z.fromBackend("Failed to load organization information"),console.error("Error fetching organization info:",e)}finally{es(!1)}};(0,a.useEffect)(()=>{e_()},[O,M]);let ep=async e=>{try{if(null==M)return;let l={user_email:e.user_email,user_id:e.user_id,role:e.role};await (0,E.organizationMemberAddCall)(M,O,l),Y.Z.success("Organization member added successfully"),en(!1),ei.resetFields(),e_()}catch(e){Y.Z.fromBackend("Failed to add organization member"),console.error("Error adding organization member:",e)}},ej=async e=>{try{if(!M)return;let l={user_email:e.user_email,user_id:e.user_id,role:e.role};await (0,E.organizationMemberUpdateCall)(M,O,l),Y.Z.success("Organization member updated successfully"),eo(!1),ei.resetFields(),e_()}catch(e){Y.Z.fromBackend("Failed to update organization member"),console.error("Error updating organization member:",e)}},eg=async e=>{try{if(!M)return;await (0,E.organizationMemberDeleteCall)(M,O,e.user_id),Y.Z.success("Organization member deleted successfully"),eo(!1),ei.resetFields(),e_()}catch(e){Y.Z.fromBackend("Failed to delete organization member"),console.error("Error deleting organization member:",e)}},ev=async e=>{try{if(!M)return;let l={organization_id:O,organization_alias:e.organization_alias,models:e.models,litellm_budget_table:{tpm_limit:e.tpm_limit,rpm_limit:e.rpm_limit,max_budget:e.max_budget,budget_duration:e.budget_duration},metadata:e.metadata?JSON.parse(e.metadata):null};if((void 0!==e.vector_stores||void 0!==e.mcp_servers_and_groups)&&(l.object_permission={...null==X?void 0:X.object_permission,vector_stores:e.vector_stores||[]},void 0!==e.mcp_servers_and_groups)){let{servers:s,accessGroups:i}=e.mcp_servers_and_groups||{servers:[],accessGroups:[]};s&&s.length>0&&(l.object_permission.mcp_servers=s),i&&i.length>0&&(l.object_permission.mcp_access_groups=i)}await (0,E.organizationUpdateCall)(M,l),Y.Z.success("Organization settings updated successfully"),er(!1),e_()}catch(e){Y.Z.fromBackend("Failed to update organization settings"),console.error("Error updating organization:",e)}};if(el)return(0,i.jsx)("div",{className:"p-4",children:"Loading..."});if(!X)return(0,i.jsx)("div",{className:"p-4",children:"Organization not found"});let eb=async(e,l)=>{await (0,$.vQ)(e)&&(ex(e=>({...e,[l]:!0})),setTimeout(()=>{ex(e=>({...e,[l]:!1}))},2e3))};return(0,i.jsxs)("div",{className:"w-full h-screen p-4 bg-white",children:[(0,i.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(t.Z,{icon:U.Z,onClick:k,variant:"light",className:"mb-4",children:"Back to Organizations"}),(0,i.jsx)(R.Z,{children:X.organization_alias}),(0,i.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,i.jsx)(f.Z,{className:"text-gray-500 font-mono",children:X.organization_id}),(0,i.jsx)(L.ZP,{type:"text",size:"small",icon:eu["org-id"]?(0,i.jsx)(J.Z,{size:12}):(0,i.jsx)(Q.Z,{size:12}),onClick:()=>eb(X.organization_id,"org-id"),className:"left-2 z-10 transition-all duration-200 ".concat(eu["org-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")})]})]})}),(0,i.jsxs)(u.Z,{defaultIndex:K?2:0,children:[(0,i.jsxs)(x.Z,{className:"mb-4",children:[(0,i.jsx)(m.Z,{children:"Overview"}),(0,i.jsx)(m.Z,{children:"Members"}),(0,i.jsx)(m.Z,{children:"Settings"})]}),(0,i.jsxs)(_.Z,{children:[(0,i.jsx)(h.Z,{children:(0,i.jsxs)(o.Z,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(f.Z,{children:"Organization Details"}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsxs)(f.Z,{children:["Created: ",new Date(X.created_at).toLocaleDateString()]}),(0,i.jsxs)(f.Z,{children:["Updated: ",new Date(X.updated_at).toLocaleDateString()]}),(0,i.jsxs)(f.Z,{children:["Created By: ",X.created_by]})]})]}),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(f.Z,{children:"Budget Status"}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsxs)(R.Z,{children:["$",(0,$.pw)(X.spend,4)]}),(0,i.jsxs)(f.Z,{children:["of"," ",null===X.litellm_budget_table.max_budget?"Unlimited":"$".concat((0,$.pw)(X.litellm_budget_table.max_budget,4))]}),X.litellm_budget_table.budget_duration&&(0,i.jsxs)(f.Z,{className:"text-gray-500",children:["Reset: ",X.litellm_budget_table.budget_duration]})]})]}),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(f.Z,{children:"Rate Limits"}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsxs)(f.Z,{children:["TPM: ",X.litellm_budget_table.tpm_limit||"Unlimited"]}),(0,i.jsxs)(f.Z,{children:["RPM: ",X.litellm_budget_table.rpm_limit||"Unlimited"]}),X.litellm_budget_table.max_parallel_requests&&(0,i.jsxs)(f.Z,{children:["Max Parallel Requests: ",X.litellm_budget_table.max_parallel_requests]})]})]}),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(f.Z,{children:"Models"}),(0,i.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:0===X.models.length?(0,i.jsx)(r.Z,{color:"red",children:"All proxy models"}):X.models.map((e,l)=>(0,i.jsx)(r.Z,{color:"red",children:e},l))})]}),(0,i.jsxs)(n.Z,{children:[(0,i.jsx)(f.Z,{children:"Teams"}),(0,i.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:null===(l=X.teams)||void 0===l?void 0:l.map((e,l)=>(0,i.jsx)(r.Z,{color:"red",children:e.team_id},l))})]}),(0,i.jsx)(q.Z,{objectPermission:X.object_permission,variant:"card",accessToken:M})]})}),(0,i.jsx)(h.Z,{children:(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(n.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[75vh]",children:(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(v.Z,{children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(b.Z,{children:"User ID"}),(0,i.jsx)(b.Z,{children:"Role"}),(0,i.jsx)(b.Z,{children:"Spend"}),(0,i.jsx)(b.Z,{children:"Created At"}),(0,i.jsx)(b.Z,{})]})}),(0,i.jsx)(j.Z,{children:null===(s=X.members)||void 0===s?void 0:s.map((e,l)=>(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(g.Z,{children:(0,i.jsx)(f.Z,{className:"font-mono",children:e.user_id})}),(0,i.jsx)(g.Z,{children:(0,i.jsx)(f.Z,{className:"font-mono",children:e.user_role})}),(0,i.jsx)(g.Z,{children:(0,i.jsxs)(f.Z,{children:["$",(0,$.pw)(e.spend,4)]})}),(0,i.jsx)(g.Z,{children:(0,i.jsx)(f.Z,{children:new Date(e.created_at).toLocaleString()})}),(0,i.jsx)(g.Z,{children:eh&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{icon:F.Z,size:"sm",onClick:()=>{em({role:e.user_role,user_email:e.user_email,user_id:e.user_id}),eo(!0)}}),(0,i.jsx)(c.Z,{icon:P.Z,size:"sm",onClick:()=>{eg(e)}})]})})]},l))})]})}),eh&&(0,i.jsx)(t.Z,{onClick:()=>{en(!0)},children:"Add Member"})]})}),(0,i.jsx)(h.Z,{children:(0,i.jsxs)(n.Z,{className:"overflow-y-auto max-h-[65vh]",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)(R.Z,{children:"Organization Settings"}),eh&&!ea&&(0,i.jsx)(t.Z,{onClick:()=>er(!0),children:"Edit Settings"})]}),ea?(0,i.jsxs)(N.Z,{form:ei,onFinish:ev,initialValues:{organization_alias:X.organization_alias,models:X.models,tpm_limit:X.litellm_budget_table.tpm_limit,rpm_limit:X.litellm_budget_table.rpm_limit,max_budget:X.litellm_budget_table.max_budget,budget_duration:X.litellm_budget_table.budget_duration,metadata:X.metadata?JSON.stringify(X.metadata,null,2):"",vector_stores:(null===(d=X.object_permission)||void 0===d?void 0:d.vector_stores)||[],mcp_servers_and_groups:{servers:(null===(z=X.object_permission)||void 0===z?void 0:z.mcp_servers)||[],accessGroups:(null===(C=X.object_permission)||void 0===C?void 0:C.mcp_access_groups)||[]}},layout:"vertical",children:[(0,i.jsx)(N.Z.Item,{label:"Organization Name",name:"organization_alias",rules:[{required:!0,message:"Please input an organization name"}],children:(0,i.jsx)(T.Z,{})}),(0,i.jsx)(N.Z.Item,{label:"Models",name:"models",children:(0,i.jsxs)(S.default,{mode:"multiple",placeholder:"Select models",children:[(0,i.jsx)(S.default.Option,{value:"all-proxy-models",children:"All Proxy Models"},"all-proxy-models"),H.map(e=>(0,i.jsx)(S.default.Option,{value:e,children:(0,D.W0)(e)},e))]})}),(0,i.jsx)(N.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,i.jsx)(w.Z,{step:.01,precision:2,style:{width:"100%"}})}),(0,i.jsx)(N.Z.Item,{label:"Reset Budget",name:"budget_duration",children:(0,i.jsxs)(S.default,{placeholder:"n/a",children:[(0,i.jsx)(S.default.Option,{value:"24h",children:"daily"}),(0,i.jsx)(S.default.Option,{value:"7d",children:"weekly"}),(0,i.jsx)(S.default.Option,{value:"30d",children:"monthly"})]})}),(0,i.jsx)(N.Z.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,i.jsx)(w.Z,{step:1,style:{width:"100%"}})}),(0,i.jsx)(N.Z.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,i.jsx)(w.Z,{step:1,style:{width:"100%"}})}),(0,i.jsx)(N.Z.Item,{label:"Vector Stores",name:"vector_stores",children:(0,i.jsx)(G.Z,{onChange:e=>ei.setFieldValue("vector_stores",e),value:ei.getFieldValue("vector_stores"),accessToken:M||"",placeholder:"Select vector stores"})}),(0,i.jsx)(N.Z.Item,{label:"MCP Servers & Access Groups",name:"mcp_servers_and_groups",children:(0,i.jsx)(W.Z,{onChange:e=>ei.setFieldValue("mcp_servers_and_groups",e),value:ei.getFieldValue("mcp_servers_and_groups"),accessToken:M||"",placeholder:"Select MCP servers and access groups"})}),(0,i.jsx)(N.Z.Item,{label:"Metadata",name:"metadata",children:(0,i.jsx)(y.default.TextArea,{rows:4})}),(0,i.jsx)("div",{className:"sticky z-10 bg-white p-4 border-t border-gray-200 bottom-[-1.5rem] inset-x-[-1.5rem]",children:(0,i.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,i.jsx)(L.ZP,{onClick:()=>er(!1),children:"Cancel"}),(0,i.jsx)(t.Z,{type:"submit",children:"Save Changes"})]})})]}):(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{className:"font-medium",children:"Organization Name"}),(0,i.jsx)("div",{children:X.organization_alias})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{className:"font-medium",children:"Organization ID"}),(0,i.jsx)("div",{className:"font-mono",children:X.organization_id})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{className:"font-medium",children:"Created At"}),(0,i.jsx)("div",{children:new Date(X.created_at).toLocaleString()})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{className:"font-medium",children:"Models"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:X.models.map((e,l)=>(0,i.jsx)(r.Z,{color:"red",children:e},l))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{className:"font-medium",children:"Rate Limits"}),(0,i.jsxs)("div",{children:["TPM: ",X.litellm_budget_table.tpm_limit||"Unlimited"]}),(0,i.jsxs)("div",{children:["RPM: ",X.litellm_budget_table.rpm_limit||"Unlimited"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(f.Z,{className:"font-medium",children:"Budget"}),(0,i.jsxs)("div",{children:["Max:"," ",null!==X.litellm_budget_table.max_budget?"$".concat((0,$.pw)(X.litellm_budget_table.max_budget,4)):"No Limit"]}),(0,i.jsxs)("div",{children:["Reset: ",X.litellm_budget_table.budget_duration||"Never"]})]}),(0,i.jsx)(q.Z,{objectPermission:X.object_permission,variant:"inline",className:"pt-4 border-t border-gray-200",accessToken:M})]})]})})]})]}),(0,i.jsx)(V.Z,{isVisible:et,onCancel:()=>en(!1),onSubmit:ep,accessToken:M,title:"Add Organization Member",roles:[{label:"org_admin",value:"org_admin",description:"Can add and remove members, and change their roles."},{label:"internal_user",value:"internal_user",description:"Can view/create keys for themselves within organization."},{label:"internal_user_viewer",value:"internal_user_viewer",description:"Can only view their keys within organization."}],defaultRole:"internal_user"}),(0,i.jsx)(B.Z,{visible:ed,onCancel:()=>eo(!1),onSubmit:ej,initialData:ec,mode:"edit",config:{title:"Edit Member",showEmail:!0,showUserId:!0,roleOptions:[{label:"Org Admin",value:"org_admin"},{label:"Internal User",value:"internal_user"},{label:"Internal User Viewer",value:"internal_user_viewer"}]}})]})};let K=async(e,l)=>{l(await (0,E.organizationListCall)(e))};var X=e=>{let{organizations:l,userRole:s,userModels:T,accessToken:R,lastRefreshed:L,handleRefreshClick:U,currentOrg:V,guardrailsList:B=[],setOrganizations:q,premiumUser:J}=e,[Q,X]=(0,a.useState)(null),[ee,el]=(0,a.useState)(!1),[es,ei]=(0,a.useState)(!1),[ea,er]=(0,a.useState)(null),[et,en]=(0,a.useState)(!1),[ed]=N.Z.useForm(),[eo,ec]=(0,a.useState)({});(0,a.useEffect)(()=>{R&&K(R,q)},[R]);let em=e=>{e&&(er(e),ei(!0))},eu=async()=>{if(ea&&R)try{await (0,E.organizationDeleteCall)(R,ea),Y.Z.success("Organization deleted successfully"),ei(!1),er(null),K(R,q)}catch(e){console.error("Error deleting organization:",e)}},ex=async e=>{try{var l,s,i,a;if(!R)return;console.log("values in organizations new create call: ".concat(JSON.stringify(e))),(e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0||e.allowed_mcp_servers_and_groups&&((null===(l=e.allowed_mcp_servers_and_groups.servers)||void 0===l?void 0:l.length)>0||(null===(s=e.allowed_mcp_servers_and_groups.accessGroups)||void 0===s?void 0:s.length)>0))&&(e.object_permission={},e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission.vector_stores=e.allowed_vector_store_ids,delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&((null===(i=e.allowed_mcp_servers_and_groups.servers)||void 0===i?void 0:i.length)>0&&(e.object_permission.mcp_servers=e.allowed_mcp_servers_and_groups.servers),(null===(a=e.allowed_mcp_servers_and_groups.accessGroups)||void 0===a?void 0:a.length)>0&&(e.object_permission.mcp_access_groups=e.allowed_mcp_servers_and_groups.accessGroups),delete e.allowed_mcp_servers_and_groups)),await (0,E.organizationCreateCall)(R,e),Y.Z.success("Organization created successfully"),en(!1),ed.resetFields(),K(R,q)}catch(e){console.error("Error creating organization:",e)}};return J?(0,i.jsxs)("div",{className:"w-full mx-4 h-[75vh]",children:[(0,i.jsx)(o.Z,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,i.jsxs)(d.Z,{numColSpan:1,className:"flex flex-col gap-2",children:[("Admin"===s||"Org Admin"===s)&&(0,i.jsx)(t.Z,{className:"w-fit",onClick:()=>en(!0),children:"+ Create New Organization"}),Q?(0,i.jsx)(H,{organizationId:Q,onClose:()=>{X(null),el(!1)},accessToken:R,is_org_admin:!0,is_proxy_admin:"Admin"===s,userModels:T,editOrg:ee}):(0,i.jsxs)(u.Z,{className:"gap-2 h-[75vh] w-full",children:[(0,i.jsxs)(x.Z,{className:"flex justify-between mt-2 w-full items-center",children:[(0,i.jsx)("div",{className:"flex",children:(0,i.jsx)(m.Z,{children:"Your Organizations"})}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[L&&(0,i.jsxs)(f.Z,{children:["Last Refreshed: ",L]}),(0,i.jsx)(c.Z,{icon:k.Z,variant:"shadow",size:"xs",className:"self-center",onClick:U})]})]}),(0,i.jsx)(_.Z,{children:(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(f.Z,{children:"Click on “Organization ID” to view organization details."}),(0,i.jsx)(o.Z,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,i.jsx)(d.Z,{numColSpan:1,children:(0,i.jsx)(n.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh]",children:(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(v.Z,{children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(b.Z,{children:"Organization ID"}),(0,i.jsx)(b.Z,{children:"Organization Name"}),(0,i.jsx)(b.Z,{children:"Created"}),(0,i.jsx)(b.Z,{children:"Spend (USD)"}),(0,i.jsx)(b.Z,{children:"Budget (USD)"}),(0,i.jsx)(b.Z,{children:"Models"}),(0,i.jsx)(b.Z,{children:"TPM / RPM Limits"}),(0,i.jsx)(b.Z,{children:"Info"}),(0,i.jsx)(b.Z,{children:"Actions"})]})}),(0,i.jsx)(j.Z,{children:l&&l.length>0?l.sort((e,l)=>new Date(l.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>{var l,a,n,d,o,m,u,x,h;return(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(g.Z,{children:(0,i.jsx)("div",{className:"overflow-hidden",children:(0,i.jsx)(z.Z,{title:e.organization_id,children:(0,i.jsxs)(t.Z,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>X(e.organization_id),children:[null===(l=e.organization_id)||void 0===l?void 0:l.slice(0,7),"..."]})})})}),(0,i.jsx)(g.Z,{children:e.organization_alias}),(0,i.jsx)(g.Z,{children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,i.jsx)(g.Z,{children:(0,$.pw)(e.spend,4)}),(0,i.jsx)(g.Z,{children:(null===(a=e.litellm_budget_table)||void 0===a?void 0:a.max_budget)!==null&&(null===(n=e.litellm_budget_table)||void 0===n?void 0:n.max_budget)!==void 0?null===(d=e.litellm_budget_table)||void 0===d?void 0:d.max_budget:"No limit"}),(0,i.jsx)(g.Z,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:e.models.length>3?"px-0":"",children:(0,i.jsx)("div",{className:"flex flex-col",children:Array.isArray(e.models)?(0,i.jsx)("div",{className:"flex flex-col",children:0===e.models.length?(0,i.jsx)(r.Z,{size:"xs",className:"mb-1",color:"red",children:(0,i.jsx)(f.Z,{children:"All Proxy Models"})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"flex items-start",children:[e.models.length>3&&(0,i.jsx)("div",{children:(0,i.jsx)(c.Z,{icon:eo[e.organization_id||""]?M.Z:I.Z,className:"cursor-pointer",size:"xs",onClick:()=>{ec(l=>({...l,[e.organization_id||""]:!l[e.organization_id||""]}))}})}),(0,i.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.models.slice(0,3).map((e,l)=>"all-proxy-models"===e?(0,i.jsx)(r.Z,{size:"xs",color:"red",children:(0,i.jsx)(f.Z,{children:"All Proxy Models"})},l):(0,i.jsx)(r.Z,{size:"xs",color:"blue",children:(0,i.jsx)(f.Z,{children:e.length>30?"".concat((0,D.W0)(e).slice(0,30),"..."):(0,D.W0)(e)})},l)),e.models.length>3&&!eo[e.organization_id||""]&&(0,i.jsx)(r.Z,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,i.jsxs)(f.Z,{children:["+",e.models.length-3," ",e.models.length-3==1?"more model":"more models"]})}),eo[e.organization_id||""]&&(0,i.jsx)("div",{className:"flex flex-wrap gap-1",children:e.models.slice(3).map((e,l)=>"all-proxy-models"===e?(0,i.jsx)(r.Z,{size:"xs",color:"red",children:(0,i.jsx)(f.Z,{children:"All Proxy Models"})},l+3):(0,i.jsx)(r.Z,{size:"xs",color:"blue",children:(0,i.jsx)(f.Z,{children:e.length>30?"".concat((0,D.W0)(e).slice(0,30),"..."):(0,D.W0)(e)})},l+3))})]})]})})}):null})}),(0,i.jsx)(g.Z,{children:(0,i.jsxs)(f.Z,{children:["TPM:"," ",(null===(o=e.litellm_budget_table)||void 0===o?void 0:o.tpm_limit)?null===(m=e.litellm_budget_table)||void 0===m?void 0:m.tpm_limit:"Unlimited",(0,i.jsx)("br",{}),"RPM:"," ",(null===(u=e.litellm_budget_table)||void 0===u?void 0:u.rpm_limit)?null===(x=e.litellm_budget_table)||void 0===x?void 0:x.rpm_limit:"Unlimited"]})}),(0,i.jsx)(g.Z,{children:(0,i.jsxs)(f.Z,{children:[(null===(h=e.members)||void 0===h?void 0:h.length)||0," Members"]})}),(0,i.jsx)(g.Z,{children:"Admin"===s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{icon:F.Z,size:"sm",onClick:()=>{X(e.organization_id),el(!0)}}),(0,i.jsx)(c.Z,{onClick:()=>em(e.organization_id),icon:P.Z,size:"sm"})]})})]},e.organization_id)}):null})]})})})})]})})]})]})}),(0,i.jsx)(C.Z,{title:"Create Organization",visible:et,width:800,footer:null,onCancel:()=>{en(!1),ed.resetFields()},children:(0,i.jsxs)(N.Z,{form:ed,onFinish:ex,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,i.jsx)(N.Z.Item,{label:"Organization Name",name:"organization_alias",rules:[{required:!0,message:"Please input an organization name"}],children:(0,i.jsx)(A.o,{placeholder:""})}),(0,i.jsx)(N.Z.Item,{label:"Models",name:"models",children:(0,i.jsxs)(S.default,{mode:"multiple",placeholder:"Select models",style:{width:"100%"},children:[(0,i.jsx)(S.default.Option,{value:"all-proxy-models",children:"All Proxy Models"},"all-proxy-models"),T&&T.length>0&&T.map(e=>(0,i.jsx)(S.default.Option,{value:e,children:(0,D.W0)(e)},e))]})}),(0,i.jsx)(N.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,i.jsx)(w.Z,{step:.01,precision:2,width:200})}),(0,i.jsx)(N.Z.Item,{label:"Reset Budget",name:"budget_duration",children:(0,i.jsxs)(S.default,{defaultValue:null,placeholder:"n/a",children:[(0,i.jsx)(S.default.Option,{value:"24h",children:"daily"}),(0,i.jsx)(S.default.Option,{value:"7d",children:"weekly"}),(0,i.jsx)(S.default.Option,{value:"30d",children:"monthly"})]})}),(0,i.jsx)(N.Z.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,i.jsx)(w.Z,{step:1,width:400})}),(0,i.jsx)(N.Z.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,i.jsx)(w.Z,{step:1,width:400})}),(0,i.jsx)(N.Z.Item,{label:(0,i.jsxs)("span",{children:["Allowed Vector Stores"," ",(0,i.jsx)(z.Z,{title:"Select which vector stores this organization can access by default. Leave empty for access to all vector stores",children:(0,i.jsx)(O.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-4",help:"Select vector stores this organization can access. Leave empty for access to all vector stores",children:(0,i.jsx)(G.Z,{onChange:e=>ed.setFieldValue("allowed_vector_store_ids",e),value:ed.getFieldValue("allowed_vector_store_ids"),accessToken:R||"",placeholder:"Select vector stores (optional)"})}),(0,i.jsx)(N.Z.Item,{label:(0,i.jsxs)("span",{children:["Allowed MCP Servers"," ",(0,i.jsx)(z.Z,{title:"Select which MCP servers and access groups this organization can access by default.",children:(0,i.jsx)(O.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",className:"mt-4",help:"Select MCP servers and access groups this organization can access.",children:(0,i.jsx)(W.Z,{onChange:e=>ed.setFieldValue("allowed_mcp_servers_and_groups",e),value:ed.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:R||"",placeholder:"Select MCP servers and access groups (optional)"})}),(0,i.jsx)(N.Z.Item,{label:"Metadata",name:"metadata",children:(0,i.jsx)(y.default.TextArea,{rows:4})}),(0,i.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,i.jsx)(t.Z,{type:"submit",children:"Create Organization"})})]})}),es?(0,i.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,i.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,i.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,i.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,i.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,i.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,i.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,i.jsx)("div",{className:"sm:flex sm:items-start",children:(0,i.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,i.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Organization"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this organization?"})})]})})}),(0,i.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,i.jsx)(t.Z,{onClick:eu,color:"red",className:"ml-2",children:"Delete"}),(0,i.jsx)(t.Z,{onClick:()=>{ei(!1),er(null)},children:"Cancel"})]})]})]})}):(0,i.jsx)(i.Fragment,{})]}):(0,i.jsx)("div",{children:(0,i.jsxs)(f.Z,{children:["This is a LiteLLM Enterprise feature, and requires a valid key to use. Get a trial key"," ",(0,i.jsx)("a",{href:"https://www.litellm.ai/#pricing",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})})}},10901:function(e,l,s){s.d(l,{Z:function(){return x}});var i=s(57437),a=s(2265),r=s(13634),t=s(82680),n=s(73002),d=s(27281),o=s(43227),c=s(49566),m=s(92280),u=s(24199),x=e=>{var l,s,x;let{visible:h,onCancel:_,onSubmit:p,initialData:j,mode:g,config:v}=e,[b]=r.Z.useForm();console.log("Initial Data:",j),(0,a.useEffect)(()=>{if(h){if("edit"===g&&j){let e={...j,role:j.role||v.defaultRole,max_budget_in_team:j.max_budget_in_team||null,tpm_limit:j.tpm_limit||null,rpm_limit:j.rpm_limit||null};console.log("Setting form values:",e),b.setFieldsValue(e)}else{var e;b.resetFields(),b.setFieldsValue({role:v.defaultRole||(null===(e=v.roleOptions[0])||void 0===e?void 0:e.value)})}}},[h,j,g,b,v.defaultRole,v.roleOptions]);let Z=async e=>{try{let l=Object.entries(e).reduce((e,l)=>{let[s,i]=l;if("string"==typeof i){let l=i.trim();return""===l&&("max_budget_in_team"===s||"tpm_limit"===s||"rpm_limit"===s)?{...e,[s]:null}:{...e,[s]:l}}return{...e,[s]:i}},{});console.log("Submitting form data:",l),p(l),b.resetFields()}catch(e){console.error("Form submission error:",e)}},f=e=>{switch(e.type){case"input":return(0,i.jsx)(c.Z,{placeholder:e.placeholder});case"numerical":return(0,i.jsx)(u.Z,{step:e.step||1,min:e.min||0,style:{width:"100%"},placeholder:e.placeholder||"Enter a numerical value"});case"select":var l;return(0,i.jsx)(d.Z,{children:null===(l=e.options)||void 0===l?void 0:l.map(e=>(0,i.jsx)(o.Z,{value:e.value,children:e.label},e.value))});default:return null}};return(0,i.jsx)(t.Z,{title:v.title||("add"===g?"Add Member":"Edit Member"),open:h,width:1e3,footer:null,onCancel:_,children:(0,i.jsxs)(r.Z,{form:b,onFinish:Z,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[v.showEmail&&(0,i.jsx)(r.Z.Item,{label:"Email",name:"user_email",className:"mb-4",rules:[{type:"email",message:"Please enter a valid email!"}],children:(0,i.jsx)(c.Z,{placeholder:"user@example.com"})}),v.showEmail&&v.showUserId&&(0,i.jsx)("div",{className:"text-center mb-4",children:(0,i.jsx)(m.x,{children:"OR"})}),v.showUserId&&(0,i.jsx)(r.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,i.jsx)(c.Z,{placeholder:"user_123"})}),(0,i.jsx)(r.Z.Item,{label:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{children:"Role"}),"edit"===g&&j&&(0,i.jsxs)("span",{className:"text-gray-500 text-sm",children:["(Current: ",(s=j.role,(null===(x=v.roleOptions.find(e=>e.value===s))||void 0===x?void 0:x.label)||s),")"]})]}),name:"role",className:"mb-4",rules:[{required:!0,message:"Please select a role!"}],children:(0,i.jsx)(d.Z,{children:"edit"===g&&j?[...v.roleOptions.filter(e=>e.value===j.role),...v.roleOptions.filter(e=>e.value!==j.role)].map(e=>(0,i.jsx)(o.Z,{value:e.value,children:e.label},e.value)):v.roleOptions.map(e=>(0,i.jsx)(o.Z,{value:e.value,children:e.label},e.value))})}),null===(l=v.additionalFields)||void 0===l?void 0:l.map(e=>(0,i.jsx)(r.Z.Item,{label:e.label,name:e.name,className:"mb-4",rules:e.rules,children:f(e)},e.name)),(0,i.jsxs)("div",{className:"text-right mt-6",children:[(0,i.jsx)(n.ZP,{onClick:_,className:"mr-2",children:"Cancel"}),(0,i.jsx)(n.ZP,{type:"default",htmlType:"submit",children:"add"===g?"Add Member":"Save Changes"})]})]})})}}}]);