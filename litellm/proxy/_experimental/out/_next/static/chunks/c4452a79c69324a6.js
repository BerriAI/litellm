(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,488143,(e,t,s)=>{"use strict";function r({widthInt:e,heightInt:t,blurWidth:s,blurHeight:r,blurDataURL:a,objectFit:n}){let i=s?40*s:e,o=r?40*r:t,l=i&&o?`viewBox='0 0 ${i} ${o}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${l}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${l?"none":"contain"===n?"xMidYMid":"cover"===n?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${a}'/%3E%3C/svg%3E`}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},987690,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={VALID_LOADERS:function(){return n},imageConfigDefault:function(){return i}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,maximumResponseBody:5e7,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},908927,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImgProps",{enumerable:!0,get:function(){return c}}),e.r(233525);let r=e.r(543369),a=e.r(488143),n=e.r(987690),i=["-moz-initial","fill","none","scale-down",void 0];function o(e){return void 0!==e.default}function l(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function c({src:e,sizes:t,unoptimized:s=!1,priority:c=!1,preload:d=!1,loading:u,className:m,quality:p,width:h,height:f,fill:g=!1,style:y,overrideSrc:x,onLoad:b,onLoadingComplete:v,placeholder:w="empty",blurDataURL:_,fetchPriority:j,decoding:S="async",layout:N,objectFit:k,objectPosition:E,lazyBoundary:T,lazyRoot:C,...P},A){var O;let I,R,M,{imgConf:L,showAltText:$,blurComplete:U,defaultLoader:D}=A,q=L||n.imageConfigDefault;if("allSizes"in q)I=q;else{let e=[...q.deviceSizes,...q.imageSizes].sort((e,t)=>e-t),t=q.deviceSizes.sort((e,t)=>e-t),s=q.qualities?.sort((e,t)=>e-t);I={...q,allSizes:e,deviceSizes:t,qualities:s}}if(void 0===D)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let B=P.loader||D;delete P.loader,delete P.srcSet;let z="__next_img_default"in B;if(z){if("custom"===I.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=B;B=t=>{let{config:s,...r}=t;return e(r)}}if(N){"fill"===N&&(g=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[N];e&&(y={...y,...e});let s={responsive:"100vw",fill:"100vw"}[N];s&&!t&&(t=s)}let H="",F=l(h),W=l(f);if((O=e)&&"object"==typeof O&&(o(O)||void 0!==O.src)){let t=o(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(R=t.blurWidth,M=t.blurHeight,_=_||t.blurDataURL,H=t.src,!g)if(F||W){if(F&&!W){let e=F/t.width;W=Math.round(t.height*e)}else if(!F&&W){let e=W/t.height;F=Math.round(t.width*e)}}else F=t.width,W=t.height}let J=!c&&!d&&("lazy"===u||void 0===u);(!(e="string"==typeof e?e:H)||e.startsWith("data:")||e.startsWith("blob:"))&&(s=!0,J=!1),I.unoptimized&&(s=!0),z&&!I.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(s=!0);let G=l(p),V=Object.assign(g?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:k,objectPosition:E}:{},$?{}:{color:"transparent"},y),K=U||"empty"===w?null:"blur"===w?`url("data:image/svg+xml;charset=utf-8,${(0,a.getImageBlurSvg)({widthInt:F,heightInt:W,blurWidth:R,blurHeight:M,blurDataURL:_||"",objectFit:V.objectFit})}")`:`url("${w}")`,X=i.includes(V.objectFit)?"fill"===V.objectFit?"100% 100%":"cover":V.objectFit,Y=K?{backgroundSize:X,backgroundPosition:V.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:K}:{},Q=function({config:e,src:t,unoptimized:s,width:a,quality:n,sizes:i,loader:o}){if(s){let e=(0,r.getDeploymentId)();if(t.startsWith("/")&&!t.startsWith("//")&&e){let s=t.includes("?")?"&":"?";t=`${t}${s}dpl=${e}`}return{src:t,srcSet:void 0,sizes:void 0}}let{widths:l,kind:c}=function({deviceSizes:e,allSizes:t},s,r){if(r){let s=/(^|\s)(1?\d?\d)vw/g,a=[];for(let e;e=s.exec(r);)a.push(parseInt(e[2]));if(a.length){let s=.01*Math.min(...a);return{widths:t.filter(t=>t>=e[0]*s),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof s?{widths:e,kind:"w"}:{widths:[...new Set([s,2*s].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,a,i),d=l.length-1;return{sizes:i||"w"!==c?i:"100vw",srcSet:l.map((s,r)=>`${o({config:e,src:t,quality:n,width:s})} ${"w"===c?s:r+1}${c}`).join(", "),src:o({config:e,src:t,quality:n,width:l[d]})}}({config:I,src:e,unoptimized:s,width:F,quality:G,sizes:t,loader:B}),Z=J?"lazy":u;return{props:{...P,loading:Z,fetchPriority:j,width:F,height:W,decoding:S,className:m,style:{...V,...Y},sizes:Q.sizes,srcSet:Q.srcSet,src:x||Q.src},meta:{unoptimized:s,preload:d||c,placeholder:w,fill:g}}}},898879,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return o}});let r=e.r(271645),a="u"<typeof window,n=a?()=>{}:r.useLayoutEffect,i=a?()=>{}:r.useEffect;function o(e){let{headManager:t,reduceComponentsToState:s}=e;function o(){if(t&&t.mountedInstances){let e=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(s(e))}}return a&&(t?.mountedInstances?.add(e.children),o()),n(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),n(()=>(t&&(t._pendingUpdate=o),()=>{t&&(t._pendingUpdate=o)})),i(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},325633,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return f},defaultHead:function(){return u}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=e.r(563141),i=e.r(151836),o=e.r(843476),l=i._(e.r(271645)),c=n._(e.r(898879)),d=e.r(742732);function u(){return[(0,o.jsx)("meta",{charSet:"utf-8"},"charset"),(0,o.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function m(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===l.default.Fragment?e.concat(l.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(233525);let p=["name","httpEquiv","charSet","itemProp"];function h(e){let t,s,r,a;return e.reduce(m,[]).reverse().concat(u().reverse()).filter((t=new Set,s=new Set,r=new Set,a={},e=>{let n=!0,i=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){i=!0;let s=e.key.slice(e.key.indexOf("$")+1);t.has(s)?n=!1:t.add(s)}switch(e.type){case"title":case"base":s.has(e.type)?n=!1:s.add(e.type);break;case"meta":for(let t=0,s=p.length;t<s;t++){let s=p[t];if(e.props.hasOwnProperty(s))if("charSet"===s)r.has(s)?n=!1:r.add(s);else{let t=e.props[s],r=a[s]||new Set;("name"!==s||!i)&&r.has(t)?n=!1:(r.add(t),a[s]=r)}}}return n})).reverse().map((e,t)=>{let s=e.key||t;return l.default.cloneElement(e,{key:s})})}let f=function({children:e}){let t=(0,l.useContext)(d.HeadManagerContext);return(0,o.jsx)(c.default,{reduceComponentsToState:h,headManager:t,children:e})};("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},918556,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"ImageConfigContext",{enumerable:!0,get:function(){return n}});let r=e.r(563141)._(e.r(271645)),a=e.r(987690),n=r.default.createContext(a.imageConfigDefault)},65856,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"RouterContext",{enumerable:!0,get:function(){return r}});let r=e.r(563141)._(e.r(271645)).default.createContext(null)},670965,(e,t,s)=>{"use strict";function r(e,t){let s=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e,0):s}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"findClosestQuality",{enumerable:!0,get:function(){return r}})},1948,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return i}});let r=e.r(670965),a=e.r(543369);function n({config:e,src:t,width:s,quality:n}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let i=(0,r.findClosestQuality)(n,e),o=(0,a.getDeploymentId)();return`${e.path}?url=${encodeURIComponent(t)}&w=${s}&q=${i}${t.startsWith("/")&&o?`&dpl=${o}`:""}`}n.__next_img_default=!0;let i=n},605500,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"Image",{enumerable:!0,get:function(){return v}});let r=e.r(563141),a=e.r(151836),n=e.r(843476),i=a._(e.r(271645)),o=r._(e.r(174080)),l=r._(e.r(325633)),c=e.r(908927),d=e.r(987690),u=e.r(918556);e.r(233525);let m=e.r(65856),p=r._(e.r(1948)),h=e.r(818581),f={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function g(e,t,s,r,a,n,i){let o=e?.src;e&&e["data-loaded-src"]!==o&&(e["data-loaded-src"]=o,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&a(!0),s?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,a=!1;s.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>a,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{a=!0,t.stopPropagation()}})}r?.current&&r.current(e)}}))}function y(e){return i.use?{fetchPriority:e}:{fetchpriority:e}}"u"<typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let x=(0,i.forwardRef)(({src:e,srcSet:t,sizes:s,height:r,width:a,decoding:o,className:l,style:c,fetchPriority:d,placeholder:u,loading:m,unoptimized:p,fill:f,onLoadRef:x,onLoadingCompleteRef:b,setBlurComplete:v,setShowAltText:w,sizesInput:_,onLoad:j,onError:S,...N},k)=>{let E=(0,i.useCallback)(e=>{e&&(S&&(e.src=e.src),e.complete&&g(e,u,x,b,v,p,_))},[e,u,x,b,v,S,p,_]),T=(0,h.useMergedRef)(k,E);return(0,n.jsx)("img",{...N,...y(d),loading:m,width:a,height:r,decoding:o,"data-nimg":f?"fill":"1",className:l,style:c,sizes:s,srcSet:t,src:e,ref:T,onLoad:e=>{g(e.currentTarget,u,x,b,v,p,_)},onError:e=>{w(!0),"empty"!==u&&v(!0),S&&S(e)}})});function b({isAppRouter:e,imgAttributes:t}){let s={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...y(t.fetchPriority)};return e&&o.default.preload?(o.default.preload(t.src,s),null):(0,n.jsx)(l.default,{children:(0,n.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...s},"__nimg-"+t.src+t.srcSet+t.sizes)})}let v=(0,i.forwardRef)((e,t)=>{let s=(0,i.useContext)(m.RouterContext),r=(0,i.useContext)(u.ImageConfigContext),a=(0,i.useMemo)(()=>{let e=f||r||d.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),s=e.deviceSizes.sort((e,t)=>e-t),a=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:s,qualities:a,localPatterns:"u"<typeof window?r?.localPatterns:e.localPatterns}},[r]),{onLoad:o,onLoadingComplete:l}=e,h=(0,i.useRef)(o);(0,i.useEffect)(()=>{h.current=o},[o]);let g=(0,i.useRef)(l);(0,i.useEffect)(()=>{g.current=l},[l]);let[y,v]=(0,i.useState)(!1),[w,_]=(0,i.useState)(!1),{props:j,meta:S}=(0,c.getImgProps)(e,{defaultLoader:p.default,imgConf:a,blurComplete:y,showAltText:w});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{...j,unoptimized:S.unoptimized,placeholder:S.placeholder,fill:S.fill,onLoadRef:h,onLoadingCompleteRef:g,setBlurComplete:v,setShowAltText:_,sizesInput:e.sizes,ref:t}),S.preload?(0,n.jsx)(b,{isAppRouter:!s,imgAttributes:j}):null]})});("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},794909,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return d},getImageProps:function(){return c}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let n=e.r(563141),i=e.r(908927),o=e.r(605500),l=n._(e.r(1948));function c(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let d=o.Image},657688,(e,t,s)=>{t.exports=e.r(794909)},220486,91500,422233,318059,953860,254530,921687,964421,843153,761793,966988,152401,e=>{"use strict";let t,s,r,a;var n,i,o,l,c,d,u,m,p,h,f,g,y,x,b,v,w,_,j,S,N,k,E,T,C,P,A,O,I,R,M,L,$,U,D,q,B,z,H,F,W,J,G,V,K,X,Y,Q,Z,ee=e.i(843476),et=e.i(218129),es=e.i(132104),er=e.i(447593),ea=e.i(245094),en=e.i(210612),ei=e.i(955135);e.i(247167);var eo=e.i(931067),el=e.i(271645);let ec={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M531.3 574.4l.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-.7-29.9 8.3-33.4 21.4-6.6 24-.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7zm87.6-235.5c5.2 8.9 4.5 35.8.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4.8.1 1.5.7 2.2 2zm-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4zm155.6 65.5c.1.2.2.5-.4.9h-.2l-.2.3c-.8.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4zm191.4-388.2L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-pdf",theme:"outlined"};var ed=e.i(9583),eu=el.forwardRef(function(e,t){return el.createElement(ed.default,(0,eo.default)({},e,{ref:t,icon:ec}))});e.s(["FilePdfOutlined",0,eu],91500);var em=e.i(827252),ep=e.i(438957),eh=e.i(596239),ef=e.i(56456);let eg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"};var ey=el.forwardRef(function(e,t){return el.createElement(ed.default,(0,eo.default)({},e,{ref:t,icon:eg}))}),ex=e.i(983561),eb=e.i(602073),ev=e.i(313603);let ew={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1zM586 803L293.4 611.7l-18-11.7H146V424h129.4l17.9-11.7L586 221v582zm348-327H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zm-41.9 261.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344z"}}]},name:"sound",theme:"outlined"};var e_=el.forwardRef(function(e,t){return el.createElement(ed.default,(0,eo.default)({},e,{ref:t,icon:ew}))}),ej=e.i(232164),eS=e.i(366308),eN=e.i(771674),ek=e.i(304967),eE=e.i(599724),eT=e.i(779241),eC=e.i(629569),eP=e.i(994388),eA=e.i(464571),eO=e.i(311451),eI=e.i(212931),eR=e.i(282786),eM=e.i(199133),eL=e.i(482725),e$=e.i(592968),eU=e.i(898586),eD=e.i(515831),eq=e.i(918789),eB=e.i(650056),ez=e.i(219470);let eH="u">typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),eF=new Uint8Array(16),eW=[];for(let e=0;e<256;++e)eW.push((e+256).toString(16).slice(1));let eJ=function(e,s,r){if(eH&&!s&&!e)return eH();let a=(e=e||{}).random??e.rng?.()??function(){if(!t){if("u"<typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(eF)}();if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,s){if((r=r||0)<0||r+16>s.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)s[r+e]=a[e];return s}return function(e,t=0){return(eW[e[t+0]]+eW[e[t+1]]+eW[e[t+2]]+eW[e[t+3]]+"-"+eW[e[t+4]]+eW[e[t+5]]+"-"+eW[e[t+6]]+eW[e[t+7]]+"-"+eW[e[t+8]]+eW[e[t+9]]+"-"+eW[e[t+10]]+eW[e[t+11]]+eW[e[t+12]]+eW[e[t+13]]+eW[e[t+14]]+eW[e[t+15]]).toLowerCase()}(a)};e.s(["v4",0,eJ],422233);var eG=e.i(122550),eV=e.i(891547),eK=e.i(921511),eX=e.i(808613),eY=e.i(28651);function eQ(e){if(!e)return[];if(Array.isArray(e))return e.map(e=>eZ(e)).filter(e=>void 0!==e);let t=eZ(e);return void 0!==t?[t]:[]}function eZ(e,t){if(!e)return;let s=void 0!==t?t:e.default;if("object"===e.type){let t="object"!=typeof s||null===s||Array.isArray(s)?{}:{...s};return e.properties&&Object.entries(e.properties).forEach(([e,s])=>{t[e]=eZ(s,t[e])}),t}if("array"===e.type){if(Array.isArray(s)){let t=e.items;if(!t)return s;if(0===s.length){let e=eQ(t);return e.length?e:s}return Array.isArray(t)?s.map((e,s)=>eZ(t[s]??t[t.length-1],e)):s.map(e=>eZ(t,e))}return void 0!==s?s:eQ(e.items)}if(void 0!==s)return s;switch(e.type){case"integer":case"number":return 0;case"boolean":return!1;default:return""}}let e0=e=>{let t=eZ(e);if("object"===e.type||"array"===e.type){let s="array"===e.type?[]:{};return JSON.stringify(t??s,null,2)}return t},e1=(0,el.forwardRef)(({tool:e,className:t},s)=>{let[r]=eX.Form.useForm(),a=(0,el.useMemo)(()=>"string"==typeof e.inputSchema?{type:"object",properties:{input:{type:"string",description:"Input for this tool"}},required:["input"]}:e.inputSchema,[e.inputSchema]),n=(0,el.useMemo)(()=>a.properties?.params?.type==="object"&&a.properties.params.properties?{type:"object",properties:a.properties.params.properties,required:a.properties.params.required||[]}:a,[a]);return((0,el.useImperativeHandle)(s,()=>({getSubmitValues:async()=>{var e;let t;return e=await r.validateFields(),t={},Object.entries(e).forEach(([e,s])=>{let r=n.properties?.[e];if(r&&null!=s&&""!==s)switch(r.type){case"boolean":t[e]="true"===s||!0===s;break;case"number":case"integer":{let a=Number(s);t[e]=Number.isNaN(a)?s:"integer"===r.type?Math.trunc(a):a;break}case"object":case"array":try{let a="string"==typeof s?JSON.parse(s):s,n="object"===r.type&&null!==a&&"object"==typeof a&&!Array.isArray(a),i="array"===r.type&&Array.isArray(a);"object"===r.type&&n||"array"===r.type&&i?t[e]=a:t[e]=s}catch{t[e]=s}break;case"string":t[e]=String(s);break;default:t[e]=s}else null!=s&&""!==s&&(t[e]=s)}),a.properties?.params?.type==="object"&&a.properties.params.properties?{params:t}:t}})),el.default.useEffect(()=>{if(r.resetFields(),!n.properties)return;let e={};Object.entries(n.properties).forEach(([t,s])=>{e[t]=e0(s)}),r.setFieldsValue(e)},[r,n,e]),"string"==typeof e.inputSchema)?(0,ee.jsx)(eX.Form,{form:r,layout:"vertical",className:t,children:(0,ee.jsx)(eX.Form.Item,{label:(0,ee.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Input ",(0,ee.jsx)("span",{className:"text-red-500",children:"*"})]}),name:"input",rules:[{required:!0,message:"Please enter input for this tool"}],children:(0,ee.jsx)(eO.Input,{placeholder:"Enter input for this tool"})})}):n.properties?(0,ee.jsx)(eX.Form,{form:r,layout:"vertical",className:t,children:Object.entries(n.properties).map(([t,s])=>{let r=e0(s),a=`${e.name}-${t}`;return(0,ee.jsx)(eX.Form.Item,{label:(0,ee.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:[t," ",n.required?.includes(t)&&(0,ee.jsx)("span",{className:"text-red-500",children:"*"}),s.description&&(0,ee.jsx)(e$.Tooltip,{title:s.description,children:(0,ee.jsx)(em.InfoCircleOutlined,{className:"ml-2 text-gray-400 hover:text-gray-600"})})]}),name:t,initialValue:r,rules:[{required:n.required?.includes(t),message:`Please enter ${t}`},..."object"===s.type||"array"===s.type?[{validator:(e,r)=>{if((null==r||""===r)&&!n.required?.includes(t))return Promise.resolve();try{let e="string"==typeof r?JSON.parse(r):r,t="object"===s.type&&null!==e&&"object"==typeof e&&!Array.isArray(e),a="array"===s.type&&Array.isArray(e);if("object"===s.type&&t||"array"===s.type&&a)return Promise.resolve();return Promise.reject(Error("object"===s.type?"Please enter a JSON object":"Please enter a JSON array"))}catch{return Promise.reject(Error("Invalid JSON"))}}}]:[]],children:"string"===s.type&&s.enum?(0,ee.jsx)(eM.Select,{placeholder:`Select ${t}`,allowClear:!n.required?.includes(t),options:s.enum.map(e=>({value:e,label:e}))}):"string"!==s.type||s.enum?"number"===s.type||"integer"===s.type?(0,ee.jsx)(eY.InputNumber,{step:"integer"===s.type?1:void 0,placeholder:s.description||`Enter ${t}`,className:"w-full",style:{width:"100%"}}):"boolean"===s.type?(0,ee.jsx)(eM.Select,{placeholder:`Select ${t}`,allowClear:!n.required?.includes(t),options:[{value:!0,label:"True"},{value:!1,label:"False"}]}):"object"===s.type||"array"===s.type?(0,ee.jsx)(eO.Input.TextArea,{rows:"object"===s.type?4:3,placeholder:s.description||("object"===s.type?`Enter JSON object for ${t}`:`Enter JSON array for ${t}`),spellCheck:!1,className:"font-mono"}):(0,ee.jsx)(eO.Input,{placeholder:s.description||`Enter ${t}`,allowClear:!0}):(0,ee.jsx)(eO.Input,{placeholder:s.description||`Enter ${t}`,allowClear:!0})},a)})}):(0,ee.jsx)(eX.Form,{form:r,layout:"vertical",className:t,children:(0,ee.jsx)("div",{className:"py-4 text-center text-sm text-gray-500",children:"No parameters required for this tool."})})});e1.displayName="MCPToolArgumentsForm";var e2=e.i(727749),e4=e.i(764205);let e3=({onChange:e,value:t,className:s,accessToken:r})=>{let[a,n]=(0,el.useState)([]),[i,o]=(0,el.useState)(!1);return(0,el.useEffect)(()=>{(async()=>{if(r)try{let e=await (0,e4.tagListCall)(r);console.log("List tags response:",e),n(Object.values(e))}catch(e){console.error("Error fetching tags:",e)}finally{o(!1)}})()},[r]),(0,ee.jsx)(eM.Select,{mode:"tags",showSearch:!0,placeholder:"Select or create tags",onChange:e,value:t,loading:i,className:s,options:a.map(e=>({label:e.name,value:e.name,title:e.description||e.name})),optionFilterProp:"label",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"}})};e.s(["default",0,e3],318059);var e5=e.i(916940);let e6=e=>{if(!e)return;let t={};if(e.id&&(t.taskId=e.id),e.contextId&&(t.contextId=e.contextId),e.status&&(t.status={state:e.status.state,timestamp:e.status.timestamp},e.status.message?.parts)){let s=e.status.message.parts.filter(e=>"text"===e.kind&&e.text).map(e=>e.text).join(" ");s&&(t.status.message=s)}return e.metadata&&"object"==typeof e.metadata&&(t.metadata=e.metadata),Object.keys(t).length>0?t:void 0},e8=async(e,t,s,r,a,n,i,o,l,c)=>{let d=l||(0,e4.getProxyBaseUrl)(),u=d?`${d}/a2a/${e}/message/send`:`/a2a/${e}/message/send`,m={jsonrpc:"2.0",id:eJ(),method:"message/send",params:{message:{kind:"message",messageId:eJ().replace(/-/g,""),role:"user",parts:[{kind:"text",text:t}]}}};c&&c.length>0&&(m.params.metadata={guardrails:c});let p=performance.now();try{let t=await fetch(u,{method:"POST",headers:{[(0,e4.getGlobalLitellmHeaderName)()]:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(m),signal:a}),l=performance.now()-p;if(n&&n(l),!t.ok){let e=await t.json();throw Error(e.error?.message||e.detail||`HTTP ${t.status}`)}let c=await t.json(),d=performance.now()-p;if(i&&i(d),c.error)throw Error(c.error.message);let h=c.result;if(h){let t="",r=e6(h);if(r&&o&&o(r),h.artifacts&&Array.isArray(h.artifacts)){for(let e of h.artifacts)if(e.parts&&Array.isArray(e.parts))for(let s of e.parts)"text"===s.kind&&s.text&&(t+=s.text)}else if(h.parts&&Array.isArray(h.parts))for(let e of h.parts)"text"===e.kind&&e.text&&(t+=e.text);else if(h.status?.message?.parts)for(let e of h.status.message.parts)"text"===e.kind&&e.text&&(t+=e.text);t?s(t,`a2a_agent/${e}`):(console.warn("Could not extract text from A2A response, showing raw JSON:",h),s(JSON.stringify(h,null,2),`a2a_agent/${e}`))}}catch(e){if(a?.aborted)return void console.log("A2A request was cancelled");throw console.error("A2A send message error:",e),e}},e7=async(e,t,s,r,a,n,i,o,l)=>{let c,d=l||(0,e4.getProxyBaseUrl)(),u=d?`${d}/a2a/${e}`:`/a2a/${e}`,m=eJ(),p=eJ().replace(/-/g,""),h=performance.now(),f=!1,g="";try{let l=await fetch(u,{method:"POST",headers:{[(0,e4.getGlobalLitellmHeaderName)()]:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:m,method:"message/stream",params:{message:{kind:"message",messageId:p,role:"user",parts:[{kind:"text",text:t}]}}}),signal:a});if(!l.ok){let e=await l.json();throw Error(e.error?.message||e.detail||`HTTP ${l.status}`)}let d=l.body?.getReader();if(!d)throw Error("No response body");let y=new TextDecoder,x="",b=!1;for(;!b;){let t=await d.read();b=t.done;let r=t.value;if(b)break;let a=(x+=y.decode(r,{stream:!0})).split("\n");for(let t of(x=a.pop()||"",a))if(t.trim())try{let r=JSON.parse(t);if(!f){f=!0;let e=performance.now()-h;n&&n(e)}let a=r.result;if(a){let t=e6(a);t&&(c={...c,...t});let r=a.kind;if("artifact-update"===r&&a.artifact){let t=a.artifact;if(t.parts&&Array.isArray(t.parts))for(let r of t.parts)"text"===r.kind&&r.text&&(g+=r.text,s(g,`a2a_agent/${e}`))}else if(a.artifacts&&Array.isArray(a.artifacts)){for(let t of a.artifacts)if(t.parts&&Array.isArray(t.parts))for(let r of t.parts)"text"===r.kind&&r.text&&(g+=r.text,s(g,`a2a_agent/${e}`))}else if("status-update"===r);else if(a.parts&&Array.isArray(a.parts))for(let t of a.parts)"text"===t.kind&&t.text&&(g+=t.text,s(g,`a2a_agent/${e}`))}if(r.error){let e=r.error.message||"Unknown A2A error";throw Error(e)}}catch(e){if(e instanceof Error&&e.message&&!e.message.includes("JSON"))throw e;t.trim().length>0&&console.warn("Failed to parse A2A streaming chunk:",t,e)}}let v=performance.now()-h;i&&i(v),c&&o&&o(c)}catch(e){if(a?.aborted)return void console.log("A2A streaming request was cancelled");throw console.error("A2A stream message error:",e),e}};function e9(e,t,s,r,a){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!a)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,s):a?a.value=s:t.set(e,s),s}function te(e,t,s,r){if("a"===s&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?r:"a"===s?r.call(e):r?r.value:t.get(e)}e.s(["makeA2ASendMessageRequest",0,e8,"makeA2AStreamMessageRequest",0,e7],953860);let tt=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return tt=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),s=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^s()&15>>e/4).toString(16))};function ts(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}let tr=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){let t=Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return Error(JSON.stringify(e))}catch{}}return Error(e)};class ta extends Error{}class tn extends ta{constructor(e,t,s,r){super(`${tn.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.requestID=r?.get("request-id"),this.error=t}static makeMessage(e,t,s){let r=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){return e&&r?400===e?new tc(e,t,s,r):401===e?new td(e,t,s,r):403===e?new tu(e,t,s,r):404===e?new tm(e,t,s,r):409===e?new tp(e,t,s,r):422===e?new th(e,t,s,r):429===e?new tf(e,t,s,r):e>=500?new tg(e,t,s,r):new tn(e,t,s,r):new to({message:s,cause:tr(t)})}}class ti extends tn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class to extends tn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class tl extends to{constructor({message:e}={}){super({message:e??"Request timed out."})}}class tc extends tn{}class td extends tn{}class tu extends tn{}class tm extends tn{}class tp extends tn{}class th extends tn{}class tf extends tn{}class tg extends tn{}let ty=/^[a-z][a-z0-9+.-]*:/i;function tx(e){return"object"!=typeof e?{}:e??{}}let tb=e=>{try{return JSON.parse(e)}catch(e){return}},tv={off:0,error:200,warn:300,info:400,debug:500},tw=(e,t,s)=>{if(e){if(Object.prototype.hasOwnProperty.call(tv,e))return e;tk(s).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(tv))}`)}};function t_(){}function tj(e,t,s){return!t||tv[e]>tv[s]?t_:t[e].bind(t)}let tS={error:t_,warn:t_,info:t_,debug:t_},tN=new WeakMap;function tk(e){let t=e.logger,s=e.logLevel??"off";if(!t)return tS;let r=tN.get(t);if(r&&r[0]===s)return r[1];let a={error:tj("error",t,s),warn:tj("warn",t,s),info:tj("info",t,s),debug:tj("debug",t,s)};return tN.set(t,[s,a]),a}let tE=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"x-api-key"===e.toLowerCase()||"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e),tT="0.54.0",tC=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",tP=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";function tA(...e){let t=globalThis.ReadableStream;if(void 0===t)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function tO(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return tA({start(){},async pull(e){let{done:s,value:r}=await t.next();s?e.close():e.enqueue(r)},async cancel(){await t.return?.()}})}function tI(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function tR(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void await e[Symbol.asyncIterator]().return?.();let t=e.getReader(),s=t.cancel();t.releaseLock(),await s}let tM=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});function tL(e){let t;return(r??(r=(t=new globalThis.TextEncoder).encode.bind(t)))(e)}function t$(e){let t;return(a??(a=(t=new globalThis.TextDecoder).decode.bind(t)))(e)}class tU{constructor(){n.set(this,void 0),i.set(this,void 0),e9(this,n,new Uint8Array,"f"),e9(this,i,null,"f")}decode(e){let t;if(null==e)return[];let s=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?tL(e):e;e9(this,n,function(e){let t=0;for(let s of e)t+=s.length;let s=new Uint8Array(t),r=0;for(let t of e)s.set(t,r),r+=t.length;return s}([te(this,n,"f"),s]),"f");let r=[];for(;null!=(t=function(e,t){for(let s=t??0;s<e.length;s++){if(10===e[s])return{preceding:s,index:s+1,carriage:!1};if(13===e[s])return{preceding:s,index:s+1,carriage:!0}}return null}(te(this,n,"f"),te(this,i,"f")));){if(t.carriage&&null==te(this,i,"f")){e9(this,i,t.index,"f");continue}if(null!=te(this,i,"f")&&(t.index!==te(this,i,"f")+1||t.carriage)){r.push(t$(te(this,n,"f").subarray(0,te(this,i,"f")-1))),e9(this,n,te(this,n,"f").subarray(te(this,i,"f")),"f"),e9(this,i,null,"f");continue}let e=null!==te(this,i,"f")?t.preceding-1:t.preceding,s=t$(te(this,n,"f").subarray(0,e));r.push(s),e9(this,n,te(this,n,"f").subarray(t.index),"f"),e9(this,i,null,"f")}return r}flush(){return te(this,n,"f").length?this.decode("\n"):[]}}n=new WeakMap,i=new WeakMap,tU.NEWLINE_CHARS=new Set(["\n","\r"]),tU.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class tD{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let s=!1;async function*r(){if(s)throw new ta("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let r=!1;try{for await(let s of tq(e,t)){if("completion"===s.event)try{yield JSON.parse(s.data)}catch(e){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),e}if("message_start"===s.event||"message_delta"===s.event||"message_stop"===s.event||"content_block_start"===s.event||"content_block_delta"===s.event||"content_block_stop"===s.event)try{yield JSON.parse(s.data)}catch(e){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),e}if("ping"!==s.event&&"error"===s.event)throw new tn(void 0,tb(s.data)??s.data,void 0,e.headers)}r=!0}catch(e){if(ts(e))return;throw e}finally{r||t.abort()}}return new tD(r,t)}static fromReadableStream(e,t){let s=!1;async function*r(){let t=new tU;for await(let s of tI(e))for(let e of t.decode(s))yield e;for(let e of t.flush())yield e}return new tD(async function*(){if(s)throw new ta("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let e=!1;try{for await(let t of r())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(ts(e))return;throw e}finally{e||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],s=this.iterator(),r=r=>({next:()=>{if(0===r.length){let r=s.next();e.push(r),t.push(r)}return r.shift()}});return[new tD(()=>r(e),this.controller),new tD(()=>r(t),this.controller)]}toReadableStream(){let e,t=this;return tA({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:s,done:r}=await e.next();if(r)return t.close();let a=tL(JSON.stringify(s)+"\n");t.enqueue(a)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}async function*tq(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new ta("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new ta("Attempted to iterate over a response with no body")}let s=new tz,r=new tU;for await(let t of tB(tI(e.body)))for(let e of r.decode(t)){let t=s.decode(e);t&&(yield t)}for(let e of r.flush()){let t=s.decode(e);t&&(yield t)}}async function*tB(e){let t=new Uint8Array;for await(let s of e){let e;if(null==s)continue;let r=s instanceof ArrayBuffer?new Uint8Array(s):"string"==typeof s?tL(s):s,a=new Uint8Array(t.length+r.length);for(a.set(t),a.set(r,t.length),t=a;-1!==(e=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1]||13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return -1}(t));)yield t.slice(0,e),t=t.slice(e)}t.length>0&&(yield t)}class tz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){var t;let s;if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,a,n]=-1!==(s=(t=e).indexOf(":"))?[t.substring(0,s),":",t.substring(s+1)]:[t,"",""];return n.startsWith(" ")&&(n=n.substring(1)),"event"===r?this.event=n:"data"===r&&this.data.push(n),null}}async function tH(e,t){let{response:s,requestLogID:r,retryOfRequestLogID:a,startTime:n}=t,i=await (async()=>{if(t.options.stream)return(tk(e).debug("response",s.status,s.url,s.headers,s.body),t.options.__streamClass)?t.options.__streamClass.fromSSEResponse(s,t.controller):tD.fromSSEResponse(s,t.controller);if(204===s.status)return null;if(t.options.__binaryResponse)return s;let r=s.headers.get("content-type"),a=r?.split(";")[0]?.trim();return a?.includes("application/json")||a?.endsWith("+json")?tF(await s.json(),s):await s.text()})();return tk(e).debug(`[${r}] response parsed`,tE({retryOfRequestLogID:a,url:s.url,status:s.status,body:i,durationMs:Date.now()-n})),i}function tF(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("request-id"),enumerable:!1})}class tW extends Promise{constructor(e,t,s=tH){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=s,o.set(this,void 0),e9(this,o,e,"f")}_thenUnwrap(e){return new tW(te(this,o,"f"),this.responsePromise,async(t,s)=>tF(e(await this.parseResponse(t,s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(te(this,o,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}o=new WeakMap;class tJ{constructor(e,t,s,r){l.set(this,void 0),e9(this,l,e,"f"),this.options=r,this.response=t,this.body=s}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new ta("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await te(this,l,"f").requestAPIList(this.constructor,e)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(l=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class tG extends tW{constructor(e,t,s){super(e,t,async(e,t)=>new s(e,t.response,await tH(e,t),t.options))}async *[Symbol.asyncIterator](){for await(let e of(await this))yield e}}class tV extends tJ{constructor(e,t,s,r){super(e,t,s,r),this.data=s.data||[],this.has_more=s.has_more||!1,this.first_id=s.first_id||null,this.last_id=s.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let e=this.first_id;return e?{...this.options,query:{...tx(this.options.query),before_id:e}}:null}let e=this.last_id;return e?{...this.options,query:{...tx(this.options.query),after_id:e}}:null}}let tK=()=>{if("u"<typeof File){let{process:e}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof e?.versions?.node&&20>parseInt(e.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tX(e,t,s){return tK(),new File(e,t??"unknown_file",s)}function tY(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}let tQ=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],tZ=async(e,t)=>({...e,body:await t1(e.body,t)}),t0=new WeakMap,t1=async(e,t)=>{if(!await function(e){let t="function"==typeof e?e:e.fetch,s=t0.get(t);if(s)return s;let r=(async()=>{try{let e="Response"in t?t.Response:(await t("data:,")).constructor,s=new FormData;if(s.toString()===await new e(s).text())return!1;return!0}catch{return!0}})();return t0.set(t,r),r}(t))throw TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let s=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>t2(s,e,t))),s},t2=async(e,t,s)=>{if(void 0!==s){if(null==s)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof s||"number"==typeof s||"boolean"==typeof s)e.append(t,String(s));else if(s instanceof Response){let r={},a=s.headers.get("Content-Type");a&&(r={type:a}),e.append(t,tX([await s.blob()],tY(s),r))}else if(tQ(s))e.append(t,tX([await new Response(tO(s)).blob()],tY(s)));else{let r;if((r=s)instanceof Blob&&"name"in r)e.append(t,tX([s],tY(s),{type:s.type}));else if(Array.isArray(s))await Promise.all(s.map(s=>t2(e,t+"[]",s)));else if("object"==typeof s)await Promise.all(Object.entries(s).map(([s,r])=>t2(e,`${t}[${s}]`,r)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${s} instead`)}}},t4=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function t3(e,t,s){let r,a;if(tK(),e=await e,t||(t=tY(e)),null!=(r=e)&&"object"==typeof r&&"string"==typeof r.name&&"number"==typeof r.lastModified&&t4(r))return e instanceof File&&null==t&&null==s?e:tX([await e.arrayBuffer()],t??e.name,{type:e.type,lastModified:e.lastModified,...s});if(null!=(a=e)&&"object"==typeof a&&"string"==typeof a.url&&"function"==typeof a.blob){let r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),tX(await t5(r),t,s)}let n=await t5(e);if(!s?.type){let e=n.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(s={...s,type:e})}return tX(n,t,s)}async function t5(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(t4(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else if(tQ(e))for await(let s of e)t.push(...await t5(s));else{let t=e?.constructor?.name;throw Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${function(e){if("object"!=typeof e||null===e)return"";let t=Object.getOwnPropertyNames(e);return`; props: [${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`)}return t}class t6{constructor(e){this._client=e}}let t8=Symbol.for("brand.privateNullableHeaders"),t7=Array.isArray,t9=e=>{let t=new Headers,s=new Set;for(let r of e){let e=new Set;for(let[a,n]of function*(e){let t;if(!e)return;if(t8 in e){let{values:t,nulls:s}=e;for(let e of(yield*t.entries(),s))yield[e,null];return}let s=!1;for(let r of(e instanceof Headers?t=e.entries():t7(e)?t=e:(s=!0,t=Object.entries(e??{})),t)){let e=r[0];if("string"!=typeof e)throw TypeError("expected header name to be a string");let t=t7(r[1])?r[1]:[r[1]],a=!1;for(let r of t)void 0!==r&&(s&&!a&&(a=!0,yield[e,null]),yield[e,r])}}(r)){let r=a.toLowerCase();e.has(r)||(t.delete(a),e.add(r)),null===n?(t.delete(a),s.add(r)):(t.append(a,n),s.delete(r))}}return{[t8]:!0,values:t,nulls:s}};function se(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}let st=((e=se)=>function(t,...s){let r;if(1===t.length)return t[0];let a=!1,n=t.reduce((t,r,n)=>(/[?#]/.test(r)&&(a=!0),t+r+(n===s.length?"":(a?encodeURIComponent:e)(String(s[n])))),""),i=n.split(/[?#]/,1)[0],o=[],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(r=l.exec(i));)o.push({start:r.index,length:r[0].length});if(o.length>0){let e=0,t=o.reduce((t,s)=>{let r=" ".repeat(s.start-e),a="^".repeat(s.length);return e=s.start+s.length,t+r+a},"");throw new ta(`Path parameters result in path with invalid segments:
${n}
${t}`)}return n})(se);class ss extends t6{list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/files",tV,{query:r,...t,headers:t9([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},t?.headers])})}delete(e,t={},s){let{betas:r}=t??{};return this._client.delete(st`/v1/files/${e}`,{...s,headers:t9([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},s?.headers])})}download(e,t={},s){let{betas:r}=t??{};return this._client.get(st`/v1/files/${e}/content`,{...s,headers:t9([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},s?.headers]),__binaryResponse:!0})}retrieveMetadata(e,t={},s){let{betas:r}=t??{};return this._client.get(st`/v1/files/${e}`,{...s,headers:t9([{"anthropic-beta":[...r??[],"files-api-2025-04-14"].toString()},s?.headers])})}upload(e,t){let{betas:s,...r}=e;return this._client.post("/v1/files",tZ({body:r,...t,headers:t9([{"anthropic-beta":[...s??[],"files-api-2025-04-14"].toString()},t?.headers])},this._client))}}class sr extends t6{retrieve(e,t={},s){let{betas:r}=t??{};return this._client.get(st`/v1/models/${e}?beta=true`,{...s,headers:t9([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},s?.headers])})}list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/models?beta=true",tV,{query:r,...t,headers:t9([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers])})}}class sa{constructor(e,t){this.iterator=e,this.controller=t}async *decoder(){let e=new tU;for await(let t of this.iterator)for(let s of e.decode(t))yield JSON.parse(s);for(let t of e.flush())yield JSON.parse(t)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new ta("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new ta("Attempted to iterate over a response with no body")}return new sa(tI(e.body),t)}}class sn extends t6{create(e,t){let{betas:s,...r}=e;return this._client.post("/v1/messages/batches?beta=true",{body:r,...t,headers:t9([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},t?.headers])})}retrieve(e,t={},s){let{betas:r}=t??{};return this._client.get(st`/v1/messages/batches/${e}?beta=true`,{...s,headers:t9([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},s?.headers])})}list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",tV,{query:r,...t,headers:t9([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString()},t?.headers])})}delete(e,t={},s){let{betas:r}=t??{};return this._client.delete(st`/v1/messages/batches/${e}?beta=true`,{...s,headers:t9([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},s?.headers])})}cancel(e,t={},s){let{betas:r}=t??{};return this._client.post(st`/v1/messages/batches/${e}/cancel?beta=true`,{...s,headers:t9([{"anthropic-beta":[...r??[],"message-batches-2024-09-24"].toString()},s?.headers])})}async results(e,t={},s){let r=await this.retrieve(e);if(!r.results_url)throw new ta(`No batch \`results_url\`; Has it finished processing? ${r.processing_status} - ${r.id}`);let{betas:a}=t??{};return this._client.get(r.results_url,{...s,headers:t9([{"anthropic-beta":[...a??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},s?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>sa.fromResponse(t.response,t.controller))}}let si=e=>{if(0===e.length)return e;let t=e[e.length-1];switch(t.type){case"separator":return si(e=e.slice(0,e.length-1));case"number":let s=t.value[t.value.length-1];if("."===s||"-"===s)return si(e=e.slice(0,e.length-1));case"string":let r=e[e.length-2];if(r?.type==="delimiter"||r?.type==="brace"&&"{"===r.value)return si(e=e.slice(0,e.length-1));break;case"delimiter":return si(e=e.slice(0,e.length-1))}return e},so=e=>{var t;let s,r;return JSON.parse((t=si((e=>{let t=0,s=[];for(;t<e.length;){let r=e[t];if("\\"===r){t++;continue}if("{"===r){s.push({type:"brace",value:"{"}),t++;continue}if("}"===r){s.push({type:"brace",value:"}"}),t++;continue}if("["===r){s.push({type:"paren",value:"["}),t++;continue}if("]"===r){s.push({type:"paren",value:"]"}),t++;continue}if(":"===r){s.push({type:"separator",value:":"}),t++;continue}if(","===r){s.push({type:"delimiter",value:","}),t++;continue}if('"'===r){let a="",n=!1;for(r=e[++t];'"'!==r;){if(t===e.length){n=!0;break}if("\\"===r){if(++t===e.length){n=!0;break}a+=r+e[t],r=e[++t]}else a+=r,r=e[++t]}r=e[++t],n||s.push({type:"string",value:a});continue}let a=/\s/;if(r&&a.test(r)){t++;continue}let n=/[0-9]/;if(r&&n.test(r)||"-"===r||"."===r){let a="";for("-"===r&&(a+=r,r=e[++t]);r&&n.test(r)||"."===r;)a+=r,r=e[++t];s.push({type:"number",value:a});continue}let i=/[a-z]/i;if(r&&i.test(r)){let a="";for(;r&&i.test(r)&&t!==e.length;)a+=r,r=e[++t];"true"==a||"false"==a||"null"===a?s.push({type:"name",value:a}):t++;continue}t++}return s})(e)),s=[],t.map(e=>{"brace"===e.type&&("{"===e.value?s.push("}"):s.splice(s.lastIndexOf("}"),1)),"paren"===e.type&&("["===e.value?s.push("]"):s.splice(s.lastIndexOf("]"),1))}),s.length>0&&s.reverse().map(e=>{"}"===e?t.push({type:"brace",value:"}"}):"]"===e&&t.push({type:"paren",value:"]"})}),r="",t.map(e=>{"string"===e.type?r+='"'+e.value+'"':r+=e.value}),r))},sl="__json_buf";function sc(e){return"tool_use"===e.type||"server_tool_use"===e.type||"mcp_tool_use"===e.type}class sd{constructor(){c.add(this),this.messages=[],this.receivedMessages=[],d.set(this,void 0),this.controller=new AbortController,u.set(this,void 0),m.set(this,()=>{}),p.set(this,()=>{}),h.set(this,void 0),f.set(this,()=>{}),g.set(this,()=>{}),y.set(this,{}),x.set(this,!1),b.set(this,!1),v.set(this,!1),w.set(this,!1),_.set(this,void 0),j.set(this,void 0),k.set(this,e=>{if(e9(this,b,!0,"f"),ts(e)&&(e=new ti),e instanceof ti)return e9(this,v,!0,"f"),this._emit("abort",e);if(e instanceof ta)return this._emit("error",e);if(e instanceof Error){let t=new ta(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new ta(String(e)))}),e9(this,u,new Promise((e,t)=>{e9(this,m,e,"f"),e9(this,p,t,"f")}),"f"),e9(this,h,new Promise((e,t)=>{e9(this,f,e,"f"),e9(this,g,t,"f")}),"f"),te(this,u,"f").catch(()=>{}),te(this,h,"f").catch(()=>{})}get response(){return te(this,_,"f")}get request_id(){return te(this,j,"f")}async withResponse(){let e=await te(this,u,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new sd;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,s){let r=new sd;for(let e of t.messages)r._addMessageParam(e);return r._run(()=>r._createMessage(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},te(this,k,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,s){let r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),te(this,c,"m",E).call(this);let{response:a,data:n}=await e.create({...t,stream:!0},{...s,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(a),n))te(this,c,"m",T).call(this,e);if(n.controller.signal?.aborted)throw new ti;te(this,c,"m",C).call(this)}_connected(e){this.ended||(e9(this,_,e,"f"),e9(this,j,e?.headers.get("request-id"),"f"),te(this,m,"f").call(this,e),this._emit("connect"))}get ended(){return te(this,x,"f")}get errored(){return te(this,b,"f")}get aborted(){return te(this,v,"f")}abort(){this.controller.abort()}on(e,t){return(te(this,y,"f")[e]||(te(this,y,"f")[e]=[])).push({listener:t}),this}off(e,t){let s=te(this,y,"f")[e];if(!s)return this;let r=s.findIndex(e=>e.listener===t);return r>=0&&s.splice(r,1),this}once(e,t){return(te(this,y,"f")[e]||(te(this,y,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{e9(this,w,!0,"f"),"error"!==e&&this.once("error",s),this.once(e,t)})}async done(){e9(this,w,!0,"f"),await te(this,h,"f")}get currentMessage(){return te(this,d,"f")}async finalMessage(){return await this.done(),te(this,c,"m",S).call(this)}async finalText(){return await this.done(),te(this,c,"m",N).call(this)}_emit(e,...t){if(te(this,x,"f"))return;"end"===e&&(e9(this,x,!0,"f"),te(this,f,"f").call(this));let s=te(this,y,"f")[e];if(s&&(te(this,y,"f")[e]=s.filter(e=>!e.once),s.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];te(this,w,"f")||s?.length||Promise.reject(e),te(this,p,"f").call(this,e),te(this,g,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];te(this,w,"f")||s?.length||Promise.reject(e),te(this,p,"f").call(this,e),te(this,g,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",te(this,c,"m",S).call(this))}async _fromReadableStream(e,t){let s=t?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),te(this,c,"m",E).call(this),this._connected(null);let r=tD.fromReadableStream(e,this.controller);for await(let e of r)te(this,c,"m",T).call(this,e);if(r.controller.signal?.aborted)throw new ti;te(this,c,"m",C).call(this)}[(d=new WeakMap,u=new WeakMap,m=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,g=new WeakMap,y=new WeakMap,x=new WeakMap,b=new WeakMap,v=new WeakMap,w=new WeakMap,_=new WeakMap,j=new WeakMap,k=new WeakMap,c=new WeakSet,S=function(){if(0===this.receivedMessages.length)throw new ta("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},N=function(){if(0===this.receivedMessages.length)throw new ta("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new ta("stream ended without producing a content block with type=text");return e.join(" ")},E=function(){this.ended||e9(this,d,void 0,"f")},T=function(e){if(this.ended)return;let t=te(this,c,"m",P).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let s=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===s.type&&this._emit("text",e.delta.text,s.text||"");break;case"citations_delta":"text"===s.type&&this._emit("citation",e.delta.citation,s.citations??[]);break;case"input_json_delta":sc(s)&&s.input&&this._emit("inputJson",e.delta.partial_json,s.input);break;case"thinking_delta":"thinking"===s.type&&this._emit("thinking",e.delta.thinking,s.thinking);break;case"signature_delta":"thinking"===s.type&&this._emit("signature",s.signature);break;default:su(e.delta)}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":e9(this,d,t,"f")}},C=function(){if(this.ended)throw new ta("stream has ended, this shouldn't happen");let e=te(this,d,"f");if(!e)throw new ta("request ended without sending any chunks");return e9(this,d,void 0,"f"),e},P=function(e){let t=te(this,d,"f");if("message_start"===e.type){if(t)throw new ta(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new ta(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.container=e.delta.container,t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{let s=t.content.at(e.index);switch(e.delta.type){case"text_delta":s?.type==="text"&&(s.text+=e.delta.text);break;case"citations_delta":s?.type==="text"&&(s.citations??(s.citations=[]),s.citations.push(e.delta.citation));break;case"input_json_delta":if(s&&sc(s)){let t=s[sl]||"";if(Object.defineProperty(s,sl,{value:t+=e.delta.partial_json,enumerable:!1,writable:!0}),t)try{s.input=so(t)}catch(s){let e=new ta(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${s}. JSON: ${t}`);te(this,k,"f").call(this,e)}}break;case"thinking_delta":s?.type==="thinking"&&(s.thinking+=e.delta.thinking);break;case"signature_delta":s?.type==="thinking"&&(s.signature=e.delta.signature);break;default:su(e.delta)}return t}}},Symbol.asyncIterator)](){let e=[],t=[],s=!1;return this.on("streamEvent",s=>{let r=t.shift();r?r.resolve(s):e.push(s)}),this.on("end",()=>{for(let e of(s=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),this.on("error",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((e,s)=>t.push({resolve:e,reject:s})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new tD(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function su(e){}let sm={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192},sp={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};class sh extends t6{constructor(){super(...arguments),this.batches=new sn(this._client)}create(e,t){let{betas:s,...r}=e;r.model in sp&&console.warn(`The model '${r.model}' is deprecated and will reach end-of-life on ${sp[r.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let a=this._client._options.timeout;if(!r.stream&&null==a){let e=sm[r.model]??void 0;a=this._client.calculateNonstreamingTimeout(r.max_tokens,e)}return this._client.post("/v1/messages?beta=true",{body:r,timeout:a??6e5,...t,headers:t9([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}stream(e,t){return sd.createMessage(this,e,t)}countTokens(e,t){let{betas:s,...r}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:r,...t,headers:t9([{"anthropic-beta":[...s??[],"token-counting-2024-11-01"].toString()},t?.headers])})}}sh.Batches=sn;class sf extends t6{constructor(){super(...arguments),this.models=new sr(this._client),this.messages=new sh(this._client),this.files=new ss(this._client)}}sf.Models=sr,sf.Messages=sh,sf.Files=ss;class sg extends t6{create(e,t){let{betas:s,...r}=e;return this._client.post("/v1/complete",{body:r,timeout:this._client._options.timeout??6e5,...t,headers:t9([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers]),stream:e.stream??!1})}}let sy="__json_buf";function sx(e){return"tool_use"===e.type||"server_tool_use"===e.type}class sb{constructor(){A.add(this),this.messages=[],this.receivedMessages=[],O.set(this,void 0),this.controller=new AbortController,I.set(this,void 0),R.set(this,()=>{}),M.set(this,()=>{}),L.set(this,void 0),$.set(this,()=>{}),U.set(this,()=>{}),D.set(this,{}),q.set(this,!1),B.set(this,!1),z.set(this,!1),H.set(this,!1),F.set(this,void 0),W.set(this,void 0),V.set(this,e=>{if(e9(this,B,!0,"f"),ts(e)&&(e=new ti),e instanceof ti)return e9(this,z,!0,"f"),this._emit("abort",e);if(e instanceof ta)return this._emit("error",e);if(e instanceof Error){let t=new ta(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new ta(String(e)))}),e9(this,I,new Promise((e,t)=>{e9(this,R,e,"f"),e9(this,M,t,"f")}),"f"),e9(this,L,new Promise((e,t)=>{e9(this,$,e,"f"),e9(this,U,t,"f")}),"f"),te(this,I,"f").catch(()=>{}),te(this,L,"f").catch(()=>{})}get response(){return te(this,F,"f")}get request_id(){return te(this,W,"f")}async withResponse(){let e=await te(this,I,"f");if(!e)throw Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let t=new sb;return t._run(()=>t._fromReadableStream(e)),t}static createMessage(e,t,s){let r=new sb;for(let e of t.messages)r._addMessageParam(e);return r._run(()=>r._createMessage(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),r}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},te(this,V,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,t=!0){this.receivedMessages.push(e),t&&this._emit("message",e)}async _createMessage(e,t,s){let r=s?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),te(this,A,"m",K).call(this);let{response:a,data:n}=await e.create({...t,stream:!0},{...s,signal:this.controller.signal}).withResponse();for await(let e of(this._connected(a),n))te(this,A,"m",X).call(this,e);if(n.controller.signal?.aborted)throw new ti;te(this,A,"m",Y).call(this)}_connected(e){this.ended||(e9(this,F,e,"f"),e9(this,W,e?.headers.get("request-id"),"f"),te(this,R,"f").call(this,e),this._emit("connect"))}get ended(){return te(this,q,"f")}get errored(){return te(this,B,"f")}get aborted(){return te(this,z,"f")}abort(){this.controller.abort()}on(e,t){return(te(this,D,"f")[e]||(te(this,D,"f")[e]=[])).push({listener:t}),this}off(e,t){let s=te(this,D,"f")[e];if(!s)return this;let r=s.findIndex(e=>e.listener===t);return r>=0&&s.splice(r,1),this}once(e,t){return(te(this,D,"f")[e]||(te(this,D,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{e9(this,H,!0,"f"),"error"!==e&&this.once("error",s),this.once(e,t)})}async done(){e9(this,H,!0,"f"),await te(this,L,"f")}get currentMessage(){return te(this,O,"f")}async finalMessage(){return await this.done(),te(this,A,"m",J).call(this)}async finalText(){return await this.done(),te(this,A,"m",G).call(this)}_emit(e,...t){if(te(this,q,"f"))return;"end"===e&&(e9(this,q,!0,"f"),te(this,$,"f").call(this));let s=te(this,D,"f")[e];if(s&&(te(this,D,"f")[e]=s.filter(e=>!e.once),s.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];te(this,H,"f")||s?.length||Promise.reject(e),te(this,M,"f").call(this,e),te(this,U,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];te(this,H,"f")||s?.length||Promise.reject(e),te(this,M,"f").call(this,e),te(this,U,"f").call(this,e),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",te(this,A,"m",J).call(this))}async _fromReadableStream(e,t){let s=t?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),te(this,A,"m",K).call(this),this._connected(null);let r=tD.fromReadableStream(e,this.controller);for await(let e of r)te(this,A,"m",X).call(this,e);if(r.controller.signal?.aborted)throw new ti;te(this,A,"m",Y).call(this)}[(O=new WeakMap,I=new WeakMap,R=new WeakMap,M=new WeakMap,L=new WeakMap,$=new WeakMap,U=new WeakMap,D=new WeakMap,q=new WeakMap,B=new WeakMap,z=new WeakMap,H=new WeakMap,F=new WeakMap,W=new WeakMap,V=new WeakMap,A=new WeakSet,J=function(){if(0===this.receivedMessages.length)throw new ta("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},G=function(){if(0===this.receivedMessages.length)throw new ta("stream ended without producing a Message with role=assistant");let e=this.receivedMessages.at(-1).content.filter(e=>"text"===e.type).map(e=>e.text);if(0===e.length)throw new ta("stream ended without producing a content block with type=text");return e.join(" ")},K=function(){this.ended||e9(this,O,void 0,"f")},X=function(e){if(this.ended)return;let t=te(this,A,"m",Q).call(this,e);switch(this._emit("streamEvent",e,t),e.type){case"content_block_delta":{let s=t.content.at(-1);switch(e.delta.type){case"text_delta":"text"===s.type&&this._emit("text",e.delta.text,s.text||"");break;case"citations_delta":"text"===s.type&&this._emit("citation",e.delta.citation,s.citations??[]);break;case"input_json_delta":sx(s)&&s.input&&this._emit("inputJson",e.delta.partial_json,s.input);break;case"thinking_delta":"thinking"===s.type&&this._emit("thinking",e.delta.thinking,s.thinking);break;case"signature_delta":"thinking"===s.type&&this._emit("signature",s.signature);break;default:sv(e.delta)}break}case"message_stop":this._addMessageParam(t),this._addMessage(t,!0);break;case"content_block_stop":this._emit("contentBlock",t.content.at(-1));break;case"message_start":e9(this,O,t,"f")}},Y=function(){if(this.ended)throw new ta("stream has ended, this shouldn't happen");let e=te(this,O,"f");if(!e)throw new ta("request ended without sending any chunks");return e9(this,O,void 0,"f"),e},Q=function(e){let t=te(this,O,"f");if("message_start"===e.type){if(t)throw new ta(`Unexpected event order, got ${e.type} before receiving "message_stop"`);return e.message}if(!t)throw new ta(`Unexpected event order, got ${e.type} before "message_start"`);switch(e.type){case"message_stop":case"content_block_stop":return t;case"message_delta":return t.stop_reason=e.delta.stop_reason,t.stop_sequence=e.delta.stop_sequence,t.usage.output_tokens=e.usage.output_tokens,null!=e.usage.input_tokens&&(t.usage.input_tokens=e.usage.input_tokens),null!=e.usage.cache_creation_input_tokens&&(t.usage.cache_creation_input_tokens=e.usage.cache_creation_input_tokens),null!=e.usage.cache_read_input_tokens&&(t.usage.cache_read_input_tokens=e.usage.cache_read_input_tokens),null!=e.usage.server_tool_use&&(t.usage.server_tool_use=e.usage.server_tool_use),t;case"content_block_start":return t.content.push(e.content_block),t;case"content_block_delta":{let s=t.content.at(e.index);switch(e.delta.type){case"text_delta":s?.type==="text"&&(s.text+=e.delta.text);break;case"citations_delta":s?.type==="text"&&(s.citations??(s.citations=[]),s.citations.push(e.delta.citation));break;case"input_json_delta":if(s&&sx(s)){let t=s[sy]||"";Object.defineProperty(s,sy,{value:t+=e.delta.partial_json,enumerable:!1,writable:!0}),t&&(s.input=so(t))}break;case"thinking_delta":s?.type==="thinking"&&(s.thinking+=e.delta.thinking);break;case"signature_delta":s?.type==="thinking"&&(s.signature=e.delta.signature);break;default:sv(e.delta)}return t}}},Symbol.asyncIterator)](){let e=[],t=[],s=!1;return this.on("streamEvent",s=>{let r=t.shift();r?r.resolve(s):e.push(s)}),this.on("end",()=>{for(let e of(s=!0,t))e.resolve(void 0);t.length=0}),this.on("abort",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),this.on("error",e=>{for(let r of(s=!0,t))r.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise((e,s)=>t.push({resolve:e,reject:s})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new tD(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function sv(e){}class sw extends t6{create(e,t){return this._client.post("/v1/messages/batches",{body:e,...t})}retrieve(e,t){return this._client.get(st`/v1/messages/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/v1/messages/batches",tV,{query:e,...t})}delete(e,t){return this._client.delete(st`/v1/messages/batches/${e}`,t)}cancel(e,t){return this._client.post(st`/v1/messages/batches/${e}/cancel`,t)}async results(e,t){let s=await this.retrieve(e);if(!s.results_url)throw new ta(`No batch \`results_url\`; Has it finished processing? ${s.processing_status} - ${s.id}`);return this._client.get(s.results_url,{...t,headers:t9([{Accept:"application/binary"},t?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((e,t)=>sa.fromResponse(t.response,t.controller))}}class s_ extends t6{constructor(){super(...arguments),this.batches=new sw(this._client)}create(e,t){e.model in sj&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${sj[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!e.stream&&null==s){let t=sm[e.model]??void 0;s=this._client.calculateNonstreamingTimeout(e.max_tokens,t)}return this._client.post("/v1/messages",{body:e,timeout:s??6e5,...t,stream:e.stream??!1})}stream(e,t){return sb.createMessage(this,e,t)}countTokens(e,t){return this._client.post("/v1/messages/count_tokens",{body:e,...t})}}let sj={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025"};s_.Batches=sw;class sS extends t6{retrieve(e,t={},s){let{betas:r}=t??{};return this._client.get(st`/v1/models/${e}`,{...s,headers:t9([{...r?.toString()!=null?{"anthropic-beta":r?.toString()}:void 0},s?.headers])})}list(e={},t){let{betas:s,...r}=e??{};return this._client.getAPIList("/v1/models",tV,{query:r,...t,headers:t9([{...s?.toString()!=null?{"anthropic-beta":s?.toString()}:void 0},t?.headers])})}}let sN=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;class sk{constructor({baseURL:e=sN("ANTHROPIC_BASE_URL"),apiKey:t=sN("ANTHROPIC_API_KEY")??null,authToken:s=sN("ANTHROPIC_AUTH_TOKEN")??null,...r}={}){Z.set(this,void 0);const a={apiKey:t,authToken:s,...r,baseURL:e||"https://api.anthropic.com"};if(!a.dangerouslyAllowBrowser&&"u">typeof window&&void 0!==window.document&&"u">typeof navigator)throw new ta("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");this.baseURL=a.baseURL,this.timeout=a.timeout??sE.DEFAULT_TIMEOUT,this.logger=a.logger??console;const n="warn";this.logLevel=n,this.logLevel=tw(a.logLevel,"ClientOptions.logLevel",this)??tw(sN("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??n,this.fetchOptions=a.fetchOptions,this.maxRetries=a.maxRetries??2,this.fetch=a.fetch??function(){if("u">typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),e9(this,Z,tM,"f"),this._options=a,this.apiKey=t,this.authToken=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(this.apiKey&&e.get("x-api-key")||t.has("x-api-key")||this.authToken&&e.get("authorization"))&&!t.has("authorization"))throw Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}authHeaders(e){return t9([this.apiKeyAuth(e),this.bearerAuth(e)])}apiKeyAuth(e){if(null!=this.apiKey)return t9([{"X-Api-Key":this.apiKey}])}bearerAuth(e){if(null!=this.authToken)return t9([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new ta(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${tT}`}defaultIdempotencyKey(){return`stainless-node-retry-${tt()}`}makeStatusError(e,t,s,r){return tn.generate(e,t,s,r)}buildURL(e,t){let s=new URL(ty.test(e)?e:this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return!function(e){if(!e)return!0;for(let t in e)return!1;return!0}(r)&&(t={...r,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(s.search=this.stringifyQuery(t)),s.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new ta("Streaming is strongly recommended for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 6e5}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(s=>({method:e,path:t,...s})))}request(e,t=null){return new tW(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){let r=await e,a=r.maxRetries??this.maxRetries;null==t&&(t=a),await this.prepareOptions(r);let{req:n,url:i,timeout:o}=this.buildRequest(r,{retryCount:a-t});await this.prepareRequest(n,{url:i,options:r});let l="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),c=void 0===s?"":`, retryOf: ${s}`,d=Date.now();if(tk(this).debug(`[${l}] sending request`,tE({retryOfRequestLogID:s,method:r.method,url:i,options:r,headers:n.headers})),r.signal?.aborted)throw new ti;let u=new AbortController,m=await this.fetchWithTimeout(i,n,o,u).catch(tr),p=Date.now();if(m instanceof Error){let e=`retrying, ${t} attempts remaining`;if(r.signal?.aborted)throw new ti;let a=ts(m)||/timed? ?out/i.test(String(m)+("cause"in m?String(m.cause):""));if(t)return tk(this).info(`[${l}] connection ${a?"timed out":"failed"} - ${e}`),tk(this).debug(`[${l}] connection ${a?"timed out":"failed"} (${e})`,tE({retryOfRequestLogID:s,url:i,durationMs:p-d,message:m.message})),this.retryRequest(r,t,s??l);if(tk(this).info(`[${l}] connection ${a?"timed out":"failed"} - error; no more retries left`),tk(this).debug(`[${l}] connection ${a?"timed out":"failed"} (error; no more retries left)`,tE({retryOfRequestLogID:s,url:i,durationMs:p-d,message:m.message})),a)throw new tl;throw new to({cause:m})}let h=[...m.headers.entries()].filter(([e])=>"request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join(""),f=`[${l}${c}${h}] ${n.method} ${i} ${m.ok?"succeeded":"failed"} with status ${m.status} in ${p-d}ms`;if(!m.ok){let e=this.shouldRetry(m);if(t&&e){let e=`retrying, ${t} attempts remaining`;return await tR(m.body),tk(this).info(`${f} - ${e}`),tk(this).debug(`[${l}] response error (${e})`,tE({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,durationMs:p-d})),this.retryRequest(r,t,s??l,m.headers)}let a=e?"error; no more retries left":"error; not retryable";tk(this).info(`${f} - ${a}`);let n=await m.text().catch(e=>tr(e).message),i=tb(n),o=i?void 0:n;throw tk(this).debug(`[${l}] response error (${a})`,tE({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,message:o,durationMs:Date.now()-d})),this.makeStatusError(m.status,i,o,m.headers)}return tk(this).info(f),tk(this).debug(`[${l}] response start`,tE({retryOfRequestLogID:s,url:m.url,status:m.status,headers:m.headers,durationMs:p-d})),{response:m,options:r,controller:u,requestLogID:l,retryOfRequestLogID:s,startTime:d}}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}requestAPIList(e,t){return new tG(this,this.makeRequest(t,null,void 0),e)}async fetchWithTimeout(e,t,s,r){let{signal:a,method:n,...i}=t||{};a&&a.addEventListener("abort",()=>r.abort());let o=setTimeout(()=>r.abort(),s),l=globalThis.ReadableStream&&i.body instanceof globalThis.ReadableStream||"object"==typeof i.body&&null!==i.body&&Symbol.asyncIterator in i.body,c={signal:r.signal,...l?{duplex:"half"}:{},method:"GET",...i};n&&(c.method=n.toUpperCase());try{return await this.fetch.call(void 0,e,c)}finally{clearTimeout(o)}}shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||!!(e.status>=500))}async retryRequest(e,t,s,r){let a,n,i=r?.get("retry-after-ms");if(i){let e=parseFloat(i);Number.isNaN(e)||(a=e)}let o=r?.get("retry-after");if(o&&!a){let e=parseFloat(o);a=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(a&&0<=a&&a<6e4)){let s=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(t,s)}return await (n=a,new Promise(e=>setTimeout(e,n))),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}calculateNonstreamingTimeout(e,t){if(36e5*e/128e3>6e5||null!=t&&e>t)throw new ta("Streaming is strongly recommended for operations that may token longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}buildRequest(e,{retryCount:t=0}={}){let s={...e},{method:r,path:a,query:n}=s,i=this.buildURL(a,n);"timeout"in s&&((e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new ta(`${e} must be an integer`);if(t<0)throw new ta(`${e} must be a positive integer`)})("timeout",s.timeout),s.timeout=s.timeout??this.timeout;let{bodyHeaders:o,body:l}=this.buildBody({options:s}),c=this.buildHeaders({options:e,method:r,bodyHeaders:o,retryCount:t});return{req:{method:r,headers:c,...s.signal&&{signal:s.signal},...globalThis.ReadableStream&&l instanceof globalThis.ReadableStream&&{duplex:"half"},...l&&{body:l},...this.fetchOptions??{},...s.fetchOptions??{}},url:i,timeout:s.timeout}}buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:a}){let n={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),n[this.idempotencyHeader]=e.idempotencyKey);let i=t9([n,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...s??(s=(()=>{let e="u">typeof Deno&&null!=Deno.build?"deno":"u">typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tT,"X-Stainless-OS":tP(Deno.build.os),"X-Stainless-Arch":tC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("u">typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tT,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tT,"X-Stainless-OS":tP(globalThis.process.platform??"unknown"),"X-Stainless-Arch":tC(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let t=function(){if("u"<typeof navigator||!navigator)return null;for(let{key:e,pattern:t}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let s=t.exec(navigator.userAgent);if(s){let t=s[1]||0,r=s[2]||0,a=s[3]||0;return{browser:e,version:`${t}.${r}.${a}`}}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tT,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tT,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let s=t9([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&s.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:tO(e)}:te(this,Z,"f").call(this,{body:e,headers:s})}}Z=new WeakMap,sk.Anthropic=sk,sk.HUMAN_PROMPT="\n\nHuman:",sk.AI_PROMPT="\n\nAssistant:",sk.DEFAULT_TIMEOUT=6e5,sk.AnthropicError=ta,sk.APIError=tn,sk.APIConnectionError=to,sk.APIConnectionTimeoutError=tl,sk.APIUserAbortError=ti,sk.NotFoundError=tm,sk.ConflictError=tp,sk.RateLimitError=tf,sk.BadRequestError=tc,sk.AuthenticationError=td,sk.InternalServerError=tg,sk.PermissionDeniedError=tu,sk.UnprocessableEntityError=th,sk.toFile=t3;class sE extends sk{constructor(){super(...arguments),this.completions=new sg(this),this.messages=new s_(this),this.models=new sS(this),this.beta=new sf(this)}}sE.Completions=sg,sE.Messages=s_,sE.Models=sS,sE.Beta=sf;let{HUMAN_PROMPT:sT,AI_PROMPT:sC}=sE;async function sP(e,t,s,r,a=[],n,i,o,l,c,d,u,m,p,h){if(!r)throw Error("Virtual Key is required");console.log=function(){};let f=h||(0,e4.getProxyBaseUrl)(),g={};a&&a.length>0&&(g["x-litellm-tags"]=a.join(","));let y=new sE({apiKey:r,baseURL:f,dangerouslyAllowBrowser:!0,defaultHeaders:g});try{let r=Date.now(),a=!1,p={model:s,messages:e.map(e=>({role:e.role,content:e.content})),stream:!0,max_tokens:1024,litellm_trace_id:c};for await(let e of(d&&(p.vector_store_ids=d),u&&(p.guardrails=u),m&&(p.policies=m),y.messages.stream(p,{signal:n}))){if(console.log("Stream event:",e),"content_block_delta"===e.type){let n=e.delta;if(!a){a=!0;let e=Date.now()-r;console.log("First token received! Time:",e,"ms"),o&&o(e)}"text_delta"===n.type?t("assistant",n.text,s):"reasoning_delta"===n.type&&i&&i(n.text)}if("message_delta"===e.type&&e.usage&&l){let t=e.usage;console.log("Usage data found:",t);let s={completionTokens:t.output_tokens,promptTokens:t.input_tokens,totalTokens:t.input_tokens+t.output_tokens};l(s)}}}catch(e){throw n?.aborted?console.log("Anthropic messages request was cancelled"):e2.default.fromBackend(`Error occurred while generating model response. Please try again. Error: ${e}`),e}}var sA=e.i(356449);async function sO(e,t,s,r,a,n,i,o,l,c){console.log=function(){},console.log("isLocal:",!1);let d=c||(0,e4.getProxyBaseUrl)(),u=new sA.default.OpenAI({apiKey:a,baseURL:d,dangerouslyAllowBrowser:!0,defaultHeaders:n&&n.length>0?{"x-litellm-tags":n.join(",")}:void 0});try{let a=await u.audio.speech.create({model:r,input:e,voice:t,...o?{response_format:o}:{},...l?{speed:l}:{}},{signal:i}),n=await a.blob(),c=URL.createObjectURL(n);s(c,r)}catch(e){throw i?.aborted?console.log("Audio speech request was cancelled"):e2.default.fromBackend(`Error occurred while generating speech. Please try again. Error: ${e}`),e}}async function sI(e,t,s,r,a,n,i,o,l,c,d){console.log=function(){},console.log("isLocal:",!1);let u=d||(0,e4.getProxyBaseUrl)(),m=new sA.default.OpenAI({apiKey:r,baseURL:u,dangerouslyAllowBrowser:!0,defaultHeaders:a&&a.length>0?{"x-litellm-tags":a.join(",")}:void 0});try{console.log("Processing audio file for transcription:",e.name);let r=await m.audio.transcriptions.create({model:s,file:e,...i?{language:i}:{},...o?{prompt:o}:{},...l?{response_format:l}:{},...void 0!==c?{temperature:c}:{}},{signal:n});if(console.log("Transcription response:",r),r&&r.text)t(r.text,s),e2.default.success("Audio transcribed successfully");else throw Error("No transcription text in response")}catch(e){if(console.error("Error making audio transcription request:",e),n?.aborted)console.log("Audio transcription request was cancelled");else{let t="Failed to transcribe audio";e?.error?.message?t=e.error.message:e?.message&&(t=e.message),e2.default.fromBackend(`Audio transcription failed: ${t}`)}throw e}}async function sR(e,t,s,r,a,n,i,o,l,c,d,u,m,p,h,f,g,y,x,b,v,w,_){console.log=function(){},console.log("isLocal:",!1);let j=b||(0,e4.getProxyBaseUrl)(),S={};a&&a.length>0&&(S["x-litellm-tags"]=a.join(","));let N=new sA.default.OpenAI({apiKey:r,baseURL:j,dangerouslyAllowBrowser:!0,defaultHeaders:S});try{let r,a=Date.now(),b=!1,j={},S=!1,k=[];for await(let x of(p&&p.length>0&&(p.includes("__all__")?k.push({type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp",require_approval:"never"}):p.forEach(e=>{let t=v?.find(t=>t.server_id===e),s=t?.alias||t?.server_name||e,r=w?.[e]||[];k.push({type:"mcp",server_label:"litellm",server_url:`litellm_proxy/mcp/${s}`,require_approval:"never",...r.length>0?{allowed_tools:r}:{}})})),await N.chat.completions.create({model:s,stream:!0,stream_options:{include_usage:!0},litellm_trace_id:c,messages:e,...d?{vector_store_ids:d}:{},...u?{guardrails:u}:{},...m?{policies:m}:{},...k.length>0?{tools:k,tool_choice:"auto"}:{},...void 0!==g?{temperature:g}:{},...void 0!==y?{max_tokens:y}:{}},{signal:n}))){console.log("Stream chunk:",x);let e=x.choices[0]?.delta;if(console.log("Delta content:",x.choices[0]?.delta?.content),console.log("Delta reasoning content:",e?.reasoning_content),!b&&(x.choices[0]?.delta?.content||e&&e.reasoning_content)&&(b=!0,r=Date.now()-a,console.log("First token received! Time:",r,"ms"),o?(console.log("Calling onTimingData with:",r),o(r)):console.log("onTimingData callback is not defined!")),x.choices[0]?.delta?.content){let e=x.choices[0].delta.content;t(e,x.model)}if(e&&e.image&&h&&(console.log("Image generated:",e.image),h(e.image.url,x.model)),e&&e.reasoning_content){let t=e.reasoning_content;i&&i(t)}if(e&&e.provider_specific_fields?.search_results&&f&&(console.log("Search results found:",e.provider_specific_fields.search_results),f(e.provider_specific_fields.search_results)),e&&e.provider_specific_fields){let t=e.provider_specific_fields;if(t.mcp_list_tools&&!j.mcp_list_tools&&(j.mcp_list_tools=t.mcp_list_tools,_&&!S)){S=!0;let e={type:"response.output_item.done",item_id:"mcp_list_tools",item:{type:"mcp_list_tools",tools:t.mcp_list_tools.map(e=>({name:e.function?.name||e.name||"",description:e.function?.description||e.description||"",input_schema:e.function?.parameters||e.input_schema||{}}))},timestamp:Date.now()};_(e),console.log("MCP list_tools event sent:",e)}t.mcp_tool_calls&&(j.mcp_tool_calls=t.mcp_tool_calls),t.mcp_call_results&&(j.mcp_call_results=t.mcp_call_results),(t.mcp_list_tools||t.mcp_tool_calls||t.mcp_call_results)&&console.log("MCP metadata found in chunk:",{mcp_list_tools:t.mcp_list_tools?"present":"absent",mcp_tool_calls:t.mcp_tool_calls?"present":"absent",mcp_call_results:t.mcp_call_results?"present":"absent"})}if(x.usage&&l){console.log("Usage data found:",x.usage);let e={completionTokens:x.usage.completion_tokens,promptTokens:x.usage.prompt_tokens,totalTokens:x.usage.total_tokens};x.usage.completion_tokens_details?.reasoning_tokens&&(e.reasoningTokens=x.usage.completion_tokens_details.reasoning_tokens),void 0!==x.usage.cost&&null!==x.usage.cost&&(e.cost=parseFloat(x.usage.cost)),l(e)}}_&&(j.mcp_tool_calls||j.mcp_call_results)&&j.mcp_tool_calls&&j.mcp_tool_calls.length>0&&j.mcp_tool_calls.forEach((e,t)=>{let s=e.function?.name||e.name||"",r=e.function?.arguments||e.arguments||"{}",a=j.mcp_call_results?.find(t=>t.tool_call_id===e.id||t.tool_call_id===e.call_id)||j.mcp_call_results?.[t],n={type:"response.output_item.done",item:{type:"mcp_call",name:s,arguments:"string"==typeof r?r:JSON.stringify(r),output:a?.result?"string"==typeof a.result?a.result:JSON.stringify(a.result):void 0},item_id:e.id||e.call_id,timestamp:Date.now()};_(n),console.log("MCP call event sent:",n)});let E=Date.now();x&&x(E-a)}catch(e){throw n?.aborted&&console.log("Chat completion request was cancelled"),e}}async function sM(e,t,s,r,a,n){if(!r)throw Error("Virtual Key is required");console.log=function(){};let i=n||(0,e4.getProxyBaseUrl)(),o={};a&&a.length>0&&(o["x-litellm-tags"]=a.join(","));try{let a=i.endsWith("/")?i.slice(0,-1):i,n=`${a}/embeddings`,l=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",[(0,e4.getGlobalLitellmHeaderName)()]:`Bearer ${r}`,...o},body:JSON.stringify({model:s,input:e})});if(!l.ok){let e=await l.text();throw Error(e||`Request failed with status ${l.status}`)}let c=await l.json(),d=c?.data?.[0]?.embedding;if(!d)throw Error("No embedding returned from server");t(JSON.stringify(d),c?.model??s)}catch(e){throw e2.default.fromBackend(`Error occurred while making embeddings request. Please try again. Error: ${e}`),e}}e.s(["makeOpenAIChatCompletionRequest",()=>sR],254530);let sL=async(e,t)=>{try{let s=t||(0,e4.getProxyBaseUrl)(),r=s?`${s}/v1/agents`:"/v1/agents",a=await fetch(r,{method:"GET",headers:{[(0,e4.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok){let e=await a.json();throw Error(e.detail||"Failed to fetch agents")}let n=await a.json();return console.log("Fetched agents:",n),n.sort((e,t)=>{let s=e.agent_name||e.agent_id,r=t.agent_name||t.agent_id;return s.localeCompare(r)}),n}catch(e){throw console.error("Error fetching agents:",e),e}};e.s(["fetchAvailableAgents",0,sL],921687);var s$=e.i(689020);async function sU(e,t,s,r,a,n,i,o){console.log=function(){},console.log("isLocal:",!1);let l=o||(0,e4.getProxyBaseUrl)(),c=new sA.default.OpenAI({apiKey:a,baseURL:l,dangerouslyAllowBrowser:!0,defaultHeaders:n&&n.length>0?{"x-litellm-tags":n.join(",")}:void 0});try{let a=Array.isArray(e)?e:[e],n=[];for(let e=0;e<a.length;e++){let o=a[e];console.log(`Processing image ${e+1} of ${a.length}`);let l=await c.images.edit({model:r,image:o,prompt:t},{signal:i});if(console.log(`Response for image ${e+1}:`,l.data),l.data&&l.data[0]){if(l.data[0].url)s(l.data[0].url,r),n.push(l.data[0].url);else if(l.data[0].b64_json){let e=l.data[0].b64_json,t=`data:image/png;base64,${e}`;s(t,r),n.push(t)}}}n.length>1&&e2.default.success(`Successfully processed ${n.length} images`)}catch(e){if(console.error("Error making image edit request:",e),i?.aborted)console.log("Image edits request was cancelled");else{let t="Failed to edit image(s)";e?.error?.message?t=e.error.message:e?.message&&(t=e.message),e2.default.fromBackend(`Image edit failed: ${t}`)}throw e}}async function sD(e,t,s,r,a,n,i){console.log=function(){},console.log("isLocal:",!1);let o=i||(0,e4.getProxyBaseUrl)(),l=new sA.default.OpenAI({apiKey:r,baseURL:o,dangerouslyAllowBrowser:!0,defaultHeaders:a&&a.length>0?{"x-litellm-tags":a.join(",")}:void 0});try{let r=await l.images.generate({model:s,prompt:e},{signal:n});if(console.log(r.data),r.data&&r.data[0])if(r.data[0].url)t(r.data[0].url,s);else if(r.data[0].b64_json){let e=r.data[0].b64_json;t(`data:image/png;base64,${e}`,s)}else throw Error("No image data found in response");else throw Error("Invalid response format")}catch(e){throw n?.aborted?console.log("Image generation request was cancelled"):e2.default.fromBackend(`Error occurred while generating image. Please try again. Error: ${e}`),e}}async function sq(e,t,s,r,a=[],n,i,o,l,c,d,u,m,p,h,f,g,y,x,b,v,w){if(!r)throw Error("Virtual Key is required");if(!s||""===s.trim())throw Error("Model is required. Please select a model before sending a request.");console.log=function(){};let _=b||(0,e4.getProxyBaseUrl)(),j={};a&&a.length>0&&(j["x-litellm-tags"]=a.join(","));let S=new sA.default.OpenAI({apiKey:r,baseURL:_,dangerouslyAllowBrowser:!0,defaultHeaders:j});try{let r=Date.now(),a=!1,b=e.map(e=>(Array.isArray(e.content),{role:e.role,content:e.content,type:"message"})),_=[];p&&p.length>0&&(p.includes("__all__")?_.push({type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp",require_approval:"never"}):p.forEach(e=>{let t=v?.find(t=>t.server_id===e),s=t?.alias||t?.server_name||e,r=w?.[e]||[];_.push({type:"mcp",server_label:"litellm",server_url:`litellm_proxy/mcp/${s}`,require_approval:"never",...r.length>0?{allowed_tools:r}:{}})})),y&&_.push({type:"code_interpreter",container:{type:"auto"}});let j=await S.responses.create({model:s,input:b,stream:!0,litellm_trace_id:c,...h?{previous_response_id:h}:{},...d?{vector_store_ids:d}:{},...u?{guardrails:u}:{},...m?{policies:m}:{},..._.length>0?{tools:_,tool_choice:"auto"}:{}},{signal:n}),E="",T={code:"",containerId:""};for await(let e of j)if(console.log("Response event:",e),"object"==typeof e&&null!==e){if((e.type?.startsWith("response.mcp_")||"response.output_item.done"===e.type&&(e.item?.type==="mcp_list_tools"||e.item?.type==="mcp_call"))&&(console.log("MCP event received:",e),g)){let t={type:e.type,sequence_number:e.sequence_number,output_index:e.output_index,item_id:e.item_id||e.item?.id,item:e.item,delta:e.delta,arguments:e.arguments,timestamp:Date.now()};g(t)}"response.output_item.done"===e.type&&e.item?.type==="mcp_call"&&e.item?.name&&(E=e.item.name,console.log("MCP tool used:",E)),N=T;var N,k=T="response.output_item.done"===e.type&&e.item?.type==="code_interpreter_call"?(console.log("Code interpreter call completed:",e.item),{code:e.item.code||"",containerId:e.item.container_id||""}):N;if("response.output_item.done"===e.type&&e.item?.type==="message"&&e.item?.content&&x){for(let t of e.item.content)if("output_text"===t.type&&t.annotations){let e=t.annotations.filter(e=>"container_file_citation"===e.type);(e.length>0||k.code)&&x({code:k.code,containerId:k.containerId,annotations:e})}}if("response.role.delta"===e.type)continue;if("response.output_text.delta"===e.type&&"string"==typeof e.delta){let n=e.delta;if(console.log("Text delta",n),n.trim().length>0&&(t("assistant",n,s),!a)){a=!0;let e=Date.now()-r;console.log("First token received! Time:",e,"ms"),o&&o(e)}}if("response.reasoning.delta"===e.type&&"delta"in e){let t=e.delta;"string"==typeof t&&i&&i(t)}if("response.completed"===e.type&&"response"in e){let t=e.response,s=t.usage;if(console.log("Usage data:",s),console.log("Response completed event:",t),t.id&&f&&(console.log("Response ID for session management:",t.id),f(t.id)),s&&l){console.log("Usage data:",s);let e={completionTokens:s.output_tokens,promptTokens:s.input_tokens,totalTokens:s.total_tokens};s.completion_tokens_details?.reasoning_tokens&&(e.reasoningTokens=s.completion_tokens_details.reasoning_tokens),l(e,E)}}}return j}catch(e){throw n?.aborted?console.log("Responses API request was cancelled"):e2.default.fromBackend(`Error occurred while generating model response. Please try again. Error: ${e}`),e}}var sB=e.i(245704),sz=e.i(637235),sH=e.i(270377),sF=e.i(166406),sW=e.i(755151),sJ=e.i(240647),sG=e.i(993914);let sV=(e,t=8)=>e?e.length>t?`${e.substring(0,t)}`:e:null,sK=e=>{navigator.clipboard.writeText(e)},sX=({a2aMetadata:e,timeToFirstToken:t,totalLatency:s})=>{let[r,a]=(0,el.useState)(!1);if(!e&&!t&&!s)return null;let{taskId:n,contextId:i,status:o,metadata:l}=e||{},c=(e=>{if(!e)return null;try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return e}})(o?.timestamp);return(0,ee.jsxs)("div",{className:"a2a-metrics mt-3 pt-2 border-t border-gray-200 text-xs",children:[(0,ee.jsxs)("div",{className:"flex items-center mb-2 text-gray-600",children:[(0,ee.jsx)(ex.RobotOutlined,{className:"mr-1.5 text-blue-500"}),(0,ee.jsx)("span",{className:"font-medium text-gray-700",children:"A2A Metadata"})]}),(0,ee.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-gray-500 ml-4",children:[o?.state&&(0,ee.jsxs)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${(e=>{switch(e){case"completed":return"bg-green-100 text-green-700";case"working":case"submitted":return"bg-blue-100 text-blue-700";case"failed":case"canceled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}})(o.state)}`,children:[(e=>{switch(e){case"completed":return(0,ee.jsx)(sB.CheckCircleOutlined,{className:"text-green-500"});case"working":case"submitted":return(0,ee.jsx)(ef.LoadingOutlined,{className:"text-blue-500"});case"failed":case"canceled":return(0,ee.jsx)(sH.ExclamationCircleOutlined,{className:"text-red-500"});default:return(0,ee.jsx)(sz.ClockCircleOutlined,{className:"text-gray-500"})}})(o.state),(0,ee.jsx)("span",{className:"ml-1 capitalize",children:o.state})]}),c&&(0,ee.jsx)(e$.Tooltip,{title:o?.timestamp,children:(0,ee.jsxs)("span",{className:"flex items-center",children:[(0,ee.jsx)(sz.ClockCircleOutlined,{className:"mr-1"}),c]})}),void 0!==s&&(0,ee.jsx)(e$.Tooltip,{title:"Total latency",children:(0,ee.jsxs)("span",{className:"flex items-center text-blue-600",children:[(0,ee.jsx)(sz.ClockCircleOutlined,{className:"mr-1"}),(s/1e3).toFixed(2),"s"]})}),void 0!==t&&(0,ee.jsx)(e$.Tooltip,{title:"Time to first token",children:(0,ee.jsxs)("span",{className:"flex items-center text-green-600",children:["TTFT: ",(t/1e3).toFixed(2),"s"]})})]}),(0,ee.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-gray-500 ml-4 mt-1.5",children:[n&&(0,ee.jsx)(e$.Tooltip,{title:`Click to copy: ${n}`,children:(0,ee.jsxs)("span",{className:"flex items-center cursor-pointer hover:text-gray-700",onClick:()=>sK(n),children:[(0,ee.jsx)(sG.FileTextOutlined,{className:"mr-1"}),"Task: ",sV(n),(0,ee.jsx)(sF.CopyOutlined,{className:"ml-1 text-gray-400 hover:text-gray-600"})]})}),i&&(0,ee.jsx)(e$.Tooltip,{title:`Click to copy: ${i}`,children:(0,ee.jsxs)("span",{className:"flex items-center cursor-pointer hover:text-gray-700",onClick:()=>sK(i),children:[(0,ee.jsx)(eh.LinkOutlined,{className:"mr-1"}),"Session: ",sV(i),(0,ee.jsx)(sF.CopyOutlined,{className:"ml-1 text-gray-400 hover:text-gray-600"})]})}),(l||o?.message)&&(0,ee.jsxs)(eA.Button,{type:"text",size:"small",className:"text-xs text-blue-500 hover:text-blue-700 p-0 h-auto",onClick:()=>a(!r),children:[r?(0,ee.jsx)(sW.DownOutlined,{}):(0,ee.jsx)(sJ.RightOutlined,{}),(0,ee.jsx)("span",{className:"ml-1",children:"Details"})]})]}),r&&(0,ee.jsxs)("div",{className:"mt-2 ml-4 p-3 bg-gray-50 rounded-md text-gray-600 border border-gray-200",children:[o?.message&&(0,ee.jsxs)("div",{className:"mb-2",children:[(0,ee.jsx)("span",{className:"font-medium text-gray-700",children:"Status Message:"}),(0,ee.jsx)("span",{className:"ml-2",children:o.message})]}),n&&(0,ee.jsxs)("div",{className:"mb-1.5 flex items-center",children:[(0,ee.jsx)("span",{className:"font-medium text-gray-700 w-24",children:"Task ID:"}),(0,ee.jsx)("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-200 rounded text-xs font-mono",children:n}),(0,ee.jsx)(sF.CopyOutlined,{className:"ml-2 cursor-pointer text-gray-400 hover:text-blue-500",onClick:()=>sK(n)})]}),i&&(0,ee.jsxs)("div",{className:"mb-1.5 flex items-center",children:[(0,ee.jsx)("span",{className:"font-medium text-gray-700 w-24",children:"Session ID:"}),(0,ee.jsx)("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-200 rounded text-xs font-mono",children:i}),(0,ee.jsx)(sF.CopyOutlined,{className:"ml-2 cursor-pointer text-gray-400 hover:text-blue-500",onClick:()=>sK(i)})]}),l&&Object.keys(l).length>0&&(0,ee.jsxs)("div",{className:"mt-3",children:[(0,ee.jsx)("span",{className:"font-medium text-gray-700",children:"Custom Metadata:"}),(0,ee.jsx)("pre",{className:"mt-1.5 p-2 bg-white border border-gray-200 rounded text-xs font-mono overflow-x-auto whitespace-pre-wrap",children:JSON.stringify(l,null,2)})]})]})]})};var sY=e.i(536916),sQ=e.i(850627);let sZ=({temperature:e=1,maxTokens:t=2048,useAdvancedParams:s,onTemperatureChange:r,onMaxTokensChange:a,onUseAdvancedParamsChange:n})=>{let[i,o]=(0,el.useState)(!1),l=void 0!==s?s:i,[c,d]=(0,el.useState)(e),[u,m]=(0,el.useState)(t);(0,el.useEffect)(()=>{d(e)},[e]),(0,el.useEffect)(()=>{m(t)},[t]);let p=e=>{let t=e??1;d(t),r?.(t)},h=e=>{let t=e??1e3;m(t),a?.(t)},f=l?"text-gray-700":"text-gray-400";return(0,ee.jsxs)("div",{className:"space-y-4 p-4 w-80",children:[(0,ee.jsx)(sY.Checkbox,{checked:l,onChange:e=>{var t;return t=e.target.checked,void(n?n(t):o(t))},children:(0,ee.jsx)("span",{className:"font-medium",children:"Use Advanced Parameters"})}),(0,ee.jsxs)("div",{className:"space-y-4 transition-opacity duration-200",style:{opacity:l?1:.4},children:[(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ee.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ee.jsx)(eE.Text,{className:`text-sm ${f}`,children:"Temperature"}),(0,ee.jsx)(e$.Tooltip,{title:"Controls randomness. Lower values make output more deterministic, higher values more creative.",children:(0,ee.jsx)(em.InfoCircleOutlined,{className:`text-xs ${f} cursor-help`})})]}),(0,ee.jsx)(eY.InputNumber,{min:0,max:2,step:.1,value:c,onChange:p,disabled:!l,precision:1,className:"w-20"})]}),(0,ee.jsx)(sQ.Slider,{min:0,max:2,step:.1,value:c,onChange:p,disabled:!l,marks:{0:"0",1:"1.0",2:"2.0"}})]}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ee.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ee.jsx)(eE.Text,{className:`text-sm ${f}`,children:"Max Tokens"}),(0,ee.jsx)(e$.Tooltip,{title:"Maximum number of tokens to generate in the response.",children:(0,ee.jsx)(em.InfoCircleOutlined,{className:`text-xs ${f} cursor-help`})})]}),(0,ee.jsx)(eY.InputNumber,{min:1,max:32768,step:1,value:u,onChange:h,disabled:!l})]}),(0,ee.jsx)(sQ.Slider,{min:1,max:32768,step:1,value:u,onChange:h,disabled:!l,marks:{1:"1",32768:"32768"}})]})]})]})},s0=({message:e})=>e.isAudio&&"string"==typeof e.content?(0,ee.jsx)("div",{className:"mb-2",children:(0,ee.jsx)("audio",{controls:!0,src:e.content,className:"max-w-full",style:{maxWidth:"500px"},children:"Your browser does not support the audio element."})}):null;var s1=e.i(785913);let s2={ALLOY:"Alloy - Professional and confident",ASH:"Ash - Casual and relaxed",BALAD:"Ballad - Smooth and melodic",CORAL:"Coral - Warm and engaging",ECHO:"Echo - Friendly and conversational",FABLE:"Fable - Wise and measured",NOVA:"Nova - Friendly and conversational",ONYX:"Onyx - Deep and authoritative",SAGE:"Sage - Wise and measured",SHIMMER:"Shimmer - Bright and cheerful"},s4=Object.entries({ALLOY:"alloy",ASH:"ash",BALAD:"ballad",CORAL:"coral",ECHO:"echo",FABLE:"fable",NOVA:"nova",ONYX:"onyx",SAGE:"sage",SHIMMER:"shimmer"}).map(([e,t])=>({value:t,label:s2[e]})),s3=[{value:s1.EndpointType.CHAT,label:"/v1/chat/completions"},{value:s1.EndpointType.RESPONSES,label:"/v1/responses"},{value:s1.EndpointType.ANTHROPIC_MESSAGES,label:"/v1/messages"},{value:s1.EndpointType.IMAGE,label:"/v1/images/generations"},{value:s1.EndpointType.IMAGE_EDITS,label:"/v1/images/edits"},{value:s1.EndpointType.EMBEDDINGS,label:"/v1/embeddings"},{value:s1.EndpointType.SPEECH,label:"/v1/audio/speech"},{value:s1.EndpointType.TRANSCRIPTION,label:"/v1/audio/transcriptions"},{value:s1.EndpointType.A2A_AGENTS,label:"/v1/a2a/message/send"},{value:s1.EndpointType.MCP,label:"/mcp-rest/tools/call"}];var s5=e.i(657688);let s6=async(e,t)=>({role:"user",content:[{type:"text",text:e},{type:"image_url",image_url:{url:await new Promise((e,s)=>{let r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=s,r.readAsDataURL(t)})}}]}),s8=(e,t,s,r)=>{let a="";t&&r&&(a=r.toLowerCase().endsWith(".pdf")?"[PDF attached]":"[Image attached]");let n={role:"user",content:t?`${e} ${a}`:e};return t&&s&&(n.imagePreviewUrl=s),n},s7=e=>"user"===e.role&&"string"==typeof e.content&&(e.content.includes("[Image attached]")||e.content.includes("[PDF attached]"))&&!!e.imagePreviewUrl;e.s(["createChatDisplayMessage",0,s8,"createChatMultimodalMessage",0,s6,"shouldShowChatAttachedImage",0,s7],964421);let s9=({message:e})=>{if(!s7(e))return null;let t="string"==typeof e.content&&e.content.includes("[PDF attached]");return(0,ee.jsx)("div",{className:"mb-2",children:t?(0,ee.jsx)("div",{className:"w-64 h-32 rounded-md border border-gray-200 bg-red-50 flex items-center justify-center",children:(0,ee.jsx)(eu,{style:{fontSize:"48px",color:"#dc2626"}})}):(0,ee.jsx)(s5.default,{src:e.imagePreviewUrl||"",alt:"User uploaded image",width:256,height:200,className:"max-w-64 rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"200px",width:"auto",height:"auto"}})})};e.s(["default",0,s9],843153);var re=e.i(955719),re=re;let{Dragger:rt}=eD.Upload,rs=({chatUploadedImage:e,chatImagePreviewUrl:t,onImageUpload:s,onRemoveImage:r})=>(0,ee.jsx)(ee.Fragment,{children:!e&&(0,ee.jsx)(rt,{beforeUpload:s,accept:"image/*,.pdf",showUploadList:!1,className:"inline-block",style:{padding:0,border:"none",background:"none"},children:(0,ee.jsx)(e$.Tooltip,{title:"Attach image or PDF",children:(0,ee.jsx)("button",{type:"button",className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:(0,ee.jsx)(re.default,{style:{fontSize:"16px"}})})})})});e.s(["default",0,rs],761793);var rr=e.i(362024),ra=e.i(737434);let rn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"};var ri=el.forwardRef(function(e,t){return el.createElement(ed.default,(0,eo.default)({},e,{ref:t,icon:rn}))});let ro=({code:e,containerId:t,annotations:s=[],accessToken:r})=>{let[a,n]=(0,el.useState)({}),[i,o]=(0,el.useState)({}),l=(0,e4.getProxyBaseUrl)();(0,el.useEffect)(()=>{let e=async()=>{for(let e of s)if((e.filename?.toLowerCase().endsWith(".png")||e.filename?.toLowerCase().endsWith(".jpg")||e.filename?.toLowerCase().endsWith(".jpeg")||e.filename?.toLowerCase().endsWith(".gif"))&&e.container_id&&e.file_id){o(t=>({...t,[e.file_id]:!0}));try{let t=await fetch(`${l}/v1/containers/${e.container_id}/files/${e.file_id}/content`,{headers:{[(0,e4.getGlobalLitellmHeaderName)()]:`Bearer ${r}`}});if(t.ok){let s=await t.blob(),r=URL.createObjectURL(s);n(t=>({...t,[e.file_id]:r}))}}catch(e){console.error("Error fetching image:",e)}finally{o(t=>({...t,[e.file_id]:!1}))}}};return s.length>0&&r&&e(),()=>{Object.values(a).forEach(e=>URL.revokeObjectURL(e))}},[s,r,l]);let c=async e=>{try{let t=await fetch(`${l}/v1/containers/${e.container_id}/files/${e.file_id}/content`,{headers:{[(0,e4.getGlobalLitellmHeaderName)()]:`Bearer ${r}`}});if(t.ok){let s=await t.blob(),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=e.filename||`file_${e.file_id}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}}catch(e){console.error("Error downloading file:",e)}},d=s.filter(e=>e.filename?.toLowerCase().endsWith(".png")||e.filename?.toLowerCase().endsWith(".jpg")||e.filename?.toLowerCase().endsWith(".jpeg")||e.filename?.toLowerCase().endsWith(".gif")),u=s.filter(e=>!e.filename?.toLowerCase().endsWith(".png")&&!e.filename?.toLowerCase().endsWith(".jpg")&&!e.filename?.toLowerCase().endsWith(".jpeg")&&!e.filename?.toLowerCase().endsWith(".gif"));return e||0!==s.length?(0,ee.jsxs)("div",{className:"mt-3 space-y-3",children:[e&&(0,ee.jsx)(rr.Collapse,{size:"small",items:[{key:"code",label:(0,ee.jsxs)("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,ee.jsx)(ea.CodeOutlined,{})," Python Code Executed"]}),children:(0,ee.jsx)(eB.Prism,{language:"python",style:ez.coy,customStyle:{margin:0,borderRadius:"6px",fontSize:"12px",maxHeight:"300px",overflow:"auto"},children:e})}]}),d.map(e=>(0,ee.jsx)("div",{className:"rounded-lg border border-gray-200 overflow-hidden",children:i[e.file_id]?(0,ee.jsxs)("div",{className:"flex items-center justify-center p-8 bg-gray-50",children:[(0,ee.jsx)(eL.Spin,{indicator:(0,ee.jsx)(ef.LoadingOutlined,{spin:!0})}),(0,ee.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"Loading image..."})]}):a[e.file_id]?(0,ee.jsxs)("div",{children:[(0,ee.jsx)("img",{src:a[e.file_id],alt:e.filename||"Generated chart",className:"max-w-full",style:{maxHeight:"400px"}}),(0,ee.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 border-t border-gray-200",children:[(0,ee.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,ee.jsx)(ri,{})," ",e.filename]}),(0,ee.jsxs)("button",{onClick:()=>c(e),className:"text-xs text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[(0,ee.jsx)(ra.DownloadOutlined,{})," Download"]})]})]}):(0,ee.jsx)("div",{className:"flex items-center justify-center p-4 bg-gray-50",children:(0,ee.jsx)("span",{className:"text-sm text-gray-400",children:"Image not available"})})},e.file_id)),u.length>0&&(0,ee.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map(e=>(0,ee.jsxs)("button",{onClick:()=>c(e),className:"flex items-center gap-2 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,ee.jsx)(sG.FileTextOutlined,{className:"text-blue-500"}),(0,ee.jsx)("span",{className:"text-sm",children:e.filename}),(0,ee.jsx)(ra.DownloadOutlined,{className:"text-gray-400"})]},e.file_id))})]}):null};var rl=e.i(790848),rc=e.i(998573);let rd=({enabled:e,onEnabledChange:t,selectedModel:s,disabled:r=!1})=>{let a=(e=>{if(!e)return!1;let t=e.toLowerCase();return t.startsWith("openai/")||t.startsWith("gpt-")||t.startsWith("o1")||t.startsWith("o3")||t.includes("openai")})(s);return(0,ee.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ee.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ee.jsx)(ea.CodeOutlined,{className:"text-blue-500"}),(0,ee.jsx)(eE.Text,{className:"font-medium text-gray-700",children:"Code Interpreter"}),(0,ee.jsx)(e$.Tooltip,{title:"Run Python code to generate files, charts, and analyze data. Container is created automatically.",children:(0,ee.jsx)(em.InfoCircleOutlined,{className:"text-gray-400 text-xs"})})]}),(0,ee.jsx)(rl.Switch,{checked:e&&a,onChange:e=>{e&&!a?rc.message.warning("Code Interpreter is only available for OpenAI models"):t(e)},disabled:r||!a,size:"small",className:e&&a?"bg-blue-500":""})]}),!a&&(0,ee.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,ee.jsxs)("div",{className:"flex items-start gap-2",children:[(0,ee.jsx)(sH.ExclamationCircleOutlined,{className:"text-amber-500 mt-0.5"}),(0,ee.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,ee.jsx)("span",{children:"Code Interpreter is currently only supported for OpenAI models. "}),(0,ee.jsx)("a",{href:"https://github.com/BerriAI/litellm/issues/new?template=feature_request.yml",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Request support for other providers"})]})]})})]})};var ru=e.i(190272);let rm=({endpointType:e,onEndpointChange:t,className:s})=>(0,ee.jsx)("div",{className:s,children:(0,ee.jsx)(eM.Select,{showSearch:!0,value:e,style:{width:"100%"},onChange:t,options:s3,className:"rounded-md",filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase())||(t?.value??"").toLowerCase().includes(e.toLowerCase())})});var rp=e.i(437902);let{Text:rh}=eU.Typography,{Panel:rf}=rr.Collapse,rg=({events:e,className:t})=>{if(console.log("MCPEventsDisplay: Received events:",e),!e||0===e.length)return console.log("MCPEventsDisplay: No events, returning null"),null;let s=e.find(e=>"response.output_item.done"===e.type&&e.item?.type==="mcp_list_tools"&&e.item.tools&&e.item.tools.length>0),r=e.filter(e=>"response.output_item.done"===e.type&&e.item?.type==="mcp_call");return(console.log("MCPEventsDisplay: toolsEvent:",s),console.log("MCPEventsDisplay: mcpCallEvents:",r),s||0!==r.length)?(0,ee.jsxs)("div",{className:`jsx-32b14b04f420f3ac mcp-events-display ${t||""}`,children:[(0,ee.jsx)(rp.default,{id:"32b14b04f420f3ac",children:".openai-mcp-tools.jsx-32b14b04f420f3ac{margin:0;padding:0;position:relative}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse.jsx-32b14b04f420f3ac,.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-item.jsx-32b14b04f420f3ac{background:0 0!important;border:none!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-header.jsx-32b14b04f420f3ac{color:#9ca3af!important;background:0 0!important;border:none!important;min-height:20px!important;padding:0 0 0 20px!important;font-size:14px!important;font-weight:400!important;line-height:20px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-header.jsx-32b14b04f420f3ac:hover{color:#6b7280!important;background:0 0!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-content.jsx-32b14b04f420f3ac{background:0 0!important;border:none!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-content-box.jsx-32b14b04f420f3ac{padding:4px 0 0 20px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-expand-icon.jsx-32b14b04f420f3ac{color:#9ca3af!important;justify-content:center!important;align-items:center!important;width:16px!important;height:16px!important;font-size:10px!important;display:flex!important;position:absolute!important;top:2px!important;left:2px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-expand-icon.jsx-32b14b04f420f3ac:hover{color:#6b7280!important}.openai-vertical-line.jsx-32b14b04f420f3ac{opacity:.8;background-color:#f3f4f6;width:.5px;position:absolute;top:18px;bottom:0;left:9px}.tool-item.jsx-32b14b04f420f3ac{color:#4b5563;z-index:1;background:#fff;margin:0;padding:0;font-family:ui-monospace,SFMono-Regular,SF Mono,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:13px;line-height:18px;position:relative}.mcp-section.jsx-32b14b04f420f3ac{z-index:1;background:#fff;margin-bottom:12px;position:relative}.mcp-section.jsx-32b14b04f420f3ac:last-child{margin-bottom:0}.mcp-section-header.jsx-32b14b04f420f3ac{color:#6b7280;margin-bottom:4px;font-size:13px;font-weight:500}.mcp-code-block.jsx-32b14b04f420f3ac{background:#f9fafb;border:1px solid #f3f4f6;border-radius:6px;padding:8px;font-size:12px}.mcp-json.jsx-32b14b04f420f3ac{color:#374151;white-space:pre-wrap;word-wrap:break-word;margin:0;font-family:ui-monospace,SFMono-Regular,SF Mono,Monaco,Consolas,Liberation Mono,Courier New,monospace}.mcp-approved.jsx-32b14b04f420f3ac{color:#6b7280;align-items:center;font-size:13px;display:flex}.mcp-checkmark.jsx-32b14b04f420f3ac{color:#10b981;margin-right:6px;font-weight:700}.mcp-response-content.jsx-32b14b04f420f3ac{color:#374151;white-space:pre-wrap;font-family:ui-monospace,SFMono-Regular,SF Mono,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:13px;line-height:1.5}"}),(0,ee.jsxs)("div",{className:"jsx-32b14b04f420f3ac openai-mcp-tools",children:[(0,ee.jsx)("div",{className:"jsx-32b14b04f420f3ac openai-vertical-line"}),(0,ee.jsxs)(rr.Collapse,{ghost:!0,size:"small",expandIconPosition:"start",defaultActiveKey:s?["list-tools"]:r.map((e,t)=>`mcp-call-${t}`),children:[s&&(0,ee.jsx)(rf,{header:"List tools",children:(0,ee.jsx)("div",{className:"jsx-32b14b04f420f3ac",children:s.item?.tools?.map((e,t)=>(0,ee.jsx)("div",{className:"jsx-32b14b04f420f3ac tool-item",children:e.name},t))})},"list-tools"),r.map((e,t)=>(0,ee.jsx)(rf,{header:e.item?.name||"Tool call",children:(0,ee.jsxs)("div",{className:"jsx-32b14b04f420f3ac",children:[(0,ee.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:[(0,ee.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section-header",children:"Request"}),(0,ee.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-code-block",children:e.item?.arguments&&(0,ee.jsx)("pre",{className:"jsx-32b14b04f420f3ac mcp-json",children:(()=>{try{return JSON.stringify(JSON.parse(e.item.arguments),null,2)}catch(t){return e.item.arguments}})()})})]}),(0,ee.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:(0,ee.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-approved",children:[(0,ee.jsx)("span",{className:"jsx-32b14b04f420f3ac mcp-checkmark",children:""})," Approved"]})}),e.item?.output&&(0,ee.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:[(0,ee.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section-header",children:"Response"}),(0,ee.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-response-content",children:e.item.output})]})]})},`mcp-call-${t}`))]})]})]}):(console.log("MCPEventsDisplay: No valid events found, returning null"),null)};var ry=e.i(812618);let rx=({reasoningContent:e})=>{let[t,s]=(0,el.useState)(!0);return e?(0,ee.jsxs)("div",{className:"reasoning-content mt-1 mb-2",children:[(0,ee.jsxs)(eA.Button,{type:"text",className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:()=>s(!t),icon:(0,ee.jsx)(ry.BulbOutlined,{}),children:[t?"Hide reasoning":"Show reasoning",t?(0,ee.jsx)(sW.DownOutlined,{className:"ml-1"}):(0,ee.jsx)(sJ.RightOutlined,{className:"ml-1"})]}),t&&(0,ee.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm text-gray-700",children:(0,ee.jsx)(eq.default,{components:{code({node:e,inline:t,className:s,children:r,...a}){let n=/language-(\w+)/.exec(s||"");return!t&&n?(0,ee.jsx)(eB.Prism,{style:ez.coy,language:n[1],PreTag:"div",className:"rounded-md my-2",...a,children:String(r).replace(/\n$/,"")}):(0,ee.jsx)("code",{className:`${s} px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono`,...a,children:r})}},children:e})})]}):null};e.s(["default",0,rx],966988);var rb=e.i(989022);let rv=async(e,t)=>{let s=await new Promise((e,s)=>{let r=new FileReader;r.onload=()=>{e(r.result.split(",")[1])},r.onerror=s,r.readAsDataURL(t)}),r=t.type||(t.name.toLowerCase().endsWith(".pdf")?"application/pdf":"image/jpeg");return{role:"user",content:[{type:"input_text",text:e},{type:"input_image",image_url:`data:${r};base64,${s}`}]}},rw=(e,t,s,r)=>{let a="";t&&r&&(a=r.toLowerCase().endsWith(".pdf")?"[PDF attached]":"[Image attached]");let n={role:"user",content:t?`${e} ${a}`:e};return t&&s&&(n.imagePreviewUrl=s),n},r_=({message:e})=>{if(!("user"===e.role&&"string"==typeof e.content&&(e.content.includes("[Image attached]")||e.content.includes("[PDF attached]"))&&e.imagePreviewUrl))return null;let t="string"==typeof e.content&&e.content.includes("[PDF attached]");return(0,ee.jsx)("div",{className:"mb-2",children:t?(0,ee.jsx)("div",{className:"w-64 h-32 rounded-md border border-gray-200 bg-red-50 flex items-center justify-center",children:(0,ee.jsx)(eu,{style:{fontSize:"48px",color:"#dc2626"}})}):(0,ee.jsx)("img",{src:e.imagePreviewUrl,alt:"User uploaded image",className:"max-w-64 rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"200px"}})})};var re=re;let{Dragger:rj}=eD.Upload,rS=({responsesUploadedImage:e,responsesImagePreviewUrl:t,onImageUpload:s,onRemoveImage:r})=>(0,ee.jsx)(ee.Fragment,{children:!e&&(0,ee.jsx)(rj,{beforeUpload:s,accept:"image/*,.pdf",showUploadList:!1,className:"inline-block",style:{padding:0,border:"none",background:"none"},children:(0,ee.jsx)(e$.Tooltip,{title:"Attach image or PDF",children:(0,ee.jsx)("button",{type:"button",className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:(0,ee.jsx)(re.default,{style:{fontSize:"16px"}})})})})});function rN({searchResults:e}){let[t,s]=(0,el.useState)(!0),[r,a]=(0,el.useState)({});if(!e||0===e.length)return null;let n=e.reduce((e,t)=>e+t.data.length,0);return(0,ee.jsxs)("div",{className:"search-results-content mt-1 mb-2",children:[(0,ee.jsxs)(eA.Button,{type:"text",className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:()=>s(!t),icon:(0,ee.jsx)(en.DatabaseOutlined,{}),children:[t?"Hide sources":`Show sources (${n})`,t?(0,ee.jsx)(sW.DownOutlined,{className:"ml-1"}):(0,ee.jsx)(sJ.RightOutlined,{className:"ml-1"})]}),t&&(0,ee.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm",children:(0,ee.jsx)("div",{className:"space-y-3",children:e.map((e,t)=>(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("div",{className:"text-xs text-gray-600 mb-2 flex items-center gap-2",children:[(0,ee.jsx)("span",{className:"font-medium",children:"Query:"}),(0,ee.jsxs)("span",{className:"italic",children:['"',e.search_query,'"']}),(0,ee.jsx)("span",{className:"text-gray-400",children:""}),(0,ee.jsxs)("span",{className:"text-gray-500",children:[e.data.length," result",1!==e.data.length?"s":""]})]}),(0,ee.jsx)("div",{className:"space-y-2",children:e.data.map((e,s)=>{let n=r[`${t}-${s}`]||!1;return(0,ee.jsxs)("div",{className:"border border-gray-200 rounded-md overflow-hidden bg-white",children:[(0,ee.jsx)("div",{className:"flex items-center justify-between p-2 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>{let e;return e=`${t}-${s}`,void a(t=>({...t,[e]:!t[e]}))},children:(0,ee.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,ee.jsx)("svg",{className:`w-4 h-4 text-gray-400 transition-transform flex-shrink-0 ${n?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,ee.jsx)(sG.FileTextOutlined,{className:"text-gray-400 flex-shrink-0",style:{fontSize:"12px"}}),(0,ee.jsx)("span",{className:"text-xs font-medium text-gray-700 truncate",children:e.filename||e.file_id||`Result ${s+1}`}),(0,ee.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-700 font-mono flex-shrink-0",children:e.score.toFixed(3)})]})}),n&&(0,ee.jsx)("div",{className:"border-t border-gray-200 bg-white",children:(0,ee.jsxs)("div",{className:"p-3 space-y-2",children:[e.content.map((e,t)=>(0,ee.jsx)("div",{children:(0,ee.jsx)("div",{className:"text-xs font-mono bg-gray-50 p-2 rounded text-gray-800 whitespace-pre-wrap break-words",children:e.text})},t)),e.attributes&&Object.keys(e.attributes).length>0&&(0,ee.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[(0,ee.jsx)("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:"Metadata:"}),(0,ee.jsx)("div",{className:"space-y-1",children:Object.entries(e.attributes).map(([e,t])=>(0,ee.jsxs)("div",{className:"text-xs flex gap-2",children:[(0,ee.jsxs)("span",{className:"text-gray-500 font-medium",children:[e,":"]}),(0,ee.jsx)("span",{className:"text-gray-700 font-mono break-all",children:String(t)})]},e))})]})]})})]},s)})})]},t))})})]})}e.s(["SearchResultsDisplay",()=>rN],152401);let rk=({endpointType:e,responsesSessionId:t,useApiSessionManagement:s,onToggleSessionManagement:r})=>e!==s1.EndpointType.RESPONSES?null:(0,ee.jsxs)("div",{className:"mb-4",children:[(0,ee.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ee.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ee.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Session Management"}),(0,ee.jsx)(e$.Tooltip,{title:"Choose between LiteLLM API session management (using previous_response_id) or UI-based session management (using chat history)",children:(0,ee.jsx)(em.InfoCircleOutlined,{className:"text-gray-400",style:{fontSize:"12px"}})})]}),(0,ee.jsx)(rl.Switch,{checked:s,onChange:r,checkedChildren:"API",unCheckedChildren:"UI",size:"small"})]}),(0,ee.jsxs)("div",{className:`text-xs p-2 rounded-md ${t?"bg-green-50 text-green-700 border border-green-200":"bg-blue-50 text-blue-700 border border-blue-200"}`,children:[(0,ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ee.jsxs)("div",{className:"flex items-center gap-1",children:[(0,ee.jsx)(em.InfoCircleOutlined,{style:{fontSize:"12px"}}),(()=>{if(!t)return s?"API Session: Ready":"UI Session: Ready";let e=s?"Response ID":"UI Session",r=t.slice(0,10);return`${e}: ${r}...`})()]}),t&&(0,ee.jsx)(e$.Tooltip,{title:(0,ee.jsxs)("div",{className:"text-xs",children:[(0,ee.jsx)("div",{className:"mb-1",children:"Copy response ID to continue session:"}),(0,ee.jsx)("div",{className:"bg-gray-800 text-gray-100 p-2 rounded font-mono text-xs whitespace-pre-wrap",children:`curl -X POST "your-proxy-url/v1/responses" \\
  -H "Authorization: Bearer your-api-key" \\
  -H "Content-Type: application/json" \\
  -d '{
    "model": "your-model",
    "input": [{"role": "user", "content": "your message", "type": "message"}],
    "previous_response_id": "${t}",
    "stream": true
  }'`})]}),overlayStyle:{maxWidth:"500px"},children:(0,ee.jsx)("button",{onClick:()=>{t&&(navigator.clipboard.writeText(t),e2.default.success("Response ID copied to clipboard!"))},className:"ml-2 p-1 hover:bg-green-100 rounded transition-colors",children:(0,ee.jsx)(sF.CopyOutlined,{style:{fontSize:"12px"}})})})]}),(0,ee.jsx)("div",{className:"text-xs opacity-75 mt-1",children:t?s?"LiteLLM API session active - context maintained server-side":"UI session active - context maintained client-side":s?"LiteLLM will manage session using previous_response_id":"UI will manage session using chat history"})]})]}),{TextArea:rE}=eO.Input,{Dragger:rT}=eD.Upload,rC=new Set([s1.EndpointType.CHAT,s1.EndpointType.RESPONSES,s1.EndpointType.MCP]);e.s(["default",0,({accessToken:e,token:t,userRole:s,userID:r,disabledPersonalKeyCreation:a,proxySettings:n})=>{let i,[o,l]=(0,el.useState)([]),[c,d]=(0,el.useState)(()=>{let e=sessionStorage.getItem("selectedMCPServers");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedMCPServers from sessionStorage",e),[]}}),[u,m]=(0,el.useState)(!1),[p,h]=(0,el.useState)({}),[f,g]=(0,el.useState)(void 0),y=(0,el.useRef)(null),[x,b]=(0,el.useState)(()=>{let e=sessionStorage.getItem("mcpServerToolRestrictions");try{return e?JSON.parse(e):{}}catch(e){return console.error("Error parsing mcpServerToolRestrictions from sessionStorage",e),{}}}),[v,w]=(0,el.useState)(()=>{let e=sessionStorage.getItem("apiKeySource");if(e)try{return JSON.parse(e)}catch(e){console.error("Error parsing apiKeySource from sessionStorage",e)}return a?"custom":"session"}),[_,j]=(0,el.useState)(()=>sessionStorage.getItem("apiKey")||""),[S,N]=(0,el.useState)(()=>sessionStorage.getItem("customProxyBaseUrl")||""),[k,E]=(0,el.useState)(""),[T,C]=(0,el.useState)(()=>{try{let e=sessionStorage.getItem("chatHistory");return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing chatHistory from sessionStorage",e),[]}}),[P,A]=(0,el.useState)(void 0),[O,I]=(0,el.useState)(!1),[R,M]=(0,el.useState)([]),[L,$]=(0,el.useState)([]),[U,D]=(0,el.useState)(void 0),q=(0,el.useRef)(null),[B,z]=(0,el.useState)(()=>sessionStorage.getItem("endpointType")||s1.EndpointType.CHAT),[H,F]=(0,el.useState)(!1),W=(0,el.useRef)(null),[J,G]=(0,el.useState)(()=>{let e=sessionStorage.getItem("selectedTags");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedTags from sessionStorage",e),[]}}),[V,K]=(0,el.useState)(()=>{let e=sessionStorage.getItem("selectedVoice");if(!e)return"alloy";try{return JSON.parse(e)}catch{return e}}),[X,Y]=(0,el.useState)(()=>{let e=sessionStorage.getItem("selectedVectorStores");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedVectorStores from sessionStorage",e),[]}}),[Q,Z]=(0,el.useState)(()=>{let e=sessionStorage.getItem("selectedGuardrails");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedGuardrails from sessionStorage",e),[]}}),[eo,ec]=(0,el.useState)(()=>{let e=sessionStorage.getItem("selectedPolicies");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedPolicies from sessionStorage",e),[]}}),[ed,eg]=(0,el.useState)(()=>sessionStorage.getItem("messageTraceId")||null),[ew,eO]=(0,el.useState)(()=>sessionStorage.getItem("responsesSessionId")||null),[eD,eH]=(0,el.useState)(()=>{let e=sessionStorage.getItem("useApiSessionManagement");return!e||JSON.parse(e)}),[eF,eW]=(0,el.useState)([]),[eX,eY]=(0,el.useState)([]),[eQ,eZ]=(0,el.useState)(null),[e0,e6]=(0,el.useState)(null),[e7,e9]=(0,el.useState)(null),[te,tt]=(0,el.useState)(null),[ts,tr]=(0,el.useState)(null),[ta,tn]=(0,el.useState)(!1),[ti,to]=(0,el.useState)(""),[tl,tc]=(0,el.useState)("openai"),[td,tu]=(0,el.useState)([]),[tm,tp]=(0,el.useState)(1),[th,tf]=(0,el.useState)(2048),[tg,ty]=(0,el.useState)(!1),tx=function(){let[e,t]=(0,el.useState)(()=>{let e=sessionStorage.getItem("codeInterpreterEnabled");return!!e&&JSON.parse(e)}),[s,r]=(0,el.useState)(null),a=(0,el.useCallback)(e=>{t(e),sessionStorage.setItem("codeInterpreterEnabled",JSON.stringify(e))},[]),n=(0,el.useCallback)(()=>{r(null)},[]),i=(0,el.useCallback)(()=>{a(!e)},[e,a]);return{enabled:e,result:s,setEnabled:a,setResult:r,clearResult:n,toggle:i}}(),tb=(0,el.useRef)(null),tv=async()=>{let t="session"===v?e:_;if(t){m(!0);try{let e=await (0,e4.fetchMCPServers)(t);l(Array.isArray(e)?e:e.data||[])}catch(e){console.error("Error fetching MCP servers:",e)}finally{m(!1)}}},tw=async t=>{let s="session"===v?e:_;if(s&&!p[t])try{let e=await (0,e4.listMCPTools)(s,t);h(s=>({...s,[t]:e.tools||[]}))}catch(e){console.error(`Error fetching tools for server ${t}:`,e)}};(0,el.useEffect)(()=>{if(ta){let t=(0,ru.generateCodeSnippet)({apiKeySource:v,accessToken:e,apiKey:_,inputMessage:k,chatHistory:T,selectedTags:J,selectedVectorStores:X,selectedGuardrails:Q,selectedPolicies:eo,selectedMCPServers:c,mcpServers:o,mcpServerToolRestrictions:x,endpointType:B,selectedModel:P,selectedSdk:tl,selectedVoice:V,proxySettings:n});to(t)}},[ta,tl,v,e,_,k,T,J,X,Q,eo,c,o,x,B,P,n]),(0,el.useEffect)(()=>{let e=setTimeout(()=>{sessionStorage.setItem("chatHistory",JSON.stringify(T))},500);return()=>{clearTimeout(e)}},[T]),(0,el.useEffect)(()=>{sessionStorage.setItem("apiKeySource",JSON.stringify(v)),sessionStorage.setItem("apiKey",_),sessionStorage.setItem("endpointType",B),sessionStorage.setItem("selectedTags",JSON.stringify(J)),sessionStorage.setItem("selectedVectorStores",JSON.stringify(X)),sessionStorage.setItem("selectedGuardrails",JSON.stringify(Q)),sessionStorage.setItem("selectedPolicies",JSON.stringify(eo)),sessionStorage.setItem("selectedMCPServers",JSON.stringify(c)),sessionStorage.setItem("mcpServerToolRestrictions",JSON.stringify(x)),sessionStorage.setItem("selectedVoice",V),sessionStorage.removeItem("selectedMCPTools"),P?sessionStorage.setItem("selectedModel",P):sessionStorage.removeItem("selectedModel"),ed?sessionStorage.setItem("messageTraceId",ed):sessionStorage.removeItem("messageTraceId"),ew?sessionStorage.setItem("responsesSessionId",ew):sessionStorage.removeItem("responsesSessionId"),sessionStorage.setItem("useApiSessionManagement",JSON.stringify(eD))},[v,_,P,B,J,X,Q,eo,ed,ew,eD,c,x,V]),(0,el.useEffect)(()=>{let a="session"===v?e:_;a&&t&&s&&r?((async()=>{try{if(!a)return void console.log("userApiKey is missing");let e=await (0,s$.fetchAvailableModels)(a);console.log("Fetched models:",e),M(e);let t=e.some(e=>e.model_group===P);e.length&&t||A(void 0)}catch(e){console.error("Error fetching model info:",e)}})(),tv()):console.log("userApiKey or token or userRole or userID is missing = ",a,t,s,r)},[e,r,s,v,_,t]),(0,el.useEffect)(()=>{B!==s1.EndpointType.MCP||1!==c.length||"__all__"===c[0]||p[c[0]]||tw(c[0])},[B,c,p]),(0,el.useEffect)(()=>{let t="session"===v?e:_;t&&B===s1.EndpointType.A2A_AGENTS&&(async()=>{try{let e=await sL(t,S||void 0);$(e),U&&!e.some(e=>e.agent_name===U)&&D(void 0)}catch(e){console.error("Error fetching agents:",e)}})()},[e,v,_,B,S,U]),(0,el.useEffect)(()=>{tb.current&&setTimeout(()=>{tb.current?.scrollIntoView({behavior:"smooth",block:"end"})},100)},[T]);let t_=(e,t,s)=>{console.log("updateTextUI called with:",e,t,s),C(r=>{let a=r[r.length-1];if(!a||a.role!==e||a.isImage||a.isAudio)return[...r,{role:e,content:t,model:s}];{let e={...a,content:a.content+t,model:a.model??s};return[...r.slice(0,-1),e]}})},tj=e=>{C(t=>{let s=t[t.length-1];return!s||"assistant"!==s.role||s.isImage||s.isAudio?t.length>0&&"user"===t[t.length-1].role?[...t,{role:"assistant",content:"",reasoningContent:e}]:t:[...t.slice(0,t.length-1),{...s,reasoningContent:(s.reasoningContent||"")+e}]})},tS=e=>{console.log("updateTimingData called with:",e),C(t=>{let s=t[t.length-1];if(console.log("Current last message:",s),s&&"assistant"===s.role){console.log("Updating assistant message with timeToFirstToken:",e);let r=[...t.slice(0,t.length-1),{...s,timeToFirstToken:e}];return console.log("Updated chat history:",r),r}return s&&"user"===s.role?(console.log("Creating new assistant message with timeToFirstToken:",e),[...t,{role:"assistant",content:"",timeToFirstToken:e}]):(console.log("No appropriate message found to update timing"),t)})},tN=(e,t)=>{console.log("Received usage data:",e),C(s=>{let r=s[s.length-1];if(r&&"assistant"===r.role){console.log("Updating message with usage data:",e);let a={...r,usage:e,toolName:t};return console.log("Updated message:",a),[...s.slice(0,s.length-1),a]}return s})},tk=e=>{console.log("Received A2A metadata:",e),C(t=>{let s=t[t.length-1];if(s&&"assistant"===s.role){let r={...s,a2aMetadata:e};return[...t.slice(0,t.length-1),r]}return t})},tE=e=>{C(t=>{let s=t[t.length-1];return s&&"assistant"===s.role?[...t.slice(0,t.length-1),{...s,totalLatency:e}]:t})},tT=e=>{console.log("Received search results:",e),C(t=>{let s=t[t.length-1];if(s&&"assistant"===s.role){console.log("Updating message with search results");let r={...s,searchResults:e};return[...t.slice(0,t.length-1),r]}return t})},tC=e=>{console.log("Received response ID for session management:",e),eD&&eO(e)},tP=e=>{console.log("ChatUI: Received MCP event:",e),tu(t=>{if(e.item_id&&t.some(t=>t.item_id===e.item_id&&t.type===e.type&&(t.sequence_number===e.sequence_number||void 0===t.sequence_number&&void 0===e.sequence_number)))return console.log("ChatUI: Duplicate MCP event, skipping"),t;let s=[...t,e];return console.log("ChatUI: Updated MCP events:",s),s})},tA=(e,t)=>{C(s=>[...s,{role:"assistant",content:e,model:t,isImage:!0}])},tO=(e,t)=>{C(s=>{let r=s[s.length-1];if(!r||"assistant"!==r.role||r.isImage||r.isAudio)return[...s,{role:"assistant",content:"",model:t,image:{url:e,detail:"auto"}}];{let a={...r,image:{url:e,detail:"auto"},model:r.model??t};return[...s.slice(0,-1),a]}})},tI=e=>{eW(t=>[...t,e]);let t=URL.createObjectURL(e);return eY(e=>[...e,t]),!1},tR=()=>{eX.forEach(e=>{URL.revokeObjectURL(e)}),eW([]),eY([])},tM=()=>{e0&&URL.revokeObjectURL(e0),eZ(null),e6(null)},tL=()=>{te&&URL.revokeObjectURL(te),e9(null),tt(null)},t$=()=>{tr(null)},tU=async()=>{let a;if(""===k.trim()&&B!==s1.EndpointType.TRANSCRIPTION&&B!==s1.EndpointType.MCP)return;if(B===s1.EndpointType.IMAGE_EDITS&&0===eF.length)return void e2.default.fromBackend("Please upload at least one image for editing");if(B===s1.EndpointType.TRANSCRIPTION&&!ts)return void e2.default.fromBackend("Please upload an audio file for transcription");if(B===s1.EndpointType.A2A_AGENTS&&!U)return void e2.default.fromBackend("Please select an agent to send a message");let n={};if(B===s1.EndpointType.MCP){if(!(1===c.length&&"__all__"!==c[0]?c[0]:null))return void e2.default.fromBackend("Please select an MCP server to test");if(!f)return void e2.default.fromBackend("Please select an MCP tool to call");if(!(p[c[0]]||[]).find(e=>e.name===f))return void e2.default.fromBackend("Please wait for tool schema to load");try{n=await y.current?.getSubmitValues()??{}}catch(e){e2.default.fromBackend(e instanceof Error?e.message:"Please fill in all required parameters");return}}if([s1.EndpointType.CHAT,s1.EndpointType.IMAGE,s1.EndpointType.SPEECH,s1.EndpointType.IMAGE_EDITS,s1.EndpointType.RESPONSES,s1.EndpointType.ANTHROPIC_MESSAGES,s1.EndpointType.EMBEDDINGS,s1.EndpointType.TRANSCRIPTION].includes(B)&&!P)return void e2.default.fromBackend("Please select a model before sending a request");if(!t||!s||!r)return;let i="session"===v?e:_;if(!i)return void e2.default.fromBackend("Please provide a Virtual Key or select Current UI Session");W.current=new AbortController;let l=W.current.signal;if(B===s1.EndpointType.RESPONSES&&eQ)try{a=await rv(k,eQ)}catch(e){e2.default.fromBackend("Failed to process image. Please try again.");return}else if(B===s1.EndpointType.CHAT&&e7)try{a=await s6(k,e7)}catch(e){e2.default.fromBackend("Failed to process image. Please try again.");return}else a={role:"user",content:k};let d=ed||eJ();ed||eg(d),C([...T,B===s1.EndpointType.RESPONSES&&eQ?rw(k,!0,e0||void 0,eQ.name):B===s1.EndpointType.CHAT&&e7?s8(k,!0,te||void 0,e7.name):B===s1.EndpointType.TRANSCRIPTION&&ts?rw(k?` Audio file: ${ts.name}
Prompt: ${k}`:` Audio file: ${ts.name}`,!1):B===s1.EndpointType.MCP&&f?rw(` MCP Tool: ${f}
Arguments: ${JSON.stringify(n,null,2)}`,!1):rw(k,!1)]),tu([]),tx.clearResult(),F(!0);try{if(P)if(B===s1.EndpointType.CHAT){let e=[...T.filter(e=>!e.isImage&&!e.isAudio).map(({role:e,content:t})=>({role:e,content:"string"==typeof t?t:""})),a];await sR(e,(e,t)=>t_("assistant",e,t),P,i,J,l,tj,tS,tN,d,X.length>0?X:void 0,Q.length>0?Q:void 0,eo.length>0?eo:void 0,c,tO,tT,tg?tm:void 0,tg?th:void 0,tE,S||void 0,o,x,tP)}else if(B===s1.EndpointType.IMAGE)await sD(k,(e,t)=>tA(e,t),P,i,J,l,S||void 0);else if(B===s1.EndpointType.SPEECH)await sO(k,V,(e,t)=>{C(s=>[...s,{role:"assistant",content:e,model:t,isAudio:!0}])},P||"",i,J,l,void 0,void 0,S||void 0);else if(B===s1.EndpointType.IMAGE_EDITS)eF.length>0&&await sU(1===eF.length?eF[0]:eF,k,(e,t)=>tA(e,t),P,i,J,l,S||void 0);else if(B===s1.EndpointType.RESPONSES){let e;e=eD&&ew?[a]:[...T.filter(e=>!e.isImage&&!e.isAudio).map(({role:e,content:t})=>({role:e,content:t})),a],await sq(e,(e,t,s)=>t_(e,t,s),P,i,J,l,tj,tS,tN,d,X.length>0?X:void 0,Q.length>0?Q:void 0,eo.length>0?eo:void 0,c,eD?ew:null,tC,tP,tx.enabled,tx.setResult,S||void 0,o,x)}else if(B===s1.EndpointType.ANTHROPIC_MESSAGES){let e=[...T.filter(e=>!e.isImage&&!e.isAudio).map(({role:e,content:t})=>({role:e,content:t})),a];await sP(e,(e,t,s)=>t_(e,t,s),P,i,J,l,tj,tS,tN,d,X.length>0?X:void 0,Q.length>0?Q:void 0,eo.length>0?eo:void 0,c,S||void 0)}else B===s1.EndpointType.EMBEDDINGS?await sM(k,(e,t)=>{C(s=>[...s,{role:"assistant",content:(0,eG.truncateString)(e,100),model:t,isEmbeddings:!0}])},P,i,J,S||void 0):B===s1.EndpointType.TRANSCRIPTION&&ts&&await sI(ts,(e,t)=>t_("assistant",e,t),P,i,J,l,void 0,void 0,void 0,void 0,S||void 0);if(B===s1.EndpointType.MCP){let e=1===c.length&&"__all__"!==c[0]?c[0]:null;if(e&&f){let t=await (0,e4.callMCPTool)(i,e,f,n,Q.length>0?{guardrails:Q}:void 0),s=t?.content?.length>0?JSON.stringify(t.content.map(e=>"text"===e.type?e.text:e).filter(Boolean),null,2):JSON.stringify(t,null,2);t_("assistant",s||"Tool executed successfully.")}}B===s1.EndpointType.A2A_AGENTS&&U&&await e8(U,k,(e,t)=>t_("assistant",e,t),i,l,tS,tE,tk,S||void 0,Q.length>0?Q:void 0)}catch(e){l.aborted?console.log("Request was cancelled"):(console.error("Error fetching response",e),t_("assistant","Error fetching response:"+e))}finally{F(!1),W.current=null,B===s1.EndpointType.IMAGE_EDITS&&tR(),B===s1.EndpointType.RESPONSES&&eQ&&tM(),B===s1.EndpointType.CHAT&&e7&&tL(),B===s1.EndpointType.TRANSCRIPTION&&ts&&t$()}E("")};if(s&&"Admin Viewer"===s){let{Title:e,Paragraph:t}=eU.Typography;return(0,ee.jsxs)("div",{children:[(0,ee.jsx)(e,{level:1,children:"Access Denied"}),(0,ee.jsx)(t,{children:"Ask your proxy admin for access to test models"})]})}let tD=(0,ee.jsx)(ef.LoadingOutlined,{style:{fontSize:24},spin:!0});return(0,ee.jsxs)("div",{className:"w-full p-4 pb-0 bg-white",children:[(0,ee.jsx)(ek.Card,{className:"w-full rounded-xl shadow-md overflow-hidden",children:(0,ee.jsxs)("div",{className:"flex h-[80vh] w-full gap-4",children:[(0,ee.jsxs)("div",{className:"w-1/4 p-4 bg-gray-50 overflow-y-auto",children:[(0,ee.jsx)(eC.Title,{className:"text-xl font-semibold mb-6 mt-2",children:"Configurations"}),(0,ee.jsxs)("div",{className:"space-y-4",children:[(0,ee.jsxs)("div",{children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,ee.jsx)(ep.KeyOutlined,{className:"mr-2"})," Virtual Key Source"]}),(0,ee.jsx)(eM.Select,{disabled:a,value:v,style:{width:"100%"},onChange:e=>{w(e)},options:[{value:"session",label:"Current UI Session"},{value:"custom",label:"Virtual Key"}],className:"rounded-md"}),"custom"===v&&(0,ee.jsx)(eT.TextInput,{className:"mt-2",placeholder:"Enter custom Virtual Key",type:"password",onValueChange:j,value:_,icon:ep.KeyOutlined})]}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block text-gray-700 flex items-center",children:[(0,ee.jsx)(ev.SettingOutlined,{className:"mr-2"})," Custom Proxy Base URL"]}),n?.LITELLM_UI_API_DOC_BASE_URL&&!S&&(0,ee.jsx)(eA.Button,{type:"link",size:"small",icon:(0,ee.jsx)(eh.LinkOutlined,{}),onClick:()=>{N(n.LITELLM_UI_API_DOC_BASE_URL||""),sessionStorage.setItem("customProxyBaseUrl",n.LITELLM_UI_API_DOC_BASE_URL||"")},className:"text-gray-500 hover:text-gray-700",children:"Fill"}),S&&(0,ee.jsx)(eA.Button,{type:"link",size:"small",icon:(0,ee.jsx)(er.ClearOutlined,{}),onClick:()=>{N(""),sessionStorage.removeItem("customProxyBaseUrl")},className:"text-gray-500 hover:text-gray-700",children:"Clear"})]}),(0,ee.jsx)(eT.TextInput,{placeholder:"Optional: Enter custom proxy URL (e.g., http://localhost:5000)",onValueChange:e=>{N(e),sessionStorage.setItem("customProxyBaseUrl",e)},value:S,icon:et.ApiOutlined}),S&&(0,ee.jsxs)(eE.Text,{className:"text-xs text-gray-500 mt-1",children:["API calls will be sent to: ",S]})]}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,ee.jsx)(et.ApiOutlined,{className:"mr-2"})," Endpoint Type"]}),(0,ee.jsx)(rm,{endpointType:B,onEndpointChange:e=>{z(e),A(void 0),D(void 0),I(!1),g(void 0),e===s1.EndpointType.MCP&&d(e=>1===e.length&&"__all__"!==e[0]?e:[]);try{sessionStorage.removeItem("selectedModel"),sessionStorage.removeItem("selectedAgent")}catch{}},className:"mb-4"}),B===s1.EndpointType.SPEECH&&(0,ee.jsxs)("div",{className:"mb-4",children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,ee.jsx)(e_,{className:"mr-2"}),"Voice"]}),(0,ee.jsx)(eM.Select,{value:V,onChange:e=>{K(e),sessionStorage.setItem("selectedVoice",e)},style:{width:"100%"},className:"rounded-md",options:s4})]}),(0,ee.jsx)(rk,{endpointType:B,responsesSessionId:ew,useApiSessionManagement:eD,onToggleSessionManagement:e=>{eH(e),e||eO(null)}})]}),B!==s1.EndpointType.A2A_AGENTS&&B!==s1.EndpointType.MCP&&(0,ee.jsxs)("div",{children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center justify-between",children:[(0,ee.jsxs)("span",{className:"flex items-center",children:[(0,ee.jsx)(ex.RobotOutlined,{className:"mr-2"})," Select Model"]}),(()=>{if(!P||"custom"===P)return!1;let e=R.find(e=>e.model_group===P);return!!e&&(!e.mode||"chat"===e.mode)})()?(0,ee.jsx)(eR.Popover,{content:(0,ee.jsx)(sZ,{temperature:tm,maxTokens:th,useAdvancedParams:tg,onTemperatureChange:tp,onMaxTokensChange:tf,onUseAdvancedParamsChange:ty}),title:"Model Settings",trigger:"click",placement:"right",children:(0,ee.jsx)(eA.Button,{type:"text",size:"small",icon:(0,ee.jsx)(ev.SettingOutlined,{}),className:"text-gray-500 hover:text-gray-700"})}):(0,ee.jsx)(e$.Tooltip,{title:"Advanced parameters are only supported for chat models currently",children:(0,ee.jsx)(eA.Button,{type:"text",size:"small",icon:(0,ee.jsx)(ev.SettingOutlined,{}),className:"text-gray-300 cursor-not-allowed",disabled:!0})})]}),(0,ee.jsx)(eM.Select,{value:P,placeholder:"Select a Model",onChange:e=>{console.log(`selected ${e}`),A(e),I("custom"===e)},options:[{value:"custom",label:"Enter custom model",key:"custom"},...Array.from(new Set(R.filter(e=>{if(!e.mode)return!0;let t=(0,s1.getEndpointType)(e.mode);return B===s1.EndpointType.RESPONSES||B===s1.EndpointType.ANTHROPIC_MESSAGES?t===B||t===s1.EndpointType.CHAT:B===s1.EndpointType.IMAGE_EDITS?t===B||t===s1.EndpointType.IMAGE:t===B}).map(e=>e.model_group))).map((e,t)=>({value:e,label:e,key:t}))],style:{width:"100%"},showSearch:!0,className:"rounded-md"}),O&&(0,ee.jsx)(eT.TextInput,{className:"mt-2",placeholder:"Enter custom model name",onValueChange:e=>{q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{A(e)},500)}})]}),B===s1.EndpointType.A2A_AGENTS&&(0,ee.jsxs)("div",{children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,ee.jsx)(ex.RobotOutlined,{className:"mr-2"})," Select Agent"]}),(0,ee.jsx)(eM.Select,{value:U,placeholder:"Select an Agent",onChange:e=>D(e),options:L.map(e=>({value:e.agent_name,label:e.agent_name||e.agent_id,key:e.agent_id})),style:{width:"100%"},showSearch:!0,className:"rounded-md",optionLabelProp:"label",children:L.map(e=>(0,ee.jsx)(eM.Select.Option,{value:e.agent_name,label:e.agent_name||e.agent_id,children:(0,ee.jsxs)("div",{className:"flex flex-col py-1",children:[(0,ee.jsx)("span",{className:"font-medium",children:e.agent_name||e.agent_id}),e.agent_card_params?.description&&(0,ee.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.agent_card_params.description})]})},e.agent_id))}),0===L.length&&(0,ee.jsx)(eE.Text,{className:"text-xs text-gray-500 mt-2 block",children:"No agents found. Create agents via /v1/agents endpoint."})]}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,ee.jsx)(ej.TagsOutlined,{className:"mr-2"})," Tags"]}),(0,ee.jsx)(e3,{value:J,onChange:G,className:"mb-4",accessToken:e||""})]}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,ee.jsx)(eS.ToolOutlined,{className:"mr-2"}),B===s1.EndpointType.MCP?"MCP Server":"MCP Servers",(0,ee.jsx)(e$.Tooltip,{className:"ml-1",title:B===s1.EndpointType.MCP?"Select an MCP server to test tools directly.":"Select MCP servers to use in your conversation.",children:(0,ee.jsx)(em.InfoCircleOutlined,{})})]}),(0,ee.jsxs)(eM.Select,{mode:B===s1.EndpointType.MCP?void 0:"multiple",style:{width:"100%"},placeholder:B===s1.EndpointType.MCP?"Select MCP server":"Select MCP servers",value:B===s1.EndpointType.MCP?"__all__"!==c[0]&&1===c.length?c[0]:void 0:c,onChange:e=>{B===s1.EndpointType.MCP?(d(e?[e]:[]),g(void 0),e&&!p[e]&&tw(e)):e.includes("__all__")?(d(["__all__"]),b({})):(d(e),b(t=>{let s={...t};return Object.keys(s).forEach(t=>{e.includes(t)||delete s[t]}),s}),e.forEach(e=>{p[e]||tw(e)}))},loading:u,className:"mb-2",allowClear:!0,optionLabelProp:"label",disabled:!rC.has(B),maxTagCount:B===s1.EndpointType.MCP?1:"responsive",children:[B!==s1.EndpointType.MCP&&(0,ee.jsx)(eM.Select.Option,{value:"__all__",label:"All MCP Servers",children:(0,ee.jsxs)("div",{className:"flex flex-col py-1",children:[(0,ee.jsx)("span",{className:"font-medium",children:"All MCP Servers"}),(0,ee.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"Use all available MCP servers"})]})},"__all__"),o.map(e=>(0,ee.jsx)(eM.Select.Option,{value:e.server_id,label:e.alias||e.server_name||e.server_id,disabled:B!==s1.EndpointType.MCP&&c.includes("__all__"),children:(0,ee.jsxs)("div",{className:"flex flex-col py-1",children:[(0,ee.jsx)("span",{className:"font-medium",children:e.alias||e.server_name||e.server_id}),e.description&&(0,ee.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.description})]})},e.server_id))]}),B===s1.EndpointType.MCP&&1===c.length&&"__all__"!==c[0]&&(0,ee.jsxs)("div",{className:"mt-3",children:[(0,ee.jsx)(eE.Text,{className:"text-xs text-gray-600 mb-1 block",children:"Select Tool"}),(0,ee.jsx)(eM.Select,{style:{width:"100%"},placeholder:"Select a tool to call",value:f,onChange:e=>g(e),options:(p[c[0]]||[]).map(e=>({value:e.name,label:e.name})),allowClear:!0,className:"rounded-md"})]}),c.length>0&&!c.includes("__all__")&&B!==s1.EndpointType.MCP&&rC.has(B)&&(0,ee.jsx)("div",{className:"mt-3 space-y-2",children:c.map(e=>{let t=o.find(t=>t.server_id===e),s=p[e]||[];return 0===s.length?null:(0,ee.jsxs)("div",{className:"border rounded p-2",children:[(0,ee.jsxs)(eE.Text,{className:"text-xs text-gray-600 mb-1",children:["Limit tools for ",t?.alias||t?.server_name||e,":"]}),(0,ee.jsx)(eM.Select,{mode:"multiple",size:"small",style:{width:"100%"},placeholder:"All tools (default)",value:x[e]||[],onChange:t=>{b(s=>({...s,[e]:t}))},options:s.map(e=>({value:e.name,label:e.name})),maxTagCount:2})]},e)})})]}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,ee.jsx)(en.DatabaseOutlined,{className:"mr-2"})," Vector Store",(0,ee.jsx)(e$.Tooltip,{className:"ml-1",title:(0,ee.jsxs)("span",{children:["Select vector store(s) to use for this LLM API call. You can set up your vector store"," ",(0,ee.jsx)("a",{href:"?page=vector-stores",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,ee.jsx)(em.InfoCircleOutlined,{})})]}),(0,ee.jsx)(e5.default,{value:X,onChange:Y,className:"mb-4",accessToken:e||""})]}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,ee.jsx)(eb.SafetyOutlined,{className:"mr-2"})," Guardrails",(0,ee.jsx)(e$.Tooltip,{className:"ml-1",title:(0,ee.jsxs)("span",{children:["Select guardrail(s) to use for this LLM API call. You can set up your guardrails"," ",(0,ee.jsx)("a",{href:"?page=guardrails",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,ee.jsx)(em.InfoCircleOutlined,{})})]}),(0,ee.jsx)(eV.default,{value:Q,onChange:Z,className:"mb-4",accessToken:e||""})]}),(0,ee.jsxs)("div",{children:[(0,ee.jsxs)(eE.Text,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,ee.jsx)(eb.SafetyOutlined,{className:"mr-2"})," Policies",(0,ee.jsx)(e$.Tooltip,{className:"ml-1",title:(0,ee.jsxs)("span",{children:["Select policy/policies to apply to this LLM API call. Policies define which guardrails are applied based on conditions. You can set up your policies"," ",(0,ee.jsx)("a",{href:"?page=policies",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,ee.jsx)(em.InfoCircleOutlined,{})})]}),(0,ee.jsx)(eK.default,{value:eo,onChange:ec,className:"mb-4",accessToken:e||""})]}),B===s1.EndpointType.RESPONSES&&(0,ee.jsx)("div",{children:(0,ee.jsx)(rd,{accessToken:"session"===v?e||"":_,enabled:tx.enabled,onEnabledChange:tx.setEnabled,selectedContainerId:null,onContainerChange:()=>{},selectedModel:P||""})})]})]}),(0,ee.jsxs)("div",{className:"w-3/4 flex flex-col bg-white",children:[(0,ee.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,ee.jsx)(eC.Title,{className:"text-xl font-semibold mb-0",children:"Test Key"}),(0,ee.jsxs)("div",{className:"flex gap-2",children:[(0,ee.jsx)(eP.Button,{onClick:()=>{T.forEach(e=>{e.isAudio&&"string"==typeof e.content&&URL.revokeObjectURL(e.content)}),C([]),eg(null),eO(null),tu([]),tR(),tM(),tL(),t$(),sessionStorage.removeItem("chatHistory"),sessionStorage.removeItem("messageTraceId"),sessionStorage.removeItem("responsesSessionId"),e2.default.success("Chat history cleared.")},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:er.ClearOutlined,children:"Clear Chat"}),(0,ee.jsx)(eP.Button,{onClick:()=>tn(!0),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:ea.CodeOutlined,children:"Get Code"})]})]}),(0,ee.jsxs)("div",{className:"flex-1 overflow-auto p-4 pb-0",children:[0===T.length&&(0,ee.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,ee.jsx)(ex.RobotOutlined,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,ee.jsx)(eE.Text,{children:"Start a conversation, generate an image, or handle audio"})]}),T.map((t,s)=>(0,ee.jsx)("div",{children:(0,ee.jsx)("div",{className:`mb-4 ${"user"===t.role?"text-right":"text-left"}`,children:(0,ee.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"user"===t.role?"#f0f8ff":"#ffffff",border:"user"===t.role?"1px solid #e6f0fa":"1px solid #f0f0f0",textAlign:"left"},children:[(0,ee.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,ee.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"user"===t.role?"#e6f0fa":"#f5f5f5"},children:"user"===t.role?(0,ee.jsx)(eN.UserOutlined,{style:{fontSize:"12px",color:"#2563eb"}}):(0,ee.jsx)(ex.RobotOutlined,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,ee.jsx)("strong",{className:"text-sm capitalize",children:t.role}),"assistant"===t.role&&t.model&&(0,ee.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600 font-normal",children:t.model})]}),t.reasoningContent&&(0,ee.jsx)(rx,{reasoningContent:t.reasoningContent}),"assistant"===t.role&&s===T.length-1&&td.length>0&&(B===s1.EndpointType.RESPONSES||B===s1.EndpointType.CHAT)&&(0,ee.jsx)("div",{className:"mb-3",children:(0,ee.jsx)(rg,{events:td})}),"assistant"===t.role&&t.searchResults&&(0,ee.jsx)(rN,{searchResults:t.searchResults}),"assistant"===t.role&&s===T.length-1&&tx.result&&B===s1.EndpointType.RESPONSES&&(0,ee.jsx)(ro,{code:tx.result.code,containerId:tx.result.containerId,annotations:tx.result.annotations,accessToken:"session"===v?e||"":_}),(0,ee.jsxs)("div",{className:"whitespace-pre-wrap break-words max-w-full message-content",style:{wordWrap:"break-word",overflowWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},children:[t.isImage?(0,ee.jsx)("img",{src:"string"==typeof t.content?t.content:"",alt:"Generated image",className:"max-w-full rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"500px"}}):t.isAudio?(0,ee.jsx)(s0,{message:t}):(0,ee.jsxs)(ee.Fragment,{children:[B===s1.EndpointType.RESPONSES&&(0,ee.jsx)(r_,{message:t}),B===s1.EndpointType.CHAT&&(0,ee.jsx)(s9,{message:t}),(0,ee.jsx)(eq.default,{components:{code({node:e,inline:t,className:s,children:r,...a}){let n=/language-(\w+)/.exec(s||"");return!t&&n?(0,ee.jsx)(eB.Prism,{style:ez.coy,language:n[1],PreTag:"div",className:"rounded-md my-2",wrapLines:!0,wrapLongLines:!0,...a,children:String(r).replace(/\n$/,"")}):(0,ee.jsx)("code",{className:`${s} px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono`,style:{wordBreak:"break-word"},...a,children:r})},pre:({node:e,...t})=>(0,ee.jsx)("pre",{style:{overflowX:"auto",maxWidth:"100%"},...t})},children:"string"==typeof t.content?t.content:""}),t.image&&(0,ee.jsx)("div",{className:"mt-3",children:(0,ee.jsx)("img",{src:t.image.url,alt:"Generated image",className:"max-w-full rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"500px"}})})]}),"assistant"===t.role&&(t.timeToFirstToken||t.totalLatency||t.usage)&&!t.a2aMetadata&&(0,ee.jsx)(rb.default,{timeToFirstToken:t.timeToFirstToken,totalLatency:t.totalLatency,usage:t.usage,toolName:t.toolName}),"assistant"===t.role&&t.a2aMetadata&&(0,ee.jsx)(sX,{a2aMetadata:t.a2aMetadata,timeToFirstToken:t.timeToFirstToken,totalLatency:t.totalLatency})]})]})})},s)),H&&td.length>0&&(B===s1.EndpointType.RESPONSES||B===s1.EndpointType.CHAT)&&T.length>0&&"user"===T[T.length-1].role&&(0,ee.jsx)("div",{className:"text-left mb-4",children:(0,ee.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"#ffffff",border:"1px solid #f0f0f0",textAlign:"left"},children:[(0,ee.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,ee.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"#f5f5f5"},children:(0,ee.jsx)(ex.RobotOutlined,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,ee.jsx)("strong",{className:"text-sm capitalize",children:"Assistant"})]}),(0,ee.jsx)(rg,{events:td})]})}),H&&(0,ee.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,ee.jsx)(eL.Spin,{indicator:tD})}),(0,ee.jsx)("div",{ref:tb,style:{height:"1px"}})]}),(0,ee.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[B===s1.EndpointType.IMAGE_EDITS&&(0,ee.jsx)("div",{className:"mb-4",children:0===eF.length?(0,ee.jsxs)(rT,{beforeUpload:tI,accept:"image/*",showUploadList:!1,children:[(0,ee.jsx)("p",{className:"ant-upload-drag-icon",children:(0,ee.jsx)(ey,{style:{fontSize:"24px",color:"#666"}})}),(0,ee.jsx)("p",{className:"ant-upload-text text-sm",children:"Click or drag images to upload"}),(0,ee.jsx)("p",{className:"ant-upload-hint text-xs text-gray-500",children:"Support for PNG, JPG, JPEG formats. Multiple images supported."})]}):(0,ee.jsxs)("div",{className:"flex flex-wrap gap-2",children:[eF.map((e,t)=>(0,ee.jsxs)("div",{className:"relative inline-block",children:[(0,ee.jsx)("img",{src:eX[t]||"",alt:`Upload preview ${t+1}`,className:"max-w-32 max-h-32 rounded-md border border-gray-200 object-cover"}),(0,ee.jsx)("button",{className:"absolute top-1 right-1 bg-white shadow-sm border border-gray-200 rounded px-1 py-1 text-red-500 hover:bg-red-50 text-xs",onClick:()=>{eX[t]&&URL.revokeObjectURL(eX[t]),eW(e=>e.filter((e,s)=>s!==t)),eY(e=>e.filter((e,s)=>s!==t))},children:(0,ee.jsx)(ei.DeleteOutlined,{})})]},t)),(0,ee.jsxs)("div",{className:"flex items-center justify-center w-32 h-32 border-2 border-dashed border-gray-300 rounded-md hover:border-gray-400 cursor-pointer",onClick:()=>document.getElementById("additional-image-upload")?.click(),children:[(0,ee.jsxs)("div",{className:"text-center",children:[(0,ee.jsx)(ey,{style:{fontSize:"24px",color:"#666"}}),(0,ee.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Add more"})]}),(0,ee.jsx)("input",{id:"additional-image-upload",type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:e=>{Array.from(e.target.files||[]).forEach(e=>tI(e))}})]})]})}),B===s1.EndpointType.TRANSCRIPTION&&(0,ee.jsx)("div",{className:"mb-4",children:ts?(0,ee.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,ee.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,ee.jsx)(e_,{style:{fontSize:"20px",color:"#666"}}),(0,ee.jsx)("span",{className:"text-sm font-medium",children:ts.name}),(0,ee.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(ts.size/1024/1024).toFixed(2)," MB)"]})]}),(0,ee.jsxs)("button",{className:"bg-white shadow-sm border border-gray-200 rounded px-2 py-1 text-red-500 hover:bg-red-50 text-xs",onClick:t$,children:[(0,ee.jsx)(ei.DeleteOutlined,{})," Remove"]})]}):(0,ee.jsxs)(rT,{beforeUpload:e=>(tr(e),!1),accept:"audio/*,.mp3,.mp4,.mpeg,.mpga,.m4a,.wav,.webm",showUploadList:!1,children:[(0,ee.jsx)("p",{className:"ant-upload-drag-icon",children:(0,ee.jsx)(e_,{style:{fontSize:"24px",color:"#666"}})}),(0,ee.jsx)("p",{className:"ant-upload-text text-sm",children:"Click or drag audio file to upload"}),(0,ee.jsx)("p",{className:"ant-upload-hint text-xs text-gray-500",children:"Support for MP3, MP4, MPEG, MPGA, M4A, WAV, WEBM formats. Max file size: 25 MB."})]})}),B===s1.EndpointType.RESPONSES&&eQ&&(0,ee.jsx)("div",{className:"mb-2",children:(0,ee.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,ee.jsx)("div",{className:"relative inline-block",children:eQ.name.toLowerCase().endsWith(".pdf")?(0,ee.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,ee.jsx)(eu,{style:{fontSize:"16px",color:"white"}})}):(0,ee.jsx)("img",{src:e0||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ee.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:eQ.name}),(0,ee.jsx)("div",{className:"text-xs text-gray-500",children:eQ.name.toLowerCase().endsWith(".pdf")?"PDF":"Image"})]}),(0,ee.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:tM,children:(0,ee.jsx)(ei.DeleteOutlined,{style:{fontSize:"12px"}})})]})}),B===s1.EndpointType.CHAT&&e7&&(0,ee.jsx)("div",{className:"mb-2",children:(0,ee.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,ee.jsx)("div",{className:"relative inline-block",children:e7.name.toLowerCase().endsWith(".pdf")?(0,ee.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,ee.jsx)(eu,{style:{fontSize:"16px",color:"white"}})}):(0,ee.jsx)("img",{src:te||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ee.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e7.name}),(0,ee.jsx)("div",{className:"text-xs text-gray-500",children:e7.name.toLowerCase().endsWith(".pdf")?"PDF":"Image"})]}),(0,ee.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:tL,children:(0,ee.jsx)(ei.DeleteOutlined,{style:{fontSize:"12px"}})})]})}),B===s1.EndpointType.RESPONSES&&tx.enabled&&(0,ee.jsxs)("div",{className:"mb-2 space-y-2",children:[(0,ee.jsxs)("div",{className:"px-3 py-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200 flex items-center justify-between",children:[(0,ee.jsx)("div",{className:"flex items-center gap-2",children:H?(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(ef.LoadingOutlined,{className:"text-blue-500",spin:!0}),(0,ee.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:"Running Python code..."})]}):(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(ea.CodeOutlined,{className:"text-blue-500"}),(0,ee.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:"Code Interpreter Active"})]})}),(0,ee.jsx)("button",{className:"text-xs text-blue-500 hover:text-blue-700",onClick:()=>tx.setEnabled(!1),children:"Disable"})]}),!H&&(0,ee.jsx)("div",{className:"flex flex-wrap gap-2",children:["Generate sample sales data CSV and create a chart","Create a PNG bar chart comparing AI gateway providers including LiteLLM","Generate a CSV of LLM pricing data and visualize it as a line chart"].map((e,t)=>(0,ee.jsx)("button",{className:"text-xs px-3 py-1.5 bg-white border border-gray-200 rounded-full hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 transition-colors",onClick:()=>E(e),children:e},t))})]}),0===T.length&&!H&&B!==s1.EndpointType.MCP&&(0,ee.jsx)("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto",children:(B===s1.EndpointType.A2A_AGENTS?["What can you help me with?","Tell me about yourself","What tasks can you perform?"]:["Write me a poem","Explain quantum computing","Draft a polite email requesting a meeting"]).map(e=>(0,ee.jsx)("button",{type:"button",className:"shrink-0 rounded-full border border-gray-200 px-3 py-1 text-xs font-medium text-gray-600 transition-colors hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 cursor-pointer",onClick:()=>E(e),children:e},e))}),(0,ee.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ee.jsxs)("div",{className:"flex items-center flex-1 bg-white border border-gray-300 rounded-xl px-3 py-1 min-h-[44px]",children:[(0,ee.jsxs)("div",{className:"flex-shrink-0 mr-2 flex items-center gap-1",children:[B===s1.EndpointType.RESPONSES&&!eQ&&(0,ee.jsx)(rS,{responsesUploadedImage:eQ,responsesImagePreviewUrl:e0,onImageUpload:e=>(eZ(e),e6(URL.createObjectURL(e)),!1),onRemoveImage:tM}),B===s1.EndpointType.CHAT&&!e7&&(0,ee.jsx)(rs,{chatUploadedImage:e7,chatImagePreviewUrl:te,onImageUpload:e=>(e9(e),tt(URL.createObjectURL(e)),!1),onRemoveImage:tL}),B===s1.EndpointType.RESPONSES&&(0,ee.jsx)(e$.Tooltip,{title:tx.enabled?"Code Interpreter enabled (click to disable)":"Enable Code Interpreter",children:(0,ee.jsx)("button",{className:`p-1.5 rounded-md transition-colors ${tx.enabled?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"}`,onClick:()=>{tx.toggle(),tx.enabled||e2.default.success("Code Interpreter enabled!")},children:(0,ee.jsx)(ea.CodeOutlined,{style:{fontSize:"16px"}})})})]}),B===s1.EndpointType.MCP&&1===c.length&&"__all__"!==c[0]&&f?(0,ee.jsx)("div",{className:"flex-1 overflow-y-auto max-h-48 min-h-[44px] p-2 border border-gray-200 rounded-lg bg-gray-50/50",children:(i=(p[c[0]]||[]).find(e=>e.name===f))?(0,ee.jsx)(e1,{ref:y,tool:i,className:"space-y-2"}):(0,ee.jsx)("div",{className:"flex items-center justify-center h-10 text-sm text-gray-500",children:"Loading tool schema..."})}):(0,ee.jsx)(rE,{value:k,onChange:e=>E(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),tU())},placeholder:B===s1.EndpointType.CHAT||B===s1.EndpointType.EMBEDDINGS||B===s1.EndpointType.RESPONSES||B===s1.EndpointType.ANTHROPIC_MESSAGES?"Type your message... (Shift+Enter for new line)":B===s1.EndpointType.A2A_AGENTS?"Send a message to the A2A agent...":B===s1.EndpointType.IMAGE_EDITS?"Describe how you want to edit the image...":B===s1.EndpointType.SPEECH?"Enter text to convert to speech...":B===s1.EndpointType.TRANSCRIPTION?"Optional: Add context or prompt for transcription...":"Describe the image you want to generate...",disabled:H,className:"flex-1",autoSize:{minRows:1,maxRows:4},style:{resize:"none",border:"none",boxShadow:"none",background:"transparent",padding:"4px 0",fontSize:"14px",lineHeight:"20px"}}),(0,ee.jsx)(eP.Button,{onClick:tU,disabled:H||(B===s1.EndpointType.MCP?!(1===c.length&&"__all__"!==c[0]&&f):B===s1.EndpointType.TRANSCRIPTION?!ts:!k.trim()),className:"flex-shrink-0 ml-2 !w-8 !h-8 !min-w-8 !p-0 !rounded-full !bg-blue-600 hover:!bg-blue-700 disabled:!bg-gray-300 !border-none !text-white disabled:!text-gray-500 !flex !items-center !justify-center",children:(0,ee.jsx)(es.ArrowUpOutlined,{style:{fontSize:"14px"}})})]}),H&&(0,ee.jsx)(eP.Button,{onClick:()=>{W.current&&(W.current.abort(),W.current=null,F(!1),e2.default.info("Request cancelled"))},className:"bg-red-50 hover:bg-red-100 text-red-600 border-red-200",icon:ei.DeleteOutlined,children:"Cancel"})]})]})]})]})}),(0,ee.jsxs)(eI.Modal,{title:"Generated Code",visible:ta,onCancel:()=>tn(!1),footer:null,width:800,children:[(0,ee.jsxs)("div",{className:"flex justify-between items-end my-4",children:[(0,ee.jsxs)("div",{children:[(0,ee.jsx)(eE.Text,{className:"font-medium block mb-1 text-gray-700",children:"SDK Type"}),(0,ee.jsx)(eM.Select,{value:tl,onChange:e=>tc(e),style:{width:150},options:[{value:"openai",label:"OpenAI SDK"},{value:"azure",label:"Azure SDK"}]})]}),(0,ee.jsx)(eA.Button,{onClick:()=>{navigator.clipboard.writeText(ti),e2.default.success("Copied to clipboard!")},children:"Copy to Clipboard"})]}),(0,ee.jsx)(eB.Prism,{language:"python",style:ez.coy,wrapLines:!0,wrapLongLines:!0,className:"rounded-md",customStyle:{maxHeight:"60vh",overflowY:"auto"},children:ti})]})]})}],220486)}]);