"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9632],{10178:function(e,t,r){r.d(t,{JO:function(){return s.Z},RM:function(){return a.Z},SC:function(){return i.Z},iA:function(){return l.Z},pj:function(){return o.Z},ss:function(){return c.Z},xs:function(){return n.Z}});var s=r(47323),l=r(21626),a=r(97214),o=r(28241),c=r(58834),n=r(69552),i=r(71876)},9632:function(e,t,r){r.d(t,{Z:function(){return eh}});var s,l,a=r(57437),o=r(2265),c=r(20831),n=r(49804),i=r(67101),d=r(47323),x=r(84264),m=r(23628),h=r(19250),u=r(10178),p=r(53410),v=r(74998),j=r(44633),g=r(86462),f=r(49084),_=r(89970),y=r(71594),b=r(24525),N=r(42673),w=e=>{let{data:t,onView:r,onEdit:s,onDelete:l}=e,[c,n]=o.useState([{id:"created_at",desc:!0}]),i=[{header:"Vector Store ID",accessorKey:"vector_store_id",cell:e=>{let{row:t}=e,s=t.original;return(0,a.jsx)("button",{onClick:()=>r(s.vector_store_id),className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",children:s.vector_store_id.length>15?"".concat(s.vector_store_id.slice(0,15),"..."):s.vector_store_id})}},{header:"Name",accessorKey:"vector_store_name",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)(_.Z,{title:r.vector_store_name,children:(0,a.jsx)("span",{className:"text-xs",children:r.vector_store_name||"-"})})}},{header:"Description",accessorKey:"vector_store_description",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)(_.Z,{title:r.vector_store_description,children:(0,a.jsx)("span",{className:"text-xs",children:r.vector_store_description||"-"})})}},{header:"Provider",accessorKey:"custom_llm_provider",cell:e=>{let{row:t}=e,r=t.original,{displayName:s,logo:l}=(0,N.dr)(r.custom_llm_provider);return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&(0,a.jsx)("img",{src:l,alt:s,className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-xs",children:s})]})}},{header:"Created At",accessorKey:"created_at",sortingFn:"datetime",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("span",{className:"text-xs",children:new Date(r.created_at).toLocaleDateString()})}},{header:"Updated At",accessorKey:"updated_at",sortingFn:"datetime",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("span",{className:"text-xs",children:new Date(r.updated_at).toLocaleDateString()})}},{id:"actions",header:"",cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(u.JO,{icon:p.Z,size:"sm",onClick:()=>s(r.vector_store_id),className:"cursor-pointer"}),(0,a.jsx)(u.JO,{icon:v.Z,size:"sm",onClick:()=>l(r.vector_store_id),className:"cursor-pointer"})]})}}],d=(0,y.b7)({data:t,columns:i,state:{sorting:c},onSortingChange:n,getCoreRowModel:(0,b.sC)(),getSortedRowModel:(0,b.tj)(),enableSorting:!0});return(0,a.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(u.iA,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,a.jsx)(u.ss,{children:d.getHeaderGroups().map(e=>(0,a.jsx)(u.SC,{children:e.headers.map(e=>(0,a.jsx)(u.xs,{className:"py-1 h-8 ".concat("actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""),onClick:e.column.getToggleSortingHandler(),children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,y.ie)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&(0,a.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,a.jsx)(j.Z,{className:"h-4 w-4 text-blue-500"}),desc:(0,a.jsx)(g.Z,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,a.jsx)(f.Z,{className:"h-4 w-4 text-gray-400"})})]})},e.id))},e.id))}),(0,a.jsx)(u.RM,{children:d.getRowModel().rows.length>0?d.getRowModel().rows.map(e=>(0,a.jsx)(u.SC,{className:"h-8",children:e.getVisibleCells().map(e=>(0,a.jsx)(u.pj,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ".concat("actions"===e.column.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""),children:(0,y.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(u.SC,{children:(0,a.jsx)(u.pj,{colSpan:i.length,className:"h-8 text-center",children:(0,a.jsx)("div",{className:"text-center text-gray-500",children:(0,a.jsx)("p",{children:"No vector stores found"})})})})})]})})})},Z=r(64504),S=r(13634),C=r(82680),I=r(52787),k=r(61778),A=r(64482),E=r(15424);(s=l||(l={})).Bedrock="Amazon Bedrock",s.PgVector="PostgreSQL pgvector (LiteLLM Connector)",s.VertexRagEngine="Vertex AI RAG Engine",s.OpenAI="OpenAI",s.Azure="Azure OpenAI";let L={Bedrock:"bedrock",PgVector:"pg_vector",VertexRagEngine:"vertex_ai",OpenAI:"openai",Azure:"azure"},V="/ui/assets/logos/",D={"Amazon Bedrock":"".concat(V,"bedrock.svg"),"PostgreSQL pgvector (LiteLLM Connector)":"".concat(V,"postgresql.svg"),"Vertex AI RAG Engine":"".concat(V,"google.svg"),OpenAI:"".concat(V,"openai_small.svg"),"Azure OpenAI":"".concat(V,"microsoft_azure.svg")},P={bedrock:[],pg_vector:[{name:"api_base",label:"API Base",tooltip:"Enter the base URL of your deployed litellm-pgvector server (e.g., http://your-server:8000)",placeholder:"http://your-deployed-server:8000",required:!0,type:"text"},{name:"api_key",label:"API Key",tooltip:"Enter the API key from your deployed litellm-pgvector server",placeholder:"your-deployed-api-key",required:!0,type:"password"}],vertex_rag_engine:[],openai:[{name:"api_key",label:"API Key",tooltip:"Enter your OpenAI API key",placeholder:"sk-...",required:!0,type:"password"}],azure:[{name:"api_key",label:"API Key",tooltip:"Enter your Azure OpenAI API key",placeholder:"your-azure-api-key",required:!0,type:"password"},{name:"api_base",label:"API Base",tooltip:"Enter your Azure OpenAI endpoint (e.g., https://your-resource.openai.azure.com/)",placeholder:"https://your-resource.openai.azure.com/",required:!0,type:"text"}]},O=e=>P[e]||[];var z=r(9114),R=e=>{let{isVisible:t,onCancel:r,onSuccess:s,accessToken:c,credentials:n}=e,[i]=S.Z.useForm(),[d,x]=(0,o.useState)("{}"),[m,u]=(0,o.useState)("bedrock"),p=async e=>{if(c)try{let t={};try{t=d.trim()?JSON.parse(d):{}}catch(e){z.Z.fromBackend("Invalid JSON in metadata field");return}let r={vector_store_id:e.vector_store_id,custom_llm_provider:e.custom_llm_provider,vector_store_name:e.vector_store_name,vector_store_description:e.vector_store_description,vector_store_metadata:t,litellm_credential_name:e.litellm_credential_name},l=O(e.custom_llm_provider).reduce((t,r)=>(t[r.name]=e[r.name],t),{});r.litellm_params=l,await (0,h.vectorStoreCreateCall)(c,r),z.Z.success("Vector store created successfully"),i.resetFields(),x("{}"),s()}catch(e){console.error("Error creating vector store:",e),z.Z.fromBackend("Error creating vector store: "+e)}},v=()=>{i.resetFields(),x("{}"),u("bedrock"),r()};return(0,a.jsx)(C.Z,{title:"Add New Vector Store",visible:t,width:1e3,footer:null,onCancel:v,children:(0,a.jsxs)(S.Z,{form:i,onFinish:p,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,a.jsx)(S.Z.Item,{label:(0,a.jsxs)("span",{children:["Provider"," ",(0,a.jsx)(_.Z,{title:"Select the provider for this vector store",children:(0,a.jsx)(E.Z,{style:{marginLeft:"4px"}})})]}),name:"custom_llm_provider",rules:[{required:!0,message:"Please select a provider"}],initialValue:"bedrock",children:(0,a.jsx)(I.default,{onChange:e=>u(e),children:Object.entries(l).map(e=>{let[t,r]=e;return(0,a.jsx)(I.default.Option,{value:L[t],children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:D[r],alt:"".concat(t," logo"),className:"w-5 h-5",onError:e=>{let t=e.target,s=t.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=r.charAt(0),s.replaceChild(e,t)}}}),(0,a.jsx)("span",{children:r})]})},t)})})}),"pg_vector"===m&&(0,a.jsx)(k.Z,{message:"PG Vector Setup Required",description:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"LiteLLM provides a server to connect to PG Vector. To use this provider:"}),(0,a.jsxs)("ol",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,a.jsxs)("li",{children:["Deploy the litellm-pgvector server from:"," ",(0,a.jsx)("a",{href:"https://github.com/BerriAI/litellm-pgvector",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/BerriAI/litellm-pgvector"})]}),(0,a.jsx)("li",{children:"Configure your PostgreSQL database with pgvector extension"}),(0,a.jsx)("li",{children:"Start the server and note the API base URL and API key"}),(0,a.jsx)("li",{children:"Enter those details in the fields below"})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),"vertex_rag_engine"===m&&(0,a.jsx)(k.Z,{message:"Vertex AI RAG Engine Setup",description:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"To use Vertex AI RAG Engine:"}),(0,a.jsxs)("ol",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,a.jsxs)("li",{children:["Set up your Vertex AI RAG Engine corpus following the guide:"," ",(0,a.jsx)("a",{href:"https://cloud.google.com/vertex-ai/generative-ai/docs/rag-engine/rag-overview",target:"_blank",rel:"noopener noreferrer",children:"Vertex AI RAG Engine Overview"})]}),(0,a.jsx)("li",{children:"Create a corpus in your Google Cloud project"}),(0,a.jsx)("li",{children:"Note the corpus ID from the Vertex AI console"}),(0,a.jsx)("li",{children:"Enter the corpus ID in the Vector Store ID field below"})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),(0,a.jsx)(S.Z.Item,{label:(0,a.jsxs)("span",{children:["Vector Store ID"," ",(0,a.jsx)(_.Z,{title:"Enter the vector store ID from your api provider",children:(0,a.jsx)(E.Z,{style:{marginLeft:"4px"}})})]}),name:"vector_store_id",rules:[{required:!0,message:"Please input the vector store ID from your api provider"}],children:(0,a.jsx)(Z.o,{placeholder:"vertex_rag_engine"===m?"6917529027641081856 (Get corpus ID from Vertex AI console)":"Enter vector store ID from your provider"})}),O(m).map(e=>(0,a.jsx)(S.Z.Item,{label:(0,a.jsxs)("span",{children:[e.label," ",(0,a.jsx)(_.Z,{title:e.tooltip,children:(0,a.jsx)(E.Z,{style:{marginLeft:"4px"}})})]}),name:e.name,rules:e.required?[{required:!0,message:"Please input the ".concat(e.label.toLowerCase())}]:[],children:(0,a.jsx)(Z.o,{type:e.type||"text",placeholder:e.placeholder})},e.name)),(0,a.jsx)(S.Z.Item,{label:(0,a.jsxs)("span",{children:["Vector Store Name"," ",(0,a.jsx)(_.Z,{title:"Custom name you want to give to the vector store, this name will be rendered on the LiteLLM UI",children:(0,a.jsx)(E.Z,{style:{marginLeft:"4px"}})})]}),name:"vector_store_name",children:(0,a.jsx)(Z.o,{})}),(0,a.jsx)(S.Z.Item,{label:"Description",name:"vector_store_description",children:(0,a.jsx)(A.default.TextArea,{rows:4})}),(0,a.jsx)(S.Z.Item,{label:(0,a.jsxs)("span",{children:["Existing Credentials"," ",(0,a.jsx)(_.Z,{title:"Optionally select API provider credentials for this vector store eg. Bedrock API KEY",children:(0,a.jsx)(E.Z,{style:{marginLeft:"4px"}})})]}),name:"litellm_credential_name",children:(0,a.jsx)(I.default,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,t)=>{var r;return(null!==(r=null==t?void 0:t.label)&&void 0!==r?r:"").toLowerCase().includes(e.toLowerCase())},options:[{value:null,label:"None"},...n.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,a.jsx)(S.Z.Item,{label:(0,a.jsxs)("span",{children:["Metadata"," ",(0,a.jsx)(_.Z,{title:"JSON metadata for the vector store (optional)",children:(0,a.jsx)(E.Z,{style:{marginLeft:"4px"}})})]}),children:(0,a.jsx)(A.default.TextArea,{rows:4,value:d,onChange:e=>x(e.target.value),placeholder:'{"key": "value"}'})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(Z.z,{onClick:v,variant:"secondary",children:"Cancel"}),(0,a.jsx)(Z.z,{variant:"primary",type:"submit",children:"Create"})]})]})})},B=r(16312),T=e=>{let{isVisible:t,onCancel:r,onConfirm:s}=e;return(0,a.jsxs)(C.Z,{title:"Delete Vector Store",visible:t,footer:null,onCancel:r,children:[(0,a.jsx)("p",{children:"Are you sure you want to delete this vector store? This action cannot be undone."}),(0,a.jsxs)("div",{className:"px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,a.jsx)(B.z,{onClick:s,color:"red",className:"ml-2",children:"Delete"}),(0,a.jsx)(B.z,{onClick:r,variant:"primary",children:"Cancel"})]})]})},q=r(41649),F=r(12514),M=r(12485),K=r(18135),J=r(35242),G=r(29706),U=r(77991),Q=r(96761),H=r(73002),Y=r(10900),W=r(93192),X=r(42264),$=r(67960),ee=r(23496),et=r(87908),er=r(44625),es=r(70464),el=r(77565),ea=r(61935),eo=r(23907);let{TextArea:ec}=A.default,{Text:en,Title:ei}=W.default;var ed=e=>{let{vectorStoreId:t,accessToken:r,className:s=""}=e,[l,c]=(0,o.useState)(""),[n,i]=(0,o.useState)(!1),[d,x]=(0,o.useState)([]),[m,u]=(0,o.useState)({}),p=async()=>{if(!l.trim()){X.ZP.warning("Please enter a search query");return}i(!0);try{let e=await (0,h.vectorStoreSearchCall)(r,t,l),s={query:l,response:e,timestamp:Date.now()};x(e=>[s,...e]),c("")}catch(e){console.error("Error searching vector store:",e),z.Z.fromBackend("Failed to search vector store")}finally{i(!1)}},v=e=>new Date(e).toLocaleString(),j=(e,t)=>{let r="".concat(e,"-").concat(t);u(e=>({...e,[r]:!e[r]}))};return(0,a.jsx)($.Z,{className:"w-full rounded-xl shadow-md",children:(0,a.jsxs)("div",{className:"flex flex-col h-[600px]",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(er.Z,{className:"mr-2 text-blue-500"}),(0,a.jsx)(ei,{level:4,className:"mb-0",children:"Test Vector Store"})]}),d.length>0&&(0,a.jsx)(H.ZP,{onClick:()=>{x([]),u({}),z.Z.success("Search history cleared")},size:"small",children:"Clear History"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-4 pb-0",children:[0===d.length?(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,a.jsx)(er.Z,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,a.jsx)(en,{children:"Test your vector store by entering a search query below"})]}):(0,a.jsx)("div",{className:"space-y-4",children:d.map((e,t)=>{var r;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3 bg-blue-50 border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("strong",{className:"text-sm",children:"Query"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:v(e.timestamp)})]}),(0,a.jsx)("div",{className:"text-left",children:e.query})]})}),(0,a.jsx)("div",{className:"text-left",children:(0,a.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3 bg-white border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(er.Z,{className:"text-green-500"}),(0,a.jsx)("strong",{className:"text-sm",children:"Vector Store Results"}),e.response&&(0,a.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600",children:[(null===(r=e.response.data)||void 0===r?void 0:r.length)||0," results"]})]}),e.response&&e.response.data&&e.response.data.length>0?(0,a.jsx)("div",{className:"space-y-3",children:e.response.data.map((e,r)=>{let s=m["".concat(t,"-").concat(r)]||!1;return(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>j(t,r),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[s?(0,a.jsx)(es.Z,{className:"text-gray-500 mr-2"}):(0,a.jsx)(el.Z,{className:"text-gray-500 mr-2"}),(0,a.jsxs)("span",{className:"font-medium text-sm",children:["Result ",r+1]}),!s&&e.content&&e.content[0]&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-500 truncate max-w-md",children:["- ",e.content[0].text.substring(0,100),"..."]})]}),(0,a.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Score: ",e.score.toFixed(4)]})]}),s&&(0,a.jsxs)("div",{className:"border-t bg-white p-3",children:[e.content&&e.content.map((e,t)=>(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["Content (",e.type,")"]}),(0,a.jsx)("div",{className:"text-sm bg-gray-50 p-3 rounded border text-gray-800 max-h-40 overflow-y-auto",children:e.text})]},t)),(e.file_id||e.filename||e.attributes)&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Metadata"}),(0,a.jsxs)("div",{className:"space-y-2 text-xs",children:[e.file_id&&(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsx)("span",{className:"font-medium",children:"File ID:"})," ",e.file_id]}),e.filename&&(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsx)("span",{className:"font-medium",children:"Filename:"})," ",e.filename]}),e.attributes&&Object.keys(e.attributes).length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsx)("span",{className:"font-medium block mb-1",children:"Attributes:"}),(0,a.jsx)("pre",{className:"text-xs bg-white p-2 rounded border overflow-x-auto",children:JSON.stringify(e.attributes,null,2)})]})]})]})]})]},r)})}):(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"No results found"})]})}),t<d.length-1&&(0,a.jsx)(ee.Z,{})]},t)})}),n&&(0,a.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,a.jsx)(et.Z,{indicator:(0,a.jsx)(ea.Z,{style:{fontSize:24},spin:!0})})})]}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-200 bg-white",children:(0,a.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(ec,{value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},placeholder:"Enter your search query... (Shift+Enter for new line)",disabled:n,autoSize:{minRows:1,maxRows:4},style:{resize:"none"}})}),(0,a.jsx)(H.ZP,{type:"primary",onClick:p,disabled:n||!l.trim(),icon:(0,a.jsx)(eo.Z,{}),loading:n,children:"Search"})]})})]})})},ex=e=>{let{vectorStoreId:t,onClose:r,accessToken:s,is_admin:l,editVectorStore:n}=e,[i]=S.Z.useForm(),[d,m]=(0,o.useState)(null),[u,p]=(0,o.useState)(n),[v,j]=(0,o.useState)("{}"),[g,f]=(0,o.useState)([]),[y,b]=(0,o.useState)("details"),w=async()=>{if(s)try{let e=await (0,h.vectorStoreInfoCall)(s,t);if(e&&e.vector_store){if(m(e.vector_store),e.vector_store.vector_store_metadata){let t="string"==typeof e.vector_store.vector_store_metadata?JSON.parse(e.vector_store.vector_store_metadata):e.vector_store.vector_store_metadata;j(JSON.stringify(t,null,2))}n&&i.setFieldsValue({vector_store_id:e.vector_store.vector_store_id,custom_llm_provider:e.vector_store.custom_llm_provider,vector_store_name:e.vector_store.vector_store_name,vector_store_description:e.vector_store.vector_store_description})}}catch(e){console.error("Error fetching vector store details:",e),z.Z.fromBackend("Error fetching vector store details: "+e)}},Z=async()=>{if(s)try{let e=await (0,h.credentialListCall)(s);console.log("List credentials response:",e),f(e.credentials||[])}catch(e){console.error("Error fetching credentials:",e)}};(0,o.useEffect)(()=>{w(),Z()},[t,s]);let C=async e=>{if(s)try{let t={};try{t=v?JSON.parse(v):{}}catch(e){z.Z.fromBackend("Invalid JSON in metadata field");return}let r={vector_store_id:e.vector_store_id,custom_llm_provider:e.custom_llm_provider,vector_store_name:e.vector_store_name,vector_store_description:e.vector_store_description,vector_store_metadata:t};await (0,h.vectorStoreUpdateCall)(s,r),z.Z.success("Vector store updated successfully"),p(!1),w()}catch(e){console.error("Error updating vector store:",e),z.Z.fromBackend("Error updating vector store: "+e)}};return d?(0,a.jsxs)("div",{className:"p-4 max-w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.Z,{icon:Y.Z,variant:"light",className:"mb-4",onClick:r,children:"Back to Vector Stores"}),(0,a.jsxs)(Q.Z,{children:["Vector Store ID: ",d.vector_store_id]}),(0,a.jsx)(x.Z,{className:"text-gray-500",children:d.vector_store_description||"No description"})]}),l&&!u&&(0,a.jsx)(c.Z,{onClick:()=>p(!0),children:"Edit Vector Store"})]}),(0,a.jsxs)(K.Z,{children:[(0,a.jsxs)(J.Z,{className:"mb-6",children:[(0,a.jsx)(M.Z,{children:"Details"}),(0,a.jsx)(M.Z,{children:"Test Vector Store"})]}),(0,a.jsxs)(U.Z,{children:[(0,a.jsx)(G.Z,{children:u?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)(Q.Z,{children:"Edit Vector Store"})}),(0,a.jsx)(F.Z,{children:(0,a.jsxs)(S.Z,{form:i,onFinish:C,layout:"vertical",initialValues:d,children:[(0,a.jsx)(S.Z.Item,{label:"Vector Store ID",name:"vector_store_id",rules:[{required:!0,message:"Please input a vector store ID"}],children:(0,a.jsx)(A.default,{disabled:!0})}),(0,a.jsx)(S.Z.Item,{label:"Vector Store Name",name:"vector_store_name",children:(0,a.jsx)(A.default,{})}),(0,a.jsx)(S.Z.Item,{label:"Description",name:"vector_store_description",children:(0,a.jsx)(A.default.TextArea,{rows:4})}),(0,a.jsx)(S.Z.Item,{label:(0,a.jsxs)("span",{children:["Provider"," ",(0,a.jsx)(_.Z,{title:"Select the provider for this vector store",children:(0,a.jsx)(E.Z,{style:{marginLeft:"4px"}})})]}),name:"custom_llm_provider",rules:[{required:!0,message:"Please select a provider"}],children:(0,a.jsx)(I.default,{children:Object.entries(N.Cl).map(e=>{let[t,r]=e;return"Bedrock"===t?(0,a.jsx)(I.default.Option,{value:N.fK[t],children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("img",{src:N.cd[r],alt:"".concat(t," logo"),className:"w-5 h-5",onError:e=>{let t=e.target,s=t.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=r.charAt(0),s.replaceChild(e,t)}}}),(0,a.jsx)("span",{children:r})]})},t):null})})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(x.Z,{className:"text-sm text-gray-500 mb-2",children:"Either select existing credentials OR enter provider credentials below"})}),(0,a.jsx)(S.Z.Item,{label:"Existing Credentials",name:"litellm_credential_name",children:(0,a.jsx)(I.default,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,t)=>{var r;return(null!==(r=null==t?void 0:t.label)&&void 0!==r?r:"").toLowerCase().includes(e.toLowerCase())},options:[{value:null,label:"None"},...g.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,a.jsxs)("div",{className:"flex items-center my-4",children:[(0,a.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,a.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,a.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(0,a.jsx)(S.Z.Item,{label:(0,a.jsxs)("span",{children:["Metadata"," ",(0,a.jsx)(_.Z,{title:"JSON metadata for the vector store",children:(0,a.jsx)(E.Z,{style:{marginLeft:"4px"}})})]}),children:(0,a.jsx)(A.default.TextArea,{rows:4,value:v,onChange:e=>j(e.target.value),placeholder:'{"key": "value"}'})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(H.ZP,{onClick:()=>p(!1),children:"Cancel"}),(0,a.jsx)(H.ZP,{type:"primary",htmlType:"submit",children:"Save Changes"})]})]})})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(Q.Z,{children:"Vector Store Details"}),l&&(0,a.jsx)(c.Z,{onClick:()=>p(!0),children:"Edit Vector Store"})]}),(0,a.jsx)(F.Z,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Z,{className:"font-medium",children:"ID"}),(0,a.jsx)(x.Z,{children:d.vector_store_id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Z,{className:"font-medium",children:"Name"}),(0,a.jsx)(x.Z,{children:d.vector_store_name||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Z,{className:"font-medium",children:"Description"}),(0,a.jsx)(x.Z,{children:d.vector_store_description||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Z,{className:"font-medium",children:"Provider"}),(0,a.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(()=>{let e=d.custom_llm_provider||"bedrock",{displayName:t,logo:r}=(()=>{let t=Object.keys(N.fK).find(t=>N.fK[t].toLowerCase()===e.toLowerCase());if(!t)return{displayName:e,logo:""};let r=N.Cl[t],s=N.cd[r];return{displayName:r,logo:s}})();return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)("img",{src:r,alt:"".concat(t," logo"),className:"w-5 h-5",onError:e=>{let r=e.target,s=r.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,r)}}}),(0,a.jsx)(q.Z,{color:"blue",children:t})]})})()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Z,{className:"font-medium",children:"Metadata"}),(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded mt-2 font-mono text-xs overflow-auto max-h-48",children:(0,a.jsx)("pre",{children:v})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Z,{className:"font-medium",children:"Created"}),(0,a.jsx)(x.Z,{children:d.created_at?new Date(d.created_at).toLocaleString():"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(x.Z,{className:"font-medium",children:"Last Updated"}),(0,a.jsx)(x.Z,{children:d.updated_at?new Date(d.updated_at).toLocaleString():"-"})]})]})})]})}),(0,a.jsx)(G.Z,{children:(0,a.jsx)(ed,{vectorStoreId:d.vector_store_id,accessToken:s||""})})]})]})]}):(0,a.jsx)("div",{children:"Loading..."})},em=r(20347),eh=e=>{let{accessToken:t,userID:r,userRole:s}=e,[l,u]=(0,o.useState)([]),[p,v]=(0,o.useState)(!1),[j,g]=(0,o.useState)(!1),[f,_]=(0,o.useState)(null),[y,b]=(0,o.useState)(""),[N,Z]=(0,o.useState)([]),[S,C]=(0,o.useState)(null),[I,k]=(0,o.useState)(!1),A=async()=>{if(t)try{let e=await (0,h.vectorStoreListCall)(t);console.log("List vector stores response:",e),u(e.data||[])}catch(e){console.error("Error fetching vector stores:",e),z.Z.fromBackend("Error fetching vector stores: "+e)}},E=async()=>{if(t)try{let e=await (0,h.credentialListCall)(t);console.log("List credentials response:",e),Z(e.credentials||[])}catch(e){console.error("Error fetching credentials:",e),z.Z.fromBackend("Error fetching credentials: "+e)}},L=async e=>{_(e),g(!0)},V=async()=>{if(t&&f){try{await (0,h.vectorStoreDeleteCall)(t,f),z.Z.success("Vector store deleted successfully"),A()}catch(e){console.error("Error deleting vector store:",e),z.Z.fromBackend("Error deleting vector store: "+e)}g(!1),_(null)}};return(0,o.useEffect)(()=>{A(),E()},[t]),S?(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(ex,{vectorStoreId:S,onClose:()=>{C(null),k(!1),A()},accessToken:t,is_admin:(0,em.tY)(s||""),editVectorStore:I})}):(0,a.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,a.jsxs)("div",{className:"gap-2 p-8 h-[75vh] w-full mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between mt-2 w-full items-center mb-4",children:[(0,a.jsx)("h1",{children:"Vector Store Management"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[y&&(0,a.jsxs)(x.Z,{children:["Last Refreshed: ",y]}),(0,a.jsx)(d.Z,{icon:m.Z,variant:"shadow",size:"xs",className:"self-center cursor-pointer",onClick:()=>{A(),E(),b(new Date().toLocaleString())}})]})]}),(0,a.jsx)(x.Z,{className:"mb-4",children:(0,a.jsx)("p",{children:"You can use vector stores to store and retrieve LLM embeddings.."})}),(0,a.jsx)(c.Z,{className:"mb-4",onClick:()=>v(!0),children:"+ Add Vector Store"}),(0,a.jsx)(i.Z,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,a.jsx)(n.Z,{numColSpan:1,children:(0,a.jsx)(w,{data:l,onView:e=>{C(e),k(!1)},onEdit:e=>{C(e),k(!0)},onDelete:L})})}),(0,a.jsx)(R,{isVisible:p,onCancel:()=>v(!1),onSuccess:()=>{v(!1),A()},accessToken:t,credentials:N}),(0,a.jsx)(T,{isVisible:j,onCancel:()=>g(!1),onConfirm:V})]})})}}}]);