"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7029],{19046:function(e,t,s){s.d(t,{Dx:function(){return r.Z},Zb:function(){return a.Z},oi:function(){return l.Z},xv:function(){return n.Z},zx:function(){return o.Z}});var o=s(20831),a=s(12514),n=s(84264),l=s(49566),r=s(96761)},47029:function(e,t,s){s.d(t,{Z:function(){return eH}});var o=s(57437),a=s(19046),n=s(2265),l=s(243),r=s(93837),i=s(61935),c=s(92403),d=s(69993),m=s(12660),u=s(25980),g=s(71891),p=s(58630),x=s(15424),h=s(44625),f=s(57400),b=s(26430),v=s(11894),y=s(15883),j=s(99890),N=s(26349),w=s(50010),S=s(79276),k=s(64482),P=s(65319),C=s(93192),I=s(52787),A=s(3810),E=s(89970),_=s(87908),T=s(82680),Z=s(73002),R=s(17906),U=s(94263),L=s(67479),M=s(9114),O=s(19250),K=e=>{let{onChange:t,value:s,className:a,accessToken:l}=e,[r,i]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async()=>{if(l)try{let e=await (0,O.tagListCall)(l);console.log("List tags response:",e),i(Object.values(e))}catch(e){console.error("Error fetching tags:",e)}finally{d(!1)}})()},[l]),(0,o.jsx)(I.default,{mode:"tags",showSearch:!0,placeholder:"Select or create tags",onChange:t,value:s,loading:c,className:a,options:r.map(e=>({label:e.name,value:e.name,title:e.description||e.name})),optionFilterProp:"label",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"}})},D=s(97415),z=e=>{let{message:t}=e;return t.isAudio&&"string"==typeof t.content?(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsx)("audio",{controls:!0,src:t.content,className:"max-w-full",style:{maxWidth:"500px"},children:"Your browser does not support the audio element."})}):null},B=s(49817);let F={ALLOY:"Alloy - Professional and confident",ASH:"Ash - Casual and relaxed",BALAD:"Ballad - Smooth and melodic",CORAL:"Coral - Warm and engaging",ECHO:"Echo - Friendly and conversational",FABLE:"Fable - Wise and measured",NOVA:"Nova - Friendly and conversational",ONYX:"Onyx - Deep and authoritative",SAGE:"Sage - Wise and measured",SHIMMER:"Shimmer - Bright and cheerful"},H=Object.entries({ALLOY:"alloy",ASH:"ash",BALAD:"ballad",CORAL:"coral",ECHO:"echo",FABLE:"fable",NOVA:"nova",ONYX:"onyx",SAGE:"sage",SHIMMER:"shimmer"}).map(e=>{let[t,s]=e;return{value:s,label:F[t]}}),G=[{value:B.KP.CHAT,label:"/v1/chat/completions"},{value:B.KP.RESPONSES,label:"/v1/responses"},{value:B.KP.ANTHROPIC_MESSAGES,label:"/v1/messages"},{value:B.KP.IMAGE,label:"/v1/images/generations"},{value:B.KP.IMAGE_EDITS,label:"/v1/images/edits"},{value:B.KP.EMBEDDINGS,label:"/v1/embeddings"},{value:B.KP.SPEECH,label:"/v1/audio/speech"},{value:B.KP.TRANSCRIPTION,label:"/v1/audio/transcriptions"}],q=e=>new Promise((t,s)=>{let o=new FileReader;o.onload=()=>{t(o.result)},o.onerror=s,o.readAsDataURL(e)}),J=async(e,t)=>({role:"user",content:[{type:"text",text:e},{type:"image_url",image_url:{url:await q(t)}}]}),W=(e,t,s,o)=>{let a="";t&&o&&(a=o.toLowerCase().endsWith(".pdf")?"[PDF attached]":"[Image attached]");let n={role:"user",content:t?"".concat(e," ").concat(a):e};return t&&s&&(n.imagePreviewUrl=s),n},V=e=>"user"===e.role&&"string"==typeof e.content&&(e.content.includes("[Image attached]")||e.content.includes("[PDF attached]"))&&!!e.imagePreviewUrl;var Y=e=>{let{message:t}=e;if(!V(t))return null;let s="string"==typeof t.content&&t.content.includes("[PDF attached]");return(0,o.jsx)("div",{className:"mb-2",children:s?(0,o.jsx)("div",{className:"w-64 h-32 rounded-md border border-gray-200 bg-red-50 flex items-center justify-center",children:(0,o.jsx)(w.Z,{style:{fontSize:"48px",color:"#dc2626"}})}):(0,o.jsx)("img",{src:t.imagePreviewUrl,alt:"User uploaded image",className:"max-w-64 rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"200px"}})})},X=s(53508);let{Dragger:$}=P.default;var Q=e=>{let{chatUploadedImage:t,chatImagePreviewUrl:s,onImageUpload:a,onRemoveImage:n}=e;return(0,o.jsx)(o.Fragment,{children:!t&&(0,o.jsx)($,{beforeUpload:a,accept:"image/*,.pdf",showUploadList:!1,className:"inline-block",style:{padding:0,border:"none",background:"none"},children:(0,o.jsx)(E.Z,{title:"Attach image or PDF",children:(0,o.jsx)("button",{type:"button",className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:(0,o.jsx)(X.Z,{style:{fontSize:"16px"}})})})})})},ee=s(88658),et=s(92280),es=e=>{let{endpointType:t,onEndpointChange:s,className:a}=e;return(0,o.jsxs)("div",{className:a,children:[(0,o.jsx)(et.x,{children:"Endpoint Type:"}),(0,o.jsx)(I.default,{showSearch:!0,value:t,style:{width:"100%"},onChange:s,options:G,className:"rounded-md"})]})},eo=s(85498);async function ea(e,t,s,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],n=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,r=arguments.length>7?arguments[7]:void 0,i=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,u=arguments.length>12?arguments[12]:void 0;if(!o)throw Error("API key is required");console.log=function(){};let g=(0,O.getProxyBaseUrl)(),p={};a&&a.length>0&&(p["x-litellm-tags"]=a.join(","));let x=new eo.ZP({apiKey:o,baseURL:g,dangerouslyAllowBrowser:!0,defaultHeaders:p});try{let a=Date.now(),p=!1,h=u&&u.length>0?[{type:"mcp",server_label:"litellm",server_url:"".concat(g,"/mcp"),require_approval:"never",allowed_tools:u,headers:{"x-litellm-api-key":"Bearer ".concat(o)}}]:void 0,f={model:s,messages:e.map(e=>({role:e.role,content:e.content})),stream:!0,max_tokens:1024,litellm_trace_id:c};for await(let e of(d&&(f.vector_store_ids=d),m&&(f.guardrails=m),h&&(f.tools=h,f.tool_choice="auto"),x.messages.stream(f,{signal:n}))){if(console.log("Stream event:",e),"content_block_delta"===e.type){let o=e.delta;if(!p){p=!0;let e=Date.now()-a;console.log("First token received! Time:",e,"ms"),r&&r(e)}"text_delta"===o.type?t("assistant",o.text,s):"reasoning_delta"===o.type&&l&&l(o.text)}if("message_delta"===e.type&&e.usage&&i){let t=e.usage;console.log("Usage data found:",t);let s={completionTokens:t.output_tokens,promptTokens:t.input_tokens,totalTokens:t.input_tokens+t.output_tokens};i(s)}}}catch(e){throw(null==n?void 0:n.aborted)?console.log("Anthropic messages request was cancelled"):M.Z.fromBackend("Error occurred while generating model response. Please try again. Error: ".concat(e)),e}}var en=s(26433);async function el(e,t,s,o,a,n,l,r,i){console.log=function(){},console.log("isLocal:",!1);let c=(0,O.getProxyBaseUrl)(),d=new en.ZP.OpenAI({apiKey:a,baseURL:c,dangerouslyAllowBrowser:!0,defaultHeaders:n&&n.length>0?{"x-litellm-tags":n.join(",")}:void 0});try{let a=await d.audio.speech.create({model:o,input:e,voice:t,...r?{response_format:r}:{},...i?{speed:i}:{}},{signal:l}),n=await a.blob(),c=URL.createObjectURL(n);s(c,o)}catch(e){throw(null==l?void 0:l.aborted)?console.log("Audio speech request was cancelled"):M.Z.fromBackend("Error occurred while generating speech. Please try again. Error: ".concat(e)),e}}async function er(e,t,s,o,a,n,l,r,i,c){console.log=function(){},console.log("isLocal:",!1);let d=(0,O.getProxyBaseUrl)(),m=new en.ZP.OpenAI({apiKey:o,baseURL:d,dangerouslyAllowBrowser:!0,defaultHeaders:a&&a.length>0?{"x-litellm-tags":a.join(",")}:void 0});try{console.log("Processing audio file for transcription:",e.name);let o=await m.audio.transcriptions.create({model:s,file:e,...l?{language:l}:{},...r?{prompt:r}:{},...i?{response_format:i}:{},...void 0!==c?{temperature:c}:{}},{signal:n});if(console.log("Transcription response:",o),o&&o.text)t(o.text,s),M.Z.success("Audio transcribed successfully");else throw Error("No transcription text in response")}catch(e){if(console.error("Error making audio transcription request:",e),null==n?void 0:n.aborted)console.log("Audio transcription request was cancelled");else{var u;let t="Failed to transcribe audio";(null==e?void 0:null===(u=e.error)||void 0===u?void 0:u.message)?t=e.error.message:(null==e?void 0:e.message)&&(t=e.message),M.Z.fromBackend("Audio transcription failed: ".concat(t))}throw e}}async function ei(e,t,s,o,a,n,l,r,i,c,d,m,u,g,p){console.log=function(){},console.log("isLocal:",!1);let x=(0,O.getProxyBaseUrl)(),h={};a&&a.length>0&&(h["x-litellm-tags"]=a.join(","));let f=new en.ZP.OpenAI({apiKey:o,baseURL:x,dangerouslyAllowBrowser:!0,defaultHeaders:h});try{let a;let h=Date.now(),C=!1,I=u&&u.length>0?[{type:"mcp",server_label:"litellm",server_url:"".concat(x,"/mcp"),require_approval:"never",allowed_tools:u,headers:{"x-litellm-api-key":"Bearer ".concat(o)}}]:void 0;for await(let o of(await f.chat.completions.create({model:s,stream:!0,stream_options:{include_usage:!0},litellm_trace_id:c,messages:e,...d?{vector_store_ids:d}:{},...m?{guardrails:m}:{},...I?{tools:I,tool_choice:"auto"}:{}},{signal:n}))){var b,v,y,j,N,w,S,k,P;console.log("Stream chunk:",o);let e=null===(b=o.choices[0])||void 0===b?void 0:b.delta;if(console.log("Delta content:",null===(y=o.choices[0])||void 0===y?void 0:null===(v=y.delta)||void 0===v?void 0:v.content),console.log("Delta reasoning content:",null==e?void 0:e.reasoning_content),!C&&((null===(N=o.choices[0])||void 0===N?void 0:null===(j=N.delta)||void 0===j?void 0:j.content)||e&&e.reasoning_content)&&(C=!0,a=Date.now()-h,console.log("First token received! Time:",a,"ms"),r?(console.log("Calling onTimingData with:",a),r(a)):console.log("onTimingData callback is not defined!")),null===(S=o.choices[0])||void 0===S?void 0:null===(w=S.delta)||void 0===w?void 0:w.content){let e=o.choices[0].delta.content;t(e,o.model)}if(e&&e.image&&g&&(console.log("Image generated:",e.image),g(e.image.url,o.model)),e&&e.reasoning_content){let t=e.reasoning_content;l&&l(t)}if(e&&(null===(k=e.provider_specific_fields)||void 0===k?void 0:k.search_results)&&p&&(console.log("Search results found:",e.provider_specific_fields.search_results),p(e.provider_specific_fields.search_results)),o.usage&&i){console.log("Usage data found:",o.usage);let e={completionTokens:o.usage.completion_tokens,promptTokens:o.usage.prompt_tokens,totalTokens:o.usage.total_tokens};(null===(P=o.usage.completion_tokens_details)||void 0===P?void 0:P.reasoning_tokens)&&(e.reasoningTokens=o.usage.completion_tokens_details.reasoning_tokens),i(e)}}}catch(e){throw(null==n?void 0:n.aborted)&&console.log("Chat completion request was cancelled"),e}}async function ec(e,t,s,o,a){if(!o)throw Error("API key is required");console.log=function(){};let n=(0,O.getProxyBaseUrl)(),l={};a&&a.length>0&&(l["x-litellm-tags"]=a.join(","));let r=new en.ZP.OpenAI({apiKey:o,baseURL:n,dangerouslyAllowBrowser:!0,defaultHeaders:l});try{let o=await r.embeddings.create({model:s,input:e});t(JSON.stringify(o.data[0].embedding),s)}catch(e){throw M.Z.fromBackend("Error occurred while making embeddings request. Please try again. Error: ".concat(e)),e}}async function ed(e){try{return(await (0,O.mcpToolsCall)(e)).tools||[]}catch(e){return console.error("Error fetching MCP tools:",e),[]}}var em=s(51601);async function eu(e,t,s,o,a,n,l){console.log=function(){},console.log("isLocal:",!1);let r=(0,O.getProxyBaseUrl)(),i=new en.ZP.OpenAI({apiKey:a,baseURL:r,dangerouslyAllowBrowser:!0,defaultHeaders:n&&n.length>0?{"x-litellm-tags":n.join(",")}:void 0});try{let a=Array.isArray(e)?e:[e],n=[];for(let e=0;e<a.length;e++){let r=a[e];console.log("Processing image ".concat(e+1," of ").concat(a.length));let c=await i.images.edit({model:o,image:r,prompt:t},{signal:l});if(console.log("Response for image ".concat(e+1,":"),c.data),c.data&&c.data[0]){if(c.data[0].url)s(c.data[0].url,o),n.push(c.data[0].url);else if(c.data[0].b64_json){let e=c.data[0].b64_json,t="data:image/png;base64,".concat(e);s(t,o),n.push(t)}}}n.length>1&&M.Z.success("Successfully processed ".concat(n.length," images"))}catch(e){if(console.error("Error making image edit request:",e),null==l?void 0:l.aborted)console.log("Image edits request was cancelled");else{var c;let t="Failed to edit image(s)";(null==e?void 0:null===(c=e.error)||void 0===c?void 0:c.message)?t=e.error.message:(null==e?void 0:e.message)&&(t=e.message),M.Z.fromBackend("Image edit failed: ".concat(t))}throw e}}async function eg(e,t,s,o,a,n){console.log=function(){},console.log("isLocal:",!1);let l=(0,O.getProxyBaseUrl)(),r=new en.ZP.OpenAI({apiKey:o,baseURL:l,dangerouslyAllowBrowser:!0,defaultHeaders:a&&a.length>0?{"x-litellm-tags":a.join(",")}:void 0});try{let o=await r.images.generate({model:s,prompt:e},{signal:n});if(console.log(o.data),o.data&&o.data[0]){if(o.data[0].url)t(o.data[0].url,s);else if(o.data[0].b64_json){let e=o.data[0].b64_json;t("data:image/png;base64,".concat(e),s)}else throw Error("No image data found in response")}else throw Error("Invalid response format")}catch(e){throw(null==n?void 0:n.aborted)?console.log("Image generation request was cancelled"):M.Z.fromBackend("Error occurred while generating image. Please try again. Error: ".concat(e)),e}}async function ep(e,t,s,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],n=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,r=arguments.length>7?arguments[7]:void 0,i=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,u=arguments.length>12?arguments[12]:void 0,g=arguments.length>13?arguments[13]:void 0,p=arguments.length>14?arguments[14]:void 0,x=arguments.length>15?arguments[15]:void 0;if(!o)throw Error("API key is required");console.log=function(){};let h=(0,O.getProxyBaseUrl)(),f={};a&&a.length>0&&(f["x-litellm-tags"]=a.join(","));let b=new en.ZP.OpenAI({apiKey:o,baseURL:h,dangerouslyAllowBrowser:!0,defaultHeaders:f});try{let o=Date.now(),a=!1,h=e.map(e=>(Array.isArray(e.content),{role:e.role,content:e.content,type:"message"})),f=u&&u.length>0?[{type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp",require_approval:"never",allowed_tools:u}]:void 0,P=await b.responses.create({model:s,input:h,stream:!0,litellm_trace_id:c,...g?{previous_response_id:g}:{},...d?{vector_store_ids:d}:{},...m?{guardrails:m}:{},...f?{tools:f,tool_choice:"required"}:{}},{signal:n}),C="";for await(let e of P)if(console.log("Response event:",e),"object"==typeof e&&null!==e){var v,y,j,N,w,S,k;if(((null===(v=e.type)||void 0===v?void 0:v.startsWith("response.mcp_"))||"response.output_item.done"===e.type&&((null===(y=e.item)||void 0===y?void 0:y.type)==="mcp_list_tools"||(null===(j=e.item)||void 0===j?void 0:j.type)==="mcp_call"))&&(console.log("MCP event received:",e),x)){let t={type:e.type,sequence_number:e.sequence_number,output_index:e.output_index,item_id:e.item_id||(null===(S=e.item)||void 0===S?void 0:S.id),item:e.item,delta:e.delta,arguments:e.arguments,timestamp:Date.now()};x(t)}if("response.output_item.done"===e.type&&(null===(N=e.item)||void 0===N?void 0:N.type)==="mcp_call"&&(null===(w=e.item)||void 0===w?void 0:w.name)&&(C=e.item.name,console.log("MCP tool used:",C)),"response.role.delta"===e.type)continue;if("response.output_text.delta"===e.type&&"string"==typeof e.delta){let n=e.delta;if(console.log("Text delta",n),n.trim().length>0&&(t("assistant",n,s),!a)){a=!0;let e=Date.now()-o;console.log("First token received! Time:",e,"ms"),r&&r(e)}}if("response.reasoning.delta"===e.type&&"delta"in e){let t=e.delta;"string"==typeof t&&l&&l(t)}if("response.completed"===e.type&&"response"in e){let t=e.response,s=t.usage;if(console.log("Usage data:",s),console.log("Response completed event:",t),t.id&&p&&(console.log("Response ID for session management:",t.id),p(t.id)),s&&i){console.log("Usage data:",s);let e={completionTokens:s.output_tokens,promptTokens:s.input_tokens,totalTokens:s.total_tokens};(null===(k=s.completion_tokens_details)||void 0===k?void 0:k.reasoning_tokens)&&(e.reasoningTokens=s.completion_tokens_details.reasoning_tokens),i(e,C)}}}return P}catch(e){throw(null==n?void 0:n.aborted)?console.log("Responses API request was cancelled"):M.Z.fromBackend("Error occurred while generating model response. Please try again. Error: ".concat(e)),e}}var ex=s(29),eh=s.n(ex),ef=s(44851);let{Text:eb}=C.default,{Panel:ev}=ef.default;var ey=e=>{var t,s;let{events:a,className:n}=e;if(console.log("MCPEventsDisplay: Received events:",a),!a||0===a.length)return console.log("MCPEventsDisplay: No events, returning null"),null;let l=a.find(e=>{var t;return"response.output_item.done"===e.type&&(null===(t=e.item)||void 0===t?void 0:t.type)==="mcp_list_tools"&&e.item.tools&&e.item.tools.length>0}),r=a.filter(e=>{var t;return"response.output_item.done"===e.type&&(null===(t=e.item)||void 0===t?void 0:t.type)==="mcp_call"});return(console.log("MCPEventsDisplay: toolsEvent:",l),console.log("MCPEventsDisplay: mcpCallEvents:",r),l||0!==r.length)?(0,o.jsxs)("div",{className:"jsx-32b14b04f420f3ac "+"mcp-events-display ".concat(n||""),children:[(0,o.jsx)(eh(),{id:"32b14b04f420f3ac",children:'.openai-mcp-tools.jsx-32b14b04f420f3ac{position:relative;margin:0;padding:0}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse.jsx-32b14b04f420f3ac{background:transparent!important;border:none!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-item.jsx-32b14b04f420f3ac{border:none!important;background:transparent!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-header.jsx-32b14b04f420f3ac{padding:0 0 0 20px!important;background:transparent!important;border:none!important;font-size:14px!important;color:#9ca3af!important;font-weight:400!important;line-height:20px!important;min-height:20px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-header.jsx-32b14b04f420f3ac:hover{background:transparent!important;color:#6b7280!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-content.jsx-32b14b04f420f3ac{border:none!important;background:transparent!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-content-box.jsx-32b14b04f420f3ac{padding:4px 0 0 20px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-expand-icon.jsx-32b14b04f420f3ac{position:absolute!important;left:2px!important;top:2px!important;color:#9ca3af!important;font-size:10px!important;width:16px!important;height:16px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-moz-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-moz-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:center!important;-webkit-justify-content:center!important;-moz-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-expand-icon.jsx-32b14b04f420f3ac:hover{color:#6b7280!important}.openai-vertical-line.jsx-32b14b04f420f3ac{position:absolute;left:9px;top:18px;bottom:0;width:.5px;background-color:#f3f4f6;opacity:.8}.tool-item.jsx-32b14b04f420f3ac{font-family:ui-monospace,SFMono-Regular,"SF Mono",Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:13px;color:#4b5563;line-height:18px;padding:0;margin:0;background:white;position:relative;z-index:1}.mcp-section.jsx-32b14b04f420f3ac{margin-bottom:12px;background:white;position:relative;z-index:1}.mcp-section.jsx-32b14b04f420f3ac:last-child{margin-bottom:0}.mcp-section-header.jsx-32b14b04f420f3ac{font-size:13px;color:#6b7280;font-weight:500;margin-bottom:4px}.mcp-code-block.jsx-32b14b04f420f3ac{background:#f9fafb;border:1px solid#f3f4f6;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;padding:8px;font-size:12px}.mcp-json.jsx-32b14b04f420f3ac{font-family:ui-monospace,SFMono-Regular,"SF Mono",Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:#374151;margin:0;white-space:pre-wrap;word-wrap:break-word}.mcp-approved.jsx-32b14b04f420f3ac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:13px;color:#6b7280}.mcp-checkmark.jsx-32b14b04f420f3ac{color:#10b981;margin-right:6px;font-weight:bold}.mcp-response-content.jsx-32b14b04f420f3ac{font-size:13px;color:#374151;line-height:1.5;white-space:pre-wrap;font-family:ui-monospace,SFMono-Regular,"SF Mono",Monaco,Consolas,"Liberation Mono","Courier New",monospace}'}),(0,o.jsxs)("div",{className:"jsx-32b14b04f420f3ac openai-mcp-tools",children:[(0,o.jsx)("div",{className:"jsx-32b14b04f420f3ac openai-vertical-line"}),(0,o.jsxs)(ef.default,{ghost:!0,size:"small",expandIconPosition:"start",defaultActiveKey:l?["list-tools"]:r.map((e,t)=>"mcp-call-".concat(t)),children:[l&&(0,o.jsx)(ev,{header:"List tools",children:(0,o.jsx)("div",{className:"jsx-32b14b04f420f3ac",children:null===(s=l.item)||void 0===s?void 0:null===(t=s.tools)||void 0===t?void 0:t.map((e,t)=>(0,o.jsx)("div",{className:"jsx-32b14b04f420f3ac tool-item",children:e.name},t))})},"list-tools"),r.map((e,t)=>{var s,a,n;return(0,o.jsx)(ev,{header:(null===(s=e.item)||void 0===s?void 0:s.name)||"Tool call",children:(0,o.jsxs)("div",{className:"jsx-32b14b04f420f3ac",children:[(0,o.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:[(0,o.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section-header",children:"Request"}),(0,o.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-code-block",children:(null===(a=e.item)||void 0===a?void 0:a.arguments)&&(0,o.jsx)("pre",{className:"jsx-32b14b04f420f3ac mcp-json",children:(()=>{try{return JSON.stringify(JSON.parse(e.item.arguments),null,2)}catch(t){return e.item.arguments}})()})})]}),(0,o.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:(0,o.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-approved",children:[(0,o.jsx)("span",{className:"jsx-32b14b04f420f3ac mcp-checkmark",children:"✓"})," Approved"]})}),(null===(n=e.item)||void 0===n?void 0:n.output)&&(0,o.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:[(0,o.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section-header",children:"Response"}),(0,o.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-response-content",children:e.item.output})]})]})},"mcp-call-".concat(t))})]})]})]}):(console.log("MCPEventsDisplay: No valid events found, returning null"),null)},ej=s(83322),eN=s(70464),ew=s(77565),eS=e=>{let{reasoningContent:t}=e,[s,a]=(0,n.useState)(!0);return t?(0,o.jsxs)("div",{className:"reasoning-content mt-1 mb-2",children:[(0,o.jsxs)(Z.ZP,{type:"text",className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:()=>a(!s),icon:(0,o.jsx)(ej.Z,{}),children:[s?"Hide reasoning":"Show reasoning",s?(0,o.jsx)(eN.Z,{className:"ml-1"}):(0,o.jsx)(ew.Z,{className:"ml-1"})]}),s&&(0,o.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm text-gray-700",children:(0,o.jsx)(l.U,{components:{code(e){let{node:t,inline:s,className:a,children:n,...l}=e,r=/language-(\w+)/.exec(a||"");return!s&&r?(0,o.jsx)(R.Z,{style:U.Z,language:r[1],PreTag:"div",className:"rounded-md my-2",...l,children:String(n).replace(/\n$/,"")}):(0,o.jsx)("code",{className:"".concat(a," px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono"),...l,children:n})}},children:t})})]}):null},ek=s(5540),eP=s(71282),eC=s(11741),eI=s(16601),eA=e=>{let{timeToFirstToken:t,usage:s,toolName:a}=e;return t||s?(0,o.jsxs)("div",{className:"response-metrics mt-2 pt-2 border-t border-gray-100 text-xs text-gray-500 flex flex-wrap gap-3",children:[void 0!==t&&(0,o.jsx)(E.Z,{title:"Time to first token",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(ek.Z,{className:"mr-1"}),(0,o.jsxs)("span",{children:[(t/1e3).toFixed(2),"s"]})]})}),(null==s?void 0:s.promptTokens)!==void 0&&(0,o.jsx)(E.Z,{title:"Prompt tokens",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(eP.Z,{className:"mr-1"}),(0,o.jsxs)("span",{children:["In: ",s.promptTokens]})]})}),(null==s?void 0:s.completionTokens)!==void 0&&(0,o.jsx)(E.Z,{title:"Completion tokens",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(eC.Z,{className:"mr-1"}),(0,o.jsxs)("span",{children:["Out: ",s.completionTokens]})]})}),(null==s?void 0:s.reasoningTokens)!==void 0&&(0,o.jsx)(E.Z,{title:"Reasoning tokens",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(ej.Z,{className:"mr-1"}),(0,o.jsxs)("span",{children:["Reasoning: ",s.reasoningTokens]})]})}),(null==s?void 0:s.totalTokens)!==void 0&&(0,o.jsx)(E.Z,{title:"Total tokens",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(eI.Z,{className:"mr-1"}),(0,o.jsxs)("span",{children:["Total: ",s.totalTokens]})]})}),a&&(0,o.jsx)(E.Z,{title:"Tool used",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(p.Z,{className:"mr-1"}),(0,o.jsxs)("span",{children:["Tool: ",a]})]})})]}):null};let eE=e=>new Promise((t,s)=>{let o=new FileReader;o.onload=()=>{t(o.result.split(",")[1])},o.onerror=s,o.readAsDataURL(e)}),e_=async(e,t)=>{let s=await eE(t),o=t.type||(t.name.toLowerCase().endsWith(".pdf")?"application/pdf":"image/jpeg");return{role:"user",content:[{type:"input_text",text:e},{type:"input_image",image_url:"data:".concat(o,";base64,").concat(s)}]}},eT=(e,t,s,o)=>{let a="";t&&o&&(a=o.toLowerCase().endsWith(".pdf")?"[PDF attached]":"[Image attached]");let n={role:"user",content:t?"".concat(e," ").concat(a):e};return t&&s&&(n.imagePreviewUrl=s),n},eZ=e=>"user"===e.role&&"string"==typeof e.content&&(e.content.includes("[Image attached]")||e.content.includes("[PDF attached]"))&&!!e.imagePreviewUrl;var eR=e=>{let{message:t}=e;if(!eZ(t))return null;let s="string"==typeof t.content&&t.content.includes("[PDF attached]");return(0,o.jsx)("div",{className:"mb-2",children:s?(0,o.jsx)("div",{className:"w-64 h-32 rounded-md border border-gray-200 bg-red-50 flex items-center justify-center",children:(0,o.jsx)(w.Z,{style:{fontSize:"48px",color:"#dc2626"}})}):(0,o.jsx)("img",{src:t.imagePreviewUrl,alt:"User uploaded image",className:"max-w-64 rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"200px"}})})};let{Dragger:eU}=P.default;var eL=e=>{let{responsesUploadedImage:t,responsesImagePreviewUrl:s,onImageUpload:a,onRemoveImage:n}=e;return(0,o.jsx)(o.Fragment,{children:!t&&(0,o.jsx)(eU,{beforeUpload:a,accept:"image/*,.pdf",showUploadList:!1,className:"inline-block",style:{padding:0,border:"none",background:"none"},children:(0,o.jsx)(E.Z,{title:"Attach image or PDF",children:(0,o.jsx)("button",{type:"button",className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:(0,o.jsx)(X.Z,{style:{fontSize:"16px"}})})})})})},eM=s(38434);function eO(e){let{searchResults:t}=e,[s,a]=(0,n.useState)(!0),[l,r]=(0,n.useState)({});if(!t||0===t.length)return null;let i=(e,t)=>{let s="".concat(e,"-").concat(t);r(e=>({...e,[s]:!e[s]}))},c=t.reduce((e,t)=>e+t.data.length,0);return(0,o.jsxs)("div",{className:"search-results-content mt-1 mb-2",children:[(0,o.jsxs)(Z.ZP,{type:"text",className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:()=>a(!s),icon:(0,o.jsx)(h.Z,{}),children:[s?"Hide sources":"Show sources (".concat(c,")"),s?(0,o.jsx)(eN.Z,{className:"ml-1"}):(0,o.jsx)(ew.Z,{className:"ml-1"})]}),s&&(0,o.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm",children:(0,o.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"text-xs text-gray-600 mb-2 flex items-center gap-2",children:[(0,o.jsx)("span",{className:"font-medium",children:"Query:"}),(0,o.jsxs)("span",{className:"italic",children:['"',e.search_query,'"']}),(0,o.jsx)("span",{className:"text-gray-400",children:"•"}),(0,o.jsxs)("span",{className:"text-gray-500",children:[e.data.length," result",1!==e.data.length?"s":""]})]}),(0,o.jsx)("div",{className:"space-y-2",children:e.data.map((e,s)=>{let a=l["".concat(t,"-").concat(s)]||!1;return(0,o.jsxs)("div",{className:"border border-gray-200 rounded-md overflow-hidden bg-white",children:[(0,o.jsx)("div",{className:"flex items-center justify-between p-2 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>i(t,s),children:(0,o.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform flex-shrink-0 ".concat(a?"transform rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,o.jsx)(eM.Z,{className:"text-gray-400 flex-shrink-0",style:{fontSize:"12px"}}),(0,o.jsx)("span",{className:"text-xs font-medium text-gray-700 truncate",children:e.filename||e.file_id||"Result ".concat(s+1)}),(0,o.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-700 font-mono flex-shrink-0",children:e.score.toFixed(3)})]})}),a&&(0,o.jsx)("div",{className:"border-t border-gray-200 bg-white",children:(0,o.jsxs)("div",{className:"p-3 space-y-2",children:[e.content.map((e,t)=>(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"text-xs font-mono bg-gray-50 p-2 rounded text-gray-800 whitespace-pre-wrap break-words",children:e.text})},t)),e.attributes&&Object.keys(e.attributes).length>0&&(0,o.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[(0,o.jsx)("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:"Metadata:"}),(0,o.jsx)("div",{className:"space-y-1",children:Object.entries(e.attributes).map(e=>{let[t,s]=e;return(0,o.jsxs)("div",{className:"text-xs flex gap-2",children:[(0,o.jsxs)("span",{className:"text-gray-500 font-medium",children:[t,":"]}),(0,o.jsx)("span",{className:"text-gray-700 font-mono break-all",children:String(s)})]},t)})})]})]})})]},s)})})]},t))})})]})}var eK=s(63709),eD=s(23639),ez=e=>{let{endpointType:t,responsesSessionId:s,useApiSessionManagement:a,onToggleSessionManagement:n}=e;return t!==B.KP.RESPONSES?null:(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Session Management"}),(0,o.jsx)(E.Z,{title:"Choose between LiteLLM API session management (using previous_response_id) or UI-based session management (using chat history)",children:(0,o.jsx)(x.Z,{className:"text-gray-400",style:{fontSize:"12px"}})})]}),(0,o.jsx)(eK.Z,{checked:a,onChange:n,checkedChildren:"API",unCheckedChildren:"UI",size:"small"})]}),(0,o.jsxs)("div",{className:"text-xs p-2 rounded-md ".concat(s?"bg-green-50 text-green-700 border border-green-200":"bg-blue-50 text-blue-700 border border-blue-200"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)(x.Z,{style:{fontSize:"12px"}}),(()=>{if(!s)return a?"API Session: Ready":"UI Session: Ready";let e=a?"Response ID":"UI Session",t=s.slice(0,10);return"".concat(e,": ").concat(t,"...")})()]}),s&&(0,o.jsx)(E.Z,{title:(0,o.jsxs)("div",{className:"text-xs",children:[(0,o.jsx)("div",{className:"mb-1",children:"Copy response ID to continue session:"}),(0,o.jsx)("div",{className:"bg-gray-800 text-gray-100 p-2 rounded font-mono text-xs whitespace-pre-wrap",children:'curl -X POST "your-proxy-url/v1/responses" \\\n  -H "Authorization: Bearer your-api-key" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "model": "your-model",\n    "input": [{"role": "user", "content": "your message", "type": "message"}],\n    "previous_response_id": "'.concat(s,'",\n    "stream": true\n  }\'')})]}),overlayStyle:{maxWidth:"500px"},children:(0,o.jsx)("button",{onClick:()=>{s&&(navigator.clipboard.writeText(s),M.Z.success("Response ID copied to clipboard!"))},className:"ml-2 p-1 hover:bg-green-100 rounded transition-colors",children:(0,o.jsx)(eD.Z,{style:{fontSize:"12px"}})})})]}),(0,o.jsx)("div",{className:"text-xs opacity-75 mt-1",children:s?a?"LiteLLM API session active - context maintained server-side":"UI session active - context maintained client-side":a?"LiteLLM will manage session using previous_response_id":"UI will manage session using chat history"})]})]})};let{TextArea:eB}=k.default,{Dragger:eF}=P.default;var eH=e=>{let{accessToken:t,token:s,userRole:k,userID:P,disabledPersonalKeyCreation:O}=e,[F,G]=(0,n.useState)(!1),[q,V]=(0,n.useState)([]),[X,$]=(0,n.useState)(()=>{let e=sessionStorage.getItem("selectedMCPTools");try{let t=e?JSON.parse(e):[];return Array.isArray(t)?t:t?[t]:[]}catch(e){return console.error("Error parsing selectedMCPTools from sessionStorage",e),[]}}),[et,eo]=(0,n.useState)(!1),[en,ex]=(0,n.useState)(()=>{let e=sessionStorage.getItem("apiKeySource");if(e)try{return JSON.parse(e)}catch(e){console.error("Error parsing apiKeySource from sessionStorage",e)}return O?"custom":"session"}),[eh,ef]=(0,n.useState)(()=>sessionStorage.getItem("apiKey")||""),[eb,ev]=(0,n.useState)(""),[ej,eN]=(0,n.useState)(()=>{try{let e=sessionStorage.getItem("chatHistory");return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing chatHistory from sessionStorage",e),[]}}),[ew,ek]=(0,n.useState)(()=>{let e=sessionStorage.getItem("selectedModels");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedModels from sessionStorage",e),[]}}),[eP,eC]=(0,n.useState)(!1),[eI,eE]=(0,n.useState)(""),[eZ,eU]=(0,n.useState)([]);(0,n.useRef)(null);let[eM,eK]=(0,n.useState)(()=>sessionStorage.getItem("endpointType")||B.KP.CHAT),[eD,eH]=(0,n.useState)(!1),eG=(0,n.useRef)(null),[eq,eJ]=(0,n.useState)(()=>{let e=sessionStorage.getItem("selectedTags");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedTags from sessionStorage",e),[]}}),[eW,eV]=(0,n.useState)(()=>{let e=sessionStorage.getItem("selectedVoice");if(!e)return"alloy";try{return JSON.parse(e)}catch(t){return e}}),[eY,eX]=(0,n.useState)(()=>{let e=sessionStorage.getItem("selectedVectorStores");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedVectorStores from sessionStorage",e),[]}}),[e$,eQ]=(0,n.useState)(()=>{let e=sessionStorage.getItem("selectedGuardrails");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedGuardrails from sessionStorage",e),[]}}),[e0,e1]=(0,n.useState)(()=>sessionStorage.getItem("messageTraceId")||null),[e2,e4]=(0,n.useState)(()=>sessionStorage.getItem("responsesSessionId")||null),[e3,e5]=(0,n.useState)(()=>{let e=sessionStorage.getItem("useApiSessionManagement");return!e||JSON.parse(e)}),[e6,e8]=(0,n.useState)([]),[e7,e9]=(0,n.useState)([]),[te,tt]=(0,n.useState)(null),[ts,to]=(0,n.useState)(null),[ta,tn]=(0,n.useState)(null),[tl,tr]=(0,n.useState)(null),[ti,tc]=(0,n.useState)(null),[td,tm]=(0,n.useState)(!1),[tu,tg]=(0,n.useState)(""),[tp,tx]=(0,n.useState)("openai"),[th,tf]=(0,n.useState)([]),tb=(0,n.useRef)(null),tv=async()=>{let e="session"===en?t:eh;if(e){eo(!0);try{let t=await ed(e);V(t)}catch(e){console.error("Error fetching MCP tools:",e)}finally{eo(!1)}}};(0,n.useEffect)(()=>{F&&tv()},[F,t,eh,en]),(0,n.useEffect)(()=>{td&&tg((0,ee.L)({apiKeySource:en,accessToken:t,apiKey:eh,inputMessage:eb,chatHistory:ej,selectedTags:eq,selectedVectorStores:eY,selectedGuardrails:e$,selectedMCPTools:X,endpointType:eM,selectedModel:ew[0],selectedSdk:tp,selectedVoice:eW}))},[td,tp,en,t,eh,eb,ej,eq,eY,e$,X,eM,ew]),(0,n.useEffect)(()=>{let e=setTimeout(()=>{sessionStorage.setItem("chatHistory",JSON.stringify(ej))},500);return()=>{clearTimeout(e)}},[ej]),(0,n.useEffect)(()=>{sessionStorage.setItem("apiKeySource",JSON.stringify(en)),sessionStorage.setItem("apiKey",eh),sessionStorage.setItem("endpointType",eM),sessionStorage.setItem("selectedTags",JSON.stringify(eq)),sessionStorage.setItem("selectedVectorStores",JSON.stringify(eY)),sessionStorage.setItem("selectedGuardrails",JSON.stringify(e$)),sessionStorage.setItem("selectedMCPTools",JSON.stringify(X)),sessionStorage.setItem("selectedVoice",eW),sessionStorage.setItem("selectedModels",JSON.stringify(ew)),e0?sessionStorage.setItem("messageTraceId",e0):sessionStorage.removeItem("messageTraceId"),e2?sessionStorage.setItem("responsesSessionId",e2):sessionStorage.removeItem("responsesSessionId"),sessionStorage.setItem("useApiSessionManagement",JSON.stringify(e3))},[en,eh,ew,eM,eq,eY,e$,e0,e2,e3,X]),(0,n.useEffect)(()=>{let e="session"===en?t:eh;if(!e||!s||!k||!P){console.log("userApiKey or token or userRole or userID is missing = ",e,s,k,P);return}(async()=>{try{if(!e){console.log("userApiKey is missing");return}let t=await (0,em.p)(e);console.log("Fetched models:",t),eU(t),t.length?0===ew.length&&ek([t[0].model_group]):ek([])}catch(e){console.error("Error fetching model info:",e)}})(),tv()},[t,P,k,en,eh,s]),(0,n.useEffect)(()=>{tb.current&&setTimeout(()=>{var e;null===(e=tb.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})},100)},[ej]);let ty=(e,t,s)=>{console.log("updateTextUI called with:",e,t,s),eN(o=>{let a=o[o.length-1];if(!a||a.role!==e||a.isImage||a.isAudio)return[...o,{role:e,content:t,model:s}];{var n;let e={...a,content:a.content+t,model:null!==(n=a.model)&&void 0!==n?n:s};return[...o.slice(0,-1),e]}})},tj=e=>{eN(t=>{let s=t[t.length-1];return!s||"assistant"!==s.role||s.isImage||s.isAudio?t.length>0&&"user"===t[t.length-1].role?[...t,{role:"assistant",content:"",reasoningContent:e}]:t:[...t.slice(0,t.length-1),{...s,reasoningContent:(s.reasoningContent||"")+e}]})},tN=e=>{console.log("updateTimingData called with:",e),eN(t=>{let s=t[t.length-1];if(console.log("Current last message:",s),s&&"assistant"===s.role){console.log("Updating assistant message with timeToFirstToken:",e);let o=[...t.slice(0,t.length-1),{...s,timeToFirstToken:e}];return console.log("Updated chat history:",o),o}return s&&"user"===s.role?(console.log("Creating new assistant message with timeToFirstToken:",e),[...t,{role:"assistant",content:"",timeToFirstToken:e}]):(console.log("No appropriate message found to update timing"),t)})},tw=(e,t)=>{console.log("Received usage data:",e),eN(s=>{let o=s[s.length-1];if(o&&"assistant"===o.role){console.log("Updating message with usage data:",e);let a={...o,usage:e,toolName:t};return console.log("Updated message:",a),[...s.slice(0,s.length-1),a]}return s})},tS=e=>{console.log("Received search results:",e),eN(t=>{let s=t[t.length-1];if(s&&"assistant"===s.role){console.log("Updating message with search results");let o={...s,searchResults:e};return[...t.slice(0,t.length-1),o]}return t})},tk=e=>{console.log("Received response ID for session management:",e),e3&&e4(e)},tP=e=>{console.log("ChatUI: Received MCP event:",e),tf(t=>{if(t.some(t=>t.item_id===e.item_id&&t.type===e.type&&t.sequence_number===e.sequence_number))return console.log("ChatUI: Duplicate MCP event, skipping"),t;let s=[...t,e];return console.log("ChatUI: Updated MCP events:",s),s})},tC=(e,t)=>{eN(s=>[...s,{role:"assistant",content:e,model:t,isImage:!0}])},tI=(e,t)=>{eN(s=>[...s,{role:"assistant",content:e.length>100?e.substring(0,100)+"...":e,model:t,isEmbeddings:!0}])},tA=(e,t)=>{eN(s=>[...s,{role:"assistant",content:e,model:t,isAudio:!0}])},tE=(e,t)=>{eN(s=>{let o=s[s.length-1];if(!o||"assistant"!==o.role||o.isImage||o.isAudio)return[...s,{role:"assistant",content:"",model:t,image:{url:e,detail:"auto"}}];{var a;let n={...o,image:{url:e,detail:"auto"},model:null!==(a=o.model)&&void 0!==a?a:t};return[...s.slice(0,-1),n]}})},t_=e=>{e8(t=>[...t,e]);let t=URL.createObjectURL(e);return e9(e=>[...e,t]),!1},tT=e=>{e7[e]&&URL.revokeObjectURL(e7[e]),e8(t=>t.filter((t,s)=>s!==e)),e9(t=>t.filter((t,s)=>s!==e))},tZ=()=>{e7.forEach(e=>{URL.revokeObjectURL(e)}),e8([]),e9([])},tR=()=>{ts&&URL.revokeObjectURL(ts),tt(null),to(null)},tU=()=>{tl&&URL.revokeObjectURL(tl),tn(null),tr(null)},tL=()=>{tc(null)},tM=async()=>{let e;if(""===eb.trim()&&eM!==B.KP.TRANSCRIPTION)return;if(eM===B.KP.IMAGE_EDITS&&0===e6.length){M.Z.fromBackend("Please upload at least one image for editing");return}if(eM===B.KP.TRANSCRIPTION&&!ti){M.Z.fromBackend("Please upload an audio file for transcription");return}if(!s||!k||!P)return;let o="session"===en?t:eh;if(!o){M.Z.fromBackend("Please provide an API key or select Current UI Session");return}eG.current=new AbortController;let a=eG.current.signal;if(eM===B.KP.RESPONSES&&te)try{e=await e_(eb,te)}catch(e){M.Z.fromBackend("Failed to process image. Please try again.");return}else if(eM===B.KP.CHAT&&ta)try{e=await J(eb,ta)}catch(e){M.Z.fromBackend("Failed to process image. Please try again.");return}else e={role:"user",content:eb};let n=e0||(0,r.Z)();e0||e1(n),eN([...ej,eM===B.KP.RESPONSES&&te?eT(eb,!0,ts||void 0,te.name):eM===B.KP.CHAT&&ta?W(eb,!0,tl||void 0,ta.name):eM===B.KP.TRANSCRIPTION&&ti?eT(eb?"\uD83C\uDFB5 Audio file: ".concat(ti.name,"\nPrompt: ").concat(eb):"\uD83C\uDFB5 Audio file: ".concat(ti.name),!1):eT(eb,!1)]),tf([]),eH(!0);try{if(ew.length>0){let t=ew[0];if(eM===B.KP.CHAT){let s=[...ej.filter(e=>!e.isImage&&!e.isAudio).map(e=>{let{role:t,content:s}=e;return{role:t,content:"string"==typeof s?s:""}}),e];await ei(s,(e,t)=>ty("assistant",e,t),t,o,eq,a,tj,tN,tw,n,eY.length>0?eY:void 0,e$.length>0?e$:void 0,X,tE,tS)}else if(eM===B.KP.IMAGE)await eg(eb,(e,t)=>tC(e,t),t,o,eq,a);else if(eM===B.KP.SPEECH)await el(eb,eW,(e,t)=>tA(e,t),t||"",o,eq,a);else if(eM===B.KP.IMAGE_EDITS)e6.length>0&&await eu(1===e6.length?e6[0]:e6,eb,(e,t)=>tC(e,t),t,o,eq,a);else if(eM===B.KP.RESPONSES){let s;s=e3&&e2?[e]:[...ej.filter(e=>!e.isImage&&!e.isAudio).map(e=>{let{role:t,content:s}=e;return{role:t,content:s}}),e],await ep(s,(e,t,s)=>ty(e,t,s),t,o,eq,a,tj,tN,tw,n,eY.length>0?eY:void 0,e$.length>0?e$:void 0,X,e3?e2:null,tk,tP)}else if(eM===B.KP.ANTHROPIC_MESSAGES){let s=[...ej.filter(e=>!e.isImage&&!e.isAudio).map(e=>{let{role:t,content:s}=e;return{role:t,content:s}}),e];await ea(s,(e,t,s)=>ty(e,t,s),t,o,eq,a,tj,tN,tw,n,eY.length>0?eY:void 0,e$.length>0?e$:void 0,X)}else eM===B.KP.EMBEDDINGS?await ec(eb,(e,t)=>tI(e,t),t,o,eq):eM===B.KP.TRANSCRIPTION&&ti&&await er(ti,(e,t)=>ty("assistant",e,t),t,o,eq,a)}}catch(e){a.aborted?console.log("Request was cancelled"):(console.error("Error fetching response",e),ty("assistant","Error fetching response:"+e))}finally{eH(!1),eG.current=null,eM===B.KP.IMAGE_EDITS&&tZ(),eM===B.KP.RESPONSES&&te&&tR(),eM===B.KP.CHAT&&ta&&tU(),eM===B.KP.TRANSCRIPTION&&ti&&tL()}ev("")};if(k&&"Admin Viewer"===k){let{Title:e,Paragraph:t}=C.default;return(0,o.jsxs)("div",{children:[(0,o.jsx)(e,{level:1,children:"Access Denied"}),(0,o.jsx)(t,{children:"Ask your proxy admin for access to test models"})]})}let tO=()=>{let e=eI.trim();if(e){if(ew.includes(e)){M.Z.info("Model already selected");return}if(ew.length>=3){M.Z.info("Maximum 3 models can be selected");return}ek([...ew,e]),eE(""),eC(!1)}},tK=e=>{ek(ew.filter(t=>t!==e))},tD=(0,o.jsx)(i.Z,{style:{fontSize:24},spin:!0});return(0,o.jsxs)("div",{className:"w-full h-screen p-4 bg-white",children:[(0,o.jsx)(a.Zb,{className:"w-full rounded-xl shadow-md overflow-hidden",children:(0,o.jsxs)("div",{className:"flex h-[80vh] w-full gap-4",children:[(0,o.jsxs)("div",{className:"w-1/4 p-4 bg-gray-50 overflow-y-auto",children:[(0,o.jsx)(a.Dx,{className:"text-xl font-semibold mb-6 mt-2",children:"Configurations"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,o.jsx)(c.Z,{className:"mr-2"})," API Key Source"]}),(0,o.jsx)(I.default,{disabled:O,value:en,style:{width:"100%"},onChange:e=>{ex(e)},options:[{value:"session",label:"Current UI Session"},{value:"custom",label:"Virtual Key"}],className:"rounded-md"}),"custom"===en&&(0,o.jsx)(a.oi,{className:"mt-2",placeholder:"Enter custom API key",type:"password",onValueChange:ef,value:eh,icon:c.Z})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,o.jsx)(d.Z,{className:"mr-2"})," Select Models"]}),(0,o.jsx)(I.default,{mode:"multiple",value:ew,placeholder:"Select one or more models",onChange:e=>{if(console.log("selected models:",e),e.includes("custom"))eC(!0),ek(e.filter(e=>"custom"!==e));else{if(e.length>3){M.Z.info("Maximum 3 models can be selected");return}ek(e)}},options:[...Array.from(new Set(eZ.map(e=>e.model_group))).map((e,t)=>({value:e,label:e,key:t})),{value:"custom",label:"+ Add custom model",key:"custom"}],style:{width:"100%"},showSearch:!0,className:"rounded-md",maxTagCount:0,maxTagPlaceholder:"".concat(ew.length," model").concat(1!==ew.length?"s":""," selected")}),eP&&(0,o.jsx)(a.oi,{className:"mt-2",placeholder:"Custom Model Name (Enter to add)",value:eI,onValueChange:eE,onKeyDown:e=>{"Enter"===e.key&&tO()}}),ew.length>0&&(0,o.jsx)("div",{className:"mt-2 overflow-hidden",children:(0,o.jsx)("div",{className:"flex flex-wrap gap-1.5",children:ew.map(e=>(0,o.jsx)(A.Z,{closable:!0,onClose:t=>{t.preventDefault(),tK(e)},color:"blue",className:"px-2 py-0.5 text-xs max-w-[200px]",children:(0,o.jsx)("span",{className:"truncate inline-block max-w-[160px] align-middle",title:e,children:e})},e))})})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,o.jsx)(m.Z,{className:"mr-2"})," Endpoint Type"]}),(0,o.jsx)(es,{endpointType:eM,onEndpointChange:e=>{eK(e)},className:"mb-4"}),eM===B.KP.SPEECH&&(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)(a.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,o.jsx)(u.Z,{className:"mr-2"}),"Voice"]}),(0,o.jsx)(I.default,{value:eW,onChange:e=>{eV(e),sessionStorage.setItem("selectedVoice",e)},style:{width:"100%"},className:"rounded-md",options:H})]}),(0,o.jsx)(ez,{endpointType:eM,responsesSessionId:e2,useApiSessionManagement:e3,onToggleSessionManagement:e=>{e5(e),e||e4(null)}})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,o.jsx)(g.Z,{className:"mr-2"})," Tags"]}),(0,o.jsx)(K,{value:eq,onChange:eJ,className:"mb-4",accessToken:t||""})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,o.jsx)(p.Z,{className:"mr-2"})," MCP Tool",(0,o.jsx)(E.Z,{className:"ml-1",title:"Select MCP tools to use in your conversation, only available for /v1/responses endpoint",children:(0,o.jsx)(x.Z,{})})]}),(0,o.jsx)(I.default,{mode:"multiple",style:{width:"100%"},placeholder:"Select MCP tools",value:X,onChange:e=>$(e),loading:et,className:"mb-4",allowClear:!0,optionLabelProp:"label",disabled:eM!==B.KP.RESPONSES,maxTagCount:"responsive",children:Array.isArray(q)&&q.map(e=>(0,o.jsx)(I.default.Option,{value:e.name,label:(0,o.jsx)("div",{className:"font-medium",children:e.name}),children:(0,o.jsxs)("div",{className:"flex flex-col py-1",children:[(0,o.jsx)("span",{className:"font-medium",children:e.name}),(0,o.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.description})]})},e.name))})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,o.jsx)(h.Z,{className:"mr-2"})," Vector Store",(0,o.jsx)(E.Z,{className:"ml-1",title:(0,o.jsxs)("span",{children:["Select vector store(s) to use for this LLM API call. You can set up your vector store"," ",(0,o.jsx)("a",{href:"?page=vector-stores",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,o.jsx)(x.Z,{})})]}),(0,o.jsx)(D.Z,{value:eY,onChange:eX,className:"mb-4",accessToken:t||""})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,o.jsx)(f.Z,{className:"mr-2"})," Guardrails",(0,o.jsx)(E.Z,{className:"ml-1",title:(0,o.jsxs)("span",{children:["Select guardrail(s) to use for this LLM API call. You can set up your guardrails"," ",(0,o.jsx)("a",{href:"?page=guardrails",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,o.jsx)(x.Z,{})})]}),(0,o.jsx)(L.Z,{value:e$,onChange:eQ,className:"mb-4",accessToken:t||""})]})]})]}),(0,o.jsxs)("div",{className:"w-3/4 flex flex-col bg-white",children:[(0,o.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,o.jsx)(a.Dx,{className:"text-xl font-semibold",children:"Test Key"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(a.zx,{onClick:()=>{ej.forEach(e=>{e.isAudio&&"string"==typeof e.content&&URL.revokeObjectURL(e.content)}),eN([]),e1(null),e4(null),tf([]),tZ(),tR(),tU(),tL(),sessionStorage.removeItem("chatHistory"),sessionStorage.removeItem("messageTraceId"),sessionStorage.removeItem("responsesSessionId"),M.Z.success("Chat history cleared.")},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:b.Z,children:"Clear Chat"}),(0,o.jsx)(a.zx,{onClick:()=>tm(!0),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:v.Z,children:"Get Code"})]})]}),(0,o.jsxs)("div",{className:"flex-1 overflow-auto p-4 pb-0",children:[0===ej.length&&(0,o.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,o.jsx)(d.Z,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,o.jsx)(a.xv,{children:"Start a conversation, generate an image, or handle audio"})]}),ej.map((e,t)=>(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"mb-4 ".concat("user"===e.role?"text-right":"text-left"),children:(0,o.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"user"===e.role?"#f0f8ff":"#ffffff",border:"user"===e.role?"1px solid #e6f0fa":"1px solid #f0f0f0",textAlign:"left"},children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,o.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"user"===e.role?"#e6f0fa":"#f5f5f5"},children:"user"===e.role?(0,o.jsx)(y.Z,{style:{fontSize:"12px",color:"#2563eb"}}):(0,o.jsx)(d.Z,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,o.jsx)("strong",{className:"text-sm capitalize",children:e.role}),"assistant"===e.role&&e.model&&(0,o.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600 font-normal",children:e.model})]}),e.reasoningContent&&(0,o.jsx)(eS,{reasoningContent:e.reasoningContent}),"assistant"===e.role&&t===ej.length-1&&th.length>0&&eM===B.KP.RESPONSES&&(0,o.jsx)("div",{className:"mb-3",children:(0,o.jsx)(ey,{events:th})}),"assistant"===e.role&&e.searchResults&&(0,o.jsx)(eO,{searchResults:e.searchResults}),(0,o.jsxs)("div",{className:"whitespace-pre-wrap break-words max-w-full message-content",style:{wordWrap:"break-word",overflowWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},children:[e.isImage?(0,o.jsx)("img",{src:"string"==typeof e.content?e.content:"",alt:"Generated image",className:"max-w-full rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"500px"}}):e.isAudio?(0,o.jsx)(z,{message:e}):(0,o.jsxs)(o.Fragment,{children:[eM===B.KP.RESPONSES&&(0,o.jsx)(eR,{message:e}),eM===B.KP.CHAT&&(0,o.jsx)(Y,{message:e}),(0,o.jsx)(l.U,{components:{code(e){let{node:t,inline:s,className:a,children:n,...l}=e,r=/language-(\w+)/.exec(a||"");return!s&&r?(0,o.jsx)(R.Z,{style:U.Z,language:r[1],PreTag:"div",className:"rounded-md my-2",wrapLines:!0,wrapLongLines:!0,...l,children:String(n).replace(/\n$/,"")}):(0,o.jsx)("code",{className:"".concat(a," px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono"),style:{wordBreak:"break-word"},...l,children:n})},pre:e=>{let{node:t,...s}=e;return(0,o.jsx)("pre",{style:{overflowX:"auto",maxWidth:"100%"},...s})}},children:"string"==typeof e.content?e.content:""}),e.image&&(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)("img",{src:e.image.url,alt:"Generated image",className:"max-w-full rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"500px"}})})]}),"assistant"===e.role&&(e.timeToFirstToken||e.usage)&&(0,o.jsx)(eA,{timeToFirstToken:e.timeToFirstToken,usage:e.usage,toolName:e.toolName})]})]})})},t)),eD&&th.length>0&&eM===B.KP.RESPONSES&&ej.length>0&&"user"===ej[ej.length-1].role&&(0,o.jsx)("div",{className:"text-left mb-4",children:(0,o.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"#ffffff",border:"1px solid #f0f0f0",textAlign:"left"},children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,o.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"#f5f5f5"},children:(0,o.jsx)(d.Z,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,o.jsx)("strong",{className:"text-sm capitalize",children:"Assistant"})]}),(0,o.jsx)(ey,{events:th})]})}),eD&&(0,o.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,o.jsx)(_.Z,{indicator:tD})}),(0,o.jsx)("div",{ref:tb,style:{height:"1px"}})]}),(0,o.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[eM===B.KP.IMAGE_EDITS&&(0,o.jsx)("div",{className:"mb-4",children:0===e6.length?(0,o.jsxs)(eF,{beforeUpload:t_,accept:"image/*",showUploadList:!1,children:[(0,o.jsx)("p",{className:"ant-upload-drag-icon",children:(0,o.jsx)(j.Z,{style:{fontSize:"24px",color:"#666"}})}),(0,o.jsx)("p",{className:"ant-upload-text text-sm",children:"Click or drag images to upload"}),(0,o.jsx)("p",{className:"ant-upload-hint text-xs text-gray-500",children:"Support for PNG, JPG, JPEG formats. Multiple images supported."})]}):(0,o.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e6.map((e,t)=>(0,o.jsxs)("div",{className:"relative inline-block",children:[(0,o.jsx)("img",{src:e7[t]||"",alt:"Upload preview ".concat(t+1),className:"max-w-32 max-h-32 rounded-md border border-gray-200 object-cover"}),(0,o.jsx)("button",{className:"absolute top-1 right-1 bg-white shadow-sm border border-gray-200 rounded px-1 py-1 text-red-500 hover:bg-red-50 text-xs",onClick:()=>tT(t),children:(0,o.jsx)(N.Z,{})})]},t)),(0,o.jsxs)("div",{className:"flex items-center justify-center w-32 h-32 border-2 border-dashed border-gray-300 rounded-md hover:border-gray-400 cursor-pointer",onClick:()=>{var e;return null===(e=document.getElementById("additional-image-upload"))||void 0===e?void 0:e.click()},children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)(j.Z,{style:{fontSize:"24px",color:"#666"}}),(0,o.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Add more"})]}),(0,o.jsx)("input",{id:"additional-image-upload",type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:e=>{Array.from(e.target.files||[]).forEach(e=>t_(e))}})]})]})}),eM===B.KP.TRANSCRIPTION&&(0,o.jsx)("div",{className:"mb-4",children:ti?(0,o.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,o.jsx)(u.Z,{style:{fontSize:"20px",color:"#666"}}),(0,o.jsx)("span",{className:"text-sm font-medium",children:ti.name}),(0,o.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(ti.size/1024/1024).toFixed(2)," MB)"]})]}),(0,o.jsxs)("button",{className:"bg-white shadow-sm border border-gray-200 rounded px-2 py-1 text-red-500 hover:bg-red-50 text-xs",onClick:tL,children:[(0,o.jsx)(N.Z,{})," Remove"]})]}):(0,o.jsxs)(eF,{beforeUpload:e=>(tc(e),!1),accept:"audio/*,.mp3,.mp4,.mpeg,.mpga,.m4a,.wav,.webm",showUploadList:!1,children:[(0,o.jsx)("p",{className:"ant-upload-drag-icon",children:(0,o.jsx)(u.Z,{style:{fontSize:"24px",color:"#666"}})}),(0,o.jsx)("p",{className:"ant-upload-text text-sm",children:"Click or drag audio file to upload"}),(0,o.jsx)("p",{className:"ant-upload-hint text-xs text-gray-500",children:"Support for MP3, MP4, MPEG, MPGA, M4A, WAV, WEBM formats. Max file size: 25 MB."})]})}),eM===B.KP.RESPONSES&&te&&(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,o.jsx)("div",{className:"relative inline-block",children:te.name.toLowerCase().endsWith(".pdf")?(0,o.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,o.jsx)(w.Z,{style:{fontSize:"16px",color:"white"}})}):(0,o.jsx)("img",{src:ts||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:te.name}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:te.name.toLowerCase().endsWith(".pdf")?"PDF":"Image"})]}),(0,o.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:tR,children:(0,o.jsx)(N.Z,{style:{fontSize:"12px"}})})]})}),eM===B.KP.CHAT&&ta&&(0,o.jsx)("div",{className:"mb-2",children:(0,o.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,o.jsx)("div",{className:"relative inline-block",children:ta.name.toLowerCase().endsWith(".pdf")?(0,o.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,o.jsx)(w.Z,{style:{fontSize:"16px",color:"white"}})}):(0,o.jsx)("img",{src:tl||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:ta.name}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:ta.name.toLowerCase().endsWith(".pdf")?"PDF":"Image"})]}),(0,o.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:tU,children:(0,o.jsx)(N.Z,{style:{fontSize:"12px"}})})]})}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)("div",{className:"flex items-center flex-1 bg-white border border-gray-300 rounded-xl px-3 py-1 min-h-[44px]",children:[(0,o.jsxs)("div",{className:"flex-shrink-0 mr-2",children:[eM===B.KP.RESPONSES&&!te&&(0,o.jsx)(eL,{responsesUploadedImage:te,responsesImagePreviewUrl:ts,onImageUpload:e=>(tt(e),to(URL.createObjectURL(e)),!1),onRemoveImage:tR}),eM===B.KP.CHAT&&!ta&&(0,o.jsx)(Q,{chatUploadedImage:ta,chatImagePreviewUrl:tl,onImageUpload:e=>(tn(e),tr(URL.createObjectURL(e)),!1),onRemoveImage:tU})]}),(0,o.jsx)(eB,{value:eb,onChange:e=>ev(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),tM())},placeholder:eM===B.KP.CHAT||eM===B.KP.EMBEDDINGS||eM===B.KP.RESPONSES||eM===B.KP.ANTHROPIC_MESSAGES?"Type your message... (Shift+Enter for new line)":eM===B.KP.IMAGE_EDITS?"Describe how you want to edit the image...":eM===B.KP.SPEECH?"Enter text to convert to speech...":eM===B.KP.TRANSCRIPTION?"Optional: Add context or prompt for transcription...":"Describe the image you want to generate...",disabled:eD,className:"flex-1",autoSize:{minRows:1,maxRows:4},style:{resize:"none",border:"none",boxShadow:"none",background:"transparent",padding:"4px 0",fontSize:"14px",lineHeight:"20px"}}),(0,o.jsx)(a.zx,{onClick:tM,disabled:eD||(eM===B.KP.TRANSCRIPTION?!ti:!eb.trim()),className:"flex-shrink-0 ml-2 !w-8 !h-8 !min-w-8 !p-0 !rounded-full !bg-blue-600 hover:!bg-blue-700 disabled:!bg-gray-300 !border-none !text-white disabled:!text-gray-500 !flex !items-center !justify-center",children:(0,o.jsx)(S.Z,{style:{fontSize:"14px"}})})]}),eD&&(0,o.jsx)(a.zx,{onClick:()=>{eG.current&&(eG.current.abort(),eG.current=null,eH(!1),M.Z.info("Request cancelled"))},className:"bg-red-50 hover:bg-red-100 text-red-600 border-red-200",icon:N.Z,children:"Cancel"})]})]})]})]})}),(0,o.jsxs)(T.Z,{title:"Generated Code",visible:td,onCancel:()=>tm(!1),footer:null,width:800,children:[(0,o.jsxs)("div",{className:"flex justify-between items-end my-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(a.xv,{className:"font-medium block mb-1 text-gray-700",children:"SDK Type"}),(0,o.jsx)(I.default,{value:tp,onChange:e=>tx(e),style:{width:150},options:[{value:"openai",label:"OpenAI SDK"},{value:"azure",label:"Azure SDK"}]})]}),(0,o.jsx)(Z.ZP,{onClick:()=>{navigator.clipboard.writeText(tu),M.Z.success("Copied to clipboard!")},children:"Copy to Clipboard"})]}),(0,o.jsx)(R.Z,{language:"python",style:U.Z,wrapLines:!0,wrapLongLines:!0,className:"rounded-md",customStyle:{maxHeight:"60vh",overflowY:"auto"},children:tu})]}),"custom"===en&&(0,o.jsx)(T.Z,{title:"Select MCP Tool",visible:F,onCancel:()=>G(!1),onOk:()=>{G(!1),M.Z.success("MCP tool selection updated")},width:800,children:et?(0,o.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,o.jsx)(_.Z,{indicator:(0,o.jsx)(i.Z,{style:{fontSize:24},spin:!0})})}):(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)(a.xv,{className:"text-gray-600 block mb-4",children:"Select the MCP tools you want to use in your conversation."}),(0,o.jsx)(I.default,{mode:"multiple",style:{width:"100%"},placeholder:"Select MCP tools",value:X,onChange:e=>$(e),optionLabelProp:"label",allowClear:!0,maxTagCount:"responsive",children:q.map(e=>(0,o.jsx)(I.default.Option,{value:e.name,label:(0,o.jsx)("div",{className:"font-medium",children:e.name}),children:(0,o.jsxs)("div",{className:"flex flex-col py-1",children:[(0,o.jsx)("span",{className:"font-medium",children:e.name}),(0,o.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.description})]})},e.name))})]})})]})}}}]);