(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,728889,e=>{"use strict";var t=e.i(290571),r=e.i(271645),a=e.i(829087),s=e.i(480731),i=e.i(444755),l=e.i(673706),o=e.i(95779);let n={xs:{paddingX:"px-1.5",paddingY:"py-1.5"},sm:{paddingX:"px-1.5",paddingY:"py-1.5"},md:{paddingX:"px-2",paddingY:"py-2"},lg:{paddingX:"px-2",paddingY:"py-2"},xl:{paddingX:"px-2.5",paddingY:"py-2.5"}},c={xs:{height:"h-3",width:"w-3"},sm:{height:"h-5",width:"w-5"},md:{height:"h-5",width:"w-5"},lg:{height:"h-7",width:"w-7"},xl:{height:"h-9",width:"w-9"}},d={simple:{rounded:"",border:"",ring:"",shadow:""},light:{rounded:"rounded-tremor-default",border:"",ring:"",shadow:""},shadow:{rounded:"rounded-tremor-default",border:"border",ring:"",shadow:"shadow-tremor-card dark:shadow-dark-tremor-card"},solid:{rounded:"rounded-tremor-default",border:"border-2",ring:"ring-1",shadow:""},outlined:{rounded:"rounded-tremor-default",border:"border",ring:"ring-2",shadow:""}},u=(0,l.makeClassName)("Icon"),h=r.default.forwardRef((e,h)=>{let{icon:m,variant:g="simple",tooltip:f,size:y=s.Sizes.SM,color:p,className:b}=e,x=(0,t.__rest)(e,["icon","variant","tooltip","size","color","className"]),w=((e,t)=>{switch(e){case"simple":return{textColor:t?(0,l.getColorClassNames)(t,o.colorPalette.text).textColor:"text-tremor-brand dark:text-dark-tremor-brand",bgColor:"",borderColor:"",ringColor:""};case"light":return{textColor:t?(0,l.getColorClassNames)(t,o.colorPalette.text).textColor:"text-tremor-brand dark:text-dark-tremor-brand",bgColor:t?(0,i.tremorTwMerge)((0,l.getColorClassNames)(t,o.colorPalette.background).bgColor,"bg-opacity-20"):"bg-tremor-brand-muted dark:bg-dark-tremor-brand-muted",borderColor:"",ringColor:""};case"shadow":return{textColor:t?(0,l.getColorClassNames)(t,o.colorPalette.text).textColor:"text-tremor-brand dark:text-dark-tremor-brand",bgColor:t?(0,i.tremorTwMerge)((0,l.getColorClassNames)(t,o.colorPalette.background).bgColor,"bg-opacity-20"):"bg-tremor-background dark:bg-dark-tremor-background",borderColor:"border-tremor-border dark:border-dark-tremor-border",ringColor:""};case"solid":return{textColor:t?(0,l.getColorClassNames)(t,o.colorPalette.text).textColor:"text-tremor-brand-inverted dark:text-dark-tremor-brand-inverted",bgColor:t?(0,i.tremorTwMerge)((0,l.getColorClassNames)(t,o.colorPalette.background).bgColor,"bg-opacity-20"):"bg-tremor-brand dark:bg-dark-tremor-brand",borderColor:"border-tremor-brand-inverted dark:border-dark-tremor-brand-inverted",ringColor:"ring-tremor-ring dark:ring-dark-tremor-ring"};case"outlined":return{textColor:t?(0,l.getColorClassNames)(t,o.colorPalette.text).textColor:"text-tremor-brand dark:text-dark-tremor-brand",bgColor:t?(0,i.tremorTwMerge)((0,l.getColorClassNames)(t,o.colorPalette.background).bgColor,"bg-opacity-20"):"bg-tremor-background dark:bg-dark-tremor-background",borderColor:t?(0,l.getColorClassNames)(t,o.colorPalette.ring).borderColor:"border-tremor-brand-subtle dark:border-dark-tremor-brand-subtle",ringColor:t?(0,i.tremorTwMerge)((0,l.getColorClassNames)(t,o.colorPalette.ring).ringColor,"ring-opacity-40"):"ring-tremor-brand-muted dark:ring-dark-tremor-brand-muted"}}})(g,p),{tooltipProps:C,getReferenceProps:v}=(0,a.useTooltip)();return r.default.createElement("span",Object.assign({ref:(0,l.mergeRefs)([h,C.refs.setReference]),className:(0,i.tremorTwMerge)(u("root"),"inline-flex shrink-0 items-center justify-center",w.bgColor,w.textColor,w.borderColor,w.ringColor,d[g].rounded,d[g].border,d[g].shadow,d[g].ring,n[y].paddingX,n[y].paddingY,b)},v,x),r.default.createElement(a.default,Object.assign({text:f},C)),r.default.createElement(m,{className:(0,i.tremorTwMerge)(u("icon"),"shrink-0",c[y].height,c[y].width)}))});h.displayName="Icon",e.s(["default",()=>h],728889)},752978,e=>{"use strict";var t=e.i(728889);e.s(["Icon",()=>t.default])},94629,e=>{"use strict";var t=e.i(271645);let r=t.forwardRef(function(e,r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:r},e),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"}))});e.s(["SwitchVerticalIcon",0,r],94629)},114272,e=>{"use strict";var t=e.i(540143),r=e.i(88587),a=e.i(936553),s=class extends r.Removable{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||i(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||("pending"===this.state.status?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#s({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=(0,a.createRetryer)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#s({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});let s="pending"===this.state.status,i=!this.#a.canStart();try{if(s)t();else{this.#s({type:"pending",variables:e,isPaused:i}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,r);let t=await this.options.onMutate?.(e,r);t!==this.state.context&&this.#s({type:"pending",context:t,variables:e,isPaused:i})}let a=await this.#a.start();return await this.#r.config.onSuccess?.(a,e,this.state.context,this,r),await this.options.onSuccess?.(a,e,this.state.context,r),await this.#r.config.onSettled?.(a,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(a,null,e,this.state.context,r),this.#s({type:"success",data:a}),a}catch(t){try{await this.#r.config.onError?.(t,e,this.state.context,this,r)}catch(e){Promise.reject(e)}try{await this.options.onError?.(t,e,this.state.context,r)}catch(e){Promise.reject(e)}try{await this.#r.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,r)}catch(e){Promise.reject(e)}try{await this.options.onSettled?.(void 0,t,e,this.state.context,r)}catch(e){Promise.reject(e)}throw this.#s({type:"error",error:t}),t}finally{this.#r.runNext(this)}}#s(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),t.notifyManager.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function i(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}e.s(["Mutation",()=>s,"getDefaultState",()=>i])},317751,e=>{"use strict";var t=e.i(619273),r=e.i(286491),a=e.i(540143),s=e.i(915823),i=class extends s.Subscribable{constructor(e={}){super(),this.config=e,this.#i=new Map}#i;build(e,a,s){let i=a.queryKey,l=a.queryHash??(0,t.hashQueryKeyByOptions)(i,a),o=this.get(l);return o||(o=new r.Query({client:e,queryKey:i,queryHash:l,options:e.defaultQueryOptions(a),state:s,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){this.#i.has(e.queryHash)||(this.#i.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#i.get(e.queryHash);t&&(e.destroy(),t===e&&this.#i.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){a.notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#i.get(e)}getAll(){return[...this.#i.values()]}find(e){let r={exact:!0,...e};return this.getAll().find(e=>(0,t.matchQuery)(r,e))}findAll(e={}){let r=this.getAll();return Object.keys(e).length>0?r.filter(r=>(0,t.matchQuery)(e,r)):r}notify(e){a.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){a.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){a.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},l=e.i(114272),o=s,n=class extends o.Subscribable{constructor(e={}){super(),this.config=e,this.#l=new Set,this.#o=new Map,this.#n=0}#l;#o;#n;build(e,t,r){let a=new l.Mutation({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){this.#l.add(e);let t=c(e);if("string"==typeof t){let r=this.#o.get(t);r?r.push(e):this.#o.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#l.delete(e)){let t=c(e);if("string"==typeof t){let r=this.#o.get(t);if(r)if(r.length>1){let t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&this.#o.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=c(e);if("string"!=typeof t)return!0;{let r=this.#o.get(t),a=r?.find(e=>"pending"===e.state.status);return!a||a===e}}runNext(e){let t=c(e);if("string"!=typeof t)return Promise.resolve();{let r=this.#o.get(t)?.find(t=>t!==e&&t.state.isPaused);return r?.continue()??Promise.resolve()}}clear(){a.notifyManager.batch(()=>{this.#l.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#l.clear(),this.#o.clear()})}getAll(){return Array.from(this.#l)}find(e){let r={exact:!0,...e};return this.getAll().find(e=>(0,t.matchMutation)(r,e))}findAll(e={}){return this.getAll().filter(r=>(0,t.matchMutation)(e,r))}notify(e){a.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return a.notifyManager.batch(()=>Promise.all(e.map(e=>e.continue().catch(t.noop))))}};function c(e){return e.options.scope?.id}var d=e.i(175555),u=e.i(814448);function h(e){return{onFetch:(r,a)=>{let s=r.options,i=r.fetchOptions?.meta?.fetchMore?.direction,l=r.state.data?.pages||[],o=r.state.data?.pageParams||[],n={pages:[],pageParams:[]},c=0,d=async()=>{let a=!1,d=(0,t.ensureQueryFn)(r.options,r.fetchOptions),u=async(e,s,i)=>{let l;if(a)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);let o=(l={client:r.client,queryKey:r.queryKey,pageParam:s,direction:i?"backward":"forward",meta:r.options.meta},(0,t.addConsumeAwareSignal)(l,()=>r.signal,()=>a=!0),l),n=await d(o),{maxPages:c}=r.options,u=i?t.addToStart:t.addToEnd;return{pages:u(e.pages,n,c),pageParams:u(e.pageParams,s,c)}};if(i&&l.length){let e="backward"===i,t={pages:l,pageParams:o},r=(e?function(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}:m)(s,t);n=await u(t,r,e)}else{let t=e??l.length;do{let e=0===c?o[0]??s.initialPageParam:m(s,n);if(c>0&&null==e)break;n=await u(n,e),c++}while(c<t)}return n};r.options.persister?r.fetchFn=()=>r.options.persister?.(d,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},a):r.fetchFn=d}}}function m(e,{pages:t,pageParams:r}){let a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,r[a],r):void 0}var g=class{#c;#r;#d;#u;#h;#m;#g;#f;constructor(e={}){this.#c=e.queryCache||new i,this.#r=e.mutationCache||new n,this.#d=e.defaultOptions||{},this.#u=new Map,this.#h=new Map,this.#m=0}mount(){this.#m++,1===this.#m&&(this.#g=d.focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#c.onFocus())}),this.#f=u.onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#c.onOnline())}))}unmount(){this.#m--,0===this.#m&&(this.#g?.(),this.#g=void 0,this.#f?.(),this.#f=void 0)}isFetching(e){return this.#c.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#r.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#c.get(t.queryHash)?.state.data}ensureQueryData(e){let r=this.defaultQueryOptions(e),a=this.#c.build(this,r),s=a.state.data;return void 0===s?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime((0,t.resolveStaleTime)(r.staleTime,a))&&this.prefetchQuery(r),Promise.resolve(s))}getQueriesData(e){return this.#c.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,r,a){let s=this.defaultQueryOptions({queryKey:e}),i=this.#c.get(s.queryHash),l=i?.state.data,o=(0,t.functionalUpdate)(r,l);if(void 0!==o)return this.#c.build(this,s).setData(o,{...a,manual:!0})}setQueriesData(e,t,r){return a.notifyManager.batch(()=>this.#c.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,r)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#c.get(t.queryHash)?.state}removeQueries(e){let t=this.#c;a.notifyManager.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let r=this.#c;return a.notifyManager.batch(()=>(r.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,r={}){let s={revert:!0,...r};return Promise.all(a.notifyManager.batch(()=>this.#c.findAll(e).map(e=>e.cancel(s)))).then(t.noop).catch(t.noop)}invalidateQueries(e,t={}){return a.notifyManager.batch(()=>(this.#c.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,r={}){let s={...r,cancelRefetch:r.cancelRefetch??!0};return Promise.all(a.notifyManager.batch(()=>this.#c.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let r=e.fetch(void 0,s);return s.throwOnError||(r=r.catch(t.noop)),"paused"===e.state.fetchStatus?Promise.resolve():r}))).then(t.noop)}fetchQuery(e){let r=this.defaultQueryOptions(e);void 0===r.retry&&(r.retry=!1);let a=this.#c.build(this,r);return a.isStaleByTime((0,t.resolveStaleTime)(r.staleTime,a))?a.fetch(r):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(t.noop).catch(t.noop)}fetchInfiniteQuery(e){return e.behavior=h(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(t.noop).catch(t.noop)}ensureInfiniteQueryData(e){return e.behavior=h(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return u.onlineManager.isOnline()?this.#r.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#c}getMutationCache(){return this.#r}getDefaultOptions(){return this.#d}setDefaultOptions(e){this.#d=e}setQueryDefaults(e,r){this.#u.set((0,t.hashKey)(e),{queryKey:e,defaultOptions:r})}getQueryDefaults(e){let r=[...this.#u.values()],a={};return r.forEach(r=>{(0,t.partialMatchKey)(e,r.queryKey)&&Object.assign(a,r.defaultOptions)}),a}setMutationDefaults(e,r){this.#h.set((0,t.hashKey)(e),{mutationKey:e,defaultOptions:r})}getMutationDefaults(e){let r=[...this.#h.values()],a={};return r.forEach(r=>{(0,t.partialMatchKey)(e,r.mutationKey)&&Object.assign(a,r.defaultOptions)}),a}defaultQueryOptions(e){if(e._defaulted)return e;let r={...this.#d.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return r.queryHash||(r.queryHash=(0,t.hashQueryKeyByOptions)(r.queryKey,r)),void 0===r.refetchOnReconnect&&(r.refetchOnReconnect="always"!==r.networkMode),void 0===r.throwOnError&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===t.skipToken&&(r.enabled=!1),r}defaultMutationOptions(e){return e?._defaulted?e:{...this.#d.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#c.clear(),this.#r.clear()}};e.s(["QueryClient",()=>g],317751)},366283,e=>{"use strict";var t=e.i(290571),r=e.i(271645),a=e.i(95779),s=e.i(444755),i=e.i(673706);let l=(0,i.makeClassName)("Callout"),o=r.default.forwardRef((e,o)=>{let{title:n,icon:c,color:d,className:u,children:h}=e,m=(0,t.__rest)(e,["title","icon","color","className","children"]);return r.default.createElement("div",Object.assign({ref:o,className:(0,s.tremorTwMerge)(l("root"),"flex flex-col overflow-hidden rounded-tremor-default text-tremor-default border-l-4 py-3 pr-3 pl-4",d?(0,s.tremorTwMerge)((0,i.getColorClassNames)(d,a.colorPalette.background).bgColor,(0,i.getColorClassNames)(d,a.colorPalette.darkBorder).borderColor,(0,i.getColorClassNames)(d,a.colorPalette.darkText).textColor,"dark:bg-opacity-10 bg-opacity-10"):(0,s.tremorTwMerge)("bg-tremor-brand-faint border-tremor-brand-emphasis text-tremor-brand-emphasis","dark:bg-dark-tremor-brand-muted/70 dark:border-dark-tremor-brand-emphasis dark:text-dark-tremor-brand-emphasis"),u)},m),r.default.createElement("div",{className:(0,s.tremorTwMerge)(l("header"),"flex items-start")},c?r.default.createElement(c,{className:(0,s.tremorTwMerge)(l("icon"),"flex-none h-5 w-5 mr-1.5")}):null,r.default.createElement("h4",{className:(0,s.tremorTwMerge)(l("title"),"font-semibold")},n)),r.default.createElement("p",{className:(0,s.tremorTwMerge)(l("body"),"overflow-y-auto",h?"mt-2":"")},h))});o.displayName="Callout",e.s(["Callout",()=>o],366283)},700514,e=>{"use strict";var t=e.i(271645);e.s(["defaultPageSize",0,25,"useBaseUrl",0,()=>{let[e,r]=(0,t.useState)("http://localhost:4000");return(0,t.useEffect)(()=>{{let{protocol:e,host:t}=window.location;r(`${e}//${t}`)}},[]),e}])},633627,969550,e=>{"use strict";var t=e.i(764205);let r=async e=>{if(!e)return[];try{let{aliases:r}=await (0,t.keyAliasesCall)(e);return Array.from(new Set((r||[]).filter(Boolean)))}catch(e){return console.error("Error fetching all key aliases:",e),[]}},a=async(e,r)=>{if(!e)return[];try{let a=[],s=1,i=!0;for(;i;){let l=await (0,t.teamListCall)(e,r||null,null);a=[...a,...l],s<l.total_pages?s++:i=!1}return a}catch(e){return console.error("Error fetching all teams:",e),[]}},s=async e=>{if(!e)return[];try{let r=[],a=1,s=!0;for(;s;){let i=await (0,t.organizationListCall)(e);r=[...r,...i],a<i.total_pages?a++:s=!1}return r}catch(e){return console.error("Error fetching all organizations:",e),[]}};e.s(["fetchAllKeyAliases",0,r,"fetchAllOrganizations",0,s,"fetchAllTeams",0,a],633627);var i=e.i(843476),l=e.i(271645),o=e.i(464571),n=e.i(311451),c=e.i(199133);let d=l.forwardRef(function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"}))});var u=e.i(374009);e.s(["default",0,({options:e,onApplyFilters:t,onResetFilters:r,initialValues:a={},buttonLabel:s="Filters"})=>{let[h,m]=(0,l.useState)(!1),[g,f]=(0,l.useState)(a),[y,p]=(0,l.useState)({}),[b,x]=(0,l.useState)({}),[w,C]=(0,l.useState)({}),[v,S]=(0,l.useState)({}),k=(0,l.useCallback)((0,u.default)(async(e,t)=>{if(t.isSearchable&&t.searchFn){x(e=>({...e,[t.name]:!0}));try{let r=await t.searchFn(e);p(e=>({...e,[t.name]:r}))}catch(e){console.error("Error searching:",e),p(e=>({...e,[t.name]:[]}))}finally{x(e=>({...e,[t.name]:!1}))}}},300),[]),j=(0,l.useCallback)(async e=>{if(e.isSearchable&&e.searchFn&&!v[e.name]){x(t=>({...t,[e.name]:!0})),S(t=>({...t,[e.name]:!0}));try{let t=await e.searchFn("");p(r=>({...r,[e.name]:t}))}catch(t){console.error("Error loading initial options:",t),p(t=>({...t,[e.name]:[]}))}finally{x(t=>({...t,[e.name]:!1}))}}},[v]);(0,l.useEffect)(()=>{h&&e.forEach(e=>{e.isSearchable&&!v[e.name]&&j(e)})},[h,e,j,v]);let N=(e,r)=>{let a={...g,[e]:r};f(a),t(a)};return(0,i.jsxs)("div",{className:"w-full",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,i.jsx)(o.Button,{icon:(0,i.jsx)(d,{className:"h-4 w-4"}),onClick:()=>m(!h),className:"flex items-center gap-2",children:s}),(0,i.jsx)(o.Button,{onClick:()=>{let t={};e.forEach(e=>{t[e.name]=""}),f(t),r()},children:"Reset Filters"})]}),h&&(0,i.jsx)("div",{className:"grid grid-cols-3 gap-x-6 gap-y-4 mb-6",children:["Team ID","Status","Organization ID","Key Alias","User ID","End User","Error Code","Error Message","Key Hash","Model"].map(t=>{let r=e.find(e=>e.label===t||e.name===t);return r?(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("label",{className:"text-sm text-gray-600",children:r.label||r.name}),r.isSearchable?(0,i.jsx)(c.Select,{showSearch:!0,className:"w-full",placeholder:`Search ${r.label||r.name}...`,value:g[r.name]||void 0,onChange:e=>N(r.name,e),onDropdownVisibleChange:e=>{e&&r.isSearchable&&!v[r.name]&&j(r)},onSearch:e=>{C(t=>({...t,[r.name]:e})),r.searchFn&&k(e,r)},filterOption:!1,loading:b[r.name],options:y[r.name]||[],allowClear:!0,notFoundContent:b[r.name]?"Loading...":"No results found"}):r.options?(0,i.jsx)(c.Select,{className:"w-full",placeholder:`Select ${r.label||r.name}...`,value:g[r.name]||void 0,onChange:e=>N(r.name,e),allowClear:!0,children:r.options.map(e=>(0,i.jsx)(c.Select.Option,{value:e.value,children:e.label},e.value))}):(0,i.jsx)(n.Input,{className:"w-full",placeholder:`Enter ${r.label||r.name}...`,value:g[r.name]||"",onChange:e=>N(r.name,e.target.value),allowClear:!0})]},r.name):null})})]})}],969550)},584578,e=>{"use strict";var t=e.i(764205);let r=async(e,r,a,s,i)=>{let l;l="Admin"!=a&&"Admin Viewer"!=a?await (0,t.teamListCall)(e,s?.organization_id||null,r):await (0,t.teamListCall)(e,s?.organization_id||null),console.log(`givenTeams: ${l}`),i(l)};e.s(["fetchTeams",0,r])},693569,e=>{"use strict";var t=e.i(843476),r=e.i(268004),a=e.i(309426),s=e.i(350967),i=e.i(898586),l=e.i(947293),o=e.i(618566),n=e.i(271645),c=e.i(566606),d=e.i(584578),u=e.i(764205),h=e.i(702597),m=e.i(207082),g=e.i(500330),f=e.i(871943),y=e.i(502547),p=e.i(360820),b=e.i(94629),x=e.i(152990),w=e.i(682830),C=e.i(389083),v=e.i(994388),S=e.i(752978),k=e.i(269200),j=e.i(942232),N=e.i(977572),_=e.i(427612),D=e.i(64848),O=e.i(496020),M=e.i(599724),P=e.i(981339),T=e.i(592968),z=e.i(355619),I=e.i(266027),A=e.i(633627),E=e.i(374009),K=e.i(700514),R=e.i(135214),q=e.i(969550),Q=e.i(20147);function U({teams:e,organizations:r,onSortChange:a,currentSort:s}){let[i,l]=(0,n.useState)(null),[o,c]=n.default.useState(()=>s?[{id:s.sortBy,desc:"desc"===s.sortOrder}]:[{id:"created_at",desc:!0}]),[d,h]=n.default.useState({pageIndex:0,pageSize:50}),U=o.length>0?o[0].id:null,B=o.length>0?o[0].desc?"desc":"asc":null,{data:$,isPending:F,isFetching:L,refetch:V}=(0,m.useKeys)(d.pageIndex+1,d.pageSize,{sortBy:U||void 0,sortOrder:B||void 0}),H=$?.total_count||0,[J,W]=(0,n.useState)({}),{filters:G,filteredKeys:X,allKeyAliases:Y,allTeams:Z,allOrganizations:ee,handleFilterChange:et,handleFilterReset:er}=function({keys:e,teams:t,organizations:r}){let a={"Team ID":"","Organization ID":"","Key Alias":"","User ID":"","Sort By":"created_at","Sort Order":"desc"},{accessToken:s}=(0,R.default)(),[i,l]=(0,n.useState)(a),[o,c]=(0,n.useState)(t||[]),[d,h]=(0,n.useState)(r||[]),[m,g]=(0,n.useState)(e),f=(0,n.useRef)(0),y=(0,n.useCallback)((0,E.default)(async e=>{if(!s)return;let t=Date.now();f.current=t;try{let r=await (0,u.keyListCall)(s,e["Organization ID"]||null,e["Team ID"]||null,e["Key Alias"]||null,e["User ID"]||null,e["Key Hash"]||null,1,K.defaultPageSize,e["Sort By"]||null,e["Sort Order"]||null);t===f.current&&r&&(g(r.keys),console.log("called from debouncedSearch filters:",JSON.stringify(e)),console.log("called from debouncedSearch data:",JSON.stringify(r)))}catch(e){console.error("Error searching users:",e)}},300),[s]);(0,n.useEffect)(()=>{if(!e)return void g([]);let t=[...e];i["Team ID"]&&(t=t.filter(e=>e.team_id===i["Team ID"])),i["Organization ID"]&&(t=t.filter(e=>e.organization_id===i["Organization ID"])),g(t)},[e,i]),(0,n.useEffect)(()=>{let e=async()=>{let e=await (0,A.fetchAllTeams)(s);e.length>0&&c(e);let t=await (0,A.fetchAllOrganizations)(s);t.length>0&&h(t)};s&&e()},[s]);let p=(0,I.useQuery)({queryKey:["allKeys"],queryFn:async()=>{if(!s)throw Error("Access token required");return await (0,A.fetchAllKeyAliases)(s)},enabled:!!s}).data||[];return(0,n.useEffect)(()=>{t&&t.length>0&&c(e=>e.length<t.length?t:e)},[t]),(0,n.useEffect)(()=>{r&&r.length>0&&h(e=>e.length<r.length?r:e)},[r]),{filters:i,filteredKeys:m,allKeyAliases:p,allTeams:o,allOrganizations:d,handleFilterChange:(e,t=!1)=>{l({"Team ID":e["Team ID"]||"","Organization ID":e["Organization ID"]||"","Key Alias":e["Key Alias"]||"","User ID":e["User ID"]||"","Sort By":e["Sort By"]||"created_at","Sort Order":e["Sort Order"]||"desc"}),t||y({...i,...e})},handleFilterReset:()=>{l(a),y(a)}}}({keys:$?.keys||[],teams:e,organizations:r});(0,n.useEffect)(()=>{if(V){let e=()=>{V()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}},[V]);let ea=[{id:"expander",header:()=>null,size:40,enableSorting:!1,cell:({row:e})=>e.getCanExpand()?(0,t.jsx)("button",{onClick:e.getToggleExpandedHandler(),style:{cursor:"pointer"},children:e.getIsExpanded()?"â–¼":"â–¶"}):null},{id:"token",accessorKey:"token",header:"Key ID",size:100,enableSorting:!0,cell:e=>{let r=e.getValue(),a=e.cell.column.getSize();return(0,t.jsx)(T.Tooltip,{title:r,children:(0,t.jsx)(v.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate block",style:{maxWidth:a,overflow:"hidden"},onClick:()=>l(e.row.original),children:r??"-"})})}},{id:"key_alias",accessorKey:"key_alias",header:"Key Alias",size:150,enableSorting:!0,cell:e=>{let r=e.getValue(),a=e.cell.column.getSize();return(0,t.jsx)(T.Tooltip,{title:r,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:a,overflow:"hidden"},children:r??"-"})})}},{id:"key_name",accessorKey:"key_name",header:"Secret Key",size:120,enableSorting:!1,cell:e=>(0,t.jsx)("span",{className:"font-mono text-xs",children:e.getValue()})},{id:"team_alias",accessorKey:"team_id",header:"Team Alias",size:120,enableSorting:!1,cell:({row:t,getValue:r})=>{let a=r(),s=e?.find(e=>e.team_id===a);return s?.team_alias||"Unknown"}},{id:"team_id",accessorKey:"team_id",header:"Team ID",size:80,enableSorting:!1,cell:e=>{let r=e.getValue(),a=e.cell.column.getSize();return(0,t.jsx)(T.Tooltip,{title:r,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:a,overflow:"hidden"},children:r??"-"})})}},{id:"organization_id",accessorKey:"organization_id",header:"Organization ID",size:140,enableSorting:!1,cell:e=>e.getValue()?e.renderValue():"-"},{id:"user_email",accessorKey:"user",header:"User Email",size:160,enableSorting:!1,cell:e=>{let r=e.getValue(),a=r?.user_email,s=e.cell.column.getSize();return(0,t.jsx)(T.Tooltip,{title:a,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:s,overflow:"hidden"},children:a??"-"})})}},{id:"user_id",accessorKey:"user_id",header:"User ID",size:70,enableSorting:!1,cell:e=>{let r=e.getValue(),a="default_user_id"===r?"Default Proxy Admin":r,s=e.cell.column.getSize();return(0,t.jsx)(T.Tooltip,{title:a,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:s,overflow:"hidden"},children:a??"-"})})}},{id:"created_at",accessorKey:"created_at",header:"Created At",size:120,enableSorting:!0,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"-"}},{id:"created_by",accessorKey:"created_by",header:"Created By",size:70,enableSorting:!1,cell:e=>{let r=e.getValue(),a="default_user_id"===r?"Default Proxy Admin":r,s=e.cell.column.getSize();return(0,t.jsx)(T.Tooltip,{title:a,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:s,overflow:"hidden"},children:a??"-"})})}},{id:"updated_at",accessorKey:"updated_at",header:"Updated At",size:120,enableSorting:!0,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"Never"}},{id:"expires",accessorKey:"expires",header:"Expires",size:120,enableSorting:!1,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"Never"}},{id:"spend",accessorKey:"spend",header:"Spend (USD)",size:100,enableSorting:!0,cell:e=>(0,g.formatNumberWithCommas)(e.getValue(),4)},{id:"max_budget",accessorKey:"max_budget",header:"Budget (USD)",size:110,enableSorting:!0,cell:e=>{let t=e.getValue();return null===t?"Unlimited":`$${(0,g.formatNumberWithCommas)(t)}`}},{id:"budget_reset_at",accessorKey:"budget_reset_at",header:"Budget Reset",size:130,enableSorting:!1,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleString():"Never"}},{id:"models",accessorKey:"models",header:"Models",size:200,enableSorting:!1,cell:e=>{let r=e.getValue();return(0,t.jsx)("div",{className:"flex flex-col py-2",children:Array.isArray(r)?(0,t.jsx)("div",{className:"flex flex-col",children:0===r.length?(0,t.jsx)(C.Badge,{size:"xs",className:"mb-1",color:"red",children:(0,t.jsx)(M.Text,{children:"All Proxy Models"})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex items-start",children:[r.length>3&&(0,t.jsx)("div",{children:(0,t.jsx)(S.Icon,{icon:J[e.row.id]?f.ChevronDownIcon:y.ChevronRightIcon,className:"cursor-pointer",size:"xs",onClick:()=>{W(t=>({...t,[e.row.id]:!t[e.row.id]}))}})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[r.slice(0,3).map((e,r)=>"all-proxy-models"===e?(0,t.jsx)(C.Badge,{size:"xs",color:"red",children:(0,t.jsx)(M.Text,{children:"All Proxy Models"})},r):(0,t.jsx)(C.Badge,{size:"xs",color:"blue",children:(0,t.jsx)(M.Text,{children:e.length>30?`${(0,z.getModelDisplayName)(e).slice(0,30)}...`:(0,z.getModelDisplayName)(e)})},r)),r.length>3&&!J[e.row.id]&&(0,t.jsx)(C.Badge,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,t.jsxs)(M.Text,{children:["+",r.length-3," ",r.length-3==1?"more model":"more models"]})}),J[e.row.id]&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:r.slice(3).map((e,r)=>"all-proxy-models"===e?(0,t.jsx)(C.Badge,{size:"xs",color:"red",children:(0,t.jsx)(M.Text,{children:"All Proxy Models"})},r+3):(0,t.jsx)(C.Badge,{size:"xs",color:"blue",children:(0,t.jsx)(M.Text,{children:e.length>30?`${(0,z.getModelDisplayName)(e).slice(0,30)}...`:(0,z.getModelDisplayName)(e)})},r+3))})]})]})})}):null})}},{id:"rate_limits",header:"Rate Limits",size:140,enableSorting:!1,cell:({row:e})=>{let r=e.original;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["TPM: ",null!==r.tpm_limit?r.tpm_limit:"Unlimited"]}),(0,t.jsxs)("div",{children:["RPM: ",null!==r.rpm_limit?r.rpm_limit:"Unlimited"]})]})}}],es=[{name:"Team ID",label:"Team ID",isSearchable:!0,searchFn:async e=>Z&&0!==Z.length?Z.filter(t=>t.team_id.toLowerCase().includes(e.toLowerCase())||t.team_alias&&t.team_alias.toLowerCase().includes(e.toLowerCase())).map(e=>({label:`${e.team_alias||e.team_id} (${e.team_id})`,value:e.team_id})):[]},{name:"Organization ID",label:"Organization ID",isSearchable:!0,searchFn:async e=>ee&&0!==ee.length?ee.filter(t=>t.organization_id?.toLowerCase().includes(e.toLowerCase())??!1).filter(e=>null!==e.organization_id&&void 0!==e.organization_id).map(e=>({label:`${e.organization_id||"Unknown"} (${e.organization_id})`,value:e.organization_id})):[]},{name:"Key Alias",label:"Key Alias",isSearchable:!0,searchFn:async e=>Y.filter(t=>t.toLowerCase().includes(e.toLowerCase())).map(e=>({label:e,value:e}))},{name:"User ID",label:"User ID",isSearchable:!1},{name:"Key Hash",label:"Key Hash",isSearchable:!1}];console.log(`keys: ${JSON.stringify($)}`);let ei=(0,x.useReactTable)({data:X,columns:ea.filter(e=>"expander"!==e.id),columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:o,pagination:d},onSortingChange:e=>{let t="function"==typeof e?e(o):e;if(console.log(`newSorting: ${JSON.stringify(t)}`),c(t),t&&t.length>0){let e=t[0],r=e.id,s=e.desc?"desc":"asc";console.log(`sortBy: ${r}, sortOrder: ${s}`),et({...G,"Sort By":r,"Sort Order":s},!0),a?.(r,s)}},onPaginationChange:h,getCoreRowModel:(0,w.getCoreRowModel)(),getSortedRowModel:(0,w.getSortedRowModel)(),getPaginationRowModel:(0,w.getPaginationRowModel)(),enableSorting:!0,manualSorting:!1,manualPagination:!0,pageCount:Math.ceil(H/d.pageSize)});n.default.useEffect(()=>{s&&c([{id:s.sortBy,desc:"desc"===s.sortOrder}])},[s]);let{pageIndex:el,pageSize:eo}=ei.getState().pagination,en=Math.min((el+1)*eo,H),ec=`${el*eo+1} - ${en}`;return(0,t.jsx)("div",{className:"w-full h-full overflow-hidden",children:i?(0,t.jsx)(Q.default,{keyId:i.token,onClose:()=>l(null),keyData:i,teams:Z,onDelete:V}):(0,t.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"w-full mb-6",children:(0,t.jsx)(q.default,{options:es,onApplyFilters:et,initialValues:G,onResetFilters:er})}),(0,t.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[F||L?(0,t.jsx)(P.Skeleton.Node,{active:!0,style:{width:200,height:20}}):(0,t.jsxs)("span",{className:"inline-flex text-sm text-gray-700",children:["Showing ",ec," of ",H," results"]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-2",children:[F||L?(0,t.jsx)(P.Skeleton.Node,{active:!0,style:{width:74,height:20}}):(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",el+1," of ",ei.getPageCount()]}),F||L?(0,t.jsx)(P.Skeleton.Button,{active:!0,size:"small",style:{width:84,height:30}}):(0,t.jsx)("button",{onClick:()=>ei.previousPage(),disabled:F||L||!ei.getCanPreviousPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),F||L?(0,t.jsx)(P.Skeleton.Button,{active:!0,size:"small",style:{width:58,height:30}}):(0,t.jsx)("button",{onClick:()=>ei.nextPage(),disabled:F||L||!ei.getCanNextPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),(0,t.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(k.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:ei.getCenterTotalSize()},children:[(0,t.jsx)(_.TableHead,{children:ei.getHeaderGroups().map(e=>(0,t.jsx)(O.TableRow,{children:e.headers.map(e=>(0,t.jsx)(D.TableHeaderCell,{"data-header-id":e.id,className:`py-1 h-8 relative hover:bg-gray-50 ${"actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,style:{width:e.getSize(),position:"relative",cursor:e.column.getCanSort()?"pointer":"default"},onMouseEnter:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&(t.style.opacity="0.5")},onMouseLeave:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&!e.column.getIsResizing()&&(t.style.opacity="0")},onClick:e.column.getCanSort()?e.column.getToggleSortingHandler():void 0,children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,x.flexRender)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&e.column.getCanSort()&&(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(p.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(f.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(b.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${ei.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,t.jsx)(j.TableBody,{children:F||L?(0,t.jsx)(O.TableRow,{children:(0,t.jsx)(N.TableCell,{colSpan:ea.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"ðŸš… Loading keys..."})})})}):X.length>0?ei.getRowModel().rows.map(e=>(0,t.jsx)(O.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(N.TableCell,{style:{width:e.column.getSize(),maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:`py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ${"models"===e.column.id&&e.getValue().length>3?"px-0":""}`,children:(0,x.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(O.TableRow,{children:(0,t.jsx)(N.TableCell,{colSpan:ea.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No keys found"})})})})})]})})})})]})})}e.s(["default",0,({userID:e,userRole:m,teams:g,keys:f,setUserRole:y,userEmail:p,setUserEmail:b,setTeams:x,setKeys:w,premiumUser:C,organizations:v,addKey:S,createClicked:k})=>{let j,[N,_]=(0,n.useState)(null),[D,O]=(0,n.useState)(null),M=(0,o.useSearchParams)(),P=(console.log("COOKIES",document.cookie),(j=document.cookie.split("; ").find(e=>e.startsWith("token=")))?j.split("=")[1]:null),T=M.get("invitation_id"),[z,I]=(0,n.useState)(null),[A,E]=(0,n.useState)(null),[K,R]=(0,n.useState)([]),[q,Q]=(0,n.useState)(null),[B,$]=(0,n.useState)(null);if(window.addEventListener("beforeunload",function(){sessionStorage.clear()}),(0,n.useEffect)(()=>{if(P){let e=(0,l.jwtDecode)(P);if(e){if(console.log("Decoded token:",e),console.log("Decoded key:",e.key),I(e.key),e.user_role){let t=function(e){if(!e)return"Undefined Role";switch(console.log(`Received user role: ${e}`),e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"app_user":return"App User";case"internal_user":return"Internal User";case"internal_user_viewer":return"Internal Viewer";default:return"Unknown Role"}}(e.user_role);console.log("Decoded user_role:",t),y(t)}else console.log("User role not defined");e.user_email?b(e.user_email):console.log(`User Email is not set ${e}`)}}if(e&&z&&m&&!f&&!N){let t=sessionStorage.getItem("userModels"+e);t?R(JSON.parse(t)):(console.log(`currentOrg: ${JSON.stringify(D)}`),(async()=>{try{let t=await (0,u.getProxyUISettings)(z);Q(t);let r=await (0,u.userInfoCall)(z,e,m,!1,null,null);_(r.user_info),console.log(`userSpendData: ${JSON.stringify(N)}`),r?.teams[0].keys?w(r.keys.concat(r.teams.filter(t=>"Admin"===m||t.user_id===e).flatMap(e=>e.keys))):w(r.keys),sessionStorage.setItem("userData"+e,JSON.stringify(r.keys)),sessionStorage.setItem("userSpendData"+e,JSON.stringify(r.user_info));let a=(await (0,u.modelAvailableCall)(z,e,m)).data.map(e=>e.id);console.log("available_model_names:",a),R(a),console.log("userModels:",K),sessionStorage.setItem("userModels"+e,JSON.stringify(a))}catch(e){console.error("There was an error fetching the data",e),e.message.includes("Invalid proxy server token passed")&&F()}})(),(0,d.fetchTeams)(z,e,m,D,x))}},[e,P,z,f,m]),(0,n.useEffect)(()=>{z&&(async()=>{try{let e=await (0,u.keyInfoCall)(z,[z]);console.log("keyInfo: ",e)}catch(e){e.message.includes("Invalid proxy server token passed")&&F()}})()},[z]),(0,n.useEffect)(()=>{console.log(`currentOrg: ${JSON.stringify(D)}, accessToken: ${z}, userID: ${e}, userRole: ${m}`),z&&(console.log("fetching teams"),(0,d.fetchTeams)(z,e,m,D,x))},[D]),(0,n.useEffect)(()=>{if(null!==f&&null!=B&&null!==B.team_id){let e=0;for(let t of(console.log(`keys: ${JSON.stringify(f)}`),f))B.hasOwnProperty("team_id")&&null!==t.team_id&&t.team_id===B.team_id&&(e+=t.spend);console.log(`sum: ${e}`),E(e)}else if(null!==f){let e=0;for(let t of f)e+=t.spend;E(e)}},[B]),null!=T)return(0,t.jsx)(c.default,{});function F(){(0,r.clearTokenCookies)();let e=(0,u.getProxyBaseUrl)();console.log("proxyBaseUrl:",e);let t=e?`${e}/sso/key/generate`:"/sso/key/generate";return console.log("Full URL:",t),window.location.href=t,null}if(null==P)return console.log("All cookies before redirect:",document.cookie),F(),null;try{let e=(0,l.jwtDecode)(P);console.log("Decoded token:",e);let t=e.exp,r=Math.floor(Date.now()/1e3);if(t&&r>=t)return console.log("Token expired, redirecting to login"),F(),null}catch(e){return console.error("Error decoding token:",e),(0,r.clearTokenCookies)(),F(),null}if(null==z)return null;if(null==e)return(0,t.jsx)("h1",{children:"User ID is not set"});if(null==m&&y("App Owner"),m&&"Admin Viewer"==m){let{Title:e,Paragraph:r}=i.Typography;return(0,t.jsxs)("div",{children:[(0,t.jsx)(e,{level:1,children:"Access Denied"}),(0,t.jsx)(r,{children:"Ask your proxy admin for access to create keys"})]})}return console.log("inside user dashboard, selected team",B),console.log("All cookies after redirect:",document.cookie),(0,t.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,t.jsx)(s.Grid,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,t.jsxs)(a.Col,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,t.jsx)(h.default,{team:B,teams:g,data:f,addKey:S},B?B.team_id:null),(0,t.jsx)(U,{teams:g,organizations:v})]})})})}],693569)},995118,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(764205),s=e.i(317751),i=e.i(912598),l=e.i(135214),o=e.i(693569),n=e.i(214541);e.s(["default",0,()=>{let{accessToken:e,userRole:c,userId:d,premiumUser:u,userEmail:h}=(0,l.default)(),{teams:m,setTeams:g}=(0,n.default)(),[f,y]=(0,r.useState)(!1),[p,b]=(0,r.useState)([]),x=new s.QueryClient,{keys:w,isLoading:C,error:v,pagination:S,refresh:k,setKeys:j}=(({selectedTeam:e,currentOrg:t,selectedKeyAlias:s,accessToken:i,createClicked:l,expand:o=[]})=>{let[n,c]=(0,r.useState)({keys:[],total_count:0,current_page:1,total_pages:0}),[d,u]=(0,r.useState)(!0),[h,m]=(0,r.useState)(null),g=async(e={})=>{try{if(console.log("calling fetchKeys"),!i)return void console.log("accessToken",i);u(!0);let t="number"==typeof e.page?e.page:1,r="number"==typeof e.pageSize?e.pageSize:100,s=await (0,a.keyListCall)(i,null,null,null,null,null,t,r,null,null,o.join(","));console.log("data",s),c(s),m(null)}catch(e){m(e instanceof Error?e:Error("An error occurred"))}finally{u(!1)}};return(0,r.useEffect)(()=>{g(),console.log("selectedTeam",e,"currentOrg",t,"accessToken",i,"selectedKeyAlias",s)},[e,t,i,s,l]),{keys:n.keys,isLoading:d,error:h,pagination:{currentPage:n.current_page,totalPages:n.total_pages,totalCount:n.total_count},refresh:g,setKeys:e=>{c(t=>{let r="function"==typeof e?e(t.keys):e;return{...t,keys:r}})}}})({selectedKeyAlias:null,currentOrg:null,accessToken:e||"",createClicked:f});return(0,t.jsx)(i.QueryClientProvider,{client:x,children:(0,t.jsx)(o.default,{userID:d,userRole:c,userEmail:h,teams:m,keys:w,setUserRole:()=>{},setUserEmail:()=>{},setTeams:g,setKeys:j,premiumUser:u,organizations:p,addKey:e=>{j(t=>t?[...t,e]:[e]),y(()=>!f)},createClicked:f})})}],995118)},601236,e=>{e.v(e=>Promise.resolve().then(()=>e(764205)))}]);