(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,241902,e=>{"use strict";var t,r=e.i(843476),s=e.i(271645),l=e.i(752978),a=e.i(994388),o=e.i(309426),i=e.i(599724),n=e.i(350967),c=e.i(653824),d=e.i(881073),m=e.i(197647),x=e.i(723731),u=e.i(404206),h=e.i(278587),p=e.i(764205),v=e.i(871943),g=e.i(360820),j=e.i(94629),f=e.i(152990),b=e.i(682830),y=e.i(269200),_=e.i(942232),w=e.i(977572),N=e.i(427612),S=e.i(64848),C=e.i(496020),I=e.i(592968),T=e.i(902555),k=e.i(916925);let A=({data:e,onView:t,onEdit:l,onDelete:a})=>{let[o,i]=s.default.useState([{id:"created_at",desc:!0}]),n=[{header:"Vector Store ID",accessorKey:"vector_store_id",cell:({row:e})=>{let s=e.original;return(0,r.jsx)("button",{onClick:()=>t(s.vector_store_id),className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",children:s.vector_store_id.length>15?`${s.vector_store_id.slice(0,15)}...`:s.vector_store_id})}},{header:"Name",accessorKey:"vector_store_name",cell:({row:e})=>{let t=e.original;return(0,r.jsx)(I.Tooltip,{title:t.vector_store_name,children:(0,r.jsx)("span",{className:"text-xs",children:t.vector_store_name||"-"})})}},{header:"Description",accessorKey:"vector_store_description",cell:({row:e})=>{let t=e.original;return(0,r.jsx)(I.Tooltip,{title:t.vector_store_description,children:(0,r.jsx)("span",{className:"text-xs",children:t.vector_store_description||"-"})})}},{header:"Files",accessorKey:"vector_store_metadata",cell:({row:e})=>{let t=e.original,s=t.vector_store_metadata?.ingested_files||[];if(0===s.length)return(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"-"});let l=s.map(e=>e.filename||e.file_url||"Unknown").join(", "),a=1===s.length?s[0].filename||s[0].file_url||"1 file":`${s.length} files`;return(0,r.jsx)(I.Tooltip,{title:l,children:(0,r.jsx)("span",{className:"text-xs text-blue-600",children:a})})}},{header:"Provider",accessorKey:"custom_llm_provider",cell:({row:e})=>{let t=e.original,{displayName:s,logo:l}=(0,k.getProviderLogoAndName)(t.custom_llm_provider);return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&(0,r.jsx)("img",{src:l,alt:s,className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-xs",children:s})]})}},{header:"Created At",accessorKey:"created_at",sortingFn:"datetime",cell:({row:e})=>{let t=e.original;return(0,r.jsx)("span",{className:"text-xs",children:new Date(t.created_at).toLocaleDateString()})}},{header:"Updated At",accessorKey:"updated_at",sortingFn:"datetime",cell:({row:e})=>{let t=e.original;return(0,r.jsx)("span",{className:"text-xs",children:new Date(t.updated_at).toLocaleDateString()})}},{id:"actions",header:"",cell:({row:e})=>{let t=e.original;return(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(T.default,{variant:"Edit",tooltipText:"Edit vector store",onClick:()=>l(t.vector_store_id)}),(0,r.jsx)(T.default,{variant:"Delete",tooltipText:"Delete vector store",onClick:()=>a(t.vector_store_id)})]})}}],c=(0,f.useReactTable)({data:e,columns:n,state:{sorting:o},onSortingChange:i,getCoreRowModel:(0,b.getCoreRowModel)(),getSortedRowModel:(0,b.getSortedRowModel)(),enableSorting:!0});return(0,r.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(y.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,r.jsx)(N.TableHead,{children:c.getHeaderGroups().map(e=>(0,r.jsx)(C.TableRow,{children:e.headers.map(e=>(0,r.jsx)(S.TableHeaderCell,{className:`py-1 h-8 ${"actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,onClick:e.column.getToggleSortingHandler(),children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,f.flexRender)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&(0,r.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,r.jsx)(g.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,r.jsx)(v.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,r.jsx)(j.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})})]})},e.id))},e.id))}),(0,r.jsx)(_.TableBody,{children:c.getRowModel().rows.length>0?c.getRowModel().rows.map(e=>(0,r.jsx)(C.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,r.jsx)(w.TableCell,{className:`py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ${"actions"===e.column.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,children:(0,f.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,r.jsx)(C.TableRow,{children:(0,r.jsx)(w.TableCell,{colSpan:n.length,className:"h-8 text-center",children:(0,r.jsx)("div",{className:"text-center text-gray-500",children:(0,r.jsx)("p",{children:"No vector stores found"})})})})})]})})})};var L=e.i(779241),V=e.i(212931),O=e.i(808613),E=e.i(199133),D=e.i(311451),P=e.i(560445),F=e.i(827252),B=((t={}).Bedrock="Amazon Bedrock",t.S3Vectors="Amazon S3 Vectors",t.PgVector="PostgreSQL pgvector (LiteLLM Connector)",t.VertexRagEngine="Vertex AI RAG Engine",t.OpenAI="OpenAI",t.Azure="Azure OpenAI",t.Milvus="Milvus",t);let z={Bedrock:"bedrock",PgVector:"pg_vector",VertexRagEngine:"vertex_ai",OpenAI:"openai",Azure:"azure",Milvus:"milvus",S3Vectors:"s3_vectors"},R="../ui/assets/logos/",M={"Amazon Bedrock":`${R}bedrock.svg`,"PostgreSQL pgvector (LiteLLM Connector)":`${R}postgresql.svg`,"Vertex AI RAG Engine":`${R}google.svg`,OpenAI:`${R}openai_small.svg`,"Azure OpenAI":`${R}microsoft_azure.svg`,Milvus:`${R}milvus.svg`,"Amazon S3 Vectors":`${R}s3_vector.png`},q={bedrock:[],pg_vector:[{name:"api_base",label:"API Base",tooltip:"Enter the base URL of your deployed litellm-pgvector server (e.g., http://your-server:8000)",placeholder:"http://your-deployed-server:8000",required:!0,type:"text"},{name:"api_key",label:"API Key",tooltip:"Enter the API key from your deployed litellm-pgvector server",placeholder:"your-deployed-api-key",required:!0,type:"password"}],vertex_rag_engine:[],openai:[{name:"api_key",label:"API Key",tooltip:"Enter your OpenAI API key",placeholder:"sk-...",required:!0,type:"password"}],azure:[{name:"api_key",label:"API Key",tooltip:"Enter your Azure OpenAI API key",placeholder:"your-azure-api-key",required:!0,type:"password"},{name:"api_base",label:"API Base",tooltip:"Enter your Azure OpenAI endpoint (e.g., https://your-resource.openai.azure.com/)",placeholder:"https://your-resource.openai.azure.com/",required:!0,type:"text"}],milvus:[{name:"api_key",label:"API Key",tooltip:"To obtain a token, you should use a colon (:) to concatenate the username and password that you use to access your Milvus instance (e.g., username:password)",placeholder:"username:password or api key",required:!0,type:"password"},{name:"api_base",label:"API Base",tooltip:"Enter your Milvus endpoint (e.g., https://your-milvus-endpoint.com/)",placeholder:"https://your-milvus-endpoint.com/",required:!0,type:"text"},{name:"embedding_model",label:"Embedding Model",tooltip:"Select the embedding model to use",placeholder:"text-embedding-3-small",required:!0,type:"select"}],s3_vectors:[{name:"vector_bucket_name",label:"Vector Bucket Name",tooltip:"S3 bucket name for vector storage (will be auto-created if it doesn't exist)",placeholder:"my-vector-bucket",required:!0,type:"text"},{name:"index_name",label:"Index Name",tooltip:"Name for the vector index (optional, will be auto-generated if not provided)",placeholder:"my-vector-index",required:!1,type:"text"},{name:"aws_region_name",label:"AWS Region",tooltip:"AWS region where the S3 bucket is located (e.g., us-west-2)",placeholder:"us-west-2",required:!0,type:"text"},{name:"embedding_model",label:"Embedding Model",tooltip:"Select the embedding model to use for vector generation",placeholder:"text-embedding-3-small",required:!0,type:"select"}]},$=e=>q[e]||[];var U=e.i(689020),K=e.i(727749);let G=({isVisible:e,onCancel:t,onSuccess:l,accessToken:o,credentials:i})=>{let[n]=O.Form.useForm(),[c,d]=(0,s.useState)("{}"),[m,x]=(0,s.useState)("bedrock"),[u,h]=(0,s.useState)([]);(0,s.useEffect)(()=>{o&&(async()=>{try{let e=await (0,U.fetchAvailableModels)(o);e.length>0&&h(e)}catch(e){console.error("Error fetching model info:",e)}})()},[o]);let v=async e=>{if(o)try{let t={};try{t=c.trim()?JSON.parse(c):{}}catch(e){K.default.fromBackend("Invalid JSON in metadata field");return}let r={vector_store_id:e.vector_store_id,custom_llm_provider:e.custom_llm_provider,vector_store_name:e.vector_store_name,vector_store_description:e.vector_store_description,vector_store_metadata:t,litellm_credential_name:e.litellm_credential_name};r.litellm_params=$(e.custom_llm_provider).reduce((t,r)=>("milvus"===e.custom_llm_provider&&"embedding_model"===r.name?t.litellm_embedding_model=e[r.name]:t[r.name]=e[r.name],t),{}),await (0,p.vectorStoreCreateCall)(o,r),K.default.success("Vector store created successfully"),n.resetFields(),d("{}"),l()}catch(e){console.error("Error creating vector store:",e),K.default.fromBackend("Error creating vector store: "+e)}},g=()=>{n.resetFields(),d("{}"),x("bedrock"),t()};return(0,r.jsx)(V.Modal,{title:"Add New Vector Store",open:e,width:1e3,footer:null,onCancel:g,children:(0,r.jsxs)(O.Form,{form:n,onFinish:v,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Provider"," ",(0,r.jsx)(I.Tooltip,{title:"Select the provider for this vector store",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"custom_llm_provider",rules:[{required:!0,message:"Please select a provider"}],initialValue:"bedrock",children:(0,r.jsx)(E.Select,{onChange:e=>x(e),children:Object.entries(B).map(([e,t])=>(0,r.jsx)(E.Select.Option,{value:z[e],children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("img",{src:M[t],alt:`${e} logo`,className:"w-5 h-5",onError:e=>{let r=e.target,s=r.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,r)}}}),(0,r.jsx)("span",{children:t})]})},e))})}),"pg_vector"===m&&(0,r.jsx)(P.Alert,{message:"PG Vector Setup Required",description:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"LiteLLM provides a server to connect to PG Vector. To use this provider:"}),(0,r.jsxs)("ol",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,r.jsxs)("li",{children:["Deploy the litellm-pgvector server from:"," ",(0,r.jsx)("a",{href:"https://github.com/BerriAI/litellm-pgvector",target:"_blank",rel:"noopener noreferrer",children:"https://github.com/BerriAI/litellm-pgvector"})]}),(0,r.jsx)("li",{children:"Configure your PostgreSQL database with pgvector extension"}),(0,r.jsx)("li",{children:"Start the server and note the API base URL and API key"}),(0,r.jsx)("li",{children:"Enter those details in the fields below"})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),"vertex_rag_engine"===m&&(0,r.jsx)(P.Alert,{message:"Vertex AI RAG Engine Setup",description:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"To use Vertex AI RAG Engine:"}),(0,r.jsxs)("ol",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,r.jsxs)("li",{children:["Set up your Vertex AI RAG Engine corpus following the guide:"," ",(0,r.jsx)("a",{href:"https://cloud.google.com/vertex-ai/generative-ai/docs/rag-engine/rag-overview",target:"_blank",rel:"noopener noreferrer",children:"Vertex AI RAG Engine Overview"})]}),(0,r.jsx)("li",{children:"Create a corpus in your Google Cloud project"}),(0,r.jsx)("li",{children:"Note the corpus ID from the Vertex AI console"}),(0,r.jsx)("li",{children:"Enter the corpus ID in the Vector Store ID field below"})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Vector Store ID"," ",(0,r.jsx)(I.Tooltip,{title:"Enter the vector store ID from your api provider",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"vector_store_id",rules:[{required:!0,message:"Please input the vector store ID from your api provider"}],children:(0,r.jsx)(L.TextInput,{placeholder:"vertex_rag_engine"===m?"6917529027641081856 (Get corpus ID from Vertex AI console)":"Enter vector store ID from your provider"})}),$(m).map(e=>{if("select"===e.type){let t=u.filter(e=>"embedding"===e.mode||null===e.mode).map(e=>({value:e.model_group,label:e.model_group}));return(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:[e.label," ",(0,r.jsx)(I.Tooltip,{title:e.tooltip,children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:e.name,rules:e.required?[{required:!0,message:`Please select the ${e.label.toLowerCase()}`}]:[],children:(0,r.jsx)(E.Select,{placeholder:e.placeholder,showSearch:!0,filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:t,style:{width:"100%"}})},e.name)}return(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:[e.label," ",(0,r.jsx)(I.Tooltip,{title:e.tooltip,children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:e.name,rules:e.required?[{required:!0,message:`Please input the ${e.label.toLowerCase()}`}]:[],children:(0,r.jsx)(L.TextInput,{type:e.type||"text",placeholder:e.placeholder})},e.name)}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Vector Store Name"," ",(0,r.jsx)(I.Tooltip,{title:"Custom name you want to give to the vector store, this name will be rendered on the LiteLLM UI",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"vector_store_name",children:(0,r.jsx)(L.TextInput,{})}),(0,r.jsx)(O.Form.Item,{label:"Description",name:"vector_store_description",children:(0,r.jsx)(D.Input.TextArea,{rows:4})}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Existing Credentials"," ",(0,r.jsx)(I.Tooltip,{title:"Optionally select API provider credentials for this vector store eg. Bedrock API KEY",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"litellm_credential_name",children:(0,r.jsx)(E.Select,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:[{value:null,label:"None"},...i.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Metadata"," ",(0,r.jsx)(I.Tooltip,{title:"JSON metadata for the vector store (optional)",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),children:(0,r.jsx)(D.Input.TextArea,{rows:4,value:c,onChange:e=>d(e.target.value),placeholder:'{"key": "value"}'})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(a.Button,{onClick:g,variant:"secondary",children:"Cancel"}),(0,r.jsx)(a.Button,{variant:"primary",type:"submit",children:"Create"})]})]})})};var H=e.i(127952),J=e.i(304967),W=e.i(629569),X=e.i(389083),Q=e.i(464571),Y=e.i(530212),Z=e.i(175712),ee=e.i(898586),et=e.i(482725),er=e.i(998573),es=e.i(312361);e.i(247167);var el=e.i(931067),ea={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},eo=e.i(9583),ei=s.forwardRef(function(e,t){return s.createElement(eo.default,(0,el.default)({},e,{ref:t,icon:ea}))}),en=e.i(210612),ec=e.i(56456),ed=e.i(755151),em=e.i(240647);let{TextArea:ex}=D.Input,{Text:eu,Title:eh}=ee.Typography,ep=({vectorStoreId:e,accessToken:t,className:l=""})=>{let[a,o]=(0,s.useState)(""),[i,n]=(0,s.useState)(!1),[c,d]=(0,s.useState)([]),[m,x]=(0,s.useState)({}),u=async()=>{if(!a.trim())return void er.message.warning("Please enter a search query");n(!0);try{let r=await (0,p.vectorStoreSearchCall)(t,e,a),s={query:a,response:r,timestamp:Date.now()};d(e=>[s,...e]),o("")}catch(e){console.error("Error searching vector store:",e),K.default.fromBackend("Failed to search vector store")}finally{n(!1)}};return(0,r.jsx)(Z.Card,{className:"w-full rounded-xl shadow-md",children:(0,r.jsxs)("div",{className:"flex flex-col h-[600px]",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(en.DatabaseOutlined,{className:"mr-2 text-blue-500"}),(0,r.jsx)(eh,{level:4,className:"mb-0",children:"Test Vector Store"})]}),c.length>0&&(0,r.jsx)(Q.Button,{onClick:()=>{d([]),x({}),K.default.success("Search history cleared")},size:"small",children:"Clear History"})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto p-4 pb-0",children:[0===c.length?(0,r.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,r.jsx)(en.DatabaseOutlined,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,r.jsx)(eu,{children:"Test your vector store by entering a search query below"})]}):(0,r.jsx)("div",{className:"space-y-4",children:c.map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3 bg-blue-50 border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("strong",{className:"text-sm",children:"Query"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),(0,r.jsx)("div",{className:"text-left",children:e.query})]})}),(0,r.jsx)("div",{className:"text-left",children:(0,r.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3 bg-white border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(en.DatabaseOutlined,{className:"text-green-500"}),(0,r.jsx)("strong",{className:"text-sm",children:"Vector Store Results"}),e.response&&(0,r.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600",children:[e.response.data?.length||0," results"]})]}),e.response&&e.response.data&&e.response.data.length>0?(0,r.jsx)("div",{className:"space-y-3",children:e.response.data.map((e,s)=>{let l=m[`${t}-${s}`]||!1;return(0,r.jsxs)("div",{className:"border rounded-lg overflow-hidden bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>{let e;return e=`${t}-${s}`,void x(t=>({...t,[e]:!t[e]}))},children:[(0,r.jsxs)("div",{className:"flex items-center",children:[l?(0,r.jsx)(ed.DownOutlined,{className:"text-gray-500 mr-2"}):(0,r.jsx)(em.RightOutlined,{className:"text-gray-500 mr-2"}),(0,r.jsxs)("span",{className:"font-medium text-sm",children:["Result ",s+1]}),!l&&e.content&&e.content[0]&&(0,r.jsxs)("span",{className:"ml-2 text-xs text-gray-500 truncate max-w-md",children:["- ",e.content[0].text.substring(0,100),"..."]})]}),(0,r.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["Score: ",e.score.toFixed(4)]})]}),l&&(0,r.jsxs)("div",{className:"border-t bg-white p-3",children:[e.content&&e.content.map((e,t)=>(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["Content (",e.type,")"]}),(0,r.jsx)("div",{className:"text-sm bg-gray-50 p-3 rounded border text-gray-800 max-h-40 overflow-y-auto",children:e.text})]},t)),(e.file_id||e.filename||e.attributes)&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Metadata"}),(0,r.jsxs)("div",{className:"space-y-2 text-xs",children:[e.file_id&&(0,r.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,r.jsx)("span",{className:"font-medium",children:"File ID:"})," ",e.file_id]}),e.filename&&(0,r.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,r.jsx)("span",{className:"font-medium",children:"Filename:"})," ",e.filename]}),e.attributes&&Object.keys(e.attributes).length>0&&(0,r.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,r.jsx)("span",{className:"font-medium block mb-1",children:"Attributes:"}),(0,r.jsx)("pre",{className:"text-xs bg-white p-2 rounded border overflow-x-auto",children:JSON.stringify(e.attributes,null,2)})]})]})]})]})]},s)})}):(0,r.jsx)("div",{className:"text-gray-500 text-sm",children:"No results found"})]})}),t<c.length-1&&(0,r.jsx)(es.Divider,{})]},t))}),i&&(0,r.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,r.jsx)(et.Spin,{indicator:(0,r.jsx)(ec.LoadingOutlined,{style:{fontSize:24},spin:!0})})})]}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 bg-white",children:(0,r.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(ex,{value:a,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u())},placeholder:"Enter your search query... (Shift+Enter for new line)",disabled:i,autoSize:{minRows:1,maxRows:4},style:{resize:"none"}})}),(0,r.jsx)(Q.Button,{type:"primary",onClick:u,disabled:i||!a.trim(),icon:(0,r.jsx)(ei,{}),loading:i,children:"Search"})]})})]})})},ev=({vectorStoreId:e,onClose:t,accessToken:l,is_admin:o,editVectorStore:n})=>{let[h]=O.Form.useForm(),[v,g]=(0,s.useState)(null),[j,f]=(0,s.useState)(n),[b,y]=(0,s.useState)("{}"),[_,w]=(0,s.useState)([]),[N,S]=(0,s.useState)("details"),C=async()=>{if(l)try{let t=await (0,p.vectorStoreInfoCall)(l,e);if(t&&t.vector_store){if(g(t.vector_store),t.vector_store.vector_store_metadata){let e="string"==typeof t.vector_store.vector_store_metadata?JSON.parse(t.vector_store.vector_store_metadata):t.vector_store.vector_store_metadata;y(JSON.stringify(e,null,2))}n&&h.setFieldsValue({vector_store_id:t.vector_store.vector_store_id,custom_llm_provider:t.vector_store.custom_llm_provider,vector_store_name:t.vector_store.vector_store_name,vector_store_description:t.vector_store.vector_store_description})}}catch(e){console.error("Error fetching vector store details:",e),K.default.fromBackend("Error fetching vector store details: "+e)}},T=async()=>{if(l)try{let e=await (0,p.credentialListCall)(l);console.log("List credentials response:",e),w(e.credentials||[])}catch(e){console.error("Error fetching credentials:",e)}};(0,s.useEffect)(()=>{C(),T()},[e,l]);let A=async e=>{if(l)try{let t={};try{t=b?JSON.parse(b):{}}catch(e){K.default.fromBackend("Invalid JSON in metadata field");return}let r={vector_store_id:e.vector_store_id,custom_llm_provider:e.custom_llm_provider,vector_store_name:e.vector_store_name,vector_store_description:e.vector_store_description,vector_store_metadata:t};await (0,p.vectorStoreUpdateCall)(l,r),K.default.success("Vector store updated successfully"),f(!1),C()}catch(e){console.error("Error updating vector store:",e),K.default.fromBackend("Error updating vector store: "+e)}};return v?(0,r.jsxs)("div",{className:"p-4 max-w-full",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.Button,{icon:Y.ArrowLeftIcon,variant:"light",className:"mb-4",onClick:t,children:"Back to Vector Stores"}),(0,r.jsxs)(W.Title,{children:["Vector Store ID: ",v.vector_store_id]}),(0,r.jsx)(i.Text,{className:"text-gray-500",children:v.vector_store_description||"No description"})]}),o&&!j&&(0,r.jsx)(a.Button,{onClick:()=>f(!0),children:"Edit Vector Store"})]}),(0,r.jsxs)(c.TabGroup,{children:[(0,r.jsxs)(d.TabList,{className:"mb-6",children:[(0,r.jsx)(m.Tab,{children:"Details"}),(0,r.jsx)(m.Tab,{children:"Test Vector Store"})]}),(0,r.jsxs)(x.TabPanels,{children:[(0,r.jsx)(u.TabPanel,{children:j?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsx)(W.Title,{children:"Edit Vector Store"})}),(0,r.jsx)(J.Card,{children:(0,r.jsxs)(O.Form,{form:h,onFinish:A,layout:"vertical",initialValues:v,children:[(0,r.jsx)(O.Form.Item,{label:"Vector Store ID",name:"vector_store_id",rules:[{required:!0,message:"Please input a vector store ID"}],children:(0,r.jsx)(D.Input,{disabled:!0})}),(0,r.jsx)(O.Form.Item,{label:"Vector Store Name",name:"vector_store_name",children:(0,r.jsx)(D.Input,{})}),(0,r.jsx)(O.Form.Item,{label:"Description",name:"vector_store_description",children:(0,r.jsx)(D.Input.TextArea,{rows:4})}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Provider"," ",(0,r.jsx)(I.Tooltip,{title:"Select the provider for this vector store",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"custom_llm_provider",rules:[{required:!0,message:"Please select a provider"}],children:(0,r.jsx)(E.Select,{children:Object.entries(k.Providers).map(([e,t])=>"Bedrock"===e?(0,r.jsx)(E.Select.Option,{value:k.provider_map[e],children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("img",{src:k.providerLogoMap[t],alt:`${e} logo`,className:"w-5 h-5",onError:e=>{let r=e.target,s=r.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,r)}}}),(0,r.jsx)("span",{children:t})]})},e):null)})}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(i.Text,{className:"text-sm text-gray-500 mb-2",children:"Either select existing credentials OR enter provider credentials below"})}),(0,r.jsx)(O.Form.Item,{label:"Existing Credentials",name:"litellm_credential_name",children:(0,r.jsx)(E.Select,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:[{value:null,label:"None"},..._.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,r.jsxs)("div",{className:"flex items-center my-4",children:[(0,r.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,r.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,r.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Metadata"," ",(0,r.jsx)(I.Tooltip,{title:"JSON metadata for the vector store",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),children:(0,r.jsx)(D.Input.TextArea,{rows:4,value:b,onChange:e=>y(e.target.value),placeholder:'{"key": "value"}'})}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)(Q.Button,{onClick:()=>f(!1),children:"Cancel"}),(0,r.jsx)(Q.Button,{type:"primary",htmlType:"submit",children:"Save Changes"})]})]})})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)(W.Title,{children:"Vector Store Details"}),o&&(0,r.jsx)(a.Button,{onClick:()=>f(!0),children:"Edit Vector Store"})]}),(0,r.jsx)(J.Card,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Text,{className:"font-medium",children:"ID"}),(0,r.jsx)(i.Text,{children:v.vector_store_id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Text,{className:"font-medium",children:"Name"}),(0,r.jsx)(i.Text,{children:v.vector_store_name||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Text,{className:"font-medium",children:"Description"}),(0,r.jsx)(i.Text,{children:v.vector_store_description||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Text,{className:"font-medium",children:"Provider"}),(0,r.jsx)("div",{className:"flex items-center space-x-2 mt-1",children:(()=>{let e=v.custom_llm_provider||"bedrock",{displayName:t,logo:s}=(()=>{let t=Object.keys(k.provider_map).find(t=>k.provider_map[t].toLowerCase()===e.toLowerCase());if(!t)return{displayName:e,logo:""};let r=k.Providers[t],s=k.providerLogoMap[r];return{displayName:r,logo:s}})();return(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsx)("img",{src:s,alt:`${t} logo`,className:"w-5 h-5",onError:e=>{let r=e.target,s=r.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,r)}}}),(0,r.jsx)(X.Badge,{color:"blue",children:t})]})})()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Text,{className:"font-medium",children:"Metadata"}),(0,r.jsx)("div",{className:"bg-gray-50 p-3 rounded mt-2 font-mono text-xs overflow-auto max-h-48",children:(0,r.jsx)("pre",{children:b})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Text,{className:"font-medium",children:"Created"}),(0,r.jsx)(i.Text,{children:v.created_at?new Date(v.created_at).toLocaleString():"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Text,{className:"font-medium",children:"Last Updated"}),(0,r.jsx)(i.Text,{children:v.updated_at?new Date(v.updated_at).toLocaleString():"-"})]})]})})]})}),(0,r.jsx)(u.TabPanel,{children:(0,r.jsx)(ep,{vectorStoreId:v.vector_store_id,accessToken:l||""})})]})]})]}):(0,r.jsx)("div",{children:"Loading..."})};var eg=e.i(515831);let ej={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};var ef=s.forwardRef(function(e,t){return s.createElement(eo.default,(0,el.default)({},e,{ref:t,icon:ej}))}),eb=e.i(291542),ey=e.i(906579),e_=e.i(984125),e_=e_,ew=e.i(166406),eN=e.i(955135);let eS=({documents:e,onRemove:t})=>{let s=[{title:"Name",dataIndex:"name",key:"name",render:(e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm",children:e}),t.size&&(0,r.jsxs)("span",{className:"text-xs text-gray-400",children:["(",(e=>{if(!e)return"-";let t=e/1024;return t<1024?`${t.toFixed(2)} KB`:`${(t/1024).toFixed(2)} MB`})(t.size),")"]})]})},{title:"Status",dataIndex:"status",key:"status",width:150,render:e=>{let t;return t=({uploading:{color:"blue",text:"Uploading"},done:{color:"green",text:"Ready"},error:{color:"red",text:"Error"},removed:{color:"default",text:"Removed"}})[e],(0,r.jsx)(ey.Badge,{color:t.color,text:t.text})}},{title:"Actions",key:"actions",width:120,render:(e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(I.Tooltip,{title:"View details",children:(0,r.jsx)(e_.default,{className:"cursor-pointer text-gray-600 hover:text-blue-500",onClick:()=>console.log("View",s)})}),(0,r.jsx)(I.Tooltip,{title:"Copy ID",children:(0,r.jsx)(ew.CopyOutlined,{className:"cursor-pointer text-gray-600 hover:text-blue-500",onClick:()=>{var e;return e=s.uid,void(navigator.clipboard.writeText(e),er.message.success("Document ID copied to clipboard"))}})}),(0,r.jsx)(I.Tooltip,{title:"Remove",children:(0,r.jsx)(eN.DeleteOutlined,{className:"cursor-pointer text-gray-600 hover:text-red-500",onClick:()=>t(s.uid)})})]})}];return(0,r.jsx)(eb.Table,{dataSource:e,columns:s,rowKey:"uid",pagination:!1,locale:{emptyText:"No documents uploaded yet. Upload documents above to get started."},size:"small"})},eC=({accessToken:e,providerParams:t,onParamsChange:l})=>{let[a,o]=(0,s.useState)([]),[i,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{e&&(async()=>{n(!0);try{let t=(await (0,U.fetchAvailableModels)(e)).filter(e=>"embedding"===e.mode);o(t)}catch(e){console.error("Error fetching embedding models:",e)}finally{n(!1)}})()},[e]);let c=(e,r)=>{l({...t,[e]:r})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P.Alert,{message:"AWS S3 Vectors Setup",description:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"AWS S3 Vectors allows you to store and query vector embeddings directly in S3:"}),(0,r.jsxs)("ul",{style:{marginLeft:"16px",marginTop:"8px"},children:[(0,r.jsx)("li",{children:"Vector buckets and indexes will be automatically created if they don't exist"}),(0,r.jsx)("li",{children:"Vector dimensions are auto-detected from your selected embedding model"}),(0,r.jsx)("li",{children:"Ensure your AWS credentials have permissions for S3 Vectors operations"}),(0,r.jsxs)("li",{children:["Learn more:"," ",(0,r.jsx)("a",{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-vector-buckets.html",target:"_blank",rel:"noopener noreferrer",children:"AWS S3 Vectors Documentation"})]})]})]}),type:"info",showIcon:!0,style:{marginBottom:"16px"}}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Vector Bucket Name"," ",(0,r.jsx)(I.Tooltip,{title:"S3 bucket name for vector storage (must be at least 3 characters, lowercase letters, numbers, hyphens, and periods only)",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),required:!0,validateStatus:t.vector_bucket_name&&t.vector_bucket_name.length<3?"error":void 0,help:t.vector_bucket_name&&t.vector_bucket_name.length<3?"Bucket name must be at least 3 characters":void 0,children:(0,r.jsx)(D.Input,{value:t.vector_bucket_name||"",onChange:e=>c("vector_bucket_name",e.target.value),placeholder:"my-vector-bucket (min 3 chars)",size:"large",className:"rounded-md"})}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Index Name"," ",(0,r.jsx)(I.Tooltip,{title:"Name for the vector index (optional, will be auto-generated if not provided). If provided, must be at least 3 characters.",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),validateStatus:t.index_name&&t.index_name.length>0&&t.index_name.length<3?"error":void 0,help:t.index_name&&t.index_name.length>0&&t.index_name.length<3?"Index name must be at least 3 characters if provided":void 0,children:(0,r.jsx)(D.Input,{value:t.index_name||"",onChange:e=>c("index_name",e.target.value),placeholder:"my-vector-index (optional, min 3 chars)",size:"large",className:"rounded-md"})}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["AWS Region"," ",(0,r.jsx)(I.Tooltip,{title:"AWS region where the S3 bucket is located (e.g., us-west-2)",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),required:!0,children:(0,r.jsx)(D.Input,{value:t.aws_region_name||"",onChange:e=>c("aws_region_name",e.target.value),placeholder:"us-west-2",size:"large",className:"rounded-md"})}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Embedding Model"," ",(0,r.jsx)(I.Tooltip,{title:"Select the embedding model to use for vector generation",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),required:!0,children:(0,r.jsx)(E.Select,{value:t.embedding_model||void 0,onChange:e=>c("embedding_model",e),placeholder:"Select an embedding model",size:"large",showSearch:!0,loading:i,filterOption:(e,t)=>(t?.label??"").toLowerCase().includes(e.toLowerCase()),options:a.map(e=>({value:e.model_group,label:e.model_group})),style:{width:"100%"}})})]})},{Dragger:eI}=eg.Upload,eT=({accessToken:e,onSuccess:t})=>{let[l]=O.Form.useForm(),[a,o]=(0,s.useState)([]),[n,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)("bedrock"),[x,u]=(0,s.useState)(""),[h,v]=(0,s.useState)(""),[g,j]=(0,s.useState)([]),[f,b]=(0,s.useState)({}),y={name:"file",multiple:!0,accept:".pdf,.txt,.docx,.md,.doc",beforeUpload:e=>{if(!["application/pdf","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/markdown"].includes(e.type))return er.message.error(`${e.name} is not a supported file type. Please upload PDF, TXT, DOCX, or MD files.`),eg.Upload.LIST_IGNORE;if(!(e.size/1024/1024<50))return er.message.error(`${e.name} must be smaller than 50MB!`),eg.Upload.LIST_IGNORE;let t={uid:e.uid,name:e.name,status:"done",size:e.size,type:e.type,originFileObj:e};return o(e=>[...e,t]),!1},onRemove:e=>{o(t=>t.filter(t=>t.uid!==e.uid))},fileList:a.map(e=>({uid:e.uid,name:e.name,status:e.status,size:e.size})),showUploadList:!1},_=async()=>{let r;if(0===a.length)return void er.message.warning("Please upload at least one document");if(!d)return void er.message.warning("Please select a provider");for(let e of $(d).filter(e=>e.required))if(!f[e.name])return void er.message.warning(`Please provide ${e.label}`);if("s3_vectors"===d){if(f.vector_bucket_name&&f.vector_bucket_name.length<3)return void er.message.warning("Vector bucket name must be at least 3 characters");if(f.index_name&&f.index_name.length>0&&f.index_name.length<3)return void er.message.warning("Index name must be at least 3 characters if provided")}if(!e)return void er.message.error("No access token available");c(!0);let s=[];try{for(let t of a)if(t.originFileObj){o(e=>e.map(e=>e.uid===t.uid?{...e,status:"uploading"}:e));try{let l=await (0,p.ragIngestCall)(e,t.originFileObj,d,r,x||void 0,h||void 0,f);!r&&l.vector_store_id&&(r=l.vector_store_id),s.push(l),o(e=>e.map(e=>e.uid===t.uid?{...e,status:"done"}:e))}catch(e){throw console.error(`Error ingesting ${t.name}:`,e),o(e=>e.map(e=>e.uid===t.uid?{...e,status:"error"}:e)),e}}j(s),K.default.success(`Successfully created vector store with ${s.length} document(s). Vector Store ID: ${r}`),t&&r&&t(r),setTimeout(()=>{o([]),j([])},3e3)}catch(e){console.error("Error creating vector store:",e),K.default.fromBackend(`Failed to create vector store: ${e}`)}finally{c(!1)}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(W.Title,{children:"Create Vector Store"}),(0,r.jsx)(i.Text,{className:"text-gray-500",children:"Upload documents and select a provider to create a new vector store with embedded content."})]}),(0,r.jsxs)(J.Card,{children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(i.Text,{className:"font-medium",children:"Step 1: Upload Documents"}),(0,r.jsx)(i.Text,{className:"text-sm text-gray-500 block mt-1",children:"Upload one or more documents (PDF, TXT, DOCX, MD). Maximum file size: 50MB per file."})]}),(0,r.jsxs)(eI,{...y,children:[(0,r.jsx)("p",{className:"ant-upload-drag-icon",children:(0,r.jsx)(ef,{style:{fontSize:"48px",color:"#1890ff"}})}),(0,r.jsx)("p",{className:"ant-upload-text",children:"Click or drag files to this area to upload"}),(0,r.jsx)("p",{className:"ant-upload-hint",children:"Support for single or bulk upload. Supported formats: PDF, TXT, DOCX, MD"})]})]}),a.length>0&&(0,r.jsxs)(J.Card,{children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)(i.Text,{className:"font-medium",children:["Uploaded Documents (",a.length,")"]})}),(0,r.jsx)(eS,{documents:a,onRemove:e=>{o(t=>t.filter(t=>t.uid!==e))}})]}),(0,r.jsx)(J.Card,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Text,{className:"font-medium",children:"Step 2: Configure Vector Store"}),(0,r.jsx)(i.Text,{className:"text-sm text-gray-500 block mt-1",children:"Choose the provider and optionally provide a name and description for your vector store."})]}),(0,r.jsxs)(O.Form,{form:l,layout:"vertical",children:[(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Vector Store Name"," ",(0,r.jsx)(I.Tooltip,{title:"Optional: Give your vector store a meaningful name",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),children:(0,r.jsx)(D.Input,{value:x,onChange:e=>u(e.target.value),placeholder:"e.g., Product Documentation, Customer Support KB",size:"large",className:"rounded-md"})}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Description"," ",(0,r.jsx)(I.Tooltip,{title:"Optional: Describe what this vector store contains",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),children:(0,r.jsx)(D.Input.TextArea,{value:h,onChange:e=>v(e.target.value),placeholder:"e.g., Contains all product documentation and user guides",rows:2,size:"large",className:"rounded-md"})}),(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:["Provider"," ",(0,r.jsx)(I.Tooltip,{title:"Select the provider for embedding and vector store operations",children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),required:!0,children:(0,r.jsx)(E.Select,{value:d,onChange:m,placeholder:"Select a provider",size:"large",style:{width:"100%"},children:Object.entries(B).map(([e,t])=>(0,r.jsx)(E.Select.Option,{value:z[e],children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("img",{src:M[t],alt:`${e} logo`,className:"w-5 h-5",onError:e=>{let r=e.target,s=r.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,r)}}}),(0,r.jsx)("span",{children:t})]})},e))})}),"s3_vectors"===d&&(0,r.jsx)(eC,{accessToken:e,providerParams:f,onParamsChange:b}),"s3_vectors"!==d&&$(d).map(e=>"select"===e.type?(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:[e.label," ",(0,r.jsx)(I.Tooltip,{title:e.tooltip,children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),required:e.required,children:(0,r.jsx)(D.Input,{value:f[e.name]||"",onChange:t=>b(r=>({...r,[e.name]:t.target.value})),placeholder:e.placeholder,size:"large",className:"rounded-md"})},e.name):(0,r.jsx)(O.Form.Item,{label:(0,r.jsxs)("span",{children:[e.label," ",(0,r.jsx)(I.Tooltip,{title:e.tooltip,children:(0,r.jsx)(F.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),required:e.required,children:(0,r.jsx)(D.Input,{type:"password"===e.type?"password":"text",value:f[e.name]||"",onChange:t=>b(r=>({...r,[e.name]:t.target.value})),placeholder:e.placeholder,size:"large",className:"rounded-md"})},e.name))]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(Q.Button,{type:"primary",size:"large",onClick:_,loading:n,disabled:0===a.length||!d,children:n?"Creating Vector Store...":"Create Vector Store"})})]})}),g.length>0&&(0,r.jsx)(P.Alert,{message:"Vector Store Created Successfully",description:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Vector Store ID:"})," ",g[0]?.vector_store_id]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Documents Ingested:"})," ",g.length]})]}),type:"success",showIcon:!0,closable:!0})]})},{Text:ek,Title:eA}=ee.Typography,eL=({accessToken:e,vectorStores:t})=>{let[l,a]=(0,s.useState)(t.length>0?t[0].vector_store_id:void 0);return e?0===t.length?(0,r.jsx)(Z.Card,{children:(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)(ek,{type:"secondary",children:"No vector stores available. Create one first to test it."})})}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(Z.Card,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(eA,{level:5,children:"Select Vector Store"}),(0,r.jsx)(ek,{type:"secondary",children:"Choose a vector store to test search queries against"})]}),(0,r.jsx)(E.Select,{value:l,onChange:a,placeholder:"Select a vector store",size:"large",style:{width:"100%"},showSearch:!0,optionFilterProp:"children",children:t.map(e=>(0,r.jsx)(E.Select.Option,{value:e.vector_store_id,children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium",children:e.vector_store_name||e.vector_store_id}),e.vector_store_name&&(0,r.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:e.vector_store_id})]})},e.vector_store_id))})]})}),l&&(0,r.jsx)(ep,{vectorStoreId:l,accessToken:e})]}):(0,r.jsx)(Z.Card,{children:(0,r.jsx)(ek,{type:"secondary",children:"Access token is required to test vector stores."})})};var eV=e.i(708347);e.s(["default",0,({accessToken:e,userID:t,userRole:v})=>{let[g,j]=(0,s.useState)([]),[f,b]=(0,s.useState)(!1),[y,_]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),[S,C]=(0,s.useState)(""),[I,T]=(0,s.useState)([]),[k,L]=(0,s.useState)(null),[V,O]=(0,s.useState)(!1),[E,D]=(0,s.useState)(!1),P=async()=>{if(e)try{let t=await (0,p.vectorStoreListCall)(e);console.log("List vector stores response:",t),j(t.data||[])}catch(e){console.error("Error fetching vector stores:",e),K.default.fromBackend("Error fetching vector stores: "+e)}},F=async()=>{if(e)try{let t=await (0,p.credentialListCall)(e);console.log("List credentials response:",t),T(t.credentials||[])}catch(e){console.error("Error fetching credentials:",e),K.default.fromBackend("Error fetching credentials: "+e)}},B=async e=>{N(e),_(!0)},z=async()=>{if(e&&w){D(!0);try{await (0,p.vectorStoreDeleteCall)(e,w),K.default.success("Vector store deleted successfully"),P()}catch(e){console.error("Error deleting vector store:",e),K.default.fromBackend("Error deleting vector store: "+e)}finally{D(!1),_(!1),N(null)}}};return(0,s.useEffect)(()=>{P(),F()},[e]),k?(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(ev,{vectorStoreId:k,onClose:()=>{L(null),O(!1),P()},accessToken:e,is_admin:(0,eV.isAdminRole)(v||""),editVectorStore:V})}):(0,r.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,r.jsxs)("div",{className:"gap-2 p-8 h-[75vh] w-full mt-2",children:[(0,r.jsxs)("div",{className:"flex justify-between mt-2 w-full items-center mb-4",children:[(0,r.jsx)("h1",{children:"Vector Store Management"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[S&&(0,r.jsxs)(i.Text,{children:["Last Refreshed: ",S]}),(0,r.jsx)(l.Icon,{icon:h.RefreshIcon,variant:"shadow",size:"xs",className:"self-center cursor-pointer",onClick:()=>{P(),F(),C(new Date().toLocaleString())}})]})]}),(0,r.jsx)(i.Text,{className:"mb-4",children:(0,r.jsx)("p",{children:"You can use vector stores to store and retrieve LLM embeddings."})}),(0,r.jsxs)(c.TabGroup,{children:[(0,r.jsxs)(d.TabList,{className:"mb-6",children:[(0,r.jsx)(m.Tab,{children:"Create Vector Store"}),(0,r.jsx)(m.Tab,{children:"Manage Vector Stores"}),(0,r.jsx)(m.Tab,{children:"Test Vector Store"})]}),(0,r.jsxs)(x.TabPanels,{children:[(0,r.jsx)(u.TabPanel,{children:(0,r.jsx)(eT,{accessToken:e,onSuccess:e=>{console.log("Vector store created:",e),P()}})}),(0,r.jsxs)(u.TabPanel,{children:[(0,r.jsx)(a.Button,{className:"mb-4",onClick:()=>b(!0),children:"+ Add Vector Store"}),(0,r.jsx)(n.Grid,{numItems:1,className:"gap-2 pt-2 pb-2 w-full mt-2",children:(0,r.jsx)(o.Col,{numColSpan:1,children:(0,r.jsx)(A,{data:g,onView:e=>{L(e),O(!1)},onEdit:e=>{L(e),O(!0)},onDelete:B})})})]}),(0,r.jsx)(u.TabPanel,{children:(0,r.jsx)(eL,{accessToken:e,vectorStores:g})})]})]}),(0,r.jsx)(G,{isVisible:f,onCancel:()=>b(!1),onSuccess:()=>{b(!1),P()},accessToken:e,credentials:I}),(0,r.jsx)(H.default,{isOpen:y,title:"Delete Vector Store",message:"Are you sure you want to delete this vector store? This action cannot be undone.",resourceInformationTitle:"Vector Store Information",resourceInformation:[{label:"Vector Store ID",value:w,code:!0}],onCancel:()=>_(!1),onOk:z,confirmLoading:E})]})})}],241902)}]);