(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,883552,e=>{"use strict";e.i(247167);var t=e.i(271645),a=e.i(562901),s=e.i(343794),l=e.i(914949),r=e.i(529681),i=e.i(242064),n=e.i(829672),o=e.i(285781),c=e.i(836938),d=e.i(920228),u=e.i(62405),m=e.i(408850),h=e.i(87414),g=e.i(310730);let p=(0,e.i(246422).genStyleHooks)("Popconfirm",e=>(e=>{let{componentCls:t,iconCls:a,antCls:s,zIndexPopup:l,colorText:r,colorWarning:i,marginXXS:n,marginXS:o,fontSize:c,fontWeightStrong:d,colorTextHeading:u}=e;return{[t]:{zIndex:l,[`&${s}-popover`]:{fontSize:c},[`${t}-message`]:{marginBottom:o,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${a}`]:{color:i,fontSize:c,lineHeight:1,marginInlineEnd:o},[`${t}-title`]:{fontWeight:d,color:u,"&:only-child":{fontWeight:"normal"}},[`${t}-description`]:{marginTop:n,color:r}},[`${t}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:o}}}}})(e),e=>{let{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}},{resetStyle:!1});var f=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)0>t.indexOf(s[l])&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(a[s[l]]=e[s[l]]);return a};let x=e=>{let{prefixCls:s,okButtonProps:l,cancelButtonProps:r,title:n,description:g,cancelText:p,okText:f,okType:x="primary",icon:y=t.createElement(a.default,null),showCancel:b=!0,close:j,onConfirm:C,onCancel:v,onPopupClick:k}=e,{getPrefixCls:w}=t.useContext(i.ConfigContext),[T]=(0,m.useLocale)("Popconfirm",h.default.Popconfirm),_=(0,c.getRenderPropValue)(n),N=(0,c.getRenderPropValue)(g);return t.createElement("div",{className:`${s}-inner-content`,onClick:k},t.createElement("div",{className:`${s}-message`},y&&t.createElement("span",{className:`${s}-message-icon`},y),t.createElement("div",{className:`${s}-message-text`},_&&t.createElement("div",{className:`${s}-title`},_),N&&t.createElement("div",{className:`${s}-description`},N))),t.createElement("div",{className:`${s}-buttons`},b&&t.createElement(d.default,Object.assign({onClick:v,size:"small"},r),p||(null==T?void 0:T.cancelText)),t.createElement(o.default,{buttonProps:Object.assign(Object.assign({size:"small"},(0,u.convertLegacyProps)(x)),l),actionFn:C,close:j,prefixCls:w("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},f||(null==T?void 0:T.okText))))};var y=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)0>t.indexOf(s[l])&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(a[s[l]]=e[s[l]]);return a};let b=t.forwardRef((e,o)=>{var c,d;let{prefixCls:u,placement:m="top",trigger:h="click",okType:g="primary",icon:f=t.createElement(a.default,null),children:b,overlayClassName:j,onOpenChange:C,onVisibleChange:v,overlayStyle:k,styles:w,classNames:T}=e,_=y(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange","overlayStyle","styles","classNames"]),{getPrefixCls:N,className:S,style:E,classNames:O,styles:F}=(0,i.useComponentConfig)("popconfirm"),[P,I]=(0,l.default)(!1,{value:null!=(c=e.open)?c:e.visible,defaultValue:null!=(d=e.defaultOpen)?d:e.defaultVisible}),A=(e,t)=>{I(e,!0),null==v||v(e),null==C||C(e,t)},M=N("popconfirm",u),L=(0,s.default)(M,S,j,O.root,null==T?void 0:T.root),B=(0,s.default)(O.body,null==T?void 0:T.body),[R]=p(M);return R(t.createElement(n.default,Object.assign({},(0,r.default)(_,["title"]),{trigger:h,placement:m,onOpenChange:(t,a)=>{let{disabled:s=!1}=e;s||A(t,a)},open:P,ref:o,classNames:{root:L,body:B},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},F.root),E),k),null==w?void 0:w.root),body:Object.assign(Object.assign({},F.body),null==w?void 0:w.body)},content:t.createElement(x,Object.assign({okType:g,icon:f},e,{prefixCls:M,close:e=>{A(!1,e)},onConfirm:t=>{var a;return null==(a=e.onConfirm)?void 0:a.call(void 0,t)},onCancel:t=>{var a;A(!1,t),null==(a=e.onCancel)||a.call(void 0,t)}})),"data-popover-inject":!0}),b))});b._InternalPanelDoNotUseOrYouWillBeFired=e=>{let{prefixCls:a,placement:l,className:r,style:n}=e,o=f(e,["prefixCls","placement","className","style"]),{getPrefixCls:c}=t.useContext(i.ConfigContext),d=c("popconfirm",a),[u]=p(d);return u(t.createElement(g.default,{placement:l,className:(0,s.default)(d,r),style:n,content:t.createElement(x,Object.assign({prefixCls:d},o))}))},e.s(["Popconfirm",0,b],883552)},954616,e=>{"use strict";var t=e.i(271645),a=e.i(114272),s=e.i(540143),l=e.i(915823),r=e.i(619273),i=class extends l.Subscribable{#e;#t=void 0;#a;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,r.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,r.hashKey)(t.mutationKey)!==(0,r.hashKey)(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(e){this.#l(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#l(),this.#r()}mutate(e,t){return this.#s=t,this.#a?.removeObserver(this),this.#a=this.#e.getMutationCache().build(this.#e,this.options),this.#a.addObserver(this),this.#a.execute(e)}#l(){let e=this.#a?.state??(0,a.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){s.notifyManager.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,a=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#s.onSuccess?.(e.data,t,a,s)}catch(e){Promise.reject(e)}try{this.#s.onSettled?.(e.data,null,t,a,s)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#s.onError?.(e.error,t,a,s)}catch(e){Promise.reject(e)}try{this.#s.onSettled?.(void 0,e.error,t,a,s)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},n=e.i(912598);function o(e,a){let l=(0,n.useQueryClient)(a),[o]=t.useState(()=>new i(l,e));t.useEffect(()=>{o.setOptions(e)},[o,e]);let c=t.useSyncExternalStore(t.useCallback(e=>o.subscribe(s.notifyManager.batchCalls(e)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),d=t.useCallback((e,t)=>{o.mutate(e,t).catch(r.noop)},[o]);if(c.error&&(0,r.shouldThrowError)(o.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}e.s(["useMutation",()=>o],954616)},688511,823429,727612,e=>{"use strict";var t=e.i(475254);let a=(0,t.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["default",()=>a],823429),e.s(["Edit",()=>a],688511);let s=(0,t.default)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],727612)},700904,e=>{"use strict";var t=e.i(843476),a=e.i(994388),s=e.i(304967),l=e.i(350967),r=e.i(35983),i=e.i(793130),n=e.i(197647),o=e.i(653824),c=e.i(269200),d=e.i(942232),u=e.i(977572),m=e.i(427612),h=e.i(64848),g=e.i(496020),p=e.i(881073),f=e.i(404206),x=e.i(723731),y=e.i(599724),b=e.i(779241),j=e.i(271645),C=e.i(464571),v=e.i(808613),k=e.i(311451),w=e.i(212931),T=e.i(199133),_=e.i(898586),N=e.i(727749),S=e.i(764205),E=e.i(312361),O=e.i(482725),F=e.i(536916);let{Title:P}=_.Typography,I=({accessToken:e})=>{let[l,r]=(0,j.useState)(!0),[i,n]=(0,j.useState)([]);(0,j.useEffect)(()=>{o()},[e]);let o=async()=>{if(e){r(!0);try{let t=await (0,S.getEmailEventSettings)(e);n(t.settings)}catch(e){console.error("Failed to fetch email event settings:",e),N.default.fromBackend(e)}finally{r(!1)}}},c=async()=>{if(e)try{await (0,S.updateEmailEventSettings)(e,{settings:i}),N.default.success("Email event settings updated successfully")}catch(e){console.error("Failed to update email event settings:",e),N.default.fromBackend(e)}},d=async()=>{if(e)try{await (0,S.resetEmailEventSettings)(e),N.default.success("Email event settings reset to defaults"),o()}catch(e){console.error("Failed to reset email event settings:",e),N.default.fromBackend(e)}};return(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(P,{level:4,children:"Email Notifications"}),(0,t.jsx)(y.Text,{children:"Select which events should trigger email notifications."}),(0,t.jsx)(E.Divider,{}),l?(0,t.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:(0,t.jsx)(O.Spin,{size:"large"})}):(0,t.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(F.Checkbox,{checked:e.enabled,onChange:t=>{var a,s;return a=e.event,s=t.target.checked,void n(i.map(e=>e.event===a?{...e,enabled:s}:e))}}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)(y.Text,{children:e.event}),(0,t.jsx)("div",{className:"text-sm text-gray-500 block",children:(e=>{if(e.includes("Virtual Key Created"))return"An email will be sent to the user when a new virtual key is created with their user ID";{if(e.includes("New User Invitation"))return"An email will be sent to the email address of the user when a new user is created";let t=e.split(/(?=[A-Z])/).join(" ").toLowerCase();return`Receive an email notification when ${t}`}})(e.event)})]})]},e.event))}),(0,t.jsxs)("div",{className:"mt-6 flex space-x-4",children:[(0,t.jsx)(a.Button,{onClick:c,disabled:l,children:"Save Changes"}),(0,t.jsx)(a.Button,{onClick:d,variant:"secondary",disabled:l,children:"Reset to Defaults"})]})]})},{Title:A}=_.Typography,M=({accessToken:e,premiumUser:r,alerts:i})=>{let n=async()=>{if(!e)return;let t={};i.filter(e=>"email"===e.name).forEach(e=>{Object.entries(e.variables??{}).forEach(([e,a])=>{let s=document.querySelector(`input[name="${e}"]`);s&&s.value&&(t[e]=s?.value)})}),console.log("updatedVariables",t);try{await (0,S.setCallbacksCall)(e,{general_settings:{alerting:["email"]},environment_variables:t}),N.default.success("Email settings updated successfully")}catch(e){N.default.fromBackend(e)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mt-6 mb-6",children:(0,t.jsx)(I,{accessToken:e})}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(A,{level:4,children:"Email Server Settings"}),(0,t.jsxs)(y.Text,{children:[(0,t.jsxs)("a",{href:"https://docs.litellm.ai/docs/proxy/email",target:"_blank",style:{color:"blue"},children:[" ","LiteLLM Docs: email alerts"]})," ",(0,t.jsx)("br",{})]}),(0,t.jsx)("div",{className:"flex w-full",children:i.filter(e=>"email"===e.name).map((e,a)=>(0,t.jsx)(u.TableCell,{children:(0,t.jsx)("ul",{children:(0,t.jsx)(l.Grid,{numItems:2,children:Object.entries(e.variables??{}).map(([e,a])=>(0,t.jsxs)("li",{className:"mx-2 my-2",children:[!0!=r&&("EMAIL_LOGO_URL"===e||"EMAIL_SUPPORT_CONTACT"===e)?(0,t.jsxs)("div",{children:[(0,t.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:(0,t.jsxs)(y.Text,{className:"mt-2",children:[" ✨ ",e]})}),(0,t.jsx)(b.TextInput,{name:e,defaultValue:a,type:"password",disabled:!0,style:{width:"400px"}})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Text,{className:"mt-2",children:e}),(0,t.jsx)(b.TextInput,{name:e,defaultValue:a,type:"password",style:{width:"400px"}})]}),(0,t.jsxs)("p",{style:{fontSize:"small",fontStyle:"italic"},children:["SMTP_HOST"===e&&(0,t.jsxs)("div",{style:{color:"gray"},children:["Enter the SMTP host address, e.g. `smtp.resend.com`",(0,t.jsx)("span",{style:{color:"red"},children:" Required * "})]}),"SMTP_PORT"===e&&(0,t.jsxs)("div",{style:{color:"gray"},children:["Enter the SMTP port number, e.g. `587`",(0,t.jsx)("span",{style:{color:"red"},children:" Required * "})]}),"SMTP_USERNAME"===e&&(0,t.jsxs)("div",{style:{color:"gray"},children:["Enter the SMTP username, e.g. `username`",(0,t.jsx)("span",{style:{color:"red"},children:" Required * "})]}),"SMTP_PASSWORD"===e&&(0,t.jsx)("span",{style:{color:"red"},children:" Required * "}),"SMTP_SENDER_EMAIL"===e&&(0,t.jsxs)("div",{style:{color:"gray"},children:["Enter the sender email address, e.g. `sender@berri.ai`",(0,t.jsx)("span",{style:{color:"red"},children:" Required * "})]}),"TEST_EMAIL_ADDRESS"===e&&(0,t.jsxs)("div",{style:{color:"gray"},children:["Email Address to send `Test Email Alert` to. example: `info@berri.ai`",(0,t.jsx)("span",{style:{color:"red"},children:" Required * "})]}),"EMAIL_LOGO_URL"===e&&(0,t.jsx)("div",{style:{color:"gray"},children:"(Optional) Customize the Logo that appears in the email, pass a url to your logo"}),"EMAIL_SUPPORT_CONTACT"===e&&(0,t.jsx)("div",{style:{color:"gray"},children:"(Optional) Customize the support email address that appears in the email. Default is support@berri.ai"})]})]},e))})})},a))}),(0,t.jsx)(a.Button,{className:"mt-2",onClick:()=>n(),children:"Save Changes"}),(0,t.jsx)(a.Button,{onClick:async()=>{if(e)try{await (0,S.serviceHealthCheck)(e,"email"),N.default.success("Email test triggered. Check your configured email inbox/logs.")}catch(e){N.default.fromBackend(e)}},className:"mx-2",children:"Test Email Alerts"})]})]})};var L=e.i(905536),B=e.i(28651),R=e.i(68155),z=e.i(220508),D=e.i(389083),U=e.i(752978);let $=({alertingSettings:e,handleInputChange:s,handleResetField:l,handleSubmit:r,premiumUser:n})=>{let[o]=v.Form.useForm();return(0,t.jsxs)(v.Form,{form:o,onFinish:()=>{console.log("INSIDE ONFINISH");let e=o.getFieldsValue(),t=Object.entries(e).every(([e,t])=>"boolean"!=typeof t&&(""===t||null==t));console.log(`formData: ${JSON.stringify(e)}, isEmpty: ${t}`),t?console.log("Some form fields are empty."):r(e)},labelAlign:"left",children:[e.map((e,r)=>(0,t.jsxs)(g.TableRow,{children:[(0,t.jsxs)(u.TableCell,{align:"center",children:[(0,t.jsx)(y.Text,{children:e.field_name}),(0,t.jsx)("p",{style:{fontSize:"0.65rem",color:"#808080",fontStyle:"italic"},className:"mt-1",children:e.field_description})]}),e.premium_field?n?(0,t.jsx)(v.Form.Item,{name:e.field_name,children:(0,t.jsx)(u.TableCell,{children:"Integer"===e.field_type?(0,t.jsx)(B.InputNumber,{step:1,value:e.field_value,onChange:t=>s(e.field_name,t)}):"Boolean"===e.field_type?(0,t.jsx)(i.Switch,{checked:e.field_value,onChange:t=>s(e.field_name,t)}):(0,t.jsx)(k.Input,{value:e.field_value,onChange:t=>s(e.field_name,t)})})}):(0,t.jsx)(u.TableCell,{children:(0,t.jsx)(a.Button,{className:"flex items-center justify-center",children:(0,t.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"✨ Enterprise Feature"})})}):(0,t.jsx)(v.Form.Item,{name:e.field_name,className:"mb-0",valuePropName:"Boolean"===e.field_type?"checked":"value",children:(0,t.jsx)(u.TableCell,{children:"Integer"===e.field_type?(0,t.jsx)(B.InputNumber,{step:1,value:e.field_value,onChange:t=>s(e.field_name,t),className:"p-0"}):"Boolean"===e.field_type?(0,t.jsx)(i.Switch,{checked:e.field_value,onChange:t=>{s(e.field_name,t),o.setFieldsValue({[e.field_name]:t})}}):(0,t.jsx)(k.Input,{value:e.field_value,onChange:t=>s(e.field_name,t)})})}),(0,t.jsx)(u.TableCell,{children:!0==e.stored_in_db?(0,t.jsx)(D.Badge,{icon:z.CheckCircleIcon,className:"text-white",children:"In DB"}):!1==e.stored_in_db?(0,t.jsx)(D.Badge,{className:"text-gray bg-white outline",children:"In Config"}):(0,t.jsx)(D.Badge,{className:"text-gray bg-white outline",children:"Not Set"})}),(0,t.jsx)(u.TableCell,{children:(0,t.jsx)(U.Icon,{icon:R.TrashIcon,color:"red",onClick:()=>l(e.field_name,r),children:"Reset"})})]},r)),(0,t.jsx)("div",{children:(0,t.jsx)(C.Button,{htmlType:"submit",children:"Update Settings"})})]})},Z=({accessToken:e,premiumUser:a})=>{let[s,l]=(0,j.useState)([]);return(0,j.useEffect)(()=>{e&&(0,S.alertingSettingsCall)(e).then(e=>{l(e)})},[e]),(0,t.jsx)($,{alertingSettings:s,handleInputChange:(e,t)=>{let a=s.map(a=>a.field_name===e?{...a,field_value:t}:a);console.log(`updatedSettings: ${JSON.stringify(a)}`),l(a)},handleResetField:(t,a)=>{if(e)try{let e=s.map(e=>e.field_name===t?{...e,stored_in_db:null,field_value:e.field_default_value}:e);l(e)}catch(e){console.log("ERROR OCCURRED!")}},handleSubmit:t=>{if(!e)return;if(console.log(`formValues: ${t}`),null==t||void 0==t)return;let a={};s.forEach(e=>{a[e.field_name]=e.field_value});let l={...t,...a};console.log(`mergedFormValues: ${JSON.stringify(l)}`);let{slack_alerting:r,...i}=l;console.log(`slack_alerting: ${r}, alertingArgs: ${JSON.stringify(i)}`);try{(0,S.updateConfigFieldSetting)(e,"alerting_args",i),"boolean"==typeof r&&(!0==r?(0,S.updateConfigFieldSetting)(e,"alerting",["slack"]):(0,S.updateConfigFieldSetting)(e,"alerting",[])),N.default.success("Wait 10s for proxy to update.")}catch(e){}},premiumUser:a})};var q=e.i(954616),H=e.i(266027),K=e.i(912598),V=e.i(243652);let W=(0,V.createQueryKeys)("cloudZeroSettings"),G=async e=>{let t=(0,S.getProxyBaseUrl)(),a=t?`${t}/cloudzero/settings`:"/cloudzero/settings",s=await fetch(a,{method:"GET",headers:{[(0,S.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok){let e="Failed to fetch CloudZero settings";try{let t=await s.json();"object"==typeof t&&null!==t?e=t?.error?.message||t?.error||t?.message||t?.detail||("string"==typeof t?.error?t.error:e):"string"==typeof t&&(e=t)}catch{e=s.statusText||e}throw Error(e)}let l=await s.json();return l&&(l.api_key_masked||l.connection_id)?l:null},J=async(e,t)=>{let a=(0,S.getProxyBaseUrl)(),s=a?`${a}/cloudzero/settings`:"/cloudzero/settings",l=await fetch(s,{method:"PUT",headers:{[(0,S.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({...t.connection_id&&{connection_id:t.connection_id},...t.timezone&&{timezone:t.timezone},...t.api_key&&{api_key:t.api_key}})});if(!l.ok){let e="Failed to update CloudZero settings";try{let t=await l.json();"object"==typeof t&&null!==t?e=t?.error?.message||t?.error||t?.message||t?.detail||("string"==typeof t?.error?t.error:e):"string"==typeof t&&(e=t)}catch{e=l.statusText||e}throw Error(e)}return await l.json()},Q=async e=>{let t=(0,S.getProxyBaseUrl)(),a=t?`${t}/cloudzero/delete`:"/cloudzero/delete",s=await fetch(a,{method:"DELETE",headers:{[(0,S.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok){let e="Failed to delete CloudZero settings";try{let t=await s.json();"object"==typeof t&&null!==t?e=t?.error?.message||t?.error||t?.message||t?.detail||("string"==typeof t?.error?t.error:e):"string"==typeof t&&(e=t)}catch{e=s.statusText||e}throw Error(e)}return await s.json()};var Y=e.i(135214),X=e.i(175712),ee=e.i(21548);let{Title:et,Paragraph:ea}=_.Typography;function es({startCreation:e}){return(0,t.jsx)("div",{className:"bg-white p-12 rounded-lg border border-dashed border-gray-300 text-center max-w-2xl mx-auto mt-8",children:(0,t.jsx)(ee.Empty,{image:ee.Empty.PRESENTED_IMAGE_SIMPLE,description:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(et,{level:4,children:"No CloudZero Integration Found"}),(0,t.jsx)(ea,{type:"secondary",className:"max-w-md mx-auto",children:"Connect your CloudZero account to start tracking and analyzing your cloud costs directly from LiteLLM."})]}),children:(0,t.jsx)(C.Button,{type:"primary",size:"large",onClick:e,className:"flex items-center gap-2 mx-auto mt-4",children:"Add CloudZero Integration"})})})}var el=e.i(998573);let er=async(e,t)=>{let a=(0,S.getProxyBaseUrl)(),s=a?`${a}/cloudzero/init`:"/cloudzero/init",l=await fetch(s,{method:"POST",headers:{[(0,S.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({connection_id:t.connection_id,timezone:t.timezone??"UTC",...t.api_key&&{api_key:t.api_key}})});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e?.error?.message||e?.message||e?.detail||"Failed to create CloudZero integration")}return await l.json()};function ei({open:e,onOk:a,onCancel:s}){let l,{accessToken:r}=(0,Y.default)(),[i]=v.Form.useForm(),n=(l=r||"",(0,q.useMutation)({mutationFn:async e=>{if(!l)throw Error("Access token is required");return await er(l,e)}}));(0,j.useEffect)(()=>{e&&i.resetFields()},[e,i]);let o=async()=>{try{let e=await i.validateFields();n.mutate({connection_id:e.connection_id,timezone:e.timezone||"UTC",...e.api_key&&{api_key:e.api_key}},{onSuccess:()=>{el.message.success("CloudZero integration created successfully"),i.resetFields(),a()},onError:e=>{e?.errorFields||el.message.error(e?.message||"Failed to create CloudZero integration")}})}catch(e){if(e?.errorFields)return;el.message.error(e?.message||"Failed to create CloudZero integration")}};return(0,t.jsx)(w.Modal,{title:"Create CloudZero Integration",open:e,onOk:o,onCancel:()=>{i.resetFields(),s()},confirmLoading:n.isPending,okText:n.isPending?"Creating...":"Create",cancelText:"Cancel",okButtonProps:{disabled:n.isPending},cancelButtonProps:{disabled:n.isPending},children:(0,t.jsxs)(v.Form,{form:i,layout:"vertical",onFinish:o,children:[(0,t.jsx)(v.Form.Item,{label:"CloudZero API Key",name:"api_key",rules:[{required:!0,message:"Please enter your CloudZero API key"}],children:(0,t.jsx)(k.Input.Password,{placeholder:"Enter your CloudZero API key"})}),(0,t.jsx)(v.Form.Item,{label:"Connection ID",name:"connection_id",rules:[{required:!0,message:"Please enter your CloudZero connection ID"}],children:(0,t.jsx)(k.Input,{placeholder:"Enter your CloudZero connection ID"})}),(0,t.jsx)(v.Form.Item,{label:"Timezone",name:"timezone",tooltip:"Timezone for date handling (defaults to UTC if not provided)",children:(0,t.jsx)(k.Input,{placeholder:"UTC"})})]})})}let en=async(e,t={})=>{let a=(0,S.getProxyBaseUrl)(),s=a?`${a}/cloudzero/dry-run`:"/cloudzero/dry-run",l=await fetch(s,{method:"POST",headers:{[(0,S.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({limit:t.limit??10})});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e?.error?.message||e?.message||e?.detail||"Failed to perform dry run")}return await l.json()},eo=async(e,t={})=>{let a=(0,S.getProxyBaseUrl)(),s=a?`${a}/cloudzero/export`:"/cloudzero/export",l=await fetch(s,{method:"POST",headers:{[(0,S.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({operation:t.operation??"replace_hourly"})});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e?.error?.message||e?.message||e?.detail||"Failed to export data")}return await l.json()};var ec=e.i(127952),ed=e.i(560445),eu=e.i(869216),em=e.i(883552),eh=e.i(262218),eg=e.i(475254);let ep=(0,eg.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var ef=e.i(688511);let ex=(0,eg.default)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var ey=e.i(727612);let eb=(0,eg.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);function ej({open:e,onOk:a,onCancel:s,settings:l}){var r;let i,{accessToken:n}=(0,Y.default)(),[o]=v.Form.useForm(),c=(r=n||"",i=(0,K.useQueryClient)(),(0,q.useMutation)({mutationFn:async e=>{if(!r)throw Error("Access token is required");return await J(r,e)},onSuccess:()=>{i.invalidateQueries({queryKey:W.list({})})}}));(0,j.useEffect)(()=>{e&&l?o.setFieldsValue({connection_id:l.connection_id,timezone:l.timezone||"UTC",api_key:""}):e&&o.resetFields()},[e,l,o]);let d=async()=>{try{let e=await o.validateFields();c.mutate({connection_id:e.connection_id,timezone:e.timezone||"UTC",...e.api_key&&{api_key:e.api_key}},{onSuccess:()=>{el.message.success("CloudZero integration updated successfully"),o.resetFields(),a()},onError:e=>{e?.errorFields||el.message.error(e?.message||"Failed to update CloudZero integration")}})}catch(e){if(e?.errorFields)return;el.message.error(e?.message||"Failed to update CloudZero integration")}};return(0,t.jsx)(w.Modal,{title:"Edit CloudZero Integration",open:e,onOk:d,onCancel:()=>{o.resetFields(),s()},confirmLoading:c.isPending,okText:c.isPending?"Updating...":"Update",cancelText:"Cancel",okButtonProps:{disabled:c.isPending},cancelButtonProps:{disabled:c.isPending},children:(0,t.jsxs)(v.Form,{form:o,layout:"vertical",onFinish:d,children:[(0,t.jsx)(v.Form.Item,{label:"CloudZero API Key",name:"api_key",rules:[{required:!1,message:"Please enter your CloudZero API key"}],tooltip:"Leave empty to keep the existing API key",children:(0,t.jsx)(k.Input.Password,{placeholder:"Leave empty to keep existing"})}),(0,t.jsx)(v.Form.Item,{label:"Connection ID",name:"connection_id",rules:[{required:!0,message:"Please enter your CloudZero connection ID"}],children:(0,t.jsx)(k.Input,{placeholder:"Enter your CloudZero connection ID"})}),(0,t.jsx)(v.Form.Item,{label:"Timezone",name:"timezone",tooltip:"Timezone for date handling (defaults to UTC if not provided)",children:(0,t.jsx)(k.Input,{placeholder:"UTC"})})]})})}function eC({settings:e,onSettingsUpdated:a}){var s;let l,r,i,{accessToken:n}=(0,Y.default)(),[o,c]=(0,j.useState)(!1),[d,u]=(0,j.useState)(!1),m=(l=n||"",(0,q.useMutation)({mutationFn:async(e={})=>{if(!l)throw Error("Access token is required");return await en(l,e)}})),h=(r=n||"",(0,q.useMutation)({mutationFn:async(e={})=>{if(!r)throw Error("Access token is required");return await eo(r,e)}})),g=(s=n||"",i=(0,K.useQueryClient)(),(0,q.useMutation)({mutationFn:async()=>{if(!s)throw Error("Access token is required");return await Q(s)},onSuccess:()=>{i.invalidateQueries({queryKey:W.list({})})}})),p=m.data?JSON.stringify(m.data,null,2):null,f=async()=>{c(!1),a()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-6 w-full max-w-4xl mx-auto",children:(0,t.jsxs)(X.Card,{title:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-lg font-semibold",children:"CloudZero Configuration"}),(0,t.jsx)(eh.Tag,{color:"success",className:"ml-2 capitalize",children:e.status||"Active"})]}),extra:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(C.Button,{icon:(0,t.jsx)(ef.Edit,{size:16}),onClick:()=>{c(!0)},className:"flex items-center gap-2",children:"Edit"}),(0,t.jsx)(C.Button,{danger:!0,icon:(0,t.jsx)(ey.Trash2,{size:16}),onClick:()=>{u(!0)},className:"flex items-center gap-2",children:"Delete"})]}),className:"shadow-sm",children:[(0,t.jsxs)(eu.Descriptions,{bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},children:[(0,t.jsx)(eu.Descriptions.Item,{label:"API Key (Redacted)",children:(0,t.jsx)("span",{className:"font-mono text-gray-600",children:e.api_key_masked||(0,t.jsx)("span",{className:"text-gray-400 italic",children:"Not configured"})})}),(0,t.jsx)(eu.Descriptions.Item,{label:"Connection ID",children:(0,t.jsx)("span",{className:"font-mono text-gray-600",children:e.connection_id||(0,t.jsx)("span",{className:"text-gray-400 italic",children:"Not configured"})})}),(0,t.jsx)(eu.Descriptions.Item,{label:"Timezone",children:e.timezone||(0,t.jsx)("span",{className:"text-gray-400 italic",children:"Default (UTC)"})})]}),(0,t.jsx)(E.Divider,{orientation:"left",className:"text-gray-500",children:"Actions"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6",children:[(0,t.jsx)(C.Button,{onClick:()=>{n&&m.mutate({limit:10},{onSuccess:e=>{el.message.success("Dry run completed successfully")},onError:e=>{el.message.error(e?.message||"Failed to perform dry run")}})},loading:m.isPending,icon:(0,t.jsx)(ex,{size:16}),className:"flex items-center gap-2",children:"Run Dry Run Simulation"}),(0,t.jsx)(em.Popconfirm,{title:"Export Data to CloudZero",description:"This will push the current accumulated cost data to CloudZero. Continue?",onConfirm:()=>{n&&h.mutate({operation:"replace_hourly"},{onSuccess:()=>{el.message.success("Data successfully exported to CloudZero")},onError:e=>{el.message.error(e?.message||"Failed to export data")}})},okText:"Export",cancelText:"Cancel",children:(0,t.jsx)(C.Button,{type:"primary",loading:h.isPending,icon:(0,t.jsx)(eb,{size:16}),className:"flex items-center gap-2",children:"Export Data Now"})})]}),p&&(0,t.jsx)("div",{className:"mt-6 animate-in fade-in slide-in-from-top-4 duration-300",children:(0,t.jsx)(ed.Alert,{message:"Dry Run Results",description:(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsxs)("p",{className:"mb-2 text-gray-600",children:["Simulation output for connection: ",e.connection_id]}),(0,t.jsx)("pre",{className:"bg-gray-50 p-4 rounded-md border border-gray-200 overflow-x-auto text-xs font-mono text-gray-800",children:p})]}),type:"info",showIcon:!0,icon:(0,t.jsx)(ep,{className:"text-blue-500"})})})]})}),(0,t.jsx)(ej,{open:o,onOk:f,onCancel:()=>{c(!1)},settings:e}),(0,t.jsx)(ec.default,{isOpen:d,title:"Delete CloudZero Integration?",message:"Are you sure you want to delete this CloudZero integration? All associated settings and configurations will be permanently removed.",resourceInformationTitle:"Integration Details",resourceInformation:[{label:"Connection ID",value:e.connection_id,code:!0},{label:"Timezone",value:e.timezone||"Default (UTC)"}],onCancel:()=>{u(!1)},onOk:()=>{n&&g.mutate(void 0,{onSuccess:()=>{el.message.success("CloudZero integration deleted successfully"),u(!1),a()},onError:e=>{el.message.error(e?.message||"Failed to delete CloudZero integration")}})},confirmLoading:g.isPending})]})}function ev(){let{accessToken:e}=(0,Y.default)(),{data:a,isLoading:s,error:l}=(0,H.useQuery)({queryKey:W.list({}),queryFn:async()=>await G(e),enabled:!!e,staleTime:36e5,gcTime:36e5}),r=(0,K.useQueryClient)(),i=(0,V.createQueryKeys)("cloudZeroSettings"),[n,o]=(0,j.useState)(!1),c=async()=>{o(!1),await r.invalidateQueries({queryKey:i.list({})})};return s?(0,t.jsx)(X.Card,{children:(0,t.jsx)(_.Typography.Text,{children:"Loading CloudZero settings..."})}):l?(0,t.jsx)(X.Card,{children:(0,t.jsxs)(_.Typography.Text,{className:"text-red-600",children:["Error loading CloudZero settings: ",l instanceof Error?l.message:String(l)]})}):a?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(eC,{settings:a,onSettingsUpdated:c})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(es,{startCreation:()=>o(!0)}),(0,t.jsx)(ei,{open:n,onOk:c,onCancel:()=>{o(!1)}})]})}var ek=e.i(291542),ew=e.i(335771),eT=e.i(902555);let e_=[{value:"success",label:"Success"},{value:"failure",label:"Failure"},{value:"success_and_failure",label:"Success & Failure"}],eN=({callbacks:e,availableCallbacks:s={},onTest:l=()=>{},onEdit:r=()=>{},onDelete:i=()=>{},onAdd:n=()=>{}})=>{let o=[{title:(0,t.jsx)("span",{className:"font-medium text-gray-700",children:"Callback Name"}),dataIndex:"name",key:"name",render:(e,a)=>{let l=a.name;console.log("availableCallbacks",s);let r=s[l]?.ui_callback_name||l;return(0,t.jsx)("div",{className:"font-medium text-gray-800",children:r})}},{title:(0,t.jsx)("span",{className:"font-medium text-gray-700",children:"Mode"}),key:"mode",render:(e,a)=>{let s=a.mode||"success",l=e_.find(e=>e.value===s)?.label||s,r="success"===s?"bg-green-100 text-green-800":"failure"===s?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800";return(0,t.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r}`,children:l})},width:240},{title:(0,t.jsx)("span",{className:"font-medium text-gray-700 text-right w-full block",children:"Actions"}),key:"actions",align:"right",render:(e,a)=>(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(eT.default,{variant:"Test",tooltipText:"Test Callback",onClick:()=>l(a)}),(0,t.jsx)(eT.default,{variant:"Edit",tooltipText:"Edit Callback",onClick:()=>r(a)}),(0,t.jsx)(eT.default,{variant:"Delete",tooltipText:"Delete Callback",onClick:()=>i(a)})]}),width:240}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"w-full mt-4",children:[(0,t.jsx)(a.Button,{onClick:n,className:"mx-auto",children:"+ Add Callback"}),(0,t.jsx)("div",{className:"flex justify-between items-center my-2",children:(0,t.jsx)(ew.default,{level:4,children:"Active Logging Callbacks"})}),0===e.length?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-50 border border-gray-200 rounded-lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No callbacks configured"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Add your first callback to start logging data to external services."})]})}):(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:(0,t.jsx)(ek.Table,{columns:o,dataSource:e,rowKey:e=>e.name,pagination:!1,rowClassName:()=>"hover:bg-gray-50"})})]})})};var eS=e.i(190702);let{Title:eE,Paragraph:eO}=_.Typography,eF=({params:e,callbackConfigs:a,selectedCallback:s})=>e&&0!==e.length?(0,t.jsx)("div",{className:"space-y-4 mt-6 p-4 bg-gray-50 rounded-lg border",children:e.map(e=>{let l=a.find(e=>e.id===s),r=l?.dynamic_params?.[e]||{},i=r.type||"text",n=r.ui_name||e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),o=r.required||!1;return(0,t.jsx)(L.default,{label:(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[n," "]}),name:e,className:"mb-4",rules:o?[{required:!0,message:`Please enter the ${n.toLowerCase()}`}]:void 0,children:"password"===i?(0,t.jsx)(k.Input.Password,{size:"large",placeholder:`Enter your ${n.toLowerCase()}`,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}):"number"===i?(0,t.jsx)(k.Input,{type:"number",size:"large",placeholder:`Enter ${n.toLowerCase()}`,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",min:0,max:1,step:.1}):(0,t.jsx)(k.Input,{size:"large",placeholder:`Enter your ${n.toLowerCase()}`,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})},e)})}):null,eP=({callbackConfigs:e,selectedCallback:a,onCallbackChange:s,disabled:l=!1})=>(0,t.jsx)(L.default,{label:"Callback",name:"callback",rules:l?void 0:[{required:!0,message:"Please select a callback"}],children:(0,t.jsx)(T.Select,{placeholder:"Choose a logging callback...",size:"large",className:"w-full",showSearch:!0,disabled:l,value:a,filterOption:(e,t)=>(t?.value?.toString()??"").toLowerCase().includes(e.toLowerCase()),onChange:s,children:e.map(e=>{let a=e.logo,s=a&&(a.includes("/")||a.startsWith("data:")||a.startsWith("http"))?a:`../ui/assets/logos/${a}`;return(0,t.jsx)(r.SelectItem,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center space-x-3 py-1",children:[(0,t.jsx)("div",{className:"w-6 h-6 flex items-center justify-center",children:(0,t.jsx)("img",{src:s,alt:`${e.displayName} logo`,className:"w-6 h-6 rounded object-contain",onError:e=>{e.currentTarget.style.display="none"}})}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:e.displayName})]})},e.id)})})}),eI=(e,t,a)=>{if(!e)return a?Object.keys(a):[];let s=t.find(t=>t.id===e);return s?.dynamic_params?Object.keys(s.dynamic_params):a?Object.keys(a):[]};e.s(["default",0,({accessToken:e,userRole:r,userID:k,premiumUser:T})=>{let[_,E]=(0,j.useState)([]),[O,F]=(0,j.useState)([]),[P,I]=(0,j.useState)(!1),[A]=v.Form.useForm(),[L]=v.Form.useForm(),[B,R]=(0,j.useState)(null),[z,D]=(0,j.useState)(""),[U,$]=(0,j.useState)({}),[q,H]=(0,j.useState)([]),[K,V]=(0,j.useState)(!1),[W,G]=(0,j.useState)([]),[J,Q]=(0,j.useState)({}),[Y,X]=(0,j.useState)([]),[ee,et]=(0,j.useState)(!1),[ea,es]=(0,j.useState)(null),[el,er]=(0,j.useState)(!1),[ei,en]=(0,j.useState)(null),[eo,ed]=(0,j.useState)(!1),[eu,em]=(0,j.useState)(!1),[eh,eg]=(0,j.useState)(!1);(0,j.useEffect)(()=>{e&&(0,S.getCallbackConfigsCall)(e).then(e=>{G(e||[])}).catch(e=>{N.default.fromBackend("Failed to load callback configs: "+(0,eS.parseErrorMessage)(e))})},[e]),(0,j.useEffect)(()=>{if(ee&&ea){let e=Object.fromEntries(Object.entries(ea.variables||{}).map(([e,t])=>[e,t??""]));L.setFieldsValue({...e,callback:ea.name})}},[ee,ea,L]);let ep=e=>{q.includes(e)?H(q.filter(t=>t!==e)):H([...q,e])},ef={llm_exceptions:"LLM Exceptions",llm_too_slow:"LLM Responses Too Slow",llm_requests_hanging:"LLM Requests Hanging",budget_alerts:"Budget Alerts (API Keys, Users)",db_exceptions:"Database Exceptions (Read/Write)",daily_reports:"Weekly/Monthly Spend Reports",outage_alerts:"Outage Alerts",region_outage_alerts:"Region Outage Alerts"};(0,j.useEffect)(()=>{e&&r&&k&&(0,S.getCallbacksCall)(e,k,r).then(e=>{E(e.callbacks),Q(e.available_callbacks);let t=e.alerts;if(t&&t.length>0){let e=t[0],a=e.variables.SLACK_WEBHOOK_URL;H(e.active_alerts),D(a),$(e.alerts_to_webhook)}F(t)})},[e,r,k]);let ex=e=>q&&q.includes(e),ey=async(t,a,s)=>{if(e){s?ed(!0):em(!0);try{if(await (0,S.setCallbacksCall)(e,{environment_variables:t,litellm_settings:{success_callback:[a]}}),N.default.success(s?"Callback updated successfully":`Callback ${a} added successfully`),s?(et(!1),L.resetFields(),es(null)):(V(!1),A.resetFields(),R(null),X([])),k&&r){let t=await (0,S.getCallbacksCall)(e,k,r);E(t.callbacks)}}catch(e){N.default.fromBackend(e)}finally{s?ed(!1):em(!1)}}},eb=async e=>{ea&&await ey(e,ea.name,!0)},ej=async e=>{let t=e?.callback;t&&await ey(e,t,!1)},eC=async()=>{if(!e)return;let t={};Object.entries(ef).forEach(([e,a])=>{let s=document.querySelector(`input[name="${e}"]`),l=s?.value||"";t[e]=l});try{await (0,S.setCallbacksCall)(e,{general_settings:{alert_to_webhook_url:t,alert_types:q}})}catch(e){N.default.fromBackend(e)}N.default.success("Alerts updated successfully")},ek=async()=>{if(ei&&e)try{if(eg(!0),await (0,S.deleteCallback)(e,ei.name),N.default.success(`Callback ${ei.name} deleted successfully`),k&&r){let t=await (0,S.getCallbacksCall)(e,k,r);E(t.callbacks)}er(!1),en(null)}catch(e){console.error("Failed to delete callback:",e),N.default.fromBackend(e)}finally{eg(!1)}};return e?(0,t.jsxs)("div",{className:"w-full mx-4",children:[(0,t.jsx)(l.Grid,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,t.jsxs)(o.TabGroup,{children:[(0,t.jsxs)(p.TabList,{variant:"line",defaultValue:"1",children:[(0,t.jsx)(n.Tab,{value:"1",children:"Logging Callbacks"}),(0,t.jsx)(n.Tab,{value:"2",children:"CloudZero Cost Tracking"}),(0,t.jsx)(n.Tab,{value:"2",children:"Alerting Types"}),(0,t.jsx)(n.Tab,{value:"3",children:"Alerting Settings"}),(0,t.jsx)(n.Tab,{value:"4",children:"Email Alerts"})]}),(0,t.jsxs)(x.TabPanels,{children:[(0,t.jsx)(f.TabPanel,{children:(0,t.jsx)(eN,{callbacks:_,availableCallbacks:J,onAdd:()=>V(!0),onEdit:e=>{es(e),et(!0)},onDelete:e=>{en(e),er(!0)},onTest:async t=>{try{await (0,S.serviceHealthCheck)(e,t.name),N.default.success("Health check triggered")}catch(e){N.default.fromBackend((0,eS.parseErrorMessage)(e))}}})}),(0,t.jsx)(f.TabPanel,{children:(0,t.jsx)("div",{className:"p-8",children:(0,t.jsx)(ev,{})})}),(0,t.jsx)(f.TabPanel,{children:(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(y.Text,{className:"my-2",children:["Alerts are only supported for Slack Webhook URLs. Get your webhook urls from"," ",(0,t.jsx)("a",{href:"https://api.slack.com/messaging/webhooks",target:"_blank",style:{color:"blue"},children:"here"})]}),(0,t.jsxs)(c.Table,{children:[(0,t.jsx)(m.TableHead,{children:(0,t.jsxs)(g.TableRow,{children:[(0,t.jsx)(h.TableHeaderCell,{}),(0,t.jsx)(h.TableHeaderCell,{}),(0,t.jsx)(h.TableHeaderCell,{children:"Slack Webhook URL"})]})}),(0,t.jsx)(d.TableBody,{children:Object.entries(ef).map(([e,s],l)=>(0,t.jsxs)(g.TableRow,{children:[(0,t.jsx)(u.TableCell,{children:"region_outage_alerts"==e?T?(0,t.jsx)(i.Switch,{id:"switch",name:"switch",checked:ex(e),onChange:()=>ep(e)}):(0,t.jsx)(a.Button,{className:"flex items-center justify-center",children:(0,t.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"✨ Enterprise Feature"})}):(0,t.jsx)(i.Switch,{id:"switch",name:"switch",checked:ex(e),onChange:()=>ep(e)})}),(0,t.jsx)(u.TableCell,{children:(0,t.jsx)(y.Text,{children:s})}),(0,t.jsx)(u.TableCell,{children:(0,t.jsx)(b.TextInput,{name:e,type:"password",defaultValue:U&&U[e]?U[e]:z})})]},l))})]}),(0,t.jsx)(a.Button,{size:"xs",className:"mt-2",onClick:eC,children:"Save Changes"}),(0,t.jsx)(a.Button,{onClick:async()=>{try{await (0,S.serviceHealthCheck)(e,"slack"),N.default.success("Alert test triggered. Test request to slack made - check logs/alerts on slack to verify")}catch(e){N.default.fromBackend((0,eS.parseErrorMessage)(e))}},className:"mx-2",children:"Test Alerts"})]})}),(0,t.jsx)(f.TabPanel,{children:(0,t.jsx)(Z,{accessToken:e,premiumUser:T})}),(0,t.jsx)(f.TabPanel,{children:(0,t.jsx)(M,{accessToken:e,premiumUser:T,alerts:O})})]})]})}),(0,t.jsxs)(w.Modal,{title:"Add Logging Callback",open:K,width:800,onCancel:()=>{V(!1),R(null),X([])},footer:null,children:[(0,t.jsxs)("a",{href:"https://docs.litellm.ai/docs/proxy/logging",className:"mb-8 mt-4",target:"_blank",style:{color:"blue"},children:[" ","LiteLLM Docs: Logging"]}),(0,t.jsxs)(v.Form,{form:A,onFinish:ej,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsx)(eP,{callbackConfigs:W,selectedCallback:B,onCallbackChange:e=>{R(e),X(eI(e,W))}}),(0,t.jsx)(eF,{params:Y,callbackConfigs:W,selectedCallback:B}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[(0,t.jsx)(C.Button,{onClick:()=>{V(!1),R(null),X([]),A.resetFields()},disabled:eu,children:"Cancel"}),(0,t.jsx)(C.Button,{htmlType:"submit",loading:eu,disabled:eu,children:eu?"Adding...":"Add Callback"})]})]})]}),(0,t.jsx)(w.Modal,{open:ee,width:800,title:"Edit Callback Settings",onCancel:()=>{et(!1),es(null),L.resetFields()},footer:null,children:(0,t.jsxs)(v.Form,{form:L,onFinish:eb,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[ea&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eP,{callbackConfigs:W,selectedCallback:ea.name,onCallbackChange:()=>{},disabled:!0}),(0,t.jsx)(eF,{params:eI(ea.name,W,ea.variables),callbackConfigs:W,selectedCallback:ea.name})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200",children:[(0,t.jsx)(C.Button,{onClick:()=>{et(!1),es(null),L.resetFields()},disabled:eo,children:"Cancel"}),(0,t.jsx)(C.Button,{onClick:()=>{L.submit()},loading:eo,disabled:eo,children:eo?"Saving...":"Save Changes"})]})]})}),(0,t.jsx)(ec.default,{isOpen:el,title:"Delete Callback",message:"Are you sure you want to delete this callback? This action cannot be undone.",resourceInformationTitle:"Callback Information",resourceInformation:[{label:"Callback Name",value:ei?.name},{label:"Mode",value:ei?.mode||"success"}],onCancel:()=>{er(!1),en(null)},onOk:ek,confirmLoading:eh})]}):null}],700904)}]);