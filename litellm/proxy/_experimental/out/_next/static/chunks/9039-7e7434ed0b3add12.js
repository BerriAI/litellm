"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9039],{69039:function(e,s,a){a.r(s),a.d(s,{default:function(){return ec}});var t=a(57437),r=a(2265),n=a(71253),l=a(9114),i=a(26430),o=a(96473),d=a(50010),c=a(26349),m=a(37592),u=a(4260),x=a(5545),g=a(99981),h=a(93837),p=a(27930),v=a(66830),f=a(95459),y=a(10703),j=a(91643),b=a(26832),N=a(32489),w=a(98728),k=a(79862),A=a(82222),C=a(51817),S=a(62831),T=a(17906),L=a(94263),P=a(88712),Z=a(94331),M=a(38398),E=a(33152);function U(e){let{messages:s,isLoading:a}=e;if(0===s.length)return(0,t.jsx)("div",{className:"h-full"});let r=[],n=0;for(;n<s.length;){let e=s[n];if("user"===e.role){let a=s[n+1];if((null==a?void 0:a.role)==="assistant"){r.push({user:e,assistant:a}),n+=2;continue}r.push({user:e})}else"assistant"===e.role&&r.push({assistant:e});n+=1}let l=e=>(0,t.jsxs)("div",{className:"whitespace-pre-wrap break-words",style:{wordWrap:"break-word",overflowWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},children:[(0,t.jsx)(P.Z,{message:e}),(0,t.jsx)(S.UG,{components:{code(e){let{node:s,inline:a,className:r,children:n,...l}=e,i=/language-(\w+)/.exec(r||"");return!a&&i?(0,t.jsx)(T.Z,{style:L.Z,language:i[1],PreTag:"div",className:"rounded-md my-2",wrapLines:!0,wrapLongLines:!0,...l,children:String(n).replace(/\n$/,"")}):(0,t.jsx)("code",{className:"".concat(r," px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono"),...l,children:n})},pre:e=>{let{node:s,...a}=e;return(0,t.jsx)("pre",{style:{overflowX:"auto",maxWidth:"100%"},...a})}},children:"string"==typeof e.content?e.content:""})]});return(0,t.jsxs)("div",{className:"flex flex-col gap-6 min-w-0 w-full p-4",children:[r.map((e,s)=>{let n=e.assistant,i=(null==n?void 0:n.model)||"Assistant";return(0,t.jsxs)("div",{className:"space-y-4",children:[e.user&&(0,t.jsxs)("div",{className:"space-y-2 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-blue-100 text-blue-600",children:(0,t.jsx)(k.Z,{size:16})}),(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:"You"})]}),l(e.user)]}),(0,t.jsx)("div",{className:"border-t border-gray-200"}),n?(0,t.jsxs)("div",{className:"space-y-3 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-gray-100 text-gray-600",children:(0,t.jsx)(A.Z,{size:16})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:i}),n.toolName&&(0,t.jsx)("span",{className:"rounded bg-gray-100 px-2 py-0.5 text-xs text-gray-600",children:n.toolName})]})]}),n.reasoningContent&&(0,t.jsx)(Z.Z,{reasoningContent:n.reasoningContent}),n.searchResults&&(0,t.jsx)(E.J,{searchResults:n.searchResults}),l(n),(n.timeToFirstToken||n.totalLatency||n.usage)&&(0,t.jsx)(M.Z,{timeToFirstToken:n.timeToFirstToken,totalLatency:n.totalLatency,usage:n.usage,toolName:n.toolName})]}):a&&s===r.length-1?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,t.jsx)(C.Z,{size:18,className:"animate-spin"}),(0,t.jsx)("span",{children:"Generating response..."})]}):(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Waiting for a response..."})]},s)}),a&&0===r.length&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,t.jsx)(C.Z,{size:18,className:"animate-spin"}),(0,t.jsx)("span",{children:"Generating response..."})]})]})}var R=a(10353);function _(e){let{value:s,options:a,loading:r,config:n,onChange:l}=e;return(0,t.jsx)(m.default,{value:s||void 0,placeholder:r?"Loading ".concat(n.selectorLabel.toLowerCase(),"s..."):n.selectorPlaceholder,onChange:l,loading:r,showSearch:!0,filterOption:(e,s)=>{var a;return(null!==(a=null==s?void 0:s.label)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())},options:a,className:"w-48",notFoundContent:r?(0,t.jsx)("div",{className:"flex items-center justify-center py-2",children:(0,t.jsx)(R.Z,{size:"small"})}):"No ".concat(n.selectorLabel.toLowerCase(),"s available")})}var I=a(99020),O=a(97415),z=a(67479),K=a(61994),B=a(23496),D=a(85847),W=a(79326);let F="/v1/chat/completions",G="/a2a",V={[F]:{id:F,label:"/v1/chat/completions",selectorType:"model",selectorLabel:"Model",selectorPlaceholder:"Select a model",inputPlaceholder:"Send a prompt to compare models",loadingMessage:"Gathering responses from all models...",validationMessage:"Select a model before sending a message."},[G]:{id:G,label:"/a2a (Agents)",selectorType:"agent",selectorLabel:"Agent",selectorPlaceholder:"Select an agent",inputPlaceholder:"Send a message to compare agents",loadingMessage:"Gathering responses from all agents...",validationMessage:"Select an agent before sending a message."}},H=()=>Object.values(V).map(e=>({value:e.id,label:e.label})),X=e=>V[e],Y=e=>"agent"===V[e].selectorType,q=e=>e.map(e=>({value:e,label:e})),J=e=>e.map(e=>({value:e.agent_name,label:e.agent_name||e.agent_id})),$=(e,s)=>Y(s)?e.agent:e.model,Q=(e,s)=>{let a=$(e,s);return!!(a&&a.trim())};function ee(e){let{comparison:s,onUpdate:a,onRemove:n,canRemove:l,selectorOptions:i,isLoadingOptions:o,endpointConfig:d,apiKey:c}=e,m=Y(d.id),u=$(s,d.id),[x,g]=(0,r.useState)(!1),h=e=>{e?a({applyAcrossModels:!0,temperature:s.temperature,maxTokens:s.maxTokens,tags:[...s.tags],vectorStores:[...s.vectorStores],guardrails:[...s.guardrails],useAdvancedParams:s.useAdvancedParams},{applyToAll:!0,keysToApply:["temperature","maxTokens","tags","vectorStores","guardrails","useAdvancedParams"]}):a({applyAcrossModels:!1})},p=e=>{a({useAdvancedParams:e},s.applyAcrossModels?{applyToAll:!0,keysToApply:["useAdvancedParams"]}:void 0)},v=(e,t)=>{a({[e]:t},s.applyAcrossModels?{applyToAll:!0,keysToApply:[e]}:void 0)},f=s.useAdvancedParams?1:.4,y=s.useAdvancedParams?"text-gray-700":"text-gray-400",j=()=>{g(e=>!e)},b=(0,t.jsxs)("div",{className:"w-[300px] max-h-[65vh] overflow-y-auto relative",children:[(0,t.jsx)("button",{onClick:()=>{g(!1)},className:"absolute top-0 right-0 p-1 hover:bg-gray-100 rounded transition-colors text-gray-500 hover:text-gray-700 z-10",children:(0,t.jsx)(N.Z,{size:14})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(K.Z,{checked:s.applyAcrossModels,onChange:e=>h(e.target.checked),children:(0,t.jsx)("span",{className:"text-xs font-medium",children:"Sync Settings Across Models"})})}),(0,t.jsx)(B.Z,{className:"border-gray-200"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xs font-semibold text-gray-700 mb-1.5 uppercase tracking-wide",children:"General Settings"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-600 block mb-0.5",children:"Tags"}),(0,t.jsx)(I.Z,{value:s.tags,onChange:e=>v("tags",e),accessToken:c})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-600 block mb-0.5",children:"Vector Stores"}),(0,t.jsx)(O.Z,{value:s.vectorStores,onChange:e=>v("vectorStores",e),accessToken:c})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-600 block mb-0.5",children:"Guardrails"}),(0,t.jsx)(z.Z,{value:s.guardrails,onChange:e=>v("guardrails",e),accessToken:c})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xs font-semibold text-gray-700 mb-1.5 uppercase tracking-wide",children:"Advanced Settings"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-2 pb-1",children:(0,t.jsx)(K.Z,{checked:s.useAdvancedParams,onChange:e=>p(e.target.checked),children:(0,t.jsx)("span",{className:"text-sm font-medium",children:"Use Advanced Parameters"})})}),(0,t.jsxs)("div",{className:"space-y-2 transition-opacity duration-200",style:{opacity:f},children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs font-medium ".concat(y),children:"Temperature"}),(0,t.jsx)("span",{className:"text-xs ".concat(y),children:s.temperature.toFixed(2)})]}),(0,t.jsx)(D.Z,{min:0,max:2,step:.01,value:s.temperature,onChange:e=>{v("temperature",Math.min(2,Math.max(0,Number((Array.isArray(e)?e[0]:e).toFixed(2)))))},disabled:!s.useAdvancedParams})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("label",{className:"text-xs font-medium ".concat(y),children:"Max Tokens"}),(0,t.jsx)("span",{className:"text-xs ".concat(y),children:s.maxTokens})]}),(0,t.jsx)(D.Z,{min:1,max:32768,step:1,value:s.maxTokens,onChange:e=>{v("maxTokens",Math.min(32768,Math.max(1,Math.round(Array.isArray(e)?e[0]:e))))},disabled:!s.useAdvancedParams})]})]})]})]})]})]});return(0,t.jsxs)("div",{className:"bg-white first:border-l-0 border-l border-gray-200 flex flex-col min-h-0",children:[(0,t.jsxs)("div",{className:"border-b flex items-center justify-between gap-3 px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,t.jsx)(_,{value:u,options:i,loading:o,config:d,onChange:e=>a(m?{agent:e}:{model:e})}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(W.Z,{content:b,trigger:[],open:x,onOpenChange:()=>{},placement:"bottomRight",destroyTooltipOnHide:!1,children:(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),j()},className:"p-2 rounded-lg transition-colors ".concat(x?"bg-gray-200 text-gray-700":"hover:bg-gray-100 text-gray-600"),children:(0,t.jsx)(w.Z,{size:18})})})})]}),l&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:(0,t.jsx)(N.Z,{size:18})})]}),(0,t.jsx)("div",{className:"relative flex-1 flex flex-col min-h-0",children:(0,t.jsx)("div",{className:"flex-1 max-h-[calc(100vh-385px)] overflow-auto rounded-b-2xl",children:(0,t.jsx)(U,{messages:s.messages,isLoading:s.isLoading})})})]})}var es=a(79276);let{TextArea:ea}=u.default;function et(e){let{value:s,onChange:a,onSend:r,disabled:n,hasAttachment:l,uploadComponent:i}=e,o=!n&&(s.trim().length>0||!!l);return(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("div",{className:"flex items-center flex-1 bg-white border border-gray-300 rounded-xl px-3 py-1 min-h-[44px]",children:[i&&(0,t.jsx)("div",{className:"flex-shrink-0 mr-2",children:i}),(0,t.jsx)(ea,{value:s,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),o&&r())},placeholder:"Type your message... (Shift+Enter for new line)",disabled:n,className:"flex-1",autoSize:{minRows:1,maxRows:4},style:{resize:"none",border:"none",boxShadow:"none",background:"transparent",padding:"4px 0",fontSize:"14px",lineHeight:"20px"}}),(0,t.jsx)(x.ZP,{onClick:r,disabled:!o,icon:(0,t.jsx)(es.Z,{}),shape:"circle"})]})})}let er=["Can you summarize the key points?","What assumptions did you make?","What are the next steps?"],en=["Write me a poem","Explain quantum computing","Draft a polite email requesting a meeting"];function el(e){let{accessToken:s,disabledPersonalKeyCreation:a}=e,[n,N]=(0,r.useState)([{id:"1",model:"",agent:"",messages:[],isLoading:!1,tags:[],mcpTools:[],vectorStores:[],guardrails:[],temperature:1,maxTokens:2048,applyAcrossModels:!1,useAdvancedParams:!1},{id:"2",model:"",agent:"",messages:[],isLoading:!1,tags:[],mcpTools:[],vectorStores:[],guardrails:[],temperature:1,maxTokens:2048,applyAcrossModels:!1,useAdvancedParams:!1}]),[w,k]=(0,r.useState)([]),[A,C]=(0,r.useState)([]),[S,T]=(0,r.useState)(!1),[L,P]=(0,r.useState)(!1),[Z,M]=(0,r.useState)(F),E=X(Z),U=Y(Z),R=U?J(A):q(w),_=U?L:S,[I,O]=(0,r.useState)(""),[z,K]=(0,r.useState)(null),[B,D]=(0,r.useState)(null),[W,G]=(0,r.useState)(a?"custom":"session"),[V,$]=(0,r.useState)(""),[es,ea]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=setTimeout(()=>{ea(V)},300);return()=>clearTimeout(e)},[V]),(0,r.useEffect)(()=>()=>{B&&URL.revokeObjectURL(B)},[B]);let el=(0,r.useMemo)(()=>"session"===W?s||"":es.trim(),[W,s,es]),ei=(0,r.useMemo)(()=>n.length>0&&n.every(e=>!e.isLoading&&e.messages.some(e=>"assistant"===e.role)),[n]);(0,r.useEffect)(()=>{let e=!0;return(async()=>{if(!el){k([]);return}T(!0);try{let s=await (0,y.p)(el);if(!e)return;let a=Array.from(new Set(s.map(e=>e.model_group)));k(a)}catch(s){console.error("CompareUI: failed to fetch models",s),e&&k([])}finally{e&&T(!1)}})(),()=>{e=!1}},[el]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{if(!el||!U){C([]);return}P(!0);try{let s=await (0,j.o)(el);if(!e)return;C(s)}catch(s){console.error("CompareUI: failed to fetch agents",s),e&&C([])}finally{e&&P(!1)}})(),()=>{e=!1}},[el,U]),(0,r.useEffect)(()=>{0!==w.length&&N(e=>e.map((e,s)=>{var a,t,r,n,l;return{...e,temperature:null!==(a=e.temperature)&&void 0!==a?a:1,maxTokens:null!==(t=e.maxTokens)&&void 0!==t?t:2048,applyAcrossModels:null!==(r=e.applyAcrossModels)&&void 0!==r&&r,useAdvancedParams:null!==(n=e.useAdvancedParams)&&void 0!==n&&n,...e.model?{}:{model:null!==(l=w[s%w.length])&&void 0!==l?l:""}}}))},[w]);let eo=e=>{n.length>1&&N(s=>s.filter(s=>s.id!==e))},ed=(e,s,a)=>{N(t=>{var r;if((null==a?void 0:a.applyToAll)&&(null===(r=a.keysToApply)||void 0===r?void 0:r.length)){let r={};a.keysToApply.forEach(e=>{let a=s[e];void 0!==a&&(r[e]=Array.isArray(a)?[...a]:a)});let n=Object.keys(r).length>0;return t.map(a=>a.id===e?{...a,...s}:n?{...a,...r}:a)}return t.map(a=>a.id===e?{...a,...s}:a)})},ec=()=>{B&&URL.revokeObjectURL(B),K(null),D(null)},em=(e,s,a)=>{s&&N(t=>t.map(t=>{if(t.id!==e)return t;let r=[...t.messages],n=r[r.length-1];if(n&&"assistant"===n.role){var l;let e="string"==typeof n.content?n.content:"";r[r.length-1]={...n,content:e+s,model:null!==(l=n.model)&&void 0!==l?l:a}}else r.push({role:"assistant",content:s,model:a});return{...t,messages:r}}))},eu=(e,s)=>{s&&N(a=>a.map(a=>{if(a.id!==e)return a;let t=[...a.messages],r=t[t.length-1];return r&&"assistant"===r.role?t[t.length-1]={...r,reasoningContent:(r.reasoningContent||"")+s}:r&&"user"===r.role&&t.push({role:"assistant",content:"",reasoningContent:s}),{...a,messages:t}}))},ex=(e,s)=>{N(a=>a.map(a=>{if(a.id!==e)return a;let t=[...a.messages],r=t[t.length-1];return r&&"assistant"===r.role?t[t.length-1]={...r,timeToFirstToken:s}:r&&"user"===r.role&&t.push({role:"assistant",content:"",timeToFirstToken:s}),{...a,messages:t}}))},eg=(e,s)=>{N(a=>a.map(a=>{if(a.id!==e)return a;let t=[...a.messages],r=t[t.length-1];return r&&"assistant"===r.role?t[t.length-1]={...r,totalLatency:s}:r&&"user"===r.role&&t.push({role:"assistant",content:"",totalLatency:s}),{...a,messages:t}}))},eh=(e,s,a)=>{N(t=>t.map(t=>{if(t.id!==e)return t;let r=[...t.messages],n=r[r.length-1];return n&&"assistant"===n.role&&(r[r.length-1]={...n,usage:s,toolName:a}),{...t,messages:r}}))},ep=(e,s)=>{s&&N(a=>a.map(a=>{if(a.id!==e)return a;let t=[...a.messages],r=t[t.length-1];return r&&"assistant"===r.role&&(t[t.length-1]={...r,searchResults:s}),{...a,messages:t}}))},ev=!!s,ef=async e=>{let s=e.trim(),a=!!z;if(!s&&!a)return;if(!el){l.Z.fromBackend("Please provide a Virtual Key or select Current UI Session");return}if(0===n.length)return;if(n.some(e=>!Q(e,Z))){l.Z.fromBackend(E.validationMessage);return}let t=a?await (0,v.Sn)(s,z):{role:"user",content:s},r=(0,v.Hk)(s,a,B||void 0,null==z?void 0:z.name),i=new Map;n.forEach(e=>{var a;let n=null!==(a=e.traceId)&&void 0!==a?a:(0,h.Z)(),l=[...e.messages.map(e=>{let{role:s,content:a}=e;return{role:s,content:Array.isArray(a)?a:"string"==typeof a?a:""}}),t];i.set(e.id,{id:e.id,model:e.model,agent:e.agent,inputMessage:s,traceId:n,tags:e.tags,vectorStores:e.vectorStores,guardrails:e.guardrails,temperature:e.temperature,maxTokens:e.maxTokens,displayMessages:[...e.messages,r],apiChatHistory:l})}),0!==i.size&&(N(e=>e.map(e=>{let s=i.get(e.id);return s?{...e,traceId:s.traceId,messages:s.displayMessages,isLoading:!0}:e})),O(""),ec(),i.forEach(e=>{var s;let a=e.tags.length>0?e.tags:void 0,t=e.vectorStores.length>0?e.vectorStores:void 0,r=e.guardrails.length>0?e.guardrails:void 0,i=n.find(s=>s.id===e.id),o=null!==(s=null==i?void 0:i.useAdvancedParams)&&void 0!==s&&s;(U?(0,b.m)(e.agent,e.inputMessage,(s,a)=>{N(t=>t.map(t=>{if(t.id!==e.id)return t;let r=[...t.messages],n=r[r.length-1];if(n&&"assistant"===n.role){var l;r[r.length-1]={...n,content:s,model:null!==(l=n.model)&&void 0!==l?l:a}}else r.push({role:"assistant",content:s,model:a});return{...t,messages:r}}))},el,void 0,s=>ex(e.id,s),s=>eg(e.id,s)):(0,f.n)(e.apiChatHistory,(s,a)=>em(e.id,s,a),e.model,el,a,void 0,s=>eu(e.id,s),s=>ex(e.id,s),s=>eh(e.id,s),e.traceId,t,r,void 0,void 0,s=>ep(e.id,s),o?e.temperature:void 0,o?e.maxTokens:void 0,s=>eg(e.id,s))).catch(s=>{let a=s instanceof Error?s.message:String(s);console.error("CompareUI: failed to fetch response",s),l.Z.fromBackend(a),N(s=>s.map(s=>{if(s.id!==e.id)return s;let t=[...s.messages],r=t[t.length-1],n=r&&"assistant"===r.role&&"string"==typeof r.content?r.content:"";return r&&"assistant"===r.role?t[t.length-1]={...r,content:n?"".concat(n,"\nError fetching response: ").concat(a):"Error fetching response: ".concat(a)}:t.push({role:"assistant",content:"Error fetching response: ".concat(a)}),{...s,messages:t}}))}).finally(()=>{N(s=>s.map(s=>s.id===e.id?{...s,isLoading:!1}:s))})}))},ey=e=>{O(e)},ej=n.some(e=>e.messages.length>0),eb=n.some(e=>e.isLoading),eN=!!z,ew=!!(null==z?void 0:z.name.toLowerCase().endsWith(".pdf")),ek=!ej&&!eb&&!eN;return(0,t.jsx)("div",{className:"w-full h-full p-4 bg-white",children:(0,t.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white shadow-sm min-h-[calc(100vh-160px)] flex flex-col",children:[(0,t.jsx)("div",{className:"border-b px-4 py-2",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Virtual Key Source"}),(0,t.jsxs)(m.default,{value:W,onChange:e=>G(e),disabled:a,className:"w-48",children:[(0,t.jsx)(m.default.Option,{value:"session",disabled:!ev,children:"Current UI Session"}),(0,t.jsx)(m.default.Option,{value:"custom",children:"Virtual Key"})]}),"custom"===W&&(0,t.jsx)(u.default.Password,{value:V,onChange:e=>$(e.target.value),placeholder:"Enter Virtual Key",className:"w-56"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Endpoint"}),(0,t.jsx)(m.default,{value:Z,onChange:e=>M(e),className:"w-56",children:H().map(e=>(0,t.jsx)(m.default.Option,{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(x.ZP,{onClick:()=>{N(e=>e.map(e=>({...e,messages:[],traceId:void 0,isLoading:!1}))),O(""),ec()},disabled:!ej,icon:(0,t.jsx)(i.Z,{}),children:"Clear All Chats"}),(0,t.jsx)(g.Z,{title:n.length>=3?"Compare up to 3 models at a time":"Add another comparison",children:(0,t.jsx)(x.ZP,{onClick:()=>{var e,s,a;if(n.length>=3)return;let t=null!==(s=w[n.length%(w.length||1)])&&void 0!==s?s:"",r=null!==(a=null===(e=A[n.length%(A.length||1)])||void 0===e?void 0:e.agent_name)&&void 0!==a?a:"",l={id:Date.now().toString(),model:t,agent:r,messages:[],isLoading:!1,tags:[],mcpTools:[],vectorStores:[],guardrails:[],temperature:1,maxTokens:2048,applyAcrossModels:!1,useAdvancedParams:!1};N(e=>[...e,l])},disabled:n.length>=3,icon:(0,t.jsx)(o.Z,{}),children:"Add Comparison"})})]})]})}),(0,t.jsx)("div",{className:"grid flex-1 min-h-0 auto-rows-[minmax(0,1fr)]",style:{gridTemplateColumns:"repeat(".concat(n.length,", minmax(0, 1fr))")},children:n.map(e=>(0,t.jsx)(ee,{comparison:e,onUpdate:(s,a)=>ed(e.id,s,a),onRemove:()=>eo(e.id),canRemove:n.length>1,selectorOptions:R,isLoadingOptions:_,endpointConfig:E,apiKey:el},e.id))}),(0,t.jsx)("div",{className:"flex justify-center pb-4",children:(0,t.jsx)("div",{className:"w-full max-w-3xl px-4",children:(0,t.jsxs)("div",{className:"border border-gray-200 shadow-lg rounded-xl bg-white p-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-between gap-4 mb-3 min-h-8",children:eN?(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Attachment ready to send"}):ek?(0,t.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto",children:en.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>ey(e),className:"shrink-0 rounded-full border border-gray-200 px-3 py-1 text-xs font-medium text-gray-600 transition-colors hover:bg-gray-100 cursor-pointer",children:e},e))}):ei&&!eN?(0,t.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto",children:er.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>ey(e),className:"shrink-0 rounded-full border border-gray-200 px-3 py-1 text-xs font-medium text-gray-600 transition-colors hover:bg-gray-100 cursor-pointer",children:e},e))}):eb?(0,t.jsxs)("span",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-blue-500 animate-pulse","aria-hidden":!0}),E.loadingMessage]}):(0,t.jsx)("span",{className:"text-sm text-gray-500",children:E.inputPlaceholder})}),z&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,t.jsx)("div",{className:"relative inline-block",children:ew?(0,t.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,t.jsx)(d.Z,{style:{fontSize:"16px",color:"white"}})}):(0,t.jsx)("img",{src:B||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:z.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:ew?"PDF":"Image"})]}),(0,t.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:ec,children:(0,t.jsx)(c.Z,{style:{fontSize:"12px"}})})]})}),(0,t.jsx)(et,{value:I,onChange:e=>{O(e)},onSend:()=>{ef(I)},disabled:0===n.length||n.every(e=>e.isLoading),hasAttachment:eN,uploadComponent:(0,t.jsx)(p.Z,{chatUploadedImage:z,chatImagePreviewUrl:B,onImageUpload:e=>(B&&URL.revokeObjectURL(B),K(e),D(URL.createObjectURL(e)),!1),onRemoveImage:ec})})]})})})]})})}var ei=a(58643),eo=a(39760),ed=a(91624);function ec(){let{accessToken:e,userRole:s,userId:a,disabledPersonalKeyCreation:l,token:i}=(0,eo.Z)(),[o,d]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{(async()=>{if(e){let s=await (0,ed.C)(e);s&&d({PROXY_BASE_URL:s.PROXY_BASE_URL,LITELLM_UI_API_DOC_BASE_URL:s.LITELLM_UI_API_DOC_BASE_URL})}})()},[e]),(0,t.jsxs)(ei.v0,{className:"h-full w-full",children:[(0,t.jsxs)(ei.td,{className:"mb-0",children:[(0,t.jsx)(ei.OK,{children:"Chat"}),(0,t.jsx)(ei.OK,{children:"Compare"})]}),(0,t.jsxs)(ei.nP,{className:"h-full",children:[(0,t.jsx)(ei.x4,{className:"h-full",children:(0,t.jsx)(n.Z,{accessToken:e,token:i,userRole:s,userID:a,disabledPersonalKeyCreation:l,proxySettings:o})}),(0,t.jsx)(ei.x4,{className:"h-full",children:(0,t.jsx)(el,{accessToken:e,disabledPersonalKeyCreation:l})})]})]})}}}]);