"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2019],{92019:function(e,s,t){var a=t(57437),l=t(19226),i=t(13959),r=t(45937),n=t(92403),o=t(28595),c=t(68208),m=t(9775),d=t(41361),u=t(37527),g=t(15883),x=t(12660),h=t(88009),p=t(48231),y=t(57400),f=t(58630),j=t(44625),b=t(41169),N=t(38434),v=t(71891),_=t(55322),k=t(2265),w=t(99376),Z=t(20347),L=t(79262);let{Sider:S}=l.default,z=()=>{let e="ui/".replace(/^\/+|\/+$/g,"");return e?"/".concat(e,"/"):"/"},M=e=>{switch(e){case"api-keys":return"virtual-keys";case"llm-playground":return"test-key";case"models":return"models-and-endpoints";case"new_usage":return"usage";case"teams":return"teams";case"organizations":return"organizations";case"users":return"users";case"api_ref":return"api-reference";case"model-hub-table":return"model-hub";case"logs":return"logs";case"guardrails":return"guardrails";case"mcp-servers":return"tools/mcp-servers";case"vector-stores":return"tools/vector-stores";case"caching":return"experimental/caching";case"prompts":return"experimental/prompts";case"budgets":return"experimental/budgets";case"transform-request":return"experimental/api-playground";case"tag-management":return"experimental/tag-management";case"usage":return"experimental/old-usage";case"general-settings":return"settings/router-settings";case"settings":return"settings/logging-and-alerts";case"admin-panel":return"settings/admin-settings";case"ui-theme":return"settings/ui-theme";default:return e.replace(/^\/+/,"")}},P=e=>{let s=z(),t=M(e).replace(/^\/+|\/+$/g,"");return"".concat(s).concat(t)};s.Z=e=>{let{accessToken:s,userRole:t,defaultSelectedKey:O,collapsed:C=!1}=e,U=(0,w.useRouter)(),T=(0,w.usePathname)()||"/",R=[{key:"1",page:"api-keys",label:"Virtual Keys",icon:(0,a.jsx)(n.Z,{style:{fontSize:18}})},{key:"3",page:"llm-playground",label:"Test Key",icon:(0,a.jsx)(o.Z,{style:{fontSize:18}}),roles:Z.LQ},{key:"2",page:"models",label:"Models + Endpoints",icon:(0,a.jsx)(c.Z,{style:{fontSize:18}}),roles:Z.LQ},{key:"12",page:"new_usage",label:"Usage",icon:(0,a.jsx)(m.Z,{style:{fontSize:18}}),roles:[...Z.ZL,...Z.lo]},{key:"6",page:"teams",label:"Teams",icon:(0,a.jsx)(d.Z,{style:{fontSize:18}})},{key:"17",page:"organizations",label:"Organizations",icon:(0,a.jsx)(u.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"5",page:"users",label:"Internal Users",icon:(0,a.jsx)(g.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"14",page:"api_ref",label:"API Reference",icon:(0,a.jsx)(x.Z,{style:{fontSize:18}})},{key:"16",page:"model-hub-table",label:"Model Hub",icon:(0,a.jsx)(h.Z,{style:{fontSize:18}})},{key:"15",page:"logs",label:"Logs",icon:(0,a.jsx)(p.Z,{style:{fontSize:18}})},{key:"11",page:"guardrails",label:"Guardrails",icon:(0,a.jsx)(y.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"26",page:"tools",label:"Tools",icon:(0,a.jsx)(f.Z,{style:{fontSize:18}}),children:[{key:"18",page:"mcp-servers",label:"MCP Servers",icon:(0,a.jsx)(f.Z,{style:{fontSize:18}})},{key:"21",page:"vector-stores",label:"Vector Stores",icon:(0,a.jsx)(j.Z,{style:{fontSize:18}}),roles:Z.ZL}]},{key:"experimental",page:"experimental",label:"Experimental",icon:(0,a.jsx)(b.Z,{style:{fontSize:18}}),children:[{key:"9",page:"caching",label:"Caching",icon:(0,a.jsx)(j.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"25",page:"prompts",label:"Prompts",icon:(0,a.jsx)(N.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"10",page:"budgets",label:"Budgets",icon:(0,a.jsx)(u.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"20",page:"transform-request",label:"API Playground",icon:(0,a.jsx)(x.Z,{style:{fontSize:18}}),roles:[...Z.ZL,...Z.lo]},{key:"19",page:"tag-management",label:"Tag Management",icon:(0,a.jsx)(v.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"4",page:"usage",label:"Old Usage",icon:(0,a.jsx)(m.Z,{style:{fontSize:18}})}]},{key:"settings",page:"settings",label:"Settings",icon:(0,a.jsx)(_.Z,{style:{fontSize:18}}),roles:Z.ZL,children:[{key:"11",page:"general-settings",label:"Router Settings",icon:(0,a.jsx)(_.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"8",page:"settings",label:"Logging & Alerts",icon:(0,a.jsx)(_.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"13",page:"admin-panel",label:"Admin Settings",icon:(0,a.jsx)(_.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"14",page:"ui-theme",label:"UI Theme",icon:(0,a.jsx)(_.Z,{style:{fontSize:18}}),roles:Z.ZL}]}],A=k.useMemo(()=>R.filter(e=>!e.roles||e.roles.includes(t)).map(e=>({...e,children:e.children?e.children.filter(e=>!e.roles||e.roles.includes(t)):void 0})),[t]),E=k.useMemo(()=>{var e,s;let t=z(),a=(T.startsWith(t)?T.slice(t.length):T.replace(/^\/+/,"")).toLowerCase(),l=e=>{let s=M(e).toLowerCase();return a===s||a.startsWith("".concat(s,"/"))};for(let e of A){if(!e.children&&l(e.page))return e.key;if(e.children){for(let s of e.children)if(l(s.page))return s.key}}let i=null===(e=A.find(e=>e.page===O))||void 0===e?void 0:e.key;if(i)return i;for(let e of A)if(null===(s=e.children)||void 0===s?void 0:s.some(e=>e.page===O))return e.children.find(e=>e.page===O).key;return"1"},[T,A,O]),I=e=>{let s=P(e);U.push(s)};return(0,a.jsx)(l.default,{style:{minHeight:"100vh"},children:(0,a.jsxs)(S,{theme:"light",width:220,collapsed:C,collapsedWidth:80,collapsible:!0,trigger:null,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[(0,a.jsx)(i.ZP,{theme:{components:{Menu:{iconSize:18,fontSize:14}}},children:(0,a.jsx)(r.Z,{mode:"inline",selectedKeys:[E],defaultOpenKeys:C?[]:["llm-tools"],inlineCollapsed:C,className:"custom-sidebar-menu",style:{borderRight:0,backgroundColor:"transparent",fontSize:"14px"},items:A.map(e=>{var s;return{key:e.key,icon:e.icon,label:e.label,children:null===(s=e.children)||void 0===s?void 0:s.map(e=>({key:e.key,icon:e.icon,label:e.label,onClick:()=>I(e.page)})),onClick:e.children?void 0:()=>I(e.page)}})})}),(0,Z.tY)(t)&&!C&&(0,a.jsx)(L.Z,{accessToken:s,width:220})]})})}},79262:function(e,s,t){t.d(s,{Z:function(){return x}});var a=t(57437),l=t(2265),i=t(1309),r=t(76865),n=t(70525),o=t(95805),c=t(51817),m=t(21047);t(22135),t(40875);var d=t(49663),u=t(19250);let g=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter(Boolean).join(" ")};function x(e){let{accessToken:s,width:t=220}=e,[x,h]=(0,l.useState)(!1),[p,y]=(0,l.useState)(!1),[f,j]=(0,l.useState)(null),[b,N]=(0,l.useState)(!1),[v,_]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{if(s){N(!0),_(null);try{let e=await (0,u.getRemainingUsers)(s);j(e)}catch(e){console.error("Failed to fetch usage data:",e),_("Failed to load usage data")}finally{N(!1)}}})()},[s]);let{isOverLimit:k,isNearLimit:w,usagePercentage:Z,userMetrics:L,teamMetrics:S}=(e=>{if(!e)return{isOverLimit:!1,isNearLimit:!1,usagePercentage:0,userMetrics:{isOverLimit:!1,isNearLimit:!1,usagePercentage:0},teamMetrics:{isOverLimit:!1,isNearLimit:!1,usagePercentage:0}};let s=!!e.total_users_remaining&&e.total_users_remaining<=0,t=!!e.total_users_remaining&&e.total_users_remaining<=5&&e.total_users_remaining>0,a=e.total_users?e.total_users_used/e.total_users*100:0,l=!!e.total_teams_remaining&&e.total_teams_remaining<=0,i=!!e.total_teams_remaining&&e.total_teams_remaining<=5&&e.total_teams_remaining>0,r=e.total_teams?e.total_teams_used/e.total_teams*100:0,n=s||l;return{isOverLimit:n,isNearLimit:(t||i)&&!n,usagePercentage:Math.max(a,r),userMetrics:{isOverLimit:s,isNearLimit:t,usagePercentage:a},teamMetrics:{isOverLimit:l,isNearLimit:i,usagePercentage:r}}})(f),z=()=>k?"red":w?"yellow":"green",M=()=>k?"Over Limit":w?"Near Limit":"Active",P=()=>k?(0,a.jsx)(r.Z,{className:"h-3 w-3"}):w?(0,a.jsx)(n.Z,{className:"h-3 w-3"}):null;return s&&((null==f?void 0:f.total_users)!==null||(null==f?void 0:f.total_teams)!==null)?(0,a.jsx)("div",{className:"fixed bottom-4 left-4 z-50",style:{width:"".concat(Math.min(t,220),"px")},children:(0,a.jsx)(()=>{if(p){let e=k||w;return(0,a.jsx)("button",{onClick:()=>y(!1),className:g("bg-white border border-gray-200 rounded-lg shadow-sm p-3 hover:shadow-md transition-all w-full",e&&k&&"border-red-200 bg-red-50",e&&w&&"border-yellow-200 bg-yellow-50"),title:"Show usage details",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 flex-shrink-0"}),e&&(0,a.jsx)("span",{className:"flex-shrink-0",children:P()}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium truncate",children:[f&&null!==f.total_users&&(0,a.jsxs)("span",{className:"flex-shrink-0",children:["U: ",f.total_users_used,"/",f.total_users]}),f&&null!==f.total_teams&&(0,a.jsxs)("span",{className:"flex-shrink-0",children:["T: ",f.total_teams_used,"/",f.total_teams]}),!f||null===f.total_users&&null===f.total_teams&&(0,a.jsx)("span",{className:"truncate",children:"Usage"})]})]})})}return b?(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 w-full",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 truncate",children:"Loading..."})]})}):v||!f?(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 group w-full",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("span",{className:"text-sm text-gray-500 truncate block",children:v||"No data"})}),(0,a.jsx)("button",{onClick:()=>y(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 rounded transition-all flex-shrink-0",title:"Minimize",children:(0,a.jsx)(m.Z,{className:"h-3 w-3 text-gray-400"})})]})}):(0,a.jsxs)("div",{className:g("bg-white border rounded-lg shadow-sm p-3 transition-all duration-200 group w-full",k&&"border-red-200 bg-red-50",w&&"border-yellow-200 bg-yellow-50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium text-sm truncate",children:"Usage"}),(k||w)&&(0,a.jsx)(i.C,{color:z(),className:"text-xs px-1.5 py-0.5 flex-shrink-0",children:M()})]}),(0,a.jsx)("button",{onClick:()=>y(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 rounded transition-all flex-shrink-0",title:"Minimize",children:(0,a.jsx)(m.Z,{className:"h-3 w-3 text-gray-400"})})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[null!==f.total_users&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600 mb-1",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"font-medium",children:"Users"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Used:"}),(0,a.jsxs)("span",{className:"font-medium text-right",children:[f.total_users_used,"/",f.total_users]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Remaining:"}),(0,a.jsx)("span",{className:g("font-medium text-right",L.isOverLimit&&"text-red-600",L.isNearLimit&&"text-yellow-600"),children:f.total_users_remaining})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Usage:"}),(0,a.jsxs)("span",{className:"font-medium text-right",children:[Math.round(L.usagePercentage),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:g("h-2 rounded-full transition-all duration-300",L.isOverLimit&&"bg-red-500",L.isNearLimit&&"bg-yellow-500",!L.isOverLimit&&!L.isNearLimit&&"bg-green-500"),style:{width:"".concat(Math.min(L.usagePercentage,100),"%")}})})]}),null!==f.total_teams&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600 mb-1",children:[(0,a.jsx)(d.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"font-medium",children:"Teams"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Used:"}),(0,a.jsxs)("span",{className:"font-medium text-right",children:[f.total_teams_used,"/",f.total_teams]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Remaining:"}),(0,a.jsx)("span",{className:g("font-medium text-right",S.isOverLimit&&"text-red-600",S.isNearLimit&&"text-yellow-600"),children:f.total_teams_remaining})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Usage:"}),(0,a.jsxs)("span",{className:"font-medium text-right",children:[Math.round(S.usagePercentage),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:g("h-2 rounded-full transition-all duration-300",S.isOverLimit&&"bg-red-500",S.isNearLimit&&"bg-yellow-500",!S.isOverLimit&&!S.isNearLimit&&"bg-green-500"),style:{width:"".concat(Math.min(S.usagePercentage,100),"%")}})})]})]})]})},{})}):null}}}]);