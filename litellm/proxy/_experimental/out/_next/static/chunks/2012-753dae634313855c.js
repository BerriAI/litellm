"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2012],{26210:function(e,t,i){i.d(t,{UQ:function(){return s.Z},X1:function(){return l.Z},_m:function(){return r.Z},oi:function(){return n.Z},xv:function(){return a.Z}});var s=i(87452),l=i(88829),r=i(72208),a=i(84264),n=i(49566)},30078:function(e,t,i){i.d(t,{Ct:function(){return s.Z},Dx:function(){return h.Z},OK:function(){return n.Z},Zb:function(){return r.Z},nP:function(){return c.Z},oi:function(){return x.Z},rj:function(){return a.Z},td:function(){return d.Z},v0:function(){return m.Z},x4:function(){return o.Z},xv:function(){return u.Z},zx:function(){return l.Z}});var s=i(41649),l=i(20831),r=i(12514),a=i(67101),n=i(12485),m=i(18135),d=i(35242),o=i(29706),c=i(77991),u=i(84264),x=i(49566),h=i(96761)},62490:function(e,t,i){i.d(t,{Ct:function(){return s.Z},RM:function(){return n.Z},SC:function(){return c.Z},Zb:function(){return r.Z},iA:function(){return a.Z},pj:function(){return m.Z},ss:function(){return d.Z},xs:function(){return o.Z},xv:function(){return u.Z},zx:function(){return l.Z}});var s=i(41649),l=i(20831),r=i(12514),a=i(21626),n=i(97214),m=i(28241),d=i(58834),o=i(69552),c=i(71876),u=i(84264)},11318:function(e,t,i){i.d(t,{Z:function(){return n}});var s=i(2265),l=i(39760),r=i(19250);let a=async(e,t,i,s)=>"Admin"!=i&&"Admin Viewer"!=i?await (0,r.teamListCall)(e,(null==s?void 0:s.organization_id)||null,t):await (0,r.teamListCall)(e,(null==s?void 0:s.organization_id)||null);var n=()=>{let[e,t]=(0,s.useState)([]),{accessToken:i,userId:r,userRole:n}=(0,l.Z)();return(0,s.useEffect)(()=>{(async()=>{t(await a(i,r,n,null))})()},[i,r,n]),{teams:e,setTeams:t}}},33293:function(e,t,i){i.d(t,{Z:function(){return H}});var s=i(57437),l=i(2265),r=i(24199),a=i(30078),n=i(20831),m=i(12514),d=i(47323),o=i(21626),c=i(97214),u=i(28241),x=i(58834),h=i(69552),_=i(71876),g=i(84264),p=i(15424),b=i(89970),v=i(53410),j=i(74998),f=i(59872),Z=e=>{let{teamData:t,canEditTeam:i,handleMemberDelete:l,setSelectedEditMember:r,setIsEditMemberModalVisible:a,setIsAddMemberModalVisible:Z}=e,y=e=>{if(null==e)return"0";if("number"==typeof e){let t=Number(e);return t===Math.floor(t)?t.toString():(0,f.pw)(t,8).replace(/\.?0+$/,"")}return"0"},N=e=>{if(!e)return 0;let i=t.team_memberships.find(t=>t.user_id===e);return(null==i?void 0:i.spend)||0},k=e=>{var i;if(!e)return null;let s=t.team_memberships.find(t=>t.user_id===e);console.log("membership=".concat(s));let l=null==s?void 0:null===(i=s.litellm_budget_table)||void 0===i?void 0:i.max_budget;return null==l?null:y(l)},w=e=>{var i,s;if(!e)return"No Limits";let l=t.team_memberships.find(t=>t.user_id===e),r=null==l?void 0:null===(i=l.litellm_budget_table)||void 0===i?void 0:i.rpm_limit,a=null==l?void 0:null===(s=l.litellm_budget_table)||void 0===s?void 0:s.tpm_limit,n=[r?"".concat(y(r)," RPM"):null,a?"".concat(y(a)," TPM"):null].filter(Boolean);return n.length>0?n.join(" / "):"No Limits"};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(m.Z,{className:"w-full mx-auto flex-auto overflow-auto max-h-[50vh]",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(o.Z,{className:"min-w-full",children:[(0,s.jsx)(x.Z,{children:(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(h.Z,{children:"User ID"}),(0,s.jsx)(h.Z,{children:"User Email"}),(0,s.jsx)(h.Z,{children:"Role"}),(0,s.jsxs)(h.Z,{children:["Team Member Spend (USD)"," ",(0,s.jsx)(b.Z,{title:"This is the amount spent by a user in the team.",children:(0,s.jsx)(p.Z,{})})]}),(0,s.jsx)(h.Z,{children:"Team Member Budget (USD)"}),(0,s.jsxs)(h.Z,{children:["Team Member Rate Limits"," ",(0,s.jsx)(b.Z,{title:"Rate limits for this member's usage within this team.",children:(0,s.jsx)(p.Z,{})})]}),(0,s.jsx)(h.Z,{className:"sticky right-0 bg-white z-10 border-l border-gray-200",children:"Actions"})]})}),(0,s.jsx)(c.Z,{children:t.team_info.members_with_roles.map((e,n)=>(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(u.Z,{children:(0,s.jsx)(g.Z,{className:"font-mono",children:e.user_id})}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(g.Z,{className:"font-mono",children:e.user_email?e.user_email:"No Email"})}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(g.Z,{className:"font-mono",children:e.role})}),(0,s.jsx)(u.Z,{children:(0,s.jsxs)(g.Z,{className:"font-mono",children:["$",(0,f.pw)(N(e.user_id),4)]})}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(g.Z,{className:"font-mono",children:k(e.user_id)?"$".concat((0,f.pw)(Number(k(e.user_id)),4)):"No Limit"})}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(g.Z,{className:"font-mono",children:w(e.user_id)})}),(0,s.jsx)(u.Z,{className:"sticky right-0 bg-white z-10 border-l border-gray-200",children:i&&(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(d.Z,{icon:v.Z,size:"sm",onClick:()=>{var i,s,l;let n=t.team_memberships.find(t=>t.user_id===e.user_id);r({...e,max_budget_in_team:(null==n?void 0:null===(i=n.litellm_budget_table)||void 0===i?void 0:i.max_budget)||null,tpm_limit:(null==n?void 0:null===(s=n.litellm_budget_table)||void 0===s?void 0:s.tpm_limit)||null,rpm_limit:(null==n?void 0:null===(l=n.litellm_budget_table)||void 0===l?void 0:l.rpm_limit)||null}),a(!0)},className:"cursor-pointer hover:text-blue-600"}),(0,s.jsx)(d.Z,{icon:j.Z,size:"sm",onClick:()=>l(e),className:"cursor-pointer hover:text-red-600"})]})})]},n))})]})})}),(0,s.jsx)(n.Z,{onClick:()=>Z(!0),children:"Add Member"})]})},y=i(96761),N=i(73002),k=i(61994),w=i(85180),M=i(89245),T=i(78355),S=i(19250);let C={"/key/generate":"Member can generate a virtual key for this team","/key/service-account/generate":"Member can generate a service account key (not belonging to any user) for this team","/key/update":"Member can update a virtual key belonging to this team","/key/delete":"Member can delete a virtual key belonging to this team","/key/info":"Member can get info about a virtual key belonging to this team","/key/regenerate":"Member can regenerate a virtual key belonging to this team","/key/{key_id}/regenerate":"Member can regenerate a virtual key belonging to this team","/key/list":"Member can list virtual keys belonging to this team","/key/block":"Member can block a virtual key belonging to this team","/key/unblock":"Member can unblock a virtual key belonging to this team"},P=e=>e.includes("/info")||e.includes("/list")?"GET":"POST",L=e=>{let t=P(e),i=C[e];if(!i){for(let[t,s]of Object.entries(C))if(e.includes(t)){i=s;break}}return i||(i="Access ".concat(e)),{method:t,endpoint:e,description:i,route:e}};var I=i(9114),E=e=>{let{teamId:t,accessToken:i,canEditTeam:r}=e,[a,d]=(0,l.useState)([]),[p,b]=(0,l.useState)([]),[v,j]=(0,l.useState)(!0),[f,Z]=(0,l.useState)(!1),[C,P]=(0,l.useState)(!1),E=async()=>{try{if(j(!0),!i)return;let e=await (0,S.getTeamPermissionsCall)(i,t),s=e.all_available_permissions||[];d(s);let l=e.team_member_permissions||[];b(l),P(!1)}catch(e){I.Z.fromBackend("Failed to load permissions"),console.error("Error fetching permissions:",e)}finally{j(!1)}};(0,l.useEffect)(()=>{E()},[t,i]);let z=(e,t)=>{b(t?[...p,e]:p.filter(t=>t!==e)),P(!0)},A=async()=>{try{if(!i)return;Z(!0),await (0,S.teamPermissionsUpdateCall)(i,t,p),I.Z.success("Permissions updated successfully"),P(!1)}catch(e){I.Z.fromBackend("Failed to update permissions"),console.error("Error updating permissions:",e)}finally{Z(!1)}};if(v)return(0,s.jsx)("div",{className:"p-6 text-center",children:"Loading permissions..."});let D=a.length>0;return(0,s.jsxs)(m.Z,{className:"bg-white shadow-md rounded-md p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center border-b pb-4 mb-6",children:[(0,s.jsx)(y.Z,{className:"mb-2 sm:mb-0",children:"Member Permissions"}),r&&C&&(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(N.ZP,{icon:(0,s.jsx)(M.Z,{}),onClick:()=>{E()},children:"Reset"}),(0,s.jsxs)(n.Z,{onClick:A,loading:f,className:"flex items-center gap-2",children:[(0,s.jsx)(T.Z,{})," Save Changes"]})]})]}),(0,s.jsx)(g.Z,{className:"mb-6 text-gray-600",children:"Control what team members can do when they are not team admins."}),D?(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(o.Z,{className:" min-w-full",children:[(0,s.jsx)(x.Z,{children:(0,s.jsxs)(_.Z,{children:[(0,s.jsx)(h.Z,{children:"Method"}),(0,s.jsx)(h.Z,{children:"Endpoint"}),(0,s.jsx)(h.Z,{children:"Description"}),(0,s.jsx)(h.Z,{className:"sticky right-0 bg-white shadow-[-4px_0_4px_-4px_rgba(0,0,0,0.1)] text-center",children:"Allow Access"})]})}),(0,s.jsx)(c.Z,{children:a.map(e=>{let t=L(e);return(0,s.jsxs)(_.Z,{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)(u.Z,{children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("GET"===t.method?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:t.method})}),(0,s.jsx)(u.Z,{children:(0,s.jsx)("span",{className:"font-mono text-sm text-gray-800",children:t.endpoint})}),(0,s.jsx)(u.Z,{className:"text-gray-700",children:t.description}),(0,s.jsx)(u.Z,{className:"sticky right-0 bg-white shadow-[-4px_0_4px_-4px_rgba(0,0,0,0.1)] text-center",children:(0,s.jsx)(k.Z,{checked:p.includes(e),onChange:t=>z(e,t.target.checked),disabled:!r})})]},e)})})]})}):(0,s.jsx)("div",{className:"py-12",children:(0,s.jsx)(w.Z,{description:"No permissions available"})})]})},z=i(13634),A=i(42264),D=i(64482),F=i(52787),B=i(10900),R=i(10901),U=i(33860),O=i(46468),V=i(98015),q=i(97415),K=i(95920),G=i(68473),$=i(21425),J=i(27799),Q=i(30401),W=i(78867),X=i(95096),H=e=>{var t,i,n,m,d,o,c,u,x,h,_,g,v,j,y,k;let{teamId:w,onClose:M,accessToken:T,is_team_admin:C,is_proxy_admin:P,userModels:L,editTeam:H,premiumUser:Y=!1,onUpdate:ee}=e,[et,ei]=(0,l.useState)(null),[es,el]=(0,l.useState)(!0),[er,ea]=(0,l.useState)(!1),[en]=z.Z.useForm(),[em,ed]=(0,l.useState)(!1),[eo,ec]=(0,l.useState)(null),[eu,ex]=(0,l.useState)(!1),[eh,e_]=(0,l.useState)([]),[eg,ep]=(0,l.useState)(!1),[eb,ev]=(0,l.useState)({}),[ej,ef]=(0,l.useState)([]);console.log("userModels in team info",L);let eZ=C||P,ey=async()=>{try{if(el(!0),!T)return;let e=await (0,S.teamInfoCall)(T,w);ei(e)}catch(e){I.Z.fromBackend("Failed to load team information"),console.error("Error fetching team info:",e)}finally{el(!1)}};(0,l.useEffect)(()=>{ey()},[w,T]),(0,l.useEffect)(()=>{(async()=>{try{if(!T)return;let e=(await (0,S.getGuardrailsList)(T)).guardrails.map(e=>e.guardrail_name);ef(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})()},[T]);let eN=async e=>{try{if(null==T)return;let t={user_email:e.user_email,user_id:e.user_id,role:e.role};await (0,S.teamMemberAddCall)(T,w,t),I.Z.success("Team member added successfully"),ea(!1),en.resetFields();let i=await (0,S.teamInfoCall)(T,w);ei(i),ee(i)}catch(l){var t,i,s;let e="Failed to add team member";(null==l?void 0:null===(s=l.raw)||void 0===s?void 0:null===(i=s.detail)||void 0===i?void 0:null===(t=i.error)||void 0===t?void 0:t.includes("Assigning team admins is a premium feature"))?e="Assigning admins is an enterprise-only feature. Please upgrade your LiteLLM plan to enable this.":(null==l?void 0:l.message)&&(e=l.message),I.Z.fromBackend(e),console.error("Error adding team member:",l)}},ek=async e=>{try{if(null==T)return;let t={user_email:e.user_email,user_id:e.user_id,role:e.role,max_budget_in_team:e.max_budget_in_team,tpm_limit:e.tpm_limit,rpm_limit:e.rpm_limit};console.log("Updating member with values:",t),A.ZP.destroy(),await (0,S.teamMemberUpdateCall)(T,w,t),I.Z.success("Team member updated successfully"),ed(!1);let i=await (0,S.teamInfoCall)(T,w);ei(i),ee(i)}catch(s){var t,i;let e="Failed to update team member";(null==s?void 0:null===(i=s.raw)||void 0===i?void 0:null===(t=i.detail)||void 0===t?void 0:t.includes("Assigning team admins is a premium feature"))?e="Assigning admins is an enterprise-only feature. Please upgrade your LiteLLM plan to enable this.":(null==s?void 0:s.message)&&(e=s.message),ed(!1),A.ZP.destroy(),I.Z.fromBackend(e),console.error("Error updating team member:",s)}},ew=async e=>{try{if(null==T)return;await (0,S.teamMemberDeleteCall)(T,w,e),I.Z.success("Team member removed successfully");let t=await (0,S.teamInfoCall)(T,w);ei(t),ee(t)}catch(e){I.Z.fromBackend("Failed to remove team member"),console.error("Error removing team member:",e)}},eM=async e=>{try{if(!T)return;let t={};try{t=e.metadata?JSON.parse(e.metadata):{}}catch(e){I.Z.fromBackend("Invalid JSON in metadata field");return}let i=e=>null==e||"string"==typeof e&&""===e.trim()||"number"==typeof e&&Number.isNaN(e)?null:e,s={team_id:w,team_alias:e.team_alias,models:e.models,tpm_limit:i(e.tpm_limit),rpm_limit:i(e.rpm_limit),max_budget:e.max_budget,budget_duration:e.budget_duration,metadata:{...t,guardrails:e.guardrails||[],logging:e.logging_settings||[]},organization_id:e.organization_id};void 0!==e.team_member_budget&&(s.team_member_budget=Number(e.team_member_budget)),void 0!==e.team_member_key_duration&&(s.team_member_key_duration=e.team_member_key_duration),(void 0!==e.team_member_tpm_limit||void 0!==e.team_member_rpm_limit)&&(s.team_member_tpm_limit=i(e.team_member_tpm_limit),s.team_member_rpm_limit=i(e.team_member_rpm_limit));let{servers:l,accessGroups:r}=e.mcp_servers_and_groups||{servers:[],accessGroups:[]},a=e.mcp_tool_permissions||{};(l&&l.length>0||r&&r.length>0||Object.keys(a).length>0)&&(s.object_permission={},l&&l.length>0&&(s.object_permission.mcp_servers=l),r&&r.length>0&&(s.object_permission.mcp_access_groups=r),Object.keys(a).length>0&&(s.object_permission.mcp_tool_permissions=a)),delete e.mcp_servers_and_groups,delete e.mcp_tool_permissions,await (0,S.teamUpdateCall)(T,s),I.Z.success("Team settings updated successfully"),ex(!1),ey()}catch(e){console.error("Error updating team:",e)}};if(es)return(0,s.jsx)("div",{className:"p-4",children:"Loading..."});if(!(null==et?void 0:et.team_info))return(0,s.jsx)("div",{className:"p-4",children:"Team not found"});let{team_info:eT}=et,eS=async(e,t)=>{await (0,f.vQ)(e)&&(ev(e=>({...e,[t]:!0})),setTimeout(()=>{ev(e=>({...e,[t]:!1}))},2e3))};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(a.zx,{icon:B.Z,variant:"light",onClick:M,className:"mb-4",children:"Back to Teams"}),(0,s.jsx)(a.Dx,{children:eT.team_alias}),(0,s.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,s.jsx)(a.xv,{className:"text-gray-500 font-mono",children:eT.team_id}),(0,s.jsx)(N.ZP,{type:"text",size:"small",icon:eb["team-id"]?(0,s.jsx)(Q.Z,{size:12}):(0,s.jsx)(W.Z,{size:12}),onClick:()=>eS(eT.team_id,"team-id"),className:"left-2 z-10 transition-all duration-200 ".concat(eb["team-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")})]})]})}),(0,s.jsxs)(a.v0,{defaultIndex:H?3:0,children:[(0,s.jsx)(a.td,{className:"mb-4",children:[(0,s.jsx)(a.OK,{children:"Overview"},"overview"),...eZ?[(0,s.jsx)(a.OK,{children:"Members"},"members"),(0,s.jsx)(a.OK,{children:"Member Permissions"},"member-permissions"),(0,s.jsx)(a.OK,{children:"Settings"},"settings")]:[]]}),(0,s.jsxs)(a.nP,{children:[(0,s.jsx)(a.x4,{children:(0,s.jsxs)(a.rj,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.xv,{children:"Budget Status"}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)(a.Dx,{children:["$",(0,f.pw)(eT.spend,4)]}),(0,s.jsxs)(a.xv,{children:["of ",null===eT.max_budget?"Unlimited":"$".concat((0,f.pw)(eT.max_budget,4))]}),eT.budget_duration&&(0,s.jsxs)(a.xv,{className:"text-gray-500",children:["Reset: ",eT.budget_duration]}),(0,s.jsx)("br",{}),eT.team_member_budget_table&&(0,s.jsxs)(a.xv,{className:"text-gray-500",children:["Team Member Budget: $",(0,f.pw)(eT.team_member_budget_table.max_budget,4)]})]})]}),(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.xv,{children:"Rate Limits"}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)(a.xv,{children:["TPM: ",eT.tpm_limit||"Unlimited"]}),(0,s.jsxs)(a.xv,{children:["RPM: ",eT.rpm_limit||"Unlimited"]}),eT.max_parallel_requests&&(0,s.jsxs)(a.xv,{children:["Max Parallel Requests: ",eT.max_parallel_requests]})]})]}),(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.xv,{children:"Models"}),(0,s.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:0===eT.models.length?(0,s.jsx)(a.Ct,{color:"red",children:"All proxy models"}):eT.models.map((e,t)=>(0,s.jsx)(a.Ct,{color:"red",children:e},t))})]}),(0,s.jsxs)(a.Zb,{children:[(0,s.jsx)(a.xv,{className:"font-semibold text-gray-900",children:"Virtual Keys"}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)(a.xv,{children:["User Keys: ",et.keys.filter(e=>e.user_id).length]}),(0,s.jsxs)(a.xv,{children:["Service Account Keys: ",et.keys.filter(e=>!e.user_id).length]}),(0,s.jsxs)(a.xv,{className:"text-gray-500",children:["Total: ",et.keys.length]})]})]}),(0,s.jsx)(V.Z,{objectPermission:eT.object_permission,variant:"card",accessToken:T}),(0,s.jsx)(J.Z,{loggingConfigs:(null===(t=eT.metadata)||void 0===t?void 0:t.logging)||[],disabledCallbacks:[],variant:"card"})]})}),(0,s.jsx)(a.x4,{children:(0,s.jsx)(Z,{teamData:et,canEditTeam:eZ,handleMemberDelete:ew,setSelectedEditMember:ec,setIsEditMemberModalVisible:ed,setIsAddMemberModalVisible:ea})}),eZ&&(0,s.jsx)(a.x4,{children:(0,s.jsx)(E,{teamId:w,accessToken:T,canEditTeam:eZ})}),(0,s.jsx)(a.x4,{children:(0,s.jsxs)(a.Zb,{className:"overflow-y-auto max-h-[65vh]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(a.Dx,{children:"Team Settings"}),eZ&&!eu&&(0,s.jsx)(a.zx,{onClick:()=>ex(!0),children:"Edit Settings"})]}),eu?(0,s.jsxs)(z.Z,{form:en,onFinish:eM,initialValues:{...eT,team_alias:eT.team_alias,models:eT.models,tpm_limit:eT.tpm_limit,rpm_limit:eT.rpm_limit,max_budget:eT.max_budget,budget_duration:eT.budget_duration,team_member_tpm_limit:null===(i=eT.team_member_budget_table)||void 0===i?void 0:i.tpm_limit,team_member_rpm_limit:null===(n=eT.team_member_budget_table)||void 0===n?void 0:n.rpm_limit,guardrails:(null===(m=eT.metadata)||void 0===m?void 0:m.guardrails)||[],metadata:eT.metadata?JSON.stringify((e=>{let{logging:t,...i}=e;return i})(eT.metadata),null,2):"",logging_settings:(null===(d=eT.metadata)||void 0===d?void 0:d.logging)||[],organization_id:eT.organization_id,vector_stores:(null===(o=eT.object_permission)||void 0===o?void 0:o.vector_stores)||[],mcp_servers:(null===(c=eT.object_permission)||void 0===c?void 0:c.mcp_servers)||[],mcp_access_groups:(null===(u=eT.object_permission)||void 0===u?void 0:u.mcp_access_groups)||[],mcp_servers_and_groups:{servers:(null===(x=eT.object_permission)||void 0===x?void 0:x.mcp_servers)||[],accessGroups:(null===(h=eT.object_permission)||void 0===h?void 0:h.mcp_access_groups)||[]},mcp_tool_permissions:(null===(_=eT.object_permission)||void 0===_?void 0:_.mcp_tool_permissions)||{}},layout:"vertical",children:[(0,s.jsx)(z.Z.Item,{label:"Team Name",name:"team_alias",rules:[{required:!0,message:"Please input a team name"}],children:(0,s.jsx)(D.default,{type:""})}),(0,s.jsx)(z.Z.Item,{label:"Models",name:"models",children:(0,s.jsxs)(F.default,{mode:"multiple",placeholder:"Select models",children:[(0,s.jsx)(F.default.Option,{value:"all-proxy-models",children:"All Proxy Models"},"all-proxy-models"),Array.from(new Set(L)).map((e,t)=>(0,s.jsx)(F.default.Option,{value:e,children:(0,O.W0)(e)},t))]})}),(0,s.jsx)(z.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,s.jsx)(r.Z,{step:.01,precision:2,style:{width:"100%"}})}),(0,s.jsx)(z.Z.Item,{label:"Team Member Budget (USD)",name:"team_member_budget",tooltip:"This is the individual budget for a user in the team.",children:(0,s.jsx)(r.Z,{step:.01,precision:2,style:{width:"100%"}})}),(0,s.jsx)(z.Z.Item,{label:"Team Member Key Duration (eg: 1d, 1mo)",name:"team_member_key_duration",tooltip:"Set a limit to the duration of a team member's key. Format: 30s (seconds), 30m (minutes), 30h (hours), 30d (days), 1mo (month)",children:(0,s.jsx)(a.oi,{placeholder:"e.g., 30d"})}),(0,s.jsx)(z.Z.Item,{label:"Team Member TPM Limit",name:"team_member_tpm_limit",tooltip:"Default tokens per minute limit for an individual team member. This limit applies to all requests the user makes within this team. Can be overridden per member.",children:(0,s.jsx)(r.Z,{step:1,style:{width:"100%"},placeholder:"e.g., 1000"})}),(0,s.jsx)(z.Z.Item,{label:"Team Member RPM Limit",name:"team_member_rpm_limit",tooltip:"Default requests per minute limit for an individual team member. This limit applies to all requests the user makes within this team. Can be overridden per member.",children:(0,s.jsx)(r.Z,{step:1,style:{width:"100%"},placeholder:"e.g., 100"})}),(0,s.jsx)(z.Z.Item,{label:"Reset Budget",name:"budget_duration",children:(0,s.jsxs)(F.default,{placeholder:"n/a",children:[(0,s.jsx)(F.default.Option,{value:"24h",children:"daily"}),(0,s.jsx)(F.default.Option,{value:"7d",children:"weekly"}),(0,s.jsx)(F.default.Option,{value:"30d",children:"monthly"})]})}),(0,s.jsx)(z.Z.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,s.jsx)(r.Z,{step:1,style:{width:"100%"}})}),(0,s.jsx)(z.Z.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,s.jsx)(r.Z,{step:1,style:{width:"100%"}})}),(0,s.jsx)(z.Z.Item,{label:(0,s.jsxs)("span",{children:["Guardrails"," ",(0,s.jsx)(b.Z,{title:"Setup your first guardrail",children:(0,s.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(p.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",help:"Select existing guardrails or enter new ones",children:(0,s.jsx)(F.default,{mode:"tags",placeholder:"Select or enter guardrails",options:ej.map(e=>({value:e,label:e}))})}),(0,s.jsx)(z.Z.Item,{label:"Vector Stores",name:"vector_stores",children:(0,s.jsx)(q.Z,{onChange:e=>en.setFieldValue("vector_stores",e),value:en.getFieldValue("vector_stores"),accessToken:T||"",placeholder:"Select vector stores"})}),(0,s.jsx)(z.Z.Item,{label:"Allowed Pass Through Routes",name:"allowed_passthrough_routes",children:(0,s.jsx)(X.Z,{onChange:e=>en.setFieldValue("allowed_passthrough_routes",e),value:en.getFieldValue("allowed_passthrough_routes"),accessToken:T||"",placeholder:"Select pass through routes"})}),(0,s.jsx)(z.Z.Item,{label:"MCP Servers / Access Groups",name:"mcp_servers_and_groups",children:(0,s.jsx)(K.Z,{onChange:e=>en.setFieldValue("mcp_servers_and_groups",e),value:en.getFieldValue("mcp_servers_and_groups"),accessToken:T||"",placeholder:"Select MCP servers or access groups (optional)"})}),(0,s.jsx)(z.Z.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,s.jsx)(D.default,{type:"hidden"})}),(0,s.jsx)(z.Z.Item,{noStyle:!0,shouldUpdate:(e,t)=>e.mcp_servers_and_groups!==t.mcp_servers_and_groups||e.mcp_tool_permissions!==t.mcp_tool_permissions,children:()=>{var e;return(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(G.Z,{accessToken:T||"",selectedServers:(null===(e=en.getFieldValue("mcp_servers_and_groups"))||void 0===e?void 0:e.servers)||[],toolPermissions:en.getFieldValue("mcp_tool_permissions")||{},onChange:e=>en.setFieldsValue({mcp_tool_permissions:e})})})}}),(0,s.jsx)(z.Z.Item,{label:"Organization ID",name:"organization_id",children:(0,s.jsx)(D.default,{type:""})}),(0,s.jsx)(z.Z.Item,{label:"Logging Settings",name:"logging_settings",children:(0,s.jsx)($.Z,{value:en.getFieldValue("logging_settings"),onChange:e=>en.setFieldValue("logging_settings",e)})}),(0,s.jsx)(z.Z.Item,{label:"Metadata",name:"metadata",children:(0,s.jsx)(D.default.TextArea,{rows:10})}),(0,s.jsx)("div",{className:"sticky z-10 bg-white p-4 border-t border-gray-200 bottom-[-1.5rem] inset-x-[-1.5rem]",children:(0,s.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,s.jsx)(N.ZP,{htmlType:"button",onClick:()=>ex(!1),children:"Cancel"}),(0,s.jsx)(a.zx,{type:"submit",children:"Save Changes"})]})})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(a.xv,{className:"font-medium",children:"Team Name"}),(0,s.jsx)("div",{children:eT.team_alias})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.xv,{className:"font-medium",children:"Team ID"}),(0,s.jsx)("div",{className:"font-mono",children:eT.team_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.xv,{className:"font-medium",children:"Created At"}),(0,s.jsx)("div",{children:new Date(eT.created_at).toLocaleString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.xv,{className:"font-medium",children:"Models"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:eT.models.map((e,t)=>(0,s.jsx)(a.Ct,{color:"red",children:e},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.xv,{className:"font-medium",children:"Rate Limits"}),(0,s.jsxs)("div",{children:["TPM: ",eT.tpm_limit||"Unlimited"]}),(0,s.jsxs)("div",{children:["RPM: ",eT.rpm_limit||"Unlimited"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.xv,{className:"font-medium",children:"Team Budget"}),(0,s.jsxs)("div",{children:["Max Budget:"," ",null!==eT.max_budget?"$".concat((0,f.pw)(eT.max_budget,4)):"No Limit"]}),(0,s.jsxs)("div",{children:["Budget Reset: ",eT.budget_duration||"Never"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(a.xv,{className:"font-medium",children:["Team Member Settings"," ",(0,s.jsx)(b.Z,{title:"These are limits on individual team members",children:(0,s.jsx)(p.Z,{style:{marginLeft:"4px"}})})]}),(0,s.jsxs)("div",{children:["Max Budget: ",(null===(g=eT.team_member_budget_table)||void 0===g?void 0:g.max_budget)||"No Limit"]}),(0,s.jsxs)("div",{children:["Key Duration: ",(null===(v=eT.metadata)||void 0===v?void 0:v.team_member_key_duration)||"No Limit"]}),(0,s.jsxs)("div",{children:["TPM Limit: ",(null===(j=eT.team_member_budget_table)||void 0===j?void 0:j.tpm_limit)||"No Limit"]}),(0,s.jsxs)("div",{children:["RPM Limit: ",(null===(y=eT.team_member_budget_table)||void 0===y?void 0:y.rpm_limit)||"No Limit"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.xv,{className:"font-medium",children:"Organization ID"}),(0,s.jsx)("div",{children:eT.organization_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.xv,{className:"font-medium",children:"Status"}),(0,s.jsx)(a.Ct,{color:eT.blocked?"red":"green",children:eT.blocked?"Blocked":"Active"})]}),(0,s.jsx)(V.Z,{objectPermission:eT.object_permission,variant:"inline",className:"pt-4 border-t border-gray-200",accessToken:T}),(0,s.jsx)(J.Z,{loggingConfigs:(null===(k=eT.metadata)||void 0===k?void 0:k.logging)||[],disabledCallbacks:[],variant:"inline",className:"pt-4 border-t border-gray-200"})]})]})})]})]}),(0,s.jsx)(R.Z,{visible:em,onCancel:()=>ed(!1),onSubmit:ek,initialData:eo,mode:"edit",config:{title:"Edit Member",showEmail:!0,showUserId:!0,roleOptions:[{label:"Admin",value:"admin"},{label:"User",value:"user"}],additionalFields:[{name:"max_budget_in_team",label:(0,s.jsxs)("span",{children:["Team Member Budget (USD)"," ",(0,s.jsx)(b.Z,{title:"Maximum amount in USD this member can spend within this team. This is separate from any global user budget limits",children:(0,s.jsx)(p.Z,{style:{marginLeft:"4px"}})})]}),type:"numerical",step:.01,min:0,placeholder:"Budget limit for this member within this team"},{name:"tpm_limit",label:(0,s.jsxs)("span",{children:["Team Member TPM Limit"," ",(0,s.jsx)(b.Z,{title:"Maximum tokens per minute this member can use within this team. This is separate from any global user TPM limit",children:(0,s.jsx)(p.Z,{style:{marginLeft:"4px"}})})]}),type:"numerical",step:1,min:0,placeholder:"Tokens per minute limit for this member in this team"},{name:"rpm_limit",label:(0,s.jsxs)("span",{children:["Team Member RPM Limit"," ",(0,s.jsx)(b.Z,{title:"Maximum requests per minute this member can make within this team. This is separate from any global user RPM limit",children:(0,s.jsx)(p.Z,{style:{marginLeft:"4px"}})})]}),type:"numerical",step:1,min:0,placeholder:"Requests per minute limit for this member in this team"}]}}),(0,s.jsx)(U.Z,{isVisible:er,onCancel:()=>ea(!1),onSubmit:eN,accessToken:T})]})}}}]);