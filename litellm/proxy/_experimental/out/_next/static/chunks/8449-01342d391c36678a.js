"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8449],{48449:function(e,s,l){l.d(s,{Z:function(){return er}});var t=l(57437),i=l(2265),r=l(57840),n=l(99376),o=l(10032),a=l(4260),c=l(5545),d=l(22116);l(25512);var u=l(78489),m=l(94789),_=l(12514),h=l(12485),g=l(18135),x=l(35242),p=l(29706),f=l(77991),j=l(21626),y=l(97214),S=l(28241),v=l(58834),I=l(69552),C=l(71876),Z=l(37592),b=l(56522),w=l(19250),k=l(9114),N=l(85968);let E={google:"https://artificialanalysis.ai/img/logos/google_small.svg",microsoft:"https://upload.wikimedia.org/wikipedia/commons/a/a8/Microsoft_Azure_Logo.svg",okta:"https://www.okta.com/sites/default/files/Okta_Logo_BrightBlue_Medium.png",generic:""},O={google:{envVarMap:{google_client_id:"GOOGLE_CLIENT_ID",google_client_secret:"GOOGLE_CLIENT_SECRET"},fields:[{label:"Google Client ID",name:"google_client_id"},{label:"Google Client Secret",name:"google_client_secret"}]},microsoft:{envVarMap:{microsoft_client_id:"MICROSOFT_CLIENT_ID",microsoft_client_secret:"MICROSOFT_CLIENT_SECRET",microsoft_tenant:"MICROSOFT_TENANT"},fields:[{label:"Microsoft Client ID",name:"microsoft_client_id"},{label:"Microsoft Client Secret",name:"microsoft_client_secret"},{label:"Microsoft Tenant",name:"microsoft_tenant"}]},okta:{envVarMap:{generic_client_id:"GENERIC_CLIENT_ID",generic_client_secret:"GENERIC_CLIENT_SECRET",generic_authorization_endpoint:"GENERIC_AUTHORIZATION_ENDPOINT",generic_token_endpoint:"GENERIC_TOKEN_ENDPOINT",generic_userinfo_endpoint:"GENERIC_USERINFO_ENDPOINT"},fields:[{label:"Generic Client ID",name:"generic_client_id"},{label:"Generic Client Secret",name:"generic_client_secret"},{label:"Authorization Endpoint",name:"generic_authorization_endpoint",placeholder:"https://your-domain/authorize"},{label:"Token Endpoint",name:"generic_token_endpoint",placeholder:"https://your-domain/token"},{label:"Userinfo Endpoint",name:"generic_userinfo_endpoint",placeholder:"https://your-domain/userinfo"}]},generic:{envVarMap:{generic_client_id:"GENERIC_CLIENT_ID",generic_client_secret:"GENERIC_CLIENT_SECRET",generic_authorization_endpoint:"GENERIC_AUTHORIZATION_ENDPOINT",generic_token_endpoint:"GENERIC_TOKEN_ENDPOINT",generic_userinfo_endpoint:"GENERIC_USERINFO_ENDPOINT"},fields:[{label:"Generic Client ID",name:"generic_client_id"},{label:"Generic Client Secret",name:"generic_client_secret"},{label:"Authorization Endpoint",name:"generic_authorization_endpoint"},{label:"Token Endpoint",name:"generic_token_endpoint"},{label:"Userinfo Endpoint",name:"generic_userinfo_endpoint"}]}};var T=e=>{let{isAddSSOModalVisible:s,isInstructionsModalVisible:l,handleAddSSOOk:r,handleAddSSOCancel:n,handleShowInstructions:u,handleInstructionsOk:m,handleInstructionsCancel:_,form:h,accessToken:g,ssoConfigured:x=!1}=e,[p,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{if(s&&g)try{let s=await (0,w.getSSOSettings)(g);if(console.log("Raw SSO data received:",s),s&&s.values){console.log("SSO values:",s.values),console.log("user_email from API:",s.values.user_email);let t=null;if(s.values.google_client_id)t="google";else if(s.values.microsoft_client_id)t="microsoft";else if(s.values.generic_client_id){var e,l;t=(null===(e=s.values.generic_authorization_endpoint)||void 0===e?void 0:e.includes("okta"))||(null===(l=s.values.generic_authorization_endpoint)||void 0===l?void 0:l.includes("auth0"))?"okta":"generic"}let i={sso_provider:t,proxy_base_url:s.values.proxy_base_url,user_email:s.values.user_email,...s.values};console.log("Setting form values:",i),h.resetFields(),setTimeout(()=>{h.setFieldsValue(i),console.log("Form values set, current form values:",h.getFieldsValue())},100)}}catch(e){console.error("Failed to load SSO settings:",e)}})()},[s,g,h]);let j=async e=>{if(!g){k.Z.fromBackend("No access token available");return}try{await (0,w.updateSSOSettings)(g,e),u(e)}catch(e){k.Z.fromBackend("Failed to save SSO settings: "+(0,N.O)(e))}},y=async()=>{if(!g){k.Z.fromBackend("No access token available");return}try{await (0,w.updateSSOSettings)(g,{google_client_id:null,google_client_secret:null,microsoft_client_id:null,microsoft_client_secret:null,microsoft_tenant:null,generic_client_id:null,generic_client_secret:null,generic_authorization_endpoint:null,generic_token_endpoint:null,generic_userinfo_endpoint:null,proxy_base_url:null,user_email:null,sso_provider:null}),h.resetFields(),f(!1),r(),k.Z.success("SSO settings cleared successfully")}catch(e){console.error("Failed to clear SSO settings:",e),k.Z.fromBackend("Failed to clear SSO settings")}},S=e=>{let s=O[e];return s?s.fields.map(e=>(0,t.jsx)(o.Z.Item,{label:e.label,name:e.name,rules:[{required:!0,message:"Please enter the ".concat(e.label.toLowerCase())}],children:e.name.includes("client")?(0,t.jsx)(a.default.Password,{}):(0,t.jsx)(b.o,{placeholder:e.placeholder})},e.name)):null};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{title:x?"Edit SSO Settings":"Add SSO",visible:s,width:800,footer:null,onOk:r,onCancel:n,children:(0,t.jsxs)(o.Z,{form:h,onFinish:j,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z.Item,{label:"SSO Provider",name:"sso_provider",rules:[{required:!0,message:"Please select an SSO provider"}],children:(0,t.jsx)(Z.default,{children:Object.entries(E).map(e=>{let[s,l]=e;return(0,t.jsx)(Z.default.Option,{value:s,children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"4px 0"},children:[l&&(0,t.jsx)("img",{src:l,alt:s,style:{height:24,width:24,marginRight:12,objectFit:"contain"}}),(0,t.jsxs)("span",{children:["okta"===s.toLowerCase()?"Okta / Auth0":s.charAt(0).toUpperCase()+s.slice(1)," ","SSO"]})]})},s)})})}),(0,t.jsx)(o.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.sso_provider!==s.sso_provider,children:e=>{let{getFieldValue:s}=e,l=s("sso_provider");return l?S(l):null}}),(0,t.jsx)(o.Z.Item,{label:"Proxy Admin Email",name:"user_email",rules:[{required:!0,message:"Please enter the email of the proxy admin"}],children:(0,t.jsx)(b.o,{})}),(0,t.jsx)(o.Z.Item,{label:"Proxy Base URL",name:"proxy_base_url",normalize:e=>null==e?void 0:e.trim(),rules:[{required:!0,message:"Please enter the proxy base url"},{pattern:/^https?:\/\/.+/,message:"URL must start with http:// or https://"},{validator:(e,s)=>s&&/^https?:\/\/.+/.test(s)&&s.endsWith("/")?Promise.reject("URL must not end with a trailing slash"):Promise.resolve()}],children:(0,t.jsx)(b.o,{placeholder:"https://example.com"})})]}),(0,t.jsxs)("div",{style:{textAlign:"right",marginTop:"10px",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"8px"},children:[x&&(0,t.jsx)(c.ZP,{onClick:()=>f(!0),style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#5558eb",e.currentTarget.style.borderColor="#5558eb"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1",e.currentTarget.style.borderColor="#6366f1"},children:"Clear"}),(0,t.jsx)(c.ZP,{htmlType:"submit",children:"Save"})]})]})}),(0,t.jsxs)(d.Z,{title:"Confirm Clear SSO Settings",visible:p,onOk:y,onCancel:()=>f(!1),okText:"Yes, Clear",cancelText:"Cancel",okButtonProps:{danger:!0,style:{backgroundColor:"#dc2626",borderColor:"#dc2626"}},children:[(0,t.jsx)("p",{children:"Are you sure you want to clear all SSO settings? This action cannot be undone."}),(0,t.jsx)("p",{children:"Users will no longer be able to login using SSO after this change."})]}),(0,t.jsxs)(d.Z,{title:"SSO Setup Instructions",visible:l,width:800,footer:null,onOk:m,onCancel:_,children:[(0,t.jsx)("p",{children:"Follow these steps to complete the SSO setup:"}),(0,t.jsx)(b.x,{className:"mt-2",children:"1. DO NOT Exit this TAB"}),(0,t.jsx)(b.x,{className:"mt-2",children:"2. Open a new tab, visit your proxy base url"}),(0,t.jsx)(b.x,{className:"mt-2",children:"3. Confirm your SSO is configured correctly and you can login on the new Tab"}),(0,t.jsx)(b.x,{className:"mt-2",children:"4. If Step 3 is successful, you can close this tab"}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(c.ZP,{onClick:m,children:"Done"})})]})]})},A=l(67982),P=l(67101),U=l(84264),R=l(49566),F=l(96761),M=l(29233),L=l(62272),G=l(23639),B=l(92403),D=l(29271),z=l(34419),q=e=>{let{accessToken:s,userID:l,proxySettings:r}=e,[n]=o.Z.useForm(),[a,c]=(0,i.useState)(!1),[d,h]=(0,i.useState)(null),[g,x]=(0,i.useState)("<your_proxy_base_url>");(0,i.useEffect)(()=>{let e="<your_proxy_base_url>";x(r&&r.PROXY_BASE_URL&&void 0!==r.PROXY_BASE_URL?r.PROXY_BASE_URL:window.location.origin)},[r]);let p="".concat(g,"/scim/v2"),f=async e=>{if(!s||!l){k.Z.fromBackend("You need to be logged in to create a SCIM token");return}try{c(!0);let t={key_alias:e.key_alias||"SCIM Access Token",team_id:null,models:[],allowed_routes:["/scim/*"]},i=await (0,w.keyCreateCall)(s,l,t);h(i),k.Z.success("SCIM token created successfully")}catch(e){console.error("Error creating SCIM token:",e),k.Z.fromBackend("Failed to create SCIM token: "+(0,N.O)(e))}finally{c(!1)}};return(0,t.jsx)(P.Z,{numItems:1,children:(0,t.jsxs)(_.Z,{children:[(0,t.jsx)("div",{className:"flex items-center mb-4",children:(0,t.jsx)(F.Z,{children:"SCIM Configuration"})}),(0,t.jsx)(U.Z,{className:"text-gray-600",children:"System for Cross-domain Identity Management (SCIM) allows you to automatically provision and manage users and groups in LiteLLM."}),(0,t.jsx)(A.Z,{}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-700 mr-2",children:"1"}),(0,t.jsxs)(F.Z,{className:"text-lg flex items-center",children:[(0,t.jsx)(L.Z,{className:"h-5 w-5 mr-2"}),"SCIM Tenant URL"]})]}),(0,t.jsx)(U.Z,{className:"text-gray-600 mb-3",children:"Use this URL in your identity provider SCIM integration settings."}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(R.Z,{value:p,disabled:!0,className:"flex-grow"}),(0,t.jsx)(M.CopyToClipboard,{text:p,onCopy:()=>k.Z.success("URL copied to clipboard"),children:(0,t.jsxs)(u.Z,{variant:"primary",className:"ml-2 flex items-center",children:[(0,t.jsx)(G.Z,{className:"h-4 w-4 mr-1"}),"Copy"]})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-700 mr-2",children:"2"}),(0,t.jsxs)(F.Z,{className:"text-lg flex items-center",children:[(0,t.jsx)(B.Z,{className:"h-5 w-5 mr-2"}),"Authentication Token"]})]}),(0,t.jsx)(m.Z,{title:"Using SCIM",color:"blue",className:"mb-4",children:"You need a SCIM token to authenticate with the SCIM API. Create one below and use it in your SCIM provider configuration."}),d?(0,t.jsxs)(_.Z,{className:"border border-yellow-300 bg-yellow-50",children:[(0,t.jsxs)("div",{className:"flex items-center mb-2 text-yellow-800",children:[(0,t.jsx)(D.Z,{className:"h-5 w-5 mr-2"}),(0,t.jsx)(F.Z,{className:"text-lg text-yellow-800",children:"Your SCIM Token"})]}),(0,t.jsx)(U.Z,{className:"text-yellow-800 mb-4 font-medium",children:"Make sure to copy this token now. You will not be able to see it again."}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(R.Z,{value:d.key,className:"flex-grow mr-2 bg-white",type:"password",disabled:!0}),(0,t.jsx)(M.CopyToClipboard,{text:d.key,onCopy:()=>k.Z.success("Token copied to clipboard"),children:(0,t.jsxs)(u.Z,{variant:"primary",className:"flex items-center",children:[(0,t.jsx)(G.Z,{className:"h-4 w-4 mr-1"}),"Copy"]})})]}),(0,t.jsxs)(u.Z,{className:"mt-4 flex items-center",variant:"secondary",onClick:()=>h(null),children:[(0,t.jsx)(z.Z,{className:"h-4 w-4 mr-1"}),"Create Another Token"]})]}):(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,t.jsxs)(o.Z,{form:n,onFinish:f,layout:"vertical",children:[(0,t.jsx)(o.Z.Item,{name:"key_alias",label:"Token Name",rules:[{required:!0,message:"Please enter a name for your token"}],children:(0,t.jsx)(R.Z,{placeholder:"SCIM Access Token"})}),(0,t.jsx)(o.Z.Item,{children:(0,t.jsxs)(u.Z,{variant:"primary",type:"submit",loading:a,className:"flex items-center",children:[(0,t.jsx)(B.Z,{className:"h-4 w-4 mr-1"}),"Create SCIM Token"]})})]})})]})]})]})})},V=e=>{let{accessToken:s,onSuccess:l}=e,[r]=o.Z.useForm(),[n,a]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{if(s)try{let e=await (0,w.getSSOSettings)(s);if(e&&e.values){let s=e.values.ui_access_mode,l={};s&&"object"==typeof s?l={ui_access_mode_type:s.type,restricted_sso_group:s.restricted_sso_group,sso_group_jwt_field:s.sso_group_jwt_field}:"string"==typeof s&&(l={ui_access_mode_type:s,restricted_sso_group:e.values.restricted_sso_group,sso_group_jwt_field:e.values.team_ids_jwt_field||e.values.sso_group_jwt_field}),r.setFieldsValue(l)}}catch(e){console.error("Failed to load UI access settings:",e)}})()},[s,r]);let d=async e=>{if(!s){k.Z.fromBackend("No access token available");return}a(!0);try{let t;t="all_authenticated_users"===e.ui_access_mode_type?{ui_access_mode:"none"}:{ui_access_mode:{type:e.ui_access_mode_type,restricted_sso_group:e.restricted_sso_group,sso_group_jwt_field:e.sso_group_jwt_field}},await (0,w.updateSSOSettings)(s,t),l()}catch(e){console.error("Failed to save UI access settings:",e),k.Z.fromBackend("Failed to save UI access settings")}finally{a(!1)}};return(0,t.jsxs)("div",{style:{padding:"16px"},children:[(0,t.jsx)("div",{style:{marginBottom:"16px"},children:(0,t.jsx)(b.x,{style:{fontSize:"14px",color:"#6b7280"},children:"Configure who can access the UI interface and how group information is extracted from JWT tokens."})}),(0,t.jsxs)(o.Z,{form:r,onFinish:d,layout:"vertical",children:[(0,t.jsx)(o.Z.Item,{label:"UI Access Mode",name:"ui_access_mode_type",tooltip:"Controls who can access the UI interface",children:(0,t.jsxs)(Z.default,{placeholder:"Select access mode",children:[(0,t.jsx)(Z.default.Option,{value:"all_authenticated_users",children:"All Authenticated Users"}),(0,t.jsx)(Z.default.Option,{value:"restricted_sso_group",children:"Restricted SSO Group"})]})}),(0,t.jsx)(o.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.ui_access_mode_type!==s.ui_access_mode_type,children:e=>{let{getFieldValue:s}=e;return"restricted_sso_group"===s("ui_access_mode_type")?(0,t.jsx)(o.Z.Item,{label:"Restricted SSO Group",name:"restricted_sso_group",rules:[{required:!0,message:"Please enter the restricted SSO group"}],children:(0,t.jsx)(b.o,{placeholder:"ui-access-group"})}):null}}),(0,t.jsx)(o.Z.Item,{label:"SSO Group JWT Field",name:"sso_group_jwt_field",tooltip:"JWT field name that contains team/group information. Use dot notation to access nested fields.",children:(0,t.jsx)(b.o,{placeholder:"groups"})}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"16px"},children:(0,t.jsx)(c.ZP,{type:"primary",htmlType:"submit",loading:n,style:{backgroundColor:"#6366f1",borderColor:"#6366f1"},children:"Update UI Access Control"})})]})]})},Y=l(12363),W=l(55584),J=l(29827),K=l(21770);let X=(0,l(90246).n)("uiSettings"),H=e=>{let s=(0,J.NL)();return(0,K.D)({mutationFn:async s=>{if(!e)throw Error("Access token is required");return(0,w.updateUiSettings)(e,s)},onSuccess:()=>{s.invalidateQueries({queryKey:X.all})}})};var Q=l(39760),$=l(5945),ee=l(50337),es=l(51653),el=l(58760),et=l(63709);function ei(){var e,s,l;let{accessToken:i}=(0,Q.Z)(),{data:n,isLoading:o,isError:a,error:c}=(0,W.L)(i),{mutate:d,isPending:u,error:m}=H(i),_=null==n?void 0:n.field_schema,h=null==_?void 0:null===(e=_.properties)||void 0===e?void 0:e.disable_model_add_for_internal_users,g=!!(null!==(s=null==n?void 0:n.values)&&void 0!==s?s:{}).disable_model_add_for_internal_users;return(0,t.jsx)($.Z,{title:"UI Settings",children:o?(0,t.jsx)(ee.Z,{active:!0}):a?(0,t.jsx)(es.Z,{type:"error",message:"Could not load UI settings",description:c instanceof Error?c.message:void 0}):(0,t.jsxs)(el.Z,{direction:"vertical",size:"large",style:{width:"100%"},children:[(null==_?void 0:_.description)&&(0,t.jsx)(r.default.Paragraph,{style:{marginBottom:0},children:_.description}),m&&(0,t.jsx)(es.Z,{type:"error",message:"Could not update UI settings",description:m instanceof Error?m.message:void 0}),(0,t.jsxs)(el.Z,{align:"start",size:"middle",children:[(0,t.jsx)(et.Z,{checked:g,disabled:u,loading:u,onChange:e=>{d({disable_model_add_for_internal_users:e},{onSuccess:()=>{k.Z.success("UI settings updated successfully")},onError:e=>{k.Z.fromBackend(e)}})},"aria-label":null!==(l=null==h?void 0:h.description)&&void 0!==l?l:"Disable model add for internal users"}),(0,t.jsxs)(el.Z,{direction:"vertical",size:4,children:[(0,t.jsx)(r.default.Text,{strong:!0,children:"Disable model add for internal users"}),(null==h?void 0:h.description)&&(0,t.jsx)(r.default.Text,{type:"secondary",children:h.description})]})]})]})})}var er=e=>{let{searchParams:s,accessToken:l,userID:Z,showSSOBanner:b,premiumUser:N,proxySettings:E,userRole:O}=e,[A]=o.Z.useForm(),[P]=o.Z.useForm(),{Title:U,Paragraph:R}=r.default,[F,M]=(0,i.useState)(""),[L,G]=(0,i.useState)(null),[B,D]=(0,i.useState)(null),[z,W]=(0,i.useState)(!1),[J,K]=(0,i.useState)(!1),[X,H]=(0,i.useState)(!1),[Q,$]=(0,i.useState)(!1),[ee,es]=(0,i.useState)(!1),[el,et]=(0,i.useState)(!1),[er,en]=(0,i.useState)(!1),[eo,ea]=(0,i.useState)(!1),[ec,ed]=(0,i.useState)(!1),[eu,em]=(0,i.useState)(!1),[e_,eh]=(0,i.useState)([]),[eg,ex]=(0,i.useState)(null),[ep,ef]=(0,i.useState)(!1);(0,n.useRouter)();let[ej,ey]=(0,i.useState)(null);console.log=function(){};let eS=(0,Y.n)(),ev="All IP Addresses Allowed",eI=eS;eI+="/fallback/login";let eC=async()=>{if(l)try{let e=await (0,w.getSSOSettings)(l);if(console.log("SSO data:",e),e&&e.values){let s=e.values.google_client_id&&e.values.google_client_secret,l=e.values.microsoft_client_id&&e.values.microsoft_client_secret,t=e.values.generic_client_id&&e.values.generic_client_secret;ef(s||l||t)}else ef(!1)}catch(e){console.error("Error checking SSO configuration:",e),ef(!1)}},eZ=async()=>{try{if(!0!==N){k.Z.fromBackend("This feature is only available for premium users. Please upgrade your account.");return}if(l){let e=await (0,w.getAllowedIPs)(l);eh(e&&e.length>0?e:[ev])}else eh([ev])}catch(e){console.error("Error fetching allowed IPs:",e),k.Z.fromBackend("Failed to fetch allowed IPs ".concat(e)),eh([ev])}finally{!0===N&&en(!0)}},eb=async e=>{try{if(l){await (0,w.addAllowedIP)(l,e.ip);let s=await (0,w.getAllowedIPs)(l);eh(s),k.Z.success("IP address added successfully")}}catch(e){console.error("Error adding IP:",e),k.Z.fromBackend("Failed to add IP address ".concat(e))}finally{ea(!1)}},ew=async e=>{ex(e),ed(!0)},ek=async()=>{if(eg&&l)try{await (0,w.deleteAllowedIP)(l,eg);let e=await (0,w.getAllowedIPs)(l);eh(e.length>0?e:[ev]),k.Z.success("IP address deleted successfully")}catch(e){console.error("Error deleting IP:",e),k.Z.fromBackend("Failed to delete IP address ".concat(e))}finally{ed(!1),ex(null)}};(0,i.useEffect)(()=>{(async()=>{if(null!=l){let e=[],s=await (0,w.userGetAllUsersCall)(l,"proxy_admin_viewer");console.log("proxy admin viewer response: ",s);let t=s.users;console.log("proxy viewers response: ".concat(t)),t.forEach(s=>{e.push({user_role:s.user_role,user_id:s.user_id,user_email:s.user_email})}),console.log("proxy viewers: ".concat(t));let i=(await (0,w.userGetAllUsersCall)(l,"proxy_admin")).users;i.forEach(s=>{e.push({user_role:s.user_role,user_id:s.user_id,user_email:s.user_email})}),console.log("proxy admins: ".concat(i)),console.log("combinedList: ".concat(e)),G(e),ey(await (0,w.getPossibleUserRoles)(l))}})()},[l]),(0,i.useEffect)(()=>{eC()},[l,N]);let eN=()=>{em(!1)};return console.log("admins: ".concat(null==L?void 0:L.length)),(0,t.jsxs)("div",{className:"w-full m-2 mt-2 p-8",children:[(0,t.jsx)(U,{level:4,children:"Admin Access "}),(0,t.jsx)(R,{children:"Go to 'Internal Users' page to add other admins."}),(0,t.jsxs)(g.Z,{children:[(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(h.Z,{children:"Security Settings"}),(0,t.jsx)(h.Z,{children:"SCIM"}),(0,t.jsx)(h.Z,{children:"UI Settings"})]}),(0,t.jsxs)(f.Z,{children:[(0,t.jsxs)(p.Z,{children:[(0,t.jsxs)(_.Z,{children:[(0,t.jsx)(U,{level:4,children:" âœ¨ Security Settings"}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"1rem",marginLeft:"0.5rem"},children:[(0,t.jsx)("div",{children:(0,t.jsx)(u.Z,{style:{width:"150px"},onClick:()=>es(!0),children:ep?"Edit SSO Settings":"Add SSO"})}),(0,t.jsx)("div",{children:(0,t.jsx)(u.Z,{style:{width:"150px"},onClick:eZ,children:"Allowed IPs"})}),(0,t.jsx)("div",{children:(0,t.jsx)(u.Z,{style:{width:"150px"},onClick:()=>!0===N?em(!0):k.Z.fromBackend("Only premium users can configure UI access control"),children:"UI Access Control"})})]})]}),(0,t.jsxs)("div",{className:"flex justify-start mb-4",children:[(0,t.jsx)(T,{isAddSSOModalVisible:ee,isInstructionsModalVisible:el,handleAddSSOOk:()=>{es(!1),A.resetFields(),l&&N&&eC()},handleAddSSOCancel:()=>{es(!1),A.resetFields()},handleShowInstructions:e=>{es(!1),et(!0)},handleInstructionsOk:()=>{et(!1),l&&N&&eC()},handleInstructionsCancel:()=>{et(!1),l&&N&&eC()},form:A,accessToken:l,ssoConfigured:ep}),(0,t.jsx)(d.Z,{title:"Manage Allowed IP Addresses",width:800,visible:er,onCancel:()=>en(!1),footer:[(0,t.jsx)(u.Z,{className:"mx-1",onClick:()=>ea(!0),children:"Add IP Address"},"add"),(0,t.jsx)(u.Z,{onClick:()=>en(!1),children:"Close"},"close")],children:(0,t.jsxs)(j.Z,{children:[(0,t.jsx)(v.Z,{children:(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(I.Z,{children:"IP Address"}),(0,t.jsx)(I.Z,{className:"text-right",children:"Action"})]})}),(0,t.jsx)(y.Z,{children:e_.map((e,s)=>(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(S.Z,{children:e}),(0,t.jsx)(S.Z,{className:"text-right",children:e!==ev&&(0,t.jsx)(u.Z,{onClick:()=>ew(e),color:"red",size:"xs",children:"Delete"})})]},s))})]})}),(0,t.jsx)(d.Z,{title:"Add Allowed IP Address",visible:eo,onCancel:()=>ea(!1),footer:null,children:(0,t.jsxs)(o.Z,{onFinish:eb,children:[(0,t.jsx)(o.Z.Item,{name:"ip",rules:[{required:!0,message:"Please enter an IP address"}],children:(0,t.jsx)(a.default,{placeholder:"Enter IP address"})}),(0,t.jsx)(o.Z.Item,{children:(0,t.jsx)(c.ZP,{htmlType:"submit",children:"Add IP Address"})})]})}),(0,t.jsx)(d.Z,{title:"Confirm Delete",visible:ec,onCancel:()=>ed(!1),onOk:ek,footer:[(0,t.jsx)(u.Z,{className:"mx-1",onClick:()=>ek(),children:"Yes"},"delete"),(0,t.jsx)(u.Z,{onClick:()=>ed(!1),children:"Close"},"close")],children:(0,t.jsxs)("p",{children:["Are you sure you want to delete the IP address: ",eg,"?"]})}),(0,t.jsx)(d.Z,{title:"UI Access Control Settings",visible:eu,width:600,footer:null,onOk:eN,onCancel:()=>{em(!1)},children:(0,t.jsx)(V,{accessToken:l,onSuccess:()=>{eN(),k.Z.success("UI Access Control settings updated successfully")}})})]}),(0,t.jsxs)(m.Z,{title:"Login without SSO",color:"teal",children:["If you need to login without sso, you can access"," ",(0,t.jsxs)("a",{href:eI,target:"_blank",children:[(0,t.jsx)("b",{children:eI})," "]})]})]}),(0,t.jsx)(p.Z,{children:(0,t.jsx)(q,{accessToken:l,userID:Z,proxySettings:E})}),(0,t.jsx)(p.Z,{children:(0,t.jsx)(ei,{})})]})]})]})}}}]);