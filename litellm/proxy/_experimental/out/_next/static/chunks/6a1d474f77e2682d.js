(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,936190,e=>{"use strict";var t=e.i(843476),s=e.i(619273),a=e.i(266027),l=e.i(912598),r=e.i(166540),n=e.i(271645),i=e.i(592968);let o=e=>e>=.8?"text-green-600":"text-yellow-600",d=({entities:e})=>{let[s,a]=(0,n.useState)(!0),[l,r]=(0,n.useState)({});return e&&0!==e.length?(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center mb-2 cursor-pointer",onClick:()=>a(!s),children:[(0,t.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${s?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,t.jsxs)("h4",{className:"font-medium",children:["Detected Entities (",e.length,")"]})]}),s&&(0,t.jsx)("div",{className:"space-y-2",children:e.map((e,s)=>{let a=l[s]||!1;return(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>{r(e=>({...e,[s]:!e[s]}))},children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${a?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,t.jsx)("span",{className:"font-medium mr-2",children:e.entity_type}),(0,t.jsxs)("span",{className:`font-mono ${o(e.score)}`,children:["Score: ",e.score.toFixed(2)]})]}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["Position: ",e.start,"-",e.end]})]}),a&&(0,t.jsx)("div",{className:"p-3 border-t bg-white",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Entity Type:"}),(0,t.jsx)("span",{children:e.entity_type})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Position:"}),(0,t.jsxs)("span",{children:["Characters ",e.start,"-",e.end]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Confidence:"}),(0,t.jsx)("span",{className:o(e.score),children:e.score.toFixed(2)})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[e.recognition_metadata&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Recognizer:"}),(0,t.jsx)("span",{children:e.recognition_metadata.recognizer_name})]}),(0,t.jsxs)("div",{className:"flex overflow-hidden",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Identifier:"}),(0,t.jsx)("span",{className:"truncate text-xs font-mono",children:e.recognition_metadata.recognizer_identifier})]})]}),e.analysis_explanation&&(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Explanation:"}),(0,t.jsx)("span",{children:e.analysis_explanation})]})]})]})})]},s)})})]}):null},c=(e,s="slate")=>(0,t.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block ${{green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",blue:"bg-blue-50 text-blue-700",slate:"bg-slate-100 text-slate-800",amber:"bg-amber-100 text-amber-800"}[s]}`,children:e}),m=e=>e?c("detected","red"):c("not detected","slate"),x=({title:e,count:s,defaultOpen:a=!0,right:l,children:r})=>{let[i,o]=(0,n.useState)(a);return(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>o(e=>!e),children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${i?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,t.jsxs)("h5",{className:"font-medium",children:[e," ","number"==typeof s&&(0,t.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",s,")"]})]})]}),(0,t.jsx)("div",{children:l})]}),i&&(0,t.jsx)("div",{className:"p-3 border-t bg-white",children:r})]})},u=({label:e,children:s,mono:a})=>(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:e}),(0,t.jsx)("span",{className:a?"font-mono text-sm break-all":"",children:s})]}),p=()=>(0,t.jsx)("div",{className:"my-3 border-t"}),h=({response:e})=>{if(!e)return null;let s=e.outputs??e.output??[],a="GUARDRAIL_INTERVENED"===e.action?"red":"green",l=(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.guardrailCoverage?.textCharacters&&c(`text guarded ${e.guardrailCoverage.textCharacters.guarded??0}/${e.guardrailCoverage.textCharacters.total??0}`,"blue"),e.guardrailCoverage?.images&&c(`images guarded ${e.guardrailCoverage.images.guarded??0}/${e.guardrailCoverage.images.total??0}`,"blue")]}),r=e.usage&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.usage).map(([e,s])=>"number"==typeof s?(0,t.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 rounded-md text-xs font-medium",children:[e,": ",s]},e):null)});return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{label:"Action:",children:c(e.action??"N/A",a)}),e.actionReason&&(0,t.jsx)(u,{label:"Action Reason:",children:e.actionReason}),e.blockedResponse&&(0,t.jsx)(u,{label:"Blocked Response:",children:(0,t.jsx)("span",{className:"italic",children:e.blockedResponse})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{label:"Coverage:",children:l}),(0,t.jsx)(u,{label:"Usage:",children:r})]})]}),s.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{}),(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Outputs"}),(0,t.jsx)("div",{className:"space-y-2",children:s.map((e,s)=>(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,t.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:e.text??(0,t.jsx)("em",{children:"(non-text output)"})})},s))})]})]}),e.assessments?.length?(0,t.jsx)("div",{className:"space-y-3",children:e.assessments.map((e,s)=>{let a=(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.wordPolicy&&c("word","slate"),e.contentPolicy&&c("content","slate"),e.topicPolicy&&c("topic","slate"),e.sensitiveInformationPolicy&&c("sensitive-info","slate"),e.contextualGroundingPolicy&&c("contextual-grounding","slate"),e.automatedReasoningPolicy&&c("automated-reasoning","slate")]});return(0,t.jsxs)(x,{title:`Assessment #${s+1}`,defaultOpen:!0,right:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e.invocationMetrics?.guardrailProcessingLatency!=null&&c(`${e.invocationMetrics.guardrailProcessingLatency} ms`,"amber"),a]}),children:[e.wordPolicy&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{className:"font-medium mb-2",children:"Word Policy"}),(e.wordPolicy.customWords?.length??0)>0&&(0,t.jsx)(x,{title:"Custom Words",defaultOpen:!0,children:(0,t.jsx)("div",{className:"space-y-2",children:e.wordPolicy.customWords.map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[c(e.action??"N/A",e.detected?"red":"slate"),(0,t.jsx)("span",{className:"font-mono text-sm break-all",children:e.match})]}),m(e.detected)]},s))})}),(e.wordPolicy.managedWordLists?.length??0)>0&&(0,t.jsx)(x,{title:"Managed Word Lists",defaultOpen:!1,children:(0,t.jsx)("div",{className:"space-y-2",children:e.wordPolicy.managedWordLists.map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[c(e.action??"N/A",e.detected?"red":"slate"),(0,t.jsx)("span",{className:"font-mono text-sm break-all",children:e.match}),e.type&&c(e.type,"slate")]}),m(e.detected)]},s))})})]}),e.contentPolicy?.filters?.length?(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{className:"font-medium mb-2",children:"Content Policy"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,t.jsx)("th",{className:"py-1 pr-4",children:"Type"}),(0,t.jsx)("th",{className:"py-1 pr-4",children:"Action"}),(0,t.jsx)("th",{className:"py-1 pr-4",children:"Detected"}),(0,t.jsx)("th",{className:"py-1 pr-4",children:"Strength"}),(0,t.jsx)("th",{className:"py-1 pr-4",children:"Confidence"})]})}),(0,t.jsx)("tbody",{children:e.contentPolicy.filters.map((e,s)=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"py-1 pr-4",children:e.type??"â€”"}),(0,t.jsx)("td",{className:"py-1 pr-4",children:c(e.action??"â€”",e.detected?"red":"slate")}),(0,t.jsx)("td",{className:"py-1 pr-4",children:m(e.detected)}),(0,t.jsx)("td",{className:"py-1 pr-4",children:e.filterStrength??"â€”"}),(0,t.jsx)("td",{className:"py-1 pr-4",children:e.confidence??"â€”"})]},s))})]})})]}):null,e.contextualGroundingPolicy?.filters?.length?(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{className:"font-medium mb-2",children:"Contextual Grounding"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-left text-gray-600",children:[(0,t.jsx)("th",{className:"py-1 pr-4",children:"Type"}),(0,t.jsx)("th",{className:"py-1 pr-4",children:"Action"}),(0,t.jsx)("th",{className:"py-1 pr-4",children:"Detected"}),(0,t.jsx)("th",{className:"py-1 pr-4",children:"Score"}),(0,t.jsx)("th",{className:"py-1 pr-4",children:"Threshold"})]})}),(0,t.jsx)("tbody",{children:e.contextualGroundingPolicy.filters.map((e,s)=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"py-1 pr-4",children:e.type??"â€”"}),(0,t.jsx)("td",{className:"py-1 pr-4",children:c(e.action??"â€”",e.detected?"red":"slate")}),(0,t.jsx)("td",{className:"py-1 pr-4",children:m(e.detected)}),(0,t.jsx)("td",{className:"py-1 pr-4",children:e.score??"â€”"}),(0,t.jsx)("td",{className:"py-1 pr-4",children:e.threshold??"â€”"})]},s))})]})})]}):null,e.sensitiveInformationPolicy&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{className:"font-medium mb-2",children:"Sensitive Information"}),(e.sensitiveInformationPolicy.piiEntities?.length??0)>0&&(0,t.jsx)(x,{title:"PII Entities",defaultOpen:!0,children:(0,t.jsx)("div",{className:"space-y-2",children:e.sensitiveInformationPolicy.piiEntities.map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[c(e.action??"N/A",e.detected?"red":"slate"),e.type&&c(e.type,"slate"),(0,t.jsx)("span",{className:"font-mono text-xs break-all",children:e.match})]}),m(e.detected)]},s))})}),(e.sensitiveInformationPolicy.regexes?.length??0)>0&&(0,t.jsx)(x,{title:"Custom Regexes",defaultOpen:!1,children:(0,t.jsx)("div",{className:"space-y-2",children:e.sensitiveInformationPolicy.regexes.map((e,s)=>(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-2 bg-gray-50 rounded gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[c(e.action??"N/A",e.detected?"red":"slate"),(0,t.jsx)("span",{className:"font-medium",children:e.name??"regex"}),(0,t.jsx)("span",{className:"font-mono text-xs break-all",children:e.regex})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[m(e.detected),e.match&&(0,t.jsx)("span",{className:"font-mono text-xs break-all",children:e.match})]})]},s))})})]}),e.topicPolicy?.topics?.length?(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("h6",{className:"font-medium mb-2",children:"Topic Policy"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.topicPolicy.topics.map((e,s)=>(0,t.jsx)("div",{className:"px-3 py-1.5 bg-gray-50 rounded-md text-xs",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[c(e.action??"N/A",e.detected?"red":"slate"),(0,t.jsx)("span",{className:"font-medium",children:e.name??"topic"}),e.type&&c(e.type,"slate"),m(e.detected)]})},s))})]}):null,e.invocationMetrics&&(0,t.jsx)(x,{title:"Invocation Metrics",defaultOpen:!1,children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u,{label:"Latency (ms)",children:e.invocationMetrics.guardrailProcessingLatency??"â€”"}),(0,t.jsx)(u,{label:"Coverage:",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.invocationMetrics.guardrailCoverage?.textCharacters&&c(`text ${e.invocationMetrics.guardrailCoverage.textCharacters.guarded??0}/${e.invocationMetrics.guardrailCoverage.textCharacters.total??0}`,"blue"),e.invocationMetrics.guardrailCoverage?.images&&c(`images ${e.invocationMetrics.guardrailCoverage.images.guarded??0}/${e.invocationMetrics.guardrailCoverage.images.total??0}`,"blue")]})})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(u,{label:"Usage:",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.invocationMetrics.usage&&Object.entries(e.invocationMetrics.usage).map(([e,s])=>"number"==typeof s?(0,t.jsxs)("span",{className:"px-2 py-1 bg-slate-100 text-slate-800 rounded-md text-xs font-medium",children:[e,": ",s]},e):null)})})})]})}),e.automatedReasoningPolicy?.findings?.length?(0,t.jsx)(x,{title:"Automated Reasoning Findings",defaultOpen:!1,children:(0,t.jsx)("div",{className:"space-y-2",children:e.automatedReasoningPolicy.findings.map((e,s)=>(0,t.jsx)("pre",{className:"bg-gray-50 rounded p-2 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)},s))})}):null]},s)})}):null,(0,t.jsx)(x,{title:"Raw Bedrock Guardrail Response",defaultOpen:!1,children:(0,t.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)})})]})},g=(e,s="slate")=>(0,t.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block ${{green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",blue:"bg-blue-50 text-blue-700",slate:"bg-slate-100 text-slate-800",amber:"bg-amber-100 text-amber-800"}[s]}`,children:e}),f=({title:e,count:s,defaultOpen:a=!0,children:l})=>{let[r,i]=(0,n.useState)(a);return(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>i(e=>!e),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${r?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,t.jsxs)("h5",{className:"font-medium",children:[e," ","number"==typeof s&&(0,t.jsxs)("span",{className:"text-gray-500 font-normal",children:["(",s,")"]})]})]})}),r&&(0,t.jsx)("div",{className:"p-3 border-t bg-white",children:l})]})},j=({label:e,children:s,mono:a})=>(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:e}),(0,t.jsx)("span",{className:a?"font-mono text-sm break-all":"",children:s})]}),y=({response:e})=>{if(!e||"string"==typeof e)return"string"==typeof e&&e?(0,t.jsx)("div",{className:"bg-white rounded-lg border border-red-200 p-4",children:(0,t.jsxs)("div",{className:"text-red-800",children:[(0,t.jsx)("h5",{className:"font-medium mb-2",children:"Error"}),(0,t.jsx)("p",{className:"text-sm",children:e})]})}):null;let s=Array.isArray(e)?e:[];if(0===s.length)return(0,t.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,t.jsx)("div",{className:"text-gray-600 text-sm",children:"No detections found"})});let a=s.filter(e=>"pattern"===e.type),l=s.filter(e=>"blocked_word"===e.type),r=s.filter(e=>"category_keyword"===e.type),n=s.filter(e=>"BLOCK"===e.action).length,i=s.filter(e=>"MASK"===e.action).length,o=s.length;return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j,{label:"Total Detections:",children:(0,t.jsx)("span",{className:"font-semibold",children:o})}),(0,t.jsx)(j,{label:"Actions:",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[n>0&&g(`${n} blocked`,"red"),i>0&&g(`${i} masked`,"blue"),0===n&&0===i&&g("passed","green")]})})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(j,{label:"By Type:",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.length>0&&g(`${a.length} patterns`,"slate"),l.length>0&&g(`${l.length} keywords`,"slate"),r.length>0&&g(`${r.length} categories`,"slate")]})})})]})}),a.length>0&&(0,t.jsx)(f,{title:"Patterns Matched",count:a.length,defaultOpen:!0,children:(0,t.jsx)("div",{className:"space-y-2",children:a.map((e,s)=>(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsx)(j,{label:"Pattern:",children:e.pattern_name||"unknown"})}),(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsx)(j,{label:"Action:",children:g(e.action,"BLOCK"===e.action?"red":"blue")})})]})},s))})}),l.length>0&&(0,t.jsx)(f,{title:"Blocked Words Detected",count:l.length,defaultOpen:!0,children:(0,t.jsx)("div",{className:"space-y-2",children:l.map((e,s)=>(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(j,{label:"Keyword:",mono:!0,children:e.keyword||"unknown"}),e.description&&(0,t.jsx)(j,{label:"Description:",children:e.description})]}),(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsx)(j,{label:"Action:",children:g(e.action,"BLOCK"===e.action?"red":"blue")})})]})},s))})}),r.length>0&&(0,t.jsx)(f,{title:"Category Keywords Detected",count:r.length,defaultOpen:!0,children:(0,t.jsx)("div",{className:"space-y-2",children:r.map((e,s)=>(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded-md",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(j,{label:"Category:",children:e.category||"unknown"}),(0,t.jsx)(j,{label:"Keyword:",mono:!0,children:e.keyword||"unknown"}),e.severity&&(0,t.jsx)(j,{label:"Severity:",children:g(e.severity,"high"===e.severity?"red":"medium"===e.severity?"amber":"slate")})]}),(0,t.jsx)("div",{className:"space-y-1",children:(0,t.jsx)(j,{label:"Action:",children:g(e.action,"BLOCK"===e.action?"red":"blue")})})]})},s))})}),(0,t.jsx)(f,{title:"Raw Detection Data",defaultOpen:!1,children:(0,t.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(s,null,2)})})]})};var b=e.i(764205);let v=()=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,t.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:"#16A34A",strokeWidth:"1.5",fill:"#F0FDF4"}),(0,t.jsx)("path",{d:"M5 8l2 2 4-4",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),N=()=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[(0,t.jsx)("circle",{cx:"8",cy:"8",r:"7",stroke:"#DC2626",strokeWidth:"1.5",fill:"#FEF2F2"}),(0,t.jsx)("path",{d:"M6 6l4 4M10 6l-4 4",stroke:"#DC2626",strokeWidth:"1.5",strokeLinecap:"round"})]}),_=()=>(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:"animate-spin",children:[(0,t.jsx)("circle",{cx:"8",cy:"8",r:"6",stroke:"#D1D5DB",strokeWidth:"2"}),(0,t.jsx)("path",{d:"M8 2a6 6 0 0 1 6 6",stroke:"#6366F1",strokeWidth:"2",strokeLinecap:"round"})]}),w=({title:e,data:s,loading:a,error:l})=>{let[r,o]=(0,n.useState)(!1);return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>o(!r),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[a?(0,t.jsx)(_,{}):l?(0,t.jsx)(i.Tooltip,{title:l,children:(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"--"})}):s?.compliant?(0,t.jsx)(v,{}):(0,t.jsx)(N,{}),(0,t.jsx)("span",{className:"font-medium text-sm text-gray-900",children:e})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!a&&!l&&s&&(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-semibold uppercase ${s.compliant?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:s.compliant?"COMPLIANT":"NON-COMPLIANT"}),l&&(0,t.jsx)("span",{className:"px-2 py-0.5 rounded text-[11px] font-medium bg-gray-100 text-gray-500 border border-gray-200",children:"UNAVAILABLE"}),(0,t.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:`transition-transform ${r?"rotate-180":""}`,children:(0,t.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),r&&(0,t.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3",children:[a&&(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Checking compliance..."}),l&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:l}),s&&(0,t.jsx)("div",{className:"space-y-2",children:s.checks.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:e.passed?(0,t.jsx)(v,{}):(0,t.jsx)(N,{})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.check_name}),(0,t.jsx)("span",{className:"text-[10px] font-mono text-gray-400",children:e.article})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.detail})]})]},s))})]})]})},k=({accessToken:e,logEntry:s})=>{let[a,l]=(0,n.useState)(null),[r,i]=(0,n.useState)(null),[o,d]=(0,n.useState)(!1),[c,m]=(0,n.useState)(!1),[x,u]=(0,n.useState)(null),[p,h]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e||!s.request_id)return;let t={request_id:s.request_id,user_id:s.user,model:s.model,timestamp:s.startTime,guardrail_information:s.metadata?.guardrail_information};d(!0),u(null),(0,b.checkEuAiActCompliance)(e,t).then(l).catch(e=>u(e.message||"Failed to check EU AI Act compliance")).finally(()=>d(!1)),m(!0),h(null),(0,b.checkGdprCompliance)(e,t).then(i).catch(e=>h(e.message||"Failed to check GDPR compliance")).finally(()=>m(!1))},[e,s]),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Regulatory Compliance"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(w,{title:"EU AI Act",data:a,loading:o,error:x}),(0,t.jsx)(w,{title:"GDPR",data:r,loading:c,error:p})]})]})},S=new Set(["presidio","bedrock","litellm_content_filter"]),C=e=>Object.values(e.masked_entity_count||{}).reduce((e,t)=>e+("number"==typeof t?t:0),0),T=e=>"success"===(e.guardrail_status??"").toLowerCase(),L=e=>e.policy_template||e.guardrail_name,M=()=>(0,t.jsxs)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:[(0,t.jsx)("circle",{cx:"20",cy:"20",r:"20",fill:"#EEF2FF"}),(0,t.jsx)("path",{d:"M20 10l8 4v6c0 5.25-3.4 10.15-8 11.5C15.4 30.15 12 25.25 12 20v-6l8-4z",stroke:"#6366F1",strokeWidth:"1.5",fill:"none"}),(0,t.jsx)("path",{d:"M16 20l3 3 5-6",stroke:"#6366F1",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),D=({className:e})=>(0,t.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",className:e,children:[(0,t.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#16A34A",strokeWidth:"1.5",fill:"#F0FDF4"}),(0,t.jsx)("path",{d:"M7 11l3 3 5-6",stroke:"#16A34A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),z=({className:e})=>(0,t.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",className:e,children:[(0,t.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#DC2626",strokeWidth:"1.5",fill:"#FEF2F2"}),(0,t.jsx)("path",{d:"M8 8l6 6M14 8l-6 6",stroke:"#DC2626",strokeWidth:"1.5",strokeLinecap:"round"})]}),A=()=>(0,t.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:[(0,t.jsx)("circle",{cx:"11",cy:"11",r:"10",stroke:"#3B82F6",strokeWidth:"1.5",fill:"#EFF6FF"}),(0,t.jsx)("path",{d:"M9 7.5l6 3.5-6 3.5V7.5z",fill:"#3B82F6"})]}),I=()=>(0,t.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",children:(0,t.jsx)("circle",{cx:"11",cy:"11",r:"5",fill:"#9CA3AF"})}),E=({expanded:e})=>(0,t.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:`transition-transform ${e?"rotate-180":""}`,children:(0,t.jsx)("path",{d:"M6 8l4 4 4-4",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),R=()=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,t.jsx)("path",{d:"M8 2v8m0 0l-3-3m3 3l3-3M3 12h10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),O=({matchDetails:e})=>e&&0!==e.length?(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsxs)("h5",{className:"text-sm font-medium mb-2 text-gray-700",children:["Match Details (",e.length,")"]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b text-left text-gray-500",children:[(0,t.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Type"}),(0,t.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Method"}),(0,t.jsx)("th",{className:"pb-2 pr-4 font-medium",children:"Action"}),(0,t.jsx)("th",{className:"pb-2 font-medium",children:"Detail"})]})}),(0,t.jsx)("tbody",{children:e.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,t.jsx)("td",{className:"py-2 pr-4",children:e.type}),(0,t.jsx)("td",{className:"py-2 pr-4",children:(0,t.jsx)("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-700 rounded text-xs",children:e.detection_method??"-"})}),(0,t.jsx)("td",{className:"py-2 pr-4",children:(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${"BLOCK"===e.action_taken?"bg-red-100 text-red-800":"bg-blue-50 text-blue-700"}`,children:e.action_taken??"-"})}),(0,t.jsxs)("td",{className:"py-2 font-mono text-xs text-gray-600 break-all",children:[e.category?`[${e.category}] `:"",e.snippet??"-"]})]},s))})]})})]}):null,F=({response:e})=>{let[s,a]=(0,n.useState)(!1);return(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 cursor-pointer hover:bg-gray-100",onClick:()=>a(!s),children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(E,{expanded:s}),(0,t.jsx)("h5",{className:"font-medium text-sm ml-1",children:"Raw Guardrail Response"})]})}),s&&(0,t.jsx)("div",{className:"p-3 border-t bg-white",children:(0,t.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-x-auto",children:JSON.stringify(e,null,2)})})]})})},B=({entries:e})=>{let s=(0,n.useMemo)(()=>[...e].sort((e,t)=>(e.start_time??0)-(t.start_time??0)),[e]),a=(0,n.useMemo)(()=>{if(0===s.length)return[];let e=s[0].start_time,t=[];t.push({type:"request",label:"Request received",offsetMs:0});let a=s.filter(e=>"pre_call"===e.guardrail_mode),l=s.filter(e=>"post_call"===e.guardrail_mode||"logging_only"===e.guardrail_mode),r=s.filter(e=>"during_call"===e.guardrail_mode);for(let s of a){let a=Math.round((s.end_time-e)*1e3);t.push({type:"guardrail",label:`Pre-call guardrail: ${L(s)}`,offsetMs:a,status:T(s)?"PASSED":"FAILED",isSuccess:T(s)})}let n=a.length>0?Math.max(...a.map(e=>e.end_time)):e,i=Math.round((((l.length>0?Math.min(...l.map(e=>e.start_time)):void 0)??n+1)-e)*1e3);for(let s of(t.push({type:"llm",label:"LLM call",offsetMs:i}),r)){let a=Math.round((s.end_time-e)*1e3);t.push({type:"guardrail",label:`During-call guardrail: ${L(s)}`,offsetMs:a,status:T(s)?"PASSED":"FAILED",isSuccess:T(s)})}for(let s of l){let a=Math.round((s.end_time-e)*1e3);t.push({type:"guardrail",label:`Post-call guardrail: ${L(s)}`,offsetMs:a,status:T(s)?"PASSED":"FAILED",isSuccess:T(s)})}let o=Math.round((Math.max(...s.map(e=>e.end_time))-e)*1e3)+1;return t.push({type:"response",label:"Response returned",offsetMs:o}),t},[s]);return(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Request Lifecycle"}),(0,t.jsx)("div",{className:"relative",children:a.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-start gap-3 relative",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:"request"===e.type||"response"===e.type?(0,t.jsx)(I,{}):"llm"===e.type?(0,t.jsx)(A,{}):e.isSuccess?(0,t.jsx)(D,{}):(0,t.jsx)(z,{})}),s<a.length-1&&(0,t.jsx)("div",{className:"w-0.5 bg-gray-200 flex-grow",style:{minHeight:"24px"}})]}),(0,t.jsx)("div",{className:"pb-4 flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("span",{className:`text-sm ${"llm"===e.type?"text-blue-600 font-medium":"text-gray-900"}`,children:e.label}),e.status&&(0,t.jsx)("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold uppercase ${e.isSuccess?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 font-mono ml-auto flex-shrink-0",children:["T+",e.offsetMs,"ms"]})]})})]},s))})]})},P=({entry:e})=>{let s,[a,l]=(0,n.useState)(!1),r=T(e),o=C(e),c=L(e),m=(s=Math.round(1e3*e.duration),`${s}ms`),x=e.guardrail_mode.replace(/_/g,"-").toUpperCase(),u=(e=>{if(!T(e))return null;if(null!=e.risk_score)return e.risk_score;let t=C(e),s=e.patterns_checked??0,a=e.confidence_score??0;if(0===s&&0===a)return 0;let l=7*(s>0?t/s:0)+3*a;return t>0&&l<2&&(l=2),Math.min(10,Math.round(10*l)/10)})(e),p=e.guardrail_provider??"presidio",g=e.guardrail_response,f=Array.isArray(g)?g:[],j="bedrock"!==p||null===g||"object"!=typeof g||Array.isArray(g)?void 0:g,b=null!=e.patterns_checked?`${o}/${e.patterns_checked} matched`:o>0?`${o} matched`:null;return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>l(!a),children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:r?(0,t.jsx)(D,{}):(0,t.jsx)(z,{})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-0",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900 text-sm truncate",children:c}),(0,t.jsx)("span",{className:"px-2 py-0.5 border border-blue-200 bg-blue-50 text-blue-700 rounded text-[11px] font-semibold uppercase flex-shrink-0",children:x}),(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-semibold uppercase flex-shrink-0 ${r?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:r?"PASSED":"FAILED"}),b&&(0,t.jsx)("span",{className:`px-2 py-0.5 rounded text-[11px] font-medium flex-shrink-0 ${0===o?"bg-green-50 text-green-700 border border-green-200":"bg-amber-50 text-amber-700 border border-amber-200"}`,children:b}),null!=e.confidence_score&&(0,t.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 border border-gray-200 rounded text-[11px] font-medium flex-shrink-0",children:[(100*e.confidence_score).toFixed(0),"% conf"]}),null!=u&&r&&(0,t.jsx)(i.Tooltip,{title:`Risk score: ${u}/10`,children:(0,t.jsxs)("span",{className:`px-2 py-0.5 border rounded text-[11px] font-semibold flex-shrink-0 ${u<=3?"text-green-600 bg-green-50 border-green-200":u<=6?"text-amber-600 bg-amber-50 border-amber-200":"text-red-600 bg-red-50 border-red-200"}`,children:["Risk ",u,"/10"]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500 font-mono",children:m}),e.detection_method&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 border border-gray-200 rounded text-[11px] font-medium",children:e.detection_method.split(",")[0].trim()}),(0,t.jsx)(E,{expanded:a})]})]}),a&&(0,t.jsxs)("div",{className:"border-t border-gray-100 px-4 py-3",children:[e.classification&&(0,t.jsxs)("div",{className:"mb-3 bg-gray-50 rounded-lg p-3 space-y-1",children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Classification"}),e.classification.category&&(0,t.jsxs)("div",{className:"flex text-sm",children:[(0,t.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Category:"}),(0,t.jsx)("span",{children:e.classification.category})]}),e.classification.article_reference&&(0,t.jsxs)("div",{className:"flex text-sm",children:[(0,t.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Reference:"}),(0,t.jsx)("span",{className:"font-mono",children:e.classification.article_reference})]}),null!=e.classification.confidence&&(0,t.jsxs)("div",{className:"flex text-sm",children:[(0,t.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Confidence:"}),(0,t.jsxs)("span",{children:[(100*e.classification.confidence).toFixed(0),"%"]})]}),e.classification.reason&&(0,t.jsxs)("div",{className:"flex text-sm",children:[(0,t.jsx)("span",{className:"font-medium w-1/3 text-gray-500",children:"Reason:"}),(0,t.jsx)("span",{children:e.classification.reason})]})]}),e.match_details&&e.match_details.length>0&&(0,t.jsx)(O,{matchDetails:e.match_details}),o>0&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Masked Entities"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(e.masked_entity_count||{}).map(([e,s])=>(0,t.jsxs)("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium",children:[e,": ",s]},e))})]}),"presidio"===p&&f.length>0&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(d,{entities:f})}),"bedrock"===p&&j&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(h,{response:j})}),"litellm_content_filter"===p&&g&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsx)(y,{response:g})}),p&&!S.has(p)&&g&&(0,t.jsx)(F,{response:g})]})]})},$=({data:e,accessToken:s,logEntry:a})=>{let l=(0,n.useMemo)(()=>Array.isArray(e)?e.filter(e=>!!e):e?[e]:[],[e]),r=l.filter(T).length,i=r===l.length,o=(0,n.useMemo)(()=>Math.round(1e3*l.reduce((e,t)=>e+(t.duration??0),0)),[l]);return((0,n.useMemo)(()=>Array.from(new Set(l.map(e=>e.policy_template).filter(Boolean))),[l]),0===l.length)?null:(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm w-full max-w-full overflow-hidden mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(M,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Guardrails & Policy Compliance"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[l.length," guardrail",1!==l.length?"s":""," evaluated"]}),(0,t.jsx)("span",{className:"text-gray-300",children:"|"}),(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-semibold ${i?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[i?(0,t.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,t.jsx)("path",{d:"M3 6l2.5 2.5L9 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}):null,r," Passed"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Total: ",o,"ms overhead"]})}),(0,t.jsxs)("button",{onClick:()=>{let e=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`guardrail-compliance-log-${new Date().toISOString().slice(0,10)}.json`,s.click(),URL.revokeObjectURL(t)},className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[(0,t.jsx)(R,{}),"Export Compliance Log"]})]})]}),s&&a&&(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-100",children:(0,t.jsx)(k,{accessToken:s,logEntry:a})}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"w-[340px] flex-shrink-0 border-r border-gray-100 px-6 py-5",children:(0,t.jsx)(B,{entries:l})}),(0,t.jsxs)("div",{className:"flex-1 px-6 py-5 min-w-0",children:[(0,t.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Evaluation Details"}),(0,t.jsx)("div",{className:"space-y-3",children:l.map((e,s)=>(0,t.jsx)(P,{entry:e},`${e.guardrail_name??"guardrail"}-${s}`))})]})]})]})};var q=e.i(500330);e.i(122550);var H=e.i(313603),K=e.i(772345),V=e.i(793130),Y=e.i(197647),W=e.i(653824),U=e.i(881073),J=e.i(404206),G=e.i(723731),Q=e.i(464571),X=e.i(708347),Z=e.i(207082),ee=e.i(871943),et=e.i(360820),es=e.i(94629),ea=e.i(152990),el=e.i(682830),er=e.i(269200),en=e.i(942232),ei=e.i(977572),eo=e.i(427612),ed=e.i(64848),ec=e.i(496020);function em({keys:e,totalCount:s,isLoading:a,isFetching:l,pageIndex:r,pageSize:o,onPageChange:d}){let[c,m]=(0,n.useState)([{id:"deleted_at",desc:!0}]),[x,u]=(0,n.useState)({pageIndex:r,pageSize:o});n.default.useEffect(()=>{u({pageIndex:r,pageSize:o})},[r,o]);let p=[{id:"token",accessorKey:"token",header:"Key ID",size:150,maxSize:250,cell:e=>{let s=e.getValue();return(0,t.jsx)(i.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono text-blue-500 text-xs truncate block max-w-[250px]",children:s||"-"})})}},{id:"key_alias",accessorKey:"key_alias",header:"Key Alias",size:150,maxSize:200,cell:e=>{let s=e.getValue();return(0,t.jsx)(i.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block max-w-[200px]",children:s??"-"})})}},{id:"team_alias",accessorKey:"team_alias",header:"Team Alias",size:120,maxSize:180,cell:e=>{let s=e.getValue();return(0,t.jsx)("span",{className:"truncate block max-w-[180px]",children:s||"-"})}},{id:"spend",accessorKey:"spend",header:"Spend (USD)",size:100,maxSize:140,cell:e=>(0,t.jsx)("span",{className:"block max-w-[140px]",children:(0,q.formatNumberWithCommas)(e.getValue(),4)})},{id:"max_budget",accessorKey:"max_budget",header:"Budget (USD)",size:110,maxSize:150,cell:e=>{let s=e.getValue();return(0,t.jsx)("span",{className:"block max-w-[150px]",children:null===s?"Unlimited":`$${(0,q.formatNumberWithCommas)(s)}`})}},{id:"user_email",accessorKey:"user_email",header:"User Email",size:160,maxSize:250,cell:e=>{let s=e.getValue();return(0,t.jsx)(i.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block max-w-[250px]",children:s??"-"})})}},{id:"user_id",accessorKey:"user_id",header:"User ID",size:120,maxSize:200,cell:e=>{let s=e.getValue();return(0,t.jsx)(i.Tooltip,{title:s||void 0,children:(0,t.jsx)("span",{className:"truncate block max-w-[200px]",children:s||"-"})})}},{id:"created_at",accessorKey:"created_at",header:"Created At",size:120,maxSize:140,cell:e=>{let s=e.getValue();return(0,t.jsx)("span",{className:"block max-w-[140px]",children:s?new Date(s).toLocaleDateString():"-"})}},{id:"created_by",accessorKey:"created_by",header:"Created By",size:120,maxSize:180,cell:e=>{let s=e.row.original.created_by;return(0,t.jsx)(i.Tooltip,{title:s||void 0,children:(0,t.jsx)("span",{className:"truncate block max-w-[180px]",children:s||"-"})})}},{id:"deleted_at",accessorKey:"deleted_at",header:"Deleted At",size:120,maxSize:140,cell:e=>{let s=e.row.original.deleted_at;return(0,t.jsx)("span",{className:"block max-w-[140px]",children:s?new Date(s).toLocaleDateString():"-"})}},{id:"deleted_by",accessorKey:"deleted_by",header:"Deleted By",size:120,maxSize:180,cell:e=>{let s=e.row.original.deleted_by;return(0,t.jsx)(i.Tooltip,{title:s||void 0,children:(0,t.jsx)("span",{className:"truncate block max-w-[180px]",children:s||"-"})})}}],h=(0,ea.useReactTable)({data:e,columns:p,columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:c,pagination:x},onSortingChange:m,onPaginationChange:e=>{let t="function"==typeof e?e(x):e;u(t),d(t.pageIndex)},getCoreRowModel:(0,el.getCoreRowModel)(),getSortedRowModel:(0,el.getSortedRowModel)(),getPaginationRowModel:(0,el.getPaginationRowModel)(),enableSorting:!0,manualSorting:!1,manualPagination:!0,pageCount:Math.ceil(s/o)}),{pageIndex:g}=h.getState().pagination,f=g*o+1,j=Math.min((g+1)*o,s),y=`${f} - ${j}`;return(0,t.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,t.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[a||l?(0,t.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:"Loading..."}):(0,t.jsxs)("span",{className:"inline-flex text-sm text-gray-700",children:["Showing ",y," of ",s," results"]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-2",children:[a||l?(0,t.jsx)("span",{className:"text-sm text-gray-700",children:"Loading..."}):(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",g+1," of ",h.getPageCount()]}),(0,t.jsx)("button",{onClick:()=>h.previousPage(),disabled:a||l||!h.getCanPreviousPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>h.nextPage(),disabled:a||l||!h.getCanNextPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),(0,t.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(er.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:h.getCenterTotalSize()},children:[(0,t.jsx)(eo.TableHead,{children:h.getHeaderGroups().map(e=>(0,t.jsx)(ec.TableRow,{children:e.headers.map(e=>(0,t.jsx)(ed.TableHeaderCell,{"data-header-id":e.id,className:"py-1 h-8 relative hover:bg-gray-50",style:{width:e.getSize(),maxWidth:e.column.columnDef.maxSize,position:"relative"},onMouseEnter:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&(t.style.opacity="0.5")},onMouseLeave:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&!e.column.getIsResizing()&&(t.style.opacity="0")},onClick:e.column.getToggleSortingHandler(),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,ea.flexRender)(e.column.columnDef.header,e.getContext())}),(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(et.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(ee.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(es.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${h.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,t.jsx)(en.TableBody,{children:a||l?(0,t.jsx)(ec.TableRow,{children:(0,t.jsx)(ei.TableCell,{colSpan:p.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"ðŸš… Loading keys..."})})})}):e.length>0?h.getRowModel().rows.map(e=>(0,t.jsx)(ec.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(ei.TableCell,{style:{width:e.column.getSize(),maxWidth:e.column.columnDef.maxSize,whiteSpace:"pre-wrap",overflow:"hidden"},className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,ea.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(ec.TableRow,{children:(0,t.jsx)(ei.TableCell,{colSpan:p.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No deleted keys found"})})})})})]})})})})]})})}function ex(){let[e,s]=(0,n.useState)(0),[a]=(0,n.useState)(50),{data:l,isPending:r,isFetching:i}=(0,Z.useDeletedKeys)(e+1,a);return(0,t.jsx)(em,{keys:l?.keys||[],totalCount:l?.total_count||0,isLoading:r,isFetching:i,pageIndex:e,pageSize:a,onPageChange:s})}var eu=e.i(785242),ep=e.i(389083),eh=e.i(599724),eg=e.i(355619);function ef({teams:e,isLoading:s,isFetching:a}){let[l,r]=(0,n.useState)([{id:"deleted_at",desc:!0}]),o=[{id:"team_alias",accessorKey:"team_alias",header:"Team Name",size:150,maxSize:200,cell:e=>{let s=e.getValue();return(0,t.jsx)(i.Tooltip,{title:s||void 0,children:(0,t.jsx)("span",{className:"truncate block max-w-[200px]",children:s||"-"})})}},{id:"team_id",accessorKey:"team_id",header:"Team ID",size:150,maxSize:250,cell:e=>{let s=e.getValue();return(0,t.jsx)(i.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono text-blue-500 text-xs truncate block max-w-[250px]",children:s||"-"})})}},{id:"created_at",accessorKey:"created_at",header:"Created",size:120,maxSize:140,cell:e=>{let s=e.getValue();return(0,t.jsx)("span",{className:"block max-w-[140px]",children:s?new Date(s).toLocaleDateString():"-"})}},{id:"spend",accessorKey:"spend",header:"Spend (USD)",size:100,maxSize:140,cell:e=>{let s=e.row.original.spend;return(0,t.jsx)("span",{className:"block max-w-[140px]",children:void 0!==s?(0,q.formatNumberWithCommas)(s,4):"-"})}},{id:"max_budget",accessorKey:"max_budget",header:"Budget (USD)",size:110,maxSize:150,cell:e=>{let s=e.getValue();return(0,t.jsx)("span",{className:"block max-w-[150px]",children:null==s?"No limit":`$${(0,q.formatNumberWithCommas)(s)}`})}},{id:"models",accessorKey:"models",header:"Models",size:200,maxSize:300,cell:e=>{let s=e.getValue();return Array.isArray(s)&&0!==s.length?(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 max-w-[300px]",children:[s.slice(0,3).map((e,s)=>"all-proxy-models"===e?(0,t.jsx)(ep.Badge,{size:"xs",color:"red",children:(0,t.jsx)(eh.Text,{children:"All Proxy Models"})},s):(0,t.jsx)(ep.Badge,{size:"xs",color:"blue",children:(0,t.jsx)(eh.Text,{children:e.length>30?`${(0,eg.getModelDisplayName)(e).slice(0,30)}...`:(0,eg.getModelDisplayName)(e)})},s)),s.length>3&&(0,t.jsx)(ep.Badge,{size:"xs",color:"gray",children:(0,t.jsxs)(eh.Text,{children:["+",s.length-3," ",s.length-3==1?"more model":"more models"]})})]}):(0,t.jsx)(ep.Badge,{size:"xs",color:"red",children:(0,t.jsx)(eh.Text,{children:"All Proxy Models"})})}},{id:"organization_id",accessorKey:"organization_id",header:"Organization",size:150,maxSize:200,cell:e=>{let s=e.getValue();return(0,t.jsx)(i.Tooltip,{title:s||void 0,children:(0,t.jsx)("span",{className:"truncate block max-w-[200px]",children:s||"-"})})}},{id:"deleted_at",accessorKey:"deleted_at",header:"Deleted At",size:120,maxSize:140,cell:e=>{let s=e.row.original.deleted_at;return(0,t.jsx)("span",{className:"block max-w-[140px]",children:s?new Date(s).toLocaleDateString():"-"})}},{id:"deleted_by",accessorKey:"deleted_by",header:"Deleted By",size:120,maxSize:180,cell:e=>{let s=e.row.original.deleted_by;return(0,t.jsx)(i.Tooltip,{title:s||void 0,children:(0,t.jsx)("span",{className:"truncate block max-w-[180px]",children:s||"-"})})}}],d=(0,ea.useReactTable)({data:e,columns:o,columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:l},onSortingChange:r,getCoreRowModel:(0,el.getCoreRowModel)(),getSortedRowModel:(0,el.getSortedRowModel)(),enableSorting:!0,manualSorting:!1});return(0,t.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,t.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"flex items-center justify-between w-full mb-4",children:s||a?(0,t.jsx)("span",{className:"inline-flex text-sm text-gray-700",children:"Loading..."}):(0,t.jsxs)("span",{className:"inline-flex text-sm text-gray-700",children:["Showing ",e.length," ",1===e.length?"team":"teams"]})}),(0,t.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(er.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:d.getCenterTotalSize()},children:[(0,t.jsx)(eo.TableHead,{children:d.getHeaderGroups().map(e=>(0,t.jsx)(ec.TableRow,{children:e.headers.map(e=>(0,t.jsx)(ed.TableHeaderCell,{"data-header-id":e.id,className:"py-1 h-8 relative hover:bg-gray-50",style:{width:e.getSize(),maxWidth:e.column.columnDef.maxSize,position:"relative"},onMouseEnter:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&(t.style.opacity="0.5")},onMouseLeave:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&!e.column.getIsResizing()&&(t.style.opacity="0")},onClick:e.column.getToggleSortingHandler(),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,ea.flexRender)(e.column.columnDef.header,e.getContext())}),(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(et.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(ee.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(es.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${d.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,t.jsx)(en.TableBody,{children:s||a?(0,t.jsx)(ec.TableRow,{children:(0,t.jsx)(ei.TableCell,{colSpan:o.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"ðŸš… Loading teams..."})})})}):e.length>0?d.getRowModel().rows.map(e=>(0,t.jsx)(ec.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(ei.TableCell,{style:{width:e.column.getSize(),maxWidth:e.column.columnDef.maxSize,whiteSpace:"pre-wrap",overflow:"hidden"},className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,ea.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(ec.TableRow,{children:(0,t.jsx)(ei.TableCell,{colSpan:o.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No deleted teams found"})})})})})]})})})})]})})}function ej(){let{data:e,isPending:s,isFetching:a}=(0,eu.useDeletedTeams)(1,100);return(0,t.jsx)(ef,{teams:e||[],isLoading:s,isFetching:a})}var ey=e.i(633627),eb=e.i(625901),ev=e.i(56456),eN=e.i(152473),e_=e.i(199133),ew=e.i(770914),ek=e.i(898586);let{Text:eS}=ek.Typography,eC=({value:e,onChange:s,placeholder:a="Select a model",style:l,pageSize:r=50,allowClear:i=!0,disabled:o=!1})=>{let[d,c]=(0,n.useState)(""),[m,x]=(0,eN.useDebouncedState)("",{wait:300}),{data:u,fetchNextPage:p,hasNextPage:h,isFetchingNextPage:g,isLoading:f}=(0,eb.useInfiniteModelInfo)(r,m||void 0),j=(0,n.useMemo)(()=>{if(!u?.pages)return[];let e=new Set,t=[];for(let s of u.pages)for(let a of s.data){let s=a.model_info?.id??"",l=a.model_name??"";!s||e.has(s)||(e.add(s),t.push({label:l?`${l} (${s})`:s,value:s,modelName:l,modelId:s}))}return t},[u]);return(0,t.jsx)(e_.Select,{value:e||void 0,onChange:e=>{let t="string"==typeof e?e:Array.isArray(e)?e[0]??"":"";s?.(t)},placeholder:a,style:{width:"100%",...l},allowClear:i,disabled:o,showSearch:!0,filterOption:!1,onSearch:e=>{c(e),x(e)},searchValue:d,onPopupScroll:e=>{let t=e.currentTarget;(t.scrollTop+t.clientHeight)/t.scrollHeight>=.8&&h&&!g&&p()},loading:f,notFoundContent:f?(0,t.jsx)(ev.LoadingOutlined,{spin:!0}):"No models found",options:j,optionRender:e=>{let{modelName:s,modelId:a}=e.data;return(0,t.jsx)(t.Fragment,{children:s?(0,t.jsxs)(ew.Space,{direction:"vertical",children:[(0,t.jsxs)(ew.Space,{direction:"horizontal",children:[(0,t.jsx)(eS,{strong:!0,children:"Model name:"}),(0,t.jsx)(eS,{ellipsis:!0,children:s})]}),(0,t.jsxs)(eS,{ellipsis:!0,type:"secondary",children:["Model ID: ",a]})]}):(0,t.jsxs)(eS,{ellipsis:!0,type:"secondary",children:["Model ID: ",a]})})},popupRender:e=>(0,t.jsxs)(t.Fragment,{children:[e,g&&(0,t.jsx)("div",{style:{textAlign:"center",padding:8},children:(0,t.jsx)(ev.LoadingOutlined,{spin:!0})})]})})};var eT=e.i(969550),eL=e.i(20147),eM=e.i(149121),eD=e.i(994388),ez=e.i(916925),eA=e.i(446891);let eI=({utcTime:e})=>(0,t.jsx)("span",{style:{fontFamily:"monospace",width:"180px",display:"inline-block"},children:(e=>{try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).replace(",","")}catch(e){return"Error converting time"}})(e)}),eE=[{label:"400 - Bad Request",value:"400"},{label:"401 - Invalid Authentication",value:"401"},{label:"403 - Permission Denied",value:"403"},{label:"404 - Not Found",value:"404"},{label:"408 - Request Timeout",value:"408"},{label:"422 - Unprocessable Entity",value:"422"},{label:"429 - Rate Limited",value:"429"},{label:"500 - Internal Server Error",value:"500"},{label:"502 - Bad Gateway",value:"502"},{label:"503 - Service Unavailable",value:"503"},{label:"529 - Overloaded",value:"529"}],eR=["call_mcp_tool","list_mcp_tools"],eO=[{label:"Last 15 Minutes",value:15,unit:"minutes"},{label:"Last Hour",value:1,unit:"hours"},{label:"Last 4 Hours",value:4,unit:"hours"},{label:"Last 24 Hours",value:24,unit:"hours"},{label:"Last 7 Days",value:7,unit:"days"}],eF=({size:e=12})=>(0,t.jsx)("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0 text-gray-400",children:(0,t.jsx)("path",{d:"M12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0-1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0-1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3z"})}),eB=({size:e=10})=>(0,t.jsx)("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:(0,t.jsx)("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),eP=({count:e})=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,t.jsx)(eF,{}),null!=e?e:"LLM"]}),e$=({count:e})=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-50 text-amber-700 border border-amber-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,t.jsx)(eB,{}),null!=e?e:"MCP"]}),eq=({label:e,field:s,sortBy:a,sortOrder:l,onSortChange:r})=>(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:e}),(0,t.jsx)(eA.TableHeaderSortDropdown,{sortState:a===s&&l,onSortChange:e=>{!1===e?r("startTime","desc"):r(s,e)}})]}),eH=e=>[{header:e?()=>(0,t.jsx)(eq,{label:"Time",field:"startTime",sortBy:e.sortBy,sortOrder:e.sortOrder,onSortChange:e.onSortChange}):"Time",accessorKey:"startTime",cell:e=>(0,t.jsx)(eI,{utcTime:e.getValue()})},{header:"Type",id:"type",cell:e=>{let s=e.row.original,a=s.session_total_count||1,l=eR.includes(s.call_type),r=s.session_llm_count??(l?0:a),n=s.session_mcp_count??(l?a:0);if(l)return(0,t.jsx)(e$,{});if(a<=1)return(0,t.jsx)(eP,{});let o=(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-50 text-blue-700 border border-blue-200 rounded-full text-[11px] font-medium whitespace-nowrap",children:[(0,t.jsx)(eF,{}),(0,t.jsx)("span",{children:a}),n>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-blue-300",children:"Â·"}),(0,t.jsx)(eB,{})]})]});return(0,t.jsx)(i.Tooltip,{title:`${r} LLM â€¢ ${n} MCP`,children:o})}},{header:"Status",accessorKey:"metadata.status",cell:e=>{let s="failure"!==(e.getValue()||"Success").toLowerCase();return(0,t.jsx)("span",{className:`px-2 py-1 rounded-md text-xs font-medium inline-block text-center w-16 ${s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s?"Success":"Failure"})}},{header:"Session ID",accessorKey:"session_id",cell:e=>{let s=String(e.getValue()||""),a=e.row.original.onSessionClick;return(0,t.jsx)(i.Tooltip,{title:String(e.getValue()||""),children:(0,t.jsx)(eD.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal text-xs max-w-[15ch] truncate block",onClick:()=>a?.(s),children:String(e.getValue()||"")})})}},{header:"Request ID",accessorKey:"request_id",cell:e=>(0,t.jsx)(i.Tooltip,{title:String(e.getValue()||""),children:(0,t.jsx)("span",{className:"font-mono text-xs max-w-[15ch] truncate block",children:String(e.getValue()||"")})})},{header:e?()=>(0,t.jsx)(eq,{label:"Cost",field:"spend",sortBy:e.sortBy,sortOrder:e.sortOrder,onSortChange:e.onSortChange}):"Cost",accessorKey:"spend",cell:e=>{let s=e.row.original,a=s.mcp_tool_call_count||0,l=s.mcp_tool_call_spend||0;return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(i.Tooltip,{title:`$${String(e.getValue()||0)}`,children:(0,t.jsx)("span",{children:(0,q.getSpendString)(e.getValue()||0)})}),a>0&&l>0&&(0,t.jsxs)("span",{className:"text-[10px] text-amber-600",children:["incl. ",(0,q.getSpendString)(l)," from ",a," MCP"]})]})}},{header:"Duration (s)",accessorKey:"duration",cell:e=>(0,t.jsx)(i.Tooltip,{title:String(e.getValue()||"-"),children:(0,t.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Team Name",accessorKey:"metadata.user_api_key_team_alias",cell:e=>(0,t.jsx)(i.Tooltip,{title:String(e.getValue()||"-"),children:(0,t.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Key Hash",accessorKey:"metadata.user_api_key",cell:e=>{let s=String(e.getValue()||"-"),a=e.row.original.onKeyHashClick;return(0,t.jsx)(i.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono max-w-[15ch] truncate block cursor-pointer hover:text-blue-600",onClick:()=>a?.(s),children:s})})}},{header:"Key Name",accessorKey:"metadata.user_api_key_alias",cell:e=>(0,t.jsx)(i.Tooltip,{title:String(e.getValue()||"-"),children:(0,t.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Model",accessorKey:"model",cell:e=>{let s=e.row.original,a=s.custom_llm_provider,l=String(e.getValue()||"");return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[a&&(0,t.jsx)("img",{src:s.metadata?.mcp_tool_call_metadata?.mcp_server_logo_url?s.metadata.mcp_tool_call_metadata.mcp_server_logo_url:a?(0,ez.getProviderLogoAndName)(a).logo:"",alt:"",className:"w-4 h-4",onError:e=>{e.target.style.display="none"}}),(0,t.jsx)(i.Tooltip,{title:l,children:(0,t.jsx)("span",{className:"max-w-[15ch] truncate block",children:l})})]})}},{header:e?()=>(0,t.jsx)(eq,{label:"Tokens",field:"total_tokens",sortBy:e.sortBy,sortOrder:e.sortOrder,onSortChange:e.onSortChange}):"Tokens",accessorKey:"total_tokens",cell:e=>{let s=e.row.original;return(0,t.jsxs)("span",{className:"text-sm",children:[String(s.total_tokens||"0"),(0,t.jsxs)("span",{className:"text-gray-400 text-xs ml-1",children:["(",String(s.prompt_tokens||"0"),"+",String(s.completion_tokens||"0"),")"]})]})}},{header:"Internal User",accessorKey:"user",cell:e=>(0,t.jsx)(i.Tooltip,{title:String(e.getValue()||"-"),children:(0,t.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"End User",accessorKey:"end_user",cell:e=>(0,t.jsx)(i.Tooltip,{title:String(e.getValue()||"-"),children:(0,t.jsx)("span",{className:"max-w-[15ch] truncate block",children:String(e.getValue()||"-")})})},{header:"Tags",accessorKey:"request_tags",cell:e=>{let s=e.getValue();if(!s||0===Object.keys(s).length)return"-";let a=Object.entries(s),l=a[0],r=a.slice(1);return(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:(0,t.jsx)(i.Tooltip,{title:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:a.map(([e,s])=>(0,t.jsxs)("span",{children:[e,": ",String(s)]},e))}),children:(0,t.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:[l[0],": ",String(l[1]),r.length>0&&` +${r.length}`]})})})}}];eH();let eK=[{id:"expander",header:()=>null,cell:({row:e})=>(0,t.jsx)(()=>{let[s,a]=n.default.useState(e.getIsExpanded()),l=n.default.useCallback(()=>{a(e=>!e),e.getToggleExpandedHandler()()},[e]);return e.getCanExpand()?(0,t.jsx)("button",{onClick:l,style:{cursor:"pointer"},"aria-label":s?"Collapse row":"Expand row",className:"w-6 h-6 flex items-center justify-center focus:outline-none",children:(0,t.jsx)("svg",{className:`w-4 h-4 transform transition-transform ${s?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):(0,t.jsx)("span",{className:"w-6 h-6 flex items-center justify-center",children:"â—"})},{})},{header:"Timestamp",accessorKey:"updated_at",cell:e=>(0,t.jsx)(eI,{utcTime:e.getValue()})},{header:"Table Name",accessorKey:"table_name",cell:e=>{let s=e.getValue(),a=s;switch(s){case"LiteLLM_VerificationToken":a="Keys";break;case"LiteLLM_TeamTable":a="Teams";break;case"LiteLLM_OrganizationTable":a="Organizations";break;case"LiteLLM_UserTable":a="Users";break;case"LiteLLM_ProxyModelTable":a="Models";break;default:a=s}return(0,t.jsx)("span",{children:a})}},{header:"Action",accessorKey:"action",cell:e=>{let s;return(0,t.jsx)("span",{children:(s=e.getValue(),(0,t.jsx)(ep.Badge,{color:"gray",className:"flex items-center gap-1",children:(0,t.jsx)("span",{className:"whitespace-nowrap text-xs",children:s})}))})}},{header:"Changed By",accessorKey:"changed_by",cell:e=>{let s=e.row.original.changed_by,a=e.row.original.changed_by_api_key;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium",children:s}),a&&(0,t.jsx)(i.Tooltip,{title:a,children:(0,t.jsxs)("div",{className:"text-xs text-muted-foreground max-w-[15ch] truncate",children:[" ",a]})})]})}},{header:"Affected Item ID",accessorKey:"object_id",cell:e=>(0,t.jsx)(()=>{let s=e.getValue(),[a,l]=(0,n.useState)(!1);if(!s)return(0,t.jsx)(t.Fragment,{children:"-"});let r=async()=>{try{await navigator.clipboard.writeText(String(s)),l(!0),setTimeout(()=>l(!1),1500)}catch(e){console.error("Failed to copy object ID: ",e)}};return(0,t.jsx)(i.Tooltip,{title:a?"Copied!":String(s),children:(0,t.jsx)("span",{className:"max-w-[20ch] truncate block cursor-pointer hover:text-blue-600",onClick:r,children:String(s)})})},{})}];function eV({userID:e,userRole:s,token:l,accessToken:i,isActive:o,premiumUser:d,allTeams:c}){let[m,x]=(0,n.useState)((0,r.default)().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),u=(0,n.useRef)(null),p=(0,n.useRef)(null),[h,g]=(0,n.useState)(1),[f]=(0,n.useState)(50),[j,y]=(0,n.useState)({}),[v,N]=(0,n.useState)(""),[_,w]=(0,n.useState)(""),[k,S]=(0,n.useState)(""),[C,T]=(0,n.useState)("all"),[L,M]=(0,n.useState)("all"),[D,z]=(0,n.useState)(!1),[A,I]=(0,n.useState)(!1),E=(0,a.useQuery)({queryKey:["all_audit_logs",i,l,s,e,m],queryFn:async()=>{if(!i||!l||!s||!e)return[];let t=(0,r.default)(m).utc().format("YYYY-MM-DD HH:mm:ss"),a=(0,r.default)().utc().format("YYYY-MM-DD HH:mm:ss"),n=[],o=1,d=1;do{let e=await (0,b.uiAuditLogsCall)(i,t,a,o,50);n=n.concat(e.audit_logs),d=e.total_pages,o++}while(o<=d)return n},enabled:!!i&&!!l&&!!s&&!!e&&o,refetchInterval:5e3,refetchIntervalInBackground:!0}),R=(0,n.useCallback)(async e=>{if(i)try{let t=(await (0,b.keyListCall)(i,null,null,e,null,null,1,10)).keys.find(t=>t.key_alias===e);t?w(t.token):w("")}catch(e){console.error("Error fetching key hash for alias:",e),w("")}},[i]);(0,n.useEffect)(()=>{if(!i)return;let e=!1,t=!1;j["Team ID"]?v!==j["Team ID"]&&(N(j["Team ID"]),e=!0):""!==v&&(N(""),e=!0),j["Key Hash"]?_!==j["Key Hash"]&&(w(j["Key Hash"]),t=!0):j["Key Alias"]?R(j["Key Alias"]):""!==_&&(w(""),t=!0),(e||t)&&g(1)},[j,i,R,v,_]),(0,n.useEffect)(()=>{g(1)},[v,_,m,k,C,L]),(0,n.useEffect)(()=>{function e(e){u.current&&!u.current.contains(e.target)&&z(!1),p.current&&!p.current.contains(e.target)&&I(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let O=(0,n.useMemo)(()=>E.data?E.data.filter(e=>{let t=!0,s=!0,a=!0,l=!0,r=!0;if(v){let s="string"==typeof e.before_value?JSON.parse(e.before_value)?.team_id:e.before_value?.team_id,a="string"==typeof e.updated_values?JSON.parse(e.updated_values)?.team_id:e.updated_values?.team_id;t=s===v||a===v}if(_)try{let t="string"==typeof e.before_value?JSON.parse(e.before_value):e.before_value,a="string"==typeof e.updated_values?JSON.parse(e.updated_values):e.updated_values,l=t?.token,r=a?.token;s="string"==typeof l&&l.includes(_)||"string"==typeof r&&r.includes(_)}catch(e){s=!1}if(k&&(a=e.object_id?.toLowerCase().includes(k.toLowerCase())),"all"!==C&&(l=e.action?.toLowerCase()===C.toLowerCase()),"all"!==L){let t="";switch(L){case"keys":t="litellm_verificationtoken";break;case"teams":t="litellm_teamtable";break;case"users":t="litellm_usertable";break;default:t=L}r=e.table_name?.toLowerCase()===t}return t&&s&&a&&l&&r}):[],[E.data,v,_,k,C,L]),F=O.length,B=Math.ceil(F/f)||1,P=(0,n.useMemo)(()=>{let e=(h-1)*f,t=e+f;return O.slice(e,t)},[O,h,f]),$=!E.data||0===E.data.length,H=(0,n.useCallback)(({row:e})=>(0,t.jsx)(({rowData:e})=>{let{before_value:s,updated_values:a,table_name:l,action:r}=e,n=(e,s)=>{if(!e||0===Object.keys(e).length)return(0,t.jsx)(eh.Text,{children:"N/A"});if(s){let s=Object.keys(e),a=["token","spend","max_budget"];if(s.every(e=>a.includes(e))&&s.length>0)return(0,t.jsxs)("div",{children:[s.includes("token")&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Token:"})," ",e.token||"N/A"]}),s.includes("spend")&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Spend:"})," ",void 0!==e.spend?`$${(0,q.formatNumberWithCommas)(e.spend,6)}`:"N/A"]}),s.includes("max_budget")&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Max Budget:"})," ",void 0!==e.max_budget?`$${(0,q.formatNumberWithCommas)(e.max_budget,6)}`:"N/A"]})]});if(e["No differing fields detected in 'before' state"]||e["No differing fields detected in 'updated' state"]||e["No fields changed"])return(0,t.jsx)(eh.Text,{children:e[Object.keys(e)[0]]})}return(0,t.jsx)("pre",{className:"p-2 bg-gray-50 border rounded text-xs overflow-auto max-h-60",children:JSON.stringify(e,null,2)})},i=s,o=a;if(("updated"===r||"rotated"===r)&&s&&a&&("LiteLLM_TeamTable"===l||"LiteLLM_UserTable"===l||"LiteLLM_VerificationToken"===l)){let e={},t={};new Set([...Object.keys(s),...Object.keys(a)]).forEach(l=>{JSON.stringify(s[l])!==JSON.stringify(a[l])&&(s.hasOwnProperty(l)&&(e[l]=s[l]),a.hasOwnProperty(l)&&(t[l]=a[l]))}),Object.keys(s).forEach(l=>{a.hasOwnProperty(l)||e.hasOwnProperty(l)||(e[l]=s[l],t[l]=void 0)}),Object.keys(a).forEach(l=>{s.hasOwnProperty(l)||t.hasOwnProperty(l)||(t[l]=a[l],e[l]=void 0)}),i=Object.keys(e).length>0?e:{"No differing fields detected in 'before' state":"N/A"},o=Object.keys(t).length>0?t:{"No differing fields detected in 'updated' state":"N/A"},0===Object.keys(e).length&&0===Object.keys(t).length&&(i={"No fields changed":"N/A"},o={"No fields changed":"N/A"})}return(0,t.jsxs)("div",{className:"-mx-4 p-4 bg-slate-100 border-y border-slate-300 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2 text-sm text-slate-700",children:"Before Value:"}),n(i,"LiteLLM_VerificationToken"===l)]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2 text-sm text-slate-700",children:"Updated Value:"}),n(o,"LiteLLM_VerificationToken"===l)]})]})},{rowData:e.original}),[]);if(!d)return(0,t.jsxs)("div",{style:{textAlign:"center",marginTop:"20px"},children:[(0,t.jsx)("h1",{style:{display:"block",marginBottom:"10px"},children:"âœ¨ Enterprise Feature."}),(0,t.jsx)(eh.Text,{style:{display:"block",marginBottom:"10px"},children:"This is a LiteLLM Enterprise feature, and requires a valid key to use."}),(0,t.jsx)(eh.Text,{style:{display:"block",marginBottom:"20px",fontStyle:"italic"},children:"Here's a preview of what Audit Logs offer:"}),(0,t.jsx)("img",{src:"../ui/assets/audit-logs-preview.png",alt:"Audit Logs Preview",style:{maxWidth:"100%",maxHeight:"700px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",margin:"0 auto"},onError:e=>{console.error("Failed to load audit logs preview image"),e.target.style.display="none"}})]});let K=F>0?(h-1)*f+1:0,V=Math.min(h*f,F);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4"}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,t.jsxs)("div",{className:"border-b px-6 py-4",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold py-4",children:"Audit Logs"}),(0,t.jsx)(({show:e})=>e?(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start mb-6",children:[(0,t.jsx)("div",{className:"text-blue-500 mr-3 flex-shrink-0 mt-0.5",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,t.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"Audit Logs Not Available"}),(0,t.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"To enable audit logging, add the following configuration to your LiteLLM proxy configuration file:"}),(0,t.jsx)("pre",{className:"mt-2 bg-white p-3 rounded border border-blue-200 text-xs font-mono overflow-auto",children:`litellm_settings:
  store_audit_logs: true`}),(0,t.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:"Note: This will only affect new requests after the configuration change and proxy restart."})]})]}):null,{show:$}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("input",{type:"text",placeholder:"Search by Object ID...",value:k,onChange:e=>S(e.target.value),className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),(0,t.jsxs)("button",{onClick:()=>{E.refetch()},className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",title:"Refresh data",children:[(0,t.jsx)("svg",{className:`w-4 h-4 ${E.isFetching?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,t.jsx)("span",{children:"Refresh"})]})]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative",ref:u,children:[(0,t.jsx)("label",{htmlFor:"actionFilterDisplay",className:"mr-2 text-sm font-medium text-gray-700 sr-only",children:"Action:"}),(0,t.jsxs)("button",{id:"actionFilterDisplay",onClick:()=>z(!D),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 bg-white w-40 text-left justify-between",children:[(0,t.jsxs)("span",{children:["all"===C&&"All Actions","created"===C&&"Created","updated"===C&&"Updated","deleted"===C&&"Deleted","rotated"===C&&"Rotated"]}),(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),D&&(0,t.jsx)("div",{className:"absolute left-0 mt-2 w-40 bg-white rounded-lg shadow-lg border p-1 z-50",children:(0,t.jsx)("div",{className:"space-y-1",children:[{label:"All Actions",value:"all"},{label:"Created",value:"created"},{label:"Updated",value:"updated"},{label:"Deleted",value:"deleted"},{label:"Rotated",value:"rotated"}].map(e=>(0,t.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${C===e.value?"bg-blue-50 text-blue-600 font-medium":"font-normal"}`,onClick:()=>{T(e.value),z(!1)},children:e.label},e.value))})})]}),(0,t.jsxs)("div",{className:"relative",ref:p,children:[(0,t.jsx)("label",{htmlFor:"tableFilterDisplay",className:"mr-2 text-sm font-medium text-gray-700 sr-only",children:"Table:"}),(0,t.jsxs)("button",{id:"tableFilterDisplay",onClick:()=>I(!A),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 bg-white w-40 text-left justify-between",children:[(0,t.jsxs)("span",{children:["all"===L&&"All Tables","keys"===L&&"Keys","teams"===L&&"Teams","users"===L&&"Users"]}),(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),A&&(0,t.jsx)("div",{className:"absolute left-0 mt-2 w-40 bg-white rounded-lg shadow-lg border p-1 z-50",children:(0,t.jsx)("div",{className:"space-y-1",children:[{label:"All Tables",value:"all"},{label:"Keys",value:"keys"},{label:"Teams",value:"teams"},{label:"Users",value:"users"}].map(e=>(0,t.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${L===e.value?"bg-blue-50 text-blue-600 font-medium":"font-normal"}`,onClick:()=>{M(e.value),I(!1)},children:e.label},e.value))})})]}),(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Showing ",E.isLoading?"...":K," -"," ",E.isLoading?"...":V," of"," ",E.isLoading?"...":F," results"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",E.isLoading?"...":h," of"," ",E.isLoading?"...":B]}),(0,t.jsx)("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:E.isLoading||1===h,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>g(e=>Math.min(B,e+1)),disabled:E.isLoading||h===B,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),(0,t.jsx)(eM.DataTable,{columns:eK,data:P,renderSubComponent:H,getRowCanExpand:()=>!0})]})]})}let eY=({show:e,onOpenSettings:s})=>e?(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start",children:[(0,t.jsx)("div",{className:"text-blue-500 mr-3 flex-shrink-0 mt-0.5",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,t.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"Request/Response Data Not Available"}),(0,t.jsxs)("p",{className:"text-sm text-blue-700 mt-1",children:["To view request and response details, enable prompt storage in your LiteLLM configuration by adding the following to your ",(0,t.jsx)("code",{className:"bg-blue-100 px-1 py-0.5 rounded",children:"proxy_config.yaml"})," file",s&&(0,t.jsxs)(t.Fragment,{children:[" or"," ",(0,t.jsx)("button",{onClick:s,className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"open the settings"})," ","to configure this directly."]})]}),(0,t.jsx)("pre",{className:"mt-2 bg-white p-3 rounded border border-blue-200 text-xs font-mono overflow-auto",children:`general_settings:
  store_model_in_db: true
  store_prompts_in_spend_logs: true`}),(0,t.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:"Note: This will only affect new requests after the configuration change."})]})]}):null;var eW=e.i(362024);let eU=e=>null==e?"-":`$${(0,q.formatNumberWithCommas)(e,8)}`,eJ=e=>null==e?"-":`${(100*e).toFixed(2)}%`,eG=({costBreakdown:e,totalSpend:s,promptTokens:a,completionTokens:l,cacheHit:r})=>{let n=r?.toLowerCase()==="true",i=void 0!==a||void 0!==l;if(!(e?.input_cost!==void 0||e?.output_cost!==void 0||i||e&&(void 0!==e.discount_percent&&0!==e.discount_percent||void 0!==e.discount_amount&&0!==e.discount_amount||void 0!==e.margin_percent&&0!==e.margin_percent||void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount||void 0!==e.margin_total_amount&&0!==e.margin_total_amount)))return null;let o=e&&(void 0!==e.discount_percent&&0!==e.discount_percent||void 0!==e.discount_amount&&0!==e.discount_amount),d=e&&(void 0!==e.margin_percent&&0!==e.margin_percent||void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount||void 0!==e.margin_total_amount&&0!==e.margin_total_amount),c=n?0:e?.input_cost,m=n?0:e?.output_cost,x=n?0:e?.original_cost,u=n?0:e?.total_cost??s;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,t.jsx)(eW.Collapse,{expandIconPosition:"start",items:[{key:"1",label:(0,t.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Cost Breakdown"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mr-4",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Total:"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[eU(s),n&&" (Cached)"]})]})]}),children:(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2 max-w-2xl",children:[(0,t.jsxs)("div",{className:"flex text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Input Cost:"}),(0,t.jsxs)("span",{className:"text-gray-900",children:[eU(c),void 0!==a&&(0,t.jsxs)("span",{className:"text-gray-500 font-normal ml-1",children:["(",a.toLocaleString()," prompt tokens)"]})]})]}),(0,t.jsxs)("div",{className:"flex text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Output Cost:"}),(0,t.jsxs)("span",{className:"text-gray-900",children:[eU(m),void 0!==l&&(0,t.jsxs)("span",{className:"text-gray-500 font-normal ml-1",children:["(",l.toLocaleString()," completion tokens)"]})]})]}),e?.tool_usage_cost!==void 0&&e.tool_usage_cost>0&&(0,t.jsxs)("div",{className:"flex text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium w-1/3",children:"Tool Usage Cost:"}),(0,t.jsx)("span",{className:"text-gray-900",children:eU(e.tool_usage_cost)})]}),e?.additional_costs&&Object.keys(e.additional_costs).length>0&&(0,t.jsx)(t.Fragment,{children:Object.entries(e.additional_costs).map(([e,s])=>(0,t.jsxs)("div",{className:"flex text-sm",children:[(0,t.jsxs)("span",{className:"text-gray-600 font-medium w-1/3",children:[e,":"]}),(0,t.jsx)("span",{className:"text-gray-900",children:eU(s)})]},e))})]}),!n&&(0,t.jsx)("div",{className:"pt-2 border-t border-gray-100 max-w-2xl",children:(0,t.jsxs)("div",{className:"flex text-sm font-semibold",children:[(0,t.jsx)("span",{className:"text-gray-900 w-1/3",children:"Original LLM Cost:"}),(0,t.jsx)("span",{className:"text-gray-900",children:eU(x)})]})}),(o||d)&&(0,t.jsxs)("div",{className:"pt-2 space-y-2 max-w-2xl",children:[o&&(0,t.jsxs)("div",{className:"space-y-2",children:[void 0!==e.discount_percent&&0!==e.discount_percent&&(0,t.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,t.jsxs)("span",{className:"font-medium w-1/3",children:["Discount (",eJ(e.discount_percent),"):"]}),(0,t.jsxs)("span",{className:"text-gray-900",children:["-",eU(e.discount_amount)]})]}),void 0!==e.discount_amount&&void 0===e.discount_percent&&(0,t.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Discount Amount:"}),(0,t.jsxs)("span",{className:"text-gray-900",children:["-",eU(e.discount_amount)]})]})]}),d&&(0,t.jsxs)("div",{className:"space-y-2",children:[void 0!==e.margin_percent&&0!==e.margin_percent&&(0,t.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,t.jsxs)("span",{className:"font-medium w-1/3",children:["Margin (",eJ(e.margin_percent),"):"]}),(0,t.jsxs)("span",{className:"text-gray-900",children:["+",eU((e.margin_total_amount||0)-(e.margin_fixed_amount||0))]})]}),void 0!==e.margin_fixed_amount&&0!==e.margin_fixed_amount&&(0,t.jsxs)("div",{className:"flex text-sm text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Margin:"}),(0,t.jsxs)("span",{className:"text-gray-900",children:["+",eU(e.margin_fixed_amount)]})]})]})]}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 max-w-2xl",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"font-bold text-sm text-gray-900 w-1/3",children:"Final Calculated Cost:"}),(0,t.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:[eU(u),n&&" (Cached)"]})]})})]})}]})})};var eQ=e.i(374009),eX=e.i(700514);let eZ="Team ID",e0="Key Hash",e1="Request ID",e2="Model",e5="User ID",e4="End User",e3="Status",e6="Key Alias",e8="Error Code",e7="Error Message";var e9=e.i(608856),te=e.i(121229),te=te,tt=e.i(166406),ts=e.i(801312),ts=ts,ta=e.i(240647),tl=e.i(475254);let tr=(0,tl.default)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),tn=(0,tl.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);var ti=e.i(262218),to=e.i(149192),td=e.i(536591),td=td,tc=e.i(755151);let tm="24px",tx="request",tu="response",tp="monospace",th="#f0f0f0",{Text:tg}=ek.Typography;function tf({log:e,onClose:s,onPrevious:a,onNext:l,statusLabel:r,statusColor:n,environment:i}){let o=e.custom_llm_provider||"",d=o?(0,ez.getProviderLogoAndName)(o):null;return(0,t.jsxs)("div",{style:{padding:"16px 24px",borderBottom:`1px solid ${th}`,backgroundColor:"#fff",position:"sticky",top:0,zIndex:10},children:[(0,t.jsx)(tj,{model:e.model,providerLogo:d?.logo,providerName:d?.displayName}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[(0,t.jsx)(ty,{requestId:e.request_id}),(0,t.jsx)(tb,{onPrevious:a,onNext:l,onClose:s})]}),(0,t.jsx)(tv,{log:e,statusLabel:r,statusColor:n,environment:i})]})}function tj({model:e,providerLogo:s,providerName:a}){return(0,t.jsxs)(ew.Space,{size:8,style:{marginBottom:8},children:[s&&(0,t.jsx)("img",{src:s,alt:a||"Provider",style:{width:24,height:24},onError:e=>{e.target.style.display="none"}}),(0,t.jsxs)(ew.Space,{size:8,direction:"horizontal",children:[(0,t.jsx)(tg,{strong:!0,style:{fontSize:14},children:e}),a&&(0,t.jsx)(tg,{type:"secondary",style:{fontSize:12},children:a})]})]})}function ty({requestId:e}){return(0,t.jsx)("div",{style:{flex:1,minWidth:0},children:(0,t.jsx)(i.Tooltip,{title:e,children:(0,t.jsx)(tg,{strong:!0,copyable:{text:e,tooltips:["Copy Request ID","Copied!"]},style:{fontSize:16,fontFamily:tp,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:e})})})}function tb({onPrevious:e,onNext:s,onClose:a}){let l={border:"1px solid #d9d9d9",borderRadius:4,padding:"0 4px",fontSize:12,fontFamily:"monospace",marginLeft:4,background:"#fafafa"};return(0,t.jsxs)(ew.Space,{size:4,split:(0,t.jsx)("div",{style:{width:1,height:20,background:th}}),children:[(0,t.jsxs)(Q.Button,{type:"text",size:"small",onClick:e,children:[(0,t.jsx)(td.default,{}),(0,t.jsx)("span",{style:l,children:"K"})]}),(0,t.jsxs)(Q.Button,{type:"text",size:"small",onClick:s,children:[(0,t.jsx)(tc.DownOutlined,{}),(0,t.jsx)("span",{style:l,children:"J"})]}),(0,t.jsx)(i.Tooltip,{title:"ESC to close",children:(0,t.jsx)(Q.Button,{type:"text",icon:(0,t.jsx)(to.CloseOutlined,{}),onClick:a})})]})}function tv({log:e,statusLabel:s,statusColor:a,environment:l}){return(0,t.jsxs)(ew.Space,{size:12,children:[(0,t.jsx)(ti.Tag,{color:a,children:s}),(0,t.jsxs)(ti.Tag,{children:["Env: ",l]}),(0,t.jsxs)(ew.Space,{size:8,children:[(0,t.jsx)(tg,{type:"secondary",style:{fontSize:13},children:(0,r.default)(e.startTime).format("MMM D, YYYY h:mm:ss A")}),(0,t.jsxs)(tg,{type:"secondary",style:{fontSize:13},children:["(",(0,r.default)(e.startTime).fromNow(),")"]})]})]})}var tN=e.i(869216),t_=e.i(175712),tw=e.i(653496),tk=e.i(560445),tS=e.i(91739),tC=e.i(482725);function tT({data:e}){let[s,a]=(0,n.useState)({});if(!e||0===e.length)return null;let l=e=>new Date(1e3*e).toLocaleString();return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,t.jsx)(eW.Collapse,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Vector Store Requests"}),children:(0,t.jsx)("div",{className:"p-4",children:e.map((e,r)=>{var n,i;return(0,t.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg border p-4 mb-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Query:"}),(0,t.jsx)("span",{className:"font-mono",children:e.query})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Vector Store ID:"}),(0,t.jsx)("span",{className:"font-mono",children:e.vector_store_id})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Provider:"}),(0,t.jsx)("span",{className:"flex items-center",children:(()=>{let{logo:s,displayName:a}=(0,ez.getProviderLogoAndName)(e.custom_llm_provider);return(0,t.jsxs)(t.Fragment,{children:[s&&(0,t.jsx)("img",{src:s,alt:`${a} logo`,className:"h-5 w-5 mr-2"}),a]})})()})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Start Time:"}),(0,t.jsx)("span",{children:l(e.start_time)})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"End Time:"}),(0,t.jsx)("span",{children:l(e.end_time)})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"font-medium w-1/3",children:"Duration:"}),(0,t.jsx)("span",{children:(n=e.start_time,i=e.end_time,`${((i-n)*1e3).toFixed(2)}ms`)})]})]})]})}),(0,t.jsx)("h4",{className:"font-medium mb-2",children:"Search Results"}),(0,t.jsx)("div",{className:"space-y-2",children:e.vector_store_search_response.data.map((e,l)=>{let n=s[`${r}-${l}`]||!1;return(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 cursor-pointer",onClick:()=>{let e;return e=`${r}-${l}`,void a(t=>({...t,[e]:!t[e]}))},children:[(0,t.jsx)("svg",{className:`w-5 h-5 mr-2 transition-transform ${n?"transform rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("span",{className:"font-medium mr-2",children:["Result ",l+1]}),(0,t.jsxs)("span",{className:"text-gray-500 text-sm",children:["Score: ",(0,t.jsx)("span",{className:"font-mono",children:e.score.toFixed(4)})]})]})]}),n&&(0,t.jsx)("div",{className:"p-3 border-t bg-white",children:e.content.map((e,s)=>(0,t.jsxs)("div",{className:"mb-2 last:mb-0",children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:e.type}),(0,t.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap break-all bg-gray-50 p-2 rounded",children:e.text})]},s))})]},l)})})]},r)})})}]})})}let{Text:tL}=ek.Typography;function tM({value:e,maxWidth:s=180}){return e?(0,t.jsx)(i.Tooltip,{title:e,children:(0,t.jsx)(tL,{copyable:{text:e,tooltips:["Copy","Copied!"]},style:{maxWidth:s,display:"inline-block",verticalAlign:"bottom",fontFamily:tp,fontSize:12},ellipsis:!0,children:e})}):(0,t.jsx)(tL,{type:"secondary",children:"-"})}let{Text:tD}=ek.Typography;function tz({prompt:e=0,completion:s=0,total:a=0}){return(0,t.jsxs)(tD,{children:[a.toLocaleString()," (",e.toLocaleString()," prompt tokens + ",s.toLocaleString()," completion tokens)"]})}let tA=e=>!!e&&e instanceof Date,tI=e=>"object"==typeof e&&null!==e,tE=e=>!!e&&e instanceof Object&&"function"==typeof e;function tR(e,t){return void 0===t&&(t=!1),!e||t?`"${e}"`:e}function tO(e){let{field:t,value:s,data:a,lastElement:l,openBracket:r,closeBracket:i,level:o,style:d,shouldExpandNode:c,clickToExpandNode:m,outerRef:x,beforeExpandChange:u}=e,p=(0,n.useRef)(!1),[h,g]=(0,n.useState)(()=>c(o,s,t)),f=(0,n.useRef)(null);(0,n.useEffect)(()=>{p.current?g(c(o,s,t)):p.current=!0},[c]);let j=(0,n.useId)();if(0===a.length)return function(e){let{field:t,openBracket:s,closeBracket:a,lastElement:l,style:r}=e;return(0,n.createElement)("div",{className:r.basicChildStyle,role:"treeitem","aria-selected":void 0},(t||""===t)&&(0,n.createElement)("span",{className:r.label},tR(t,r.quotesForFieldNames),":"),(0,n.createElement)("span",{className:r.punctuation},s),(0,n.createElement)("span",{className:r.punctuation},a),!l&&(0,n.createElement)("span",{className:r.punctuation},","))}({field:t,openBracket:r,closeBracket:i,lastElement:l,style:d});let y=h?d.collapseIcon:d.expandIcon,b=h?d.ariaLables.collapseJson:d.ariaLables.expandJson,v=o+1,N=a.length-1,_=e=>{h!==e&&(!u||u({level:o,value:s,field:t,newExpandValue:e}))&&g(e)},w=e=>{if("ArrowRight"===e.key||"ArrowLeft"===e.key)e.preventDefault(),_("ArrowRight"===e.key);else if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();let t="ArrowUp"===e.key?-1:1;if(!x.current)return;let s=x.current.querySelectorAll("[role=button]"),a=-1;for(let e=0;e<s.length;e++)if(0===s[e].tabIndex){a=e;break}if(a<0)return;let l=(a+t+s.length)%s.length;s[a].tabIndex=-1,s[l].tabIndex=0,s[l].focus()}},k=()=>{var e;_(!h);let t=f.current;if(!t)return;let s=null==(e=x.current)?void 0:e.querySelector('[role=button][tabindex="0"]');s&&(s.tabIndex=-1),t.tabIndex=0,t.focus()};return(0,n.createElement)("div",{className:d.basicChildStyle,role:"treeitem","aria-expanded":h,"aria-selected":void 0},(0,n.createElement)("span",{className:y,onClick:k,onKeyDown:w,role:"button","aria-label":b,"aria-expanded":h,"aria-controls":h?j:void 0,ref:f,tabIndex:0===o?0:-1}),(t||""===t)&&(m?(0,n.createElement)("span",{className:d.clickableLabel,onClick:k,onKeyDown:w},tR(t,d.quotesForFieldNames),":"):(0,n.createElement)("span",{className:d.label},tR(t,d.quotesForFieldNames),":")),(0,n.createElement)("span",{className:d.punctuation},r),h?(0,n.createElement)("ul",{id:j,role:"group",className:d.childFieldsContainer},a.map((e,t)=>(0,n.createElement)(t$,{key:e[0]||t,field:e[0],value:e[1],style:d,lastElement:t===N,level:v,shouldExpandNode:c,clickToExpandNode:m,beforeExpandChange:u,outerRef:x}))):(0,n.createElement)("span",{className:d.collapsedContent,onClick:k,onKeyDown:w}),(0,n.createElement)("span",{className:d.punctuation},i),!l&&(0,n.createElement)("span",{className:d.punctuation},","))}function tF(e){let{field:t,value:s,style:a,lastElement:l,shouldExpandNode:r,clickToExpandNode:n,level:i,outerRef:o,beforeExpandChange:d}=e;return tO({field:t,value:s,lastElement:l||!1,level:i,openBracket:"{",closeBracket:"}",style:a,shouldExpandNode:r,clickToExpandNode:n,data:Object.keys(s).map(e=>[e,s[e]]),outerRef:o,beforeExpandChange:d})}function tB(e){let{field:t,value:s,style:a,lastElement:l,level:r,shouldExpandNode:n,clickToExpandNode:i,outerRef:o,beforeExpandChange:d}=e;return tO({field:t,value:s,lastElement:l||!1,level:r,openBracket:"[",closeBracket:"]",style:a,shouldExpandNode:n,clickToExpandNode:i,data:s.map(e=>[void 0,e]),outerRef:o,beforeExpandChange:d})}function tP(e){let t,{field:s,value:a,style:l,lastElement:r}=e,i=l.otherValue;if(null===a)t="null",i=l.nullValue;else if(void 0===a)t="undefined",i=l.undefinedValue;else if("string"==typeof a||a instanceof String){var o;o=!l.noQuotesForStringValues,t=l.stringifyStringValues?JSON.stringify(a):o?`"${a}"`:a,i=l.stringValue}else if("boolean"==typeof a||a instanceof Boolean)t=a?"true":"false",i=l.booleanValue;else if("number"==typeof a||a instanceof Number)t=a.toString(),i=l.numberValue;else"bigint"==typeof a||a instanceof BigInt?(t=`${a.toString()}n`,i=l.numberValue):t=tA(a)?a.toISOString():tE(a)?"function() { }":a.toString();return(0,n.createElement)("div",{className:l.basicChildStyle,role:"treeitem","aria-selected":void 0},(s||""===s)&&(0,n.createElement)("span",{className:l.label},tR(s,l.quotesForFieldNames),":"),(0,n.createElement)("span",{className:i},t),!r&&(0,n.createElement)("span",{className:l.punctuation},","))}function t$(e){let t=e.value;return Array.isArray(t)?(0,n.createElement)(tB,Object.assign({},e)):!tI(t)||tA(t)||tE(t)?(0,n.createElement)(tP,Object.assign({},e)):(0,n.createElement)(tF,Object.assign({},e))}let tq={container:"_2IvMF _GzYRV",basicChildStyle:"_2bkNM",childFieldsContainer:"_1BXBN",label:"_1MGIk",clickableLabel:"_2YKJg _1MGIk _1MFti",nullValue:"_2T6PJ",undefinedValue:"_1Gho6",stringValue:"_vGjyY",booleanValue:"_3zQKs",numberValue:"_1bQdo",otherValue:"_1xvuR",punctuation:"_3uHL6 _3eOF8",collapseIcon:"_oLqym _f10Tu _1MFti _1LId0",expandIcon:"_2AXVT _f10Tu _1MFti _1UmXx",collapsedContent:"_2KJWg _1pNG9 _1MFti",noQuotesForStringValues:!1,quotesForFieldNames:!1,ariaLables:{collapseJson:"collapse JSON",expandJson:"expand JSON"},stringifyStringValues:!1},tH=()=>!0,tK=e=>{let{data:t,style:s=tq,shouldExpandNode:a=tH,clickToExpandNode:l=!1,beforeExpandChange:r,compactTopLevel:i,...o}=e,d=(0,n.useRef)(null);return(0,n.createElement)("div",Object.assign({"aria-label":"JSON view"},o,{className:s.container,ref:d,role:"tree"}),i&&tI(t)?Object.entries(t).map(e=>{let[t,i]=e;return(0,n.createElement)(t$,{key:t,field:t,value:i,style:{...tq,...s},lastElement:!0,level:1,shouldExpandNode:a,clickToExpandNode:l,beforeExpandChange:r,outerRef:d})}):(0,n.createElement)(t$,{value:t,style:{...tq,...s},lastElement:!0,level:0,shouldExpandNode:a,clickToExpandNode:l,outerRef:d,beforeExpandChange:r}))},{Text:tV}=ek.Typography;function tY({data:e}){return e?(0,t.jsx)("div",{style:{maxHeight:400,overflow:"auto",background:"#fafafa",padding:12,borderRadius:4},children:(0,t.jsx)("div",{className:"[&_[role='tree']]:bg-white [&_[role='tree']]:text-slate-900",children:(0,t.jsx)(tK,{data:e,style:tq,clickToExpandNode:!0})})}):(0,t.jsx)(tV,{type:"secondary",children:"No data"})}function tW(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}function tU(e){return Array.isArray(e)?e:e?[e]:[]}function tJ(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}var tG=e.i(366308),tQ=e.i(291542);let{Text:tX}=ek.Typography;function tZ({tool:e}){let s=Object.entries(e.parameters?.properties||{}).map(([t,s])=>({key:t,name:t,type:s.type||"any",description:s.description||"-",required:e.parameters?.required?.includes(t)||!1})),a=[{title:"Parameter",dataIndex:"name",key:"name",render:(e,s)=>(0,t.jsxs)(tX,{code:!0,children:[e,s.required&&(0,t.jsx)(tX,{type:"danger",children:"*"})]})},{title:"Type",dataIndex:"type",key:"type",render:e=>(0,t.jsx)(tX,{code:!0,style:{color:"#1890ff"},children:e})},{title:"Description",dataIndex:"description",key:"description",render:e=>(0,t.jsx)(tX,{type:"secondary",children:e})}];return(0,t.jsxs)("div",{children:[e.description&&(0,t.jsx)("div",{style:{marginBottom:16},children:(0,t.jsx)(tX,{style:{lineHeight:1.6},children:e.description})}),s.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)(tX,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:8},children:"Parameters"}),(0,t.jsx)(tQ.Table,{dataSource:s,columns:a,pagination:!1,size:"small",bordered:!0})]}),e.called&&e.callData&&(0,t.jsxs)("div",{style:{marginTop:16},children:[(0,t.jsx)(tX,{type:"secondary",style:{fontSize:12,display:"block",marginBottom:8},children:"Called With"}),(0,t.jsx)("div",{style:{background:"#f6ffed",border:"1px solid #b7eb8f",borderRadius:4,padding:12},children:(0,t.jsx)("pre",{style:{margin:0,fontSize:12,whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(e.callData.arguments,null,2)})})]})]})}function t0({tool:e}){let s={type:"function",function:{name:e.name,description:e.description,parameters:e.parameters}};return(0,t.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:12,background:"#fafafa",padding:12,borderRadius:4,maxHeight:300,overflow:"auto"},children:JSON.stringify(s,null,2)})}let{Text:t1}=ek.Typography;function t2({tool:e}){let[s,a]=(0,n.useState)("formatted");return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12},children:[(0,t.jsx)(t1,{type:"secondary",style:{fontSize:12},children:"Description"}),(0,t.jsxs)(tS.Radio.Group,{size:"small",value:s,onChange:e=>a(e.target.value),children:[(0,t.jsx)(tS.Radio.Button,{value:"formatted",children:"Formatted"}),(0,t.jsx)(tS.Radio.Button,{value:"json",children:"JSON"})]})]}),"formatted"===s?(0,t.jsx)(tZ,{tool:e}):(0,t.jsx)(t0,{tool:e})]})}let{Text:t5}=ek.Typography;function t4({tool:e}){let[s,a]=(0,n.useState)(!1);return(0,t.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:8,overflow:"hidden"},children:[(0,t.jsxs)("div",{onClick:()=>a(!s),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",cursor:"pointer",background:s?"#fafafa":"#fff",transition:"background 0.2s"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,t.jsx)(tG.ToolOutlined,{style:{color:"#8c8c8c",fontSize:14}}),(0,t.jsxs)(t5,{style:{fontSize:14},children:[e.index,". ",e.name]})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,t.jsx)(ti.Tag,{color:e.called?"blue":"default",children:e.called?"called":"not called"}),s?(0,t.jsx)(tc.DownOutlined,{style:{fontSize:12,color:"#8c8c8c"}}):(0,t.jsx)(ta.RightOutlined,{style:{fontSize:12,color:"#8c8c8c"}})]})]}),s&&(0,t.jsx)("div",{style:{padding:"16px",borderTop:"1px solid #f0f0f0",background:"#fff"},children:(0,t.jsx)(t2,{tool:e})})]})}let{Text:t3}=ek.Typography;function t6({log:e}){let s=function(e){let t,s=!(t=tJ(e.proxy_server_request||e.messages))||Array.isArray(t)?[]:"object"==typeof t&&t.tools&&Array.isArray(t.tools)?t.tools:[];if(0===s.length)return[];let a=function(e){let t=tJ(e.response);if(!t||"object"!=typeof t)return[];let s=t.choices;if(Array.isArray(s)&&s.length>0){let e=s[0].message;if(e&&Array.isArray(e.tool_calls))return e.tool_calls}return[]}(e),l=new Set(a.map(e=>e.function?.name).filter(Boolean)),r=new Map;return a.forEach(e=>{let t=e.function?.name;t&&r.set(t,{id:e.id,name:t,arguments:function(e){try{return JSON.parse(e)}catch{return{}}}(e.function?.arguments||"{}")})}),s.map((e,t)=>{let s=e.function||{name:`Tool ${t+1}`},a=s.name||`Tool ${t+1}`;return{index:t+1,name:a,description:s.description||"",parameters:s.parameters||{},called:l.has(a),callData:r.get(a)}})}(e);if(0===s.length)return null;let a=s.length,l=s.filter(e=>e.called).length,r=s.slice(0,2).map(e=>e.name).join(", "),n=s.length>2;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,t.jsx)(eW.Collapse,{expandIconPosition:"start",items:[{key:"1",label:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Tools"}),(0,t.jsxs)(t3,{type:"secondary",style:{fontSize:14},children:[a," provided, ",l," called"]}),(0,t.jsxs)(t3,{type:"secondary",style:{fontSize:14},children:["â€¢ ",r,n&&"..."]})]}),children:(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:s.map(e=>(0,t.jsx)(t4,{tool:e},e.name))})}]})})}let t8=e=>{if(!e)return{};if("string"==typeof e)try{return JSON.parse(e)}catch{return{raw:e}}return e};var t7=e.i(998573);e.i(247167);var t9=e.i(931067);let se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 512a48 48 0 1096 0 48 48 0 10-96 0zm200 0a48 48 0 1096 0 48 48 0 10-96 0zm-400 0a48 48 0 1096 0 48 48 0 10-96 0zm661.2-173.6c-22.6-53.7-55-101.9-96.3-143.3a444.35 444.35 0 00-143.3-96.3C630.6 75.7 572.2 64 512 64h-2c-60.6.3-119.3 12.3-174.5 35.9a445.35 445.35 0 00-142 96.5c-40.9 41.3-73 89.3-95.2 142.8-23 55.4-34.6 114.3-34.3 174.9A449.4 449.4 0 00112 714v152a46 46 0 0046 46h152.1A449.4 449.4 0 00510 960h2.1c59.9 0 118-11.6 172.7-34.3a444.48 444.48 0 00142.8-95.2c41.3-40.9 73.8-88.7 96.5-142 23.6-55.2 35.6-113.9 35.9-174.5.3-60.9-11.5-120-34.8-175.6zm-151.1 438C704 845.8 611 884 512 884h-1.7c-60.3-.3-120.2-15.3-173.1-43.5l-8.4-4.5H188V695.2l-4.5-8.4C155.3 633.9 140.3 574 140 513.7c-.4-99.7 37.7-193.3 107.6-263.8 69.8-70.5 163.1-109.5 262.8-109.9h1.7c50 0 98.5 9.7 144.2 28.9 44.6 18.7 84.6 45.6 119 80 34.3 34.3 61.3 74.4 80 119 19.4 46.2 29.1 95.2 28.9 145.8-.6 99.6-39.7 192.9-110.1 262.7z"}}]},name:"message",theme:"outlined"};var st=e.i(9583),ss=n.forwardRef(function(e,t){return n.createElement(st.default,(0,t9.default)({},e,{ref:t,icon:se}))}),td=td;let{Text:sa}=ek.Typography;function sl({type:e,tokens:s,cost:a,onCopy:l,isCollapsed:r,onToggleCollapse:n}){return(0,t.jsxs)("div",{onClick:n,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",borderBottom:r?"none":"1px solid #f0f0f0",background:"#fafafa",cursor:n?"pointer":"default",transition:"background 0.15s ease"},onMouseEnter:e=>{n&&(e.currentTarget.style.background="#f5f5f5")},onMouseLeave:e=>{e.currentTarget.style.background="#fafafa"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[n&&(0,t.jsx)("div",{style:{display:"flex",alignItems:"center"},children:r?(0,t.jsx)(tc.DownOutlined,{style:{fontSize:10,color:"#8c8c8c"}}):(0,t.jsx)(td.default,{style:{fontSize:10,color:"#8c8c8c"}})}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:["input"===e?(0,t.jsx)(ss,{style:{color:"#8c8c8c",fontSize:14}}):(0,t.jsx)("span",{style:{fontSize:14,filter:"grayscale(1)",opacity:.6},children:"âœ¨"}),(0,t.jsx)(sa,{style:{fontWeight:500,fontSize:14},children:"input"===e?"Input":"Output"})]}),void 0!==s&&(0,t.jsxs)(sa,{type:"secondary",style:{fontSize:12},children:["Tokens: ",s.toLocaleString()]}),void 0!==a&&(0,t.jsxs)(sa,{type:"secondary",style:{fontSize:12},children:["Cost: $",a.toFixed(6)]})]}),(0,t.jsx)(i.Tooltip,{title:"Copy",children:(0,t.jsx)(Q.Button,{type:"text",size:"small",icon:(0,t.jsx)(tt.CopyOutlined,{}),onClick:e=>{e.stopPropagation(),l()}})})]})}let{Text:sr}=ek.Typography;function sn({label:e,content:s,defaultExpanded:a=!1}){let[l,r]=(0,n.useState)(a),[i,o]=(0,n.useState)(!1),d=s?.length||0;return s&&0!==d?(0,t.jsxs)("div",{style:{marginBottom:8},children:[(0,t.jsxs)("div",{onClick:()=>r(!l),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",padding:"4px 0",borderRadius:4,background:i?"#f5f5f5":"transparent",transition:"background 0.15s ease",marginBottom:4*!!l},children:[l?(0,t.jsx)(tc.DownOutlined,{style:{fontSize:10,color:"#8c8c8c"}}):(0,t.jsx)(ta.RightOutlined,{style:{fontSize:10,color:"#8c8c8c"}}),(0,t.jsx)(sr,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase"},children:e}),(0,t.jsxs)(sr,{type:"secondary",style:{fontSize:10},children:["(",d.toLocaleString()," chars)"]})]}),(0,t.jsx)("div",{style:{maxHeight:l?"2000px":"0px",overflow:"hidden",transition:"max-height 0.2s ease-out, opacity 0.2s ease-out",opacity:+!!l},children:(0,t.jsx)("div",{style:{paddingLeft:16,fontSize:13,lineHeight:1.7,color:"#262626",borderLeft:"1px solid #f0f0f0",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:s})})]}):null}let{Text:si}=ek.Typography;function so({tool:e,compact:s=!1}){return(0,t.jsxs)("div",{style:{background:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:6,padding:s?"6px 10px":"10px 14px",marginTop:8,fontFamily:"monospace",fontSize:12,position:"relative"},children:[(0,t.jsx)("div",{style:{position:"absolute",top:-8,left:12,background:"#fff",padding:"0 6px",fontSize:10,color:"#8c8c8c",border:"1px solid #e9ecef",borderRadius:3},children:"function"}),(0,t.jsx)(si,{strong:!0,style:{fontSize:13,display:"block",marginBottom:6},children:e.name}),Object.keys(e.arguments).length>0&&(0,t.jsx)("div",{children:Object.entries(e.arguments).map(([e,s])=>(0,t.jsxs)("div",{style:{marginBottom:2},children:[(0,t.jsxs)(si,{type:"secondary",style:{fontSize:12},children:[e,":"," "]}),(0,t.jsx)(si,{style:{fontSize:12},children:JSON.stringify(s)})]},e))})]})}let{Text:sd}=ek.Typography;function sc({label:e,content:s,toolCalls:a,isCompact:l=!1}){let r=s&&"null"!==s&&s.length>0?s:null,n=a&&a.length>0;return r||n?(0,t.jsxs)("div",{style:{marginBottom:8*!!l},children:[(0,t.jsx)(sd,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase",display:"block",marginBottom:3},children:e}),r&&(0,t.jsx)("div",{style:{fontSize:13,lineHeight:1.7,color:"#262626",whiteSpace:"pre-wrap",wordBreak:"break-word",marginBottom:6*!!n},children:r}),n&&(0,t.jsx)("div",{children:a.map((e,s)=>(0,t.jsx)(so,{tool:e,compact:l},e.id||s))})]}):null}let{Text:sm}=ek.Typography;function sx({messages:e}){let[s,a]=(0,n.useState)(!1),[l,r]=(0,n.useState)(!1);return 0===e.length?null:(0,t.jsxs)("div",{style:{marginBottom:8},children:[(0,t.jsxs)("div",{onClick:()=>a(!s),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{display:"flex",alignItems:"center",gap:6,cursor:"pointer",padding:"4px 0",borderRadius:4,background:l?"#f5f5f5":"transparent",transition:"background 0.15s ease",marginBottom:4*!!s},children:[s?(0,t.jsx)(tc.DownOutlined,{style:{fontSize:10,color:"#8c8c8c"}}):(0,t.jsx)(ta.RightOutlined,{style:{fontSize:10,color:"#8c8c8c"}}),(0,t.jsxs)(sm,{type:"secondary",style:{fontSize:10,letterSpacing:"0.5px",textTransform:"uppercase"},children:["HISTORY (",e.length," message",1!==e.length?"s":"",")"]})]}),(0,t.jsx)("div",{style:{maxHeight:s?"2000px":"0px",overflow:"hidden",transition:"max-height 0.2s ease-out, opacity 0.2s ease-out",opacity:+!!s},children:(0,t.jsx)("div",{style:{paddingLeft:16,borderLeft:"1px solid #f0f0f0"},children:e.map((e,s)=>(0,t.jsx)(sc,{label:e.role.toUpperCase(),content:e.content,toolCalls:e.toolCalls,isCompact:!0},s))})})]})}function su({messages:e,promptTokens:s,inputCost:a}){let[l,r]=(0,n.useState)(!1);if(0===e.length)return null;let i=e.find(e=>"system"===e.role),o=e.filter(e=>"system"!==e.role),d=o.length>0?o[o.length-1]:null,c=o.slice(0,-1);return(0,t.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,marginBottom:8,overflow:"hidden"},children:[(0,t.jsx)(sl,{type:"input",tokens:s,cost:a,onCopy:()=>{let e=d?.content||"";navigator.clipboard.writeText(e),t7.message.success("Input copied")},isCollapsed:l,onToggleCollapse:()=>r(!l)}),(0,t.jsx)("div",{style:{maxHeight:l?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!l},children:(0,t.jsxs)("div",{style:{padding:"12px 16px"},children:[i&&(0,t.jsx)(sn,{label:"SYSTEM",content:i.content,defaultExpanded:!!(i.content&&i.content.length<200)}),c.length>0&&(0,t.jsx)(sx,{messages:c}),d&&(0,t.jsx)(sc,{label:d.role.toUpperCase(),content:d.content,toolCalls:d.toolCalls})]})})]})}let{Text:sp}=ek.Typography;function sh({message:e,completionTokens:s,outputCost:a}){let[l,r]=(0,n.useState)(!1),i=()=>{if(!e)return;let t=e.content||"";navigator.clipboard.writeText(t),t7.message.success("Output copied")};return e?(0,t.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,overflow:"hidden"},children:[(0,t.jsx)(sl,{type:"output",tokens:s,cost:a,onCopy:i,isCollapsed:l,onToggleCollapse:()=>r(!l)}),(0,t.jsx)("div",{style:{maxHeight:l?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!l},children:(0,t.jsx)("div",{style:{padding:"12px 16px"},children:(0,t.jsx)(sc,{label:"ASSISTANT",content:e.content,toolCalls:e.toolCalls})})})]}):(0,t.jsxs)("div",{style:{border:"1px solid #f0f0f0",borderRadius:6,overflow:"hidden"},children:[(0,t.jsx)(sl,{type:"output",tokens:s,cost:a,onCopy:i,isCollapsed:l,onToggleCollapse:()=>r(!l)}),(0,t.jsx)("div",{style:{maxHeight:l?"0px":"10000px",overflow:"hidden",transition:"max-height 0.3s ease-out, opacity 0.3s ease-out",opacity:+!l},children:(0,t.jsx)("div",{style:{padding:"12px 16px"},children:(0,t.jsx)(sp,{type:"secondary",style:{fontSize:13,fontStyle:"italic"},children:"No response data available"})})})]})}function sg({request:e,response:s,metrics:a}){let l,r,n,{requestMessages:i,responseMessage:o}=(l=[],e?.messages&&Array.isArray(e.messages)&&e.messages.forEach(e=>{let t;l.push({role:e.role||"user",content:"string"==typeof(t=e.content)?t:Array.isArray(t)?t.map(e=>"string"==typeof e?e:"text"===e.type?e.text:"image_url"===e.type?"[Image]":JSON.stringify(e)).join("\n"):JSON.stringify(t),toolCallId:e.tool_call_id})}),r=null,(n=s?.choices?.[0]?.message)&&(r={role:n.role||"assistant",content:n.content||"",toolCalls:(e=>{if(e&&Array.isArray(e))return e.map(e=>({id:e.id||"",name:e.function?.name||"unknown",arguments:t8(e.function?.arguments)}))})(n.tool_calls)}),{requestMessages:l,responseMessage:r});return(0,t.jsxs)("div",{children:[(0,t.jsx)(su,{messages:i,promptTokens:a?.prompt_tokens,inputCost:a?.input_cost}),(0,t.jsx)(sh,{message:o,completionTokens:a?.completion_tokens,outputCost:a?.output_cost})]})}let{Text:sf}=ek.Typography;function sj({logEntry:e,onOpenSettings:s,isLoadingDetails:a=!1,accessToken:l}){var r,n;let i=e.metadata||{},o="failure"===i.status,d=o?i.error_information:null,c=!!(r=e.messages)&&(Array.isArray(r)?r.length>0:"object"==typeof r&&Object.keys(r).length>0),m=!!(n=e.response)&&Object.keys(tW(n)).length>0,x=!c&&!m&&!o&&!a,u=i?.guardrail_information,p=tU(u),h=p.length>0,g=p.reduce((e,t)=>{let s=t?.masked_entity_count;return s?e+Object.values(s).reduce((e,t)=>"number"==typeof t?e+t:e,0):e},0),f=0===p.length?"-":1===p.length?p[0]?.guardrail_name??"-":`${p.length} guardrails`,j=i.vector_store_request_metadata&&Array.isArray(i.vector_store_request_metadata)&&i.vector_store_request_metadata.length>0;return(0,t.jsxs)("div",{style:{padding:`${tm} ${tm} 0`},children:[o&&d&&(0,t.jsx)(tk.Alert,{type:"error",showIcon:!0,message:"Request Failed",description:(0,t.jsx)(sy,{errorInfo:d}),className:"mb-6"}),e.request_tags&&Object.keys(e.request_tags).length>0&&(0,t.jsx)(sb,{tags:e.request_tags}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,t.jsx)(t_.Card,{title:"Request Details",size:"small",bordered:!1,style:{marginBottom:0},children:(0,t.jsxs)(tN.Descriptions,{column:2,size:"small",children:[(0,t.jsx)(tN.Descriptions.Item,{label:"Model",children:e.model}),(0,t.jsx)(tN.Descriptions.Item,{label:"Provider",children:e.custom_llm_provider||"-"}),(0,t.jsx)(tN.Descriptions.Item,{label:"Call Type",children:e.call_type}),(0,t.jsx)(tN.Descriptions.Item,{label:"Model ID",children:(0,t.jsx)(tM,{value:e.model_id})}),(0,t.jsx)(tN.Descriptions.Item,{label:"API Base",children:(0,t.jsx)(tM,{value:e.api_base,maxWidth:200})}),e.requester_ip_address&&(0,t.jsx)(tN.Descriptions.Item,{label:"IP Address",children:e.requester_ip_address}),h&&(0,t.jsx)(tN.Descriptions.Item,{label:"Guardrail",children:(0,t.jsx)(sv,{label:f,maskedCount:g})})]})})}),(0,t.jsx)(sN,{logEntry:e,metadata:i}),(0,t.jsx)(eG,{costBreakdown:i?.cost_breakdown,totalSpend:e.spend??0,promptTokens:e.prompt_tokens,completionTokens:e.completion_tokens,cacheHit:e.cache_hit}),(0,t.jsx)(t6,{log:e}),x&&(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(eY,{show:x,onOpenSettings:s})}),a?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6 p-8 text-center",children:[(0,t.jsx)(tC.Spin,{size:"default"}),(0,t.jsx)("div",{style:{marginTop:8,color:"#999"},children:"Loading request & response data..."})]}):(0,t.jsx)(s_,{hasResponse:m,hasError:o,getRawRequest:()=>tW(e.proxy_server_request||e.messages),getFormattedResponse:()=>o&&d?{error:{message:d.error_message||"An error occurred",type:d.error_class||"error",code:d.error_code||"unknown",param:null}}:tW(e.response),logEntry:e}),h&&(0,t.jsx)("div",{id:"guardrail-section",children:(0,t.jsx)($,{data:u,accessToken:l??null,logEntry:{request_id:e.request_id,user:e.user,model:e.model,startTime:e.startTime,metadata:e.metadata}})}),j&&(0,t.jsx)(tT,{data:i.vector_store_request_metadata}),e.metadata&&Object.keys(e.metadata).length>0&&(0,t.jsx)(sk,{metadata:e.metadata}),(0,t.jsx)("div",{style:{height:tm}})]})}function sy({errorInfo:e}){return(0,t.jsxs)("div",{children:[e.error_code&&(0,t.jsxs)("div",{children:[(0,t.jsx)(sf,{strong:!0,children:"Error Code:"})," ",e.error_code]}),e.error_message&&(0,t.jsxs)("div",{children:[(0,t.jsx)(sf,{strong:!0,children:"Message:"})," ",e.error_message]})]})}function sb({tags:e}){return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden p-4 mb-6",children:[(0,t.jsx)(sf,{strong:!0,style:{display:"block",marginBottom:8,fontSize:16},children:"Tags"}),(0,t.jsx)(ew.Space,{size:8,wrap:!0,children:Object.entries(e).map(([e,s])=>(0,t.jsxs)(ti.Tag,{children:[e,": ",String(s)]},e))})]})}function sv({label:e,maskedCount:s}){return(0,t.jsxs)(ew.Space,{size:8,children:[(0,t.jsx)("a",{onClick:()=>{let e=document.getElementById("guardrail-section");e&&e.scrollIntoView({behavior:"smooth"})},style:{cursor:"pointer"},children:e}),s>0&&(0,t.jsxs)(ti.Tag,{color:"blue",children:[s," masked"]})]})}function sN({logEntry:e,metadata:s}){let a=e.cache_hit||s?.additional_usage_values?.cache_read_input_tokens&&s.additional_usage_values.cache_read_input_tokens>0,l=String(e.cache_hit??"None"),n="true"===l.toLowerCase()?"green":"false"===l.toLowerCase()?"red":"default";return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,t.jsx)(t_.Card,{title:"Metrics",size:"small",style:{marginBottom:0},children:(0,t.jsxs)(tN.Descriptions,{column:2,size:"small",children:[(0,t.jsx)(tN.Descriptions.Item,{label:"Tokens",children:(0,t.jsx)(tz,{prompt:e.prompt_tokens,completion:e.completion_tokens,total:e.total_tokens})}),(0,t.jsxs)(tN.Descriptions.Item,{label:"Cost",children:["$",(0,q.formatNumberWithCommas)(e.spend||0,8)]}),(0,t.jsxs)(tN.Descriptions.Item,{label:"Duration",children:[e.duration?.toFixed(3)," s"]}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tN.Descriptions.Item,{label:"Cache Hit",children:(0,t.jsx)(ti.Tag,{color:n,children:l})}),s?.additional_usage_values?.cache_read_input_tokens>0&&(0,t.jsx)(tN.Descriptions.Item,{label:"Cache Read Tokens",children:(0,q.formatNumberWithCommas)(s.additional_usage_values.cache_read_input_tokens)}),s?.additional_usage_values?.cache_creation_input_tokens>0&&(0,t.jsx)(tN.Descriptions.Item,{label:"Cache Creation Tokens",children:(0,q.formatNumberWithCommas)(s.additional_usage_values.cache_creation_input_tokens)})]}),s?.litellm_overhead_time_ms!==void 0&&null!==s.litellm_overhead_time_ms&&(0,t.jsxs)(tN.Descriptions.Item,{label:"LiteLLM Overhead",children:[s.litellm_overhead_time_ms.toFixed(2)," ms"]}),(0,t.jsx)(tN.Descriptions.Item,{label:"Retries",children:s?.attempted_retries!==void 0&&s?.attempted_retries!==null?s.attempted_retries>0?(0,t.jsxs)(t.Fragment,{children:[s.attempted_retries,void 0!==s.max_retries&&null!==s.max_retries?` / ${s.max_retries}`:""]}):(0,t.jsx)(ti.Tag,{color:"green",children:"None"}):"-"}),(0,t.jsx)(tN.Descriptions.Item,{label:"Start Time",children:(0,r.default)(e.startTime).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")}),(0,t.jsx)(tN.Descriptions.Item,{label:"End Time",children:(0,r.default)(e.endTime).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]")})]})})})}function s_({hasResponse:e,hasError:s,getRawRequest:a,getFormattedResponse:l,logEntry:r}){let[i,o]=(0,n.useState)(tx),[d,c]=(0,n.useState)("pretty"),m=r.spend??0,x=r.prompt_tokens||0,u=r.completion_tokens||0,p=x+u,h=r.metadata?.cost_breakdown,g=h?.input_cost!==void 0&&h?.output_cost!==void 0,f=g?h.input_cost??0:p>0?m*x/p:0,j=g?h.output_cost??0:p>0?m*u/p:0;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,t.jsx)(eW.Collapse,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},onClick:e=>{e.target.closest(".ant-radio-group")&&e.stopPropagation()},children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",style:{margin:0},children:"Request & Response"}),(0,t.jsxs)(tS.Radio.Group,{size:"small",value:d,onChange:e=>c(e.target.value),children:[(0,t.jsx)(tS.Radio.Button,{value:"pretty",children:"Pretty"}),(0,t.jsx)(tS.Radio.Button,{value:"json",children:"JSON"})]})]}),children:(0,t.jsx)("div",{children:"pretty"===d?(0,t.jsx)(sg,{request:a(),response:l(),metrics:{prompt_tokens:x,completion_tokens:u,input_cost:f,output_cost:j}}):(0,t.jsx)(tw.Tabs,{activeKey:i,onChange:e=>o(e),tabBarExtraContent:(0,t.jsx)(sf,{copyable:{text:JSON.stringify(i===tx?a():l(),null,2),tooltips:["Copy JSON","Copied!"]},disabled:i===tu&&!e&&!s}),items:[{key:tx,label:"Request",children:(0,t.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:(0,t.jsx)(tY,{data:a(),mode:"formatted"})})},{key:tu,label:"Response",children:(0,t.jsx)("div",{style:{paddingTop:16,paddingBottom:16},children:e||s?(0,t.jsx)(tY,{data:l(),mode:"formatted"}):(0,t.jsx)("div",{style:{textAlign:"center",padding:20,color:"#999",fontStyle:"italic"},children:"Response data not available"})})}]})})}]})})}function sw({guardrailEntries:e}){let s=e.every(e=>{let t=e?.guardrail_status||e?.status;return"pass"===t||"passed"===t||"success"===t});return(0,t.jsx)("div",{style:{textAlign:"left",marginBottom:12},children:(0,t.jsxs)("div",{onClick:()=>{let e=document.getElementById("guardrail-section");e&&e.scrollIntoView({behavior:"smooth"})},style:{display:"inline-flex",alignItems:"center",gap:6,padding:"4px 12px",borderRadius:16,cursor:"pointer",fontSize:13,fontWeight:500,backgroundColor:s?"#f0fdf4":"#fef2f2",color:s?"#15803d":"#b91c1c",border:`1px solid ${s?"#bbf7d0":"#fecaca"}`},children:[s?"âœ“":"âœ—"," ",e.length," guardrail",1!==e.length?"s":""," evaluated",(0,t.jsx)("span",{style:{fontSize:11,opacity:.7},children:"â†“"})]})})}function sk({metadata:e}){return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full overflow-hidden mb-6",children:(0,t.jsx)(eW.Collapse,{defaultActiveKey:["1"],expandIconPosition:"start",items:[{key:"1",label:(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Metadata"}),children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:8},children:(0,t.jsx)(sf,{copyable:{text:JSON.stringify(e,null,2),tooltips:["Copy Metadata","Copied!"]}})}),(0,t.jsx)("pre",{style:{maxHeight:300,overflowY:"auto",fontSize:12,fontFamily:tp,whiteSpace:"pre-wrap",wordBreak:"break-all",margin:0},children:JSON.stringify(e,null,2)})]})}]})})}var sS=e.i(135214);function sC({row:e,isSelected:s,onClick:a}){let l=eR.includes(e.call_type),r=null!=e.duration?e.duration.toFixed(3):e.startTime&&e.endTime?((Date.parse(e.endTime)-Date.parse(e.startTime))/1e3).toFixed(3):"-";return(0,t.jsxs)("button",{type:"button",className:`w-full text-left pl-8 pr-2 py-1 transition-colors ${s?"bg-blue-50":"hover:bg-slate-100"}`,onClick:a,children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[l?(0,t.jsx)(tn,{size:12,className:"text-slate-500 flex-shrink-0"}):(0,t.jsx)(tr,{size:12,className:"text-slate-500 flex-shrink-0"}),(0,t.jsx)("span",{className:"text-xs font-medium text-slate-900 truncate",children:function(e,t){let s=(t||"").trim();if(eR.includes(e))return s.replace(/^mcp:\s*/i,"").split("/").pop()||s||"mcp_tool";let a=(s.split("/").pop()||s).replace(/-20\d{6}.*$/i,"").replace(/:.*$/,""),l=a.match(/claude-[a-z0-9-]+/i);return l?l[0]:a||"llm_call"}(e.call_type,e.model)})]}),(0,t.jsxs)("div",{className:"text-[10px] text-slate-500 mt-0 flex items-center gap-1.5 font-mono",children:[(0,t.jsxs)("span",{children:[r,"s"]}),e.spend?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Â·"}),(0,t.jsx)("span",{children:(0,q.getSpendString)(e.spend)})]}):null,e.total_tokens?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Â·"}),(0,t.jsxs)("span",{children:[e.total_tokens," tok"]})]}):null]})]})}function sT({open:e,onClose:s,logEntry:l,sessionId:r,accessToken:i,onOpenSettings:o,allLogs:d=[],onSelectLog:c,startTime:m}){let x=!!r,[u,p]=(0,n.useState)(null),[h,g]=(0,n.useState)(!1),[f,j]=(0,n.useState)(!1),{data:y=[]}=(0,a.useQuery)({queryKey:["sessionLogs",r],queryFn:async()=>{if(!r||!i)return[];let e=await (0,b.sessionSpendLogsCall)(i,r);return(e.data||e||[]).map(e=>({...e,duration:(Date.parse(e.endTime)-Date.parse(e.startTime))/1e3})).sort((e,t)=>{let s=+!!eR.includes(e.call_type),a=+!!eR.includes(t.call_type);return s!==a?s-a:new Date(e.startTime).getTime()-new Date(t.startTime).getTime()})},enabled:!!(e&&x&&r&&i)}),v=(0,n.useMemo)(()=>x?y.length?u?y.find(e=>e.request_id===u)||y[0]:l?.request_id&&y.find(e=>e.request_id===l.request_id)||y[0]:null:l,[x,l,u,y]);(0,n.useEffect)(()=>{x&&y.length&&(u&&y.some(e=>e.request_id===u)||p(l?.request_id&&y.some(e=>e.request_id===l.request_id)?l.request_id:y[0].request_id))},[x,l,u,y]),(0,n.useEffect)(()=>{e?g(!1):(x&&p(null),j(!1))},[e,x]);let{selectNextLog:N,selectPreviousLog:_}=function({isOpen:e,currentLog:t,allLogs:s,onClose:a,onSelectLog:l}){(0,n.useEffect)(()=>{let t=t=>{var s;if(!((s=t.target)instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&e)switch(t.key){case"Escape":a();break;case"j":case"J":i();break;case"k":case"K":r()}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,t,s]);let r=()=>{if(!t||!s.length||!l)return;let e=s.findIndex(e=>e.request_id===t.request_id);e<s.length-1&&l(s[e+1])},i=()=>{if(!t||!s.length||!l)return;let e=s.findIndex(e=>e.request_id===t.request_id);e>0&&l(s[e-1])};return{selectNextLog:r,selectPreviousLog:i}}({isOpen:e,currentLog:v,allLogs:x?y:d,onClose:s,onSelectLog:e=>{x&&p(e.request_id),c?.(e)}}),w=((e,t,s)=>{let{accessToken:l}=(0,sS.default)();return(0,a.useQuery)({queryKey:["logDetails",e,t,l],queryFn:async()=>l&&e&&t?await (0,b.uiSpendLogDetailsCall)(l,e,t):null,enabled:s&&!!l&&!!e&&!!t,staleTime:6e5,gcTime:6e5})})(v?.request_id,m,e&&!!v?.request_id),k=w.data,S=w.isLoading,C=(0,n.useMemo)(()=>v?{...v,messages:k?.messages||v.messages,response:k?.response||v.response,proxy_server_request:k?.proxy_server_request||v.proxy_server_request}:null,[v,k]),T=v?.metadata||{},L="failure"===T.status?"Failure":"Success",M="failure"===T.status?"error":"success",D=T?.user_api_key_team_alias||"default",z=y.reduce((e,t)=>e+(t.spend||0),0),A=y.length>0?new Date(Math.min(...y.map(e=>new Date(e.startTime).getTime()))):null,I=y.length>0?new Date(Math.max(...y.map(e=>new Date(e.endTime).getTime()))):null,E=A&&I?((I.getTime()-A.getTime())/1e3).toFixed(2):"0.00",R=y.filter(e=>!eR.includes(e.call_type)).length,O=y.filter(e=>eR.includes(e.call_type)).length,F=x?y:v?[v]:[],B=x?r||"":v?.request_id||"",P=B.length>14?`${B.slice(0,11)}...`:B,$=async()=>{if(B)try{await navigator.clipboard.writeText(B),j(!0),setTimeout(()=>j(!1),1200)}catch{}};return v&&C?(0,t.jsx)(e9.Drawer,{title:null,placement:"right",onClose:s,open:e,width:"60%",closable:!1,mask:!0,maskClosable:!0,styles:{body:{padding:0,overflow:"hidden"},header:{display:"none"}},children:(0,t.jsxs)("div",{style:{height:"100%"},className:"flex relative",children:[h?(0,t.jsx)(Q.Button,{type:"text",size:"small",icon:(0,t.jsx)(ta.RightOutlined,{}),onClick:()=>g(!1),className:"absolute top-2 left-2 z-20 !bg-white !border !border-slate-200 !rounded-md","aria-label":"Expand trace sidebar"}):(0,t.jsx)(Q.Button,{type:"text",size:"small",icon:(0,t.jsx)(ts.default,{}),onClick:()=>g(!0),className:"absolute top-2 left-2 z-20 !bg-white !border !border-slate-200 !rounded-md","aria-label":"Collapse trace sidebar"}),!h&&(0,t.jsxs)("div",{className:"border-r border-slate-200 bg-slate-50 flex flex-col",style:{width:224},children:[(0,t.jsxs)("div",{className:"pl-12 pr-3 py-2 border-b border-slate-200 bg-white",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-2",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:x?"Session":"Trace"}),(0,t.jsxs)("div",{className:"font-mono text-[12px] text-slate-900 leading-tight flex items-center gap-1",children:[(0,t.jsx)("span",{className:"truncate",children:P}),(0,t.jsx)("button",{type:"button",onClick:$,className:"text-slate-400 hover:text-slate-600","aria-label":"Copy trace id",children:f?(0,t.jsx)(te.default,{className:"text-[11px]"}):(0,t.jsx)(tt.CopyOutlined,{className:"text-[11px]"})})]})]})}),(0,t.jsxs)("div",{className:"mt-1 text-[11px] text-slate-500 font-mono",children:[F.length," req",(0,t.jsx)("span",{className:"mx-1.5",children:"Â·"}),x?`${R} LLM`:`${F.filter(e=>!eR.includes(e.call_type)).length} LLM`,(0,t.jsx)("span",{className:"mx-1.5",children:"Â·"}),x?`${O} MCP`:`${F.filter(e=>eR.includes(e.call_type)).length} MCP`,(0,t.jsx)("span",{className:"mx-1.5",children:"Â·"}),x?(0,q.getSpendString)(z):(0,q.getSpendString)(v.spend||0),x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"mx-1.5",children:"Â·"}),E,"s"]})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[tU(T?.guardrail_information).length>0&&(0,t.jsx)("div",{className:"px-3 pt-2",children:(0,t.jsx)(sw,{guardrailEntries:tU(T?.guardrail_information)})}),x?(0,t.jsx)("div",{className:"py-1",children:(0,t.jsxs)("div",{className:"relative pl-2",children:[(0,t.jsx)("div",{className:"absolute left-4 top-1 bottom-1 border-l border-slate-300"}),F.map((e,s)=>{let a=s===F.length-1;return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-4 top-3 w-3 border-t border-slate-300"}),a&&(0,t.jsx)("div",{className:"absolute left-4 top-3 bottom-0 w-px bg-slate-50"}),(0,t.jsx)(sC,{row:e,isSelected:e.request_id===v.request_id,onClick:()=>{p(e.request_id),c?.(e)}})]},e.request_id)})]})}):(0,t.jsx)("div",{className:"py-1",children:F.map(e=>(0,t.jsx)(sC,{row:e,isSelected:e.request_id===v.request_id,onClick:()=>c?.(e)},e.request_id))})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)(tf,{log:v,onClose:s,onPrevious:_,onNext:N,statusLabel:L,statusColor:M,environment:D}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsx)(sj,{logEntry:C,onOpenSettings:o,isLoadingDetails:S,accessToken:i??null})})]})]})}):null}var sL=e.i(727749),sM=e.i(153472),sD=e.i(954616);let sz=async(e,t)=>{let s=(0,b.getProxyBaseUrl)(),a=s?`${s}/config/update`:"/config/update",l=await fetch(a,{method:"POST",headers:{[(0,b.getGlobalLitellmHeaderName)()]:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({general_settings:{store_prompts_in_spend_logs:t.store_prompts_in_spend_logs,...t.maximum_spend_logs_retention_period&&{maximum_spend_logs_retention_period:t.maximum_spend_logs_retention_period}}})});if(!l.ok){let e=await l.json().catch(()=>({}));throw Error(e?.error?.message||e?.message||e?.detail||"Failed to update spend logs settings")}return await l.json()};var sA=e.i(190702),sI=e.i(637235),sE=e.i(808613),sR=e.i(311451),sO=e.i(212931),sF=e.i(981339),sB=e.i(790848);let sP=({isVisible:e,onCancel:s,onSuccess:a})=>{let[l]=sE.Form.useForm(),{mutateAsync:r,isPending:i}=(()=>{let{accessToken:e}=(0,sS.default)();return(0,sD.useMutation)({mutationFn:async t=>{if(!e)throw Error("Access token is required");return await sz(e,t)}})})(),{mutateAsync:o,isPending:d}=(0,sM.useDeleteProxyConfigField)(),{data:c,isLoading:m,refetch:x}=(0,sM.useProxyConfig)(sM.ConfigType.GENERAL_SETTINGS),u=sE.Form.useWatch("store_prompts_in_spend_logs",l);(0,n.useEffect)(()=>{e&&x()},[e,x]);let p=(0,n.useMemo)(()=>{if(!c)return{store_prompts_in_spend_logs:!1,maximum_spend_logs_retention_period:void 0};let e=c.find(e=>"store_prompts_in_spend_logs"===e.field_name),t=c.find(e=>"maximum_spend_logs_retention_period"===e.field_name);return{store_prompts_in_spend_logs:e?.field_value??!1,maximum_spend_logs_retention_period:t?.field_value??void 0}},[c]),h=async e=>{try{let t=e.maximum_spend_logs_retention_period;if(!t||"string"==typeof t&&""===t.trim())try{await o({config_type:sM.ConfigType.GENERAL_SETTINGS,field_name:sM.GeneralSettingsFieldName.MAXIMUM_SPEND_LOGS_RETENTION_PERIOD})}catch(e){console.warn("Failed to delete retention period field (may not exist):",e)}let s={store_prompts_in_spend_logs:e.store_prompts_in_spend_logs,...t&&"string"==typeof t&&""!==t.trim()&&{maximum_spend_logs_retention_period:t}};await r(s,{onSuccess:()=>{sL.default.success("Spend logs settings updated successfully"),x(),a?.()},onError:e=>{sL.default.fromBackend("Failed to save spend logs settings: "+(0,sA.parseErrorMessage)(e))}})}catch(e){sL.default.fromBackend("Failed to save spend logs settings: "+(0,sA.parseErrorMessage)(e))}},g=()=>{l.resetFields(),s()};return(0,t.jsx)(sO.Modal,{title:(0,t.jsx)(ek.Typography.Title,{level:5,children:"Spend Logs Settings"}),open:e,footer:(0,t.jsxs)(ew.Space,{children:[(0,t.jsx)(Q.Button,{onClick:g,disabled:i||d||m,children:"Cancel"}),(0,t.jsx)(Q.Button,{type:"primary",loading:i||d,disabled:m,onClick:()=>l.submit(),children:i||d?"Saving...":"Save Settings"})]}),onCancel:g,children:(0,t.jsxs)(sE.Form,{form:l,layout:"horizontal",onFinish:h,initialValues:p,children:[(0,t.jsx)(sE.Form.Item,{label:"Store Prompts in Spend Logs",name:"store_prompts_in_spend_logs",tooltip:c?.find(e=>"store_prompts_in_spend_logs"===e.field_name)?.field_description||"When enabled, prompts will be stored in spend logs for tracking and analysis purposes.",valuePropName:"checked",children:(0,t.jsx)("div",{children:m?(0,t.jsx)(sF.Skeleton.Input,{active:!0,block:!0}):(0,t.jsx)(sB.Switch,{checked:u??!1,onChange:e=>l.setFieldValue("store_prompts_in_spend_logs",e)})})}),(0,t.jsx)(sE.Form.Item,{label:"Maximum Spend Logs Retention Period (Optional)",name:"maximum_spend_logs_retention_period",tooltip:c?.find(e=>"maximum_spend_logs_retention_period"===e.field_name)?.field_description||"Set the maximum retention period for spend logs (e.g., '7d' for 7 days, '30d' for 30 days). Leave empty for no limit.",children:m?(0,t.jsx)(sF.Skeleton.Input,{active:!0,block:!0}):(0,t.jsx)(sR.Input,{placeholder:"e.g., 7d, 30d",prefix:(0,t.jsx)(sI.ClockCircleOutlined,{})})})]},c?JSON.stringify(p):"loading")})};function s$({accessToken:e,token:i,userRole:o,userID:d,allTeams:c,premiumUser:m}){let[x,u]=(0,n.useState)(""),[p,h]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),[j,y]=(0,n.useState)(1),[v]=(0,n.useState)(50),N=(0,n.useRef)(null),_=(0,n.useRef)(null),w=(0,n.useRef)(null),[k,S]=(0,n.useState)((0,r.default)().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),[C,T]=(0,n.useState)((0,r.default)().format("YYYY-MM-DDTHH:mm")),[L,M]=(0,n.useState)(!1),[D,z]=(0,n.useState)(!1),[A,I]=(0,n.useState)(""),[E,R]=(0,n.useState)(""),[O,F]=(0,n.useState)(""),[B,P]=(0,n.useState)(""),[$,q]=(0,n.useState)(""),[Z,ee]=(0,n.useState)(null),[et,es]=(0,n.useState)(null),[ea,el]=(0,n.useState)(""),[er,en]=(0,n.useState)(""),[ei,eo]=(0,n.useState)(o&&X.internalUserRoles.includes(o)),[ed,ec]=(0,n.useState)("request logs"),[em,eu]=(0,n.useState)(null),[ep,eh]=(0,n.useState)(!1),[eg,ef]=(0,n.useState)(null),[eb,ev]=(0,n.useState)(!1),[eN,e_]=(0,n.useState)("startTime"),[ew,ek]=(0,n.useState)("desc"),[eS,eD]=(0,n.useState)(!0);(0,l.useQueryClient)();let[ez,eA]=(0,n.useState)(()=>{let e=sessionStorage.getItem("isLiveTail");return null===e||JSON.parse(e)});(0,n.useEffect)(()=>{sessionStorage.setItem("isLiveTail",JSON.stringify(ez))},[ez]);let[eI,eF]=(0,n.useState)({value:24,unit:"hours"});(0,n.useEffect)(()=>{(async()=>{et&&e&&ee({...(await (0,b.keyInfoV1Call)(e,et)).info,token:et,api_key:et})})()},[et,e]),(0,n.useEffect)(()=>{function e(e){N.current&&!N.current.contains(e.target)&&f(!1),_.current&&!_.current.contains(e.target)&&h(!1),w.current&&!w.current.contains(e.target)&&z(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.useEffect)(()=>{o&&X.internalUserRoles.includes(o)&&eo(!0)},[o]);let eB=(0,a.useQuery)({queryKey:["logs","table",j,v,k,C,O,B,ei?d:null,ea,$,eN,ew],queryFn:async()=>{if(!e||!i||!o||!d)return{data:[],total:0,page:1,page_size:v,total_pages:0};let t=(0,r.default)(k).utc().format("YYYY-MM-DD HH:mm:ss"),s=L?(0,r.default)(C).utc().format("YYYY-MM-DD HH:mm:ss"):(0,r.default)().utc().format("YYYY-MM-DD HH:mm:ss");return await (0,b.uiSpendLogsCall)({accessToken:e,start_date:t,end_date:s,page:j,page_size:v,params:{api_key:B||void 0,team_id:O||void 0,user_id:ei?d??void 0:void 0,end_user:er||void 0,status_filter:ea||void 0,model_id:$||void 0,sort_by:eN,sort_order:ew}})},enabled:!!e&&!!i&&!!o&&!!d&&"request logs"===ed&&eS,refetchInterval:!!ez&&1===j&&15e3,placeholderData:s.keepPreviousData,refetchIntervalInBackground:!0}),eP=(0,n.useDeferredValue)(eB.isFetching),e$=eB.isFetching||eP,{filters:eq,filteredLogs:eK,hasBackendFilters:eY,allTeams:eW,allKeyAliases:eU,handleFilterChange:eJ,handleFilterReset:eG}=function({logs:e,accessToken:t,startTime:s,endTime:l,pageSize:i=eX.defaultPageSize,isCustomDate:o,setCurrentPage:d,userID:c,userRole:m,sortBy:x="startTime",sortOrder:u="desc",currentPage:p=1}){let h=(0,n.useMemo)(()=>({[eZ]:"",[e0]:"",[e1]:"",[e2]:"",[e5]:"",[e4]:"",[e3]:"",[e6]:"",[e8]:"",[e7]:""}),[]),[g,f]=(0,n.useState)(h),[j,y]=(0,n.useState)({data:[],total:0,page:1,page_size:50,total_pages:0}),v=(0,n.useRef)(0),N=(0,n.useCallback)(async(e,a=1)=>{if(!t)return;console.log("Filters being sent to API:",e);let n=Date.now();v.current=n;let d=(0,r.default)(s).utc().format("YYYY-MM-DD HH:mm:ss"),c=o?(0,r.default)(l).utc().format("YYYY-MM-DD HH:mm:ss"):(0,r.default)().utc().format("YYYY-MM-DD HH:mm:ss");try{let s=await (0,b.uiSpendLogsCall)({accessToken:t,start_date:d,end_date:c,page:a,page_size:i,params:{api_key:e[e0]||void 0,team_id:e[eZ]||void 0,request_id:e[e1]||void 0,user_id:e[e5]||void 0,end_user:e[e4]||void 0,status_filter:e[e3]||void 0,model_id:e[e2]||void 0,key_alias:e[e6]||void 0,error_code:e[e8]||void 0,error_message:e[e7]||void 0,sort_by:x,sort_order:u}});n===v.current&&s.data&&y(s)}catch(e){console.error("Error searching users:",e)}},[t,s,l,o,i,x,u]),_=(0,n.useMemo)(()=>(0,eQ.default)((e,t)=>N(e,t),300),[N]);(0,n.useEffect)(()=>()=>_.cancel(),[_]);let w=(0,a.useQuery)({queryKey:["allKeys"],queryFn:async()=>{if(!t)throw Error("Access token required");return await (0,ey.fetchAllKeyAliases)(t)},enabled:!!t}).data||[],k=(0,n.useMemo)(()=>!!(g[e6]||g[e0]||g[e1]||g[e5]||g[e4]||g[e8]||g[e7]||g[e2]),[g]);(0,n.useEffect)(()=>{k&&t&&(_.cancel(),N(g,p))},[x,u,p,s,l,o]);let S=(0,n.useMemo)(()=>{if(!e||!e.data)return{data:[],total:0,page:1,page_size:50,total_pages:0};if(k)return e;let t=[...e.data];return g[eZ]&&(t=t.filter(e=>e.team_id===g[eZ])),g[e3]&&(t=t.filter(e=>"success"===g[e3]?!e.status||"success"===e.status:e.status===g[e3])),g[e2]&&(t=t.filter(e=>e.model_id===g[e2])),g[e0]&&(t=t.filter(e=>e.api_key===g[e0])),g[e4]&&(t=t.filter(e=>e.end_user===g[e4])),g[e8]&&(t=t.filter(e=>{let t=(e.metadata||{}).error_information;return t&&t.error_code===g[e8]})),{data:t,total:e.total,page:e.page,page_size:e.page_size,total_pages:e.total_pages}},[e,g,k]),C=(0,n.useMemo)(()=>k?j&&j.data&&j.data.length>0?j:e||{data:[],total:0,page:1,page_size:50,total_pages:0}:S,[k,j,S,e]),{data:T}=(0,a.useQuery)({queryKey:["allTeamsForLogFilters",t],queryFn:async()=>t&&await (0,ey.fetchAllTeams)(t)||[],enabled:!!t});return{filters:g,filteredLogs:C,hasBackendFilters:k,allKeyAliases:w,allTeams:T,handleFilterChange:e=>{f(t=>{let s={...t,...e};for(let e of Object.keys(h))e in s||(s[e]=h[e]);return JSON.stringify(s)!==JSON.stringify(t)&&(d(1),_(s,1)),s})},handleFilterReset:()=>{f(h),y({data:[],total:0,page:1,page_size:50,total_pages:0}),_(h,1)}}}({logs:eB.data||{data:[],total:0,page:1,page_size:v||10,total_pages:1},accessToken:e,startTime:k,endTime:C,pageSize:v,isCustomDate:L,setCurrentPage:y,userID:d,userRole:o,sortBy:eN,sortOrder:ew,currentPage:j}),e9=(0,n.useCallback)(()=>{eG(),S((0,r.default)().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),T((0,r.default)().format("YYYY-MM-DDTHH:mm")),M(!1),eF({value:24,unit:"hours"}),y(1)},[eG]);if((0,n.useEffect)(()=>{eD(!eY)},[eY]),(0,n.useEffect)(()=>{e&&(eq["Team ID"]?F(eq["Team ID"]):F(""),el(eq.Status||""),q(eq.Model||""),en(eq["End User"]||""),P(eq["Key Hash"]||""))},[eq,e]),!e||!i||!o||!d)return null;let te=eK.data.filter(e=>!x||e.request_id.includes(x)||e.model.includes(x)||e.user&&e.user.includes(x)),tt=te.reduce((e,t)=>(t.session_id&&(e[t.session_id]||(e[t.session_id]={llm:0,mcp:0}),eR.includes(t.call_type)?e[t.session_id].mcp+=1:e[t.session_id].llm+=1),e),{}),ts=new Map;for(let e of te){if(!e.session_id||1>=(e.session_total_count||1))continue;let t=eR.includes(e.call_type),s=ts.get(e.session_id);s&&(!s.isMcp||t)||ts.set(e.session_id,{requestId:e.request_id,isMcp:t})}let ta=te.map(e=>{let t=e.session_id?tt[e.session_id]:void 0;return{...e,duration:(Date.parse(e.endTime)-Date.parse(e.startTime))/1e3,session_llm_count:t?.llm??void 0,session_mcp_count:t?.mcp??void 0,onKeyHashClick:e=>es(e),onSessionClick:t=>{t&&(ef(t),eu(e),eh(!0))}}}).filter(e=>!e.session_id||1>=(e.session_total_count||1)||ts.get(e.session_id)?.requestId===e.request_id)||[],tl=[{name:"Team ID",label:"Team ID",isSearchable:!0,searchFn:async e=>c&&0!==c.length?c.filter(t=>t.team_id.toLowerCase().includes(e.toLowerCase())||t.team_alias&&t.team_alias.toLowerCase().includes(e.toLowerCase())).map(e=>({label:`${e.team_alias||e.team_id} (${e.team_id})`,value:e.team_id})):[]},{name:"Status",label:"Status",isSearchable:!1,options:[{label:"Success",value:"success"},{label:"Failure",value:"failure"}]},{name:"Model",label:"Model",customComponent:eC},{name:"Key Alias",label:"Key Alias",isSearchable:!0,searchFn:async t=>e?(await (0,ey.fetchAllKeyAliases)(e)).filter(e=>e.toLowerCase().includes(t.toLowerCase())).map(e=>({label:e,value:e})):[]},{name:"End User",label:"End User",isSearchable:!0,searchFn:async t=>{if(!e)return[];let s=await (0,b.allEndUsersCall)(e);return(s?.map(e=>e.user_id)||[]).filter(e=>e.toLowerCase().includes(t.toLowerCase())).map(e=>({label:e,value:e}))}},{name:"Error Code",label:"Error Code",isSearchable:!0,searchFn:async e=>{if(!e)return eE;let t=e.toLowerCase(),s=eE.filter(e=>e.label.toLowerCase().includes(t));return!eE.some(t=>t.value===e.trim())&&e.trim()&&s.push({label:`Use custom code: ${e.trim()}`,value:e.trim()}),s}},{name:"Key Hash",label:"Key Hash",isSearchable:!1},{name:"Error Message",label:"Error Message",isSearchable:!1}],tr=eO.find(e=>e.value===eI.value&&e.unit===eI.unit),tn=L?((e,t,s)=>{if(e)return`${(0,r.default)(t).format("MMM D, h:mm A")} - ${(0,r.default)(s).format("MMM D, h:mm A")}`;let a=(0,r.default)(),l=(0,r.default)(t),n=a.diff(l,"minutes");if(n>=0&&n<2)return"Last 1 Minute";if(n>=2&&n<16)return"Last 15 Minutes";if(n>=16&&n<61)return"Last Hour";let i=a.diff(l,"hours");return i>=1&&i<5?"Last 4 Hours":i>=5&&i<25?"Last 24 Hours":i>=25&&i<169?"Last 7 Days":`${l.format("MMM D")} - ${a.format("MMM D")}`})(L,k,C):tr?.label;return(0,t.jsxs)("div",{className:"w-full max-w-screen p-6 overflow-x-hidden box-border",children:[(0,t.jsxs)(W.TabGroup,{defaultIndex:0,onIndexChange:e=>ec(0===e?"request logs":"audit logs"),children:[(0,t.jsxs)(U.TabList,{children:[(0,t.jsx)(Y.Tab,{children:"Request Logs"}),(0,t.jsx)(Y.Tab,{children:"Audit Logs"}),(0,t.jsx)(Y.Tab,{children:"Deleted Keys"}),(0,t.jsx)(Y.Tab,{children:"Deleted Teams"})]}),(0,t.jsxs)(G.TabPanels,{children:[(0,t.jsxs)(J.TabPanel,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Request Logs"}),(0,t.jsx)(Q.Button,{icon:(0,t.jsx)(H.SettingOutlined,{}),onClick:()=>ev(!0),title:"Spend Logs Settings"})]}),Z&&et&&Z.api_key===et?(0,t.jsx)(eL.default,{keyId:et,keyData:Z,teams:c,onClose:()=>es(null),backButtonText:"Back to Logs"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eT.default,{options:tl,onApplyFilters:eJ,onResetFilters:e9}),(0,t.jsx)(sP,{isVisible:eb,onCancel:()=>ev(!1),onSuccess:()=>ev(!1)}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow w-full max-w-full box-border",children:[(0,t.jsx)("div",{className:"border-b px-6 py-4 w-full max-w-full box-border",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0 w-full max-w-full box-border",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 w-full max-w-full box-border",children:[(0,t.jsxs)("div",{className:"relative w-64 min-w-0 flex-shrink-0",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search by Request ID",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x,onChange:e=>u(e.target.value)}),(0,t.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-shrink",children:[(0,t.jsxs)("div",{className:"relative z-50",ref:w,children:[(0,t.jsxs)("button",{onClick:()=>z(!D),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),tn]}),D&&(0,t.jsx)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border p-2 z-50",children:(0,t.jsxs)("div",{className:"space-y-1",children:[eO.map(e=>(0,t.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${tn===e.label?"bg-blue-50 text-blue-600":""}`,onClick:()=>{y(1),T((0,r.default)().format("YYYY-MM-DDTHH:mm")),S((0,r.default)().subtract(e.value,e.unit).format("YYYY-MM-DDTHH:mm")),eF({value:e.value,unit:e.unit}),M(!1),z(!1)},children:e.label},e.label)),(0,t.jsx)("div",{className:"border-t my-2"}),(0,t.jsx)("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ${L?"bg-blue-50 text-blue-600":""}`,onClick:()=>M(!L),children:"Custom Range"})]})})]}),(0,t.jsx)(()=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Live Tail"}),(0,t.jsx)(V.Switch,{color:"green",checked:ez,defaultChecked:!0,onChange:eA})]}),{}),(0,t.jsx)(Q.Button,{type:"default",icon:(0,t.jsx)(K.SyncOutlined,{spin:e$}),onClick:()=>{eB.refetch()},disabled:e$,title:"Fetch data",children:e$?"Fetching":"Fetch"})]}),L&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"datetime-local",value:k,onChange:e=>{S(e.target.value),y(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),(0,t.jsx)("span",{className:"text-gray-500",children:"to"}),(0,t.jsx)("div",{children:(0,t.jsx)("input",{type:"datetime-local",value:C,onChange:e=>{T(e.target.value),y(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-700 whitespace-nowrap",children:["Showing ",eB.isLoading?"...":eK?(j-1)*v+1:0," -"," ",eB.isLoading?"...":eK?Math.min(j*v,eK.total):0," ","of ",eB.isLoading?"...":eK?eK.total:0," results"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-700 min-w-[90px]",children:["Page ",eB.isLoading?"...":j," of"," ",eB.isLoading?"...":eK?eK.total_pages:1]}),(0,t.jsx)("button",{onClick:()=>y(e=>Math.max(1,e-1)),disabled:eB.isLoading||1===j,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>y(e=>Math.min(eK.total_pages||1,e+1)),disabled:eB.isLoading||j===(eK.total_pages||1),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}),ez&&1===j&&eS&&(0,t.jsxs)("div",{className:"mb-4 px-4 py-2 bg-green-50 border border-greem-200 rounded-md flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:"text-sm text-green-700",children:"Auto-refreshing every 15 seconds"})}),(0,t.jsx)("button",{onClick:()=>eA(!1),className:"text-sm text-green-600 hover:text-green-800",children:"Stop"})]}),(0,t.jsx)(eM.DataTable,{columns:eH({sortBy:eN,sortOrder:ew,onSortChange:(e,t)=>{e_(e),ek(t),y(1)}}),data:ta,onRowClick:e=>{if(e.session_id&&(e.session_total_count||1)>1){ef(e.session_id),eu(e),eh(!0);return}ef(null),eu(e),eh(!0)},isLoading:eB.isLoading})]})]})]}),(0,t.jsx)(J.TabPanel,{children:(0,t.jsx)(eV,{userID:d,userRole:o,token:i,accessToken:e,isActive:"audit logs"===ed,premiumUser:m,allTeams:c})}),(0,t.jsx)(J.TabPanel,{children:(0,t.jsx)(ex,{})}),(0,t.jsx)(J.TabPanel,{children:(0,t.jsx)(ej,{})})]})]}),(0,t.jsx)(sT,{open:ep,onClose:()=>{eh(!1),ef(null)},logEntry:em,sessionId:eg,accessToken:e,onOpenSettings:()=>ev(!0),allLogs:ta,onSelectLog:e=>{eu(e)},startTime:(0,r.default)(k).utc().format("YYYY-MM-DD HH:mm:ss")})]})}e.s(["default",()=>s$],936190)}]);