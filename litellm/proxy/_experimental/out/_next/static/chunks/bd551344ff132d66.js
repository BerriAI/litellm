(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,981339,e=>{"use strict";var t=e.i(185793);e.s(["Skeleton",()=>t.default])},992571,e=>{"use strict";var t=e.i(619273);function a(e){return{onFetch:(a,r)=>{let l=a.options,n=a.fetchOptions?.meta?.fetchMore?.direction,o=a.state.data?.pages||[],c=a.state.data?.pageParams||[],u={pages:[],pageParams:[]},d=0,h=async()=>{let r=!1,h=(0,t.ensureQueryFn)(a.options,a.fetchOptions),g=async(e,s,i)=>{let l;if(r)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);let n=(l={client:a.client,queryKey:a.queryKey,pageParam:s,direction:i?"backward":"forward",meta:a.options.meta},(0,t.addConsumeAwareSignal)(l,()=>a.signal,()=>r=!0),l),o=await h(n),{maxPages:c}=a.options,u=i?t.addToStart:t.addToEnd;return{pages:u(e.pages,o,c),pageParams:u(e.pageParams,s,c)}};if(n&&o.length){let e="backward"===n,t={pages:o,pageParams:c},a=(e?i:s)(l,t);u=await g(t,a,e)}else{let t=e??o.length;do{let e=0===d?c[0]??l.initialPageParam:s(l,u);if(d>0&&null==e)break;u=await g(u,e),d++}while(d<t)}return u};a.options.persister?a.fetchFn=()=>a.options.persister?.(h,{client:a.client,queryKey:a.queryKey,meta:a.options.meta,signal:a.signal},r):a.fetchFn=h}}}function s(e,{pages:t,pageParams:a}){let s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,a[s],a):void 0}function i(e,{pages:t,pageParams:a}){return t.length>0?e.getPreviousPageParam?.(t[0],t,a[0],a):void 0}function r(e,t){return!!t&&null!=s(e,t)}function l(e,t){return!!t&&!!e.getPreviousPageParam&&null!=i(e,t)}e.s(["hasNextPage",()=>r,"hasPreviousPage",()=>l,"infiniteQueryBehavior",()=>a])},114272,e=>{"use strict";var t=e.i(540143),a=e.i(88587),s=e.i(936553),i=class extends a.Removable{#e;#t;#a;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#a=e.mutationCache,this.#t=[],this.state=e.state||r(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#a.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#a.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||("pending"===this.state.status?this.scheduleGc():this.#a.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#i({type:"continue"})},a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=(0,s.createRetryer)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#i({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#a.canRun(this)});let i="pending"===this.state.status,r=!this.#s.canStart();try{if(i)t();else{this.#i({type:"pending",variables:e,isPaused:r}),this.#a.config.onMutate&&await this.#a.config.onMutate(e,this,a);let t=await this.options.onMutate?.(e,a);t!==this.state.context&&this.#i({type:"pending",context:t,variables:e,isPaused:r})}let s=await this.#s.start();return await this.#a.config.onSuccess?.(s,e,this.state.context,this,a),await this.options.onSuccess?.(s,e,this.state.context,a),await this.#a.config.onSettled?.(s,null,this.state.variables,this.state.context,this,a),await this.options.onSettled?.(s,null,e,this.state.context,a),this.#i({type:"success",data:s}),s}catch(t){try{await this.#a.config.onError?.(t,e,this.state.context,this,a)}catch(e){Promise.reject(e)}try{await this.options.onError?.(t,e,this.state.context,a)}catch(e){Promise.reject(e)}try{await this.#a.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,a)}catch(e){Promise.reject(e)}try{await this.options.onSettled?.(void 0,t,e,this.state.context,a)}catch(e){Promise.reject(e)}throw this.#i({type:"error",error:t}),t}finally{this.#a.runNext(this)}}#i(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),t.notifyManager.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(e)}),this.#a.notify({mutation:this,type:"updated",action:e})})}};function r(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}e.s(["Mutation",()=>i,"getDefaultState",()=>r])},317751,e=>{"use strict";var t=e.i(619273),a=e.i(286491),s=e.i(540143),i=e.i(915823),r=class extends i.Subscribable{constructor(e={}){super(),this.config=e,this.#r=new Map}#r;build(e,s,i){let r=s.queryKey,l=s.queryHash??(0,t.hashQueryKeyByOptions)(r,s),n=this.get(l);return n||(n=new a.Query({client:e,queryKey:r,queryHash:l,options:e.defaultQueryOptions(s),state:i,defaultOptions:e.getQueryDefaults(r)}),this.add(n)),n}add(e){this.#r.has(e.queryHash)||(this.#r.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#r.get(e.queryHash);t&&(e.destroy(),t===e&&this.#r.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){s.notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#r.get(e)}getAll(){return[...this.#r.values()]}find(e){let a={exact:!0,...e};return this.getAll().find(e=>(0,t.matchQuery)(a,e))}findAll(e={}){let a=this.getAll();return Object.keys(e).length>0?a.filter(a=>(0,t.matchQuery)(e,a)):a}notify(e){s.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){s.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){s.notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},l=e.i(114272),n=i,o=class extends n.Subscribable{constructor(e={}){super(),this.config=e,this.#l=new Set,this.#n=new Map,this.#o=0}#l;#n;#o;build(e,t,a){let s=new l.Mutation({client:e,mutationCache:this,mutationId:++this.#o,options:e.defaultMutationOptions(t),state:a});return this.add(s),s}add(e){this.#l.add(e);let t=c(e);if("string"==typeof t){let a=this.#n.get(t);a?a.push(e):this.#n.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#l.delete(e)){let t=c(e);if("string"==typeof t){let a=this.#n.get(t);if(a)if(a.length>1){let t=a.indexOf(e);-1!==t&&a.splice(t,1)}else a[0]===e&&this.#n.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){let t=c(e);if("string"!=typeof t)return!0;{let a=this.#n.get(t),s=a?.find(e=>"pending"===e.state.status);return!s||s===e}}runNext(e){let t=c(e);if("string"!=typeof t)return Promise.resolve();{let a=this.#n.get(t)?.find(t=>t!==e&&t.state.isPaused);return a?.continue()??Promise.resolve()}}clear(){s.notifyManager.batch(()=>{this.#l.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#l.clear(),this.#n.clear()})}getAll(){return Array.from(this.#l)}find(e){let a={exact:!0,...e};return this.getAll().find(e=>(0,t.matchMutation)(a,e))}findAll(e={}){return this.getAll().filter(a=>(0,t.matchMutation)(e,a))}notify(e){s.notifyManager.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return s.notifyManager.batch(()=>Promise.all(e.map(e=>e.continue().catch(t.noop))))}};function c(e){return e.options.scope?.id}var u=e.i(175555),d=e.i(814448),h=e.i(992571),g=class{#c;#a;#u;#d;#h;#g;#m;#f;constructor(e={}){this.#c=e.queryCache||new r,this.#a=e.mutationCache||new o,this.#u=e.defaultOptions||{},this.#d=new Map,this.#h=new Map,this.#g=0}mount(){this.#g++,1===this.#g&&(this.#m=u.focusManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#c.onFocus())}),this.#f=d.onlineManager.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#c.onOnline())}))}unmount(){this.#g--,0===this.#g&&(this.#m?.(),this.#m=void 0,this.#f?.(),this.#f=void 0)}isFetching(e){return this.#c.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#a.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#c.get(t.queryHash)?.state.data}ensureQueryData(e){let a=this.defaultQueryOptions(e),s=this.#c.build(this,a),i=s.state.data;return void 0===i?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime((0,t.resolveStaleTime)(a.staleTime,s))&&this.prefetchQuery(a),Promise.resolve(i))}getQueriesData(e){return this.#c.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,a,s){let i=this.defaultQueryOptions({queryKey:e}),r=this.#c.get(i.queryHash),l=r?.state.data,n=(0,t.functionalUpdate)(a,l);if(void 0!==n)return this.#c.build(this,i).setData(n,{...s,manual:!0})}setQueriesData(e,t,a){return s.notifyManager.batch(()=>this.#c.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,a)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#c.get(t.queryHash)?.state}removeQueries(e){let t=this.#c;s.notifyManager.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let a=this.#c;return s.notifyManager.batch(()=>(a.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,a={}){let i={revert:!0,...a};return Promise.all(s.notifyManager.batch(()=>this.#c.findAll(e).map(e=>e.cancel(i)))).then(t.noop).catch(t.noop)}invalidateQueries(e,t={}){return s.notifyManager.batch(()=>(this.#c.findAll(e).forEach(e=>{e.invalidate()}),e?.refetchType==="none")?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))}refetchQueries(e,a={}){let i={...a,cancelRefetch:a.cancelRefetch??!0};return Promise.all(s.notifyManager.batch(()=>this.#c.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let a=e.fetch(void 0,i);return i.throwOnError||(a=a.catch(t.noop)),"paused"===e.state.fetchStatus?Promise.resolve():a}))).then(t.noop)}fetchQuery(e){let a=this.defaultQueryOptions(e);void 0===a.retry&&(a.retry=!1);let s=this.#c.build(this,a);return s.isStaleByTime((0,t.resolveStaleTime)(a.staleTime,s))?s.fetch(a):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(t.noop).catch(t.noop)}fetchInfiniteQuery(e){return e.behavior=(0,h.infiniteQueryBehavior)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(t.noop).catch(t.noop)}ensureInfiniteQueryData(e){return e.behavior=(0,h.infiniteQueryBehavior)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return d.onlineManager.isOnline()?this.#a.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#c}getMutationCache(){return this.#a}getDefaultOptions(){return this.#u}setDefaultOptions(e){this.#u=e}setQueryDefaults(e,a){this.#d.set((0,t.hashKey)(e),{queryKey:e,defaultOptions:a})}getQueryDefaults(e){let a=[...this.#d.values()],s={};return a.forEach(a=>{(0,t.partialMatchKey)(e,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(e,a){this.#h.set((0,t.hashKey)(e),{mutationKey:e,defaultOptions:a})}getMutationDefaults(e){let a=[...this.#h.values()],s={};return a.forEach(a=>{(0,t.partialMatchKey)(e,a.mutationKey)&&Object.assign(s,a.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;let a={...this.#u.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return a.queryHash||(a.queryHash=(0,t.hashQueryKeyByOptions)(a.queryKey,a)),void 0===a.refetchOnReconnect&&(a.refetchOnReconnect="always"!==a.networkMode),void 0===a.throwOnError&&(a.throwOnError=!!a.suspense),!a.networkMode&&a.persister&&(a.networkMode="offlineFirst"),a.queryFn===t.skipToken&&(a.enabled=!1),a}defaultMutationOptions(e){return e?._defaulted?e:{...this.#u.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#c.clear(),this.#a.clear()}};e.s(["QueryClient",()=>g],317751)},891547,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(199133),i=e.i(764205);e.s(["default",0,({onChange:e,value:r,className:l,accessToken:n,disabled:o})=>{let[c,u]=(0,a.useState)([]),[d,h]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{if(n){h(!0);try{let e=await (0,i.getGuardrailsList)(n);console.log("Guardrails response:",e),e.guardrails&&(console.log("Guardrails data:",e.guardrails),u(e.guardrails))}catch(e){console.error("Error fetching guardrails:",e)}finally{h(!1)}}})()},[n]),(0,t.jsx)("div",{children:(0,t.jsx)(s.Select,{mode:"multiple",disabled:o,placeholder:o?"Setting guardrails is a premium feature.":"Select guardrails",onChange:t=>{console.log("Selected guardrails:",t),e(t)},value:r,loading:d,className:l,allowClear:!0,options:c.map(e=>(console.log("Mapping guardrail:",e),{label:`${e.guardrail_name}`,value:e.guardrail_name})),optionFilterProp:"label",showSearch:!0,style:{width:"100%"}})})}])},921511,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(199133),i=e.i(764205);e.s(["default",0,({onChange:e,value:r,className:l,accessToken:n,disabled:o})=>{let[c,u]=(0,a.useState)([]),[d,h]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{(async()=>{if(n){h(!0);try{let e=await (0,i.getPoliciesList)(n);console.log("Policies response:",e),e.policies&&(console.log("Policies data:",e.policies),u(e.policies))}catch(e){console.error("Error fetching policies:",e)}finally{h(!1)}}})()},[n]),(0,t.jsx)("div",{children:(0,t.jsx)(s.Select,{mode:"multiple",disabled:o,placeholder:o?"Setting policies is a premium feature.":"Select policies",onChange:t=>{console.log("Selected policies:",t),e(t)},value:r,loading:d,className:l,allowClear:!0,options:c.map(e=>(console.log("Mapping policy:",e),{label:`${e.policy_name}${e.description?` - ${e.description}`:""}`,value:e.policy_name})),optionFilterProp:"label",showSearch:!0,style:{width:"100%"}})})}])},439189,435684,96226,497245,e=>{"use strict";function t(e){let t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):new Date("number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?e:NaN)}function a(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function s(e,s){let i=t(e);return isNaN(s)?a(e,NaN):(s&&i.setDate(i.getDate()+s),i)}function i(e,s){let i=t(e);if(isNaN(s))return a(e,NaN);if(!s)return i;let r=i.getDate(),l=a(e,i.getTime());return(l.setMonth(i.getMonth()+s+1,0),r>=l.getDate())?l:(i.setFullYear(l.getFullYear(),l.getMonth(),r),i)}e.s(["toDate",()=>t],435684),e.s(["constructFrom",()=>a],96226),e.s(["addDays",()=>s],439189),e.s(["addMonths",()=>i],497245)},214541,e=>{"use strict";var t=e.i(271645),a=e.i(135214),s=e.i(270345);e.s(["default",0,()=>{let[e,i]=(0,t.useState)([]),{accessToken:r,userId:l,userRole:n}=(0,a.default)();return(0,t.useEffect)(()=>{(async()=>{i(await (0,s.fetchTeams)(r,l,n,null))})()},[r,l,n]),{teams:e,setTeams:i}}])},270345,e=>{"use strict";var t=e.i(764205);let a=async(e,a,s,i)=>"Admin"!=s&&"Admin Viewer"!=s?await (0,t.teamListCall)(e,i?.organization_id||null,a):await (0,t.teamListCall)(e,i?.organization_id||null);e.s(["fetchTeams",0,a])},860585,e=>{"use strict";var t=e.i(843476),a=e.i(199133);let{Option:s}=a.Select;e.s(["default",0,({value:e,onChange:i,className:r="",style:l={}})=>(0,t.jsxs)(a.Select,{style:{width:"100%",...l},value:e||void 0,onChange:i,className:r,placeholder:"n/a",allowClear:!0,children:[(0,t.jsx)(s,{value:"24h",children:"daily"}),(0,t.jsx)(s,{value:"7d",children:"weekly"}),(0,t.jsx)(s,{value:"30d",children:"monthly"})]}),"getBudgetDurationLabel",0,e=>e?({"24h":"daily","7d":"weekly","30d":"monthly"})[e]||e:"Not set"])},11751,643449,183588,e=>{"use strict";function t(e){return""===e?null:e}e.s(["mapEmptyStringToNull",()=>t],11751);var a=e.i(843476),s=e.i(599724),i=e.i(389083),r=e.i(810757),l=e.i(477386),n=e.i(557662);e.s(["default",0,function({loggingConfigs:e=[],disabledCallbacks:t=[],variant:o="card",className:c=""}){let u=(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.CogIcon,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)(s.Text,{className:"font-semibold text-gray-900",children:"Logging Integrations"}),(0,a.jsx)(i.Badge,{color:"blue",size:"xs",children:e.length})]}),e.length>0?(0,a.jsx)("div",{className:"space-y-3",children:e.map((e,t)=>{var l;let o=(l=e.callback_name,Object.entries(n.callback_map).find(([e,t])=>t===l)?.[0]||l),c=n.callbackInfo[o]?.logo;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-blue-50 border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[c?(0,a.jsx)("img",{src:c,alt:o,className:"w-5 h-5 object-contain"}):(0,a.jsx)(r.CogIcon,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(s.Text,{className:"font-medium text-blue-800",children:o}),(0,a.jsxs)(s.Text,{className:"text-xs text-blue-600",children:[Object.keys(e.callback_vars).length," parameters configured"]})]})]}),(0,a.jsx)(i.Badge,{color:(e=>{switch(e){case"success":return"green";case"failure":return"red";case"success_and_failure":return"blue";default:return"gray"}})(e.callback_type),size:"sm",children:(e=>{switch(e){case"success":return"Success Only";case"failure":return"Failure Only";case"success_and_failure":return"Success & Failure";default:return e}})(e.callback_type)})]},t)})}):(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,a.jsx)(r.CogIcon,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)(s.Text,{className:"text-gray-500 text-sm",children:"No logging integrations configured"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.BanIcon,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)(s.Text,{className:"font-semibold text-gray-900",children:"Disabled Callbacks"}),(0,a.jsx)(i.Badge,{color:"red",size:"xs",children:t.length})]}),t.length>0?(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>{let r=n.reverse_callback_map[e]||e,o=n.callbackInfo[r]?.logo;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-red-50 border border-red-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[o?(0,a.jsx)("img",{src:o,alt:r,className:"w-5 h-5 object-contain"}):(0,a.jsx)(l.BanIcon,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(s.Text,{className:"font-medium text-red-800",children:r}),(0,a.jsx)(s.Text,{className:"text-xs text-red-600",children:"Disabled for this key"})]})]}),(0,a.jsx)(i.Badge,{color:"red",size:"sm",children:"Disabled"})]},t)})}):(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,a.jsx)(l.BanIcon,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)(s.Text,{className:"text-gray-500 text-sm",children:"No callbacks disabled"})]})]})]});return"card"===o?(0,a.jsxs)("div",{className:`bg-white border border-gray-200 rounded-lg p-6 ${c}`,children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(s.Text,{className:"font-semibold text-gray-900",children:"Logging Settings"}),(0,a.jsx)(s.Text,{className:"text-xs text-gray-500",children:"Active logging integrations and disabled callbacks for this key"})]})}),u]}):(0,a.jsxs)("div",{className:`${c}`,children:[(0,a.jsx)(s.Text,{className:"font-medium text-gray-900 mb-3",children:"Logging Settings"}),u]})}],643449);var o=e.i(266484);e.s(["default",0,({value:e,onChange:t,disabledCallbacks:s=[],onDisabledCallbacksChange:i})=>(0,a.jsx)(o.default,{value:e,onChange:t,disabledCallbacks:s,onDisabledCallbacksChange:i})],183588)},700514,e=>{"use strict";var t=e.i(271645);e.s(["defaultPageSize",0,25,"useBaseUrl",0,()=>{let[e,a]=(0,t.useState)("http://localhost:4000");return(0,t.useEffect)(()=>{{let{protocol:e,host:t}=window.location;a(`${e}//${t}`)}},[]),e}])},633627,969550,e=>{"use strict";var t=e.i(764205);let a=async e=>{if(!e)return[];try{let{aliases:a}=await (0,t.keyAliasesCall)(e);return Array.from(new Set((a||[]).filter(Boolean)))}catch(e){return console.error("Error fetching all key aliases:",e),[]}},s=async(e,a)=>{if(!e)return[];try{let s=[],i=1,r=!0;for(;r;){let l=await (0,t.teamListCall)(e,a||null,null);s=[...s,...l],i<l.total_pages?i++:r=!1}return s}catch(e){return console.error("Error fetching all teams:",e),[]}},i=async e=>{if(!e)return[];try{let a=[],s=1,i=!0;for(;i;){let r=await (0,t.organizationListCall)(e);a=[...a,...r],s<r.total_pages?s++:i=!1}return a}catch(e){return console.error("Error fetching all organizations:",e),[]}};e.s(["fetchAllKeyAliases",0,a,"fetchAllOrganizations",0,i,"fetchAllTeams",0,s],633627);var r=e.i(843476),l=e.i(271645);let n=l.forwardRef(function(e,t){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:t},e),l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"}))});var o=e.i(464571),c=e.i(311451),u=e.i(199133),d=e.i(374009);e.s(["default",0,({options:e,onApplyFilters:t,onResetFilters:a,initialValues:s={},buttonLabel:i="Filters"})=>{let[h,g]=(0,l.useState)(!1),[m,f]=(0,l.useState)(s),[y,p]=(0,l.useState)({}),[x,b]=(0,l.useState)({}),[v,w]=(0,l.useState)({}),[S,j]=(0,l.useState)({}),C=(0,l.useCallback)((0,d.default)(async(e,t)=>{if(t.isSearchable&&t.searchFn){b(e=>({...e,[t.name]:!0}));try{let a=await t.searchFn(e);p(e=>({...e,[t.name]:a}))}catch(e){console.error("Error searching:",e),p(e=>({...e,[t.name]:[]}))}finally{b(e=>({...e,[t.name]:!1}))}}},300),[]),N=(0,l.useCallback)(async e=>{if(e.isSearchable&&e.searchFn&&!S[e.name]){b(t=>({...t,[e.name]:!0})),j(t=>({...t,[e.name]:!0}));try{let t=await e.searchFn("");p(a=>({...a,[e.name]:t}))}catch(t){console.error("Error loading initial options:",t),p(t=>({...t,[e.name]:[]}))}finally{b(t=>({...t,[e.name]:!1}))}}},[S]);(0,l.useEffect)(()=>{h&&e.forEach(e=>{e.isSearchable&&!S[e.name]&&N(e)})},[h,e,N,S]);let D=(e,a)=>{let s={...m,[e]:a};f(s),t(s)};return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,r.jsx)(o.Button,{icon:(0,r.jsx)(n,{className:"h-4 w-4"}),onClick:()=>g(!h),className:"flex items-center gap-2",children:i}),(0,r.jsx)(o.Button,{onClick:()=>{let t={};e.forEach(e=>{t[e.name]=""}),f(t),a()},children:"Reset Filters"})]}),h&&(0,r.jsx)("div",{className:"grid grid-cols-3 gap-x-6 gap-y-4 mb-6",children:["Team ID","Status","Organization ID","Key Alias","User ID","End User","Error Code","Error Message","Key Hash","Model"].map(t=>{let a,s=e.find(e=>e.label===t||e.name===t);return s?(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-gray-600",children:s.label||s.name}),s.isSearchable?(0,r.jsx)(u.Select,{showSearch:!0,className:"w-full",placeholder:`Search ${s.label||s.name}...`,value:m[s.name]||void 0,onChange:e=>D(s.name,e),onOpenChange:e=>{e&&s.isSearchable&&!S[s.name]&&N(s)},onSearch:e=>{w(t=>({...t,[s.name]:e})),s.searchFn&&C(e,s)},filterOption:!1,loading:x[s.name],options:y[s.name]||[],allowClear:!0,notFoundContent:x[s.name]?"Loading...":"No results found"}):s.options?(0,r.jsx)(u.Select,{className:"w-full",placeholder:`Select ${s.label||s.name}...`,value:m[s.name]||void 0,onChange:e=>D(s.name,e),allowClear:!0,children:s.options.map(e=>(0,r.jsx)(u.Select.Option,{value:e.value,children:e.label},e.value))}):s.customComponent?(a=s.customComponent,(0,r.jsx)(a,{value:m[s.name]||void 0,onChange:e=>D(s.name,e??""),placeholder:`Select ${s.label||s.name}...`})):(0,r.jsx)(c.Input,{className:"w-full",placeholder:`Enter ${s.label||s.name}...`,value:m[s.name]||"",onChange:e=>D(s.name,e.target.value),allowClear:!0})]},s.name):null})})]})}],969550)},584578,e=>{"use strict";var t=e.i(764205);let a=async(e,a,s,i,r)=>{let l;l="Admin"!=s&&"Admin Viewer"!=s?await (0,t.teamListCall)(e,i?.organization_id||null,a):await (0,t.teamListCall)(e,i?.organization_id||null),console.log(`givenTeams: ${l}`),r(l)};e.s(["fetchTeams",0,a])},693569,e=>{"use strict";var t=e.i(843476),a=e.i(268004),s=e.i(309426),i=e.i(350967),r=e.i(898586),l=e.i(947293),n=e.i(618566),o=e.i(271645),c=e.i(566606),u=e.i(584578),d=e.i(764205),h=e.i(702597),g=e.i(207082),m=e.i(500330),f=e.i(871943),y=e.i(502547),p=e.i(360820),x=e.i(94629),b=e.i(152990),v=e.i(682830),w=e.i(389083),S=e.i(994388),j=e.i(752978),C=e.i(269200),N=e.i(942232),D=e.i(977572),_=e.i(427612),k=e.i(64848),O=e.i(496020),z=e.i(599724),M=e.i(981339),P=e.i(592968),T=e.i(355619),I=e.i(266027),A=e.i(633627),E=e.i(374009),q=e.i(700514),K=e.i(135214),R=e.i(969550),Q=e.i(20147);function B({teams:e,organizations:a,onSortChange:s,currentSort:i}){let[r,l]=(0,o.useState)(null),[n,c]=o.default.useState(()=>i?[{id:i.sortBy,desc:"desc"===i.sortOrder}]:[{id:"created_at",desc:!0}]),[u,h]=o.default.useState({pageIndex:0,pageSize:50}),B=n.length>0?n[0].id:null,$=n.length>0?n[0].desc?"desc":"asc":null,{data:F,isPending:L,isFetching:U,refetch:V}=(0,g.useKeys)(u.pageIndex+1,u.pageSize,{sortBy:B||void 0,sortOrder:$||void 0}),H=F?.total_count||0,[J,W]=(0,o.useState)({}),{filters:G,filteredKeys:Y,allKeyAliases:X,allTeams:Z,allOrganizations:ee,handleFilterChange:et,handleFilterReset:ea}=function({keys:e,teams:t,organizations:a}){let s={"Team ID":"","Organization ID":"","Key Alias":"","User ID":"","Sort By":"created_at","Sort Order":"desc"},{accessToken:i}=(0,K.default)(),[r,l]=(0,o.useState)(s),[n,c]=(0,o.useState)(t||[]),[u,h]=(0,o.useState)(a||[]),[g,m]=(0,o.useState)(e),f=(0,o.useRef)(0),y=(0,o.useCallback)((0,E.default)(async e=>{if(!i)return;let t=Date.now();f.current=t;try{let a=await (0,d.keyListCall)(i,e["Organization ID"]||null,e["Team ID"]||null,e["Key Alias"]||null,e["User ID"]||null,e["Key Hash"]||null,1,q.defaultPageSize,e["Sort By"]||null,e["Sort Order"]||null);t===f.current&&a&&(m(a.keys),console.log("called from debouncedSearch filters:",JSON.stringify(e)),console.log("called from debouncedSearch data:",JSON.stringify(a)))}catch(e){console.error("Error searching users:",e)}},300),[i]);(0,o.useEffect)(()=>{if(!e)return void m([]);let t=[...e];r["Team ID"]&&(t=t.filter(e=>e.team_id===r["Team ID"])),r["Organization ID"]&&(t=t.filter(e=>e.organization_id===r["Organization ID"])),m(t)},[e,r]),(0,o.useEffect)(()=>{let e=async()=>{let e=await (0,A.fetchAllTeams)(i);e.length>0&&c(e);let t=await (0,A.fetchAllOrganizations)(i);t.length>0&&h(t)};i&&e()},[i]);let p=(0,I.useQuery)({queryKey:["allKeys"],queryFn:async()=>{if(!i)throw Error("Access token required");return await (0,A.fetchAllKeyAliases)(i)},enabled:!!i}).data||[];return(0,o.useEffect)(()=>{t&&t.length>0&&c(e=>e.length<t.length?t:e)},[t]),(0,o.useEffect)(()=>{a&&a.length>0&&h(e=>e.length<a.length?a:e)},[a]),{filters:r,filteredKeys:g,allKeyAliases:p,allTeams:n,allOrganizations:u,handleFilterChange:(e,t=!1)=>{l({"Team ID":e["Team ID"]||"","Organization ID":e["Organization ID"]||"","Key Alias":e["Key Alias"]||"","User ID":e["User ID"]||"","Sort By":e["Sort By"]||"created_at","Sort Order":e["Sort Order"]||"desc"}),t||y({...r,...e})},handleFilterReset:()=>{l(s),y(s)}}}({keys:F?.keys||[],teams:e,organizations:a});(0,o.useEffect)(()=>{if(V){let e=()=>{V()};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}},[V]);let es=[{id:"expander",header:()=>null,size:40,enableSorting:!1,cell:({row:e})=>e.getCanExpand()?(0,t.jsx)("button",{onClick:e.getToggleExpandedHandler(),style:{cursor:"pointer"},children:e.getIsExpanded()?"â–¼":"â–¶"}):null},{id:"token",accessorKey:"token",header:"Key ID",size:100,enableSorting:!0,cell:e=>{let a=e.getValue(),s=e.cell.column.getSize();return(0,t.jsx)(P.Tooltip,{title:a,children:(0,t.jsx)(S.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate block",style:{maxWidth:s,overflow:"hidden"},onClick:()=>l(e.row.original),children:a??"-"})})}},{id:"key_alias",accessorKey:"key_alias",header:"Key Alias",size:150,enableSorting:!0,cell:e=>{let a=e.getValue(),s=e.cell.column.getSize();return(0,t.jsx)(P.Tooltip,{title:a,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:s,overflow:"hidden"},children:a??"-"})})}},{id:"key_name",accessorKey:"key_name",header:"Secret Key",size:120,enableSorting:!1,cell:e=>(0,t.jsx)("span",{className:"font-mono text-xs",children:e.getValue()})},{id:"team_alias",accessorKey:"team_id",header:"Team Alias",size:120,enableSorting:!1,cell:({row:t,getValue:a})=>{let s=a(),i=e?.find(e=>e.team_id===s);return i?.team_alias||"Unknown"}},{id:"team_id",accessorKey:"team_id",header:"Team ID",size:80,enableSorting:!1,cell:e=>{let a=e.getValue(),s=e.cell.column.getSize();return(0,t.jsx)(P.Tooltip,{title:a,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:s,overflow:"hidden"},children:a??"-"})})}},{id:"organization_id",accessorKey:"organization_id",header:"Organization ID",size:140,enableSorting:!1,cell:e=>e.getValue()?e.renderValue():"-"},{id:"user_email",accessorKey:"user",header:"User Email",size:160,enableSorting:!1,cell:e=>{let a=e.getValue(),s=a?.user_email,i=e.cell.column.getSize();return(0,t.jsx)(P.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:i,overflow:"hidden"},children:s??"-"})})}},{id:"user_id",accessorKey:"user_id",header:"User ID",size:70,enableSorting:!1,cell:e=>{let a=e.getValue(),s="default_user_id"===a?"Default Proxy Admin":a,i=e.cell.column.getSize();return(0,t.jsx)(P.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:i,overflow:"hidden"},children:s??"-"})})}},{id:"created_at",accessorKey:"created_at",header:"Created At",size:120,enableSorting:!0,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"-"}},{id:"created_by",accessorKey:"created_by",header:"Created By",size:70,enableSorting:!1,cell:e=>{let a=e.getValue(),s="default_user_id"===a?"Default Proxy Admin":a,i=e.cell.column.getSize();return(0,t.jsx)(P.Tooltip,{title:s,children:(0,t.jsx)("span",{className:"font-mono text-xs truncate block",style:{maxWidth:i,overflow:"hidden"},children:s??"-"})})}},{id:"updated_at",accessorKey:"updated_at",header:"Updated At",size:120,enableSorting:!0,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"Never"}},{id:"expires",accessorKey:"expires",header:"Expires",size:120,enableSorting:!1,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleDateString():"Never"}},{id:"spend",accessorKey:"spend",header:"Spend (USD)",size:100,enableSorting:!0,cell:e=>(0,m.formatNumberWithCommas)(e.getValue(),4)},{id:"max_budget",accessorKey:"max_budget",header:"Budget (USD)",size:110,enableSorting:!0,cell:e=>{let t=e.getValue();return null===t?"Unlimited":`$${(0,m.formatNumberWithCommas)(t)}`}},{id:"budget_reset_at",accessorKey:"budget_reset_at",header:"Budget Reset",size:130,enableSorting:!1,cell:e=>{let t=e.getValue();return t?new Date(t).toLocaleString():"Never"}},{id:"models",accessorKey:"models",header:"Models",size:200,enableSorting:!1,cell:e=>{let a=e.getValue();return(0,t.jsx)("div",{className:"flex flex-col py-2",children:Array.isArray(a)?(0,t.jsx)("div",{className:"flex flex-col",children:0===a.length?(0,t.jsx)(w.Badge,{size:"xs",className:"mb-1",color:"red",children:(0,t.jsx)(z.Text,{children:"All Proxy Models"})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex items-start",children:[a.length>3&&(0,t.jsx)("div",{children:(0,t.jsx)(j.Icon,{icon:J[e.row.id]?f.ChevronDownIcon:y.ChevronRightIcon,className:"cursor-pointer",size:"xs",onClick:()=>{W(t=>({...t,[e.row.id]:!t[e.row.id]}))}})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.slice(0,3).map((e,a)=>"all-proxy-models"===e?(0,t.jsx)(w.Badge,{size:"xs",color:"red",children:(0,t.jsx)(z.Text,{children:"All Proxy Models"})},a):(0,t.jsx)(w.Badge,{size:"xs",color:"blue",children:(0,t.jsx)(z.Text,{children:e.length>30?`${(0,T.getModelDisplayName)(e).slice(0,30)}...`:(0,T.getModelDisplayName)(e)})},a)),a.length>3&&!J[e.row.id]&&(0,t.jsx)(w.Badge,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,t.jsxs)(z.Text,{children:["+",a.length-3," ",a.length-3==1?"more model":"more models"]})}),J[e.row.id]&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:a.slice(3).map((e,a)=>"all-proxy-models"===e?(0,t.jsx)(w.Badge,{size:"xs",color:"red",children:(0,t.jsx)(z.Text,{children:"All Proxy Models"})},a+3):(0,t.jsx)(w.Badge,{size:"xs",color:"blue",children:(0,t.jsx)(z.Text,{children:e.length>30?`${(0,T.getModelDisplayName)(e).slice(0,30)}...`:(0,T.getModelDisplayName)(e)})},a+3))})]})]})})}):null})}},{id:"rate_limits",header:"Rate Limits",size:140,enableSorting:!1,cell:({row:e})=>{let a=e.original;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:["TPM: ",null!==a.tpm_limit?a.tpm_limit:"Unlimited"]}),(0,t.jsxs)("div",{children:["RPM: ",null!==a.rpm_limit?a.rpm_limit:"Unlimited"]})]})}}],ei=[{name:"Team ID",label:"Team ID",isSearchable:!0,searchFn:async e=>Z&&0!==Z.length?Z.filter(t=>t.team_id.toLowerCase().includes(e.toLowerCase())||t.team_alias&&t.team_alias.toLowerCase().includes(e.toLowerCase())).map(e=>({label:`${e.team_alias||e.team_id} (${e.team_id})`,value:e.team_id})):[]},{name:"Organization ID",label:"Organization ID",isSearchable:!0,searchFn:async e=>ee&&0!==ee.length?ee.filter(t=>t.organization_id?.toLowerCase().includes(e.toLowerCase())??!1).filter(e=>null!==e.organization_id&&void 0!==e.organization_id).map(e=>({label:`${e.organization_id||"Unknown"} (${e.organization_id})`,value:e.organization_id})):[]},{name:"Key Alias",label:"Key Alias",isSearchable:!0,searchFn:async e=>X.filter(t=>t.toLowerCase().includes(e.toLowerCase())).map(e=>({label:e,value:e}))},{name:"User ID",label:"User ID",isSearchable:!1},{name:"Key Hash",label:"Key Hash",isSearchable:!1}];console.log(`keys: ${JSON.stringify(F)}`);let er=(0,b.useReactTable)({data:Y,columns:es.filter(e=>"expander"!==e.id),columnResizeMode:"onChange",columnResizeDirection:"ltr",state:{sorting:n,pagination:u},onSortingChange:e=>{let t="function"==typeof e?e(n):e;if(console.log(`newSorting: ${JSON.stringify(t)}`),c(t),t&&t.length>0){let e=t[0],a=e.id,i=e.desc?"desc":"asc";console.log(`sortBy: ${a}, sortOrder: ${i}`),et({...G,"Sort By":a,"Sort Order":i},!0),s?.(a,i)}},onPaginationChange:h,getCoreRowModel:(0,v.getCoreRowModel)(),getSortedRowModel:(0,v.getSortedRowModel)(),getPaginationRowModel:(0,v.getPaginationRowModel)(),enableSorting:!0,manualSorting:!1,manualPagination:!0,pageCount:Math.ceil(H/u.pageSize)});o.default.useEffect(()=>{i&&c([{id:i.sortBy,desc:"desc"===i.sortOrder}])},[i]);let{pageIndex:el,pageSize:en}=er.getState().pagination,eo=Math.min((el+1)*en,H),ec=`${el*en+1} - ${eo}`;return(0,t.jsx)("div",{className:"w-full h-full overflow-hidden",children:r?(0,t.jsx)(Q.default,{keyId:r.token,onClose:()=>l(null),keyData:r,teams:Z,onDelete:V}):(0,t.jsxs)("div",{className:"border-b py-4 flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"w-full mb-6",children:(0,t.jsx)(R.default,{options:ei,onApplyFilters:et,initialValues:G,onResetFilters:ea})}),(0,t.jsxs)("div",{className:"flex items-center justify-between w-full mb-4",children:[L||U?(0,t.jsx)(M.Skeleton.Node,{active:!0,style:{width:200,height:20}}):(0,t.jsxs)("span",{className:"inline-flex text-sm text-gray-700",children:["Showing ",ec," of ",H," results"]}),(0,t.jsxs)("div",{className:"inline-flex items-center gap-2",children:[L||U?(0,t.jsx)(M.Skeleton.Node,{active:!0,style:{width:74,height:20}}):(0,t.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",el+1," of ",er.getPageCount()]}),L||U?(0,t.jsx)(M.Skeleton.Button,{active:!0,size:"small",style:{width:84,height:30}}):(0,t.jsx)("button",{onClick:()=>er.previousPage(),disabled:L||U||!er.getCanPreviousPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),L||U?(0,t.jsx)(M.Skeleton.Button,{active:!0,size:"small",style:{width:58,height:30}}):(0,t.jsx)("button",{onClick:()=>er.nextPage(),disabled:L||U||!er.getCanNextPage(),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),(0,t.jsx)("div",{className:"h-[75vh] overflow-auto",children:(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(C.Table,{className:"[&_td]:py-0.5 [&_th]:py-1",style:{width:er.getCenterTotalSize()},children:[(0,t.jsx)(_.TableHead,{children:er.getHeaderGroups().map(e=>(0,t.jsx)(O.TableRow,{children:e.headers.map(e=>(0,t.jsx)(k.TableHeaderCell,{"data-header-id":e.id,className:`py-1 h-8 relative hover:bg-gray-50 ${"actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""}`,style:{width:e.getSize(),position:"relative",cursor:e.column.getCanSort()?"pointer":"default"},onMouseEnter:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&(t.style.opacity="0.5")},onMouseLeave:()=>{let t=document.querySelector(`[data-header-id="${e.id}"] .resizer`);t&&!e.column.getIsResizing()&&(t.style.opacity="0")},onClick:e.column.getCanSort()?e.column.getToggleSortingHandler():void 0,children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,b.flexRender)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&e.column.getCanSort()&&(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(p.ChevronUpIcon,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(f.ChevronDownIcon,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(x.SwitchVerticalIcon,{className:"h-4 w-4 text-gray-400"})}),(0,t.jsx)("div",{onDoubleClick:()=>e.column.resetSize(),onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${er.options.columnResizeDirection} ${e.column.getIsResizing()?"isResizing":""}`,style:{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:e.column.getIsResizing()?"#3b82f6":"transparent",cursor:"col-resize",userSelect:"none",touchAction:"none",opacity:+!!e.column.getIsResizing()}})]})},e.id))},e.id))}),(0,t.jsx)(N.TableBody,{children:L||U?(0,t.jsx)(O.TableRow,{children:(0,t.jsx)(D.TableCell,{colSpan:es.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"ðŸš… Loading keys..."})})})}):Y.length>0?er.getRowModel().rows.map(e=>(0,t.jsx)(O.TableRow,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(D.TableCell,{style:{width:e.column.getSize(),maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:`py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ${"models"===e.column.id&&Array.isArray(e.getValue())&&e.getValue().length>3?"px-0":""}`,children:(0,b.flexRender)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(O.TableRow,{children:(0,t.jsx)(D.TableCell,{colSpan:es.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No keys found"})})})})})]})})})})]})})}e.s(["default",0,({userID:e,userRole:g,teams:m,keys:f,setUserRole:y,userEmail:p,setUserEmail:x,setTeams:b,setKeys:v,premiumUser:w,organizations:S,addKey:j,createClicked:C})=>{let N,[D,_]=(0,o.useState)(null),[k,O]=(0,o.useState)(null),z=(0,n.useSearchParams)(),M=(console.log("COOKIES",document.cookie),(N=document.cookie.split("; ").find(e=>e.startsWith("token=")))?N.split("=")[1]:null),P=z.get("invitation_id"),[T,I]=(0,o.useState)(null),[A,E]=(0,o.useState)(null),[q,K]=(0,o.useState)([]),[R,Q]=(0,o.useState)(null),[$,F]=(0,o.useState)(null);if(window.addEventListener("beforeunload",function(){sessionStorage.clear()}),(0,o.useEffect)(()=>{if(M){let e=(0,l.jwtDecode)(M);if(e){if(console.log("Decoded token:",e),console.log("Decoded key:",e.key),I(e.key),e.user_role){let t=function(e){if(!e)return"Undefined Role";switch(console.log(`Received user role: ${e}`),e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"app_user":return"App User";case"internal_user":return"Internal User";case"internal_user_viewer":return"Internal Viewer";default:return"Unknown Role"}}(e.user_role);console.log("Decoded user_role:",t),y(t)}else console.log("User role not defined");e.user_email?x(e.user_email):console.log(`User Email is not set ${e}`)}}if(e&&T&&g&&!f&&!D){let t=sessionStorage.getItem("userModels"+e);t?K(JSON.parse(t)):(console.log(`currentOrg: ${JSON.stringify(k)}`),(async()=>{try{let t=await (0,d.getProxyUISettings)(T);Q(t);let a=await (0,d.userInfoCall)(T,e,g,!1,null,null);_(a.user_info),console.log(`userSpendData: ${JSON.stringify(D)}`),a?.teams[0].keys?v(a.keys.concat(a.teams.filter(t=>"Admin"===g||t.user_id===e).flatMap(e=>e.keys))):v(a.keys),sessionStorage.setItem("userData"+e,JSON.stringify(a.keys)),sessionStorage.setItem("userSpendData"+e,JSON.stringify(a.user_info));let s=(await (0,d.modelAvailableCall)(T,e,g)).data.map(e=>e.id);console.log("available_model_names:",s),K(s),console.log("userModels:",q),sessionStorage.setItem("userModels"+e,JSON.stringify(s))}catch(e){console.error("There was an error fetching the data",e),e.message.includes("Invalid proxy server token passed")&&L()}})(),(0,u.fetchTeams)(T,e,g,k,b))}},[e,M,T,f,g]),(0,o.useEffect)(()=>{T&&(async()=>{try{let e=await (0,d.keyInfoCall)(T,[T]);console.log("keyInfo: ",e)}catch(e){e.message.includes("Invalid proxy server token passed")&&L()}})()},[T]),(0,o.useEffect)(()=>{console.log(`currentOrg: ${JSON.stringify(k)}, accessToken: ${T}, userID: ${e}, userRole: ${g}`),T&&(console.log("fetching teams"),(0,u.fetchTeams)(T,e,g,k,b))},[k]),(0,o.useEffect)(()=>{if(null!==f&&null!=$&&null!==$.team_id){let e=0;for(let t of(console.log(`keys: ${JSON.stringify(f)}`),f))$.hasOwnProperty("team_id")&&null!==t.team_id&&t.team_id===$.team_id&&(e+=t.spend);console.log(`sum: ${e}`),E(e)}else if(null!==f){let e=0;for(let t of f)e+=t.spend;E(e)}},[$]),null!=P)return(0,t.jsx)(c.default,{});function L(){(0,a.clearTokenCookies)();let e=(0,d.getProxyBaseUrl)();console.log("proxyBaseUrl:",e);let t=e?`${e}/sso/key/generate`:"/sso/key/generate";return console.log("Full URL:",t),window.location.href=t,null}if(null==M)return console.log("All cookies before redirect:",document.cookie),L(),null;try{let e=(0,l.jwtDecode)(M);console.log("Decoded token:",e);let t=e.exp,a=Math.floor(Date.now()/1e3);if(t&&a>=t)return console.log("Token expired, redirecting to login"),L(),null}catch(e){return console.error("Error decoding token:",e),(0,a.clearTokenCookies)(),L(),null}if(null==T)return null;if(null==e)return(0,t.jsx)("h1",{children:"User ID is not set"});if(null==g&&y("App Owner"),g&&"Admin Viewer"==g){let{Title:e,Paragraph:a}=r.Typography;return(0,t.jsxs)("div",{children:[(0,t.jsx)(e,{level:1,children:"Access Denied"}),(0,t.jsx)(a,{children:"Ask your proxy admin for access to create keys"})]})}return console.log("inside user dashboard, selected team",$),console.log("All cookies after redirect:",document.cookie),(0,t.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,t.jsx)(i.Grid,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,t.jsxs)(s.Col,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,t.jsx)(h.default,{team:$,teams:m,data:f,addKey:j},$?$.team_id:null),(0,t.jsx)(B,{teams:m,organizations:S})]})})})}],693569)}]);