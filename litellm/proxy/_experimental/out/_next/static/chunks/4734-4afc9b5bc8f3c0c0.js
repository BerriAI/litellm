"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4734],{1309:function(e,a,l){l.d(a,{C:function(){return r.Z}});var r=l(41649)},2967:function(e,a,l){l.d(a,{JO:function(){return i.Z},RM:function(){return s.Z},SC:function(){return c.Z},iA:function(){return t.Z},pj:function(){return n.Z},ss:function(){return d.Z},xs:function(){return o.Z},zx:function(){return r.Z}});var r=l(20831),i=l(47323),t=l(21626),s=l(97214),n=l(28241),d=l(58834),o=l(69552),c=l(71876)},44734:function(e,a,l){l.d(a,{Z:function(){return eY}});var r,i,t=l(57437),s=l(2265),n=l(71618),d=l(82680),o=l(19250),c=l(93192),u=l(52787),m=l(91810),x=l(13634),p=l(3810),h=l(64504);(r=i||(i={})).PresidioPII="Presidio PII",r.Bedrock="Bedrock Guardrail",r.Lakera="Lakera";let g={},f=e=>{let a={};return a.PresidioPII="Presidio PII",a.Bedrock="Bedrock Guardrail",a.Lakera="Lakera",Object.entries(e).forEach(e=>{let[l,r]=e;r&&"object"==typeof r&&"ui_friendly_name"in r&&(a[l.split("_").map((e,a)=>e.charAt(0).toUpperCase()+e.slice(1)).join("")]=r.ui_friendly_name)}),g=a,a},j=()=>Object.keys(g).length>0?g:i,v={PresidioPII:"presidio",Bedrock:"bedrock",Lakera:"lakera_v2"},y=e=>{Object.entries(e).forEach(e=>{let[a,l]=e;l&&"object"==typeof l&&"ui_friendly_name"in l&&(v[a.split("_").map((e,a)=>e.charAt(0).toUpperCase()+e.slice(1)).join("")]=a)})},_=e=>!!e&&"Presidio PII"===j()[e],b="../ui/assets/logos/",N={"Presidio PII":"".concat(b,"presidio.png"),"Bedrock Guardrail":"".concat(b,"bedrock.svg"),Lakera:"".concat(b,"lakeraai.jpeg"),"Azure Content Safety Prompt Shield":"".concat(b,"presidio.png"),"Azure Content Safety Text Moderation":"".concat(b,"presidio.png"),"Aporia AI":"".concat(b,"aporia.png"),"PANW Prisma AIRS":"".concat(b,"palo_alto_networks.jpeg"),"Noma Security":"".concat(b,"noma_security.png"),"Javelin Guardrails":"".concat(b,"javelin.png"),"Pillar Guardrail":"".concat(b,"pillar.jpeg"),"Google Cloud Model Armor":"".concat(b,"google.svg"),"Guardrails AI":"".concat(b,"guardrails_ai.jpeg"),"Lasso Guardrail":"".concat(b,"lasso.png"),"Pangea Guardrail":"".concat(b,"pangea.png"),"AIM Guardrail":"".concat(b,"aim_security.jpeg"),"OpenAI Moderation":"".concat(b,"openai_small.svg"),EnkryptAI:"".concat(b,"enkrypt_ai.avif")},w=e=>{if(!e)return{logo:"",displayName:"-"};let a=Object.keys(v).find(a=>v[a].toLowerCase()===e.toLowerCase());if(!a)return{logo:"",displayName:e};let l=j()[a];return{logo:N[l]||"",displayName:l||e}};var S=l(33866),k=l(89970),C=l(73002),Z=l(61994),I=l(97416),P=l(8881),O=l(10798),A=l(49638);let{Text:E}=c.default,{Option:G}=u.default,L=e=>e.replace(/_/g," "),T=e=>{switch(e){case"MASK":return(0,t.jsx)(I.Z,{style:{marginRight:4}});case"BLOCK":return(0,t.jsx)(P.Z,{style:{marginRight:4}});default:return null}},z=e=>{let{categories:a,selectedCategories:l,onChange:r}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)(O.Z,{className:"text-gray-500 mr-1"}),(0,t.jsx)(E,{className:"text-gray-500 font-medium",children:"Filter by category"})]}),(0,t.jsx)(u.default,{mode:"multiple",placeholder:"Select categories to filter by",style:{width:"100%"},onChange:r,value:l,allowClear:!0,showSearch:!0,optionFilterProp:"children",className:"mb-4",tagRender:e=>(0,t.jsx)(p.Z,{color:"blue",closable:e.closable,onClose:e.onClose,className:"mr-2 mb-2",children:e.label}),children:a.map(e=>(0,t.jsx)(G,{value:e.category,children:e.category},e.category))})]})},F=e=>{let{onSelectAll:a,onUnselectAll:l,hasSelectedEntities:r}=e;return(0,t.jsxs)("div",{className:"bg-gray-50 p-5 rounded-lg mb-6 border border-gray-200 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(E,{strong:!0,className:"text-gray-700 text-base",children:"Quick Actions"}),(0,t.jsx)(k.Z,{title:"Apply action to all PII types at once",children:(0,t.jsx)("div",{className:"ml-2 text-gray-400 cursor-help text-xs",children:"â“˜"})})]}),(0,t.jsx)(C.ZP,{type:"default",onClick:l,disabled:!r,icon:(0,t.jsx)(A.Z,{}),className:"border-gray-300 hover:text-red-600 hover:border-red-300",children:"Unselect All"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(C.ZP,{type:"default",onClick:()=>a("MASK"),className:"flex items-center justify-center h-10 border-blue-200 hover:border-blue-300 hover:text-blue-700 bg-blue-50 hover:bg-blue-100 text-blue-600",block:!0,icon:(0,t.jsx)(I.Z,{}),children:"Select All & Mask"}),(0,t.jsx)(C.ZP,{type:"default",onClick:()=>a("BLOCK"),className:"flex items-center justify-center h-10 border-red-200 hover:border-red-300 hover:text-red-700 bg-red-50 hover:bg-red-100 text-red-600",block:!0,icon:(0,t.jsx)(P.Z,{}),children:"Select All & Block"})]})]})},M=e=>{let{entities:a,selectedEntities:l,selectedActions:r,actions:i,onEntitySelect:s,onActionSelect:n,entityToCategoryMap:d}=e;return(0,t.jsxs)("div",{className:"border rounded-lg overflow-hidden shadow-sm",children:[(0,t.jsxs)("div",{className:"bg-gray-50 px-5 py-3 border-b flex",children:[(0,t.jsx)(E,{strong:!0,className:"flex-1 text-gray-700",children:"PII Type"}),(0,t.jsx)(E,{strong:!0,className:"w-32 text-right text-gray-700",children:"Action"})]}),(0,t.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:0===a.length?(0,t.jsx)("div",{className:"py-10 text-center text-gray-500",children:"No PII types match your filter criteria"}):a.map(e=>(0,t.jsxs)("div",{className:"px-5 py-3 flex items-center justify-between hover:bg-gray-50 border-b ".concat(l.includes(e)?"bg-blue-50":""),children:[(0,t.jsxs)("div",{className:"flex items-center flex-1",children:[(0,t.jsx)(Z.Z,{checked:l.includes(e),onChange:()=>s(e),className:"mr-3"}),(0,t.jsx)(E,{className:l.includes(e)?"font-medium text-gray-900":"text-gray-700",children:L(e)}),d.get(e)&&(0,t.jsx)(p.Z,{className:"ml-2 text-xs",color:"blue",children:d.get(e)})]}),(0,t.jsx)("div",{className:"w-32",children:(0,t.jsx)(u.default,{value:l.includes(e)&&r[e]||"MASK",onChange:a=>n(e,a),style:{width:120},disabled:!l.includes(e),className:"".concat(l.includes(e)?"":"opacity-50"),dropdownMatchSelectWidth:!1,children:i.map(e=>(0,t.jsx)(G,{value:e,children:(0,t.jsxs)("div",{className:"flex items-center",children:[T(e),e]})},e))})})]},e))})]})},{Title:B,Text:J}=c.default;var D=e=>{let{entities:a,actions:l,selectedEntities:r,selectedActions:i,onEntitySelect:n,onActionSelect:d,entityCategories:o=[]}=e,[c,u]=(0,s.useState)([]),m=new Map;o.forEach(e=>{e.entities.forEach(a=>{m.set(a,e.category)})});let x=a.filter(e=>0===c.length||c.includes(m.get(e)||""));return(0,t.jsxs)("div",{className:"pii-configuration",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(B,{level:4,className:"mb-0 font-semibold text-gray-800",children:"Configure PII Protection"})}),(0,t.jsx)(S.Z,{count:r.length,showZero:!0,style:{backgroundColor:r.length>0?"#4f46e5":"#d9d9d9"},overflowCount:999,children:(0,t.jsxs)(J,{className:"text-gray-500",children:[r.length," items selected"]})})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(z,{categories:o,selectedCategories:c,onChange:u}),(0,t.jsx)(F,{onSelectAll:e=>{a.forEach(a=>{r.includes(a)||n(a),d(a,e)})},onUnselectAll:()=>{r.forEach(e=>{n(e)})},hasSelectedEntities:r.length>0})]}),(0,t.jsx)(M,{entities:x,selectedEntities:r,selectedActions:i,actions:l,onEntitySelect:n,onActionSelect:d,entityToCategoryMap:m})]})},K=l(87908),R=l(31283),V=l(24199),U=e=>{var a;let{selectedProvider:l,accessToken:r,providerParams:i=null,value:n=null}=e,[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(i),[h,g]=(0,s.useState)(null);if((0,s.useEffect)(()=>{if(i){p(i);return}let e=async()=>{if(r){c(!0),g(null);try{let e=await (0,o.getGuardrailProviderSpecificParams)(r);console.log("Provider params API response:",e),p(e),f(e),y(e)}catch(e){console.error("Error fetching provider params:",e),g("Failed to load provider parameters")}finally{c(!1)}}};i||e()},[r,i]),!l)return null;if(d)return(0,t.jsx)(K.Z,{tip:"Loading provider parameters..."});if(h)return(0,t.jsx)("div",{className:"text-red-500",children:h});let j=null===(a=v[l])||void 0===a?void 0:a.toLowerCase(),_=m&&m[j];if(console.log("Provider key:",j),console.log("Provider fields:",_),!_||0===Object.keys(_).length)return(0,t.jsx)("div",{children:"No configuration fields available for this provider."});console.log("Value:",n);let b=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=arguments.length>2?arguments[2]:void 0;return Object.entries(e).map(e=>{let[r,i]=e,s=a?"".concat(a,".").concat(r):r,d=l?l[r]:null==n?void 0:n[r];return(console.log("Field value:",d),"ui_friendly_name"===r||"optional_params"===r&&"nested"===i.type&&i.fields)?null:"nested"===i.type&&i.fields?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-2 font-medium",children:r}),(0,t.jsx)("div",{className:"ml-4 border-l-2 border-gray-200 pl-4",children:b(i.fields,s,d)})]},s):(0,t.jsx)(x.Z.Item,{name:s,label:r,tooltip:i.description,rules:i.required?[{required:!0,message:"".concat(r," is required")}]:void 0,children:"select"===i.type&&i.options?(0,t.jsx)(u.default,{placeholder:i.description,defaultValue:d||i.default_value,children:i.options.map(e=>(0,t.jsx)(u.default.Option,{value:e,children:e},e))}):"multiselect"===i.type&&i.options?(0,t.jsx)(u.default,{mode:"multiple",placeholder:i.description,defaultValue:d||i.default_value,children:i.options.map(e=>(0,t.jsx)(u.default.Option,{value:e,children:e},e))}):"bool"===i.type||"boolean"===i.type?(0,t.jsxs)(u.default,{placeholder:i.description,defaultValue:void 0!==d?String(d):i.default_value,children:[(0,t.jsx)(u.default.Option,{value:"true",children:"True"}),(0,t.jsx)(u.default.Option,{value:"false",children:"False"})]}):"number"===i.type?(0,t.jsx)(V.Z,{step:1,width:400,placeholder:i.description,defaultValue:void 0!==d?Number(d):void 0}):r.includes("password")||r.includes("secret")||r.includes("key")?(0,t.jsx)(R.o,{placeholder:i.description,type:"password",defaultValue:d||""}):(0,t.jsx)(R.o,{placeholder:i.description,type:"text",defaultValue:d||""})},s)})};return(0,t.jsx)(t.Fragment,{children:b(_)})};let{Title:q}=c.default,H=e=>{let{field:a,fieldKey:l,fullFieldKey:r,value:i}=e,[n,d]=s.useState([]),[o,c]=s.useState(a.dict_key_options||[]);s.useEffect(()=>{if(i&&"object"==typeof i){let e=Object.keys(i);d(e.map(e=>({key:e,id:"".concat(e,"_").concat(Date.now(),"_").concat(Math.random())}))),c((a.dict_key_options||[]).filter(a=>!e.includes(a)))}},[i,a.dict_key_options]);let m=e=>{e&&(d([...n,{key:e,id:"".concat(e,"_").concat(Date.now())}]),c(o.filter(a=>a!==e)))},p=(e,a)=>{d(n.filter(a=>a.id!==e)),c([...o,a].sort())};return(0,t.jsxs)("div",{className:"space-y-3",children:[n.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[(0,t.jsx)("div",{className:"w-24 font-medium text-sm",children:e.key}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(x.Z.Item,{name:Array.isArray(r)?[...r,e.key]:[r,e.key],style:{marginBottom:0},initialValue:i&&"object"==typeof i?i[e.key]:void 0,normalize:"number"===a.dict_value_type?e=>{if(null==e||""===e)return;let a=Number(e);return isNaN(a)?e:a}:void 0,children:"number"===a.dict_value_type?(0,t.jsx)(V.Z,{step:1,width:200,placeholder:"Enter ".concat(e.key," value")}):"boolean"===a.dict_value_type?(0,t.jsxs)(u.default,{placeholder:"Select ".concat(e.key," value"),children:[(0,t.jsx)(u.default.Option,{value:!0,children:"True"}),(0,t.jsx)(u.default.Option,{value:!1,children:"False"})]}):(0,t.jsx)(R.o,{placeholder:"Enter ".concat(e.key," value"),type:"text"})})}),(0,t.jsx)("button",{type:"button",className:"text-red-500 hover:text-red-700 text-sm",onClick:()=>p(e.id,e.key),children:"Remove"})]},e.id)),o.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-3 mt-2",children:[(0,t.jsx)(u.default,{placeholder:"Select category to configure",style:{width:200},onSelect:e=>e&&m(e),value:void 0,children:o.map(e=>(0,t.jsx)(u.default.Option,{value:e,children:e},e))}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Select a category to add threshold configuration"})]})]})};var Y=e=>{let{optionalParams:a,parentFieldKey:l,values:r}=e,i=(e,a)=>{let i="".concat(l,".").concat(e),s=null==r?void 0:r[e];return(console.log("value",s),"dict"===a.type&&a.dict_key_options)?(0,t.jsxs)("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[(0,t.jsx)("div",{className:"mb-4 font-medium text-gray-900 text-base",children:e}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:a.description}),(0,t.jsx)(H,{field:a,fieldKey:e,fullFieldKey:[l,e],value:s})]},i):(0,t.jsx)("div",{className:"mb-8 p-6 bg-white rounded-lg border border-gray-200 shadow-sm",children:(0,t.jsx)(x.Z.Item,{name:[l,e],label:(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900 text-base",children:e}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a.description})]}),rules:a.required?[{required:!0,message:"".concat(e," is required")}]:void 0,className:"mb-0",initialValue:void 0!==s?s:a.default_value,normalize:"number"===a.type?e=>{if(null==e||""===e)return;let a=Number(e);return isNaN(a)?e:a}:void 0,children:"select"===a.type&&a.options?(0,t.jsx)(u.default,{placeholder:a.description,children:a.options.map(e=>(0,t.jsx)(u.default.Option,{value:e,children:e},e))}):"multiselect"===a.type&&a.options?(0,t.jsx)(u.default,{mode:"multiple",placeholder:a.description,children:a.options.map(e=>(0,t.jsx)(u.default.Option,{value:e,children:e},e))}):"bool"===a.type||"boolean"===a.type?(0,t.jsxs)(u.default,{placeholder:a.description,children:[(0,t.jsx)(u.default.Option,{value:"true",children:"True"}),(0,t.jsx)(u.default.Option,{value:"false",children:"False"})]}):"number"===a.type?(0,t.jsx)(V.Z,{step:1,width:400,placeholder:a.description}):e.includes("password")||e.includes("secret")||e.includes("key")?(0,t.jsx)(R.o,{placeholder:a.description,type:"password"}):(0,t.jsx)(R.o,{placeholder:a.description,type:"text"})})},i)};return a.fields&&0!==Object.keys(a.fields).length?(0,t.jsxs)("div",{className:"guardrail-optional-params",children:[(0,t.jsxs)("div",{className:"mb-8 pb-4 border-b border-gray-100",children:[(0,t.jsx)(q,{level:3,className:"mb-2 font-semibold text-gray-900",children:"Optional Parameters"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm",children:a.description||"Configure additional settings for this guardrail provider"})]}),(0,t.jsx)("div",{className:"space-y-8",children:Object.entries(a.fields).map(e=>{let[a,l]=e;return i(a,l)})})]}):null},Q=l(9114);let{Title:W,Text:X,Link:$}=c.default,{Option:ee}=u.default,{Step:ea}=m.default,el={pre_call:"Before LLM Call - Runs before the LLM call and checks the input (Recommended)",during_call:"During LLM Call - Runs in parallel with the LLM call, with response held until check completes",post_call:"After LLM Call - Runs after the LLM call and checks only the output",logging_only:"Logging Only - Only runs on logging callbacks without affecting the LLM call",pre_mcp_call:"Before MCP Tool Call - Runs before MCP tool execution and validates tool calls",during_mcp_call:"During MCP Tool Call - Runs in parallel with MCP tool execution for monitoring"};var er=e=>{let{visible:a,onClose:l,accessToken:r,onSuccess:i}=e,[n]=x.Z.useForm(),[c,g]=(0,s.useState)(!1),[b,w]=(0,s.useState)(null),[S,k]=(0,s.useState)(null),[C,Z]=(0,s.useState)([]),[I,P]=(0,s.useState)({}),[O,A]=(0,s.useState)(0),[E,G]=(0,s.useState)(null),[L,T]=(0,s.useState)([]),[z,F]=(0,s.useState)(2),[M,B]=(0,s.useState)({});(0,s.useEffect)(()=>{r&&(async()=>{try{let[e,a]=await Promise.all([(0,o.getGuardrailUISettings)(r),(0,o.getGuardrailProviderSpecificParams)(r)]);k(e),G(a),f(a),y(a)}catch(e){console.error("Error fetching guardrail data:",e),Q.Z.fromBackend("Failed to load guardrail configuration")}})()},[r]);let J=e=>{w(e),n.setFieldsValue({config:void 0,presidio_analyzer_api_base:void 0,presidio_anonymizer_api_base:void 0}),Z([]),P({}),T([]),F(2),B({})},K=e=>{Z(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},R=(e,a)=>{P(l=>({...l,[e]:a}))},V=async()=>{try{if(0===O&&(await n.validateFields(["guardrail_name","provider","mode","default_on"]),b)){let e=["guardrail_name","provider","mode","default_on"];"PresidioPII"===b&&e.push("presidio_analyzer_api_base","presidio_anonymizer_api_base"),await n.validateFields(e)}if(1===O&&_(b)&&0===C.length){Q.Z.fromBackend("Please select at least one PII entity to continue");return}A(O+1)}catch(e){console.error("Form validation failed:",e)}},q=()=>{n.resetFields(),w(null),Z([]),P({}),T([]),F(2),B({}),A(0)},H=()=>{q(),l()},W=async()=>{try{g(!0),await n.validateFields();let a=n.getFieldsValue(!0),t=v[a.provider],s={guardrail_name:a.guardrail_name,litellm_params:{guardrail:t,mode:a.mode,default_on:a.default_on},guardrail_info:{}};if("PresidioPII"===a.provider&&C.length>0){let e={};C.forEach(a=>{e[a]=I[a]||"MASK"}),s.litellm_params.pii_entities_config=e,a.presidio_analyzer_api_base&&(s.litellm_params.presidio_analyzer_api_base=a.presidio_analyzer_api_base),a.presidio_anonymizer_api_base&&(s.litellm_params.presidio_anonymizer_api_base=a.presidio_anonymizer_api_base)}else if(a.config)try{let e=JSON.parse(a.config);s.guardrail_info=e}catch(e){Q.Z.fromBackend("Invalid JSON in configuration"),g(!1);return}if(console.log("values: ",JSON.stringify(a)),E&&b){var e;let l=null===(e=v[b])||void 0===e?void 0:e.toLowerCase();console.log("providerKey: ",l);let r=E[l]||{},i=new Set;console.log("providerSpecificParams: ",JSON.stringify(r)),Object.keys(r).forEach(e=>{"optional_params"!==e&&i.add(e)}),r.optional_params&&r.optional_params.fields&&Object.keys(r.optional_params.fields).forEach(e=>{i.add(e)}),console.log("allowedParams: ",i),i.forEach(e=>{let l=a[e];if(null==l||""===l){var r;l=null===(r=a.optional_params)||void 0===r?void 0:r[e]}null!=l&&""!==l&&(s.litellm_params[e]=l)})}if(!r)throw Error("No access token available");console.log("Sending guardrail data:",JSON.stringify(s)),await (0,o.createGuardrailCall)(r,s),Q.Z.success("Guardrail created successfully"),q(),i(),l()}catch(e){console.error("Failed to create guardrail:",e),Q.Z.fromBackend("Failed to create guardrail: "+(e instanceof Error?e.message:String(e)))}finally{g(!1)}},X=()=>{var e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z.Item,{name:"guardrail_name",label:"Guardrail Name",rules:[{required:!0,message:"Please enter a guardrail name"}],children:(0,t.jsx)(h.o,{placeholder:"Enter a name for this guardrail"})}),(0,t.jsx)(x.Z.Item,{name:"provider",label:"Guardrail Provider",rules:[{required:!0,message:"Please select a provider"}],children:(0,t.jsx)(u.default,{placeholder:"Select a guardrail provider",onChange:J,labelInValue:!1,optionLabelProp:"label",dropdownRender:e=>e,showSearch:!0,children:Object.entries(j()).map(e=>{let[a,l]=e;return(0,t.jsx)(ee,{value:a,label:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[N[l]&&(0,t.jsx)("img",{src:N[l],alt:"",style:{height:"20px",width:"20px",marginRight:"8px",objectFit:"contain"},onError:e=>{e.currentTarget.style.display="none"}}),(0,t.jsx)("span",{children:l})]}),children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[N[l]&&(0,t.jsx)("img",{src:N[l],alt:"",style:{height:"20px",width:"20px",marginRight:"8px",objectFit:"contain"},onError:e=>{e.currentTarget.style.display="none"}}),(0,t.jsx)("span",{children:l})]})},a)})})}),(0,t.jsx)(x.Z.Item,{name:"mode",label:"Mode",tooltip:"How the guardrail should be applied",rules:[{required:!0,message:"Please select a mode"}],children:(0,t.jsx)(u.default,{optionLabelProp:"label",mode:"multiple",children:(null==S?void 0:null===(e=S.supported_modes)||void 0===e?void 0:e.map(e=>(0,t.jsx)(ee,{value:e,label:e,children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:e}),"pre_call"===e&&(0,t.jsx)(p.Z,{color:"green",style:{marginLeft:"8px"},children:"Recommended"})]}),(0,t.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:el[e]})]})},e)))||(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee,{value:"pre_call",label:"pre_call",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{children:"pre_call"})," ",(0,t.jsx)(p.Z,{color:"green",children:"Recommended"})]}),(0,t.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:el.pre_call})]})}),(0,t.jsx)(ee,{value:"during_call",label:"during_call",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,t.jsx)("strong",{children:"during_call"})}),(0,t.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:el.during_call})]})}),(0,t.jsx)(ee,{value:"post_call",label:"post_call",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,t.jsx)("strong",{children:"post_call"})}),(0,t.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:el.post_call})]})}),(0,t.jsx)(ee,{value:"logging_only",label:"logging_only",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:(0,t.jsx)("strong",{children:"logging_only"})}),(0,t.jsx)("div",{style:{fontSize:"12px",color:"#888"},children:el.logging_only})]})})]})})}),(0,t.jsx)(x.Z.Item,{name:"default_on",label:"Always On",tooltip:"If enabled, this guardrail will be applied to all requests by default.",children:(0,t.jsxs)(u.default,{children:[(0,t.jsx)(u.default.Option,{value:!0,children:"Yes"}),(0,t.jsx)(u.default.Option,{value:!1,children:"No"})]})}),(0,t.jsx)(U,{selectedProvider:b,accessToken:r,providerParams:E})]})},$=()=>S&&"PresidioPII"===b?(0,t.jsx)(D,{entities:S.supported_entities,actions:S.supported_actions,selectedEntities:C,selectedActions:I,onEntitySelect:K,onActionSelect:R,entityCategories:S.pii_entity_categories}):null,er=()=>{var e;if(!b||!E)return null;console.log("guardrail_provider_map: ",v),console.log("selectedProvider: ",b);let a=null===(e=v[b])||void 0===e?void 0:e.toLowerCase(),l=E&&E[a];return l&&l.optional_params?(0,t.jsx)(Y,{optionalParams:l.optional_params,parentFieldKey:"optional_params"}):null};return(0,t.jsx)(d.Z,{title:"Add Guardrail",open:a,onCancel:H,footer:null,width:700,children:(0,t.jsxs)(x.Z,{form:n,layout:"vertical",initialValues:{mode:"pre_call",default_on:!1},children:[(0,t.jsxs)(m.default,{current:O,className:"mb-6",children:[(0,t.jsx)(ea,{title:"Basic Info"}),(0,t.jsx)(ea,{title:_(b)?"PII Configuration":"Provider Configuration"})]}),(()=>{switch(O){case 0:return X();case 1:if(_(b))return $();return er();default:return null}})(),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[O>0&&(0,t.jsx)(h.z,{variant:"secondary",onClick:()=>{A(O-1)},children:"Previous"}),O<2&&(0,t.jsx)(h.z,{onClick:V,children:"Next"}),2===O&&(0,t.jsx)(h.z,{onClick:W,loading:c,children:"Create Guardrail"}),(0,t.jsx)(h.z,{variant:"secondary",onClick:H,children:"Cancel"})]})]})})},ei=l(2967),et=l(74998),es=l(44633),en=l(86462),ed=l(49084),eo=l(1309),ec=l(71594),eu=l(24525),em=l(64482),ex=l(63709);let{Title:ep,Text:eh}=c.default,{Option:eg}=u.default;var ef=e=>{var a;let{visible:l,onClose:r,accessToken:i,onSuccess:n,guardrailId:c,initialValues:m}=e,[p]=x.Z.useForm(),[g,f]=(0,s.useState)(!1),[y,_]=(0,s.useState)((null==m?void 0:m.provider)||null),[b,w]=(0,s.useState)(null),[S,k]=(0,s.useState)([]),[C,Z]=(0,s.useState)({});(0,s.useEffect)(()=>{(async()=>{try{if(!i)return;let e=await (0,o.getGuardrailUISettings)(i);w(e)}catch(e){console.error("Error fetching guardrail settings:",e),Q.Z.fromBackend("Failed to load guardrail settings")}})()},[i]),(0,s.useEffect)(()=>{(null==m?void 0:m.pii_entities_config)&&Object.keys(m.pii_entities_config).length>0&&(k(Object.keys(m.pii_entities_config)),Z(m.pii_entities_config))},[m]);let I=e=>{k(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},P=(e,a)=>{Z(l=>({...l,[e]:a}))},O=async()=>{try{f(!0);let e=await p.validateFields(),a=v[e.provider],l={guardrail_id:c,guardrail:{guardrail_name:e.guardrail_name,litellm_params:{guardrail:a,mode:e.mode,default_on:e.default_on},guardrail_info:{}}};if("PresidioPII"===e.provider&&S.length>0){let e={};S.forEach(a=>{e[a]=C[a]||"MASK"}),l.guardrail.litellm_params.pii_entities_config=e}else if(e.config)try{let a=JSON.parse(e.config);"Bedrock"===e.provider&&a?(a.guardrail_id&&(l.guardrail.litellm_params.guardrailIdentifier=a.guardrail_id),a.guardrail_version&&(l.guardrail.litellm_params.guardrailVersion=a.guardrail_version)):l.guardrail.guardrail_info=a}catch(e){Q.Z.fromBackend("Invalid JSON in configuration"),f(!1);return}if(!i)throw Error("No access token available");console.log("Sending guardrail update data:",JSON.stringify(l));let t=await fetch("/guardrails/".concat(c),{method:"PUT",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},body:JSON.stringify(l)});if(!t.ok){let e=await t.text();throw Error(e||"Failed to update guardrail")}Q.Z.success("Guardrail updated successfully"),n(),r()}catch(e){console.error("Failed to update guardrail:",e),Q.Z.fromBackend("Failed to update guardrail: "+(e instanceof Error?e.message:String(e)))}finally{f(!1)}},A=()=>b&&y&&"PresidioPII"===y?(0,t.jsx)(D,{entities:b.supported_entities,actions:b.supported_actions,selectedEntities:S,selectedActions:C,onEntitySelect:I,onActionSelect:P,entityCategories:b.pii_entity_categories}):null;return(0,t.jsx)(d.Z,{title:"Edit Guardrail",open:l,onCancel:r,footer:null,width:700,children:(0,t.jsxs)(x.Z,{form:p,layout:"vertical",initialValues:m,children:[(0,t.jsx)(x.Z.Item,{name:"guardrail_name",label:"Guardrail Name",rules:[{required:!0,message:"Please enter a guardrail name"}],children:(0,t.jsx)(h.o,{placeholder:"Enter a name for this guardrail"})}),(0,t.jsx)(x.Z.Item,{name:"provider",label:"Guardrail Provider",rules:[{required:!0,message:"Please select a provider"}],children:(0,t.jsx)(u.default,{placeholder:"Select a guardrail provider",onChange:e=>{_(e),p.setFieldsValue({config:void 0}),k([]),Z({})},disabled:!0,optionLabelProp:"label",children:Object.entries(j()).map(e=>{let[a,l]=e;return(0,t.jsx)(eg,{value:a,label:l,children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[N[l]&&(0,t.jsx)("img",{src:N[l],alt:"",style:{height:"20px",width:"20px",marginRight:"8px",objectFit:"contain"},onError:e=>{e.currentTarget.style.display="none"}}),(0,t.jsx)("span",{children:l})]})},a)})})}),(0,t.jsx)(x.Z.Item,{name:"mode",label:"Mode",tooltip:"How the guardrail should be applied",rules:[{required:!0,message:"Please select a mode"}],children:(0,t.jsx)(u.default,{children:(null==b?void 0:null===(a=b.supported_modes)||void 0===a?void 0:a.map(e=>(0,t.jsx)(eg,{value:e,children:e},e)))||(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eg,{value:"pre_call",children:"pre_call"}),(0,t.jsx)(eg,{value:"post_call",children:"post_call"})]})})}),(0,t.jsx)(x.Z.Item,{name:"default_on",label:"Always On",tooltip:"If enabled, this guardrail will be applied to all requests by default",valuePropName:"checked",children:(0,t.jsx)(ex.Z,{})}),(()=>{if(!y)return null;if("PresidioPII"===y)return A();switch(y){case"Aporia":return(0,t.jsx)(x.Z.Item,{label:"Aporia Configuration",name:"config",tooltip:"JSON configuration for Aporia",children:(0,t.jsx)(em.default.TextArea,{rows:4,placeholder:'{\n  "api_key": "your_aporia_api_key",\n  "project_name": "your_project_name"\n}'})});case"AimSecurity":return(0,t.jsx)(x.Z.Item,{label:"Aim Security Configuration",name:"config",tooltip:"JSON configuration for Aim Security",children:(0,t.jsx)(em.default.TextArea,{rows:4,placeholder:'{\n  "api_key": "your_aim_api_key"\n}'})});case"Bedrock":return(0,t.jsx)(x.Z.Item,{label:"Amazon Bedrock Configuration",name:"config",tooltip:"JSON configuration for Amazon Bedrock guardrails",children:(0,t.jsx)(em.default.TextArea,{rows:4,placeholder:'{\n  "guardrail_id": "your_guardrail_id",\n  "guardrail_version": "your_guardrail_version"\n}'})});case"GuardrailsAI":return(0,t.jsx)(x.Z.Item,{label:"Guardrails.ai Configuration",name:"config",tooltip:"JSON configuration for Guardrails.ai",children:(0,t.jsx)(em.default.TextArea,{rows:4,placeholder:'{\n  "api_key": "your_guardrails_api_key",\n  "guardrail_id": "your_guardrail_id"\n}'})});case"LakeraAI":return(0,t.jsx)(x.Z.Item,{label:"Lakera AI Configuration",name:"config",tooltip:"JSON configuration for Lakera AI",children:(0,t.jsx)(em.default.TextArea,{rows:4,placeholder:'{\n  "api_key": "your_lakera_api_key"\n}'})});case"PromptInjection":return(0,t.jsx)(x.Z.Item,{label:"Prompt Injection Configuration",name:"config",tooltip:"JSON configuration for prompt injection detection",children:(0,t.jsx)(em.default.TextArea,{rows:4,placeholder:'{\n  "threshold": 0.8\n}'})});default:return(0,t.jsx)(x.Z.Item,{label:"Custom Configuration",name:"config",tooltip:"JSON configuration for your custom guardrail",children:(0,t.jsx)(em.default.TextArea,{rows:4,placeholder:'{\n  "key1": "value1",\n  "key2": "value2"\n}'})})}})(),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,t.jsx)(h.z,{variant:"secondary",onClick:r,children:"Cancel"}),(0,t.jsx)(h.z,{onClick:O,loading:g,children:"Update Guardrail"})]})]})})},ej=e=>{let{guardrailsList:a,isLoading:l,onDeleteClick:r,accessToken:i,onGuardrailUpdated:n,isAdmin:d=!1,onGuardrailClick:o}=e,[c,u]=(0,s.useState)([{id:"created_at",desc:!0}]),[m,x]=(0,s.useState)(!1),[p,h]=(0,s.useState)(null),g=e=>e?new Date(e).toLocaleString():"-",f=[{header:"Guardrail ID",accessorKey:"guardrail_id",cell:e=>(0,t.jsx)(k.Z,{title:String(e.getValue()||""),children:(0,t.jsx)(ei.zx,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>e.getValue()&&o(e.getValue()),children:e.getValue()?"".concat(String(e.getValue()).slice(0,7),"..."):""})})},{header:"Name",accessorKey:"guardrail_name",cell:e=>{let{row:a}=e,l=a.original;return(0,t.jsx)(k.Z,{title:l.guardrail_name,children:(0,t.jsx)("span",{className:"text-xs font-medium",children:l.guardrail_name||"-"})})}},{header:"Provider",accessorKey:"litellm_params.guardrail",cell:e=>{let{row:a}=e,{logo:l,displayName:r}=w(a.original.litellm_params.guardrail);return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&(0,t.jsx)("img",{src:l,alt:"".concat(r," logo"),className:"w-4 h-4",onError:e=>{e.target.style.display="none"}}),(0,t.jsx)("span",{className:"text-xs",children:r})]})}},{header:"Mode",accessorKey:"litellm_params.mode",cell:e=>{let{row:a}=e,l=a.original;return(0,t.jsx)("span",{className:"text-xs",children:l.litellm_params.mode})}},{header:"Default On",accessorKey:"litellm_params.default_on",cell:e=>{var a,l;let{row:r}=e,i=r.original;return(0,t.jsx)(eo.C,{color:(null===(a=i.litellm_params)||void 0===a?void 0:a.default_on)?"green":"gray",className:"text-xs font-normal",size:"xs",children:(null===(l=i.litellm_params)||void 0===l?void 0:l.default_on)?"Default On":"Default Off"})}},{header:"Created At",accessorKey:"created_at",cell:e=>{let{row:a}=e,l=a.original;return(0,t.jsx)(k.Z,{title:l.created_at,children:(0,t.jsx)("span",{className:"text-xs",children:g(l.created_at)})})}},{header:"Updated At",accessorKey:"updated_at",cell:e=>{let{row:a}=e,l=a.original;return(0,t.jsx)(k.Z,{title:l.updated_at,children:(0,t.jsx)("span",{className:"text-xs",children:g(l.updated_at)})})}},{id:"actions",header:"",cell:e=>{let{row:a}=e,l=a.original;return(0,t.jsx)("div",{className:"flex space-x-2",children:(0,t.jsx)(ei.JO,{icon:et.Z,size:"sm",onClick:()=>l.guardrail_id&&r(l.guardrail_id,l.guardrail_name||"Unnamed Guardrail"),className:"cursor-pointer hover:text-red-500",tooltip:"Delete guardrail"})})}}],j=(0,ec.b7)({data:a,columns:f,state:{sorting:c},onSortingChange:u,getCoreRowModel:(0,eu.sC)(),getSortedRowModel:(0,eu.tj)(),enableSorting:!0});return(0,t.jsxs)("div",{className:"rounded-lg custom-border relative",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(ei.iA,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,t.jsx)(ei.ss,{children:j.getHeaderGroups().map(e=>(0,t.jsx)(ei.SC,{children:e.headers.map(e=>(0,t.jsx)(ei.xs,{className:"py-1 h-8 ".concat("actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""),onClick:e.column.getToggleSortingHandler(),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,ec.ie)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(es.Z,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(en.Z,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(ed.Z,{className:"h-4 w-4 text-gray-400"})})]})},e.id))},e.id))}),(0,t.jsx)(ei.RM,{children:l?(0,t.jsx)(ei.SC,{children:(0,t.jsx)(ei.pj,{colSpan:f.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"Loading..."})})})}):a.length>0?j.getRowModel().rows.map(e=>(0,t.jsx)(ei.SC,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(ei.pj,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ".concat("actions"===e.column.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""),children:(0,ec.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(ei.SC,{children:(0,t.jsx)(ei.pj,{colSpan:f.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No guardrails found"})})})})})]})}),p&&(0,t.jsx)(ef,{visible:m,onClose:()=>x(!1),accessToken:i,onSuccess:()=>{x(!1),h(null),n()},guardrailId:p.guardrail_id||"",initialValues:{guardrail_name:p.guardrail_name||"",provider:Object.keys(v).find(e=>v[e]===(null==p?void 0:p.litellm_params.guardrail))||"",mode:p.litellm_params.mode,default_on:p.litellm_params.default_on,pii_entities_config:p.litellm_params.pii_entities_config,...p.guardrail_info}})]})},ev=l(20347),ey=l(30078),e_=l(23496),eb=l(15424),eN=l(10900),ew=l(59872),eS=l(30401),ek=l(78867),eC=e=>{var a,l,r,i,n,d,c,m,p,h,g;let{guardrailId:f,onClose:j,accessToken:y,isAdmin:_}=e,[b,N]=(0,s.useState)(null),[S,Z]=(0,s.useState)(null),[I,P]=(0,s.useState)(!0),[O,A]=(0,s.useState)(!1),[E]=x.Z.useForm(),[G,L]=(0,s.useState)([]),[T,z]=(0,s.useState)({}),[F,M]=(0,s.useState)(null),[B,J]=(0,s.useState)({}),K=async()=>{try{var e;if(P(!0),!y)return;let a=await (0,o.getGuardrailInfo)(y,f);if(N(a),null===(e=a.litellm_params)||void 0===e?void 0:e.pii_entities_config){let e=a.litellm_params.pii_entities_config;if(L([]),z({}),Object.keys(e).length>0){let a=[],l={};Object.entries(e).forEach(e=>{let[r,i]=e;a.push(r),l[r]="string"==typeof i?i:"MASK"}),L(a),z(l)}}else L([]),z({})}catch(e){Q.Z.fromBackend("Failed to load guardrail information"),console.error("Error fetching guardrail info:",e)}finally{P(!1)}},R=async()=>{try{if(!y)return;let e=await (0,o.getGuardrailProviderSpecificParams)(y);Z(e)}catch(e){console.error("Error fetching guardrail provider specific params:",e)}},V=async()=>{try{if(!y)return;let e=await (0,o.getGuardrailUISettings)(y);M(e)}catch(e){console.error("Error fetching guardrail UI settings:",e)}};(0,s.useEffect)(()=>{R()},[y]),(0,s.useEffect)(()=>{K(),V()},[f,y]),(0,s.useEffect)(()=>{if(b&&E){var e;E.setFieldsValue({guardrail_name:b.guardrail_name,...b.litellm_params,guardrail_info:b.guardrail_info?JSON.stringify(b.guardrail_info,null,2):"",...(null===(e=b.litellm_params)||void 0===e?void 0:e.optional_params)&&{optional_params:b.litellm_params.optional_params}})}},[b,S,E]);let q=async e=>{try{var a,l,r;if(!y)return;let i={litellm_params:{}};e.guardrail_name!==b.guardrail_name&&(i.guardrail_name=e.guardrail_name),e.default_on!==(null===(a=b.litellm_params)||void 0===a?void 0:a.default_on)&&(i.litellm_params.default_on=e.default_on);let t=b.guardrail_info,s=e.guardrail_info?JSON.parse(e.guardrail_info):void 0;JSON.stringify(t)!==JSON.stringify(s)&&(i.guardrail_info=s);let n=(null===(l=b.litellm_params)||void 0===l?void 0:l.pii_entities_config)||{},d={};G.forEach(e=>{d[e]=T[e]||"MASK"}),JSON.stringify(n)!==JSON.stringify(d)&&(i.litellm_params.pii_entities_config=d);let c=Object.keys(v).find(e=>{var a;return v[e]===(null===(a=b.litellm_params)||void 0===a?void 0:a.guardrail)});if(console.log("values: ",JSON.stringify(e)),console.log("currentProvider: ",c),S&&c){let a=S[null===(r=v[c])||void 0===r?void 0:r.toLowerCase()]||{},l=new Set;console.log("providerSpecificParams: ",JSON.stringify(a)),Object.keys(a).forEach(e=>{"optional_params"!==e&&l.add(e)}),a.optional_params&&a.optional_params.fields&&Object.keys(a.optional_params.fields).forEach(e=>{l.add(e)}),console.log("allowedParams: ",l),l.forEach(a=>{var l,r;let t=e[a];(null==t||""===t)&&(t=null===(r=e.optional_params)||void 0===r?void 0:r[a]);let s=null===(l=b.litellm_params)||void 0===l?void 0:l[a];JSON.stringify(t)!==JSON.stringify(s)&&(null!=t&&""!==t?i.litellm_params[a]=t:null!=s&&""!==s&&(i.litellm_params[a]=null))})}if(0===Object.keys(i.litellm_params).length&&delete i.litellm_params,0===Object.keys(i).length){Q.Z.info("No changes detected"),A(!1);return}await (0,o.updateGuardrailCall)(y,f,i),Q.Z.success("Guardrail updated successfully"),K(),A(!1)}catch(e){console.error("Error updating guardrail:",e),Q.Z.fromBackend("Failed to update guardrail")}};if(I)return(0,t.jsx)("div",{className:"p-4",children:"Loading..."});if(!b)return(0,t.jsx)("div",{className:"p-4",children:"Guardrail not found"});let H=e=>e?new Date(e).toLocaleString():"-",{logo:W,displayName:X}=w((null===(a=b.litellm_params)||void 0===a?void 0:a.guardrail)||""),$=async(e,a)=>{await (0,ew.vQ)(e)&&(J(e=>({...e,[a]:!0})),setTimeout(()=>{J(e=>({...e,[a]:!1}))},2e3))},ee="config"===b.guardrail_definition_location;return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.zx,{icon:eN.Z,variant:"light",onClick:j,className:"mb-4",children:"Back to Guardrails"}),(0,t.jsx)(ey.Dx,{children:b.guardrail_name||"Unnamed Guardrail"}),(0,t.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)(ey.xv,{className:"text-gray-500 font-mono",children:b.guardrail_id}),(0,t.jsx)(C.ZP,{type:"text",size:"small",icon:B["guardrail-id"]?(0,t.jsx)(eS.Z,{size:12}):(0,t.jsx)(ek.Z,{size:12}),onClick:()=>$(b.guardrail_id,"guardrail-id"),className:"left-2 z-10 transition-all duration-200 ".concat(B["guardrail-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")})]})]}),(0,t.jsxs)(ey.v0,{children:[(0,t.jsxs)(ey.td,{className:"mb-4",children:[(0,t.jsx)(ey.OK,{children:"Overview"},"overview"),_?(0,t.jsx)(ey.OK,{children:"Settings"},"settings"):(0,t.jsx)(t.Fragment,{})]}),(0,t.jsxs)(ey.nP,{children:[(0,t.jsxs)(ey.x4,{children:[(0,t.jsxs)(ey.rj,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,t.jsxs)(ey.Zb,{children:[(0,t.jsx)(ey.xv,{children:"Provider"}),(0,t.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[W&&(0,t.jsx)("img",{src:W,alt:"".concat(X," logo"),className:"w-6 h-6",onError:e=>{e.target.style.display="none"}}),(0,t.jsx)(ey.Dx,{children:X})]})]}),(0,t.jsxs)(ey.Zb,{children:[(0,t.jsx)(ey.xv,{children:"Mode"}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)(ey.Dx,{children:(null===(l=b.litellm_params)||void 0===l?void 0:l.mode)||"-"}),(0,t.jsx)(ey.Ct,{color:(null===(r=b.litellm_params)||void 0===r?void 0:r.default_on)?"green":"gray",children:(null===(i=b.litellm_params)||void 0===i?void 0:i.default_on)?"Default On":"Default Off"})]})]}),(0,t.jsxs)(ey.Zb,{children:[(0,t.jsx)(ey.xv,{children:"Created At"}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)(ey.Dx,{children:H(b.created_at)}),(0,t.jsxs)(ey.xv,{children:["Last Updated: ",H(b.updated_at)]})]})]})]}),(null===(n=b.litellm_params)||void 0===n?void 0:n.pii_entities_config)&&Object.keys(b.litellm_params.pii_entities_config).length>0&&(0,t.jsx)(ey.Zb,{className:"mt-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(ey.xv,{className:"font-medium",children:"PII Protection"}),(0,t.jsxs)(ey.Ct,{color:"blue",children:[Object.keys(b.litellm_params.pii_entities_config).length," PII entities configured"]})]})}),b.guardrail_info&&Object.keys(b.guardrail_info).length>0&&(0,t.jsxs)(ey.Zb,{className:"mt-6",children:[(0,t.jsx)(ey.xv,{children:"Guardrail Info"}),(0,t.jsx)("div",{className:"mt-2 space-y-2",children:Object.entries(b.guardrail_info).map(e=>{let[a,l]=e;return(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(ey.xv,{className:"font-medium w-1/3",children:a}),(0,t.jsx)(ey.xv,{className:"w-2/3",children:"object"==typeof l?JSON.stringify(l,null,2):String(l)})]},a)})})]})]}),_&&(0,t.jsx)(ey.x4,{children:(0,t.jsxs)(ey.Zb,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)(ey.Dx,{children:"Guardrail Settings"}),ee&&(0,t.jsx)(k.Z,{title:"Guardrail is defined in the config file and cannot be edited.",children:(0,t.jsx)(eb.Z,{})}),!O&&!ee&&(0,t.jsx)(ey.zx,{onClick:()=>A(!0),children:"Edit Settings"})]}),O?(0,t.jsxs)(x.Z,{form:E,onFinish:q,initialValues:{guardrail_name:b.guardrail_name,...b.litellm_params,guardrail_info:b.guardrail_info?JSON.stringify(b.guardrail_info,null,2):"",...(null===(d=b.litellm_params)||void 0===d?void 0:d.optional_params)&&{optional_params:b.litellm_params.optional_params}},layout:"vertical",children:[(0,t.jsx)(x.Z.Item,{label:"Guardrail Name",name:"guardrail_name",rules:[{required:!0,message:"Please input a guardrail name"}],children:(0,t.jsx)(ey.oi,{})}),(0,t.jsx)(x.Z.Item,{label:"Default On",name:"default_on",children:(0,t.jsxs)(u.default,{children:[(0,t.jsx)(u.default.Option,{value:!0,children:"Yes"}),(0,t.jsx)(u.default.Option,{value:!1,children:"No"})]})}),(null===(c=b.litellm_params)||void 0===c?void 0:c.guardrail)==="presidio"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e_.Z,{orientation:"left",children:"PII Protection"}),(0,t.jsx)("div",{className:"mb-6",children:F&&(0,t.jsx)(D,{entities:F.supported_entities,actions:F.supported_actions,selectedEntities:G,selectedActions:T,onEntitySelect:e=>{L(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},onActionSelect:(e,a)=>{z(l=>({...l,[e]:a}))},entityCategories:F.pii_entity_categories})})]}),(0,t.jsx)(e_.Z,{orientation:"left",children:"Provider Settings"}),(0,t.jsx)(U,{selectedProvider:Object.keys(v).find(e=>{var a;return v[e]===(null===(a=b.litellm_params)||void 0===a?void 0:a.guardrail)})||null,accessToken:y,providerParams:S,value:b.litellm_params}),S&&(()=>{var e;let a=Object.keys(v).find(e=>{var a;return v[e]===(null===(a=b.litellm_params)||void 0===a?void 0:a.guardrail)});if(!a)return null;let l=S[null===(e=v[a])||void 0===e?void 0:e.toLowerCase()];return l&&l.optional_params?(0,t.jsx)(Y,{optionalParams:l.optional_params,parentFieldKey:"optional_params",values:b.litellm_params}):null})(),(0,t.jsx)(e_.Z,{orientation:"left",children:"Advanced Settings"}),(0,t.jsx)(x.Z.Item,{label:"Guardrail Information",name:"guardrail_info",children:(0,t.jsx)(em.default.TextArea,{rows:5})}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,t.jsx)(C.ZP,{onClick:()=>A(!1),children:"Cancel"}),(0,t.jsx)(ey.zx,{children:"Save Changes"})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.xv,{className:"font-medium",children:"Guardrail ID"}),(0,t.jsx)("div",{className:"font-mono",children:b.guardrail_id})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.xv,{className:"font-medium",children:"Guardrail Name"}),(0,t.jsx)("div",{children:b.guardrail_name||"Unnamed Guardrail"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.xv,{className:"font-medium",children:"Provider"}),(0,t.jsx)("div",{children:X})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.xv,{className:"font-medium",children:"Mode"}),(0,t.jsx)("div",{children:(null===(m=b.litellm_params)||void 0===m?void 0:m.mode)||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.xv,{className:"font-medium",children:"Default On"}),(0,t.jsx)(ey.Ct,{color:(null===(p=b.litellm_params)||void 0===p?void 0:p.default_on)?"green":"gray",children:(null===(h=b.litellm_params)||void 0===h?void 0:h.default_on)?"Yes":"No"})]}),(null===(g=b.litellm_params)||void 0===g?void 0:g.pii_entities_config)&&Object.keys(b.litellm_params.pii_entities_config).length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.xv,{className:"font-medium",children:"PII Protection"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)(ey.Ct,{color:"blue",children:[Object.keys(b.litellm_params.pii_entities_config).length," PII entities configured"]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.xv,{className:"font-medium",children:"Created At"}),(0,t.jsx)("div",{children:H(b.created_at)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.xv,{className:"font-medium",children:"Last Updated"}),(0,t.jsx)("div",{children:H(b.updated_at)})]})]})]})})]})]})]})},eZ=l(12514),eI=l(84264),eP=l(49566),eO=l(96761),eA=l(85180),eE=l(35631),eG=l(29436),eL=l(41169),eT=l(16312),ez=l(23639),eF=l(20831),eM=l(77565),eB=l(70464),eJ=l(83669),eD=l(5540);let{Text:eK}=c.default;var eR=function(e){let{results:a,errors:l}=e,[r,i]=(0,s.useState)(new Set),n=e=>{let a=new Set(r);a.has(e)?a.delete(e):a.add(e),i(a)},d=async e=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;{let a=document.createElement("textarea");a.value=e,a.style.position="fixed",a.style.opacity="0",document.body.appendChild(a),a.focus(),a.select();let l=document.execCommand("copy");if(document.body.removeChild(a),!l)throw Error("execCommand failed");return!0}}catch(e){return console.error("Copy failed:",e),!1}};return a||l?(0,t.jsxs)("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Results"}),a&&a.map(e=>{let a=r.has(e.guardrailName);return(0,t.jsx)(eZ.Z,{className:"bg-green-50 border-green-200",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer flex-1",onClick:()=>n(e.guardrailName),children:[a?(0,t.jsx)(eM.Z,{className:"text-gray-500 text-xs"}):(0,t.jsx)(eB.Z,{className:"text-gray-500 text-xs"}),(0,t.jsx)(eJ.Z,{className:"text-green-600 text-lg"}),(0,t.jsx)("span",{className:"text-sm font-medium text-green-800",children:e.guardrailName})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[(0,t.jsx)(eD.Z,{}),(0,t.jsxs)("span",{className:"font-medium",children:[e.latency,"ms"]})]}),!a&&(0,t.jsx)(eF.Z,{size:"xs",variant:"secondary",icon:ez.Z,onClick:async()=>{await d(e.response_text)?Q.Z.success("Result copied to clipboard"):Q.Z.fromBackend("Failed to copy result")},children:"Copy"})]})]}),!a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-white border border-green-200 rounded p-3",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-gray-600 mb-2 block",children:"Output Text"}),(0,t.jsx)("div",{className:"font-mono text-sm text-gray-900 whitespace-pre-wrap break-words",children:e.response_text})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Characters:"})," ",e.response_text.length]})]})]})},e.guardrailName)}),l&&l.map(e=>{let a=r.has(e.guardrailName);return(0,t.jsx)(eZ.Z,{className:"bg-red-50 border-red-200",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"cursor-pointer mt-0.5",onClick:()=>n(e.guardrailName),children:a?(0,t.jsx)(eM.Z,{className:"text-gray-500 text-xs"}):(0,t.jsx)(eB.Z,{className:"text-gray-500 text-xs"})}),(0,t.jsx)("div",{className:"text-red-600 mt-0.5",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-red-800 cursor-pointer",onClick:()=>n(e.guardrailName),children:[e.guardrailName," - Error"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-600",children:[(0,t.jsx)(eD.Z,{}),(0,t.jsxs)("span",{className:"font-medium",children:[e.latency,"ms"]})]})]}),!a&&(0,t.jsx)("p",{className:"text-sm text-red-700 mt-1",children:e.error.message})]})]})},e.guardrailName)})]}):null};let{TextArea:eV}=em.default,{Text:eU}=c.default;var eq=function(e){let{guardrailNames:a,onSubmit:l,isLoading:r,results:i,errors:n,onClose:d}=e,[o,c]=(0,s.useState)(""),u=()=>{if(!o.trim()){Q.Z.fromBackend("Please enter text to test");return}l(o)},m=async e=>{try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;{let a=document.createElement("textarea");a.value=e,a.style.position="fixed",a.style.opacity="0",document.body.appendChild(a),a.focus(),a.select();let l=document.execCommand("copy");if(document.body.removeChild(a),!l)throw Error("execCommand failed");return!0}}catch(e){return console.error("Copy failed:",e),!1}},x=async()=>{await m(o)?Q.Z.success("Input copied to clipboard"):Q.Z.fromBackend("Failed to copy input")};return(0,t.jsxs)("div",{className:"space-y-4 h-full flex flex-col",children:[(0,t.jsx)("div",{className:"flex items-center justify-between pb-3 border-b border-gray-200",children:(0,t.jsx)("div",{className:"flex items-center space-x-3",children:(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Test Guardrails:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map(e=>(0,t.jsx)("div",{className:"inline-flex items-center space-x-1 bg-blue-50 px-3 py-1 rounded-md border border-blue-200",children:(0,t.jsx)("span",{className:"font-mono text-blue-700 font-medium text-sm",children:e})},e))})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Test ",a.length>1?"guardrails":"guardrail"," and compare results"]})]})})}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Input Text"}),(0,t.jsx)(k.Z,{title:"Press Enter to submit. Use Shift+Enter for new line.",children:(0,t.jsx)(eb.Z,{className:"text-gray-400 cursor-help"})})]}),o&&(0,t.jsx)(eT.z,{size:"xs",variant:"secondary",icon:ez.Z,onClick:x,children:"Copy Input"})]}),(0,t.jsx)(eV,{value:o,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||e.ctrlKey||e.metaKey||(e.preventDefault(),u())},placeholder:"Enter text to test with guardrails...",rows:8,className:"font-mono text-sm"}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,t.jsxs)(eU,{className:"text-xs text-gray-500",children:["Press ",(0,t.jsx)("kbd",{className:"px-1 py-0.5 bg-gray-100 border border-gray-300 rounded text-xs",children:"Enter"})," to submit â€¢ ",(0,t.jsx)("kbd",{className:"px-1 py-0.5 bg-gray-100 border border-gray-300 rounded text-xs",children:"Shift+Enter"})," for new line"]}),(0,t.jsxs)(eU,{className:"text-xs text-gray-500",children:["Characters: ",o.length]})]})]}),(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(eT.z,{onClick:u,loading:r,disabled:!o.trim(),className:"w-full",children:r?"Testing ".concat(a.length," guardrail").concat(a.length>1?"s":"","..."):"Test ".concat(a.length," guardrail").concat(a.length>1?"s":"")})})]}),(0,t.jsx)(eR,{results:i,errors:n})]})]})},eH=e=>{let{guardrailsList:a,isLoading:l,accessToken:r,onClose:i}=e,[n,d]=(0,s.useState)(new Set),[c,u]=(0,s.useState)(""),[m,x]=(0,s.useState)([]),[p,h]=(0,s.useState)([]),[g,f]=(0,s.useState)(!1),j=a.filter(e=>{var a;return null===(a=e.guardrail_name)||void 0===a?void 0:a.toLowerCase().includes(c.toLowerCase())}),v=e=>{let a=new Set(n);a.has(e)?a.delete(e):a.add(e),d(a)},y=async e=>{if(0===n.size||!r)return;f(!0),x([]),h([]);let a=[],l=[];await Promise.all(Array.from(n).map(async i=>{let t=Date.now();try{let l=await (0,o.applyGuardrail)(r,i,e,null,null),s=Date.now()-t;a.push({guardrailName:i,response_text:l.response_text,latency:s})}catch(a){let e=Date.now()-t;console.error("Error testing guardrail ".concat(i,":"),a),l.push({guardrailName:i,error:a,latency:e})}})),x(a),h(l),f(!1),a.length>0&&Q.Z.success("".concat(a.length," guardrail").concat(a.length>1?"s":""," applied successfully")),l.length>0&&Q.Z.fromBackend("".concat(l.length," guardrail").concat(l.length>1?"s":""," failed"))};return(0,t.jsx)("div",{className:"w-full h-[calc(100vh-200px)]",children:(0,t.jsx)(eZ.Z,{className:"h-full",children:(0,t.jsxs)("div",{className:"flex h-full",children:[(0,t.jsxs)("div",{className:"w-1/4 border-r border-gray-200 flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)(eO.Z,{className:"text-lg font-semibold mb-3",children:"Guardrails"}),(0,t.jsx)(eP.Z,{icon:eG.Z,placeholder:"Search guardrails...",value:c,onValueChange:u})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:l?(0,t.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,t.jsx)(K.Z,{})}):0===j.length?(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(eA.Z,{description:c?"No guardrails match your search":"No guardrails available"})}):(0,t.jsx)(eE.Z,{dataSource:j,renderItem:e=>(0,t.jsx)(eE.Z.Item,{onClick:()=>{e.guardrail_name&&v(e.guardrail_name)},className:"cursor-pointer hover:bg-gray-50 transition-colors px-4 ".concat(n.has(e.guardrail_name||"")?"bg-blue-50 border-l-4 border-l-blue-500":"border-l-4 border-l-transparent"),children:(0,t.jsx)(eE.Z.Item.Meta,{avatar:(0,t.jsx)(Z.Z,{checked:n.has(e.guardrail_name||""),onClick:a=>{a.stopPropagation(),e.guardrail_name&&v(e.guardrail_name)}}),title:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(eL.Z,{className:"text-gray-400"}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:e.guardrail_name})]}),description:(0,t.jsxs)("div",{className:"text-xs space-y-1 mt-1",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Type: "}),(0,t.jsx)("span",{className:"text-gray-600",children:e.litellm_params.guardrail})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Mode: "}),(0,t.jsx)("span",{className:"text-gray-600",children:e.litellm_params.mode})]})]})})})})}),(0,t.jsx)("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:(0,t.jsxs)(eI.Z,{className:"text-xs text-gray-600",children:[n.size," of ",j.length," selected"]})})]}),(0,t.jsxs)("div",{className:"w-3/4 flex flex-col bg-white",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:(0,t.jsx)(eO.Z,{className:"text-xl font-semibold mb-0",children:"Guardrail Testing Playground"})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-4",children:0===n.size?(0,t.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,t.jsx)(eL.Z,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,t.jsx)(eI.Z,{className:"text-lg font-medium text-gray-600 mb-2",children:"Select Guardrails to Test"}),(0,t.jsx)(eI.Z,{className:"text-center text-gray-500 max-w-md",children:"Choose one or more guardrails from the left sidebar to start testing and comparing results."})]}):(0,t.jsx)("div",{className:"h-full",children:(0,t.jsx)(eq,{guardrailNames:Array.from(n),onSubmit:y,results:m.length>0?m:null,errors:p.length>0?p:null,isLoading:g,onClose:()=>d(new Set)})})})]})]})})})},eY=e=>{let{accessToken:a,userRole:l}=e,[r,i]=(0,s.useState)([]),[c,u]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),[p,h]=(0,s.useState)(!1),[g,f]=(0,s.useState)(null),[j,v]=(0,s.useState)(null),[y,_]=(0,s.useState)(0),b=!!l&&(0,ev.tY)(l),N=async()=>{if(a){x(!0);try{let e=await (0,o.getGuardrailsList)(a);console.log("guardrails: ".concat(JSON.stringify(e))),i(e.guardrails)}catch(e){console.error("Error fetching guardrails:",e)}finally{x(!1)}}};(0,s.useEffect)(()=>{N()},[a]);let w=async()=>{if(g&&a){h(!0);try{await (0,o.deleteGuardrailCall)(a,g.id),Q.Z.success('Guardrail "'.concat(g.name,'" deleted successfully')),N()}catch(e){console.error("Error deleting guardrail:",e),Q.Z.fromBackend("Failed to delete guardrail")}finally{h(!1),f(null)}}};return(0,t.jsx)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:(0,t.jsxs)(n.v0,{index:y,onIndexChange:_,children:[(0,t.jsxs)(n.td,{className:"mb-4",children:[(0,t.jsx)(n.OK,{children:"Guardrails"}),(0,t.jsx)(n.OK,{disabled:!a||0===r.length,children:"Test Playground"})]}),(0,t.jsxs)(n.nP,{children:[(0,t.jsxs)(n.x4,{children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,t.jsx)(n.zx,{onClick:()=>{j&&v(null),u(!0)},disabled:!a,children:"+ Add New Guardrail"})}),j?(0,t.jsx)(eC,{guardrailId:j,onClose:()=>v(null),accessToken:a,isAdmin:b}):(0,t.jsx)(ej,{guardrailsList:r,isLoading:m,onDeleteClick:(e,a)=>{f({id:e,name:a})},accessToken:a,onGuardrailUpdated:N,isAdmin:b,onGuardrailClick:e=>v(e)}),(0,t.jsx)(er,{visible:c,onClose:()=>{u(!1)},accessToken:a,onSuccess:()=>{N()}}),g&&(0,t.jsxs)(d.Z,{title:"Delete Guardrail",open:null!==g,onOk:w,onCancel:()=>{f(null)},confirmLoading:p,okText:"Delete",okButtonProps:{danger:!0},children:[(0,t.jsxs)("p",{children:["Are you sure you want to delete guardrail: ",g.name," ?"]}),(0,t.jsx)("p",{children:"This action cannot be undone."})]})]}),(0,t.jsx)(n.x4,{children:(0,t.jsx)(eH,{guardrailsList:r,isLoading:m,accessToken:a,onClose:()=>_(0)})})]})]})})}}}]);