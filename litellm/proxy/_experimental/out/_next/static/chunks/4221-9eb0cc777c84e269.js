"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4221],{64221:function(e,s,l){l.d(s,{Z:function(){return e$}});var t=l(57437),i=l(39760),r=l(78489),n=l(94789),a=l(12514),o=l(21626),d=l(97214),c=l(28241),u=l(58834),m=l(69552),g=l(71876),p=l(57840),x=l(10032),h=l(51653),_=l(22116),f=l(4260),j=l(5545),y=l(65869),v=l(2265),b=l(12363),S=l(9114),Z=l(19250),w=l(67982),N=l(67101),I=l(84264),k=l(49566),C=l(96761),O=l(29233),E=l(62272),P=l(23639),T=l(92403),L=l(29271),A=l(34419),U=l(85968),M=e=>{let{accessToken:s,userID:l,proxySettings:i}=e,[o]=x.Z.useForm(),[d,c]=(0,v.useState)(!1),[u,m]=(0,v.useState)(null),[g,p]=(0,v.useState)("<your_proxy_base_url>");(0,v.useEffect)(()=>{let e="<your_proxy_base_url>";p(i&&i.PROXY_BASE_URL&&void 0!==i.PROXY_BASE_URL?i.PROXY_BASE_URL:window.location.origin)},[i]);let h="".concat(g,"/scim/v2"),_=async e=>{if(!s||!l){S.ZP.fromBackend("You need to be logged in to create a SCIM token");return}try{c(!0);let t={key_alias:e.key_alias||"SCIM Access Token",team_id:null,models:[],allowed_routes:["/scim/*"]},i=await (0,Z.keyCreateCall)(s,l,t);m(i),S.ZP.success("SCIM token created successfully")}catch(e){console.error("Error creating SCIM token:",e),S.ZP.fromBackend("Failed to create SCIM token: "+(0,U.O)(e))}finally{c(!1)}};return(0,t.jsx)(N.Z,{numItems:1,children:(0,t.jsxs)(a.Z,{children:[(0,t.jsx)("div",{className:"flex items-center mb-4",children:(0,t.jsx)(C.Z,{children:"SCIM Configuration"})}),(0,t.jsx)(I.Z,{className:"text-gray-600",children:"System for Cross-domain Identity Management (SCIM) allows you to automatically provision and manage users and groups in LiteLLM."}),(0,t.jsx)(w.Z,{}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-700 mr-2",children:"1"}),(0,t.jsxs)(C.Z,{className:"text-lg flex items-center",children:[(0,t.jsx)(E.Z,{className:"h-5 w-5 mr-2"}),"SCIM Tenant URL"]})]}),(0,t.jsx)(I.Z,{className:"text-gray-600 mb-3",children:"Use this URL in your identity provider SCIM integration settings."}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(k.Z,{value:h,disabled:!0,className:"flex-grow"}),(0,t.jsx)(O.CopyToClipboard,{text:h,onCopy:()=>S.ZP.success("URL copied to clipboard"),children:(0,t.jsxs)(r.Z,{variant:"primary",className:"ml-2 flex items-center",children:[(0,t.jsx)(P.Z,{className:"h-4 w-4 mr-1"}),"Copy"]})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-blue-100 text-blue-700 mr-2",children:"2"}),(0,t.jsxs)(C.Z,{className:"text-lg flex items-center",children:[(0,t.jsx)(T.Z,{className:"h-5 w-5 mr-2"}),"Authentication Token"]})]}),(0,t.jsx)(n.Z,{title:"Using SCIM",color:"blue",className:"mb-4",children:"You need a SCIM token to authenticate with the SCIM API. Create one below and use it in your SCIM provider configuration."}),u?(0,t.jsxs)(a.Z,{className:"border border-yellow-300 bg-yellow-50",children:[(0,t.jsxs)("div",{className:"flex items-center mb-2 text-yellow-800",children:[(0,t.jsx)(L.Z,{className:"h-5 w-5 mr-2"}),(0,t.jsx)(C.Z,{className:"text-lg text-yellow-800",children:"Your SCIM Token"})]}),(0,t.jsx)(I.Z,{className:"text-yellow-800 mb-4 font-medium",children:"Make sure to copy this token now. You will not be able to see it again."}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(k.Z,{value:u.key,className:"flex-grow mr-2 bg-white",type:"password",disabled:!0}),(0,t.jsx)(O.CopyToClipboard,{text:u.key,onCopy:()=>S.ZP.success("Token copied to clipboard"),children:(0,t.jsxs)(r.Z,{variant:"primary",className:"flex items-center",children:[(0,t.jsx)(P.Z,{className:"h-4 w-4 mr-1"}),"Copy"]})})]}),(0,t.jsxs)(r.Z,{className:"mt-4 flex items-center",variant:"secondary",onClick:()=>m(null),children:[(0,t.jsx)(A.Z,{className:"h-4 w-4 mr-1"}),"Create Another Token"]})]}):(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,t.jsxs)(x.Z,{form:o,onFinish:_,layout:"vertical",children:[(0,t.jsx)(x.Z.Item,{name:"key_alias",label:"Token Name",rules:[{required:!0,message:"Please enter a name for your token"}],children:(0,t.jsx)(k.Z,{placeholder:"SCIM Access Token"})}),(0,t.jsx)(x.Z.Item,{children:(0,t.jsxs)(r.Z,{variant:"primary",type:"submit",loading:d,className:"flex items-center",children:[(0,t.jsx)(T.Z,{className:"h-4 w-4 mr-1"}),"Create SCIM Token"]})})]})})]})]})]})})},R=l(71632),z=l(90246);let F=(0,z.n)("sso"),D=()=>{let{accessToken:e,userId:s,userRole:l}=(0,i.Z)();return(0,R.a)({queryKey:F.detail("settings"),queryFn:async()=>await (0,Z.getSSOSettings)(e),enabled:!!(e&&s&&l)})};var G=l(3810),B=l(76188),V=l(55590),q=l(5945),Y=l(88906),H=l(15868),K=l(18930);let W={google:"https://artificialanalysis.ai/img/logos/google_small.svg",microsoft:"https://upload.wikimedia.org/wikipedia/commons/a/a8/Microsoft_Azure_Logo.svg",okta:"https://www.okta.com/sites/default/files/Okta_Logo_BrightBlue_Medium.png",generic:""},J={google:"Google SSO",microsoft:"Microsoft SSO",okta:"Okta / Auth0 SSO",generic:"Generic SSO"},Q={internal_user_viewer:"Internal Viewer",internal_user:"Internal User",proxy_admin_viewer:"Proxy Admin Viewer",proxy_admin:"Proxy Admin"};var X=l(31283),$=l(37592),ee=l(61994);let es={google:{envVarMap:{google_client_id:"GOOGLE_CLIENT_ID",google_client_secret:"GOOGLE_CLIENT_SECRET"},fields:[{label:"Google Client ID",name:"google_client_id"},{label:"Google Client Secret",name:"google_client_secret"}]},microsoft:{envVarMap:{microsoft_client_id:"MICROSOFT_CLIENT_ID",microsoft_client_secret:"MICROSOFT_CLIENT_SECRET",microsoft_tenant:"MICROSOFT_TENANT"},fields:[{label:"Microsoft Client ID",name:"microsoft_client_id"},{label:"Microsoft Client Secret",name:"microsoft_client_secret"},{label:"Microsoft Tenant",name:"microsoft_tenant"}]},okta:{envVarMap:{generic_client_id:"GENERIC_CLIENT_ID",generic_client_secret:"GENERIC_CLIENT_SECRET",generic_authorization_endpoint:"GENERIC_AUTHORIZATION_ENDPOINT",generic_token_endpoint:"GENERIC_TOKEN_ENDPOINT",generic_userinfo_endpoint:"GENERIC_USERINFO_ENDPOINT"},fields:[{label:"Generic Client ID",name:"generic_client_id"},{label:"Generic Client Secret",name:"generic_client_secret"},{label:"Authorization Endpoint",name:"generic_authorization_endpoint",placeholder:"https://your-domain/authorize"},{label:"Token Endpoint",name:"generic_token_endpoint",placeholder:"https://your-domain/token"},{label:"Userinfo Endpoint",name:"generic_userinfo_endpoint",placeholder:"https://your-domain/userinfo"}]},generic:{envVarMap:{generic_client_id:"GENERIC_CLIENT_ID",generic_client_secret:"GENERIC_CLIENT_SECRET",generic_authorization_endpoint:"GENERIC_AUTHORIZATION_ENDPOINT",generic_token_endpoint:"GENERIC_TOKEN_ENDPOINT",generic_userinfo_endpoint:"GENERIC_USERINFO_ENDPOINT"},fields:[{label:"Generic Client ID",name:"generic_client_id"},{label:"Generic Client Secret",name:"generic_client_secret"},{label:"Authorization Endpoint",name:"generic_authorization_endpoint"},{label:"Token Endpoint",name:"generic_token_endpoint"},{label:"Userinfo Endpoint",name:"generic_userinfo_endpoint"}]}},el=e=>{let s=es[e];return s?s.fields.map(e=>(0,t.jsx)(x.Z.Item,{label:e.label,name:e.name,rules:[{required:!0,message:"Please enter the ".concat(e.label.toLowerCase())}],children:e.name.includes("client")?(0,t.jsx)(f.default.Password,{}):(0,t.jsx)(X.o,{placeholder:e.placeholder})},e.name)):null};var et=e=>{let{form:s,onFormSubmit:l}=e;return(0,t.jsx)("div",{children:(0,t.jsxs)(x.Z,{form:s,onFinish:l,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsx)(x.Z.Item,{label:"SSO Provider",name:"sso_provider",rules:[{required:!0,message:"Please select an SSO provider"}],children:(0,t.jsx)($.default,{children:Object.entries(W).map(e=>{let[s,l]=e;return(0,t.jsx)($.default.Option,{value:s,children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"4px 0"},children:[l&&(0,t.jsx)("img",{src:l,alt:s,style:{height:24,width:24,marginRight:12,objectFit:"contain"}}),(0,t.jsx)("span",{children:J[s]||s.charAt(0).toUpperCase()+s.slice(1)+" SSO"})]})},s)})})}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.sso_provider!==s.sso_provider,children:e=>{let{getFieldValue:s}=e,l=s("sso_provider");return l?el(l):null}}),(0,t.jsx)(x.Z.Item,{label:"Proxy Admin Email",name:"user_email",rules:[{required:!0,message:"Please enter the email of the proxy admin"}],children:(0,t.jsx)(X.o,{})}),(0,t.jsx)(x.Z.Item,{label:"Proxy Base URL",name:"proxy_base_url",normalize:e=>null==e?void 0:e.trim(),rules:[{required:!0,message:"Please enter the proxy base url"},{pattern:/^https?:\/\/.+/,message:"URL must start with http:// or https://"},{validator:(e,s)=>s&&/^https?:\/\/.+/.test(s)&&s.endsWith("/")?Promise.reject("URL must not end with a trailing slash"):Promise.resolve()}],children:(0,t.jsx)(X.o,{placeholder:"https://example.com"})}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.sso_provider!==s.sso_provider,children:e=>{let{getFieldValue:s}=e,l=s("sso_provider");return"okta"===l||"generic"===l?(0,t.jsx)(x.Z.Item,{label:"Use Role Mappings",name:"use_role_mappings",valuePropName:"checked",children:(0,t.jsx)(ee.Z,{})}):null}}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.use_role_mappings!==s.use_role_mappings||e.sso_provider!==s.sso_provider,children:e=>{let{getFieldValue:s}=e,l=s("use_role_mappings"),i=s("sso_provider");return l&&("okta"===i||"generic"===i)?(0,t.jsx)(x.Z.Item,{label:"Group Claim",name:"group_claim",rules:[{required:!0,message:"Please enter the group claim"}],children:(0,t.jsx)(X.o,{})}):null}}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.use_role_mappings!==s.use_role_mappings||e.sso_provider!==s.sso_provider,children:e=>{let{getFieldValue:s}=e,l=s("use_role_mappings"),i=s("sso_provider");return l&&("okta"===i||"generic"===i)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z.Item,{label:"Default Role",name:"default_role",initialValue:"Internal User",children:(0,t.jsxs)($.default,{children:[(0,t.jsx)($.default.Option,{value:"internal_user_viewer",children:"Internal Viewer"}),(0,t.jsx)($.default.Option,{value:"internal_user",children:"Internal User"}),(0,t.jsx)($.default.Option,{value:"proxy_admin_viewer",children:"Admin Viewer"}),(0,t.jsx)($.default.Option,{value:"proxy_admin",children:"Proxy Admin"})]})}),(0,t.jsx)(x.Z.Item,{label:"Proxy Admin Teams",name:"proxy_admin_teams",children:(0,t.jsx)(X.o,{})}),(0,t.jsx)(x.Z.Item,{label:"Admin Viewer Teams",name:"admin_viewer_teams",children:(0,t.jsx)(X.o,{})}),(0,t.jsx)(x.Z.Item,{label:"Internal User Teams",name:"internal_user_teams",children:(0,t.jsx)(X.o,{})}),(0,t.jsx)(x.Z.Item,{label:"Internal Viewer Teams",name:"internal_viewer_teams",children:(0,t.jsx)(X.o,{})})]}):null}}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.sso_provider!==s.sso_provider,children:e=>{let{getFieldValue:s}=e,l=s("sso_provider");return"okta"===l||"generic"===l?(0,t.jsx)(x.Z.Item,{label:"Use Team Mappings",name:"use_team_mappings",valuePropName:"checked",children:(0,t.jsx)(ee.Z,{})}):null}}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.use_team_mappings!==s.use_team_mappings||e.sso_provider!==s.sso_provider,children:e=>{let{getFieldValue:s}=e,l=s("use_team_mappings"),i=s("sso_provider");return l&&("okta"===i||"generic"===i)?(0,t.jsx)(x.Z.Item,{label:"Team IDs JWT Field",name:"team_ids_jwt_field",rules:[{required:!0,message:"Please enter the team IDs JWT field"}],children:(0,t.jsx)(X.o,{})}):null}})]})})},ei=l(21770);let er=()=>{let{accessToken:e}=(0,i.Z)();return(0,ei.D)({mutationFn:async s=>{if(!e)throw Error("Access token is required");return await (0,Z.updateSSOSettings)(e,s)}})},en=e=>{let{proxy_admin_teams:s,admin_viewer_teams:l,internal_user_teams:t,internal_viewer_teams:i,default_role:r,group_claim:n,use_role_mappings:a,use_team_mappings:o,team_ids_jwt_field:d,...c}=e,u={...c},m=c.sso_provider;if(a&&("okta"===m||"generic"===m)){let e=e=>e&&""!==e.trim()?e.split(",").map(e=>e.trim()).filter(e=>e.length>0):[];u.role_mappings={provider:"generic",group_claim:n,default_role:({internal_user_viewer:"internal_user_viewer",internal_user:"internal_user",proxy_admin_viewer:"proxy_admin_viewer",proxy_admin:"proxy_admin"})[r]||"internal_user",roles:{proxy_admin:e(s),proxy_admin_viewer:e(l),internal_user:e(t),internal_user_viewer:e(i)}}}return o&&("okta"===m||"generic"===m)&&(u.team_mappings={team_ids_jwt_field:d}),u},ea=e=>{if(e.google_client_id)return"google";if(e.microsoft_client_id)return"microsoft";if(e.generic_client_id){var s,l;return(null===(s=e.generic_authorization_endpoint)||void 0===s?void 0:s.includes("okta"))||(null===(l=e.generic_authorization_endpoint)||void 0===l?void 0:l.includes("auth0"))?"okta":"generic"}return null};var eo=e=>{let{isVisible:s,onCancel:l,onSuccess:i}=e,[r]=x.Z.useForm(),{mutateAsync:n,isPending:a}=er(),o=async e=>{let s=en(e);await n(s,{onSuccess:()=>{S.ZP.success("SSO settings added successfully"),i()},onError:e=>{S.ZP.fromBackend("Failed to save SSO settings: "+(0,U.O)(e))}})},d=()=>{r.resetFields(),l()};return(0,t.jsx)(_.Z,{title:"Add SSO",open:s,width:800,footer:(0,t.jsxs)(V.Z,{children:[(0,t.jsx)(j.ZP,{onClick:d,disabled:a,children:"Cancel"}),(0,t.jsx)(j.ZP,{loading:a,onClick:()=>r.submit(),children:a?"Adding...":"Add SSO"})]}),onCancel:d,children:(0,t.jsx)(et,{form:r,onFormSubmit:o})})},ed=l(21609),ec=e=>{let{isVisible:s,onCancel:l,onSuccess:i}=e,{data:r}=D(),{mutateAsync:n,isPending:a}=er(),o=async()=>{await n({google_client_id:null,google_client_secret:null,microsoft_client_id:null,microsoft_client_secret:null,microsoft_tenant:null,generic_client_id:null,generic_client_secret:null,generic_authorization_endpoint:null,generic_token_endpoint:null,generic_userinfo_endpoint:null,proxy_base_url:null,user_email:null,sso_provider:null,role_mappings:null,team_mappings:null},{onSuccess:()=>{S.ZP.success("SSO settings cleared successfully"),l(),i()},onError:e=>{S.ZP.fromBackend("Failed to clear SSO settings: "+(0,U.O)(e))}})};return(0,t.jsx)(ed.Z,{isOpen:s,title:"Confirm Clear SSO Settings",alertMessage:"This action cannot be undone.",message:"Are you sure you want to clear all SSO settings? Users will no longer be able to login using SSO after this change.",resourceInformationTitle:"SSO Settings",resourceInformation:[{label:"Provider",value:(null==r?void 0:r.values)&&ea(null==r?void 0:r.values)||"Generic"}],onCancel:l,onOk:o,confirmLoading:a})},eu=e=>{let{isVisible:s,onCancel:l,onSuccess:i}=e,[r]=x.Z.useForm(),n=D(),{mutateAsync:a,isPending:o}=er();(0,v.useEffect)(()=>{if(s&&n.data&&n.data.values){var e,l,t,i,a,o;let s=n.data;console.log("Raw SSO data received:",s),console.log("SSO values:",s.values),console.log("user_email from API:",s.values.user_email);let d=null;s.values.google_client_id?d="google":s.values.microsoft_client_id?d="microsoft":s.values.generic_client_id&&(d=(null===(e=s.values.generic_authorization_endpoint)||void 0===e?void 0:e.includes("okta"))||(null===(l=s.values.generic_authorization_endpoint)||void 0===l?void 0:l.includes("auth0"))?"okta":"generic");let c={};if(s.values.role_mappings){let e=s.values.role_mappings,l=e=>e&&0!==e.length?e.join(", "):"";c={use_role_mappings:!0,group_claim:e.group_claim,default_role:e.default_role||"internal_user",proxy_admin_teams:l(null===(t=e.roles)||void 0===t?void 0:t.proxy_admin),admin_viewer_teams:l(null===(i=e.roles)||void 0===i?void 0:i.proxy_admin_viewer),internal_user_teams:l(null===(a=e.roles)||void 0===a?void 0:a.internal_user),internal_viewer_teams:l(null===(o=e.roles)||void 0===o?void 0:o.internal_user_viewer)}}let u={};s.values.team_mappings&&(u={use_team_mappings:!0,team_ids_jwt_field:s.values.team_mappings.team_ids_jwt_field});let m={sso_provider:d,...s.values,...c,...u};console.log("Setting form values:",m),r.resetFields(),setTimeout(()=>{r.setFieldsValue(m),console.log("Form values set, current form values:",r.getFieldsValue())},100)}},[s,n.data,r]);let d=async e=>{try{let s=en(e);await a(s,{onSuccess:()=>{S.ZP.success("SSO settings updated successfully"),i()},onError:e=>{S.ZP.fromBackend("Failed to save SSO settings: "+(0,U.O)(e))}})}catch(e){S.ZP.fromBackend("Failed to process SSO settings: "+(0,U.O)(e))}},c=()=>{r.resetFields(),l()};return(0,t.jsx)(_.Z,{title:"Edit SSO Settings",open:s,width:800,footer:(0,t.jsxs)(V.Z,{children:[(0,t.jsx)(j.ZP,{onClick:c,disabled:o,children:"Cancel"}),(0,t.jsx)(j.ZP,{loading:o,onClick:()=>r.submit(),children:o?"Saving...":"Save"})]}),onCancel:c,children:(0,t.jsx)(et,{form:r,onFormSubmit:d})})},em=l(42208),eg=l(87769);function ep(e){let{defaultHidden:s=!0,value:l}=e,[i,r]=(0,v.useState)(s);return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-mono text-gray-600 flex-1",children:l?i?"•".repeat(l.length):l:(0,t.jsx)("span",{className:"text-gray-400 italic",children:"Not configured"})}),l&&(0,t.jsx)(j.ZP,{type:"text",size:"small",icon:i?(0,t.jsx)(em.Z,{className:"w-4 h-4"}):(0,t.jsx)(eg.Z,{className:"w-4 h-4"}),onClick:()=>r(!i),className:"text-gray-400 hover:text-gray-600"})]})}var ex=l(23496),eh=l(56609),e_=l(95805);let{Title:ef,Text:ej}=p.default;function ey(e){let{roleMappings:s}=e;if(!s)return null;let l=[{title:"Role",dataIndex:"role",key:"role",render:e=>(0,t.jsx)(ej,{strong:!0,children:Q[e]})},{title:"Mapped Groups",dataIndex:"groups",key:"groups",render:e=>(0,t.jsx)(t.Fragment,{children:e.length>0?e.map((e,s)=>(0,t.jsx)(G.Z,{color:"blue",children:e},s)):(0,t.jsx)(ej,{className:"text-gray-400 italic",children:"No groups mapped"})})}];return(0,t.jsxs)(q.Z,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(e_.Z,{className:"w-6 h-6 text-gray-400 mb-2"}),(0,t.jsx)(ef,{level:3,children:"Role Mappings"})]}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(ef,{level:5,children:"Group Claim"}),(0,t.jsx)("div",{children:(0,t.jsx)(ej,{code:!0,children:s.group_claim})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ef,{level:5,children:"Default Role"}),(0,t.jsx)("div",{children:(0,t.jsx)(ej,{strong:!0,children:Q[s.default_role]})})]})]}),(0,t.jsx)(ex.Z,{}),(0,t.jsx)(eh.Z,{columns:l,dataSource:Object.entries(s.roles).map(e=>{let[s,l]=e;return{role:s,groups:l}}),pagination:!1,bordered:!0,size:"small",className:"w-full"})]})]})}var ev=l(85180);let{Title:eb,Paragraph:eS}=p.default;function eZ(e){let{onAdd:s}=e;return(0,t.jsx)("div",{className:"bg-white p-12 rounded-lg border border-dashed border-gray-300 text-center w-full",children:(0,t.jsx)(ev.Z,{image:ev.Z.PRESENTED_IMAGE_SIMPLE,description:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eb,{level:4,children:"No SSO Configuration Found"}),(0,t.jsx)(eS,{type:"secondary",className:"max-w-md mx-auto",children:"Configure Single Sign-On (SSO) to enable seamless authentication for your team members using your identity provider."})]}),children:(0,t.jsx)(j.ZP,{type:"primary",size:"large",onClick:s,className:"flex items-center gap-2 mx-auto mt-4",children:"Configure SSO"})})})}var ew=l(50337);let{Title:eN,Text:eI}=p.default;function ek(){return(0,t.jsx)(q.Z,{children:(0,t.jsxs)(V.Z,{direction:"vertical",size:"large",className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(Y.Z,{className:"w-6 h-6 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(eN,{level:3,children:"SSO Configuration"}),(0,t.jsx)(eI,{type:"secondary",children:"Manage Single Sign-On authentication settings"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(ew.Z.Button,{active:!0,size:"default",style:{width:170,height:32}}),(0,t.jsx)(ew.Z.Button,{active:!0,size:"default",style:{width:190,height:32}})]})]}),(0,t.jsxs)(B.Z,{bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},children:[(0,t.jsx)(B.Z.Item,{label:(0,t.jsx)(ew.Z.Node,{active:!0,style:{width:80,height:16}}),children:(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:(0,t.jsx)(ew.Z.Node,{active:!0,style:{width:100,height:16}})})}),(0,t.jsx)(B.Z.Item,{label:(0,t.jsx)(ew.Z.Node,{active:!0,style:{width:80,height:16}}),children:(0,t.jsx)(ew.Z.Node,{active:!0,style:{width:200,height:16}})}),(0,t.jsx)(B.Z.Item,{label:(0,t.jsx)(ew.Z.Node,{active:!0,style:{width:80,height:16}}),children:(0,t.jsx)(ew.Z.Node,{active:!0,style:{width:250,height:16}})}),(0,t.jsx)(B.Z.Item,{label:(0,t.jsx)(ew.Z.Node,{active:!0,style:{width:80,height:16}}),children:(0,t.jsx)(ew.Z.Node,{active:!0,style:{width:180,height:16}})}),(0,t.jsx)(B.Z.Item,{label:(0,t.jsx)(ew.Z.Node,{active:!0,style:{width:80,height:16}}),children:(0,t.jsx)(ew.Z.Node,{active:!0,style:{width:220,height:16}})})]})]})})}let{Title:eC,Text:eO}=p.default;function eE(){let{data:e,refetch:s,isLoading:l}=D(),[i,r]=(0,v.useState)(!1),[n,a]=(0,v.useState)(!1),[o,d]=(0,v.useState)(!1),c=!!(null==e?void 0:e.values.google_client_id)||!!(null==e?void 0:e.values.microsoft_client_id)||!!(null==e?void 0:e.values.generic_client_id),u=(null==e?void 0:e.values)?ea(e.values):null,m=!!(null==e?void 0:e.values.role_mappings),g=!!(null==e?void 0:e.values.team_mappings),p=e=>(0,t.jsx)(eO,{className:"font-mono text-gray-600 text-sm",copyable:!!e,children:e||"-"}),x=e=>e||(0,t.jsx)("span",{className:"text-gray-400 italic",children:"Not configured"}),h=e=>{var s;return(null===(s=e.team_mappings)||void 0===s?void 0:s.team_ids_jwt_field)?(0,t.jsx)(G.Z,{children:e.team_mappings.team_ids_jwt_field}):(0,t.jsx)("span",{className:"text-gray-400 italic",children:"Not configured"})},_={column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1}},f={google:{providerText:J.google,fields:[{label:"Client ID",render:e=>(0,t.jsx)(ep,{value:e.google_client_id})},{label:"Client Secret",render:e=>(0,t.jsx)(ep,{value:e.google_client_secret})},{label:"Proxy Base URL",render:e=>x(e.proxy_base_url)}]},microsoft:{providerText:J.microsoft,fields:[{label:"Client ID",render:e=>(0,t.jsx)(ep,{value:e.microsoft_client_id})},{label:"Client Secret",render:e=>(0,t.jsx)(ep,{value:e.microsoft_client_secret})},{label:"Tenant",render:e=>x(e.microsoft_tenant)},{label:"Proxy Base URL",render:e=>x(e.proxy_base_url)}]},okta:{providerText:J.okta,fields:[{label:"Client ID",render:e=>(0,t.jsx)(ep,{value:e.generic_client_id})},{label:"Client Secret",render:e=>(0,t.jsx)(ep,{value:e.generic_client_secret})},{label:"Authorization Endpoint",render:e=>p(e.generic_authorization_endpoint)},{label:"Token Endpoint",render:e=>p(e.generic_token_endpoint)},{label:"User Info Endpoint",render:e=>p(e.generic_userinfo_endpoint)},{label:"Proxy Base URL",render:e=>x(e.proxy_base_url)},g?{label:"Team IDs JWT Field",render:e=>h(e)}:null]},generic:{providerText:J.generic,fields:[{label:"Client ID",render:e=>(0,t.jsx)(ep,{value:e.generic_client_id})},{label:"Client Secret",render:e=>(0,t.jsx)(ep,{value:e.generic_client_secret})},{label:"Authorization Endpoint",render:e=>p(e.generic_authorization_endpoint)},{label:"Token Endpoint",render:e=>p(e.generic_token_endpoint)},{label:"User Info Endpoint",render:e=>p(e.generic_userinfo_endpoint)},{label:"Proxy Base URL",render:e=>x(e.proxy_base_url)},g?{label:"Team IDs JWT Field",render:e=>h(e)}:null]}};return(0,t.jsxs)(t.Fragment,{children:[l?(0,t.jsx)(ek,{}):(0,t.jsxs)(V.Z,{direction:"vertical",size:"large",className:"w-full",children:[(0,t.jsx)(q.Z,{children:(0,t.jsxs)(V.Z,{direction:"vertical",size:"large",className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(Y.Z,{className:"w-6 h-6 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(eC,{level:3,children:"SSO Configuration"}),(0,t.jsx)(eO,{type:"secondary",children:"Manage Single Sign-On authentication settings"})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-3",children:c&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.ZP,{icon:(0,t.jsx)(H.Z,{className:"w-4 h-4"}),onClick:()=>d(!0),children:"Edit SSO Settings"}),(0,t.jsx)(j.ZP,{danger:!0,icon:(0,t.jsx)(K.Z,{className:"w-4 h-4"}),onClick:()=>r(!0),children:"Delete SSO Settings"})]})})]}),c?(()=>{if(!(null==e?void 0:e.values)||!u)return null;let{values:s}=e,l=f[u];return l?(0,t.jsxs)(B.Z,{bordered:!0,..._,children:[(0,t.jsx)(B.Z.Item,{label:"Provider",children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[W[u]&&(0,t.jsx)("img",{src:W[u],alt:u,style:{height:24,width:24,objectFit:"contain"}}),(0,t.jsx)("span",{children:l.providerText})]})}),l.fields.map((e,l)=>e&&(0,t.jsx)(B.Z.Item,{label:e.label,children:e.render(s)},l))]}):null})():(0,t.jsx)(eZ,{onAdd:()=>a(!0)})]})}),m&&(0,t.jsx)(ey,{roleMappings:null==e?void 0:e.values.role_mappings})]}),(0,t.jsx)(ec,{isVisible:i,onCancel:()=>r(!1),onSuccess:()=>s()}),(0,t.jsx)(eo,{isVisible:n,onCancel:()=>a(!1),onSuccess:()=>{a(!1),s()}}),(0,t.jsx)(eu,{isVisible:o,onCancel:()=>d(!1),onSuccess:()=>{d(!1),s()}})]})}var eP=l(55584),eT=l(29827);let eL=(0,z.n)("uiSettings"),eA=e=>{let s=(0,eT.NL)();return(0,ei.D)({mutationFn:async s=>{if(!e)throw Error("Access token is required");return(0,Z.updateUiSettings)(e,s)},onSuccess:()=>{s.invalidateQueries({queryKey:eL.all})}})};var eU=l(1633);let eM={"api-keys":"Manage virtual keys for API access and authentication","llm-playground":"Interactive playground for testing LLM requests",models:"Configure and manage LLM models and endpoints",agents:"Create and manage AI agents","mcp-servers":"Configure Model Context Protocol servers",guardrails:"Set up content moderation and safety guardrails",policies:"Define access control and usage policies","search-tools":"Configure RAG search and retrieval tools","vector-stores":"Manage vector databases for embeddings",new_usage:"View usage analytics and metrics",logs:"Access request and response logs",users:"Manage internal user accounts and permissions",teams:"Create and manage teams for access control",organizations:"Manage organizations and their members",budgets:"Set and monitor spending budgets",api_ref:"Browse API documentation and endpoints","model-hub-table":"Explore available AI models and providers","learning-resources":"Access tutorials and documentation",caching:"Configure response caching settings","transform-request":"Set up request transformation rules","cost-tracking":"Track and analyze API costs","ui-theme":"Customize dashboard appearance","tag-management":"Organize resources with tags",prompts:"Manage and version prompt templates","claude-code-plugins":"Configure Claude Code plugins",usage:"View legacy usage dashboard","router-settings":"Configure routing and load balancing settings","logging-and-alerts":"Set up logging and alert configurations","admin-panel":"Access admin panel and settings"};var eR=l(20347);let ez=e=>!e||0===e.length||e.some(e=>eR.lo.includes(e)),eF=()=>{let e=[];return eU.j.forEach(s=>{s.items.forEach(l=>{if(l.page&&"tools"!==l.page&&"experimental"!==l.page&&"settings"!==l.page&&ez(l.roles)){let t="string"==typeof l.label?l.label:l.key;e.push({page:l.page,label:t,group:s.groupLabel,description:eM[l.page]||"No description available"})}if(l.children){let t="string"==typeof l.label?l.label:l.key;l.children.forEach(l=>{if(ez(l.roles)){let i="string"==typeof l.label?l.label:l.key;e.push({page:l.page,label:i,group:"".concat(s.groupLabel," > ").concat(t),description:eM[l.page]||"No description available"})}})}})}),e};var eD=l(44851);function eG(e){let{enabledPagesInternalUsers:s,enabledPagesPropertyDescription:l,isUpdating:i,onUpdate:r}=e,n=null!=s,a=(0,v.useMemo)(()=>eF(),[]),o=(0,v.useMemo)(()=>{let e={};return a.forEach(s=>{e[s.group]||(e[s.group]=[]),e[s.group].push(s)}),e},[a]),[d,c]=(0,v.useState)(s||[]);return(0,v.useMemo)(()=>{s?c(s):c([])},[s]),(0,t.jsxs)(V.Z,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,t.jsxs)(V.Z,{direction:"vertical",size:4,children:[(0,t.jsxs)(V.Z,{align:"center",children:[(0,t.jsx)(p.default.Text,{strong:!0,children:"Internal User Page Visibility"}),!n&&(0,t.jsx)(G.Z,{color:"default",style:{marginLeft:"8px"},children:"Not set (all pages visible)"}),n&&(0,t.jsxs)(G.Z,{color:"blue",style:{marginLeft:"8px"},children:[d.length," page",1!==d.length?"s":""," selected"]})]}),l&&(0,t.jsx)(p.default.Text,{type:"secondary",children:l}),(0,t.jsx)(p.default.Text,{type:"secondary",style:{fontSize:"12px",fontStyle:"italic"},children:"By default, all pages are visible to internal users. Select specific pages to restrict visibility."}),(0,t.jsx)(p.default.Text,{type:"secondary",style:{fontSize:"12px",color:"#8b5cf6"},children:"Note: Only pages accessible to internal user roles are shown here. Admin-only pages are excluded as they cannot be made visible to internal users regardless of this setting."})]}),(0,t.jsx)(eD.default,{items:[{key:"page-visibility",label:"Configure Page Visibility",children:(0,t.jsxs)(V.Z,{direction:"vertical",size:"middle",style:{width:"100%"},children:[(0,t.jsx)(ee.Z.Group,{value:d,onChange:c,style:{width:"100%"},children:(0,t.jsx)(V.Z,{direction:"vertical",size:"middle",style:{width:"100%"},children:Object.entries(o).map(e=>{let[s,l]=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(p.default.Text,{strong:!0,style:{fontSize:"11px",color:"#6b7280",letterSpacing:"0.05em",display:"block",marginBottom:"8px"},children:s}),(0,t.jsx)(V.Z,{direction:"vertical",size:"small",style:{marginLeft:"16px",width:"100%"},children:l.map(e=>(0,t.jsx)("div",{style:{marginBottom:"4px"},children:(0,t.jsx)(ee.Z,{value:e.page,children:(0,t.jsxs)(V.Z,{direction:"vertical",size:0,children:[(0,t.jsx)(p.default.Text,{children:e.label}),(0,t.jsx)(p.default.Text,{type:"secondary",style:{fontSize:"12px"},children:e.description})]})})},e.page))})]},s)})})}),(0,t.jsxs)(V.Z,{children:[(0,t.jsx)(j.ZP,{type:"primary",onClick:()=>{r({enabled_ui_pages_internal_users:d.length>0?d:null})},loading:i,disabled:i,children:"Save Page Visibility Settings"}),n&&(0,t.jsx)(j.ZP,{onClick:()=>{c([]),r({enabled_ui_pages_internal_users:null})},loading:i,disabled:i,children:"Reset to Default (All Pages)"})]})]})}]})]})}var eB=l(63709);function eV(){var e,s,l,r,n,a,o,d;let{accessToken:c}=(0,i.Z)(),{data:u,isLoading:m,isError:g,error:x}=(0,eP.L)(),{mutate:_,isPending:f,error:j}=eA(c),y=null==u?void 0:u.field_schema,v=null==y?void 0:null===(e=y.properties)||void 0===e?void 0:e.disable_model_add_for_internal_users,b=null==y?void 0:null===(s=y.properties)||void 0===s?void 0:s.disable_team_admin_delete_team_user,Z=null==y?void 0:null===(l=y.properties)||void 0===l?void 0:l.require_auth_for_public_ai_hub,w=null==y?void 0:null===(r=y.properties)||void 0===r?void 0:r.enabled_ui_pages_internal_users,N=null!==(n=null==u?void 0:u.values)&&void 0!==n?n:{},I=!!N.disable_model_add_for_internal_users,k=!!N.disable_team_admin_delete_team_user;return(0,t.jsx)(q.Z,{title:"UI Settings",children:m?(0,t.jsx)(ew.Z,{active:!0}):g?(0,t.jsx)(h.Z,{type:"error",message:"Could not load UI settings",description:x instanceof Error?x.message:void 0}):(0,t.jsxs)(V.Z,{direction:"vertical",size:"large",style:{width:"100%"},children:[(null==y?void 0:y.description)&&(0,t.jsx)(p.default.Paragraph,{style:{marginBottom:0},children:y.description}),j&&(0,t.jsx)(h.Z,{type:"error",message:"Could not update UI settings",description:j instanceof Error?j.message:void 0}),(0,t.jsxs)(V.Z,{align:"start",size:"middle",children:[(0,t.jsx)(eB.Z,{checked:I,disabled:f,loading:f,onChange:e=>{_({disable_model_add_for_internal_users:e},{onSuccess:()=>{S.ZP.success("UI settings updated successfully")},onError:e=>{S.ZP.fromBackend(e)}})},"aria-label":null!==(a=null==v?void 0:v.description)&&void 0!==a?a:"Disable model add for internal users"}),(0,t.jsxs)(V.Z,{direction:"vertical",size:4,children:[(0,t.jsx)(p.default.Text,{strong:!0,children:"Disable model add for internal users"}),(null==v?void 0:v.description)&&(0,t.jsx)(p.default.Text,{type:"secondary",children:v.description})]})]}),(0,t.jsxs)(V.Z,{align:"start",size:"middle",children:[(0,t.jsx)(eB.Z,{checked:k,disabled:f,loading:f,onChange:e=>{_({disable_team_admin_delete_team_user:e},{onSuccess:()=>{S.ZP.success("UI settings updated successfully")},onError:e=>{S.ZP.fromBackend(e)}})},"aria-label":null!==(o=null==b?void 0:b.description)&&void 0!==o?o:"Disable team admin delete team user"}),(0,t.jsxs)(V.Z,{direction:"vertical",size:4,children:[(0,t.jsx)(p.default.Text,{strong:!0,children:"Disable team admin delete team user"}),(null==b?void 0:b.description)&&(0,t.jsx)(p.default.Text,{type:"secondary",children:b.description})]})]}),(0,t.jsxs)(V.Z,{align:"start",size:"middle",children:[(0,t.jsx)(eB.Z,{checked:N.require_auth_for_public_ai_hub,disabled:f,loading:f,onChange:e=>{_({require_auth_for_public_ai_hub:e},{onSuccess:()=>{S.ZP.success("UI settings updated successfully")},onError:e=>{S.ZP.fromBackend(e)}})},"aria-label":null!==(d=null==Z?void 0:Z.description)&&void 0!==d?d:"Require authentication for public AI Hub"}),(0,t.jsxs)(V.Z,{direction:"vertical",size:4,children:[(0,t.jsx)(p.default.Text,{strong:!0,children:"Require authentication for public AI Hub"}),(null==Z?void 0:Z.description)&&(0,t.jsx)(p.default.Text,{type:"secondary",children:Z.description})]})]}),(0,t.jsx)(ex.Z,{}),(0,t.jsx)(eG,{enabledPagesInternalUsers:N.enabled_ui_pages_internal_users,enabledPagesPropertyDescription:null==w?void 0:w.description,isUpdating:f,onUpdate:e=>{_(e,{onSuccess:()=>{S.ZP.success("Page visibility settings updated successfully")},onError:e=>{S.ZP.fromBackend(e)}})}})]})})}var eq=l(56522);let eY={google:"https://artificialanalysis.ai/img/logos/google_small.svg",microsoft:"https://upload.wikimedia.org/wikipedia/commons/a/a8/Microsoft_Azure_Logo.svg",okta:"https://www.okta.com/sites/default/files/Okta_Logo_BrightBlue_Medium.png",generic:""},eH={google:{envVarMap:{google_client_id:"GOOGLE_CLIENT_ID",google_client_secret:"GOOGLE_CLIENT_SECRET"},fields:[{label:"Google Client ID",name:"google_client_id"},{label:"Google Client Secret",name:"google_client_secret"}]},microsoft:{envVarMap:{microsoft_client_id:"MICROSOFT_CLIENT_ID",microsoft_client_secret:"MICROSOFT_CLIENT_SECRET",microsoft_tenant:"MICROSOFT_TENANT"},fields:[{label:"Microsoft Client ID",name:"microsoft_client_id"},{label:"Microsoft Client Secret",name:"microsoft_client_secret"},{label:"Microsoft Tenant",name:"microsoft_tenant"}]},okta:{envVarMap:{generic_client_id:"GENERIC_CLIENT_ID",generic_client_secret:"GENERIC_CLIENT_SECRET",generic_authorization_endpoint:"GENERIC_AUTHORIZATION_ENDPOINT",generic_token_endpoint:"GENERIC_TOKEN_ENDPOINT",generic_userinfo_endpoint:"GENERIC_USERINFO_ENDPOINT"},fields:[{label:"Generic Client ID",name:"generic_client_id"},{label:"Generic Client Secret",name:"generic_client_secret"},{label:"Authorization Endpoint",name:"generic_authorization_endpoint",placeholder:"https://your-domain/authorize"},{label:"Token Endpoint",name:"generic_token_endpoint",placeholder:"https://your-domain/token"},{label:"Userinfo Endpoint",name:"generic_userinfo_endpoint",placeholder:"https://your-domain/userinfo"}]},generic:{envVarMap:{generic_client_id:"GENERIC_CLIENT_ID",generic_client_secret:"GENERIC_CLIENT_SECRET",generic_authorization_endpoint:"GENERIC_AUTHORIZATION_ENDPOINT",generic_token_endpoint:"GENERIC_TOKEN_ENDPOINT",generic_userinfo_endpoint:"GENERIC_USERINFO_ENDPOINT"},fields:[{label:"Generic Client ID",name:"generic_client_id"},{label:"Generic Client Secret",name:"generic_client_secret"},{label:"Authorization Endpoint",name:"generic_authorization_endpoint"},{label:"Token Endpoint",name:"generic_token_endpoint"},{label:"Userinfo Endpoint",name:"generic_userinfo_endpoint"}]}};var eK=e=>{let{isAddSSOModalVisible:s,isInstructionsModalVisible:l,handleAddSSOOk:i,handleAddSSOCancel:r,handleShowInstructions:n,handleInstructionsOk:a,handleInstructionsCancel:o,form:d,accessToken:c,ssoConfigured:u=!1}=e,[m,g]=(0,v.useState)(!1);(0,v.useEffect)(()=>{(async()=>{if(s&&c)try{let s=await (0,Z.getSSOSettings)(c);if(console.log("Raw SSO data received:",s),s&&s.values){var e,l,t,i,r,n;console.log("SSO values:",s.values),console.log("user_email from API:",s.values.user_email);let a=null;s.values.google_client_id?a="google":s.values.microsoft_client_id?a="microsoft":s.values.generic_client_id&&(a=(null===(e=s.values.generic_authorization_endpoint)||void 0===e?void 0:e.includes("okta"))||(null===(l=s.values.generic_authorization_endpoint)||void 0===l?void 0:l.includes("auth0"))?"okta":"generic");let o={};if(s.values.role_mappings){let e=s.values.role_mappings,l=e=>e&&0!==e.length?e.join(", "):"";o={use_role_mappings:!0,group_claim:e.group_claim,default_role:e.default_role||"internal_user",proxy_admin_teams:l(null===(t=e.roles)||void 0===t?void 0:t.proxy_admin),admin_viewer_teams:l(null===(i=e.roles)||void 0===i?void 0:i.proxy_admin_viewer),internal_user_teams:l(null===(r=e.roles)||void 0===r?void 0:r.internal_user),internal_viewer_teams:l(null===(n=e.roles)||void 0===n?void 0:n.internal_user_viewer)}}let c={sso_provider:a,proxy_base_url:s.values.proxy_base_url,user_email:s.values.user_email,...s.values,...o};console.log("Setting form values:",c),d.resetFields(),setTimeout(()=>{d.setFieldsValue(c),console.log("Form values set, current form values:",d.getFieldsValue())},100)}}catch(e){console.error("Failed to load SSO settings:",e)}})()},[s,c,d]);let p=async e=>{if(!c){S.ZP.fromBackend("No access token available");return}try{let{proxy_admin_teams:s,admin_viewer_teams:l,internal_user_teams:t,internal_viewer_teams:i,default_role:r,group_claim:a,use_role_mappings:o,...d}=e,u={...d};if(o){let e=e=>e&&""!==e.trim()?e.split(",").map(e=>e.trim()).filter(e=>e.length>0):[];u.role_mappings={provider:"generic",group_claim:a,default_role:({internal_user_viewer:"internal_user_viewer",internal_user:"internal_user",proxy_admin_viewer:"proxy_admin_viewer",proxy_admin:"proxy_admin"})[r]||"internal_user",roles:{proxy_admin:e(s),proxy_admin_viewer:e(l),internal_user:e(t),internal_user_viewer:e(i)}}}await (0,Z.updateSSOSettings)(c,u),n(e)}catch(e){S.ZP.fromBackend("Failed to save SSO settings: "+(0,U.O)(e))}},h=async()=>{if(!c){S.ZP.fromBackend("No access token available");return}try{await (0,Z.updateSSOSettings)(c,{google_client_id:null,google_client_secret:null,microsoft_client_id:null,microsoft_client_secret:null,microsoft_tenant:null,generic_client_id:null,generic_client_secret:null,generic_authorization_endpoint:null,generic_token_endpoint:null,generic_userinfo_endpoint:null,proxy_base_url:null,user_email:null,sso_provider:null,role_mappings:null}),d.resetFields(),g(!1),i(),S.ZP.success("SSO settings cleared successfully")}catch(e){console.error("Failed to clear SSO settings:",e),S.ZP.fromBackend("Failed to clear SSO settings")}},y=e=>{let s=eH[e];return s?s.fields.map(e=>(0,t.jsx)(x.Z.Item,{label:e.label,name:e.name,rules:[{required:!0,message:"Please enter the ".concat(e.label.toLowerCase())}],children:e.name.includes("client")?(0,t.jsx)(f.default.Password,{}):(0,t.jsx)(eq.o,{placeholder:e.placeholder})},e.name)):null};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{title:u?"Edit SSO Settings":"Add SSO",open:s,width:800,footer:null,onOk:i,onCancel:r,children:(0,t.jsxs)(x.Z,{form:d,onFinish:p,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z.Item,{label:"SSO Provider",name:"sso_provider",rules:[{required:!0,message:"Please select an SSO provider"}],children:(0,t.jsx)($.default,{children:Object.entries(eY).map(e=>{let[s,l]=e;return(0,t.jsx)($.default.Option,{value:s,children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"4px 0"},children:[l&&(0,t.jsx)("img",{src:l,alt:s,style:{height:24,width:24,marginRight:12,objectFit:"contain"}}),(0,t.jsxs)("span",{children:["okta"===s.toLowerCase()?"Okta / Auth0":s.charAt(0).toUpperCase()+s.slice(1)," ","SSO"]})]})},s)})})}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.sso_provider!==s.sso_provider,children:e=>{let{getFieldValue:s}=e,l=s("sso_provider");return l?y(l):null}}),(0,t.jsx)(x.Z.Item,{label:"Proxy Admin Email",name:"user_email",rules:[{required:!0,message:"Please enter the email of the proxy admin"}],children:(0,t.jsx)(eq.o,{})}),(0,t.jsx)(x.Z.Item,{label:"Proxy Base URL",name:"proxy_base_url",normalize:e=>null==e?void 0:e.trim(),rules:[{required:!0,message:"Please enter the proxy base url"},{pattern:/^https?:\/\/.+/,message:"URL must start with http:// or https://"},{validator:(e,s)=>s&&/^https?:\/\/.+/.test(s)&&s.endsWith("/")?Promise.reject("URL must not end with a trailing slash"):Promise.resolve()}],children:(0,t.jsx)(eq.o,{placeholder:"https://example.com"})}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.sso_provider!==s.sso_provider,children:e=>{let{getFieldValue:s}=e,l=s("sso_provider");return"okta"===l||"generic"===l?(0,t.jsx)(x.Z.Item,{label:"Use Role Mappings",name:"use_role_mappings",valuePropName:"checked",children:(0,t.jsx)(ee.Z,{})}):null}}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.use_role_mappings!==s.use_role_mappings,children:e=>{let{getFieldValue:s}=e;return s("use_role_mappings")?(0,t.jsx)(x.Z.Item,{label:"Group Claim",name:"group_claim",rules:[{required:!0,message:"Please enter the group claim"}],children:(0,t.jsx)(eq.o,{})}):null}}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.use_role_mappings!==s.use_role_mappings,children:e=>{let{getFieldValue:s}=e;return s("use_role_mappings")?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z.Item,{label:"Default Role",name:"default_role",initialValue:"Internal User",children:(0,t.jsxs)($.default,{children:[(0,t.jsx)($.default.Option,{value:"internal_user_viewer",children:"Internal Viewer"}),(0,t.jsx)($.default.Option,{value:"internal_user",children:"Internal User"}),(0,t.jsx)($.default.Option,{value:"proxy_admin_viewer",children:"Admin Viewer"}),(0,t.jsx)($.default.Option,{value:"proxy_admin",children:"Proxy Admin"})]})}),(0,t.jsx)(x.Z.Item,{label:"Proxy Admin Teams",name:"proxy_admin_teams",children:(0,t.jsx)(eq.o,{})}),(0,t.jsx)(x.Z.Item,{label:"Admin Viewer Teams",name:"admin_viewer_teams",children:(0,t.jsx)(eq.o,{})}),(0,t.jsx)(x.Z.Item,{label:"Internal User Teams",name:"internal_user_teams",children:(0,t.jsx)(eq.o,{})}),(0,t.jsx)(x.Z.Item,{label:"Internal Viewer Teams",name:"internal_viewer_teams",children:(0,t.jsx)(eq.o,{})})]}):null}})]}),(0,t.jsxs)("div",{style:{textAlign:"right",marginTop:"10px",display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"8px"},children:[u&&(0,t.jsx)(j.ZP,{onClick:()=>g(!0),style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#5558eb",e.currentTarget.style.borderColor="#5558eb"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1",e.currentTarget.style.borderColor="#6366f1"},children:"Clear"}),(0,t.jsx)(j.ZP,{htmlType:"submit",children:"Save"})]})]})}),(0,t.jsxs)(_.Z,{title:"Confirm Clear SSO Settings",open:m,onOk:h,onCancel:()=>g(!1),okText:"Yes, Clear",cancelText:"Cancel",okButtonProps:{danger:!0,style:{backgroundColor:"#dc2626",borderColor:"#dc2626"}},children:[(0,t.jsx)("p",{children:"Are you sure you want to clear all SSO settings? This action cannot be undone."}),(0,t.jsx)("p",{children:"Users will no longer be able to login using SSO after this change."})]}),(0,t.jsxs)(_.Z,{title:"SSO Setup Instructions",open:l,width:800,footer:null,onOk:a,onCancel:o,children:[(0,t.jsx)("p",{children:"Follow these steps to complete the SSO setup:"}),(0,t.jsx)(eq.x,{className:"mt-2",children:"1. DO NOT Exit this TAB"}),(0,t.jsx)(eq.x,{className:"mt-2",children:"2. Open a new tab, visit your proxy base url"}),(0,t.jsx)(eq.x,{className:"mt-2",children:"3. Confirm your SSO is configured correctly and you can login on the new Tab"}),(0,t.jsx)(eq.x,{className:"mt-2",children:"4. If Step 3 is successful, you can close this tab"}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(j.ZP,{onClick:a,children:"Done"})})]})]})},eW=e=>{let{accessToken:s,onSuccess:l}=e,[i]=x.Z.useForm(),[r,n]=(0,v.useState)(!1);(0,v.useEffect)(()=>{(async()=>{if(s)try{let e=await (0,Z.getSSOSettings)(s);if(e&&e.values){let s=e.values.ui_access_mode,l={};s&&"object"==typeof s?l={ui_access_mode_type:s.type,restricted_sso_group:s.restricted_sso_group,sso_group_jwt_field:s.sso_group_jwt_field}:"string"==typeof s&&(l={ui_access_mode_type:s,restricted_sso_group:e.values.restricted_sso_group,sso_group_jwt_field:e.values.team_ids_jwt_field||e.values.sso_group_jwt_field}),i.setFieldsValue(l)}}catch(e){console.error("Failed to load UI access settings:",e)}})()},[s,i]);let a=async e=>{if(!s){S.ZP.fromBackend("No access token available");return}n(!0);try{let t;t="all_authenticated_users"===e.ui_access_mode_type?{ui_access_mode:"none"}:{ui_access_mode:{type:e.ui_access_mode_type,restricted_sso_group:e.restricted_sso_group,sso_group_jwt_field:e.sso_group_jwt_field}},await (0,Z.updateSSOSettings)(s,t),l()}catch(e){console.error("Failed to save UI access settings:",e),S.ZP.fromBackend("Failed to save UI access settings")}finally{n(!1)}};return(0,t.jsxs)("div",{style:{padding:"16px"},children:[(0,t.jsx)("div",{style:{marginBottom:"16px"},children:(0,t.jsx)(eq.x,{style:{fontSize:"14px",color:"#6b7280"},children:"Configure who can access the UI interface and how group information is extracted from JWT tokens."})}),(0,t.jsxs)(x.Z,{form:i,onFinish:a,layout:"vertical",children:[(0,t.jsx)(x.Z.Item,{label:"UI Access Mode",name:"ui_access_mode_type",tooltip:"Controls who can access the UI interface",children:(0,t.jsxs)($.default,{placeholder:"Select access mode",children:[(0,t.jsx)($.default.Option,{value:"all_authenticated_users",children:"All Authenticated Users"}),(0,t.jsx)($.default.Option,{value:"restricted_sso_group",children:"Restricted SSO Group"})]})}),(0,t.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.ui_access_mode_type!==s.ui_access_mode_type,children:e=>{let{getFieldValue:s}=e;return"restricted_sso_group"===s("ui_access_mode_type")?(0,t.jsx)(x.Z.Item,{label:"Restricted SSO Group",name:"restricted_sso_group",rules:[{required:!0,message:"Please enter the restricted SSO group"}],children:(0,t.jsx)(eq.o,{placeholder:"ui-access-group"})}):null}}),(0,t.jsx)(x.Z.Item,{label:"SSO Group JWT Field",name:"sso_group_jwt_field",tooltip:"JWT field name that contains team/group information. Use dot notation to access nested fields.",children:(0,t.jsx)(eq.o,{placeholder:"groups"})}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"16px"},children:(0,t.jsx)(j.ZP,{type:"primary",htmlType:"submit",loading:r,style:{backgroundColor:"#6366f1",borderColor:"#6366f1"},children:"Update UI Access Control"})})]})]})};let{Title:eJ,Paragraph:eQ,Text:eX}=p.default;var e$=e=>{let{proxySettings:s}=e,{premiumUser:l,accessToken:p,userId:w}=(0,i.Z)(),[N]=x.Z.useForm(),[I,k]=(0,v.useState)(!1),[C,O]=(0,v.useState)(!1),[E,P]=(0,v.useState)(!1),[T,L]=(0,v.useState)(!1),[A,U]=(0,v.useState)(!1),[R,z]=(0,v.useState)(!1),[F,D]=(0,v.useState)([]),[G,B]=(0,v.useState)(null),[V,q]=(0,v.useState)(!1),Y=(0,b.n)(),H="All IP Addresses Allowed",K=Y;K+="/fallback/login";let W=async()=>{if(p)try{let e=await (0,Z.getSSOSettings)(p);if(e&&e.values){let s=e.values.google_client_id&&e.values.google_client_secret,l=e.values.microsoft_client_id&&e.values.microsoft_client_secret,t=e.values.generic_client_id&&e.values.generic_client_secret;q(s||l||t)}else q(!1)}catch(e){console.error("Error checking SSO configuration:",e),q(!1)}},J=async()=>{try{if(!0!==l){S.ZP.fromBackend("This feature is only available for premium users. Please upgrade your account.");return}if(p){let e=await (0,Z.getAllowedIPs)(p);D(e&&e.length>0?e:[H])}else D([H])}catch(e){console.error("Error fetching allowed IPs:",e),S.ZP.fromBackend("Failed to fetch allowed IPs ".concat(e)),D([H])}finally{!0===l&&P(!0)}},Q=async e=>{try{if(p){await (0,Z.addAllowedIP)(p,e.ip);let s=await (0,Z.getAllowedIPs)(p);D(s),S.ZP.success("IP address added successfully")}}catch(e){console.error("Error adding IP:",e),S.ZP.fromBackend("Failed to add IP address ".concat(e))}finally{L(!1)}},X=async e=>{B(e),U(!0)},$=async()=>{if(G&&p)try{await (0,Z.deleteAllowedIP)(p,G);let e=await (0,Z.getAllowedIPs)(p);D(e.length>0?e:[H]),S.ZP.success("IP address deleted successfully")}catch(e){console.error("Error deleting IP:",e),S.ZP.fromBackend("Failed to delete IP address ".concat(e))}finally{U(!1),B(null)}};(0,v.useEffect)(()=>{W()},[p,l,W]);let ee=()=>{z(!1)},es=[{key:"sso-settings",label:"SSO Settings",children:(0,t.jsx)(eE,{})},{key:"security-settings",label:"Security Settings",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.Z,{children:[(0,t.jsx)(eJ,{level:4,children:" ✨ Security Settings"}),(0,t.jsx)(h.Z,{message:"SSO Configuration Deprecated",description:"Editing SSO Settings on this page is deprecated and will be removed in a future version. Please use the SSO Settings tab for SSO configuration.",type:"warning",showIcon:!0}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"1rem",marginLeft:"0.5rem"},children:[(0,t.jsx)("div",{children:(0,t.jsx)(r.Z,{style:{width:"150px"},onClick:()=>k(!0),children:V?"Edit SSO Settings":"Add SSO"})}),(0,t.jsx)("div",{children:(0,t.jsx)(r.Z,{style:{width:"150px"},onClick:J,children:"Allowed IPs"})}),(0,t.jsx)("div",{children:(0,t.jsx)(r.Z,{style:{width:"150px"},onClick:()=>!0===l?z(!0):S.ZP.fromBackend("Only premium users can configure UI access control"),children:"UI Access Control"})})]})]}),(0,t.jsxs)("div",{className:"flex justify-start mb-4",children:[(0,t.jsx)(eK,{isAddSSOModalVisible:I,isInstructionsModalVisible:C,handleAddSSOOk:()=>{k(!1),N.resetFields(),p&&l&&W()},handleAddSSOCancel:()=>{k(!1),N.resetFields()},handleShowInstructions:e=>{k(!1),O(!0)},handleInstructionsOk:()=>{O(!1),p&&l&&W()},handleInstructionsCancel:()=>{O(!1),p&&l&&W()},form:N,accessToken:p,ssoConfigured:V}),(0,t.jsx)(_.Z,{title:"Manage Allowed IP Addresses",width:800,open:E,onCancel:()=>P(!1),footer:[(0,t.jsx)(r.Z,{className:"mx-1",onClick:()=>L(!0),children:"Add IP Address"},"add"),(0,t.jsx)(r.Z,{onClick:()=>P(!1),children:"Close"},"close")],children:(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(u.Z,{children:(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(m.Z,{children:"IP Address"}),(0,t.jsx)(m.Z,{className:"text-right",children:"Action"})]})}),(0,t.jsx)(d.Z,{children:F.map((e,s)=>(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(c.Z,{children:e}),(0,t.jsx)(c.Z,{className:"text-right",children:e!==H&&(0,t.jsx)(r.Z,{onClick:()=>X(e),color:"red",size:"xs",children:"Delete"})})]},s))})]})}),(0,t.jsx)(_.Z,{title:"Add Allowed IP Address",open:T,onCancel:()=>L(!1),footer:null,children:(0,t.jsxs)(x.Z,{onFinish:Q,children:[(0,t.jsx)(x.Z.Item,{name:"ip",rules:[{required:!0,message:"Please enter an IP address"}],children:(0,t.jsx)(f.default,{placeholder:"Enter IP address"})}),(0,t.jsx)(x.Z.Item,{children:(0,t.jsx)(j.ZP,{htmlType:"submit",children:"Add IP Address"})})]})}),(0,t.jsx)(_.Z,{title:"Confirm Delete",open:A,onCancel:()=>U(!1),onOk:$,footer:[(0,t.jsx)(r.Z,{className:"mx-1",onClick:()=>$(),children:"Yes"},"delete"),(0,t.jsx)(r.Z,{onClick:()=>U(!1),children:"Close"},"close")],children:(0,t.jsxs)(eX,{children:["Are you sure you want to delete the IP address: ",G,"?"]})}),(0,t.jsx)(_.Z,{title:"UI Access Control Settings",open:R,width:600,footer:null,onOk:ee,onCancel:()=>{z(!1)},children:(0,t.jsx)(eW,{accessToken:p,onSuccess:()=>{ee(),S.ZP.success("UI Access Control settings updated successfully")}})})]}),(0,t.jsxs)(n.Z,{title:"Login without SSO",color:"teal",children:["If you need to login without sso, you can access"," ",(0,t.jsxs)("a",{href:K,target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)("b",{children:K})," "]})]})]})},{key:"scim",label:"SCIM",children:(0,t.jsx)(M,{accessToken:p,userID:w,proxySettings:s})},{key:"ui-settings",label:"UI Settings",children:(0,t.jsx)(eV,{})}];return(0,t.jsxs)("div",{className:"w-full m-2 mt-2 p-8",children:[(0,t.jsx)(eJ,{level:4,children:"Admin Access "}),(0,t.jsx)(eQ,{children:"Go to 'Internal Users' page to add other admins."}),(0,t.jsx)(y.default,{items:es})]})}},24793:function(e,s,l){l.d(s,{Z:function(){return _}});var t=l(57437),i=l(74838);l(1309);var r=l(76865),n=l(70525),a=l(95805),o=l(51817),d=l(21047);l(22135),l(40875);var c=l(31047),u=l(49663),m=l(2265),g=l(19250);let p=function(){for(var e=arguments.length,s=Array(e),l=0;l<e;l++)s[l]=arguments[l];return s.filter(Boolean).join(" ")},x=e=>{if(!e)return null;let s=new Date(e+"T00:00:00Z"),l=new Date;return l.setHours(0,0,0,0),Math.ceil((s.getTime()-l.getTime())/864e5)},h=e=>null===e?"No expiration":e<0?"Expired":0===e?"Expires today":1===e?"1 day remaining":e<30?"".concat(e," days remaining"):e<60?"1 month remaining":"".concat(Math.floor(e/30)," months remaining");function _(e){let{accessToken:s,width:l=220}=e,_=(0,i.w)(),[f,j]=(0,m.useState)(!1),[y,v]=(0,m.useState)(!1),[b,S]=(0,m.useState)(null),[Z,w]=(0,m.useState)(null),[N,I]=(0,m.useState)(!1),[k,C]=(0,m.useState)(null);(0,m.useEffect)(()=>{(async()=>{if(s){I(!0),C(null);try{let[e,l]=await Promise.all([(0,g.getRemainingUsers)(s),(0,g.getLicenseInfo)(s).catch(()=>null)]);S(e),w(l)}catch(e){console.error("Failed to fetch usage data:",e),C("Failed to load usage data")}finally{I(!1)}}})()},[s]);let O=(null==Z?void 0:Z.expiration_date)?x(Z.expiration_date):null,E=null!==O&&O<0,P=null!==O&&O>=0&&O<30,{isOverLimit:T,isNearLimit:L,usagePercentage:A,userMetrics:U,teamMetrics:M}=(e=>{if(!e)return{isOverLimit:!1,isNearLimit:!1,usagePercentage:0,userMetrics:{isOverLimit:!1,isNearLimit:!1,usagePercentage:0},teamMetrics:{isOverLimit:!1,isNearLimit:!1,usagePercentage:0}};let s=e.total_users?e.total_users_used/e.total_users*100:0,l=s>100,t=s>=80&&s<=100,i=e.total_teams?e.total_teams_used/e.total_teams*100:0,r=i>100,n=i>=80&&i<=100,a=l||r;return{isOverLimit:a,isNearLimit:(t||n)&&!a,usagePercentage:Math.max(s,i),userMetrics:{isOverLimit:l,isNearLimit:t,usagePercentage:s},teamMetrics:{isOverLimit:r,isNearLimit:n,usagePercentage:i}}})(b),R=T||L||E||P,z=T||E,F=(L||P)&&!z,D=()=>z?(0,t.jsx)(r.Z,{className:"h-3 w-3"}):F?(0,t.jsx)(n.Z,{className:"h-3 w-3"}):null;return _||!s||(null==b?void 0:b.total_users)===null&&(null==b?void 0:b.total_teams)===null?null:(0,t.jsx)("div",{className:"fixed bottom-4 left-4 z-50",style:{width:"".concat(Math.min(l,220),"px")},children:(0,t.jsx)(()=>y?(0,t.jsx)("button",{onClick:()=>v(!1),className:p("bg-white border border-gray-200 rounded-lg shadow-sm p-3 hover:shadow-md transition-all w-full"),title:"Show usage details",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Z,{className:"h-4 w-4 flex-shrink-0"}),R&&(0,t.jsx)("span",{className:"flex-shrink-0",children:D()}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium truncate",children:[b&&null!==b.total_users&&(0,t.jsxs)("span",{className:p("flex-shrink-0 px-1.5 py-0.5 rounded text-xs border",U.isOverLimit&&"bg-red-50 text-red-700 border-red-200",U.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!U.isOverLimit&&!U.isNearLimit&&"bg-gray-50 text-gray-700 border-gray-200"),children:["U: ",b.total_users_used,"/",b.total_users]}),b&&null!==b.total_teams&&(0,t.jsxs)("span",{className:p("flex-shrink-0 px-1.5 py-0.5 rounded text-xs border",M.isOverLimit&&"bg-red-50 text-red-700 border-red-200",M.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!M.isOverLimit&&!M.isNearLimit&&"bg-gray-50 text-gray-700 border-gray-200"),children:["T: ",b.total_teams_used,"/",b.total_teams]}),(null==Z?void 0:Z.expiration_date)&&null!==O&&(0,t.jsx)("span",{className:p("flex-shrink-0 px-1.5 py-0.5 rounded text-xs border",E&&"bg-red-50 text-red-700 border-red-200",P&&"bg-yellow-50 text-yellow-700 border-yellow-200",!E&&!P&&"bg-gray-50 text-gray-700 border-gray-200"),children:O<0?"Exp!":"".concat(O,"d")}),!b||null===b.total_users&&null===b.total_teams&&!Z&&(0,t.jsx)("span",{className:"truncate",children:"Usage"})]})]})}):N?(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 w-full",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 truncate",children:"Loading..."})]})}):k||!b?(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 group w-full",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)("span",{className:"text-sm text-gray-500 truncate block",children:k||"No data"})}),(0,t.jsx)("button",{onClick:()=>v(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 rounded transition-all flex-shrink-0",title:"Minimize",children:(0,t.jsx)(d.Z,{className:"h-3 w-3 text-gray-400"})})]})}):(0,t.jsxs)("div",{className:p("bg-white border rounded-lg shadow-sm p-3 transition-all duration-200 group w-full"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,t.jsx)(a.Z,{className:"h-4 w-4 flex-shrink-0"}),(0,t.jsx)("span",{className:"font-medium text-sm truncate",children:"Usage"})]}),(0,t.jsx)("button",{onClick:()=>v(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 rounded transition-all flex-shrink-0",title:"Minimize",children:(0,t.jsx)(d.Z,{className:"h-3 w-3 text-gray-400"})})]}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(null==Z?void 0:Z.has_license)&&Z.expiration_date&&(0,t.jsxs)("div",{className:p("space-y-1 border rounded-md p-2",E&&"border-red-200 bg-red-50",P&&"border-yellow-200 bg-yellow-50"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[(0,t.jsx)(c.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"font-medium",children:"License"}),(0,t.jsx)("span",{className:p("ml-1 px-1.5 py-0.5 rounded border",E&&"bg-red-50 text-red-700 border-red-200",P&&"bg-yellow-50 text-yellow-700 border-yellow-200",!E&&!P&&"bg-gray-50 text-gray-600 border-gray-200"),children:E?"Expired":P?"Expiring soon":"OK"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 text-xs",children:"Status:"}),(0,t.jsx)("span",{className:p("font-medium text-right",E&&"text-red-600",P&&"text-yellow-600"),children:h(O)})]}),Z.license_type&&(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 text-xs",children:"Type:"}),(0,t.jsx)("span",{className:"font-medium text-right capitalize",children:Z.license_type})]})]}),null!==b.total_users&&(0,t.jsxs)("div",{className:p("space-y-1 border rounded-md p-2",U.isOverLimit&&"border-red-200 bg-red-50",U.isNearLimit&&"border-yellow-200 bg-yellow-50"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[(0,t.jsx)(a.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"font-medium",children:"Users"}),(0,t.jsx)("span",{className:p("ml-1 px-1.5 py-0.5 rounded border",U.isOverLimit&&"bg-red-50 text-red-700 border-red-200",U.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!U.isOverLimit&&!U.isNearLimit&&"bg-gray-50 text-gray-600 border-gray-200"),children:U.isOverLimit?"Over limit":U.isNearLimit?"Near limit":"OK"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 text-xs",children:"Used:"}),(0,t.jsxs)("span",{className:"font-medium text-right",children:[b.total_users_used,"/",b.total_users]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 text-xs",children:"Remaining:"}),(0,t.jsx)("span",{className:p("font-medium text-right",U.isOverLimit&&"text-red-600",U.isNearLimit&&"text-yellow-600"),children:b.total_users_remaining})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 text-xs",children:"Usage:"}),(0,t.jsxs)("span",{className:"font-medium text-right",children:[Math.round(U.usagePercentage),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:p("h-2 rounded-full transition-all duration-300",U.isOverLimit&&"bg-red-500",U.isNearLimit&&"bg-yellow-500",!U.isOverLimit&&!U.isNearLimit&&"bg-green-500"),style:{width:"".concat(Math.min(U.usagePercentage,100),"%")}})})]}),null!==b.total_teams&&(0,t.jsxs)("div",{className:p("space-y-1 border rounded-md p-2",M.isOverLimit&&"border-red-200 bg-red-50",M.isNearLimit&&"border-yellow-200 bg-yellow-50"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[(0,t.jsx)(u.Z,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"font-medium",children:"Teams"}),(0,t.jsx)("span",{className:p("ml-1 px-1.5 py-0.5 rounded border",M.isOverLimit&&"bg-red-50 text-red-700 border-red-200",M.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!M.isOverLimit&&!M.isNearLimit&&"bg-gray-50 text-gray-600 border-gray-200"),children:M.isOverLimit?"Over limit":M.isNearLimit?"Near limit":"OK"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 text-xs",children:"Used:"}),(0,t.jsxs)("span",{className:"font-medium text-right",children:[b.total_teams_used,"/",b.total_teams]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 text-xs",children:"Remaining:"}),(0,t.jsx)("span",{className:p("font-medium text-right",M.isOverLimit&&"text-red-600",M.isNearLimit&&"text-yellow-600"),children:b.total_teams_remaining})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 text-xs",children:"Usage:"}),(0,t.jsxs)("span",{className:"font-medium text-right",children:[Math.round(M.usagePercentage),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:p("h-2 rounded-full transition-all duration-300",M.isOverLimit&&"bg-red-500",M.isNearLimit&&"bg-yellow-500",!M.isOverLimit&&!M.isNearLimit&&"bg-green-500"),style:{width:"".concat(Math.min(M.usagePercentage,100),"%")}})})]})]})]}),{})})}},1633:function(e,s,l){l.d(s,{j:function(){return M}});var t=l(57437),i=l(39823),r=l(39760),n=l(92403),a=l(28595),o=l(68208),d=l(69993),c=l(58630),u=l(57400),m=l(93750),g=l(29436),p=l(44625),x=l(9775),h=l(48231),_=l(15883),f=l(41361),j=l(37527),y=l(99458),v=l(12660),b=l(88009),S=l(71916),Z=l(41169),w=l(38434),N=l(71891),I=l(55322),k=l(11429),C=l(13817),O=l(18310),E=l(60985),P=l(2265),T=l(20347),L=l(91027),A=l(24793);let{Sider:U}=C.default,M=[{groupLabel:"AI GATEWAY",items:[{key:"api-keys",page:"api-keys",label:"Virtual Keys",icon:(0,t.jsx)(n.Z,{})},{key:"llm-playground",page:"llm-playground",label:"Playground",icon:(0,t.jsx)(a.Z,{}),roles:T.LQ},{key:"models",page:"models",label:"Models + Endpoints",icon:(0,t.jsx)(o.Z,{}),roles:T.LQ},{key:"agents",page:"agents",label:"Agents",icon:(0,t.jsx)(d.Z,{}),roles:T.LQ},{key:"mcp-servers",page:"mcp-servers",label:"MCP Servers",icon:(0,t.jsx)(c.Z,{})},{key:"guardrails",page:"guardrails",label:"Guardrails",icon:(0,t.jsx)(u.Z,{}),roles:T.ZL},{key:"policies",page:"policies",label:(0,t.jsx)("span",{className:"flex items-center gap-4",children:"Policies"}),icon:(0,t.jsx)(m.Z,{}),roles:T.ZL},{key:"tools",page:"tools",label:"Tools",icon:(0,t.jsx)(c.Z,{}),children:[{key:"search-tools",page:"search-tools",label:"Search Tools",icon:(0,t.jsx)(g.Z,{})},{key:"vector-stores",page:"vector-stores",label:"Vector Stores",icon:(0,t.jsx)(p.Z,{})}]}]},{groupLabel:"OBSERVABILITY",items:[{key:"new_usage",page:"new_usage",icon:(0,t.jsx)(x.Z,{}),roles:[...T.ZL,...T.lo],label:"Usage"},{key:"logs",page:"logs",label:(0,t.jsxs)("span",{className:"flex items-center gap-4",children:["Logs ",(0,t.jsx)(L.Z,{})]}),icon:(0,t.jsx)(h.Z,{})}]},{groupLabel:"ACCESS CONTROL",items:[{key:"users",page:"users",label:"Internal Users",icon:(0,t.jsx)(_.Z,{}),roles:T.ZL},{key:"teams",page:"teams",label:"Teams",icon:(0,t.jsx)(f.Z,{})},{key:"organizations",page:"organizations",label:"Organizations",icon:(0,t.jsx)(j.Z,{}),roles:T.ZL},{key:"budgets",page:"budgets",label:"Budgets",icon:(0,t.jsx)(y.Z,{}),roles:T.ZL}]},{groupLabel:"DEVELOPER TOOLS",items:[{key:"api_ref",page:"api_ref",label:"API Reference",icon:(0,t.jsx)(v.Z,{})},{key:"model-hub-table",page:"model-hub-table",label:"AI Hub",icon:(0,t.jsx)(b.Z,{})},{key:"learning-resources",page:"learning-resources",label:"Learning Resources",icon:(0,t.jsx)(S.Z,{}),external_url:"https://models.litellm.ai/cookbook"},{key:"experimental",page:"experimental",label:"Experimental",icon:(0,t.jsx)(Z.Z,{}),children:[{key:"caching",page:"caching",label:"Caching",icon:(0,t.jsx)(p.Z,{}),roles:T.ZL},{key:"prompts",page:"prompts",label:"Prompts",icon:(0,t.jsx)(w.Z,{}),roles:T.ZL},{key:"transform-request",page:"transform-request",label:"API Playground",icon:(0,t.jsx)(v.Z,{}),roles:[...T.ZL,...T.lo]},{key:"tag-management",page:"tag-management",label:"Tag Management",icon:(0,t.jsx)(N.Z,{}),roles:T.ZL},{key:"claude-code-plugins",page:"claude-code-plugins",label:"Claude Code Plugins",icon:(0,t.jsx)(c.Z,{}),roles:T.ZL},{key:"4",page:"usage",label:"Old Usage",icon:(0,t.jsx)(x.Z,{})}]}]},{groupLabel:"SETTINGS",roles:T.ZL,items:[{key:"settings",page:"settings",label:(0,t.jsx)("span",{className:"flex items-center gap-4",children:"Settings"}),icon:(0,t.jsx)(I.Z,{}),roles:T.ZL,children:[{key:"router-settings",page:"router-settings",label:"Router Settings",icon:(0,t.jsx)(I.Z,{}),roles:T.ZL},{key:"logging-and-alerts",page:"logging-and-alerts",label:"Logging & Alerts",icon:(0,t.jsx)(I.Z,{}),roles:T.ZL},{key:"admin-panel",page:"admin-panel",label:"Admin Settings",icon:(0,t.jsx)(I.Z,{}),roles:T.ZL},{key:"cost-tracking",page:"cost-tracking",label:"Cost Tracking",icon:(0,t.jsx)(x.Z,{}),roles:T.ZL},{key:"ui-theme",page:"ui-theme",label:"UI Theme",icon:(0,t.jsx)(k.Z,{}),roles:T.ZL}]}]}];s.Z=e=>{let{setPage:s,defaultSelectedKey:l,collapsed:n=!1,enabledPagesInternalUsers:a}=e,{userId:o,accessToken:d,userRole:c}=(0,r.Z)(),{data:u}=(0,i.q)(),m=(0,P.useMemo)(()=>!!o&&!!u&&u.some(e=>{var s;return null===(s=e.members)||void 0===s?void 0:s.some(e=>e.user_id===o&&"org_admin"===e.user_role)}),[o,u]),g=e=>{let l=new URLSearchParams(window.location.search);l.set("page",e),window.history.pushState(null,"","?".concat(l.toString())),s(e)},p=e=>{let s=(0,T.tY)(c);return null!=a&&console.log("[LeftNav] Filtering with enabled pages:",{userRole:c,isAdmin:s,enabledPagesInternalUsers:a}),e.map(e=>({...e,children:e.children?p(e.children):void 0})).filter(e=>{if("organizations"===e.key){if(!(!e.roles||e.roles.includes(c)||m))return!1;if(!s&&null!=a){let s=a.includes(e.page);return console.log('[LeftNav] Page "'.concat(e.page,'" (').concat(e.key,"): ").concat(s?"VISIBLE":"HIDDEN")),s}return!0}if(e.roles&&!e.roles.includes(c))return!1;if(!s&&null!=a){if(e.children&&e.children.length>0&&e.children.some(e=>a.includes(e.page)))return console.log('[LeftNav] Parent "'.concat(e.page,'" (').concat(e.key,"): VISIBLE (has visible children)")),!0;let s=a.includes(e.page);return console.log('[LeftNav] Page "'.concat(e.page,'" (').concat(e.key,"): ").concat(s?"VISIBLE":"HIDDEN")),s}return!0})},x=(e=>{for(let s of M)for(let l of s.items){if(l.page===e)return l.key;if(l.children){let s=l.children.find(s=>s.page===e);if(s)return s.key}}return"api-keys"})(l);return(0,t.jsx)(C.default,{children:(0,t.jsxs)(U,{theme:"light",width:220,collapsed:n,collapsedWidth:80,collapsible:!0,trigger:null,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[(0,t.jsx)(O.ZP,{theme:{components:{Menu:{iconSize:15,fontSize:13,itemMarginInline:4,itemPaddingInline:8,itemHeight:30,itemBorderRadius:6,subMenuItemBorderRadius:6,groupTitleFontSize:10,groupTitleLineHeight:1.5}}},children:(0,t.jsx)(E.Z,{mode:"inline",selectedKeys:[x],defaultOpenKeys:[],inlineCollapsed:n,className:"custom-sidebar-menu",style:{borderRight:0,backgroundColor:"transparent",fontSize:"13px",paddingTop:"4px"},items:(()=>{let e=[];return M.forEach(s=>{if(s.roles&&!s.roles.includes(c))return;let l=p(s.items);0!==l.length&&e.push({type:"group",label:n?null:(0,t.jsx)("span",{style:{fontSize:"10px",fontWeight:600,color:"#6b7280",letterSpacing:"0.05em",padding:"12px 0 4px 12px",display:"block",marginBottom:"2px"},children:s.groupLabel}),children:l.map(e=>{var s;return{key:e.key,icon:e.icon,label:e.label,children:null===(s=e.children)||void 0===s?void 0:s.map(e=>({key:e.key,icon:e.icon,label:e.label,onClick:()=>{e.external_url?window.open(e.external_url,"_blank"):g(e.page)}})),onClick:e.children?void 0:()=>{e.external_url?window.open(e.external_url,"_blank"):g(e.page)}}})})}),e})()})}),(0,T.tY)(c)&&!n&&(0,t.jsx)(A.Z,{accessToken:d,width:220})]})})}}}]);