"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2019],{92019:function(e,s,t){var a=t(57437),r=t(19226),l=t(13959),i=t(45937),n=t(92403),o=t(28595),c=t(68208),d=t(9775),m=t(41361),g=t(37527),u=t(15883),x=t(12660),y=t(88009),h=t(48231),p=t(57400),f=t(58630),b=t(44625),j=t(41169),N=t(38434),v=t(71891),L=t(55322),w=t(2265),k=t(99376),Z=t(20347),S=t(79262),_=t(19250);let{Sider:z}=r.default,O=()=>{let e="ui/".replace(/^\/+|\/+$/g,""),s=e?"/".concat(e,"/"):"/";if(_.serverRootPath&&"/"!==_.serverRootPath){let e=_.serverRootPath.replace(/\/+$/,""),t=s.replace(/^\/+/,"");return"".concat(e,"/").concat(t)}return s},P=e=>{switch(e){case"api-keys":return"virtual-keys";case"llm-playground":return"test-key";case"models":return"models-and-endpoints";case"new_usage":return"usage";case"teams":return"teams";case"organizations":return"organizations";case"users":return"users";case"api_ref":return"api-reference";case"model-hub-table":return"model-hub";case"logs":return"logs";case"guardrails":return"guardrails";case"mcp-servers":return"tools/mcp-servers";case"vector-stores":return"tools/vector-stores";case"caching":return"experimental/caching";case"prompts":return"experimental/prompts";case"budgets":return"experimental/budgets";case"transform-request":return"experimental/api-playground";case"tag-management":return"experimental/tag-management";case"usage":return"experimental/old-usage";case"general-settings":return"settings/router-settings";case"settings":return"settings/logging-and-alerts";case"admin-panel":return"settings/admin-settings";case"ui-theme":return"settings/ui-theme";default:return e.replace(/^\/+/,"")}},M=e=>{let s=O(),t=P(e).replace(/^\/+|\/+$/g,"");return"".concat(s).concat(t)},C=[{key:"1",page:"api-keys",label:"Virtual Keys",icon:(0,a.jsx)(n.Z,{style:{fontSize:18}})},{key:"3",page:"llm-playground",label:"Test Key",icon:(0,a.jsx)(o.Z,{style:{fontSize:18}}),roles:Z.LQ},{key:"2",page:"models",label:"Models + Endpoints",icon:(0,a.jsx)(c.Z,{style:{fontSize:18}}),roles:Z.LQ},{key:"12",page:"new_usage",label:"Usage",icon:(0,a.jsx)(d.Z,{style:{fontSize:18}}),roles:[...Z.ZL,...Z.lo]},{key:"6",page:"teams",label:"Teams",icon:(0,a.jsx)(m.Z,{style:{fontSize:18}})},{key:"17",page:"organizations",label:"Organizations",icon:(0,a.jsx)(g.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"5",page:"users",label:"Internal Users",icon:(0,a.jsx)(u.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"14",page:"api_ref",label:"API Reference",icon:(0,a.jsx)(x.Z,{style:{fontSize:18}})},{key:"16",page:"model-hub-table",label:"Model Hub",icon:(0,a.jsx)(y.Z,{style:{fontSize:18}})},{key:"15",page:"logs",label:"Logs",icon:(0,a.jsx)(h.Z,{style:{fontSize:18}})},{key:"11",page:"guardrails",label:"Guardrails",icon:(0,a.jsx)(p.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"26",page:"tools",label:"Tools",icon:(0,a.jsx)(f.Z,{style:{fontSize:18}}),children:[{key:"18",page:"mcp-servers",label:"MCP Servers",icon:(0,a.jsx)(f.Z,{style:{fontSize:18}})},{key:"21",page:"vector-stores",label:"Vector Stores",icon:(0,a.jsx)(b.Z,{style:{fontSize:18}}),roles:Z.ZL}]},{key:"experimental",page:"experimental",label:"Experimental",icon:(0,a.jsx)(j.Z,{style:{fontSize:18}}),children:[{key:"9",page:"caching",label:"Caching",icon:(0,a.jsx)(b.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"25",page:"prompts",label:"Prompts",icon:(0,a.jsx)(N.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"10",page:"budgets",label:"Budgets",icon:(0,a.jsx)(g.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"20",page:"transform-request",label:"API Playground",icon:(0,a.jsx)(x.Z,{style:{fontSize:18}}),roles:[...Z.ZL,...Z.lo]},{key:"19",page:"tag-management",label:"Tag Management",icon:(0,a.jsx)(v.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"4",page:"usage",label:"Old Usage",icon:(0,a.jsx)(d.Z,{style:{fontSize:18}})}]},{key:"settings",page:"settings",label:"Settings",icon:(0,a.jsx)(L.Z,{style:{fontSize:18}}),roles:Z.ZL,children:[{key:"11",page:"general-settings",label:"Router Settings",icon:(0,a.jsx)(L.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"8",page:"settings",label:"Logging & Alerts",icon:(0,a.jsx)(L.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"13",page:"admin-panel",label:"Admin Settings",icon:(0,a.jsx)(L.Z,{style:{fontSize:18}}),roles:Z.ZL},{key:"14",page:"ui-theme",label:"UI Theme",icon:(0,a.jsx)(L.Z,{style:{fontSize:18}}),roles:Z.ZL}]}];s.Z=e=>{let{accessToken:s,userRole:t,defaultSelectedKey:n,collapsed:o=!1}=e,c=(0,k.useRouter)(),d=(0,k.usePathname)()||"/",m=w.useMemo(()=>C.filter(e=>!e.roles||e.roles.includes(t)).map(e=>({...e,children:e.children?e.children.filter(e=>!e.roles||e.roles.includes(t)):void 0})),[t]),g=w.useMemo(()=>{var e,s;let t=O(),a=(d.startsWith(t)?d.slice(t.length):d.replace(/^\/+/,"")).toLowerCase(),r=e=>{let s=P(e).toLowerCase();return a===s||a.startsWith("".concat(s,"/"))};for(let e of m){if(!e.children&&r(e.page))return e.key;if(e.children){for(let s of e.children)if(r(s.page))return s.key}}let l=null===(e=m.find(e=>e.page===n))||void 0===e?void 0:e.key;if(l)return l;for(let e of m)if(null===(s=e.children)||void 0===s?void 0:s.some(e=>e.page===n))return e.children.find(e=>e.page===n).key;return"1"},[d,m,n]),u=e=>{let s=M(e);c.push(s)};return(0,a.jsx)(r.default,{style:{minHeight:"100vh"},children:(0,a.jsxs)(z,{theme:"light",width:220,collapsed:o,collapsedWidth:80,collapsible:!0,trigger:null,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[(0,a.jsx)(l.ZP,{theme:{components:{Menu:{iconSize:18,fontSize:14}}},children:(0,a.jsx)(i.Z,{mode:"inline",selectedKeys:[g],defaultOpenKeys:o?[]:["llm-tools"],inlineCollapsed:o,className:"custom-sidebar-menu",style:{borderRight:0,backgroundColor:"transparent",fontSize:"14px"},items:m.map(e=>{var s;return{key:e.key,icon:e.icon,label:e.label,children:null===(s=e.children)||void 0===s?void 0:s.map(e=>({key:e.key,icon:e.icon,label:e.label,onClick:()=>u(e.page)})),onClick:e.children?void 0:()=>u(e.page)}})})}),(0,Z.tY)(t)&&!o&&(0,a.jsx)(S.Z,{accessToken:s,width:220})]})})}},79262:function(e,s,t){t.d(s,{Z:function(){return u}});var a=t(57437);t(1309);var r=t(76865),l=t(70525),i=t(95805),n=t(51817),o=t(21047);t(22135),t(40875);var c=t(49663),d=t(2265),m=t(19250);let g=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter(Boolean).join(" ")};function u(e){let{accessToken:s,width:t=220}=e,[u,x]=(0,d.useState)(!1),[y,h]=(0,d.useState)(!1),[p,f]=(0,d.useState)(null),[b,j]=(0,d.useState)(!1),[N,v]=(0,d.useState)(null);(0,d.useEffect)(()=>{(async()=>{if(s){j(!0),v(null);try{let e=await (0,m.getRemainingUsers)(s);f(e)}catch(e){console.error("Failed to fetch usage data:",e),v("Failed to load usage data")}finally{j(!1)}}})()},[s]);let{isOverLimit:L,isNearLimit:w,usagePercentage:k,userMetrics:Z,teamMetrics:S}=(e=>{if(!e)return{isOverLimit:!1,isNearLimit:!1,usagePercentage:0,userMetrics:{isOverLimit:!1,isNearLimit:!1,usagePercentage:0},teamMetrics:{isOverLimit:!1,isNearLimit:!1,usagePercentage:0}};let s=e.total_users?e.total_users_used/e.total_users*100:0,t=s>100,a=s>=80&&s<=100,r=e.total_teams?e.total_teams_used/e.total_teams*100:0,l=r>100,i=r>=80&&r<=100,n=t||l;return{isOverLimit:n,isNearLimit:(a||i)&&!n,usagePercentage:Math.max(s,r),userMetrics:{isOverLimit:t,isNearLimit:a,usagePercentage:s},teamMetrics:{isOverLimit:l,isNearLimit:i,usagePercentage:r}}})(p),_=()=>L?(0,a.jsx)(r.Z,{className:"h-3 w-3"}):w?(0,a.jsx)(l.Z,{className:"h-3 w-3"}):null;return s&&((null==p?void 0:p.total_users)!==null||(null==p?void 0:p.total_teams)!==null)?(0,a.jsx)("div",{className:"fixed bottom-4 left-4 z-50",style:{width:"".concat(Math.min(t,220),"px")},children:(0,a.jsx)(()=>y?(0,a.jsx)("button",{onClick:()=>h(!1),className:g("bg-white border border-gray-200 rounded-lg shadow-sm p-3 hover:shadow-md transition-all w-full"),title:"Show usage details",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 flex-shrink-0"}),(L||w)&&(0,a.jsx)("span",{className:"flex-shrink-0",children:_()}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium truncate",children:[p&&null!==p.total_users&&(0,a.jsxs)("span",{className:g("flex-shrink-0 px-1.5 py-0.5 rounded text-xs border",Z.isOverLimit&&"bg-red-50 text-red-700 border-red-200",Z.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!Z.isOverLimit&&!Z.isNearLimit&&"bg-gray-50 text-gray-700 border-gray-200"),children:["U: ",p.total_users_used,"/",p.total_users]}),p&&null!==p.total_teams&&(0,a.jsxs)("span",{className:g("flex-shrink-0 px-1.5 py-0.5 rounded text-xs border",S.isOverLimit&&"bg-red-50 text-red-700 border-red-200",S.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!S.isOverLimit&&!S.isNearLimit&&"bg-gray-50 text-gray-700 border-gray-200"),children:["T: ",p.total_teams_used,"/",p.total_teams]}),!p||null===p.total_users&&null===p.total_teams&&(0,a.jsx)("span",{className:"truncate",children:"Usage"})]})]})}):b?(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 w-full",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-gray-500 truncate",children:"Loading..."})]})}):N||!p?(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 group w-full",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("span",{className:"text-sm text-gray-500 truncate block",children:N||"No data"})}),(0,a.jsx)("button",{onClick:()=>h(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 rounded transition-all flex-shrink-0",title:"Minimize",children:(0,a.jsx)(o.Z,{className:"h-3 w-3 text-gray-400"})})]})}):(0,a.jsxs)("div",{className:g("bg-white border rounded-lg shadow-sm p-3 transition-all duration-200 group w-full"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"font-medium text-sm truncate",children:"Usage"})]}),(0,a.jsx)("button",{onClick:()=>h(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 rounded transition-all flex-shrink-0",title:"Minimize",children:(0,a.jsx)(o.Z,{className:"h-3 w-3 text-gray-400"})})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[null!==p.total_users&&(0,a.jsxs)("div",{className:g("space-y-1 border rounded-md p-2",Z.isOverLimit&&"border-red-200 bg-red-50",Z.isNearLimit&&"border-yellow-200 bg-yellow-50"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[(0,a.jsx)(i.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"font-medium",children:"Users"}),(0,a.jsx)("span",{className:g("ml-1 px-1.5 py-0.5 rounded border",Z.isOverLimit&&"bg-red-50 text-red-700 border-red-200",Z.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!Z.isOverLimit&&!Z.isNearLimit&&"bg-gray-50 text-gray-600 border-gray-200"),children:Z.isOverLimit?"Over limit":Z.isNearLimit?"Near limit":"OK"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Used:"}),(0,a.jsxs)("span",{className:"font-medium text-right",children:[p.total_users_used,"/",p.total_users]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Remaining:"}),(0,a.jsx)("span",{className:g("font-medium text-right",Z.isOverLimit&&"text-red-600",Z.isNearLimit&&"text-yellow-600"),children:p.total_users_remaining})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Usage:"}),(0,a.jsxs)("span",{className:"font-medium text-right",children:[Math.round(Z.usagePercentage),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:g("h-2 rounded-full transition-all duration-300",Z.isOverLimit&&"bg-red-500",Z.isNearLimit&&"bg-yellow-500",!Z.isOverLimit&&!Z.isNearLimit&&"bg-green-500"),style:{width:"".concat(Math.min(Z.usagePercentage,100),"%")}})})]}),null!==p.total_teams&&(0,a.jsxs)("div",{className:g("space-y-1 border rounded-md p-2",S.isOverLimit&&"border-red-200 bg-red-50",S.isNearLimit&&"border-yellow-200 bg-yellow-50"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"font-medium",children:"Teams"}),(0,a.jsx)("span",{className:g("ml-1 px-1.5 py-0.5 rounded border",S.isOverLimit&&"bg-red-50 text-red-700 border-red-200",S.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!S.isOverLimit&&!S.isNearLimit&&"bg-gray-50 text-gray-600 border-gray-200"),children:S.isOverLimit?"Over limit":S.isNearLimit?"Near limit":"OK"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Used:"}),(0,a.jsxs)("span",{className:"font-medium text-right",children:[p.total_teams_used,"/",p.total_teams]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Remaining:"}),(0,a.jsx)("span",{className:g("font-medium text-right",S.isOverLimit&&"text-red-600",S.isNearLimit&&"text-yellow-600"),children:p.total_teams_remaining})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 text-xs",children:"Usage:"}),(0,a.jsxs)("span",{className:"font-medium text-right",children:[Math.round(S.usagePercentage),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:g("h-2 rounded-full transition-all duration-300",S.isOverLimit&&"bg-red-500",S.isNearLimit&&"bg-yellow-500",!S.isOverLimit&&!S.isNearLimit&&"bg-green-500"),style:{width:"".concat(Math.min(S.usagePercentage,100),"%")}})})]})]})]}),{})}):null}}}]);