"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7801],{16312:function(e,l,t){t.d(l,{z:function(){return s.Z}});var s=t(20831)},9335:function(e,l,t){t.d(l,{JO:function(){return s.Z},OK:function(){return a.Z},nP:function(){return n.Z},td:function(){return o.Z},v0:function(){return r.Z},x4:function(){return i.Z}});var s=t(47323),a=t(12485),r=t(18135),o=t(35242),i=t(29706),n=t(77991)},58643:function(e,l,t){t.d(l,{OK:function(){return s.Z},nP:function(){return i.Z},td:function(){return r.Z},v0:function(){return a.Z},x4:function(){return o.Z}});var s=t(12485),a=t(18135),r=t(35242),o=t(29706),i=t(77991)},37801:function(e,l,t){t.d(l,{Z:function(){return lO}});var s=t(57437),a=t(2265),r=t(49804),o=t(67101),i=t(84264),n=t(19250),d=t(42673),c=t(9114);let m=async(e,l,t)=>{try{console.log("handling submit for formValues:",e);let l=e.model_mappings||[];if("model_mappings"in e&&delete e.model_mappings,e.model&&e.model.includes("all-wildcard")){let t=e.custom_llm_provider,s=d.fK[t]+"/*";e.model_name=s,l.push({public_name:s,litellm_model:s}),e.model=s}let t=[];for(let s of l){let l={},a={},r=s.public_name;for(let[t,r]of(l.model=s.litellm_model,e.input_cost_per_token&&(e.input_cost_per_token=Number(e.input_cost_per_token)/1e6),e.output_cost_per_token&&(e.output_cost_per_token=Number(e.output_cost_per_token)/1e6),l.model=s.litellm_model,console.log("formValues add deployment:",e),Object.entries(e)))if(""!==r&&"custom_pricing"!==t&&"pricing_model"!==t&&"cache_control"!==t){if("model_name"==t)l.model=r;else if("custom_llm_provider"==t){console.log("custom_llm_provider:",r);let e=d.fK[r];l.custom_llm_provider=e,console.log("custom_llm_provider mappingResult:",e)}else if("model"==t)continue;else if("base_model"===t)a[t]=r;else if("team_id"===t)a.team_id=r;else if("model_access_group"===t)a.access_groups=r;else if("mode"==t)console.log("placing mode in modelInfo"),a.mode=r,delete l.mode;else if("custom_model_name"===t)l.model=r;else if("litellm_extra_params"==t){console.log("litellm_extra_params:",r);let e={};if(r&&void 0!=r){try{e=JSON.parse(r)}catch(e){throw c.Z.fromBackend("Failed to parse LiteLLM Extra Params: "+e),Error("Failed to parse litellm_extra_params: "+e)}for(let[t,s]of Object.entries(e))l[t]=s}}else if("model_info_params"==t){console.log("model_info_params:",r);let e={};if(r&&void 0!=r){try{e=JSON.parse(r)}catch(e){throw c.Z.fromBackend("Failed to parse LiteLLM Extra Params: "+e),Error("Failed to parse litellm_extra_params: "+e)}for(let[l,t]of Object.entries(e))a[l]=t}}else if("input_cost_per_token"===t||"output_cost_per_token"===t||"input_cost_per_second"===t){r&&(l[t]=Number(r));continue}else l[t]=r}t.push({litellmParamsObj:l,modelInfoObj:a,modelName:r})}return t}catch(e){c.Z.fromBackend("Failed to create model: "+e)}},u=async(e,l,t,s)=>{try{let a=await m(e,l,t);if(!a||0===a.length)return;for(let e of a){let{litellmParamsObj:t,modelInfoObj:s,modelName:a}=e,r={model_name:a,litellm_params:t,model_info:s},o=await (0,n.modelCreateCall)(l,r);console.log("response for model create call: ".concat(o.data))}s&&s(),t.resetFields()}catch(e){c.Z.fromBackend("Failed to add model: "+e)}};var h=t(62490),x=t(53410),p=t(74998),g=t(93192),f=t(13634),j=t(82680),v=t(52787),_=t(89970),y=t(73002),b=t(56522),N=t(65319),w=t(47451),k=t(69410),C=t(3632);let{Link:Z}=g.default,S={[d.Cl.OpenAI]:[{key:"api_base",label:"API Base",type:"select",options:["https://api.openai.com/v1","https://eu.api.openai.com"],defaultValue:"https://api.openai.com/v1"},{key:"organization",label:"OpenAI Organization ID",placeholder:"[OPTIONAL] my-unique-org"},{key:"api_key",label:"OpenAI API Key",type:"password",required:!0}],[d.Cl.OpenAI_Text]:[{key:"api_base",label:"API Base",type:"select",options:["https://api.openai.com/v1","https://eu.api.openai.com"],defaultValue:"https://api.openai.com/v1"},{key:"organization",label:"OpenAI Organization ID",placeholder:"[OPTIONAL] my-unique-org"},{key:"api_key",label:"OpenAI API Key",type:"password",required:!0}],[d.Cl.Vertex_AI]:[{key:"vertex_project",label:"Vertex Project",placeholder:"adroit-cadet-1234..",required:!0},{key:"vertex_location",label:"Vertex Location",placeholder:"us-east-1",required:!0},{key:"vertex_credentials",label:"Vertex Credentials",required:!0,type:"upload"}],[d.Cl.AssemblyAI]:[{key:"api_base",label:"API Base",type:"select",required:!0,options:["https://api.assemblyai.com","https://api.eu.assemblyai.com"]},{key:"api_key",label:"AssemblyAI API Key",type:"password",required:!0}],[d.Cl.Azure]:[{key:"api_base",label:"API Base",placeholder:"https://...",required:!0},{key:"api_version",label:"API Version",placeholder:"2023-07-01-preview",tooltip:"By default litellm will use the latest version. If you want to use a different version, you can specify it here"},{key:"base_model",label:"Base Model",placeholder:"azure/gpt-3.5-turbo"},{key:"api_key",label:"Azure API Key",type:"password",required:!0}],[d.Cl.Azure_AI_Studio]:[{key:"api_base",label:"API Base",placeholder:"https://<test>.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-10-21",tooltip:"Enter your full Target URI from Azure Foundry here. Example:  https://litellm8397336933.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-10-21",required:!0},{key:"api_key",label:"Azure API Key",type:"password",required:!0}],[d.Cl.OpenAI_Compatible]:[{key:"api_base",label:"API Base",placeholder:"https://...",required:!0},{key:"api_key",label:"OpenAI API Key",type:"password",required:!0}],[d.Cl.Dashscope]:[{key:"api_key",label:"Dashscope API Key",type:"password",required:!0},{key:"api_base",label:"API Base",placeholder:"https://dashscope-intl.aliyuncs.com/compatible-mode/v1",defaultValue:"https://dashscope-intl.aliyuncs.com/compatible-mode/v1",required:!0,tooltip:"The base URL for your Dashscope server. Defaults to https://dashscope-intl.aliyuncs.com/compatible-mode/v1 if not specified."}],[d.Cl.OpenAI_Text_Compatible]:[{key:"api_base",label:"API Base",placeholder:"https://...",required:!0},{key:"api_key",label:"OpenAI API Key",type:"password",required:!0}],[d.Cl.Bedrock]:[{key:"aws_access_key_id",label:"AWS Access Key ID",type:"password",required:!1,tooltip:"You can provide the raw key or the environment variable (e.g. `os.environ/MY_SECRET_KEY`)."},{key:"aws_secret_access_key",label:"AWS Secret Access Key",type:"password",required:!1,tooltip:"You can provide the raw key or the environment variable (e.g. `os.environ/MY_SECRET_KEY`)."},{key:"aws_session_token",label:"AWS Session Token",type:"password",required:!1,tooltip:"Temporary credentials session token. You can provide the raw token or the environment variable (e.g. `os.environ/MY_SESSION_TOKEN`)."},{key:"aws_region_name",label:"AWS Region Name",placeholder:"us-east-1",required:!1,tooltip:"You can provide the raw key or the environment variable (e.g. `os.environ/MY_SECRET_KEY`)."},{key:"aws_session_name",label:"AWS Session Name",placeholder:"my-session",required:!1,tooltip:"Name for the AWS session. You can provide the raw value or the environment variable (e.g. `os.environ/MY_SESSION_NAME`)."},{key:"aws_profile_name",label:"AWS Profile Name",placeholder:"default",required:!1,tooltip:"AWS profile name to use for authentication. You can provide the raw value or the environment variable (e.g. `os.environ/MY_PROFILE_NAME`)."},{key:"aws_role_name",label:"AWS Role Name",placeholder:"MyRole",required:!1,tooltip:"AWS IAM role name to assume. You can provide the raw value or the environment variable (e.g. `os.environ/MY_ROLE_NAME`)."},{key:"aws_web_identity_token",label:"AWS Web Identity Token",type:"password",required:!1,tooltip:"Web identity token for OIDC authentication. You can provide the raw token or the environment variable (e.g. `os.environ/MY_WEB_IDENTITY_TOKEN`)."},{key:"aws_bedrock_runtime_endpoint",label:"AWS Bedrock Runtime Endpoint",placeholder:"https://bedrock-runtime.us-east-1.amazonaws.com",required:!1,tooltip:"Custom Bedrock runtime endpoint URL. You can provide the raw value or the environment variable (e.g. `os.environ/MY_BEDROCK_ENDPOINT`)."}],[d.Cl.SageMaker]:[{key:"aws_access_key_id",label:"AWS Access Key ID",type:"password",required:!1,tooltip:"You can provide the raw key or the environment variable (e.g. `os.environ/MY_SECRET_KEY`)."},{key:"aws_secret_access_key",label:"AWS Secret Access Key",type:"password",required:!1,tooltip:"You can provide the raw key or the environment variable (e.g. `os.environ/MY_SECRET_KEY`)."},{key:"aws_region_name",label:"AWS Region Name",placeholder:"us-east-1",required:!1,tooltip:"You can provide the raw key or the environment variable (e.g. `os.environ/MY_SECRET_KEY`)."}],[d.Cl.Ollama]:[{key:"api_base",label:"API Base",placeholder:"http://localhost:11434",defaultValue:"http://localhost:11434",required:!1,tooltip:"The base URL for your Ollama server. Defaults to http://localhost:11434 if not specified."}],[d.Cl.Anthropic]:[{key:"api_key",label:"API Key",placeholder:"sk-",type:"password",required:!0}],[d.Cl.Deepgram]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.ElevenLabs]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.Google_AI_Studio]:[{key:"api_key",label:"API Key",placeholder:"aig-",type:"password",required:!0}],[d.Cl.Groq]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.MistralAI]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.Deepseek]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.Cohere]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.Databricks]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.xAI]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.AIML]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.Cerebras]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.Sambanova]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.Perplexity]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.TogetherAI]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.Openrouter]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.FireworksAI]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.GradientAI]:[{key:"api_base",label:"GradientAI Endpoint",placeholder:"https://...",required:!1},{key:"api_key",label:"GradientAI API Key",type:"password",required:!0}],[d.Cl.Triton]:[{key:"api_key",label:"API Key",type:"password",required:!1},{key:"api_base",label:"API Base",placeholder:"http://localhost:8000/generate",required:!1}],[d.Cl.Hosted_Vllm]:[{key:"api_base",label:"API Base",placeholder:"https://...",required:!0},{key:"api_key",label:"OpenAI API Key",type:"password",required:!0}],[d.Cl.Voyage]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.JinaAI]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.VolcEngine]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.DeepInfra]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.Oracle]:[{key:"api_key",label:"API Key",type:"password",required:!0}],[d.Cl.Snowflake]:[{key:"api_key",label:"Snowflake API Key / JWT Key for Authentication",type:"password",required:!0},{key:"api_base",label:"Snowflake API Endpoint",placeholder:"https://1234567890.snowflakecomputing.com/api/v2/cortex/inference:complete",tooltip:"Enter the full endpoint with path here. Example: https://1234567890.snowflakecomputing.com/api/v2/cortex/inference:complete",required:!0}],[d.Cl.Infinity]:[{key:"api_base",label:"API Base",placeholder:"http://localhost:7997"}]};var A=e=>{let{selectedProvider:l,uploadProps:t}=e,r=d.Cl[l],o=f.Z.useFormInstance(),i=a.useMemo(()=>S[r]||[],[r]),n={name:"file",accept:".json",beforeUpload:e=>{if("application/json"===e.type){let l=new FileReader;l.onload=e=>{if(e.target){let l=e.target.result;console.log("Setting field value from JSON, length: ".concat(l.length)),o.setFieldsValue({vertex_credentials:l}),console.log("Form values after setting:",o.getFieldsValue())}},l.readAsText(e)}return!1},onChange(e){console.log("Upload onChange triggered in ProviderSpecificFields"),console.log("Current form values:",o.getFieldsValue()),"uploading"!==e.file.status&&console.log(e.file,e.fileList)}};return(0,s.jsx)(s.Fragment,{children:i.map(e=>{var l;return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(f.Z.Item,{label:e.label,name:e.key,rules:e.required?[{required:!0,message:"Required"}]:void 0,tooltip:e.tooltip,className:"vertex_credentials"===e.key?"mb-0":void 0,children:"select"===e.type?(0,s.jsx)(v.default,{placeholder:e.placeholder,defaultValue:e.defaultValue,children:null===(l=e.options)||void 0===l?void 0:l.map(e=>(0,s.jsx)(v.default.Option,{value:e,children:e},e))}):"upload"===e.type?(0,s.jsx)(N.default,{...n,onChange:l=>{(null==t?void 0:t.onChange)&&t.onChange(l),setTimeout(()=>{let l=o.getFieldValue(e.key);console.log("".concat(e.key," value after upload:"),JSON.stringify(l))},500)},children:(0,s.jsx)(y.ZP,{icon:(0,s.jsx)(C.Z,{}),children:"Click to Upload"})}):(0,s.jsx)(b.o,{placeholder:e.placeholder,type:"password"===e.type?"password":"text"})}),"vertex_credentials"===e.key&&(0,s.jsx)(w.Z,{children:(0,s.jsx)(k.Z,{children:(0,s.jsx)(b.x,{className:"mb-3 mt-1",children:"Give a gcp service account(.json file)"})})}),"base_model"===e.key&&(0,s.jsxs)(w.Z,{children:[(0,s.jsx)(k.Z,{span:10}),(0,s.jsx)(k.Z,{span:10,children:(0,s.jsxs)(b.x,{className:"mb-2",children:["The actual model your azure deployment uses. Used for accurate cost tracking. Select name from"," ",(0,s.jsx)(Z,{href:"https://github.com/BerriAI/litellm/blob/main/model_prices_and_context_window.json",target:"_blank",children:"here"})]})})]})]},e.key)})})},I=t(31283);let{Title:E,Link:P}=g.default;var M=e=>{let{isVisible:l,onCancel:t,onAddCredential:r,onUpdateCredential:o,uploadProps:i,addOrEdit:n,existingCredential:c}=e,[m]=f.Z.useForm(),[u,h]=(0,a.useState)(d.Cl.OpenAI),[x,p]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{c&&(m.setFieldsValue({credential_name:c.credential_name,custom_llm_provider:c.credential_info.custom_llm_provider,api_base:c.credential_values.api_base,api_version:c.credential_values.api_version,base_model:c.credential_values.base_model,api_key:c.credential_values.api_key}),h(c.credential_info.custom_llm_provider))},[c]),(0,s.jsx)(j.Z,{title:"add"===n?"Add New Credential":"Edit Credential",visible:l,onCancel:()=>{t(),m.resetFields()},footer:null,width:600,children:(0,s.jsxs)(f.Z,{form:m,onFinish:e=>{let l=Object.entries(e).reduce((e,l)=>{let[t,s]=l;return""!==s&&null!=s&&(e[t]=s),e},{});"add"===n?r(l):o(l),m.resetFields()},layout:"vertical",children:[(0,s.jsx)(f.Z.Item,{label:"Credential Name:",name:"credential_name",rules:[{required:!0,message:"Credential name is required"}],initialValue:null==c?void 0:c.credential_name,children:(0,s.jsx)(I.o,{placeholder:"Enter a friendly name for these credentials",disabled:null!=c&&!!c.credential_name})}),(0,s.jsx)(f.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Provider:",name:"custom_llm_provider",tooltip:"Helper to auto-populate provider specific fields",children:(0,s.jsx)(v.default,{showSearch:!0,onChange:e=>{h(e),m.setFieldValue("custom_llm_provider",e)},children:Object.entries(d.Cl).map(e=>{let[l,t]=e;return(0,s.jsx)(v.default.Option,{value:l,children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("img",{src:d.cd[t],alt:"".concat(l," logo"),className:"w-5 h-5",onError:e=>{let l=e.target,s=l.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,l)}}}),(0,s.jsx)("span",{children:t})]})},l)})})}),(0,s.jsx)(A,{selectedProvider:u,uploadProps:i}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(_.Z,{title:"Get help on our github",children:(0,s.jsx)(P,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.ZP,{onClick:()=>{t(),m.resetFields()},style:{marginRight:10},children:"Cancel"}),(0,s.jsx)(y.ZP,{htmlType:"submit",children:"add"===n?"Add Credential":"Update Credential"})]})]})]})})},F=t(16312),T=t(88532),L=e=>{let{isVisible:l,onCancel:t,onConfirm:r,credentialName:o}=e,[i,n]=(0,a.useState)(""),d=i===o,c=()=>{n(""),t()};return(0,s.jsx)(j.Z,{title:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(T.Z,{className:"h-6 w-6 text-red-600 mr-2"}),"Delete Credential"]}),open:l,footer:null,onCancel:c,closable:!0,destroyOnClose:!0,maskClosable:!1,children:(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-100 rounded-md mb-5",children:[(0,s.jsx)("div",{className:"text-red-500 mt-0.5",children:(0,s.jsx)(T.Z,{className:"h-5 w-5"})}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-base font-medium text-red-600",children:"This action cannot be undone and may break existing integrations."})})]}),(0,s.jsxs)("div",{className:"mb-5",children:[(0,s.jsxs)("label",{className:"block text-base font-medium text-gray-700 mb-2",children:["Type ",(0,s.jsxs)("span",{className:"underline italic",children:["'",o,"'"]})," to confirm deletion:"]}),(0,s.jsx)("input",{type:"text",value:i,onChange:e=>n(e.target.value),placeholder:"Enter credential name exactly",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",autoFocus:!0})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(F.z,{onClick:c,variant:"secondary",className:"mr-2",children:"Cancel"}),(0,s.jsx)(F.z,{onClick:()=>{d&&(n(""),r())},color:"red",className:"focus:ring-red-500",disabled:!d,children:"Delete Credential"})]})]})})},R=e=>{let{accessToken:l,uploadProps:t,credentialList:r,fetchCredentials:o}=e,[i,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)(!1),[g,j]=(0,a.useState)(null),[v,_]=(0,a.useState)(null),[y]=f.Z.useForm(),b=["credential_name","custom_llm_provider"],N=async e=>{if(!l)return;let t=Object.entries(e).filter(e=>{let[l]=e;return!b.includes(l)}).reduce((e,l)=>{let[t,s]=l;return{...e,[t]:s}},{}),s={credential_name:e.credential_name,credential_values:t,credential_info:{custom_llm_provider:e.custom_llm_provider}};await (0,n.credentialUpdateCall)(l,e.credential_name,s),c.Z.success("Credential updated successfully"),u(!1),o(l)},w=async e=>{if(!l)return;let t=Object.entries(e).filter(e=>{let[l]=e;return!b.includes(l)}).reduce((e,l)=>{let[t,s]=l;return{...e,[t]:s}},{}),s={credential_name:e.credential_name,credential_values:t,credential_info:{custom_llm_provider:e.custom_llm_provider}};await (0,n.credentialCreateCall)(l,s),c.Z.success("Credential added successfully"),d(!1),o(l)};(0,a.useEffect)(()=>{l&&o(l)},[l]);let k=e=>{let l={openai:"blue",azure:"indigo",anthropic:"purple",default:"gray"},t=l[e.toLowerCase()]||l.default;return(0,s.jsx)(h.Ct,{color:t,size:"xs",children:e})},C=async e=>{l&&(await (0,n.credentialDeleteCall)(l,e),c.Z.success("Credential deleted successfully"),_(null),o(l))},Z=e=>{_(e)};return(0,s.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsx)(h.xv,{children:"Configured credentials for different AI providers. Add and manage your API credentials."})}),(0,s.jsx)(h.Zb,{children:(0,s.jsxs)(h.iA,{children:[(0,s.jsx)(h.ss,{children:(0,s.jsxs)(h.SC,{children:[(0,s.jsx)(h.xs,{children:"Credential Name"}),(0,s.jsx)(h.xs,{children:"Provider"}),(0,s.jsx)(h.xs,{children:"Description"})]})}),(0,s.jsx)(h.RM,{children:r&&0!==r.length?r.map((e,l)=>{var t,a;return(0,s.jsxs)(h.SC,{children:[(0,s.jsx)(h.pj,{children:e.credential_name}),(0,s.jsx)(h.pj,{children:k((null===(t=e.credential_info)||void 0===t?void 0:t.custom_llm_provider)||"-")}),(0,s.jsx)(h.pj,{children:(null===(a=e.credential_info)||void 0===a?void 0:a.description)||"-"}),(0,s.jsxs)(h.pj,{children:[(0,s.jsx)(h.zx,{icon:x.Z,variant:"light",size:"sm",onClick:()=>{j(e),u(!0)}}),(0,s.jsx)(h.zx,{icon:p.Z,variant:"light",size:"sm",onClick:()=>Z(e.credential_name)})]})]},l)}):(0,s.jsx)(h.SC,{children:(0,s.jsx)(h.pj,{colSpan:4,className:"text-center py-4 text-gray-500",children:"No credentials configured"})})})]})}),(0,s.jsx)(h.zx,{onClick:()=>d(!0),className:"mt-4",children:"Add Credential"}),i&&(0,s.jsx)(M,{onAddCredential:w,isVisible:i,onCancel:()=>d(!1),uploadProps:t,addOrEdit:"add",onUpdateCredential:N,existingCredential:null}),m&&(0,s.jsx)(M,{onAddCredential:w,isVisible:m,existingCredential:g,onUpdateCredential:N,uploadProps:t,onCancel:()=>u(!1),addOrEdit:"edit"}),v&&(0,s.jsx)(L,{isVisible:!0,onCancel:()=>{_(null)},onConfirm:()=>C(v),credentialName:v})]})};let O=e=>{var l;return(null==e?void 0:null===(l=e.model_info)||void 0===l?void 0:l.team_public_model_name)?e.model_info.team_public_model_name:(null==e?void 0:e.model_name)||"-"};var D=t(9335),V=t(23628),q=t(33293),z=t(20831),B=t(12514),K=t(12485),U=t(18135),G=t(35242),H=t(29706),J=t(77991),W=t(49566),Y=t(96761),$=t(24199),Q=t(10900),X=t(45589),ee=t(64482),el=t(15424);let{Title:et,Link:es}=g.default;var ea=e=>{let{isVisible:l,onCancel:t,onAddCredential:a,existingCredential:r,setIsCredentialModalOpen:o}=e,[i]=f.Z.useForm();return console.log("existingCredential in add credentials tab: ".concat(JSON.stringify(r))),(0,s.jsx)(j.Z,{title:"Reuse Credentials",visible:l,onCancel:()=>{t(),i.resetFields()},footer:null,width:600,children:(0,s.jsxs)(f.Z,{form:i,onFinish:e=>{a(e),i.resetFields(),o(!1)},layout:"vertical",children:[(0,s.jsx)(f.Z.Item,{label:"Credential Name:",name:"credential_name",rules:[{required:!0,message:"Credential name is required"}],initialValue:null==r?void 0:r.credential_name,children:(0,s.jsx)(I.o,{placeholder:"Enter a friendly name for these credentials"})}),Object.entries((null==r?void 0:r.credential_values)||{}).map(e=>{let[l,t]=e;return(0,s.jsx)(f.Z.Item,{label:l,name:l,initialValue:t,children:(0,s.jsx)(I.o,{placeholder:"Enter ".concat(l),disabled:!0})},l)}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(_.Z,{title:"Get help on our github",children:(0,s.jsx)(es,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(y.ZP,{onClick:()=>{t(),i.resetFields()},style:{marginRight:10},children:"Cancel"}),(0,s.jsx)(y.ZP,{htmlType:"submit",children:"Reuse Credentials"})]})]})]})})},er=t(63709),eo=t(45246),ei=t(96473);let{Text:en}=g.default;var ed=e=>{let{form:l,showCacheControl:t,onCacheControlChange:a}=e,r=e=>{let t=l.getFieldValue("litellm_extra_params");try{let s=t?JSON.parse(t):{};e.length>0?s.cache_control_injection_points=e:delete s.cache_control_injection_points,Object.keys(s).length>0?l.setFieldValue("litellm_extra_params",JSON.stringify(s,null,2)):l.setFieldValue("litellm_extra_params","")}catch(e){console.error("Error updating cache control points:",e)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z.Item,{label:"Cache Control Injection Points",name:"cache_control",valuePropName:"checked",className:"mb-4",tooltip:"Tell litellm where to inject cache control checkpoints. You can specify either by role (to apply to all messages of that role) or by specific message index.",children:(0,s.jsx)(er.Z,{onChange:a,className:"bg-gray-600"})}),t&&(0,s.jsxs)("div",{className:"ml-6 pl-4 border-l-2 border-gray-200",children:[(0,s.jsx)(en,{className:"text-sm text-gray-500 block mb-4",children:"Providers like Anthropic, Bedrock API require users to specify where to inject cache control checkpoints, litellm can automatically add them for you as a cost saving feature."}),(0,s.jsx)(f.Z.List,{name:"cache_control_injection_points",initialValue:[{location:"message"}],children:(e,t)=>{let{add:a,remove:o}=t;return(0,s.jsxs)(s.Fragment,{children:[e.map((t,a)=>(0,s.jsxs)("div",{className:"flex items-center mb-4 gap-4",children:[(0,s.jsx)(f.Z.Item,{...t,label:"Type",name:[t.name,"location"],initialValue:"message",className:"mb-0",style:{width:"180px"},children:(0,s.jsx)(v.default,{disabled:!0,options:[{value:"message",label:"Message"}]})}),(0,s.jsx)(f.Z.Item,{...t,label:"Role",name:[t.name,"role"],className:"mb-0",style:{width:"180px"},tooltip:"LiteLLM will mark all messages of this role as cacheable",children:(0,s.jsx)(v.default,{placeholder:"Select a role",allowClear:!0,options:[{value:"user",label:"User"},{value:"system",label:"System"},{value:"assistant",label:"Assistant"}],onChange:()=>{r(l.getFieldValue("cache_control_points"))}})}),(0,s.jsx)(f.Z.Item,{...t,label:"Index",name:[t.name,"index"],className:"mb-0",style:{width:"180px"},tooltip:"(Optional) If set litellm will mark the message at this index as cacheable",children:(0,s.jsx)($.Z,{type:"number",placeholder:"Optional",step:1,min:0,onChange:()=>{r(l.getFieldValue("cache_control_points"))}})}),e.length>1&&(0,s.jsx)(eo.Z,{className:"text-red-500 cursor-pointer text-lg ml-12",onClick:()=>{o(t.name),setTimeout(()=>{r(l.getFieldValue("cache_control_points"))},0)}})]},t.key)),(0,s.jsx)(f.Z.Item,{children:(0,s.jsxs)("button",{type:"button",className:"flex items-center justify-center w-full border border-dashed border-gray-300 py-2 px-4 text-gray-600 hover:text-blue-600 hover:border-blue-300 transition-all rounded",onClick:()=>a(),children:[(0,s.jsx)(ei.Z,{className:"mr-2"}),"Add Injection Point"]})})]})}})]})]})},ec=t(30401),em=t(78867),eu=t(59872),eh=t(51601),ex=t(44851),ep=t(67960),eg=t(20577),ef=t(70464),ej=t(26349),ev=t(92280);let{TextArea:e_}=ee.default,{Panel:ey}=ex.default;var eb=e=>{let{modelInfo:l,value:t,onChange:r}=e,[o,i]=(0,a.useState)([]),[n,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)([]);(0,a.useEffect)(()=>{if(null==t?void 0:t.routes){let e=t.routes.map((e,l)=>({id:e.id||"route-".concat(l,"-").concat(Date.now()),model:e.name||e.model||"",utterances:e.utterances||[],description:e.description||"",score_threshold:e.score_threshold||.5}));i(e),m(e.map(e=>e.id))}else i([]),m([])},[t]);let u=e=>{let l=o.filter(l=>l.id!==e);i(l),x(l),m(l=>l.filter(l=>l!==e))},h=(e,l,t)=>{let s=o.map(s=>s.id===e?{...s,[l]:t}:s);i(s),x(s)},x=e=>{let l={routes:e.map(e=>({name:e.model,utterances:e.utterances,description:e.description,score_threshold:e.score_threshold}))};null==r||r(l)},p=l.map(e=>({value:e.model_group,label:e.model_group}));return(0,s.jsxs)("div",{className:"w-full max-w-none",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ev.x,{className:"text-lg font-semibold",children:"Routes Configuration"}),(0,s.jsx)(_.Z,{title:"Configure routing logic to automatically select the best model based on user input patterns",children:(0,s.jsx)(el.Z,{className:"text-gray-400"})})]}),(0,s.jsx)(y.ZP,{type:"primary",icon:(0,s.jsx)(ei.Z,{}),onClick:()=>{let e="route-".concat(Date.now()),l=[...o,{id:e,model:"",utterances:[],description:"",score_threshold:.5}];i(l),x(l),m(l=>[...l,e])},className:"bg-blue-600 hover:bg-blue-700",children:"Add Route"})]}),0===o.length?(0,s.jsx)("div",{className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200 mb-6",children:(0,s.jsx)(ev.x,{children:"No routes configured. Click “Add Route” to get started."})}):(0,s.jsx)("div",{className:"space-y-3 mb-6 w-full",children:o.map((e,l)=>(0,s.jsx)(ep.Z,{className:"border border-gray-200 shadow-sm w-full",bodyStyle:{padding:0},children:(0,s.jsx)(ex.default,{ghost:!0,expandIcon:e=>{let{isActive:l}=e;return(0,s.jsx)(ef.Z,{rotate:l?180:0})},activeKey:c,onChange:e=>m(Array.isArray(e)?e:[e].filter(Boolean)),items:[{key:e.id,label:(0,s.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,s.jsxs)(ev.x,{className:"font-medium text-base",children:["Route ",l+1,": ",e.model||"Unnamed"]}),(0,s.jsx)(y.ZP,{type:"text",danger:!0,icon:(0,s.jsx)(ej.Z,{}),onClick:l=>{l.stopPropagation(),u(e.id)},className:"mr-2"})]}),children:(0,s.jsxs)("div",{className:"px-6 pb-6 w-full",children:[(0,s.jsxs)("div",{className:"mb-4 w-full",children:[(0,s.jsx)(ev.x,{className:"text-sm font-medium mb-2 block",children:"Model"}),(0,s.jsx)(v.default,{value:e.model,onChange:l=>h(e.id,"model",l),placeholder:"Select model",showSearch:!0,style:{width:"100%"},options:p})]}),(0,s.jsxs)("div",{className:"mb-4 w-full",children:[(0,s.jsx)(ev.x,{className:"text-sm font-medium mb-2 block",children:"Description"}),(0,s.jsx)(e_,{value:e.description,onChange:l=>h(e.id,"description",l.target.value),placeholder:"Describe when this route should be used...",rows:2,style:{width:"100%"}})]}),(0,s.jsxs)("div",{className:"mb-4 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(ev.x,{className:"text-sm font-medium",children:"Score Threshold"}),(0,s.jsx)(_.Z,{title:"Minimum similarity score to route to this model (0-1)",children:(0,s.jsx)(el.Z,{className:"text-gray-400"})})]}),(0,s.jsx)(eg.Z,{value:e.score_threshold,onChange:l=>h(e.id,"score_threshold",l||0),min:0,max:1,step:.1,style:{width:"100%"},placeholder:"0.5"})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(ev.x,{className:"text-sm font-medium",children:"Example Utterances"}),(0,s.jsx)(_.Z,{title:"Training examples for this route. Type an utterance and press Enter to add it.",children:(0,s.jsx)(el.Z,{className:"text-gray-400"})})]}),(0,s.jsx)(ev.x,{className:"text-xs text-gray-500 mb-2",children:"Type an utterance and press Enter to add it. You can also paste multiple lines."}),(0,s.jsx)(v.default,{mode:"tags",value:e.utterances,onChange:l=>h(e.id,"utterances",l),placeholder:"Type an utterance and press Enter...",style:{width:"100%"},tokenSeparators:["\n"],maxTagCount:"responsive",allowClear:!0})]})]})}]})},e.id))}),(0,s.jsxs)("div",{className:"border-t pt-6 w-full",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 w-full",children:[(0,s.jsx)(ev.x,{className:"text-lg font-semibold",children:"JSON Preview"}),(0,s.jsx)(y.ZP,{type:"link",onClick:()=>d(!n),className:"text-blue-600 p-0",children:n?"Hide":"Show"})]}),n&&(0,s.jsx)(ep.Z,{className:"bg-gray-50 w-full",children:(0,s.jsx)("pre",{className:"text-sm overflow-auto max-h-64 w-full",children:JSON.stringify({routes:o.map(e=>({name:e.model,utterances:e.utterances,description:e.description,score_threshold:e.score_threshold}))},null,2)})})]})]})},eN=e=>{let{isVisible:l,onCancel:t,onSuccess:r,modelData:o,accessToken:i,userRole:d}=e,[m]=f.Z.useForm(),[u,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)([]),[g,_]=(0,a.useState)([]),[N,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[Z,S]=(0,a.useState)(null);(0,a.useEffect)(()=>{l&&o&&A()},[l,o]),(0,a.useEffect)(()=>{let e=async()=>{if(i)try{let e=await (0,n.modelAvailableCall)(i,"","",!1,null,!0,!0);p(e.data.map(e=>e.id))}catch(e){console.error("Error fetching model access groups:",e)}},t=async()=>{if(i)try{let e=await (0,eh.p)(i);_(e)}catch(e){console.error("Error fetching model info:",e)}};l&&(e(),t())},[l,i]);let A=()=>{try{var e,l,t,s,a,r;let i=null;(null===(e=o.litellm_params)||void 0===e?void 0:e.auto_router_config)&&(i="string"==typeof o.litellm_params.auto_router_config?JSON.parse(o.litellm_params.auto_router_config):o.litellm_params.auto_router_config),S(i),m.setFieldsValue({auto_router_name:o.model_name,auto_router_default_model:(null===(l=o.litellm_params)||void 0===l?void 0:l.auto_router_default_model)||"",auto_router_embedding_model:(null===(t=o.litellm_params)||void 0===t?void 0:t.auto_router_embedding_model)||"",model_access_group:(null===(s=o.model_info)||void 0===s?void 0:s.access_groups)||[]});let n=new Set(g.map(e=>e.model_group));w(!n.has(null===(a=o.litellm_params)||void 0===a?void 0:a.auto_router_default_model)),C(!n.has(null===(r=o.litellm_params)||void 0===r?void 0:r.auto_router_embedding_model))}catch(e){console.error("Error parsing auto router config:",e),c.Z.fromBackend("Error loading auto router configuration")}},I=async()=>{try{h(!0);let e=await m.validateFields(),l={...o.litellm_params,auto_router_config:JSON.stringify(Z),auto_router_default_model:e.auto_router_default_model,auto_router_embedding_model:e.auto_router_embedding_model||void 0},s={...o.model_info,access_groups:e.model_access_group||[]},a={model_name:e.auto_router_name,litellm_params:l,model_info:s};await (0,n.modelPatchUpdateCall)(i,a,o.model_info.id);let d={...o,model_name:e.auto_router_name,litellm_params:l,model_info:s};c.Z.success("Auto router configuration updated successfully"),r(d),t()}catch(e){console.error("Error updating auto router:",e),c.Z.fromBackend("Failed to update auto router configuration")}finally{h(!1)}},E=g.map(e=>({value:e.model_group,label:e.model_group}));return(0,s.jsx)(j.Z,{title:"Edit Auto Router Configuration",open:l,onCancel:t,footer:[(0,s.jsx)(y.ZP,{onClick:t,children:"Cancel"},"cancel"),(0,s.jsx)(y.ZP,{loading:u,onClick:I,children:"Save Changes"},"submit")],width:1e3,destroyOnClose:!0,children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(b.x,{className:"text-gray-600",children:"Edit the auto router configuration including routing logic, default models, and access settings."}),(0,s.jsxs)(f.Z,{form:m,layout:"vertical",className:"space-y-4",children:[(0,s.jsx)(f.Z.Item,{label:"Auto Router Name",name:"auto_router_name",rules:[{required:!0,message:"Auto router name is required"}],children:(0,s.jsx)(b.o,{placeholder:"e.g., auto_router_1, smart_routing"})}),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(eb,{modelInfo:g,value:Z,onChange:e=>{S(e)}})}),(0,s.jsx)(f.Z.Item,{label:"Default Model",name:"auto_router_default_model",rules:[{required:!0,message:"Default model is required"}],children:(0,s.jsx)(v.default,{placeholder:"Select a default model",onChange:e=>{w("custom"===e)},options:[...E,{value:"custom",label:"Enter custom model name"}],showSearch:!0})}),(0,s.jsx)(f.Z.Item,{label:"Embedding Model",name:"auto_router_embedding_model",children:(0,s.jsx)(v.default,{placeholder:"Select an embedding model (optional)",onChange:e=>{C("custom"===e)},options:[...E,{value:"custom",label:"Enter custom model name"}],showSearch:!0,allowClear:!0})}),"Admin"===d&&(0,s.jsx)(f.Z.Item,{label:"Model Access Groups",name:"model_access_group",tooltip:"Control who can access this auto router",children:(0,s.jsx)(v.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],options:x.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})})]})]})})};function ew(e){var l,t,r,m,u,h,x,g,b,N,w,k,C,Z,S,A,I,E,P,M,F,T,L,R,D,V,q,et;let{modelId:es,onClose:er,modelData:eo,accessToken:ei,userID:en,userRole:eh,editModel:ex,setEditModalVisible:ep,setSelectedModel:eg,onModelUpdate:ef,modelAccessGroups:ej}=e,[ev]=f.Z.useForm(),[e_,ey]=(0,a.useState)(null),[eb,ew]=(0,a.useState)(!1),[ek,eC]=(0,a.useState)(!1),[eZ,eS]=(0,a.useState)(!1),[eA,eI]=(0,a.useState)(!1),[eE,eP]=(0,a.useState)(!1),[eM,eF]=(0,a.useState)(null),[eT,eL]=(0,a.useState)(!1),[eR,eO]=(0,a.useState)({}),[eD,eV]=(0,a.useState)(!1),[eq,ez]=(0,a.useState)([]),eB="Admin"===eh||(null==eo?void 0:null===(l=eo.model_info)||void 0===l?void 0:l.created_by)===en,eK=(null==eo?void 0:null===(t=eo.litellm_params)||void 0===t?void 0:t.auto_router_config)!=null,eU=(null==eo?void 0:null===(r=eo.litellm_params)||void 0===r?void 0:r.litellm_credential_name)!=null&&(null==eo?void 0:null===(m=eo.litellm_params)||void 0===m?void 0:m.litellm_credential_name)!=void 0;console.log("usingExistingCredential, ",eU),console.log("modelData.litellm_params.litellm_credential_name, ",null==eo?void 0:null===(u=eo.litellm_params)||void 0===u?void 0:u.litellm_credential_name),(0,a.useEffect)(()=>{let e=async()=>{var e,l,t,s,a,r,o;if(!ei)return;let i=await (0,n.modelInfoV1Call)(ei,es);console.log("modelInfoResponse, ",i);let d=i.data[0];d&&!d.litellm_model_name&&(d={...d,litellm_model_name:null!==(o=null!==(r=null!==(a=null==d?void 0:null===(l=d.litellm_params)||void 0===l?void 0:l.litellm_model_name)&&void 0!==a?a:null==d?void 0:null===(t=d.litellm_params)||void 0===t?void 0:t.model)&&void 0!==r?r:null==d?void 0:null===(s=d.model_info)||void 0===s?void 0:s.key)&&void 0!==o?o:null}),ey(d),(null==d?void 0:null===(e=d.litellm_params)||void 0===e?void 0:e.cache_control_injection_points)&&eL(!0)},l=async()=>{if(ei)try{let e=(await (0,n.getGuardrailsList)(ei)).guardrails.map(e=>e.guardrail_name);ez(e)}catch(e){console.error("Failed to fetch guardrails:",e)}};(async()=>{if(console.log("accessToken, ",ei),!ei||eU)return;let e=await (0,n.credentialGetCall)(ei,null,es);console.log("existingCredentialResponse, ",e),eF({credential_name:e.credential_name,credential_values:e.credential_values,credential_info:e.credential_info})})(),e(),l()},[ei,es]);let eG=async e=>{var l;if(console.log("values, ",e),!ei)return;let t={credential_name:e.credential_name,model_id:es,credential_info:{custom_llm_provider:null===(l=e_.litellm_params)||void 0===l?void 0:l.custom_llm_provider}};c.Z.info("Storing credential.."),console.log("credentialResponse, ",await (0,n.credentialCreateCall)(ei,t)),c.Z.success("Credential stored successfully")},eH=async e=>{try{var l;let t;if(!ei)return;eI(!0),console.log("values.model_name, ",e.model_name);let s={...e_.litellm_params,model:e.litellm_model_name,api_base:e.api_base,custom_llm_provider:e.custom_llm_provider,organization:e.organization,tpm:e.tpm,rpm:e.rpm,max_retries:e.max_retries,timeout:e.timeout,stream_timeout:e.stream_timeout,input_cost_per_token:e.input_cost/1e6,output_cost_per_token:e.output_cost/1e6};e.guardrails&&(s.guardrails=e.guardrails),e.cache_control&&(null===(l=e.cache_control_injection_points)||void 0===l?void 0:l.length)>0?s.cache_control_injection_points=e.cache_control_injection_points:delete s.cache_control_injection_points;try{t=e.model_info?JSON.parse(e.model_info):eo.model_info,e.model_access_group&&(t={...t,access_groups:e.model_access_group})}catch(e){c.Z.fromBackend("Invalid JSON in Model Info");return}let a={model_name:e.model_name,litellm_params:s,model_info:t};await (0,n.modelPatchUpdateCall)(ei,a,es);let r={...e_,model_name:e.model_name,litellm_model_name:e.litellm_model_name,litellm_params:s,model_info:t};ey(r),ef&&ef(r),c.Z.success("Model settings updated successfully"),eS(!1),eP(!1)}catch(e){console.error("Error updating model:",e),c.Z.fromBackend("Failed to update model settings")}finally{eI(!1)}};if(!eo)return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)(z.Z,{icon:Q.Z,variant:"light",onClick:er,className:"mb-4",children:"Back to Models"}),(0,s.jsx)(i.Z,{children:"Model not found"})]});let eJ=async()=>{try{if(!ei)return;await (0,n.modelDeleteCall)(ei,es),c.Z.success("Model deleted successfully"),ef&&ef({deleted:!0,model_info:{id:es}}),er()}catch(e){console.error("Error deleting the model:",e),c.Z.fromBackend("Failed to delete model")}},eW=async(e,l)=>{await (0,eu.vQ)(e)&&(eO(e=>({...e,[l]:!0})),setTimeout(()=>{eO(e=>({...e,[l]:!1}))},2e3))};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(z.Z,{icon:Q.Z,variant:"light",onClick:er,className:"mb-4",children:"Back to Models"}),(0,s.jsxs)(Y.Z,{children:["Public Model Name: ",O(eo)]}),(0,s.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,s.jsx)(i.Z,{className:"text-gray-500 font-mono",children:eo.model_info.id}),(0,s.jsx)(y.ZP,{type:"text",size:"small",icon:eR["model-id"]?(0,s.jsx)(ec.Z,{size:12}):(0,s.jsx)(em.Z,{size:12}),onClick:()=>eW(eo.model_info.id,"model-id"),className:"left-2 z-10 transition-all duration-200 ".concat(eR["model-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:["Admin"===eh&&(0,s.jsx)(z.Z,{icon:X.Z,variant:"secondary",onClick:()=>eC(!0),className:"flex items-center",children:"Re-use Credentials"}),eB&&(0,s.jsx)(z.Z,{icon:p.Z,variant:"secondary",onClick:()=>ew(!0),className:"flex items-center",children:"Delete Model"})]})]}),(0,s.jsxs)(U.Z,{children:[(0,s.jsxs)(G.Z,{className:"mb-6",children:[(0,s.jsx)(K.Z,{children:"Overview"}),(0,s.jsx)(K.Z,{children:"Raw JSON"})]}),(0,s.jsxs)(J.Z,{children:[(0,s.jsxs)(H.Z,{children:[(0,s.jsxs)(o.Z,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6 mb-6",children:[(0,s.jsxs)(B.Z,{children:[(0,s.jsx)(i.Z,{children:"Provider"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[eo.provider&&(0,s.jsx)("img",{src:(0,d.dr)(eo.provider).logo,alt:"".concat(eo.provider," logo"),className:"w-4 h-4",onError:e=>{let l=e.target,t=l.parentElement;if(t){var s;let e=document.createElement("div");e.className="w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=(null===(s=eo.provider)||void 0===s?void 0:s.charAt(0))||"-",t.replaceChild(e,l)}}}),(0,s.jsx)(Y.Z,{children:eo.provider||"Not Set"})]})]}),(0,s.jsxs)(B.Z,{children:[(0,s.jsx)(i.Z,{children:"LiteLLM Model"}),(0,s.jsx)("div",{className:"mt-2 overflow-hidden",children:(0,s.jsx)(_.Z,{title:eo.litellm_model_name||"Not Set",children:(0,s.jsx)("div",{className:"break-all text-sm font-medium leading-relaxed cursor-pointer",children:eo.litellm_model_name||"Not Set"})})})]}),(0,s.jsxs)(B.Z,{children:[(0,s.jsx)(i.Z,{children:"Pricing"}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)(i.Z,{children:["Input: $",eo.input_cost,"/1M tokens"]}),(0,s.jsxs)(i.Z,{children:["Output: $",eo.output_cost,"/1M tokens"]})]})]})]}),(0,s.jsxs)("div",{className:"mb-6 text-sm text-gray-500 flex items-center gap-x-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Created At"," ",eo.model_info.created_at?new Date(eo.model_info.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not Set"]}),(0,s.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Created By ",eo.model_info.created_by||"Not Set"]})]}),(0,s.jsxs)(B.Z,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(Y.Z,{children:"Model Settings"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[eK&&eB&&!eE&&(0,s.jsx)(z.Z,{variant:"primary",onClick:()=>eV(!0),className:"flex items-center",children:"Edit Auto Router"}),eB&&!eE&&(0,s.jsx)(z.Z,{variant:"secondary",onClick:()=>eP(!0),className:"flex items-center",children:"Edit Model"})]})]}),e_?(0,s.jsx)(f.Z,{form:ev,onFinish:eH,initialValues:{model_name:e_.model_name,litellm_model_name:e_.litellm_model_name,api_base:e_.litellm_params.api_base,custom_llm_provider:e_.litellm_params.custom_llm_provider,organization:e_.litellm_params.organization,tpm:e_.litellm_params.tpm,rpm:e_.litellm_params.rpm,max_retries:e_.litellm_params.max_retries,timeout:e_.litellm_params.timeout,stream_timeout:e_.litellm_params.stream_timeout,input_cost:e_.litellm_params.input_cost_per_token?1e6*e_.litellm_params.input_cost_per_token:(null===(h=e_.model_info)||void 0===h?void 0:h.input_cost_per_token)*1e6||null,output_cost:(null===(x=e_.litellm_params)||void 0===x?void 0:x.output_cost_per_token)?1e6*e_.litellm_params.output_cost_per_token:(null===(g=e_.model_info)||void 0===g?void 0:g.output_cost_per_token)*1e6||null,cache_control:null!==(b=e_.litellm_params)&&void 0!==b&&!!b.cache_control_injection_points,cache_control_injection_points:(null===(N=e_.litellm_params)||void 0===N?void 0:N.cache_control_injection_points)||[],model_access_group:Array.isArray(null===(w=e_.model_info)||void 0===w?void 0:w.access_groups)?e_.model_info.access_groups:[],guardrails:Array.isArray(null===(k=e_.litellm_params)||void 0===k?void 0:k.guardrails)?e_.litellm_params.guardrails:[]},layout:"vertical",onValuesChange:()=>eS(!0),children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Model Name"}),eE?(0,s.jsx)(f.Z.Item,{name:"model_name",className:"mb-0",children:(0,s.jsx)(W.Z,{placeholder:"Enter model name"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:e_.model_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"LiteLLM Model Name"}),eE?(0,s.jsx)(f.Z.Item,{name:"litellm_model_name",className:"mb-0",children:(0,s.jsx)(W.Z,{placeholder:"Enter LiteLLM model name"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:e_.litellm_model_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Input Cost (per 1M tokens)"}),eE?(0,s.jsx)(f.Z.Item,{name:"input_cost",className:"mb-0",children:(0,s.jsx)($.Z,{placeholder:"Enter input cost"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null==e_?void 0:null===(C=e_.litellm_params)||void 0===C?void 0:C.input_cost_per_token)?((null===(Z=e_.litellm_params)||void 0===Z?void 0:Z.input_cost_per_token)*1e6).toFixed(4):(null==e_?void 0:null===(S=e_.model_info)||void 0===S?void 0:S.input_cost_per_token)?(1e6*e_.model_info.input_cost_per_token).toFixed(4):null})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Output Cost (per 1M tokens)"}),eE?(0,s.jsx)(f.Z.Item,{name:"output_cost",className:"mb-0",children:(0,s.jsx)($.Z,{placeholder:"Enter output cost"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null==e_?void 0:null===(A=e_.litellm_params)||void 0===A?void 0:A.output_cost_per_token)?(1e6*e_.litellm_params.output_cost_per_token).toFixed(4):(null==e_?void 0:null===(I=e_.model_info)||void 0===I?void 0:I.output_cost_per_token)?(1e6*e_.model_info.output_cost_per_token).toFixed(4):null})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"API Base"}),eE?(0,s.jsx)(f.Z.Item,{name:"api_base",className:"mb-0",children:(0,s.jsx)(W.Z,{placeholder:"Enter API base"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(E=e_.litellm_params)||void 0===E?void 0:E.api_base)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Custom LLM Provider"}),eE?(0,s.jsx)(f.Z.Item,{name:"custom_llm_provider",className:"mb-0",children:(0,s.jsx)(W.Z,{placeholder:"Enter custom LLM provider"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(P=e_.litellm_params)||void 0===P?void 0:P.custom_llm_provider)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Organization"}),eE?(0,s.jsx)(f.Z.Item,{name:"organization",className:"mb-0",children:(0,s.jsx)(W.Z,{placeholder:"Enter organization"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(M=e_.litellm_params)||void 0===M?void 0:M.organization)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"TPM (Tokens per Minute)"}),eE?(0,s.jsx)(f.Z.Item,{name:"tpm",className:"mb-0",children:(0,s.jsx)($.Z,{placeholder:"Enter TPM"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(F=e_.litellm_params)||void 0===F?void 0:F.tpm)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"RPM (Requests per Minute)"}),eE?(0,s.jsx)(f.Z.Item,{name:"rpm",className:"mb-0",children:(0,s.jsx)($.Z,{placeholder:"Enter RPM"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(T=e_.litellm_params)||void 0===T?void 0:T.rpm)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Max Retries"}),eE?(0,s.jsx)(f.Z.Item,{name:"max_retries",className:"mb-0",children:(0,s.jsx)($.Z,{placeholder:"Enter max retries"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(L=e_.litellm_params)||void 0===L?void 0:L.max_retries)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Timeout (seconds)"}),eE?(0,s.jsx)(f.Z.Item,{name:"timeout",className:"mb-0",children:(0,s.jsx)($.Z,{placeholder:"Enter timeout"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(R=e_.litellm_params)||void 0===R?void 0:R.timeout)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Stream Timeout (seconds)"}),eE?(0,s.jsx)(f.Z.Item,{name:"stream_timeout",className:"mb-0",children:(0,s.jsx)($.Z,{placeholder:"Enter stream timeout"})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(D=e_.litellm_params)||void 0===D?void 0:D.stream_timeout)||"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Model Access Groups"}),eE?(0,s.jsx)(f.Z.Item,{name:"model_access_group",className:"mb-0",children:(0,s.jsx)(v.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:null==ej?void 0:ej.map(e=>({value:e,label:e}))})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(V=e_.model_info)||void 0===V?void 0:V.access_groups)?Array.isArray(e_.model_info.access_groups)?e_.model_info.access_groups.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e_.model_info.access_groups.map((e,l)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e},l))}):"No groups assigned":e_.model_info.access_groups:"Not Set"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)(i.Z,{className:"font-medium",children:["Guardrails"," ",(0,s.jsx)(_.Z,{title:"Apply safety guardrails to this model to filter content or enforce policies",children:(0,s.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(el.Z,{style:{marginLeft:"4px"}})})})]}),eE?(0,s.jsx)(f.Z.Item,{name:"guardrails",className:"mb-0",children:(0,s.jsx)(v.default,{mode:"tags",showSearch:!0,placeholder:"Select existing guardrails or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"},options:eq.map(e=>({value:e,label:e}))})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(q=e_.litellm_params)||void 0===q?void 0:q.guardrails)?Array.isArray(e_.litellm_params.guardrails)?e_.litellm_params.guardrails.length>0?(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e_.litellm_params.guardrails.map((e,l)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e},l))}):"No guardrails assigned":e_.litellm_params.guardrails:"Not Set"})]}),eE?(0,s.jsx)(ed,{form:ev,showCacheControl:eT,onCacheControlChange:e=>eL(e)}):(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Cache Control"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(null===(et=e_.litellm_params)||void 0===et?void 0:et.cache_control_injection_points)?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Enabled"}),(0,s.jsx)("div",{className:"mt-2",children:e_.litellm_params.cache_control_injection_points.map((e,l)=>(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Location: ",e.location,",",e.role&&(0,s.jsxs)("span",{children:[" Role: ",e.role]}),void 0!==e.index&&(0,s.jsxs)("span",{children:[" Index: ",e.index]})]},l))})]}):"Disabled"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Model Info"}),eE?(0,s.jsx)(f.Z.Item,{name:"model_info",className:"mb-0",children:(0,s.jsx)(ee.default.TextArea,{rows:4,placeholder:'{"gpt-4": 100, "claude-v1": 200}',defaultValue:JSON.stringify(eo.model_info,null,2)})}):(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:(0,s.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(e_.model_info,null,2)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Team ID"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:eo.model_info.team_id||"Not Set"})]})]}),eE&&(0,s.jsxs)("div",{className:"mt-6 flex justify-end gap-2",children:[(0,s.jsx)(z.Z,{variant:"secondary",onClick:()=>{ev.resetFields(),eS(!1),eP(!1)},children:"Cancel"}),(0,s.jsx)(z.Z,{variant:"primary",onClick:()=>ev.submit(),loading:eA,children:"Save Changes"})]})]})}):(0,s.jsx)(i.Z,{children:"Loading..."})]})]}),(0,s.jsx)(H.Z,{children:(0,s.jsx)(B.Z,{children:(0,s.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-auto",children:JSON.stringify(eo,null,2)})})})]})]}),eb&&(0,s.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,s.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,s.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,s.jsx)("div",{className:"sm:flex sm:items-start",children:(0,s.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Model"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this model?"})})]})})}),(0,s.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,s.jsx)(y.ZP,{onClick:eJ,className:"ml-2",danger:!0,children:"Delete"}),(0,s.jsx)(y.ZP,{onClick:()=>ew(!1),children:"Cancel"})]})]})]})}),ek&&!eU?(0,s.jsx)(ea,{isVisible:ek,onCancel:()=>eC(!1),onAddCredential:eG,existingCredential:eM,setIsCredentialModalOpen:eC}):(0,s.jsx)(j.Z,{open:ek,onCancel:()=>eC(!1),title:"Using Existing Credential",children:(0,s.jsx)(i.Z,{children:eo.litellm_params.litellm_credential_name})}),(0,s.jsx)(eN,{isVisible:eD,onCancel:()=>eV(!1),onSuccess:e=>{ey(e),ef&&ef(e)},modelData:e_||eo,accessToken:ei||"",userRole:eh||""})]})}var ek=t(58643),eC=e=>{let{selectedProvider:l,providerModels:t,getPlaceholder:a}=e,r=f.Z.useFormInstance(),o=e=>{let t=e.target.value,s=(r.getFieldValue("model_mappings")||[]).map(e=>"custom"===e.public_name||"custom"===e.litellm_model?l===d.Cl.Azure?{public_name:t,litellm_model:"azure/".concat(t)}:{public_name:t,litellm_model:t}:e);r.setFieldsValue({model_mappings:s})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(f.Z.Item,{label:"LiteLLM Model Name(s)",tooltip:"The model name LiteLLM will send to the LLM API",className:"mb-0",children:[(0,s.jsx)(f.Z.Item,{name:"model",rules:[{required:!0,message:"Please enter ".concat(l===d.Cl.Azure?"a deployment name":"at least one model",".")}],noStyle:!0,children:l===d.Cl.Azure||l===d.Cl.OpenAI_Compatible||l===d.Cl.Ollama?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(b.o,{placeholder:a(l),onChange:l===d.Cl.Azure?e=>{let l=e.target.value,t=l?[{public_name:l,litellm_model:"azure/".concat(l)}]:[];r.setFieldsValue({model:l,model_mappings:t})}:void 0})}):t.length>0?(0,s.jsx)(v.default,{mode:"multiple",allowClear:!0,showSearch:!0,placeholder:"Select models",onChange:e=>{let t=Array.isArray(e)?e:[e];if(t.includes("all-wildcard"))r.setFieldsValue({model_name:void 0,model_mappings:[]});else if(JSON.stringify(r.getFieldValue("model"))!==JSON.stringify(t)){let e=t.map(e=>l===d.Cl.Azure?{public_name:e,litellm_model:"azure/".concat(e)}:{public_name:e,litellm_model:e});r.setFieldsValue({model:t,model_mappings:e})}},optionFilterProp:"children",filterOption:(e,l)=>{var t;return(null!==(t=null==l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:[{label:"Custom Model Name (Enter below)",value:"custom"},{label:"All ".concat(l," Models (Wildcard)"),value:"all-wildcard"},...t.map(e=>({label:e,value:e}))],style:{width:"100%"}}):(0,s.jsx)(b.o,{placeholder:a(l)})}),(0,s.jsx)(f.Z.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.model!==l.model,children:e=>{let{getFieldValue:t}=e,a=t("model")||[];return(Array.isArray(a)?a:[a]).includes("custom")&&(0,s.jsx)(f.Z.Item,{name:"custom_model_name",rules:[{required:!0,message:"Please enter a custom model name."}],className:"mt-2",children:(0,s.jsx)(b.o,{placeholder:l===d.Cl.Azure?"Enter Azure deployment name":"Enter custom model name",onChange:o})})}})]}),(0,s.jsxs)(w.Z,{children:[(0,s.jsx)(k.Z,{span:10}),(0,s.jsx)(k.Z,{span:14,children:(0,s.jsx)(b.x,{className:"mb-3 mt-1",children:l===d.Cl.Azure?"Your deployment name will be saved as the public model name, and LiteLLM will use 'azure/deployment-name' internally":"The model name LiteLLM will send to the LLM API"})})]})]})},eZ=t(72188),eS=t(67187);let eA=e=>{let{content:l,children:t,width:r="auto",className:o=""}=e,[i,n]=(0,a.useState)(!1),[d,c]=(0,a.useState)("top"),m=(0,a.useRef)(null),u=()=>{if(m.current){let e=m.current.getBoundingClientRect(),l=e.top,t=window.innerHeight-e.bottom;l<300&&t>300?c("bottom"):c("top")}};return(0,s.jsxs)("div",{className:"relative inline-block",ref:m,children:[t||(0,s.jsx)(eS.Z,{className:"ml-1 text-gray-500 cursor-help",onMouseEnter:()=>{u(),n(!0)},onMouseLeave:()=>n(!1)}),i&&(0,s.jsxs)("div",{className:"absolute left-1/2 -translate-x-1/2 z-50 bg-black/90 text-white p-2 rounded-md text-sm font-normal shadow-lg ".concat(o),style:{["top"===d?"bottom":"top"]:"100%",width:r,marginBottom:"top"===d?"8px":"0",marginTop:"bottom"===d?"8px":"0"},children:[l,(0,s.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 w-0 h-0",style:{top:"top"===d?"100%":"auto",bottom:"bottom"===d?"100%":"auto",borderTop:"top"===d?"6px solid rgba(0, 0, 0, 0.9)":"6px solid transparent",borderBottom:"bottom"===d?"6px solid rgba(0, 0, 0, 0.9)":"6px solid transparent",borderLeft:"6px solid transparent",borderRight:"6px solid transparent"}})]})]})};var eI=()=>{let e=f.Z.useFormInstance(),[l,t]=(0,a.useState)(0),r=f.Z.useWatch("model",e)||[],o=Array.isArray(r)?r:[r],i=f.Z.useWatch("custom_model_name",e),n=!o.includes("all-wildcard"),c=f.Z.useWatch("custom_llm_provider",e);if((0,a.useEffect)(()=>{if(i&&o.includes("custom")){let l=(e.getFieldValue("model_mappings")||[]).map(e=>"custom"===e.public_name||"custom"===e.litellm_model?c===d.Cl.Azure?{public_name:i,litellm_model:"azure/".concat(i)}:{public_name:i,litellm_model:i}:e);e.setFieldValue("model_mappings",l),t(e=>e+1)}},[i,o,c,e]),(0,a.useEffect)(()=>{if(o.length>0&&!o.includes("all-wildcard")){let l=e.getFieldValue("model_mappings")||[];if(l.length!==o.length||!o.every(e=>l.some(l=>"custom"===e?"custom"===l.litellm_model||l.litellm_model===i:c===d.Cl.Azure?l.litellm_model==="azure/".concat(e):l.litellm_model===e))){let l=o.map(e=>"custom"===e&&i?c===d.Cl.Azure?{public_name:i,litellm_model:"azure/".concat(i)}:{public_name:i,litellm_model:i}:c===d.Cl.Azure?{public_name:e,litellm_model:"azure/".concat(e)}:{public_name:e,litellm_model:e});e.setFieldValue("model_mappings",l),t(e=>e+1)}}},[o,i,c,e]),!n)return null;let m=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-2 font-normal",children:"The name you specify in your API calls to LiteLLM Proxy"}),(0,s.jsxs)("div",{className:"mb-2 font-normal",children:[(0,s.jsx)("strong",{children:"Example:"})," If you name your public model"," ",(0,s.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"example-name"}),", and choose"," ",(0,s.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"openai/qwen-plus-latest"})," as the LiteLLM model"]}),(0,s.jsxs)("div",{className:"mb-2 font-normal",children:[(0,s.jsx)("strong",{children:"Usage:"})," You make an API call to the LiteLLM proxy with"," ",(0,s.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:'model = "example-name"'})]}),(0,s.jsxs)("div",{className:"font-normal",children:[(0,s.jsx)("strong",{children:"Result:"})," LiteLLM sends"," ",(0,s.jsx)("code",{className:"bg-gray-700 px-1 py-0.5 rounded text-xs",children:"qwen-plus-latest"})," to the provider"]})]}),u=(0,s.jsx)("div",{children:"The model name LiteLLM will send to the LLM API"}),h=[{title:(0,s.jsxs)("span",{className:"flex items-center",children:["Public Model Name",(0,s.jsx)(eA,{content:m,width:"500px"})]}),dataIndex:"public_name",key:"public_name",render:(l,t,a)=>(0,s.jsx)(I.o,{value:l,onChange:l=>{let t=[...e.getFieldValue("model_mappings")];t[a].public_name=l.target.value,e.setFieldValue("model_mappings",t)}})},{title:(0,s.jsxs)("span",{className:"flex items-center",children:["LiteLLM Model Name",(0,s.jsx)(eA,{content:u,width:"360px"})]}),dataIndex:"litellm_model",key:"litellm_model"}];return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f.Z.Item,{label:"Model Mappings",name:"model_mappings",tooltip:"Map public model names to LiteLLM model names for load balancing",labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",rules:[{required:!0,validator:async(e,l)=>{if(!l||0===l.length)throw Error("At least one model mapping is required");if(l.filter(e=>!e.public_name||""===e.public_name.trim()).length>0)throw Error("All model mappings must have valid public names")}}],children:(0,s.jsx)(eZ.Z,{dataSource:e.getFieldValue("model_mappings"),columns:h,pagination:!1,size:"small"},l)})})},eE=t(26210),eP=t(90464);let{Link:eM}=g.default;var eF=e=>{let{showAdvancedSettings:l,setShowAdvancedSettings:t,teams:r,guardrailsList:o}=e,[i]=f.Z.useForm(),[n,d]=a.useState(!1),[c,m]=a.useState("per_token"),[u,h]=a.useState(!1),x=(e,l)=>l&&(isNaN(Number(l))||0>Number(l))?Promise.reject("Please enter a valid positive number"):Promise.resolve(),p=(e,l)=>{if(!l)return Promise.resolve();try{return JSON.parse(l),Promise.resolve()}catch(e){return Promise.reject("Please enter valid JSON")}};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(eE.UQ,{className:"mt-2 mb-4",children:[(0,s.jsx)(eE._m,{children:(0,s.jsx)("b",{children:"Advanced Settings"})}),(0,s.jsx)(eE.X1,{children:(0,s.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,s.jsx)(f.Z.Item,{label:"Custom Pricing",name:"custom_pricing",valuePropName:"checked",className:"mb-4",children:(0,s.jsx)(er.Z,{onChange:e=>{d(e),e||i.setFieldsValue({input_cost_per_token:void 0,output_cost_per_token:void 0,input_cost_per_second:void 0})},className:"bg-gray-600"})}),(0,s.jsx)(f.Z.Item,{label:(0,s.jsxs)("span",{children:["Guardrails"," ",(0,s.jsx)(_.Z,{title:"Apply safety guardrails to this key to filter content or enforce policies",children:(0,s.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(el.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-4",help:"Select existing guardrails. Go to 'Guardrails' tab to create new guardrails.",children:(0,s.jsx)(v.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter guardrails",options:o.map(e=>({value:e,label:e}))})}),n&&(0,s.jsxs)("div",{className:"ml-6 pl-4 border-l-2 border-gray-200",children:[(0,s.jsx)(f.Z.Item,{label:"Pricing Model",name:"pricing_model",className:"mb-4",children:(0,s.jsx)(v.default,{defaultValue:"per_token",onChange:e=>m(e),options:[{value:"per_token",label:"Per Million Tokens"},{value:"per_second",label:"Per Second"}]})}),"per_token"===c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z.Item,{label:"Input Cost (per 1M tokens)",name:"input_cost_per_token",rules:[{validator:x}],className:"mb-4",children:(0,s.jsx)(eE.oi,{})}),(0,s.jsx)(f.Z.Item,{label:"Output Cost (per 1M tokens)",name:"output_cost_per_token",rules:[{validator:x}],className:"mb-4",children:(0,s.jsx)(eE.oi,{})})]}):(0,s.jsx)(f.Z.Item,{label:"Cost Per Second",name:"input_cost_per_second",rules:[{validator:x}],className:"mb-4",children:(0,s.jsx)(eE.oi,{})})]}),(0,s.jsx)(f.Z.Item,{label:"Use in pass through routes",name:"use_in_pass_through",valuePropName:"checked",className:"mb-4 mt-4",tooltip:(0,s.jsxs)("span",{children:["Allow using these credentials in pass through routes."," ",(0,s.jsx)(eM,{href:"https://docs.litellm.ai/docs/pass_through/vertex_ai",target:"_blank",children:"Learn more"})]}),children:(0,s.jsx)(er.Z,{onChange:e=>{let l=i.getFieldValue("litellm_extra_params");try{let t=l?JSON.parse(l):{};e?t.use_in_pass_through=!0:delete t.use_in_pass_through,Object.keys(t).length>0?i.setFieldValue("litellm_extra_params",JSON.stringify(t,null,2)):i.setFieldValue("litellm_extra_params","")}catch(l){e?i.setFieldValue("litellm_extra_params",JSON.stringify({use_in_pass_through:!0},null,2)):i.setFieldValue("litellm_extra_params","")}},className:"bg-gray-600"})}),(0,s.jsx)(ed,{form:i,showCacheControl:u,onCacheControlChange:e=>{if(h(e),!e){let e=i.getFieldValue("litellm_extra_params");try{let l=e?JSON.parse(e):{};delete l.cache_control_injection_points,Object.keys(l).length>0?i.setFieldValue("litellm_extra_params",JSON.stringify(l,null,2)):i.setFieldValue("litellm_extra_params","")}catch(e){i.setFieldValue("litellm_extra_params","")}}}}),(0,s.jsx)(f.Z.Item,{label:"LiteLLM Params",name:"litellm_extra_params",tooltip:"Optional litellm params used for making a litellm.completion() call.",className:"mb-4 mt-4",rules:[{validator:p}],children:(0,s.jsx)(eP.Z,{rows:4,placeholder:'{ "rpm": 100, "timeout": 0, "stream_timeout": 0 }'})}),(0,s.jsxs)(w.Z,{className:"mb-4",children:[(0,s.jsx)(k.Z,{span:10}),(0,s.jsx)(k.Z,{span:10,children:(0,s.jsxs)(eE.xv,{className:"text-gray-600 text-sm",children:["Pass JSON of litellm supported params"," ",(0,s.jsx)(eM,{href:"https://docs.litellm.ai/docs/completion/input",target:"_blank",children:"litellm.completion() call"})]})})]}),(0,s.jsx)(f.Z.Item,{label:"Model Info",name:"model_info_params",tooltip:"Optional model info params. Returned when calling `/model/info` endpoint.",className:"mb-0",rules:[{validator:p}],children:(0,s.jsx)(eP.Z,{rows:4,placeholder:'{ "mode": "chat" }'})})]})})]})})},eT=t(29),eL=t.n(eT),eR=t(23496),eO=t(35291),eD=t(23639);let{Text:eV}=g.default;var eq=e=>{let{formValues:l,accessToken:t,testMode:r,modelName:o="this model",onClose:i,onTestComplete:d}=e,[u,h]=a.useState(null),[x,p]=a.useState(null),[g,f]=a.useState(null),[j,v]=a.useState(!0),[_,b]=a.useState(!1),[N,w]=a.useState(!1),k=async()=>{v(!0),w(!1),h(null),p(null),f(null),b(!1),await new Promise(e=>setTimeout(e,100));try{console.log("Testing connection with form values:",l);let a=await m(l,t,null);if(!a){console.log("No result from prepareModelAddRequest"),h("Failed to prepare model data. Please check your form inputs."),b(!1),v(!1);return}console.log("Result from prepareModelAddRequest:",a);let{litellmParamsObj:r,modelInfoObj:o,modelName:i}=a[0],d=await (0,n.testConnectionRequest)(t,r,o,null==o?void 0:o.mode);if("success"===d.status)c.Z.success("Connection test successful!"),h(null),b(!0);else{var e,s;let l=(null===(e=d.result)||void 0===e?void 0:e.error)||d.message||"Unknown error";h(l),p(r),f(null===(s=d.result)||void 0===s?void 0:s.raw_request_typed_dict),b(!1)}}catch(e){console.error("Test connection error:",e),h(e instanceof Error?e.message:String(e)),b(!1)}finally{v(!1),d&&d()}};a.useEffect(()=>{let e=setTimeout(()=>{k()},200);return()=>clearTimeout(e)},[]);let C=e=>e?e.split("stack trace:")[0].trim().replace(/^litellm\.(.*?)Error: /,""):"Unknown error",Z="string"==typeof u?C(u):(null==u?void 0:u.message)?C(u.message):"Unknown error",S=g?((e,l,t)=>{let s=JSON.stringify(l,null,2).split("\n").map(e=>"  ".concat(e)).join("\n"),a=Object.entries(t).map(e=>{let[l,t]=e;return"-H '".concat(l,": ").concat(t,"'")}).join(" \\\n  ");return"curl -X POST \\\n  ".concat(e," \\\n  ").concat(a?"".concat(a," \\\n  "):"","-H 'Content-Type: application/json' \\\n  -d '{\n").concat(s,"\n  }'")})(g.raw_request_api_base,g.raw_request_body,g.raw_request_headers||{}):"";return(0,s.jsxs)("div",{style:{padding:"24px",borderRadius:"8px",backgroundColor:"#fff"},children:[j?(0,s.jsxs)("div",{style:{textAlign:"center",padding:"32px 20px"},className:"jsx-dc9a0e2d897fe63b",children:[(0,s.jsx)("div",{style:{marginBottom:"16px"},className:"jsx-dc9a0e2d897fe63b loading-spinner",children:(0,s.jsx)("div",{style:{border:"3px solid #f3f3f3",borderTop:"3px solid #1890ff",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite",margin:"0 auto"},className:"jsx-dc9a0e2d897fe63b"})}),(0,s.jsxs)(eV,{style:{fontSize:"16px"},children:["Testing connection to ",o,"..."]}),(0,s.jsx)(eL(),{id:"dc9a0e2d897fe63b",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):_?(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"32px 20px"},children:[(0,s.jsx)("div",{style:{color:"#52c41a",fontSize:"24px",display:"flex",alignItems:"center"},children:(0,s.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"check-circle",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"})})}),(0,s.jsxs)(eV,{type:"success",style:{fontSize:"18px",fontWeight:500,marginLeft:"10px"},children:["Connection to ",o," successful!"]})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[(0,s.jsx)(eO.Z,{style:{color:"#ff4d4f",fontSize:"24px",marginRight:"12px"}}),(0,s.jsxs)(eV,{type:"danger",style:{fontSize:"18px",fontWeight:500},children:["Connection to ",o," failed"]})]}),(0,s.jsxs)("div",{style:{backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:"8px",padding:"16px",marginBottom:"20px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.03)"},children:[(0,s.jsxs)(eV,{strong:!0,style:{display:"block",marginBottom:"8px"},children:["Error:"," "]}),(0,s.jsx)(eV,{type:"danger",style:{fontSize:"14px",lineHeight:"1.5"},children:Z}),u&&(0,s.jsx)("div",{style:{marginTop:"12px"},children:(0,s.jsx)(y.ZP,{type:"link",onClick:()=>w(!N),style:{paddingLeft:0,height:"auto"},children:N?"Hide Details":"Show Details"})})]}),N&&(0,s.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,s.jsx)(eV,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"Troubleshooting Details"}),(0,s.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"200px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5"},children:"string"==typeof u?u:JSON.stringify(u,null,2)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(eV,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"API Request"}),(0,s.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"250px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5"},children:S||"No request data available"}),(0,s.jsx)(y.ZP,{style:{marginTop:"8px"},icon:(0,s.jsx)(eD.Z,{}),onClick:()=>{navigator.clipboard.writeText(S||""),c.Z.success("Copied to clipboard")},children:"Copy to Clipboard"})]})]})}),(0,s.jsx)(eR.Z,{style:{margin:"24px 0 16px"}}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,s.jsx)(y.ZP,{type:"link",href:"https://docs.litellm.ai/docs/providers",target:"_blank",icon:(0,s.jsx)(el.Z,{}),children:"View Documentation"})})]})};let ez=[{value:"chat",label:"Chat - /chat/completions"},{value:"completion",label:"Completion - /completions"},{value:"embedding",label:"Embedding - /embeddings"},{value:"audio_speech",label:"Audio Speech - /audio/speech"},{value:"audio_transcription",label:"Audio Transcription - /audio/transcriptions"},{value:"image_generation",label:"Image Generation - /images/generations"},{value:"rerank",label:"Rerank - /rerank"},{value:"realtime",label:"Realtime - /realtime"},{value:"batch",label:"Batch - /batch"}];var eB=t(92858),eK=t(84376),eU=t(20347);let eG=async(e,l,t,s)=>{try{console.log("=== AUTO ROUTER SUBMIT HANDLER CALLED ==="),console.log("handling auto router submit for formValues:",e),console.log("Access token:",l?"Present":"Missing"),console.log("Form:",t?"Present":"Missing"),console.log("Callback:",s?"Present":"Missing");let a={model_name:e.auto_router_name,litellm_params:{model:"auto_router/".concat(e.auto_router_name),auto_router_config:JSON.stringify(e.auto_router_config),auto_router_default_model:e.auto_router_default_model},model_info:{}};e.auto_router_embedding_model&&"custom"!==e.auto_router_embedding_model?a.litellm_params.auto_router_embedding_model=e.auto_router_embedding_model:e.custom_embedding_model&&(a.litellm_params.auto_router_embedding_model=e.custom_embedding_model),e.team_id&&(a.model_info.team_id=e.team_id),e.model_access_group&&e.model_access_group.length>0&&(a.model_info.access_groups=e.model_access_group),console.log("Auto router configuration to be created:",a),console.log("Auto router config (stringified):",a.litellm_params.auto_router_config),console.log("Calling modelCreateCall with:",{accessToken:l?"Present":"Missing",config:a});let r=await (0,n.modelCreateCall)(l,a);console.log("response for auto router create call:",r),t.resetFields()}catch(e){console.error("Failed to add auto router:",e),c.Z.fromBackend("Failed to add auto router: "+e)}},{Title:eH,Link:eJ}=g.default;var eW=e=>{let{form:l,handleOk:t,accessToken:r,userRole:o}=e,[i,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)(!1),[h,x]=(0,a.useState)(""),[p,N]=(0,a.useState)([]),[w,k]=(0,a.useState)([]),[C,Z]=(0,a.useState)(!1),[S,A]=(0,a.useState)(!1),[I,E]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{N((await (0,n.modelAvailableCall)(r,"","",!1,null,!0,!0)).data.map(e=>e.id))})()},[r]),(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,eh.p)(r);console.log("Fetched models for auto router:",e),k(e)}catch(e){console.error("Error fetching model info for auto router:",e)}})()},[r]);let P=eU.ZL.includes(o),M=async()=>{u(!0),x("test-".concat(Date.now())),d(!0)},F=()=>{console.log("Auto router submit triggered!"),console.log("Router config:",I);let e=l.getFieldsValue();if(console.log("Form values:",e),!e.auto_router_name){c.Z.fromBackend("Please enter an Auto Router Name");return}if(!e.auto_router_default_model){c.Z.fromBackend("Please select a Default Model");return}if(l.setFieldsValue({custom_llm_provider:"auto_router",model:e.auto_router_name,api_key:"not_required_for_auto_router"}),!I||!I.routes||0===I.routes.length){c.Z.fromBackend("Please configure at least one route for the auto router");return}if(I.routes.filter(e=>!e.name||!e.description||0===e.utterances.length).length>0){c.Z.fromBackend("Please ensure all routes have a target model, description, and at least one utterance");return}l.validateFields().then(e=>{console.log("Form validation passed, submitting with values:",e);let s={...e,auto_router_config:I};console.log("Final submit values:",s),eG(s,r,l,t)}).catch(e=>{console.error("Validation failed:",e);let l=e.errorFields||[];if(l.length>0){let e=l.map(e=>{let l=e.name[0];return({auto_router_name:"Auto Router Name",auto_router_default_model:"Default Model",auto_router_embedding_model:"Embedding Model"})[l]||l});c.Z.fromBackend("Please fill in the following required fields: ".concat(e.join(", ")))}else c.Z.fromBackend("Please fill in all required fields")})};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eH,{level:2,children:"Add Auto Router"}),(0,s.jsx)(b.x,{className:"text-gray-600 mb-6",children:"Create an auto router with intelligent routing logic that automatically selects the best model based on user input patterns and semantic matching."}),(0,s.jsx)(ep.Z,{children:(0,s.jsxs)(f.Z,{form:l,onFinish:F,labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",children:[(0,s.jsx)(f.Z.Item,{rules:[{required:!0,message:"Auto router name is required"}],label:"Auto Router Name",name:"auto_router_name",tooltip:"Unique name for this auto router configuration",labelCol:{span:10},labelAlign:"left",children:(0,s.jsx)(b.o,{placeholder:"e.g., auto_router_1, smart_routing"})}),(0,s.jsx)("div",{className:"w-full mb-4",children:(0,s.jsx)(eb,{modelInfo:w,value:I,onChange:e=>{E(e),l.setFieldValue("auto_router_config",e)}})}),(0,s.jsx)(f.Z.Item,{rules:[{required:!0,message:"Default model is required"}],label:"Default Model",name:"auto_router_default_model",tooltip:"Fallback model to use when auto routing logic cannot determine the best model",labelCol:{span:10},labelAlign:"left",children:(0,s.jsx)(v.default,{placeholder:"Select a default model",onChange:e=>{Z("custom"===e)},options:[...Array.from(new Set(w.map(e=>e.model_group))).map(e=>({value:e,label:e})),{value:"custom",label:"Enter custom model name"}],style:{width:"100%"},showSearch:!0})}),(0,s.jsx)(f.Z.Item,{label:"Embedding Model",name:"auto_router_embedding_model",tooltip:"Optional: Embedding model to use for semantic routing decisions",labelCol:{span:10},labelAlign:"left",children:(0,s.jsx)(v.default,{value:l.getFieldValue("auto_router_embedding_model"),placeholder:"Select an embedding model (optional)",onChange:e=>{A("custom"===e),l.setFieldValue("auto_router_embedding_model",e)},options:[...Array.from(new Set(w.map(e=>e.model_group))).map(e=>({value:e,label:e})),{value:"custom",label:"Enter custom model name"}],style:{width:"100%"},showSearch:!0,allowClear:!0})}),(0,s.jsxs)("div",{className:"flex items-center my-4",children:[(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,s.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"Additional Settings"}),(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),P&&(0,s.jsx)(f.Z.Item,{label:"Model Access Group",name:"model_access_group",className:"mb-4",tooltip:"Use model access groups to control who can access this auto router",children:(0,s.jsx)(v.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],options:p.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(_.Z,{title:"Get help on our github",children:(0,s.jsx)(g.default.Link,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(y.ZP,{onClick:M,loading:m,children:"Test Connect"}),(0,s.jsx)(y.ZP,{onClick:()=>{console.log("Add Auto Router button clicked!"),console.log("Current router config:",I),console.log("Current form values:",l.getFieldsValue()),F()},children:"Add Auto Router"})]})]})]})}),(0,s.jsx)(j.Z,{title:"Connection Test Results",open:i,onCancel:()=>{d(!1),u(!1)},footer:[(0,s.jsx)(y.ZP,{onClick:()=>{d(!1),u(!1)},children:"Close"},"close")],width:700,children:i&&(0,s.jsx)(eq,{formValues:l.getFieldsValue(),accessToken:r,testMode:"chat",modelName:l.getFieldValue("auto_router_name"),onClose:()=>{d(!1),u(!1)},onTestComplete:()=>u(!1)},h)})]})};let{Title:eY,Link:e$}=g.default;var eQ=e=>{let{form:l,handleOk:t,selectedProvider:r,setSelectedProvider:o,providerModels:c,setProviderModelsFn:m,getPlaceholder:u,uploadProps:h,showAdvancedSettings:x,setShowAdvancedSettings:p,teams:b,credentials:N,accessToken:C,userRole:Z,premiumUser:S}=e,[I]=f.Z.useForm(),[E,P]=(0,a.useState)("chat"),[M,F]=(0,a.useState)(!1),[T,L]=(0,a.useState)(!1),[R,O]=(0,a.useState)([]),[D,V]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{let e=(await (0,n.getGuardrailsList)(C)).guardrails.map(e=>e.guardrail_name);O(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})()},[C]);let q=async()=>{L(!0),V("test-".concat(Date.now())),F(!0)},[z,B]=(0,a.useState)(!1),[K,U]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{U((await (0,n.modelAvailableCall)(C,"","",!1,null,!0,!0)).data.map(e=>e.id))})()},[C]);let G=eU.ZL.includes(Z);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ek.v0,{className:"w-full",children:[(0,s.jsxs)(ek.td,{className:"mb-4",children:[(0,s.jsx)(ek.OK,{children:"Add Model"}),(0,s.jsx)(ek.OK,{children:"Add Auto Router"})]}),(0,s.jsxs)(ek.nP,{children:[(0,s.jsxs)(ek.x4,{children:[(0,s.jsx)(eY,{level:2,children:"Add Model"}),(0,s.jsx)(ep.Z,{children:(0,s.jsx)(f.Z,{form:l,onFinish:e=>{console.log("\uD83D\uDD25 Form onFinish triggered with values:",e),t()},onFinishFailed:e=>{console.log("\uD83D\uDCA5 Form onFinishFailed triggered:",e)},labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Provider:",name:"custom_llm_provider",tooltip:"E.g. OpenAI, Azure OpenAI, Anthropic, Bedrock, etc.",labelCol:{span:10},labelAlign:"left",children:(0,s.jsx)(v.default,{showSearch:!0,value:r,onChange:e=>{o(e),m(e),l.setFieldsValue({model:[],model_name:void 0})},children:Object.entries(d.Cl).map(e=>{let[l,t]=e;return(0,s.jsx)(v.default.Option,{value:l,children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("img",{src:d.cd[t],alt:"".concat(l," logo"),className:"w-5 h-5",onError:e=>{let l=e.target,s=l.parentElement;if(s){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=t.charAt(0),s.replaceChild(e,l)}}}),(0,s.jsx)("span",{children:t})]})},l)})})}),(0,s.jsx)(eC,{selectedProvider:r,providerModels:c,getPlaceholder:u}),(0,s.jsx)(eI,{}),(0,s.jsx)(f.Z.Item,{label:"Mode",name:"mode",className:"mb-1",children:(0,s.jsx)(v.default,{style:{width:"100%"},value:E,onChange:e=>P(e),options:ez})}),(0,s.jsxs)(w.Z,{children:[(0,s.jsx)(k.Z,{span:10}),(0,s.jsx)(k.Z,{span:10,children:(0,s.jsxs)(i.Z,{className:"mb-5 mt-1",children:[(0,s.jsx)("strong",{children:"Optional"})," - LiteLLM endpoint to use when health checking this model"," ",(0,s.jsx)(e$,{href:"https://docs.litellm.ai/docs/proxy/health#health",target:"_blank",children:"Learn more"})]})})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(g.default.Text,{className:"text-sm text-gray-500 mb-2",children:"Either select existing credentials OR enter new provider credentials below"})}),(0,s.jsx)(f.Z.Item,{label:"Existing Credentials",name:"litellm_credential_name",children:(0,s.jsx)(v.default,{showSearch:!0,placeholder:"Select or search for existing credentials",optionFilterProp:"children",filterOption:(e,l)=>{var t;return(null!==(t=null==l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:[{value:null,label:"None"},...N.map(e=>({value:e.credential_name,label:e.credential_name}))],allowClear:!0})}),(0,s.jsxs)("div",{className:"flex items-center my-4",children:[(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,s.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"OR"}),(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(0,s.jsx)(f.Z.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.litellm_credential_name!==l.litellm_credential_name||e.provider!==l.provider,children:e=>{let{getFieldValue:l}=e,t=l("litellm_credential_name");return(console.log("\uD83D\uDD11 Credential Name Changed:",t),t)?(0,s.jsx)("div",{className:"text-gray-500 text-sm text-center",children:"Using existing credentials - no additional provider fields needed"}):(0,s.jsx)(A,{selectedProvider:r,uploadProps:h})}}),(0,s.jsxs)("div",{className:"flex items-center my-4",children:[(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"}),(0,s.jsx)("span",{className:"px-4 text-gray-500 text-sm",children:"Additional Model Info Settings"}),(0,s.jsx)("div",{className:"flex-grow border-t border-gray-200"})]}),(0,s.jsx)(f.Z.Item,{label:"Team-BYOK Model",tooltip:"Only use this model + credential combination for this team. Useful when teams want to onboard their own OpenAI keys.",className:"mb-4",children:(0,s.jsx)(_.Z,{title:S?"":"This is an enterprise-only feature. Upgrade to premium to restrict model+credential combinations to a specific team.",placement:"top",children:(0,s.jsx)(eB.Z,{checked:z,onChange:e=>{B(e),e||l.setFieldValue("team_id",void 0)},disabled:!S})})}),z&&(0,s.jsx)(f.Z.Item,{label:"Select Team",name:"team_id",className:"mb-4",tooltip:"Only keys for this team will be able to call this model.",rules:[{required:z&&!G,message:"Please select a team."}],children:(0,s.jsx)(eK.Z,{teams:b,disabled:!S})}),G&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f.Z.Item,{label:"Model Access Group",name:"model_access_group",className:"mb-4",tooltip:"Use model access groups to give users access to select models, and add new ones to the group over time.",children:(0,s.jsx)(v.default,{mode:"tags",showSearch:!0,placeholder:"Select existing groups or type to create new ones",optionFilterProp:"children",tokenSeparators:[","],options:K.map(e=>({value:e,label:e})),maxTagCount:"responsive",allowClear:!0})})}),(0,s.jsx)(eF,{showAdvancedSettings:x,setShowAdvancedSettings:p,teams:b,guardrailsList:R}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(_.Z,{title:"Get help on our github",children:(0,s.jsx)(g.default.Link,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(y.ZP,{onClick:q,loading:T,children:"Test Connect"}),(0,s.jsx)(y.ZP,{htmlType:"submit",children:"Add Model"})]})]})]})})})]}),(0,s.jsx)(ek.x4,{children:(0,s.jsx)(eW,{form:I,handleOk:()=>{I.validateFields().then(e=>{eG(e,C,I,t)}).catch(e=>{console.error("Validation failed:",e)})},accessToken:C,userRole:Z})})]})]}),(0,s.jsx)(j.Z,{title:"Connection Test Results",open:M,onCancel:()=>{F(!1),L(!1)},footer:[(0,s.jsx)(y.ZP,{onClick:()=>{F(!1),L(!1)},children:"Close"},"close")],width:700,children:M&&(0,s.jsx)(eq,{formValues:l.getFieldsValue(),accessToken:C,testMode:E,modelName:l.getFieldValue("model_name")||l.getFieldValue("model"),onClose:()=>{F(!1),L(!1)},onTestComplete:()=>L(!1)},D)})]})},eX=t(41649),e0=t(8048),e1=t(61994),e2=t(15731),e4=t(91126);let e5=(e,l,t,a,r,o,i,n,d,c,m)=>[{header:()=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(e1.Z,{checked:t,indeterminate:l.length>0&&!t,onChange:e=>r(e.target.checked),onClick:e=>e.stopPropagation()}),(0,s.jsx)("span",{children:"Model ID"})]}),accessorKey:"model_info.id",enableSorting:!0,sortingFn:"alphanumeric",cell:e=>{let{row:t}=e,r=t.original,o=r.model_name,i=l.includes(o);return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(e1.Z,{checked:i,onChange:e=>a(o,e.target.checked),onClick:e=>e.stopPropagation()}),(0,s.jsx)(_.Z,{title:r.model_info.id,children:(0,s.jsx)("div",{className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",onClick:()=>m&&m(r.model_info.id),children:r.model_info.id})})]})}},{header:"Model Name",accessorKey:"model_name",enableSorting:!0,sortingFn:"alphanumeric",cell:e=>{let{row:l}=e,t=l.original,a=n(t)||t.model_name;return(0,s.jsx)("div",{className:"font-medium text-sm",children:(0,s.jsx)(_.Z,{title:a,children:(0,s.jsx)("div",{className:"truncate max-w-[200px]",children:a})})})}},{header:"Health Status",accessorKey:"health_status",enableSorting:!0,sortingFn:(e,l,t)=>{var s,a;let r=e.getValue("health_status")||"unknown",o=l.getValue("health_status")||"unknown",i={healthy:0,checking:1,unknown:2,unhealthy:3};return(null!==(s=i[r])&&void 0!==s?s:4)-(null!==(a=i[o])&&void 0!==a?a:4)},cell:l=>{var t;let{row:a}=l,r=a.original,o={status:r.health_status,loading:r.health_loading,error:r.health_error};if(o.loading)return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),(0,s.jsx)(ev.x,{className:"text-gray-600 text-sm",children:"Checking..."})]});let n=r.model_name,d="healthy"===o.status&&(null===(t=e[n])||void 0===t?void 0:t.successResponse);return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[i(o.status),d&&c&&(0,s.jsx)(_.Z,{title:"View response details",placement:"top",children:(0,s.jsx)("button",{onClick:()=>{var l;return c(n,null===(l=e[n])||void 0===l?void 0:l.successResponse)},className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-50 rounded cursor-pointer transition-colors",children:(0,s.jsx)(e2.Z,{className:"h-4 w-4"})})})]})}},{header:"Error Details",accessorKey:"health_error",enableSorting:!1,cell:l=>{let{row:t}=l,a=t.original.model_name,r=e[a];if(!(null==r?void 0:r.error))return(0,s.jsx)(ev.x,{className:"text-gray-400 text-sm",children:"No errors"});let o=r.error,i=r.fullError||r.error;return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"max-w-[200px]",children:(0,s.jsx)(_.Z,{title:o,placement:"top",children:(0,s.jsx)(ev.x,{className:"text-red-600 text-sm truncate",children:o})})}),d&&i!==o&&(0,s.jsx)(_.Z,{title:"View full error details",placement:"top",children:(0,s.jsx)("button",{onClick:()=>d(a,o,i),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded cursor-pointer transition-colors",children:(0,s.jsx)(e2.Z,{className:"h-4 w-4"})})})]})}},{header:"Last Check",accessorKey:"last_check",enableSorting:!0,sortingFn:(e,l,t)=>{let s=e.getValue("last_check")||"Never checked",a=l.getValue("last_check")||"Never checked";if("Never checked"===s&&"Never checked"===a)return 0;if("Never checked"===s)return 1;if("Never checked"===a)return -1;if("Check in progress..."===s&&"Check in progress..."===a)return 0;if("Check in progress..."===s)return -1;if("Check in progress..."===a)return 1;let r=new Date(s),o=new Date(a);return isNaN(r.getTime())&&isNaN(o.getTime())?0:isNaN(r.getTime())?1:isNaN(o.getTime())?-1:o.getTime()-r.getTime()},cell:e=>{let{row:l}=e,t=l.original;return(0,s.jsx)(ev.x,{className:"text-gray-600 text-sm",children:t.health_loading?"Check in progress...":t.last_check})}},{header:"Last Success",accessorKey:"last_success",enableSorting:!0,sortingFn:(e,l,t)=>{let s=e.getValue("last_success")||"Never succeeded",a=l.getValue("last_success")||"Never succeeded";if("Never succeeded"===s&&"Never succeeded"===a)return 0;if("Never succeeded"===s)return 1;if("Never succeeded"===a)return -1;if("None"===s&&"None"===a)return 0;if("None"===s)return 1;if("None"===a)return -1;let r=new Date(s),o=new Date(a);return isNaN(r.getTime())&&isNaN(o.getTime())?0:isNaN(r.getTime())?1:isNaN(o.getTime())?-1:o.getTime()-r.getTime()},cell:l=>{let{row:t}=l,a=e[t.original.model_name],r=(null==a?void 0:a.lastSuccess)||"None";return(0,s.jsx)(ev.x,{className:"text-gray-600 text-sm",children:r})}},{header:"Actions",id:"actions",cell:e=>{let{row:l}=e,t=l.original,a=t.model_name,r=t.health_status&&"none"!==t.health_status,i=t.health_loading?"Checking...":r?"Re-run Health Check":"Run Health Check";return(0,s.jsx)(_.Z,{title:i,placement:"top",children:(0,s.jsx)("button",{className:"p-2 rounded-md transition-colors ".concat(t.health_loading?"text-gray-400 cursor-not-allowed bg-gray-100":"text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50"),onClick:()=>{t.health_loading||o(a)},disabled:t.health_loading,children:t.health_loading?(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse"}),(0,s.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,s.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}):r?(0,s.jsx)(V.Z,{className:"h-4 w-4"}):(0,s.jsx)(e4.Z,{className:"h-4 w-4"})})})},enableSorting:!1}],e6=[{pattern:/Missing .* API Key/i,replacement:"Missing API Key"},{pattern:/Connection timeout/i,replacement:"Connection timeout"},{pattern:/Network.*not.*ok/i,replacement:"Network connection failed"},{pattern:/403.*Forbidden/i,replacement:"Access forbidden - check API key permissions"},{pattern:/401.*Unauthorized/i,replacement:"Unauthorized - invalid API key"},{pattern:/429.*rate limit/i,replacement:"Rate limit exceeded"},{pattern:/500.*Internal Server Error/i,replacement:"Provider internal server error"},{pattern:/litellm\.AuthenticationError/i,replacement:"Authentication failed"},{pattern:/litellm\.RateLimitError/i,replacement:"Rate limit exceeded"},{pattern:/litellm\.APIError/i,replacement:"API error"}];var e3=e=>{let{accessToken:l,modelData:t,all_models_on_proxy:r,getDisplayModelName:o,setSelectedModelId:d}=e,[c,m]=(0,a.useState)({}),[u,h]=(0,a.useState)([]),[x,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),[v,_]=(0,a.useState)(null),[b,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(null),C=(0,a.useRef)(null);(0,a.useEffect)(()=>{l&&(null==t?void 0:t.data)&&(async()=>{let e={};t.data.forEach(l=>{e[l.model_name]={status:"none",lastCheck:"None",lastSuccess:"None",loading:!1,error:void 0,fullError:void 0,successResponse:void 0}});try{let s=await (0,n.latestHealthChecksCall)(l);s&&s.latest_health_checks&&"object"==typeof s.latest_health_checks&&Object.entries(s.latest_health_checks).forEach(l=>{let[s,a]=l;if(!a)return;let r=null,o=t.data.find(e=>e.model_name===s);if(o)r=o.model_name;else{let e=t.data.find(e=>e.model_info&&e.model_info.id===s);if(e)r=e.model_name;else if(a.model_name){let e=t.data.find(e=>e.model_name===a.model_name);e&&(r=e.model_name)}}if(r){let l=a.error_message||void 0;e[r]={status:a.status||"unknown",lastCheck:a.checked_at?new Date(a.checked_at).toLocaleString():"None",lastSuccess:"healthy"===a.status&&a.checked_at?new Date(a.checked_at).toLocaleString():"None",loading:!1,error:l?Z(l):void 0,fullError:l,successResponse:"healthy"===a.status?a:void 0}}})}catch(e){console.warn("Failed to load health check history (using default states):",e)}m(e)})()},[l,t]);let Z=e=>{var l;if(!e)return"Health check failed";let t="string"==typeof e?e:JSON.stringify(e),s=t.match(/(\w+Error):\s*(\d{3})/i);if(s)return"".concat(s[1],": ").concat(s[2]);let a=t.match(/(AuthenticationError|RateLimitError|BadRequestError|InternalServerError|TimeoutError|NotFoundError|ForbiddenError|ServiceUnavailableError|BadGatewayError|ContentPolicyViolationError|\w+Error)/i),r=t.match(/\b(400|401|403|404|408|429|500|502|503|504)\b/);if(a&&r)return"".concat(a[1],": ").concat(r[1]);if(r){let e=r[1];return"".concat({400:"BadRequestError",401:"AuthenticationError",403:"ForbiddenError",404:"NotFoundError",408:"TimeoutError",429:"RateLimitError",500:"InternalServerError",502:"BadGatewayError",503:"ServiceUnavailableError",504:"GatewayTimeoutError"}[e],": ").concat(e)}if(a){let e=a[1],l={AuthenticationError:"401",RateLimitError:"429",BadRequestError:"400",InternalServerError:"500",TimeoutError:"408",NotFoundError:"404",ForbiddenError:"403",ServiceUnavailableError:"503",BadGatewayError:"502",GatewayTimeoutError:"504",ContentPolicyViolationError:"400"}[e];return l?"".concat(e,": ").concat(l):e}for(let{pattern:e,replacement:l}of e6)if(e.test(t))return l;if(/missing.*api.*key|invalid.*key|unauthorized/i.test(t))return"AuthenticationError: 401";if(/rate.*limit|too.*many.*requests/i.test(t))return"RateLimitError: 429";if(/timeout|timed.*out/i.test(t))return"TimeoutError: 408";if(/not.*found/i.test(t))return"NotFoundError: 404";if(/forbidden|access.*denied/i.test(t))return"ForbiddenError: 403";if(/internal.*server.*error/i.test(t))return"InternalServerError: 500";let o=t.replace(/[\n\r]+/g," ").replace(/\s+/g," ").trim(),i=null===(l=o.split(/[.!?]/)[0])||void 0===l?void 0:l.trim();return i&&i.length>0?i.length>100?i.substring(0,97)+"...":i:o.length>100?o.substring(0,97)+"...":o},S=async e=>{if(l){m(l=>({...l,[e]:{...l[e],loading:!0,status:"checking"}}));try{var s,a;let r=await (0,n.individualModelHealthCheckCall)(l,e),o=new Date().toLocaleString();if(r.unhealthy_count>0&&r.unhealthy_endpoints&&r.unhealthy_endpoints.length>0){let l=(null===(s=r.unhealthy_endpoints[0])||void 0===s?void 0:s.error)||"Health check failed",t=Z(l);m(s=>{var a;return{...s,[e]:{status:"unhealthy",lastCheck:o,lastSuccess:(null===(a=s[e])||void 0===a?void 0:a.lastSuccess)||"None",loading:!1,error:t,fullError:l}}})}else m(l=>({...l,[e]:{status:"healthy",lastCheck:o,lastSuccess:o,loading:!1,successResponse:r}}));try{let s=await (0,n.latestHealthChecksCall)(l),r=t.data.find(l=>l.model_name===e);if(r){let l=r.model_info.id,t=null===(a=s.latest_health_checks)||void 0===a?void 0:a[l];if(t){let l=t.error_message||void 0;m(s=>{var a,r,o,i,n,d,c;return{...s,[e]:{status:t.status||(null===(a=s[e])||void 0===a?void 0:a.status)||"unknown",lastCheck:t.checked_at?new Date(t.checked_at).toLocaleString():(null===(r=s[e])||void 0===r?void 0:r.lastCheck)||"None",lastSuccess:"healthy"===t.status?t.checked_at?new Date(t.checked_at).toLocaleString():(null===(o=s[e])||void 0===o?void 0:o.lastSuccess)||"None":(null===(i=s[e])||void 0===i?void 0:i.lastSuccess)||"None",loading:!1,error:l?Z(l):null===(n=s[e])||void 0===n?void 0:n.error,fullError:l||(null===(d=s[e])||void 0===d?void 0:d.fullError),successResponse:"healthy"===t.status?t:null===(c=s[e])||void 0===c?void 0:c.successResponse}}})}}}catch(e){console.debug("Could not fetch updated status from database (non-critical):",e)}}catch(a){let l=new Date().toLocaleString(),t=a instanceof Error?a.message:String(a),s=Z(t);m(a=>{var r;return{...a,[e]:{status:"unhealthy",lastCheck:l,lastSuccess:(null===(r=a[e])||void 0===r?void 0:r.lastSuccess)||"None",loading:!1,error:s,fullError:t}}})}}},A=async()=>{let e=u.length>0?u:r,s=e.reduce((e,l)=>(e[l]={...c[l],loading:!0,status:"checking"},e),{});m(e=>({...e,...s}));let a={},o=e.map(async e=>{if(l)try{let s=await (0,n.individualModelHealthCheckCall)(l,e);a[e]=s;let r=new Date().toLocaleString();if(s.unhealthy_count>0&&s.unhealthy_endpoints&&s.unhealthy_endpoints.length>0){var t;let l=(null===(t=s.unhealthy_endpoints[0])||void 0===t?void 0:t.error)||"Health check failed",a=Z(l);m(t=>{var s;return{...t,[e]:{status:"unhealthy",lastCheck:r,lastSuccess:(null===(s=t[e])||void 0===s?void 0:s.lastSuccess)||"None",loading:!1,error:a,fullError:l}}})}else m(l=>({...l,[e]:{status:"healthy",lastCheck:r,lastSuccess:r,loading:!1,successResponse:s}}))}catch(a){console.error("Health check failed for ".concat(e,":"),a);let l=new Date().toLocaleString(),t=a instanceof Error?a.message:String(a),s=Z(t);m(a=>{var r;return{...a,[e]:{status:"unhealthy",lastCheck:l,lastSuccess:(null===(r=a[e])||void 0===r?void 0:r.lastSuccess)||"None",loading:!1,error:s,fullError:t}}})}});await Promise.allSettled(o);try{if(!l)return;let s=await (0,n.latestHealthChecksCall)(l);s.latest_health_checks&&Object.entries(s.latest_health_checks).forEach(l=>{let[s,a]=l,r=t.data.find(e=>e.model_info.id===s);if(r&&e.includes(r.model_name)&&a){let e=r.model_name,l=a.error_message||void 0;m(t=>{let s=t[e];return{...t,[e]:{status:a.status||(null==s?void 0:s.status)||"unknown",lastCheck:a.checked_at?new Date(a.checked_at).toLocaleString():(null==s?void 0:s.lastCheck)||"None",lastSuccess:"healthy"===a.status&&a.checked_at?new Date(a.checked_at).toLocaleString():(null==s?void 0:s.lastSuccess)||"None",loading:!1,error:l?Z(l):null==s?void 0:s.error,fullError:l||(null==s?void 0:s.fullError),successResponse:"healthy"===a.status?a:null==s?void 0:s.successResponse}}})}})}catch(e){console.warn("Failed to fetch updated health statuses from database (non-critical):",e)}},I=e=>{p(e),e?h(r):h([])},E=()=>{f(!1),_(null)},P=()=>{N(!1),k(null)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(Y.Z,{children:"Model Health Status"}),(0,s.jsx)(i.Z,{className:"text-gray-600 mt-1",children:"Run health checks on individual models to verify they are working correctly"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[u.length>0&&(0,s.jsx)(z.Z,{size:"sm",variant:"light",onClick:()=>I(!1),className:"px-3 py-1 text-sm",children:"Clear Selection"}),(0,s.jsx)(z.Z,{size:"sm",variant:"secondary",onClick:A,disabled:Object.values(c).some(e=>e.loading),className:"px-3 py-1 text-sm",children:u.length>0&&u.length<r.length?"Run Selected Checks":"Run All Checks"})]})]})}),(0,s.jsx)("div",{children:(0,s.jsx)(e0.C,{columns:e5(c,u,x,(e,l)=>{l?h(l=>[...l,e]):(h(l=>l.filter(l=>l!==e)),p(!1))},I,S,e=>{switch(e){case"healthy":return(0,s.jsx)(eX.Z,{color:"emerald",children:"healthy"});case"unhealthy":return(0,s.jsx)(eX.Z,{color:"red",children:"unhealthy"});case"checking":return(0,s.jsx)(eX.Z,{color:"blue",children:"checking"});case"none":return(0,s.jsx)(eX.Z,{color:"gray",children:"none"});default:return(0,s.jsx)(eX.Z,{color:"gray",children:"unknown"})}},o,(e,l,t)=>{_({modelName:e,cleanedError:l,fullError:t}),f(!0)},(e,l)=>{k({modelName:e,response:l}),N(!0)},d),data:t.data.map(e=>{let l=c[e.model_name]||{status:"none",lastCheck:"None",loading:!1};return{model_name:e.model_name,model_info:e.model_info,provider:e.provider,litellm_model_name:e.litellm_model_name,health_status:l.status,last_check:l.lastCheck,last_success:l.lastSuccess||"None",health_loading:l.loading,health_error:l.error,health_full_error:l.fullError}}),isLoading:!1,table:C})}),(0,s.jsx)(j.Z,{title:v?"Health Check Error - ".concat(v.modelName):"Error Details",open:g,onCancel:E,footer:[(0,s.jsx)(y.ZP,{onClick:E,children:"Close"},"close")],width:800,children:v&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Error:"}),(0,s.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,s.jsx)(i.Z,{className:"text-red-800",children:v.cleanedError})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Full Error Details:"}),(0,s.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md max-h-96 overflow-y-auto",children:(0,s.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:v.fullError})})]})]})}),(0,s.jsx)(j.Z,{title:w?"Health Check Response - ".concat(w.modelName):"Response Details",open:b,onCancel:P,footer:[(0,s.jsx)(y.ZP,{onClick:P,children:"Close"},"close")],width:800,children:w&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Status:"}),(0,s.jsx)("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-md",children:(0,s.jsx)(i.Z,{className:"text-green-800",children:"Health check passed successfully"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"font-medium",children:"Response Details:"}),(0,s.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md max-h-96 overflow-y-auto",children:(0,s.jsx)("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:JSON.stringify(w.response,null,2)})})]})]})})]})},e8=t(10607),e7=t(86462),e9=t(47686),le=t(77355),ll=t(93416),lt=t(95704),ls=e=>{let{accessToken:l,initialModelGroupAlias:t={},onAliasUpdate:r}=e,[o,i]=(0,a.useState)([]),[d,m]=(0,a.useState)({aliasName:"",targetModelGroup:""}),[u,h]=(0,a.useState)(null),[x,g]=(0,a.useState)(!0);(0,a.useEffect)(()=>{i(Object.entries(t).map((e,l)=>{var t;let[s,a]=e;return{id:"".concat(l,"-").concat(s),aliasName:s,targetModelGroup:"string"==typeof a?a:null!==(t=null==a?void 0:a.model)&&void 0!==t?t:""}}))},[t]);let f=async e=>{if(!l)return console.error("Access token is missing"),!1;try{let t={};return e.forEach(e=>{t[e.aliasName]=e.targetModelGroup}),console.log("Saving model group alias:",t),await (0,n.setCallbacksCall)(l,{router_settings:{model_group_alias:t}}),r&&r(t),!0}catch(e){return console.error("Failed to save model group alias settings:",e),c.Z.fromBackend("Failed to save model group alias settings"),!1}},j=async()=>{if(!d.aliasName||!d.targetModelGroup){c.Z.fromBackend("Please provide both alias name and target model group");return}if(o.some(e=>e.aliasName===d.aliasName)){c.Z.fromBackend("An alias with this name already exists");return}let e=[...o,{id:"".concat(Date.now(),"-").concat(d.aliasName),aliasName:d.aliasName,targetModelGroup:d.targetModelGroup}];await f(e)&&(i(e),m({aliasName:"",targetModelGroup:""}),c.Z.success("Alias added successfully"))},v=e=>{h({...e})},_=async()=>{if(!u)return;if(!u.aliasName||!u.targetModelGroup){c.Z.fromBackend("Please provide both alias name and target model group");return}if(o.some(e=>e.id!==u.id&&e.aliasName===u.aliasName)){c.Z.fromBackend("An alias with this name already exists");return}let e=o.map(e=>e.id===u.id?u:e);await f(e)&&(i(e),h(null),c.Z.success("Alias updated successfully"))},y=()=>{h(null)},b=async e=>{let l=o.filter(l=>l.id!==e);await f(l)&&(i(l),c.Z.success("Alias deleted successfully"))},N=o.reduce((e,l)=>(e[l.aliasName]=l.targetModelGroup,e),{});return(0,s.jsxs)(lt.Zb,{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>g(!x),children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(lt.Dx,{className:"mb-0",children:"Model Group Alias Settings"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Create aliases for your model groups to simplify API calls. For example, you can create an alias 'gpt-4o' that points to 'gpt-4o-mini-openai' model group."})]}),(0,s.jsx)("div",{className:"flex items-center",children:x?(0,s.jsx)(e7.Z,{className:"w-5 h-5 text-gray-500"}):(0,s.jsx)(e9.Z,{className:"w-5 h-5 text-gray-500"})})]}),x&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)(lt.xv,{className:"text-sm font-medium text-gray-700 mb-2",children:"Add New Alias"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Alias Name"}),(0,s.jsx)("input",{type:"text",value:d.aliasName,onChange:e=>m({...d,aliasName:e.target.value}),placeholder:"e.g., gpt-4o",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Target Model Group"}),(0,s.jsx)("input",{type:"text",value:d.targetModelGroup,onChange:e=>m({...d,targetModelGroup:e.target.value}),placeholder:"e.g., gpt-4o-mini-openai",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsxs)("button",{onClick:j,disabled:!d.aliasName||!d.targetModelGroup,className:"flex items-center px-4 py-2 rounded-md text-sm ".concat(d.aliasName&&d.targetModelGroup?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,s.jsx)(le.Z,{className:"w-4 h-4 mr-1"}),"Add Alias"]})})]})]}),(0,s.jsx)(lt.xv,{className:"text-sm font-medium text-gray-700 mb-2",children:"Manage Existing Aliases"}),(0,s.jsx)("div",{className:"rounded-lg custom-border relative mb-6",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)(lt.iA,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,s.jsx)(lt.ss,{children:(0,s.jsxs)(lt.SC,{children:[(0,s.jsx)(lt.xs,{className:"py-1 h-8",children:"Alias Name"}),(0,s.jsx)(lt.xs,{className:"py-1 h-8",children:"Target Model Group"}),(0,s.jsx)(lt.xs,{className:"py-1 h-8",children:"Actions"})]})}),(0,s.jsxs)(lt.RM,{children:[o.map(e=>(0,s.jsx)(lt.SC,{className:"h-8",children:u&&u.id===e.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(lt.pj,{className:"py-0.5",children:(0,s.jsx)("input",{type:"text",value:u.aliasName,onChange:e=>h({...u,aliasName:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})}),(0,s.jsx)(lt.pj,{className:"py-0.5",children:(0,s.jsx)("input",{type:"text",value:u.targetModelGroup,onChange:e=>h({...u,targetModelGroup:e.target.value}),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-sm"})}),(0,s.jsx)(lt.pj,{className:"py-0.5 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:_,className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:"Save"}),(0,s.jsx)("button",{onClick:y,className:"text-xs bg-gray-50 text-gray-600 px-2 py-1 rounded hover:bg-gray-100",children:"Cancel"})]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(lt.pj,{className:"py-0.5 text-sm text-gray-900",children:e.aliasName}),(0,s.jsx)(lt.pj,{className:"py-0.5 text-sm text-gray-500",children:e.targetModelGroup}),(0,s.jsx)(lt.pj,{className:"py-0.5 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>v(e),className:"text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded hover:bg-blue-100",children:(0,s.jsx)(ll.Z,{className:"w-3 h-3"})}),(0,s.jsx)("button",{onClick:()=>b(e.id),className:"text-xs bg-red-50 text-red-600 px-2 py-1 rounded hover:bg-red-100",children:(0,s.jsx)(p.Z,{className:"w-3 h-3"})})]})})]})},e.id)),0===o.length&&(0,s.jsx)(lt.SC,{children:(0,s.jsx)(lt.pj,{colSpan:3,className:"py-0.5 text-sm text-gray-500 text-center",children:"No aliases added yet. Add a new alias above."})})]})]})})}),(0,s.jsxs)(lt.Zb,{children:[(0,s.jsx)(lt.Dx,{className:"mb-4",children:"Configuration Example"}),(0,s.jsx)(lt.xv,{className:"text-gray-600 mb-4",children:"Here's how your current aliases would look in the config.yaml:"}),(0,s.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 font-mono text-sm",children:(0,s.jsxs)("div",{className:"text-gray-700",children:["router_settings:",(0,s.jsx)("br",{}),"\xa0\xa0model_group_alias:",0===Object.keys(N).length?(0,s.jsxs)("span",{className:"text-gray-500",children:[(0,s.jsx)("br",{}),"\xa0\xa0\xa0\xa0# No aliases configured yet"]}):Object.entries(N).map(e=>{let[l,t]=e;return(0,s.jsxs)("span",{children:[(0,s.jsx)("br",{}),'\xa0\xa0\xa0\xa0"',l,'": "',t,'"']},l)})]})})]})]})]})},la=t(27281),lr=t(57365),lo=t(47323);let li=(e,l,t,a,r,o,i,n,c,m,u)=>[{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Model ID"}),accessorKey:"model_info.id",cell:e=>{let{row:l}=e,t=l.original;return(0,s.jsx)(_.Z,{title:t.model_info.id,children:(0,s.jsx)("div",{className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",onClick:()=>a(t.model_info.id),children:t.model_info.id})})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Model Information"}),accessorKey:"model_name",size:250,cell:e=>{let{row:l}=e,t=l.original,a=o(l.original)||"-",r=(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Provider:"})," ",t.provider||"-"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Public Model Name:"})," ",a]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"LiteLLM Model Name:"})," ",t.litellm_model_name||"-"]})]});return(0,s.jsx)(_.Z,{title:r,children:(0,s.jsxs)("div",{className:"flex items-start space-x-2 min-w-0 w-full max-w-[250px]",children:[(0,s.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:t.provider?(0,s.jsx)("img",{src:(0,d.dr)(t.provider).logo,alt:"".concat(t.provider," logo"),className:"w-4 h-4",onError:e=>{let l=e.target,s=l.parentElement;if(s){var a;let e=document.createElement("div");e.className="w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=(null===(a=t.provider)||void 0===a?void 0:a.charAt(0))||"-",s.replaceChild(e,l)}}}):(0,s.jsx)("div",{className:"w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",children:"-"})}),(0,s.jsxs)("div",{className:"flex flex-col min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-gray-900 truncate max-w-[210px]",children:a}),(0,s.jsx)("div",{className:"text-xs text-gray-500 truncate mt-0.5 max-w-[210px]",children:t.litellm_model_name||"-"})]})]})})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Credentials"}),accessorKey:"litellm_credential_name",size:180,cell:e=>{var l;let{row:t}=e,a=null===(l=t.original.litellm_params)||void 0===l?void 0:l.litellm_credential_name;return a?(0,s.jsx)(_.Z,{title:"Credential: ".concat(a),children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 max-w-[180px]",children:[(0,s.jsx)(X.Z,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-xs truncate",title:a,children:a})]})}):(0,s.jsxs)("div",{className:"flex items-center space-x-2 max-w-[180px]",children:[(0,s.jsx)(X.Z,{className:"w-4 h-4 text-gray-300 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"No credentials"})]})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Created By"}),accessorKey:"model_info.created_by",sortingFn:"datetime",size:160,cell:e=>{let{row:l}=e,t=l.original,a=t.model_info.created_by,r=t.model_info.created_at?new Date(t.model_info.created_at).toLocaleDateString():null;return(0,s.jsxs)("div",{className:"flex flex-col min-w-0 max-w-[160px]",children:[(0,s.jsx)("div",{className:"text-xs font-medium text-gray-900 truncate",title:a||"Unknown",children:a||"Unknown"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 truncate mt-0.5",title:r||"Unknown date",children:r||"Unknown date"})]})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Updated At"}),accessorKey:"model_info.updated_at",sortingFn:"datetime",cell:e=>{let{row:l}=e,t=l.original;return(0,s.jsx)("span",{className:"text-xs",children:t.model_info.updated_at?new Date(t.model_info.updated_at).toLocaleDateString():"-"})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Costs"}),accessorKey:"input_cost",size:120,cell:e=>{let{row:l}=e,t=l.original,a=t.input_cost,r=t.output_cost;return a||r?(0,s.jsx)(_.Z,{title:"Cost per 1M tokens",children:(0,s.jsxs)("div",{className:"flex flex-col min-w-0 max-w-[120px]",children:[a&&(0,s.jsxs)("div",{className:"text-xs font-medium text-gray-900 truncate",children:["In: $",a]}),r&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:["Out: $",r]})]})}):(0,s.jsx)("div",{className:"max-w-[120px]",children:(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"-"})})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Team ID"}),accessorKey:"model_info.team_id",cell:e=>{let{row:l}=e,t=l.original;return t.model_info.team_id?(0,s.jsx)("div",{className:"overflow-hidden",children:(0,s.jsx)(_.Z,{title:t.model_info.team_id,children:(0,s.jsxs)(z.Z,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>r(t.model_info.team_id),children:[t.model_info.team_id.slice(0,7),"..."]})})}):"-"}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Model Access Group"}),accessorKey:"model_info.model_access_group",enableSorting:!1,cell:e=>{let{row:l}=e,t=l.original,a=t.model_info.access_groups;if(!a||0===a.length)return"-";let r=t.model_info.id,o=m.has(r),i=a.length>1,n=()=>{let e=new Set(m);o?e.delete(r):e.add(r),u(e)};return(0,s.jsxs)("div",{className:"flex items-center gap-1 overflow-hidden",children:[(0,s.jsx)(eX.Z,{size:"xs",color:"blue",className:"text-xs px-1.5 py-0.5 h-5 leading-tight flex-shrink-0",children:a[0]}),(o||!i&&2===a.length)&&a.slice(1).map((e,l)=>(0,s.jsx)(eX.Z,{size:"xs",color:"blue",className:"text-xs px-1.5 py-0.5 h-5 leading-tight flex-shrink-0",children:e},l+1)),i&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"text-xs text-blue-600 hover:text-blue-800 px-1 py-0.5 rounded hover:bg-blue-50 h-5 leading-tight flex-shrink-0 whitespace-nowrap",children:o?"−":"+".concat(a.length-1)})]})}},{header:()=>(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Status"}),accessorKey:"model_info.db_model",cell:e=>{let{row:l}=e,t=l.original;return(0,s.jsx)("div",{className:"\n          inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium\n          ".concat(t.model_info.db_model?"bg-blue-50 text-blue-600":"bg-gray-100 text-gray-600","\n        "),children:t.model_info.db_model?"DB Model":"Config Model"})}},{id:"actions",header:"",cell:t=>{var r;let{row:o}=t,i=o.original,n="Admin"===e||(null===(r=i.model_info)||void 0===r?void 0:r.created_by)===l;return(0,s.jsx)("div",{className:"flex items-center justify-end gap-2 pr-4",children:(0,s.jsx)(lo.Z,{icon:p.Z,size:"sm",onClick:()=>{n&&(a(i.model_info.id),c(!1))},className:n?"cursor-pointer":"opacity-50 cursor-not-allowed"})})}}];var ln=t(11318),ld=t(39760),lc=e=>{let{selectedModelGroup:l,setSelectedModelGroup:t,availableModelGroups:r,availableModelAccessGroups:n,setSelectedModelId:d,setSelectedTeamId:c,setEditModel:m,modelData:u}=e,{userId:h,userRole:x,premiumUser:p}=(0,ld.Z)(),{teams:g}=(0,ln.Z)(),[f,j]=(0,a.useState)(""),[v,_]=(0,a.useState)("current_team"),[y,b]=(0,a.useState)("personal"),[N,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),[Z,S]=(0,a.useState)(new Set),[A,I]=(0,a.useState)({pageIndex:0,pageSize:50}),E=(0,a.useRef)(null),P=(0,a.useMemo)(()=>u&&u.data&&0!==u.data.length?u.data.filter(e=>{var t,s,a,r,o;let i=""===f||e.model_name.toLowerCase().includes(f.toLowerCase()),n="all"===l||e.model_name===l||!l||"wildcard"===l&&(null===(t=e.model_name)||void 0===t?void 0:t.includes("*")),d="all"===k||(null===(s=e.model_info.access_groups)||void 0===s?void 0:s.includes(k))||!k,c=!0;return"current_team"===v&&(c="personal"===y?(null===(a=e.model_info)||void 0===a?void 0:a.direct_access)===!0:(null===(o=e.model_info)||void 0===o?void 0:null===(r=o.access_via_team_ids)||void 0===r?void 0:r.includes(y))===!0),i&&n&&d&&c}):[],[u,f,l,k,y,v]),M=(0,a.useMemo)(()=>{let e=A.pageIndex*A.pageSize,l=e+A.pageSize;return P.slice(e,l)},[P,A.pageIndex,A.pageSize]);return(0,a.useEffect)(()=>{I(e=>({...e,pageIndex:0}))},[f,l,k,y,v]),(0,s.jsx)(H.Z,{children:(0,s.jsx)(o.Z,{children:(0,s.jsx)("div",{className:"flex flex-col space-y-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"border-b px-6 py-4 bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(i.Z,{className:"text-lg font-semibold text-gray-900",children:"Current Team:"}),(0,s.jsxs)(la.Z,{className:"w-80",defaultValue:"personal",value:y,onValueChange:e=>b(e),children:[(0,s.jsx)(lr.Z,{value:"personal",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,s.jsx)("span",{className:"font-medium",children:"Personal"})]})}),null==g?void 0:g.filter(e=>e.team_id).map(e=>(0,s.jsx)(lr.Z,{value:e.team_id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,s.jsx)("span",{className:"font-medium",children:e.team_alias?"".concat(e.team_alias.slice(0,30),"..."):"Team ".concat(e.team_id.slice(0,30),"...")})]})},e.team_id))]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(i.Z,{className:"text-lg font-semibold text-gray-900",children:"View:"}),(0,s.jsxs)(la.Z,{className:"w-64",defaultValue:"current_team",value:v,onValueChange:e=>_(e),children:[(0,s.jsx)(lr.Z,{value:"current_team",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),(0,s.jsx)("span",{className:"font-medium",children:"Current Team Models"})]})}),(0,s.jsx)(lr.Z,{value:"all",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full"}),(0,s.jsx)("span",{className:"font-medium",children:"All Available Models"})]})})]})]})]}),"current_team"===v&&(0,s.jsxs)("div",{className:"flex items-start gap-2 mt-3",children:[(0,s.jsx)(el.Z,{className:"text-gray-400 mt-0.5 flex-shrink-0 text-xs"}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"personal"===y?(0,s.jsxs)("span",{children:["To access these models: Create a Virtual Key without selecting a team on the"," ",(0,s.jsx)("a",{href:"/public?login=success&page=api-keys",className:"text-gray-600 hover:text-gray-800 underline",children:"Virtual Keys page"})]}):(0,s.jsxs)("span",{children:['To access these models: Create a Virtual Key and select Team as "',y,'" on the'," ",(0,s.jsx)("a",{href:"/public?login=success&page=api-keys",className:"text-gray-600 hover:text-gray-800 underline",children:"Virtual Keys page"})]})})]})]}),(0,s.jsx)("div",{className:"border-b px-6 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative w-64",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search model names...",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:f,onChange:e=>j(e.target.value)}),(0,s.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,s.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 ".concat(N?"bg-gray-100":""),onClick:()=>w(!N),children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters"]}),(0,s.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",onClick:()=>{j(""),t("all"),C(null),b("personal"),_("current_team"),I({pageIndex:0,pageSize:50})},children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Filters"]})]}),N&&(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[(0,s.jsx)("div",{className:"w-64",children:(0,s.jsxs)(la.Z,{value:null!=l?l:"all",onValueChange:e=>t("all"===e?"all":e),placeholder:"Filter by Public Model Name",children:[(0,s.jsx)(lr.Z,{value:"all",children:"All Models"}),(0,s.jsx)(lr.Z,{value:"wildcard",children:"Wildcard Models (*)"}),r.map((e,l)=>(0,s.jsx)(lr.Z,{value:e,children:e},l))]})}),(0,s.jsx)("div",{className:"w-64",children:(0,s.jsxs)(la.Z,{value:null!=k?k:"all",onValueChange:e=>C("all"===e?null:e),placeholder:"Filter by Model Access Group",children:[(0,s.jsx)(lr.Z,{value:"all",children:"All Model Access Groups"}),n.map((e,l)=>(0,s.jsx)(lr.Z,{value:e,children:e},l))]})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-gray-700",children:P.length>0?"Showing ".concat(A.pageIndex*A.pageSize+1," - ").concat(Math.min((A.pageIndex+1)*A.pageSize,P.length)," of ").concat(P.length," results"):"Showing 0 results"}),P.length>A.pageSize&&(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>I(e=>({...e,pageIndex:e.pageIndex-1})),disabled:0===A.pageIndex,className:"px-3 py-1 text-sm border rounded-md ".concat(0===A.pageIndex?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-gray-50"),children:"Previous"}),(0,s.jsx)("button",{onClick:()=>I(e=>({...e,pageIndex:e.pageIndex+1})),disabled:A.pageIndex>=Math.ceil(P.length/A.pageSize)-1,className:"px-3 py-1 text-sm border rounded-md ".concat(A.pageIndex>=Math.ceil(P.length/A.pageSize)-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-gray-50"),children:"Next"})]})]})]})}),(0,s.jsx)(e0.C,{columns:li(x,h,p,d,c,O,()=>{},()=>{},m,Z,S),data:M,isLoading:!1,table:E})]})})})})},lm=t(93142),lu=t(867),lh=t(3810),lx=t(89245),lp=t(5540),lg=t(8881);let{Text:lf}=g.default;var lj=e=>{let{accessToken:l,onReloadSuccess:t,buttonText:r="Reload Price Data",showIcon:o=!0,size:i="middle",type:d="primary",className:m=""}=e,[u,h]=(0,a.useState)(!1),[x,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),[v,_]=(0,a.useState)(!1),[b,N]=(0,a.useState)(6),[w,k]=(0,a.useState)(null),[C,Z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{S();let e=setInterval(()=>{S()},3e4);return()=>clearInterval(e)},[l]);let S=async()=>{if(l){Z(!0);try{console.log("Fetching reload status...");let e=await (0,n.getModelCostMapReloadStatus)(l);console.log("Received status:",e),k(e)}catch(e){console.error("Failed to fetch reload status:",e),k({scheduled:!1,interval_hours:null,last_run:null,next_run:null})}finally{Z(!1)}}},A=async()=>{if(!l){c.Z.fromBackend("No access token available");return}h(!0);try{let e=await (0,n.reloadModelCostMap)(l);"success"===e.status?(c.Z.success("Price data reloaded successfully! ".concat(e.models_count||0," models updated.")),null==t||t(),await S()):c.Z.fromBackend("Failed to reload price data")}catch(e){console.error("Error reloading price data:",e),c.Z.fromBackend("Failed to reload price data. Please try again.")}finally{h(!1)}},I=async()=>{if(!l){c.Z.fromBackend("No access token available");return}if(b<=0){c.Z.fromBackend("Hours must be greater than 0");return}p(!0);try{let e=await (0,n.scheduleModelCostMapReload)(l,b);"success"===e.status?(c.Z.success("Periodic reload scheduled for every ".concat(b," hours")),_(!1),await S()):c.Z.fromBackend("Failed to schedule periodic reload")}catch(e){console.error("Error scheduling reload:",e),c.Z.fromBackend("Failed to schedule periodic reload. Please try again.")}finally{p(!1)}},E=async()=>{if(!l){c.Z.fromBackend("No access token available");return}f(!0);try{let e=await (0,n.cancelModelCostMapReload)(l);"success"===e.status?(c.Z.success("Periodic reload cancelled successfully"),await S()):c.Z.fromBackend("Failed to cancel periodic reload")}catch(e){console.error("Error cancelling reload:",e),c.Z.fromBackend("Failed to cancel periodic reload. Please try again.")}finally{f(!1)}},P=e=>{if(!e)return"Never";try{return new Date(e).toLocaleString()}catch(l){return e}};return(0,s.jsxs)("div",{className:m,children:[(0,s.jsxs)(lm.Z,{direction:"horizontal",size:"middle",style:{marginBottom:16},children:[(0,s.jsx)(lu.Z,{title:"Hard Refresh Price Data",description:"This will immediately fetch the latest pricing information from the remote source. Continue?",onConfirm:A,okText:"Yes",cancelText:"No",okButtonProps:{style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem",transition:"all 0.2s ease-in-out"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4f46e5"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1"}},children:(0,s.jsx)(y.ZP,{type:d,size:i,loading:u,icon:o?(0,s.jsx)(lx.Z,{}):void 0,style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem",transition:"all 0.2s ease-in-out"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4f46e5"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#6366f1"},children:r})}),(null==w?void 0:w.scheduled)?(0,s.jsx)(y.ZP,{type:"default",size:i,danger:!0,icon:(0,s.jsx)(lg.Z,{}),loading:g,onClick:E,style:{borderColor:"#ff4d4f",color:"#ff4d4f",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem"},children:"Cancel Periodic Reload"}):(0,s.jsx)(y.ZP,{type:"default",size:i,icon:(0,s.jsx)(lp.Z,{}),onClick:()=>_(!0),style:{borderColor:"#d9d9d9",color:"#6366f1",fontWeight:"500",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",height:"auto",fontSize:"0.875rem",lineHeight:"1.25rem"},children:"Set Up Periodic Reload"})]}),w&&(0,s.jsx)(ep.Z,{size:"small",style:{backgroundColor:"#f8f9fa",border:"1px solid #e9ecef",borderRadius:8},children:(0,s.jsxs)(lm.Z,{direction:"vertical",size:"small",style:{width:"100%"},children:[w.scheduled?(0,s.jsx)("div",{children:(0,s.jsxs)(lh.Z,{color:"green",icon:(0,s.jsx)(lp.Z,{}),children:["Scheduled every ",w.interval_hours," hours"]})}):(0,s.jsx)(lf,{type:"secondary",children:"No periodic reload scheduled"}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(lf,{type:"secondary",style:{fontSize:"12px"},children:"Last run:"}),(0,s.jsx)(lf,{style:{fontSize:"12px"},children:P(w.last_run)})]}),w.scheduled&&(0,s.jsxs)(s.Fragment,{children:[w.next_run&&(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(lf,{type:"secondary",style:{fontSize:"12px"},children:"Next run:"}),(0,s.jsx)(lf,{style:{fontSize:"12px"},children:P(w.next_run)})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsx)(lf,{type:"secondary",style:{fontSize:"12px"},children:"Status:"}),(0,s.jsx)(lh.Z,{color:(null==w?void 0:w.scheduled)?w.last_run?"success":"processing":"default",children:(null==w?void 0:w.scheduled)?w.last_run?"Active":"Ready":"Not scheduled"})]})]})]})}),(0,s.jsxs)(j.Z,{title:"Set Up Periodic Reload",open:v,onOk:I,onCancel:()=>_(!1),confirmLoading:x,okText:"Schedule",cancelText:"Cancel",okButtonProps:{style:{backgroundColor:"#6366f1",borderColor:"#6366f1",color:"white"}},children:[(0,s.jsx)("div",{style:{marginBottom:16},children:(0,s.jsx)(lf,{children:"Set up automatic reload of price data every:"})}),(0,s.jsx)("div",{style:{marginBottom:16},children:(0,s.jsx)(eg.Z,{min:1,max:168,value:b,onChange:e=>N(e||6),addonAfter:"hours",style:{width:"100%"}})}),(0,s.jsx)("div",{children:(0,s.jsxs)(lf,{type:"secondary",children:["This will automatically fetch the latest pricing data from the remote source every ",b," hours."]})})]})]})},lv=e=>{let{setModelMap:l}=e,{accessToken:t}=(0,ld.Z)();return(0,s.jsx)(H.Z,{children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)(Y.Z,{children:"Price Data Management"}),(0,s.jsx)(i.Z,{className:"text-tremor-content",children:"Manage model pricing data and configure automatic reload schedules"})]}),(0,s.jsx)(lj,{accessToken:t,onReloadSuccess:()=>{(async()=>{l(await (0,n.modelCostMap)(t))})()},buttonText:"Reload Price Data",size:"middle",type:"primary",className:"w-full"})]})})};let l_={"BadRequestError (400)":"BadRequestErrorRetries","AuthenticationError  (401)":"AuthenticationErrorRetries","TimeoutError (408)":"TimeoutErrorRetries","RateLimitError (429)":"RateLimitErrorRetries","ContentPolicyViolationError (400)":"ContentPolicyViolationErrorRetries","InternalServerError (500)":"InternalServerErrorRetries"};var ly=e=>{let{selectedModelGroup:l,setSelectedModelGroup:t,availableModelGroups:a,globalRetryPolicy:r,setGlobalRetryPolicy:o,defaultRetry:n,modelGroupRetryPolicy:d,setModelGroupRetryPolicy:c,handleSaveRetrySettings:m}=e;return(0,s.jsxs)(H.Z,{children:[(0,s.jsx)("div",{className:"flex items-center gap-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(i.Z,{children:"Retry Policy Scope:"}),(0,s.jsxs)(la.Z,{className:"ml-2 w-48",defaultValue:"global",value:"global"===l?"global":l||a[0],onValueChange:e=>t(e),children:[(0,s.jsx)(lr.Z,{value:"global",children:"Global Default"}),a.map((e,l)=>(0,s.jsx)(lr.Z,{value:e,onClick:()=>t(e),children:e},l))]})]})}),"global"===l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Y.Z,{children:"Global Retry Policy"}),(0,s.jsx)(i.Z,{className:"mb-6",children:"Default retry settings applied to all model groups unless overridden"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(Y.Z,{children:["Retry Policy for ",l]}),(0,s.jsx)(i.Z,{className:"mb-6",children:"Model-specific retry settings. Falls back to global defaults if not set."})]}),l_&&(0,s.jsx)("table",{children:(0,s.jsx)("tbody",{children:Object.entries(l_).map((e,t)=>{var a,m,u,h;let x,[p,g]=e;if("global"===l)x=null!==(a=null==r?void 0:r[g])&&void 0!==a?a:n;else{let e=null==d?void 0:null===(m=d[l])||void 0===m?void 0:m[g];x=null!=e?e:null!==(u=null==r?void 0:r[g])&&void 0!==u?u:n}return(0,s.jsxs)("tr",{className:"flex justify-between items-center mt-2",children:[(0,s.jsxs)("td",{children:[(0,s.jsx)(i.Z,{children:p}),"global"!==l&&(0,s.jsxs)(i.Z,{className:"text-xs text-gray-500 ml-2",children:["(Global: ",null!==(h=null==r?void 0:r[g])&&void 0!==h?h:n,")"]})]}),(0,s.jsx)("td",{children:(0,s.jsx)(eg.Z,{className:"ml-5",value:x,min:0,step:1,onChange:e=>{"global"===l?o(l=>null==e?l:{...null!=l?l:{},[g]:e}):c(t=>{var s;let a=null!==(s=null==t?void 0:t[l])&&void 0!==s?s:{};return{...null!=t?t:{},[l]:{...a,[g]:e}}})}})})]},t)})})}),(0,s.jsx)(z.Z,{className:"mt-6 mr-8",onClick:m,children:"Save"})]})},lb=t(75105),lN=t(40278),lw=t(97765),lk=t(21626),lC=t(97214),lZ=t(28241),lS=t(58834),lA=t(69552),lI=t(71876),lE=t(39789),lP=t(79326),lM=t(2356),lF=t(59664),lT=e=>{let{modelMetrics:l,modelMetricsCategories:t,customTooltip:a,premiumUser:r}=e;return(0,s.jsx)(lF.Z,{title:"Time to First token (s)",className:"h-72",data:l,index:"date",showLegend:!1,categories:t,colors:["indigo","rose"],connectNulls:!0,customTooltip:a})},lL=e=>{let{setSelectedAPIKey:l,keys:t,teams:r,setSelectedCustomer:o,allEndUsers:n}=e,{premiumUser:d}=(0,ld.Z)(),[c,m]=(0,a.useState)(null);return(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"mb-1",children:"Select API Key Name"}),d?(0,s.jsxs)("div",{children:[(0,s.jsxs)(la.Z,{defaultValue:"all-keys",children:[(0,s.jsx)(lr.Z,{value:"all-keys",onClick:()=>{l(null)},children:"All Keys"},"all-keys"),null==t?void 0:t.map((e,t)=>e&&null!==e.key_alias&&e.key_alias.length>0?(0,s.jsx)(lr.Z,{value:String(t),onClick:()=>{l(e)},children:e.key_alias},t):null)]}),(0,s.jsx)(i.Z,{className:"mt-1",children:"Select Customer Name"}),(0,s.jsxs)(la.Z,{defaultValue:"all-customers",children:[(0,s.jsx)(lr.Z,{value:"all-customers",onClick:()=>{o(null)},children:"All Customers"},"all-customers"),null==n?void 0:n.map((e,l)=>(0,s.jsx)(lr.Z,{value:e,onClick:()=>{o(e)},children:e},l))]}),(0,s.jsx)(i.Z,{className:"mt-1",children:"Select Team"}),(0,s.jsxs)(la.Z,{className:"w-64 relative z-50",defaultValue:"all",value:null!=c?c:"all",onValueChange:e=>m("all"===e?null:e),children:[(0,s.jsx)(lr.Z,{value:"all",children:"All Teams"}),null==r?void 0:r.filter(e=>e.team_id).map(e=>(0,s.jsx)(lr.Z,{value:e.team_id,children:e.team_alias?"".concat(e.team_alias," (").concat(e.team_id.slice(0,8),"...)"):"Team ".concat(e.team_id.slice(0,8),"...")},e.team_id))]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Z,{className:"mt-1",children:"Select Team"}),(0,s.jsxs)(la.Z,{className:"w-64 relative z-50",defaultValue:"all",value:null!=c?c:"all",onValueChange:e=>m("all"===e?null:e),children:[(0,s.jsx)(lr.Z,{value:"all",children:"All Teams"}),null==r?void 0:r.filter(e=>e.team_id).map(e=>(0,s.jsx)(lr.Z,{value:e.team_id,children:e.team_alias?"".concat(e.team_alias," (").concat(e.team_id.slice(0,8),"...)"):"Team ".concat(e.team_id.slice(0,8),"...")},e.team_id))]})]})]})},lR=e=>{let{dateValue:l,setDateValue:t,selectedModelGroup:d,availableModelGroups:c,setShowAdvancedFilters:m,modelMetrics:u,modelMetricsCategories:h,streamingModelMetrics:x,streamingModelMetricsCategories:p,customTooltip:g,slowResponsesData:f,modelExceptions:j,globalExceptionData:v,allExceptions:_,globalExceptionPerDeployment:y,setSelectedAPIKey:b,keys:N,setSelectedCustomer:w,teams:k,allEndUsers:C,selectedAPIKey:Z,selectedCustomer:S,selectedTeam:A,setSelectedModelGroup:I,setModelMetrics:E,setModelMetricsCategories:P,setStreamingModelMetrics:M,setStreamingModelMetricsCategories:F,setSlowResponsesData:T,setModelExceptions:L,setAllExceptions:R,setGlobalExceptionData:O,setGlobalExceptionPerDeployment:D}=e,{accessToken:V,userId:q,userRole:W,premiumUser:$}=(0,ld.Z)();(0,a.useEffect)(()=>{Q(d,l.from,l.to)},[Z,S,A]);let Q=async(e,l,t)=>{if(console.log("Updating model metrics for group:",e),!V||!q||!W||!l||!t)return;console.log("inside updateModelMetrics - startTime:",l,"endTime:",t),I(e);let s=null==Z?void 0:Z.token;void 0===s&&(s=null);let a=S;void 0===a&&(a=null);try{let r=await (0,n.modelMetricsCall)(V,q,W,e,l.toISOString(),t.toISOString(),s,a);console.log("Model metrics response:",r),E(r.data),P(r.all_api_bases);let o=await (0,n.streamingModelMetricsCall)(V,e,l.toISOString(),t.toISOString());M(o.data),F(o.all_api_bases);let i=await (0,n.modelExceptionsCall)(V,q,W,e,l.toISOString(),t.toISOString(),s,a);console.log("Model exceptions response:",i),L(i.data),R(i.exception_types);let d=await (0,n.modelMetricsSlowResponsesCall)(V,q,W,e,l.toISOString(),t.toISOString(),s,a);if(console.log("slowResponses:",d),T(d),e){let s=await (0,n.adminGlobalActivityExceptions)(V,null==l?void 0:l.toISOString().split("T")[0],null==t?void 0:t.toISOString().split("T")[0],e);O(s);let a=await (0,n.adminGlobalActivityExceptionsPerDeployment)(V,null==l?void 0:l.toISOString().split("T")[0],null==t?void 0:t.toISOString().split("T")[0],e);D(a)}}catch(e){console.error("Failed to fetch model metrics",e)}};return(0,s.jsxs)(H.Z,{children:[(0,s.jsxs)(o.Z,{numItems:4,className:"mt-2 mb-2",children:[(0,s.jsx)(r.Z,{children:(0,s.jsx)(lE.Z,{value:l,className:"mr-2",onValueChange:e=>{t(e),Q(d,e.from,e.to)}})}),(0,s.jsxs)(r.Z,{className:"ml-2",children:[(0,s.jsx)(i.Z,{children:"Select Model Group"}),(0,s.jsx)(la.Z,{defaultValue:d||c[0],value:d||c[0],children:c.map((e,t)=>(0,s.jsx)(lr.Z,{value:e,onClick:()=>Q(e,l.from,l.to),children:e},t))})]}),(0,s.jsx)(r.Z,{children:(0,s.jsx)(lP.Z,{trigger:"click",content:(0,s.jsx)(lL,{allEndUsers:C,keys:N,setSelectedAPIKey:b,setSelectedCustomer:w,teams:k}),overlayStyle:{width:"20vw"},children:(0,s.jsx)(z.Z,{icon:lM.Z,size:"md",variant:"secondary",className:"mt-4 ml-2",style:{border:"none"},onClick:()=>m(!0)})})})]}),(0,s.jsxs)(o.Z,{numItems:2,children:[(0,s.jsx)(r.Z,{children:(0,s.jsx)(B.Z,{className:"mr-2 max-h-[400px] min-h-[400px]",children:(0,s.jsxs)(U.Z,{children:[(0,s.jsxs)(G.Z,{variant:"line",defaultValue:"1",children:[(0,s.jsx)(K.Z,{value:"1",children:"Avg. Latency per Token"}),(0,s.jsx)(K.Z,{value:"2",children:"Time to first token"})]}),(0,s.jsxs)(J.Z,{children:[(0,s.jsxs)(H.Z,{children:[(0,s.jsx)("p",{className:"text-gray-500 italic",children:" (seconds/token)"}),(0,s.jsx)(i.Z,{className:"text-gray-500 italic mt-1 mb-1",children:"average Latency for successfull requests divided by the total tokens"}),u&&h&&(0,s.jsx)(lb.Z,{title:"Model Latency",className:"h-72",data:u,showLegend:!1,index:"date",categories:h,connectNulls:!0,customTooltip:g})]}),(0,s.jsx)(H.Z,{children:(0,s.jsx)(lT,{modelMetrics:x,modelMetricsCategories:p,customTooltip:g,premiumUser:$})})]})]})})}),(0,s.jsx)(r.Z,{children:(0,s.jsx)(B.Z,{className:"ml-2 max-h-[400px] min-h-[400px]  overflow-y-auto",children:(0,s.jsxs)(lk.Z,{children:[(0,s.jsx)(lS.Z,{children:(0,s.jsxs)(lI.Z,{children:[(0,s.jsx)(lA.Z,{children:"Deployment"}),(0,s.jsx)(lA.Z,{children:"Success Responses"}),(0,s.jsxs)(lA.Z,{children:["Slow Responses ",(0,s.jsx)("p",{children:"Success Responses taking 600+s"})]})]})}),(0,s.jsx)(lC.Z,{children:f.map((e,l)=>(0,s.jsxs)(lI.Z,{children:[(0,s.jsx)(lZ.Z,{children:e.api_base}),(0,s.jsx)(lZ.Z,{children:e.total_count}),(0,s.jsx)(lZ.Z,{children:e.slow_count})]},l))})]})})})]}),(0,s.jsx)(o.Z,{numItems:1,className:"gap-2 w-full mt-2",children:(0,s.jsxs)(B.Z,{children:[(0,s.jsxs)(Y.Z,{children:["All Exceptions for ",d]}),(0,s.jsx)(lN.Z,{className:"h-60",data:j,index:"model",categories:_,stack:!0,yAxisWidth:30})]})}),(0,s.jsxs)(o.Z,{numItems:1,className:"gap-2 w-full mt-2",children:[(0,s.jsxs)(B.Z,{children:[(0,s.jsxs)(Y.Z,{children:["All Up Rate Limit Errors (429) for ",d]}),(0,s.jsxs)(o.Z,{numItems:1,children:[(0,s.jsxs)(r.Z,{children:[(0,s.jsxs)(lw.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Num Rate Limit Errors ",v.sum_num_rate_limit_exceptions]}),(0,s.jsx)(lN.Z,{className:"h-40",data:v.daily_data,index:"date",colors:["rose"],categories:["num_rate_limit_exceptions"],onValueChange:e=>console.log(e)})]}),(0,s.jsx)(r.Z,{})]})]}),$?(0,s.jsx)(s.Fragment,{children:y.map((e,l)=>(0,s.jsxs)(B.Z,{children:[(0,s.jsx)(Y.Z,{children:e.api_base?e.api_base:"Unknown API Base"}),(0,s.jsx)(o.Z,{numItems:1,children:(0,s.jsxs)(r.Z,{children:[(0,s.jsxs)(lw.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Num Rate Limit Errors (429) ",e.sum_num_rate_limit_exceptions]}),(0,s.jsx)(lN.Z,{className:"h-40",data:e.daily_data,index:"date",colors:["rose"],categories:["num_rate_limit_exceptions"],onValueChange:e=>console.log(e)})]})})]},l))}):(0,s.jsx)(s.Fragment,{children:y&&y.length>0&&y.slice(0,1).map((e,l)=>(0,s.jsxs)(B.Z,{children:[(0,s.jsx)(Y.Z,{children:"✨ Rate Limit Errors by Deployment"}),(0,s.jsx)("p",{className:"mb-2 text-gray-500 italic text-[12px]",children:"Upgrade to see exceptions for all deployments"}),(0,s.jsx)(z.Z,{variant:"primary",className:"mb-2",children:(0,s.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"Get Free Trial"})}),(0,s.jsxs)(B.Z,{children:[(0,s.jsx)(Y.Z,{children:e.api_base}),(0,s.jsx)(o.Z,{numItems:1,children:(0,s.jsxs)(r.Z,{children:[(0,s.jsxs)(lw.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Num Rate Limit Errors ",e.sum_num_rate_limit_exceptions]}),(0,s.jsx)(lN.Z,{className:"h-40",data:e.daily_data,index:"date",colors:["rose"],categories:["num_rate_limit_exceptions"],onValueChange:e=>console.log(e)})]})})]})]},l))})]})]})},lO=e=>{let{accessToken:l,token:t,userRole:m,userID:h,modelData:x={data:[]},keys:p,setModelData:j,premiumUser:v,teams:_}=e,[y]=f.Z.useForm(),[b,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(""),[C,Z]=(0,a.useState)([]),[S,A]=(0,a.useState)([]),[I,E]=(0,a.useState)(d.Cl.OpenAI),[P,M]=(0,a.useState)(!1),[F,T]=(0,a.useState)(null),[L,z]=(0,a.useState)([]),[B,K]=(0,a.useState)([]),[U,G]=(0,a.useState)(null),[H,J]=(0,a.useState)([]),[W,Y]=(0,a.useState)([]),[$,Q]=(0,a.useState)([]),[X,ee]=(0,a.useState)([]),[el,et]=(0,a.useState)([]),[es,ea]=(0,a.useState)([]),[er,eo]=(0,a.useState)([]),[ei,en]=(0,a.useState)({from:new Date(Date.now()-6048e5),to:new Date}),[ed,ec]=(0,a.useState)(null),[em,eu]=(0,a.useState)(null),[eh,ex]=(0,a.useState)(0),[ep,eg]=(0,a.useState)({}),[ef,ej]=(0,a.useState)([]),[ev,e_]=(0,a.useState)(!1),[ey,eb]=(0,a.useState)(null),[eN,ek]=(0,a.useState)(null),[eC,eZ]=(0,a.useState)([]),[eS,eA]=(0,a.useState)([]),[eI,eE]=(0,a.useState)({}),[eP,eM]=(0,a.useState)(!1),[eF,eT]=(0,a.useState)(null),[eL,eR]=(0,a.useState)(!1),[eO,eD]=(0,a.useState)(null),[eV,eq]=(0,a.useState)(null),[ez,eB]=(0,a.useState)(!1),eK=(0,a.useRef)(null),[eG,eH]=(0,a.useState)(0),eJ=async e=>{try{let l=await (0,n.credentialListCall)(e);console.log("credentials: ".concat(JSON.stringify(l))),eA(l.credentials)}catch(e){console.error("Error fetching credentials:",e)}};(0,a.useEffect)(()=>{let e=e=>{eK.current&&!eK.current.contains(e.target)&&eB(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let eW={name:"file",accept:".json",beforeUpload:e=>{if("application/json"===e.type){let l=new FileReader;l.onload=e=>{if(e.target){let l=e.target.result;console.log("Resetting vertex_credentials to JSON; jsonStr: ".concat(l)),y.setFieldsValue({vertex_credentials:l}),console.log("Form values right after setting:",y.getFieldsValue())}},l.readAsText(e)}return!1},onChange(e){console.log("Upload onChange triggered with values:",e),console.log("Current form values:",y.getFieldsValue()),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?c.Z.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&c.Z.fromBackend("".concat(e.file.name," file upload failed."))}},eY=()=>{k(new Date().toLocaleString())},e$=async()=>{if(!l){console.error("Access token is missing");return}try{let e={router_settings:{}};"global"===U?(console.log("Saving global retry policy:",em),em&&(e.router_settings.retry_policy=em),c.Z.success("Global retry settings saved successfully")):(console.log("Saving model group retry policy for",U,":",ed),ed&&(e.router_settings.model_group_retry_policy=ed),c.Z.success("Retry settings saved successfully for ".concat(U))),await (0,n.setCallbacksCall)(l,e)}catch(e){console.error("Failed to save retry settings:",e),c.Z.fromBackend("Failed to save retry settings")}};if((0,a.useEffect)(()=>{if(!l||!t||!m||!h)return;let e=async()=>{try{var e,t,s,a,r,o,i,d,c,u,x,p;let g=await (0,n.modelInfoCall)(l,h,m);console.log("Model data response:",g.data),j(g);let f=await (0,n.modelSettingsCall)(l);f&&A(f);let v=new Set;for(let e=0;e<g.data.length;e++){let l=g.data[e];v.add(l.model_name)}console.log("all_model_groups:",v);let _=Array.from(v);_=_.sort(),z(_);let y=new Set;for(let e=0;e<g.data.length;e++){let l=g.data[e].model_info;if(l){let e=l.access_groups;if(e)for(let l=0;l<e.length;l++)y.add(e[l])}}K(Array.from(y)),console.log("array_model_groups:",_);let b="all";_.length>0&&(b=_[_.length-1],console.log("_initial_model_group:",b)),console.log("selectedModelGroup:",U);let N=await (0,n.modelMetricsCall)(l,h,m,b,null===(e=ei.from)||void 0===e?void 0:e.toISOString(),null===(t=ei.to)||void 0===t?void 0:t.toISOString(),null==ey?void 0:ey.token,eN);console.log("Model metrics response:",N),J(N.data),Y(N.all_api_bases);let w=await (0,n.streamingModelMetricsCall)(l,b,null===(s=ei.from)||void 0===s?void 0:s.toISOString(),null===(a=ei.to)||void 0===a?void 0:a.toISOString());Q(w.data),ee(w.all_api_bases);let k=await (0,n.modelExceptionsCall)(l,h,m,b,null===(r=ei.from)||void 0===r?void 0:r.toISOString(),null===(o=ei.to)||void 0===o?void 0:o.toISOString(),null==ey?void 0:ey.token,eN);console.log("Model exceptions response:",k),et(k.data),ea(k.exception_types);let C=await (0,n.modelMetricsSlowResponsesCall)(l,h,m,b,null===(i=ei.from)||void 0===i?void 0:i.toISOString(),null===(d=ei.to)||void 0===d?void 0:d.toISOString(),null==ey?void 0:ey.token,eN),Z=await (0,n.adminGlobalActivityExceptions)(l,null===(c=ei.from)||void 0===c?void 0:c.toISOString().split("T")[0],null===(u=ei.to)||void 0===u?void 0:u.toISOString().split("T")[0],b);eg(Z);let S=await (0,n.adminGlobalActivityExceptionsPerDeployment)(l,null===(x=ei.from)||void 0===x?void 0:x.toISOString().split("T")[0],null===(p=ei.to)||void 0===p?void 0:p.toISOString().split("T")[0],b);ej(S),console.log("dailyExceptions:",Z),console.log("dailyExceptionsPerDeplyment:",S),console.log("slowResponses:",C),eo(C);let I=await (0,n.allEndUsersCall)(l);eZ(null==I?void 0:I.map(e=>e.user_id));let E=(await (0,n.getCallbacksCall)(l,h,m)).router_settings;console.log("routerSettingsInfo:",E);let P=E.model_group_retry_policy,M=E.num_retries;console.log("model_group_retry_policy:",P),console.log("default_retries:",M),ec(P),eu(E.retry_policy),ex(M);let F=E.model_group_alias||{};eE(F)}catch(e){console.error("There was an error fetching the model data",e)}};l&&t&&m&&h&&e();let s=async()=>{let e=await (0,n.modelCostMap)(l);console.log("received model cost map data: ".concat(Object.keys(e))),N(e)};null==b&&s(),eY()},[l,t,m,h,b,w,eV]),!x||!l||!t||!m||!h)return(0,s.jsx)("div",{children:"Loading..."});let eX=[],e0=[];for(let e=0;e<x.data.length;e++){var e1,e2,e4;let l=x.data[e],t=null==l?void 0:null===(e1=l.litellm_params)||void 0===e1?void 0:e1.model,s=null==l?void 0:null===(e2=l.litellm_params)||void 0===e2?void 0:e2.custom_llm_provider,a=null==l?void 0:l.model_info,r="",o="Undefined",i="Undefined",n="Undefined",d="Undefined",c={},m=e=>(console.log("GET PROVIDER CALLED! - ".concat(b)),null!=b&&"object"==typeof b&&e in b)?b[e].litellm_provider:"openai";if(t){let e=t.split("/"),l=e[0];(r=s)||(r=1===e.length?m(t):l)}else r="-";a&&(o=null==a?void 0:a.input_cost_per_token,i=null==a?void 0:a.output_cost_per_token,n=null==a?void 0:a.max_tokens,d=null==a?void 0:a.max_input_tokens),(null==l?void 0:l.litellm_params)&&(c=Object.fromEntries(Object.entries(null==l?void 0:l.litellm_params).filter(e=>{let[l]=e;return"model"!==l&&"api_base"!==l}))),x.data[e].provider=r,x.data[e].input_cost=o,x.data[e].output_cost=i,x.data[e].litellm_model_name=t,e0.push(r),x.data[e].input_cost&&(x.data[e].input_cost=(1e6*Number(x.data[e].input_cost)).toFixed(2)),x.data[e].output_cost&&(x.data[e].output_cost=(1e6*Number(x.data[e].output_cost)).toFixed(2)),x.data[e].max_tokens=n,x.data[e].max_input_tokens=d,x.data[e].api_base=null==l?void 0:null===(e4=l.litellm_params)||void 0===e4?void 0:e4.api_base,x.data[e].cleanedLitellmParams=c,eX.push(l.model_name),console.log(x.data[e])}if(m&&"Admin Viewer"==m){let{Title:e,Paragraph:l}=g.default;return(0,s.jsxs)("div",{children:[(0,s.jsx)(e,{level:1,children:"Access Denied"}),(0,s.jsx)(l,{children:"Ask your proxy admin for access to view all models"})]})}return(console.log("selectedProvider: ".concat(I)),console.log("providerModels.length: ".concat(C.length)),Object.keys(d.Cl).find(e=>d.Cl[e]===I),eO)?(0,s.jsx)("div",{className:"w-full h-full",children:(0,s.jsx)(q.Z,{teamId:eO,onClose:()=>eD(null),accessToken:l,is_team_admin:"Admin"===m,is_proxy_admin:"Proxy Admin"===m,userModels:eX,editTeam:!1,onUpdate:eY})}):(0,s.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,s.jsx)(o.Z,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,s.jsxs)(r.Z,{numColSpan:1,className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Model Management"}),eU.ZL.includes(m)?(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Add and manage models for the proxy"}):(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Add models for teams you are an admin for."})]})}),eF?(0,s.jsx)(ew,{modelId:eF,editModel:!0,onClose:()=>{eT(null),eR(!1)},modelData:x.data.find(e=>e.model_info.id===eF),accessToken:l,userID:h,userRole:m,setEditModalVisible:M,setSelectedModel:T,onModelUpdate:e=>{j({...x,data:x.data.map(l=>l.model_info.id===e.model_info.id?e:l)}),eY()},modelAccessGroups:B}):(0,s.jsxs)(D.v0,{index:eG,onIndexChange:eH,className:"gap-2 h-[75vh] w-full ",children:[(0,s.jsxs)(D.td,{className:"flex justify-between mt-2 w-full items-center",children:[(0,s.jsxs)("div",{className:"flex",children:[eU.ZL.includes(m)?(0,s.jsx)(D.OK,{children:"All Models"}):(0,s.jsx)(D.OK,{children:"Your Models"}),(0,s.jsx)(D.OK,{children:"Add Model"}),eU.ZL.includes(m)&&(0,s.jsx)(D.OK,{children:"LLM Credentials"}),eU.ZL.includes(m)&&(0,s.jsx)(D.OK,{children:"Pass-Through Endpoints"}),eU.ZL.includes(m)&&(0,s.jsx)(D.OK,{children:"Health Status"}),eU.ZL.includes(m)&&(0,s.jsx)(D.OK,{children:"Model Analytics"}),eU.ZL.includes(m)&&(0,s.jsx)(D.OK,{children:"Model Retry Settings"}),eU.ZL.includes(m)&&(0,s.jsx)(D.OK,{children:"Model Group Alias"}),eU.ZL.includes(m)&&(0,s.jsx)(D.OK,{children:"Price Data Reload"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[w&&(0,s.jsxs)(i.Z,{children:["Last Refreshed: ",w]}),(0,s.jsx)(D.JO,{icon:V.Z,variant:"shadow",size:"xs",className:"self-center",onClick:eY})]})]}),(0,s.jsxs)(D.nP,{children:[(0,s.jsx)(lc,{selectedModelGroup:U,setSelectedModelGroup:G,availableModelGroups:L,availableModelAccessGroups:B,setSelectedModelId:eT,setSelectedTeamId:eD,setEditModel:eR,modelData:x}),(0,s.jsx)(D.x4,{className:"h-full",children:(0,s.jsx)(eQ,{form:y,handleOk:()=>{console.log("\uD83D\uDE80 handleOk called from model dashboard!"),console.log("Current form values:",y.getFieldsValue()),y.validateFields().then(e=>{console.log("✅ Validation passed, submitting:",e),u(e,l,y,eY)}).catch(e=>{var l;console.error("❌ Validation failed:",e),console.error("Form errors:",e.errorFields);let t=(null===(l=e.errorFields)||void 0===l?void 0:l.map(e=>"".concat(e.name.join("."),": ").concat(e.errors.join(", "))).join(" | "))||"Unknown validation error";c.Z.fromBackend("Please fill in the following required fields: ".concat(t))})},selectedProvider:I,setSelectedProvider:E,providerModels:C,setProviderModelsFn:e=>{let l=(0,d.bK)(e,b);Z(l),console.log("providerModels: ".concat(l))},getPlaceholder:d.ph,uploadProps:eW,showAdvancedSettings:eP,setShowAdvancedSettings:eM,teams:_,credentials:eS,accessToken:l,userRole:m,premiumUser:v})}),(0,s.jsx)(D.x4,{children:(0,s.jsx)(R,{accessToken:l,uploadProps:eW,credentialList:eS,fetchCredentials:eJ})}),(0,s.jsx)(D.x4,{children:(0,s.jsx)(e8.Z,{accessToken:l,userRole:m,userID:h,modelData:x})}),(0,s.jsx)(D.x4,{children:(0,s.jsx)(e3,{accessToken:l,modelData:x,all_models_on_proxy:eX,getDisplayModelName:O,setSelectedModelId:eT})}),(0,s.jsx)(lR,{dateValue:ei,setDateValue:en,selectedModelGroup:U,availableModelGroups:L,setShowAdvancedFilters:e_,modelMetrics:H,modelMetricsCategories:W,streamingModelMetrics:$,streamingModelMetricsCategories:X,customTooltip:e=>{var l,t;let{payload:a,active:r}=e;if(!r||!a)return null;let o=null===(t=a[0])||void 0===t?void 0:null===(l=t.payload)||void 0===l?void 0:l.date,i=a.sort((e,l)=>l.value-e.value);if(i.length>5){let e=i.length-5;(i=i.slice(0,5)).push({dataKey:"".concat(e," other deployments"),value:a.slice(5).reduce((e,l)=>e+l.value,0),color:"gray"})}return(0,s.jsxs)("div",{className:"w-150 rounded-tremor-default border border-tremor-border bg-tremor-background p-2 text-tremor-default shadow-tremor-dropdown",children:[o&&(0,s.jsxs)("p",{className:"text-tremor-content-emphasis mb-2",children:["Date: ",o]}),i.map((e,l)=>{let t=parseFloat(e.value.toFixed(5)),a=0===t&&e.value>0?"<0.00001":t.toFixed(5);return(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 mt-1 rounded-full bg-".concat(e.color,"-500")}),(0,s.jsx)("p",{className:"text-tremor-content",children:e.dataKey})]}),(0,s.jsx)("p",{className:"font-medium text-tremor-content-emphasis text-righ ml-2",children:a})]},l)})]})},slowResponsesData:er,modelExceptions:el,globalExceptionData:ep,allExceptions:es,globalExceptionPerDeployment:ef,allEndUsers:eC,keys:p,setSelectedAPIKey:eb,setSelectedCustomer:ek,teams:_,selectedAPIKey:ey,selectedCustomer:eN,selectedTeam:eV,setAllExceptions:ea,setGlobalExceptionData:eg,setGlobalExceptionPerDeployment:ej,setModelExceptions:et,setModelMetrics:J,setModelMetricsCategories:Y,setSelectedModelGroup:G,setSlowResponsesData:eo,setStreamingModelMetrics:Q,setStreamingModelMetricsCategories:ee}),(0,s.jsx)(ly,{selectedModelGroup:U,setSelectedModelGroup:G,availableModelGroups:L,globalRetryPolicy:em,setGlobalRetryPolicy:eu,defaultRetry:eh,modelGroupRetryPolicy:ed,setModelGroupRetryPolicy:ec,handleSaveRetrySettings:e$}),(0,s.jsx)(D.x4,{children:(0,s.jsx)(ls,{accessToken:l,initialModelGroupAlias:eI,onAliasUpdate:eE})}),(0,s.jsx)(lv,{setModelMap:N})]})]})]})})})}},10607:function(e,l,t){t.d(l,{Z:function(){return U}});var s=t(57437),a=t(2265),r=t(20831),o=t(47323),i=t(84264),n=t(96761),d=t(19250),c=t(89970),m=t(53410),u=t(74998),h=t(92858),x=t(49566),p=t(12514),g=t(97765),f=t(52787),j=t(13634),v=t(82680),_=t(61778),y=t(24199),b=t(12660),N=t(15424),w=t(93142),k=t(73002),C=t(45246),Z=t(96473),S=t(31283),A=e=>{let{value:l={},onChange:t}=e,[r,o]=(0,a.useState)(Object.entries(l)),i=e=>{let l=r.filter((l,t)=>t!==e);o(l),null==t||t(Object.fromEntries(l))},n=(e,l,s)=>{let a=[...r];a[e]=[l,s],o(a),null==t||t(Object.fromEntries(a))};return(0,s.jsxs)("div",{children:[r.map((e,l)=>{let[t,a]=e;return(0,s.jsxs)(w.Z,{style:{display:"flex",marginBottom:8},align:"center",children:[(0,s.jsx)(S.o,{placeholder:"Header Name",value:t,onChange:e=>n(l,e.target.value,a)}),(0,s.jsx)(S.o,{placeholder:"Header Value",value:a,onChange:e=>n(l,t,e.target.value)}),(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,s.jsx)(C.Z,{onClick:()=>i(l),style:{cursor:"pointer"}})})]},l)}),(0,s.jsx)(k.ZP,{type:"dashed",onClick:()=>{o([...r,["",""]])},icon:(0,s.jsx)(Z.Z,{}),children:"Add Header"})]})},I=t(77565),E=e=>{let{pathValue:l,targetValue:t,includeSubpath:a}=e,r=(0,d.getProxyBaseUrl)();return l&&t?(0,s.jsxs)(p.Z,{className:"p-5",children:[(0,s.jsx)(n.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Route Preview"}),(0,s.jsx)(g.Z,{className:"text-gray-600 mb-5",children:"How your requests will be routed"}),(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-3",children:"Basic routing:"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Your endpoint"}),(0,s.jsx)("code",{className:"font-mono text-sm text-gray-900",children:l?"".concat(r).concat(l):""})]}),(0,s.jsx)("div",{className:"text-gray-400",children:(0,s.jsx)(I.Z,{className:"text-lg"})}),(0,s.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Forwards to"}),(0,s.jsx)("code",{className:"font-mono text-sm text-gray-900",children:t})]})]})]}),a&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-base font-semibold text-gray-900 mb-3",children:"With subpaths:"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Your endpoint + subpath"}),(0,s.jsxs)("code",{className:"font-mono text-sm text-gray-900",children:[l&&"".concat(r).concat(l),(0,s.jsx)("span",{className:"text-blue-600",children:"/v1/text-to-image/base/model"})]})]}),(0,s.jsx)("div",{className:"text-gray-400",children:(0,s.jsx)(I.Z,{className:"text-lg"})}),(0,s.jsxs)("div",{className:"flex-1 bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Forwards to"}),(0,s.jsxs)("code",{className:"font-mono text-sm text-gray-900",children:[t,(0,s.jsx)("span",{className:"text-blue-600",children:"/v1/text-to-image/base/model"})]})]})]}),(0,s.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["Any path after ",l," will be appended to the target URL"]})]})}),!a&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-md border border-blue-200",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)(N.Z,{className:"text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),(0,s.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,s.jsx)("span",{className:"font-medium",children:"Not seeing the routing you wanted?"})," Try enabling - Include Subpaths - above - this allows subroutes like"," ",(0,s.jsx)("code",{className:"bg-blue-100 px-1 py-0.5 rounded font-mono text-xs",children:"/api/v1/models"})," to be forwarded automatically."]})]})})]})]}):null},P=t(9114);let{Option:M}=f.default;var F=e=>{let{accessToken:l,setPassThroughItems:t,passThroughItems:o}=e,[i]=j.Z.useForm(),[m,u]=(0,a.useState)(!1),[f,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)(""),[Z,S]=(0,a.useState)(""),[I,M]=(0,a.useState)(""),[F,T]=(0,a.useState)(!0),L=()=>{i.resetFields(),S(""),M(""),T(!0),u(!1)},R=e=>{let l=e;e&&!e.startsWith("/")&&(l="/"+e),S(l),i.setFieldsValue({path:l})},O=async e=>{console.log("addPassThrough called with:",e),w(!0);try{console.log("formValues: ".concat(JSON.stringify(e)));let s=(await (0,d.createPassThroughEndpoint)(l,e)).endpoints[0],a=[...o,s];t(a),P.Z.success("Pass-through endpoint created successfully"),i.resetFields(),S(""),M(""),T(!0),u(!1)}catch(e){P.Z.fromBackend("Error creating pass-through endpoint: "+e)}finally{w(!1)}};return(0,s.jsxs)("div",{children:[(0,s.jsx)(r.Z,{className:"mx-auto mb-4 mt-4",onClick:()=>u(!0),children:"+ Add Pass-Through Endpoint"}),(0,s.jsx)(v.Z,{title:(0,s.jsxs)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:[(0,s.jsx)(b.Z,{className:"text-xl text-blue-500"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Pass-Through Endpoint"})]}),open:m,width:1e3,onCancel:L,footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)(_.Z,{message:"What is a Pass-Through Endpoint?",description:"Route requests from your LiteLLM proxy to any external API. Perfect for custom models, image generation APIs, or any service you want to proxy through LiteLLM.",type:"info",showIcon:!0,className:"mb-6"}),(0,s.jsxs)(j.Z,{form:i,onFinish:O,layout:"vertical",className:"space-y-6",initialValues:{include_subpath:!0,path:Z,target:I},children:[(0,s.jsxs)(p.Z,{className:"p-5",children:[(0,s.jsx)(n.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Route Configuration"}),(0,s.jsx)(g.Z,{className:"text-gray-600 mb-5",children:"Configure how requests to your domain will be forwarded to the target API"}),(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsx)(j.Z.Item,{label:(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Path Prefix"}),name:"path",rules:[{required:!0,message:"Path is required",pattern:/^\//}],extra:(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Example: /bria, /adobe-photoshop, /elasticsearch"}),className:"mb-4",children:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(x.Z,{placeholder:"bria",value:Z,onChange:e=>R(e.target.value),className:"flex-1"})})}),(0,s.jsx)(j.Z.Item,{label:(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Target URL"}),name:"target",rules:[{required:!0,message:"Target URL is required"},{type:"url",message:"Please enter a valid URL"}],extra:(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Example:https://engine.prod.bria-api.com"}),className:"mb-4",children:(0,s.jsx)(x.Z,{placeholder:"https://engine.prod.bria-api.com",value:I,onChange:e=>{M(e.target.value),i.setFieldsValue({target:e.target.value})}})}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Include Subpaths"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:"Forward all subpaths to the target API (recommended for REST APIs)"})]}),(0,s.jsx)(j.Z.Item,{name:"include_subpath",valuePropName:"checked",className:"mb-0",children:(0,s.jsx)(h.Z,{checked:F,onChange:T})})]})]})]}),(0,s.jsx)(E,{pathValue:Z,targetValue:I,includeSubpath:F}),(0,s.jsxs)(p.Z,{className:"p-6",children:[(0,s.jsx)(n.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Headers"}),(0,s.jsx)(g.Z,{className:"text-gray-600 mb-6",children:"Add headers that will be sent with every request to the target API"}),(0,s.jsx)(j.Z.Item,{label:(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Authentication Headers",(0,s.jsx)(c.Z,{title:"Authentication and other headers to forward with requests",children:(0,s.jsx)(N.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"headers",rules:[{required:!0,message:"Please configure the headers"}],extra:(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"Add authentication tokens and other required headers"}),(0,s.jsx)("div",{children:"Common examples: auth_token, Authorization, x-api-key"})]}),children:(0,s.jsx)(A,{})})]}),(0,s.jsxs)(p.Z,{className:"p-6",children:[(0,s.jsx)(n.Z,{className:"text-lg font-semibold text-gray-900 mb-2",children:"Billing"}),(0,s.jsx)(g.Z,{className:"text-gray-600 mb-6",children:"Optional cost tracking for this endpoint"}),(0,s.jsx)(j.Z.Item,{label:(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Cost Per Request (USD)",(0,s.jsx)(c.Z,{title:"Optional: Track costs for requests to this endpoint",children:(0,s.jsx)(N.Z,{className:"ml-2 text-gray-400 hover:text-gray-600"})})]}),name:"cost_per_request",extra:(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"The cost charged for each request through this endpoint"}),children:(0,s.jsx)(y.Z,{min:0,step:.001,precision:4,placeholder:"2.0000",size:"large"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-100",children:[(0,s.jsx)(r.Z,{variant:"secondary",onClick:L,children:"Cancel"}),(0,s.jsx)(r.Z,{variant:"primary",loading:f,onClick:()=>{console.log("Submit button clicked"),i.submit()},children:f?"Creating...":"Add Pass-Through Endpoint"})]})]})]})})]})},T=t(30078),L=t(64482),R=t(63709),O=t(20577),D=t(87769),V=t(42208);let q=e=>{let{value:l}=e,[t,r]=(0,a.useState)(!1),o=JSON.stringify(l,null,2);return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("pre",{className:"font-mono text-xs bg-gray-50 p-2 rounded max-w-md overflow-auto",children:t?o:"••••••••"}),(0,s.jsx)("button",{onClick:()=>r(!t),className:"p-1 hover:bg-gray-100 rounded",type:"button",children:t?(0,s.jsx)(D.Z,{className:"w-4 h-4 text-gray-500"}):(0,s.jsx)(V.Z,{className:"w-4 h-4 text-gray-500"})})]})};var z=e=>{let{endpointData:l,onClose:t,accessToken:r,isAdmin:o,onEndpointUpdated:i}=e,[n,c]=(0,a.useState)(l),[m,u]=(0,a.useState)(!1),[h,x]=(0,a.useState)(!1),[p]=j.Z.useForm(),g=async e=>{try{if(!r||!(null==n?void 0:n.id))return;let l={};if(e.headers)try{l="string"==typeof e.headers?JSON.parse(e.headers):e.headers}catch(e){P.Z.fromBackend("Invalid JSON format for headers");return}let t={path:n.path,target:e.target,headers:l,include_subpath:e.include_subpath,cost_per_request:e.cost_per_request};await (0,d.updatePassThroughEndpoint)(r,n.id,t),c({...n,...t}),x(!1),i&&i()}catch(e){console.error("Error updating endpoint:",e),P.Z.fromBackend("Failed to update pass through endpoint")}},f=async()=>{try{if(!r||!(null==n?void 0:n.id))return;await (0,d.deletePassThroughEndpointsCall)(r,n.id),P.Z.success("Pass through endpoint deleted successfully"),t(),i&&i()}catch(e){console.error("Error deleting endpoint:",e),P.Z.fromBackend("Failed to delete pass through endpoint")}};return m?(0,s.jsx)("div",{className:"p-4",children:"Loading..."}):n?(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(k.ZP,{onClick:t,className:"mb-4",children:"← Back"}),(0,s.jsxs)(T.Dx,{children:["Pass Through Endpoint: ",n.path]}),(0,s.jsx)(T.xv,{className:"text-gray-500 font-mono",children:n.id})]})}),(0,s.jsxs)(T.v0,{children:[(0,s.jsxs)(T.td,{className:"mb-4",children:[(0,s.jsx)(T.OK,{children:"Overview"},"overview"),o?(0,s.jsx)(T.OK,{children:"Settings"},"settings"):(0,s.jsx)(s.Fragment,{})]}),(0,s.jsxs)(T.nP,{children:[(0,s.jsxs)(T.x4,{children:[(0,s.jsxs)(T.rj,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,s.jsxs)(T.Zb,{children:[(0,s.jsx)(T.xv,{children:"Path"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(T.Dx,{className:"font-mono",children:n.path})})]}),(0,s.jsxs)(T.Zb,{children:[(0,s.jsx)(T.xv,{children:"Target"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(T.Dx,{children:n.target})})]}),(0,s.jsxs)(T.Zb,{children:[(0,s.jsx)(T.xv,{children:"Configuration"}),(0,s.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(T.Ct,{color:n.include_subpath?"green":"gray",children:n.include_subpath?"Include Subpath":"Exact Path"})}),void 0!==n.cost_per_request&&(0,s.jsx)("div",{children:(0,s.jsxs)(T.xv,{children:["Cost per request: $",n.cost_per_request]})})]})]})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(E,{pathValue:n.path,targetValue:n.target,includeSubpath:n.include_subpath||!1})}),n.headers&&Object.keys(n.headers).length>0&&(0,s.jsxs)(T.Zb,{className:"mt-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(T.xv,{className:"font-medium",children:"Headers"}),(0,s.jsxs)(T.Ct,{color:"blue",children:[Object.keys(n.headers).length," headers configured"]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(q,{value:n.headers})})]})]}),o&&(0,s.jsx)(T.x4,{children:(0,s.jsxs)(T.Zb,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)(T.Dx,{children:"Pass Through Endpoint Settings"}),(0,s.jsx)("div",{className:"space-x-2",children:!h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.zx,{onClick:()=>x(!0),children:"Edit Settings"}),(0,s.jsx)(T.zx,{onClick:f,variant:"secondary",color:"red",children:"Delete Endpoint"})]})})]}),h?(0,s.jsxs)(j.Z,{form:p,onFinish:g,initialValues:{target:n.target,headers:n.headers?JSON.stringify(n.headers,null,2):"",include_subpath:n.include_subpath||!1,cost_per_request:n.cost_per_request},layout:"vertical",children:[(0,s.jsx)(j.Z.Item,{label:"Target URL",name:"target",rules:[{required:!0,message:"Please input a target URL"}],children:(0,s.jsx)(T.oi,{placeholder:"https://api.example.com"})}),(0,s.jsx)(j.Z.Item,{label:"Headers (JSON)",name:"headers",children:(0,s.jsx)(L.default.TextArea,{rows:5,placeholder:'{"Authorization": "Bearer your-token", "Content-Type": "application/json"}'})}),(0,s.jsx)(j.Z.Item,{label:"Include Subpath",name:"include_subpath",valuePropName:"checked",children:(0,s.jsx)(R.Z,{})}),(0,s.jsx)(j.Z.Item,{label:"Cost per Request",name:"cost_per_request",children:(0,s.jsx)(O.Z,{min:0,step:.01,precision:2,placeholder:"0.00",addonBefore:"$"})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,s.jsx)(k.ZP,{onClick:()=>x(!1),children:"Cancel"}),(0,s.jsx)(T.zx,{children:"Save Changes"})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(T.xv,{className:"font-medium",children:"Path"}),(0,s.jsx)("div",{className:"font-mono",children:n.path})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(T.xv,{className:"font-medium",children:"Target URL"}),(0,s.jsx)("div",{children:n.target})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(T.xv,{className:"font-medium",children:"Include Subpath"}),(0,s.jsx)(T.Ct,{color:n.include_subpath?"green":"gray",children:n.include_subpath?"Yes":"No"})]}),void 0!==n.cost_per_request&&(0,s.jsxs)("div",{children:[(0,s.jsx)(T.xv,{className:"font-medium",children:"Cost per Request"}),(0,s.jsxs)("div",{children:["$",n.cost_per_request]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(T.xv,{className:"font-medium",children:"Headers"}),n.headers&&Object.keys(n.headers).length>0?(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(q,{value:n.headers})}):(0,s.jsx)("div",{className:"text-gray-500",children:"No headers configured"})]})]})]})})]})]})]}):(0,s.jsx)("div",{className:"p-4",children:"Pass through endpoint not found"})},B=t(12322);let K=e=>{let{value:l}=e,[t,r]=(0,a.useState)(!1),o=JSON.stringify(l);return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"font-mono text-xs",children:t?o:"••••••••"}),(0,s.jsx)("button",{onClick:()=>r(!t),className:"p-1 hover:bg-gray-100 rounded",type:"button",children:t?(0,s.jsx)(D.Z,{className:"w-4 h-4 text-gray-500"}):(0,s.jsx)(V.Z,{className:"w-4 h-4 text-gray-500"})})]})};var U=e=>{let{accessToken:l,userRole:t,userID:h,modelData:x}=e,[p,g]=(0,a.useState)([]),[f,j]=(0,a.useState)(null),[v,_]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{l&&t&&h&&(0,d.getPassThroughEndpointsCall)(l).then(e=>{g(e.endpoints)})},[l,t,h]);let N=async e=>{b(e),_(!0)},w=async()=>{if(null!=y&&l){try{await (0,d.deletePassThroughEndpointsCall)(l,y);let e=p.filter(e=>e.id!==y);g(e),P.Z.success("Endpoint deleted successfully.")}catch(e){console.error("Error deleting the endpoint:",e),P.Z.fromBackend("Error deleting the endpoint: "+e)}_(!1),b(null)}},k=(e,l)=>{N(e)},C=[{header:"ID",accessorKey:"id",cell:e=>(0,s.jsx)(c.Z,{title:e.row.original.id,children:(0,s.jsx)("div",{className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",onClick:()=>e.row.original.id&&j(e.row.original.id),children:e.row.original.id})})},{header:"Path",accessorKey:"path"},{header:"Target",accessorKey:"target",cell:e=>(0,s.jsx)(i.Z,{children:e.getValue()})},{header:"Headers",accessorKey:"headers",cell:e=>(0,s.jsx)(K,{value:e.getValue()||{}})},{header:"Actions",id:"actions",cell:e=>{let{row:l}=e;return(0,s.jsxs)("div",{className:"flex space-x-1",children:[(0,s.jsx)(o.Z,{icon:m.Z,size:"sm",onClick:()=>l.original.id&&j(l.original.id),title:"Edit"}),(0,s.jsx)(o.Z,{icon:u.Z,size:"sm",onClick:()=>k(l.original.id,l.index),title:"Delete"})]})}}];if(!l)return null;if(f){console.log("selectedEndpointId",f),console.log("generalSettings",p);let e=p.find(e=>e.id===f);return e?(0,s.jsx)(z,{endpointData:e,onClose:()=>j(null),accessToken:l,isAdmin:"Admin"===t||"admin"===t,onEndpointUpdated:()=>{l&&(0,d.getPassThroughEndpointsCall)(l).then(e=>{g(e.endpoints)})}}):(0,s.jsx)("div",{children:"Endpoint not found"})}return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Z,{children:"Pass Through Endpoints"}),(0,s.jsx)(i.Z,{className:"text-tremor-content",children:"Configure and manage your pass-through endpoints"})]}),(0,s.jsx)(F,{accessToken:l,setPassThroughItems:g,passThroughItems:p}),(0,s.jsx)(B.w,{data:p,columns:C,renderSubComponent:()=>(0,s.jsx)("div",{}),getRowCanExpand:()=>!1,isLoading:!1,noDataMessage:"No pass-through endpoints configured"}),v&&(0,s.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,s.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,s.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,s.jsx)("div",{className:"sm:flex sm:items-start",children:(0,s.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Pass-Through Endpoint"}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this pass-through endpoint? This action cannot be undone."})})]})})}),(0,s.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,s.jsx)(r.Z,{onClick:w,color:"red",className:"ml-2",children:"Delete"}),(0,s.jsx)(r.Z,{onClick:()=>{_(!1),b(null)},children:"Cancel"})]})]})]})})]})}},39789:function(e,l,t){t.d(l,{Z:function(){return i}});var s=t(57437),a=t(2265),r=t(21487),o=t(84264),i=e=>{let{value:l,onValueChange:t,label:i="Select Time Range",className:n="",showTimeRange:d=!0}=e,[c,m]=(0,a.useState)(!1),u=(0,a.useRef)(null),h=(0,a.useCallback)(e=>{m(!0),setTimeout(()=>m(!1),1500),t(e),requestIdleCallback(()=>{if(e.from){let l;let s={...e},a=new Date(e.from);l=new Date(e.to?e.to:e.from),a.toDateString(),l.toDateString(),a.setHours(0,0,0,0),l.setHours(23,59,59,999),s.from=a,s.to=l,t(s)}},{timeout:100})},[t]),x=(0,a.useCallback)((e,l)=>{if(!e||!l)return"";let t=e=>e.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZoneName:"short"});if(e.toDateString()!==l.toDateString())return"".concat(t(e)," - ").concat(t(l));{let t=e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),s=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),a=l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZoneName:"short"});return"".concat(t,": ").concat(s," - ").concat(a)}},[]);return(0,s.jsxs)("div",{className:n,children:[i&&(0,s.jsx)(o.Z,{className:"mb-2",children:i}),(0,s.jsxs)("div",{className:"relative w-fit",children:[(0,s.jsx)("div",{ref:u,children:(0,s.jsx)(r.Z,{enableSelect:!0,value:l,onValueChange:h,placeholder:"Select date range",enableClear:!1,style:{zIndex:100}})}),c&&(0,s.jsx)("div",{className:"absolute top-1/2 animate-pulse",style:{left:"calc(100% + 8px)",transform:"translateY(-50%)",zIndex:110},children:(0,s.jsxs)("div",{className:"flex items-center gap-1 text-green-600 text-sm font-medium bg-white px-2 py-1 rounded-full border border-green-200 shadow-sm whitespace-nowrap",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-500 text-white rounded-full flex items-center justify-center text-xs",children:"✓"}),(0,s.jsx)("span",{className:"text-xs",children:"Selected"})]})})]}),d&&l.from&&l.to&&(0,s.jsx)(o.Z,{className:"mt-2 text-xs text-gray-500",children:x(l.from,l.to)})]})}},12322:function(e,l,t){t.d(l,{w:function(){return n}});var s=t(57437),a=t(2265),r=t(71594),o=t(24525),i=t(19130);function n(e){let{data:l=[],columns:t,getRowCanExpand:n,renderSubComponent:d,isLoading:c=!1,loadingMessage:m="\uD83D\uDE85 Loading logs...",noDataMessage:u="No logs found"}=e,h=(0,r.b7)({data:l,columns:t,getRowCanExpand:n,getRowId:(e,l)=>{var t;return null!==(t=null==e?void 0:e.request_id)&&void 0!==t?t:String(l)},getCoreRowModel:(0,o.sC)(),getExpandedRowModel:(0,o.rV)()});return(0,s.jsx)("div",{className:"rounded-lg custom-border overflow-x-auto w-full max-w-full box-border",children:(0,s.jsxs)(i.iA,{className:"[&_td]:py-0.5 [&_th]:py-1 table-fixed w-full box-border",style:{minWidth:"400px"},children:[(0,s.jsx)(i.ss,{children:h.getHeaderGroups().map(e=>(0,s.jsx)(i.SC,{children:e.headers.map(e=>(0,s.jsx)(i.xs,{className:"py-1 h-8",children:e.isPlaceholder?null:(0,r.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(i.RM,{children:c?(0,s.jsx)(i.SC,{children:(0,s.jsx)(i.pj,{colSpan:t.length,className:"h-8 text-center",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsx)("p",{children:m})})})}):h.getRowModel().rows.length>0?h.getRowModel().rows.map(e=>(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(i.SC,{className:"h-8",children:e.getVisibleCells().map(e=>(0,s.jsx)(i.pj,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,r.ie)(e.column.columnDef.cell,e.getContext())},e.id))}),e.getIsExpanded()&&(0,s.jsx)(i.SC,{children:(0,s.jsx)(i.pj,{colSpan:e.getVisibleCells().length,className:"p-0",children:(0,s.jsx)("div",{className:"w-full max-w-full overflow-hidden box-border",children:d({row:e})})})})]},e.id)):(0,s.jsx)(i.SC,{children:(0,s.jsx)(i.pj,{colSpan:t.length,className:"h-8 text-center",children:(0,s.jsx)("div",{className:"text-center text-gray-500",children:(0,s.jsx)("p",{children:u})})})})})]})})}}}]);