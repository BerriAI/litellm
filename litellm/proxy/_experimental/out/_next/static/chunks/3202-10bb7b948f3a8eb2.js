"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3202],{39210:function(e,s,l){l.d(s,{Z:function(){return t}});var a=l(19250);let t=async(e,s,l,t,i)=>{let r;r="Admin"!=l&&"Admin Viewer"!=l?await (0,a.teamListCall)(e,(null==t?void 0:t.organization_id)||null,s):await (0,a.teamListCall)(e,(null==t?void 0:t.organization_id)||null),console.log("givenTeams: ".concat(r)),i(r)}},83202:function(e,s,l){l.d(s,{Z:function(){return ec}});var a=l(57437),t=l(2265),i=l(93192),r=l(19250),n=l(39210),o=l(23628),d=l(86462),c=l(47686),m=l(53410),h=l(74998),x=l(13634),u=l(89970),p=l(82680),j=l(52787),g=l(64482),_=l(73002),f=l(24199),v=l(46468),b=l(25512),y=l(15424),w=l(33293),Z=l(88913),N=l(63709),S=l(87908),C=l(65925),k=l(9114),z=e=>{var s;let{accessToken:l,userID:n,userRole:o}=e,[d,c]=(0,t.useState)(!0),[m,h]=(0,t.useState)(null),[x,u]=(0,t.useState)(!1),[p,g]=(0,t.useState)({}),[_,f]=(0,t.useState)(!1),[b,y]=(0,t.useState)([]),{Paragraph:w}=i.default,{Option:z}=j.default;(0,t.useEffect)(()=>{(async()=>{if(!l){c(!1);return}try{let e=await (0,r.getDefaultTeamSettings)(l);if(h(e),g(e.values||{}),l)try{let e=await (0,r.modelAvailableCall)(l,n,o);if(e&&e.data){let s=e.data.map(e=>e.id);y(s)}}catch(e){console.error("Error fetching available models:",e)}}catch(e){console.error("Error fetching team SSO settings:",e),k.Z.fromBackend("Failed to fetch team settings")}finally{c(!1)}})()},[l]);let T=async()=>{if(l){f(!0);try{let e=await (0,r.updateDefaultTeamSettings)(l,p);h({...m,values:e.settings}),u(!1),k.Z.success("Default team settings updated successfully")}catch(e){console.error("Error updating team settings:",e),k.Z.fromBackend("Failed to update team settings")}finally{f(!1)}}},A=(e,s)=>{g(l=>({...l,[e]:s}))},M=(e,s,l)=>{var t;let i=s.type;return"budget_duration"===e?(0,a.jsx)(C.Z,{value:p[e]||null,onChange:s=>A(e,s),className:"mt-2"}):"boolean"===i?(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(N.Z,{checked:!!p[e],onChange:s=>A(e,s)})}):"array"===i&&(null===(t=s.items)||void 0===t?void 0:t.enum)?(0,a.jsx)(j.default,{mode:"multiple",style:{width:"100%"},value:p[e]||[],onChange:s=>A(e,s),className:"mt-2",children:s.items.enum.map(e=>(0,a.jsx)(z,{value:e,children:e},e))}):"models"===e?(0,a.jsx)(j.default,{mode:"multiple",style:{width:"100%"},value:p[e]||[],onChange:s=>A(e,s),className:"mt-2",children:b.map(e=>(0,a.jsx)(z,{value:e,children:(0,v.W0)(e)},e))}):"string"===i&&s.enum?(0,a.jsx)(j.default,{style:{width:"100%"},value:p[e]||"",onChange:s=>A(e,s),className:"mt-2",children:s.enum.map(e=>(0,a.jsx)(z,{value:e,children:e},e))}):(0,a.jsx)(Z.oi,{value:void 0!==p[e]?String(p[e]):"",onChange:s=>A(e,s.target.value),placeholder:s.description||"",className:"mt-2"})},L=(e,s)=>null==s?(0,a.jsx)("span",{className:"text-gray-400",children:"Not set"}):"budget_duration"===e?(0,a.jsx)("span",{children:(0,C.m)(s)}):"boolean"==typeof s?(0,a.jsx)("span",{children:s?"Enabled":"Disabled"}):"models"===e&&Array.isArray(s)?0===s.length?(0,a.jsx)("span",{className:"text-gray-400",children:"None"}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:s.map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-xs",children:(0,v.W0)(e)},s))}):"object"==typeof s?Array.isArray(s)?0===s.length?(0,a.jsx)("span",{className:"text-gray-400",children:"None"}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:s.map((e,s)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-xs",children:"object"==typeof e?JSON.stringify(e):String(e)},s))}):(0,a.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(s,null,2)}):(0,a.jsx)("span",{children:String(s)});return d?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(S.Z,{size:"large"})}):m?(0,a.jsxs)(Z.Zb,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)(Z.Dx,{className:"text-xl",children:"Default Team Settings"}),!d&&m&&(x?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(Z.zx,{variant:"secondary",onClick:()=>{u(!1),g(m.values||{})},disabled:_,children:"Cancel"}),(0,a.jsx)(Z.zx,{onClick:T,loading:_,children:"Save Changes"})]}):(0,a.jsx)(Z.zx,{onClick:()=>u(!0),children:"Edit Settings"}))]}),(0,a.jsx)(Z.xv,{children:"These settings will be applied by default when creating new teams."}),(null==m?void 0:null===(s=m.field_schema)||void 0===s?void 0:s.description)&&(0,a.jsx)(w,{className:"mb-4 mt-2",children:m.field_schema.description}),(0,a.jsx)(Z.iz,{}),(0,a.jsx)("div",{className:"mt-4 space-y-4",children:(()=>{let{values:e,field_schema:s}=m;return s&&s.properties?Object.entries(s.properties).map(s=>{let[l,t]=s,i=e[l],r=l.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());return(0,a.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200 last:border-0",children:[(0,a.jsx)(Z.xv,{className:"font-medium text-lg",children:r}),(0,a.jsx)(w,{className:"text-sm text-gray-500 mt-1",children:t.description||"No description available"}),x?(0,a.jsx)("div",{className:"mt-2",children:M(l,t,i)}):(0,a.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:L(l,i)})]},l)}):(0,a.jsx)(Z.xv,{children:"No schema information available"})})()})]}):(0,a.jsx)(Z.Zb,{children:(0,a.jsx)(Z.xv,{children:"No team settings available or you do not have permission to view them."})})},T=l(20347),A=l(87452),M=l(88829),L=l(72208),I=l(41649),D=l(20831),F=l(12514),P=l(49804),E=l(67101),O=l(47323),V=l(12485),W=l(18135),B=l(35242),R=l(29706),U=l(77991),J=l(21626),q=l(97214),G=l(28241),K=l(58834),Y=l(69552),H=l(71876),Q=l(84264),X=l(49566),$=l(62490),ee=e=>{let{accessToken:s,userID:l}=e,[i,n]=(0,t.useState)([]);(0,t.useEffect)(()=>{(async()=>{if(s&&l)try{let e=await (0,r.availableTeamListCall)(s);n(e)}catch(e){console.error("Error fetching available teams:",e)}})()},[s,l]);let o=async e=>{if(s&&l)try{await (0,r.teamMemberAddCall)(s,e,{user_id:l,role:"user"}),k.Z.success("Successfully joined team"),n(s=>s.filter(s=>s.team_id!==e))}catch(e){console.error("Error joining team:",e),k.Z.fromBackend("Failed to join team")}};return(0,a.jsx)($.Zb,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh]",children:(0,a.jsxs)($.iA,{children:[(0,a.jsx)($.ss,{children:(0,a.jsxs)($.SC,{children:[(0,a.jsx)($.xs,{children:"Team Name"}),(0,a.jsx)($.xs,{children:"Description"}),(0,a.jsx)($.xs,{children:"Members"}),(0,a.jsx)($.xs,{children:"Models"}),(0,a.jsx)($.xs,{children:"Actions"})]})}),(0,a.jsxs)($.RM,{children:[i.map(e=>(0,a.jsxs)($.SC,{children:[(0,a.jsx)($.pj,{children:(0,a.jsx)($.xv,{children:e.team_alias})}),(0,a.jsx)($.pj,{children:(0,a.jsx)($.xv,{children:e.description||"No description available"})}),(0,a.jsx)($.pj,{children:(0,a.jsxs)($.xv,{children:[e.members_with_roles.length," members"]})}),(0,a.jsx)($.pj,{children:(0,a.jsx)("div",{className:"flex flex-col",children:e.models&&0!==e.models.length?e.models.map((e,s)=>(0,a.jsx)($.Ct,{size:"xs",className:"mb-1",color:"blue",children:(0,a.jsx)($.xv,{children:e.length>30?"".concat(e.slice(0,30),"..."):e})},s)):(0,a.jsx)($.Ct,{size:"xs",color:"red",children:(0,a.jsx)($.xv,{children:"All Proxy Models"})})})}),(0,a.jsx)($.pj,{children:(0,a.jsx)($.zx,{size:"xs",variant:"secondary",onClick:()=>o(e.team_id),children:"Join Team"})})]},e.team_id)),0===i.length&&(0,a.jsx)($.SC,{children:(0,a.jsx)($.pj,{colSpan:5,className:"text-center",children:(0,a.jsx)($.xv,{children:"No available teams to join"})})})]})]})})},es=l(97415),el=l(2597),ea=l(59872),et=l(32489),ei=l(76865),er=l(95920),en=l(68473),eo=l(51750);let ed=(e,s)=>{let l=[];return e&&e.models.length>0?(console.log("organization.models: ".concat(e.models)),l=e.models):l=s,(0,v.Ob)(l,s)};var ec=e=>{let{teams:s,searchParams:l,accessToken:Z,setTeams:N,userID:S,userRole:C,organizations:$,premiumUser:ec=!1}=e,[em,eh]=(0,t.useState)(""),[ex,eu]=(0,t.useState)(null),[ep,ej]=(0,t.useState)(null),[eg,e_]=(0,t.useState)(!1),[ef,ev]=(0,t.useState)({team_id:"",team_alias:"",organization_id:"",sort_by:"created_at",sort_order:"desc"});(0,t.useEffect)(()=>{console.log("inside useeffect - ".concat(em)),Z&&(0,n.Z)(Z,S,C,ex,N),sr()},[em]);let[eb]=x.Z.useForm(),[ey]=x.Z.useForm(),{Title:ew,Paragraph:eZ}=i.default,[eN,eS]=(0,t.useState)(""),[eC,ek]=(0,t.useState)(!1),[ez,eT]=(0,t.useState)(null),[eA,eM]=(0,t.useState)(null),[eL,eI]=(0,t.useState)(!1),[eD,eF]=(0,t.useState)(!1),[eP,eE]=(0,t.useState)(!1),[eO,eV]=(0,t.useState)(!1),[eW,eB]=(0,t.useState)([]),[eR,eU]=(0,t.useState)(!1),[eJ,eq]=(0,t.useState)(null),[eG,eK]=(0,t.useState)([]),[eY,eH]=(0,t.useState)({}),[eQ,eX]=(0,t.useState)([]),[e$,e0]=(0,t.useState)({}),[e1,e2]=(0,t.useState)([]),[e4,e5]=(0,t.useState)([]),[e3,e8]=(0,t.useState)(!1),[e6,e7]=(0,t.useState)(""),[e9,se]=(0,t.useState)({});(0,t.useEffect)(()=>{console.log("currentOrgForCreateTeam: ".concat(ep));let e=ed(ep,eW);console.log("models: ".concat(e)),eK(e),eb.setFieldValue("models",[])},[ep,eW]),(0,t.useEffect)(()=>{(async()=>{try{if(null==Z)return;let e=(await (0,r.getGuardrailsList)(Z)).guardrails.map(e=>e.guardrail_name);eX(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})()},[Z]);let ss=async()=>{try{if(null==Z)return;let e=await (0,r.fetchMCPAccessGroups)(Z);e5(e)}catch(e){console.error("Failed to fetch MCP access groups:",e)}};(0,t.useEffect)(()=>{ss()},[Z]),(0,t.useEffect)(()=>{s&&eH(s.reduce((e,s)=>(e[s.team_id]={keys:s.keys||[],team_info:{members_with_roles:s.members_with_roles||[]}},e),{}))},[s]);let sl=async e=>{eq(e),eU(!0)},sa=async()=>{if(null!=eJ&&null!=s&&null!=Z){try{await (0,r.teamDeleteCall)(Z,eJ),(0,n.Z)(Z,S,C,ex,N)}catch(e){console.error("Error deleting the team:",e)}eU(!1),eq(null)}},st=()=>{eU(!1),eq(null)};(0,t.useEffect)(()=>{(async()=>{try{if(null===S||null===C||null===Z)return;let e=await (0,v.K2)(S,C,Z);e&&eB(e)}catch(e){console.error("Error fetching user models:",e)}})()},[Z,S,C,s]);let si=async e=>{try{if(console.log("formValues: ".concat(JSON.stringify(e))),null!=Z){var l,a,t;let i=null==e?void 0:e.team_alias,n=null!==(t=null==s?void 0:s.map(e=>e.team_alias))&&void 0!==t?t:[],o=(null==e?void 0:e.organization_id)||(null==ex?void 0:ex.organization_id);if(""===o||"string"!=typeof o?e.organization_id=null:e.organization_id=o.trim(),n.includes(i))throw Error("Team alias ".concat(i," already exists, please pick another alias"));if(k.Z.info("Creating Team"),e1.length>0){let s={};if(e.metadata)try{s=JSON.parse(e.metadata)}catch(e){console.warn("Invalid JSON in metadata field, starting with empty object")}s={...s,logging:e1.filter(e=>e.callback_name)},e.metadata=JSON.stringify(s)}if(e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0||e.allowed_mcp_servers_and_groups&&((null===(l=e.allowed_mcp_servers_and_groups.servers)||void 0===l?void 0:l.length)>0||(null===(a=e.allowed_mcp_servers_and_groups.accessGroups)||void 0===a?void 0:a.length)>0||e.allowed_mcp_servers_and_groups.toolPermissions)){if(e.object_permission={},e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission.vector_stores=e.allowed_vector_store_ids,delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups){let{servers:s,accessGroups:l}=e.allowed_mcp_servers_and_groups;s&&s.length>0&&(e.object_permission.mcp_servers=s),l&&l.length>0&&(e.object_permission.mcp_access_groups=l),delete e.allowed_mcp_servers_and_groups}e.mcp_tool_permissions&&Object.keys(e.mcp_tool_permissions).length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_tool_permissions=e.mcp_tool_permissions,delete e.mcp_tool_permissions)}e.allowed_mcp_access_groups&&e.allowed_mcp_access_groups.length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_access_groups=e.allowed_mcp_access_groups,delete e.allowed_mcp_access_groups),Object.keys(e9).length>0&&(e.model_aliases=e9);let d=await (0,r.teamCreateCall)(Z,e);null!==s?N([...s,d]):N([d]),console.log("response for team create call: ".concat(d)),k.Z.success("Team created"),eb.resetFields(),e2([]),se({}),eF(!1)}}catch(e){console.error("Error creating the team:",e),k.Z.fromBackend("Error creating the team: "+e)}},sr=()=>{eh(new Date().toLocaleString())},sn=(e,s)=>{let l={...ef,[e]:s};ev(l),Z&&(0,r.v2TeamListCall)(Z,l.organization_id||null,null,l.team_id||null,l.team_alias||null).then(e=>{e&&e.teams&&N(e.teams)}).catch(e=>{console.error("Error fetching teams:",e)})};return(0,a.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,a.jsx)(E.Z,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,a.jsxs)(P.Z,{numColSpan:1,className:"flex flex-col gap-2",children:[("Admin"==C||"Org Admin"==C)&&(0,a.jsx)(D.Z,{className:"w-fit",onClick:()=>eF(!0),children:"+ Create New Team"}),eA?(0,a.jsx)(w.Z,{teamId:eA,onUpdate:e=>{N(s=>{if(null==s)return s;let l=s.map(s=>e.team_id===s.team_id?(0,ea.nl)(s,e):s);return Z&&(0,n.Z)(Z,S,C,ex,N),l})},onClose:()=>{eM(null),eI(!1)},accessToken:Z,is_team_admin:(e=>{if(null==e||null==e.members_with_roles)return!1;for(let s=0;s<e.members_with_roles.length;s++){let l=e.members_with_roles[s];if(l.user_id==S&&"admin"==l.role)return!0}return!1})(null==s?void 0:s.find(e=>e.team_id===eA)),is_proxy_admin:"Admin"==C,userModels:eW,editTeam:eL}):(0,a.jsxs)(W.Z,{className:"gap-2 h-[75vh] w-full",children:[(0,a.jsxs)(B.Z,{className:"flex justify-between mt-2 w-full items-center",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(V.Z,{children:"Your Teams"}),(0,a.jsx)(V.Z,{children:"Available Teams"}),(0,T.tY)(C||"")&&(0,a.jsx)(V.Z,{children:"Default Team Settings"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[em&&(0,a.jsxs)(Q.Z,{children:["Last Refreshed: ",em]}),(0,a.jsx)(O.Z,{icon:o.Z,variant:"shadow",size:"xs",className:"self-center",onClick:sr})]})]}),(0,a.jsxs)(U.Z,{children:[(0,a.jsxs)(R.Z,{children:[(0,a.jsxs)(Q.Z,{children:["Click on “Team ID” to view team details ",(0,a.jsx)("b",{children:"and"})," manage team members."]}),(0,a.jsx)(E.Z,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,a.jsx)(P.Z,{numColSpan:1,children:(0,a.jsxs)(F.Z,{className:"w-full mx-auto flex-auto overflow-hidden overflow-y-auto max-h-[50vh]",children:[(0,a.jsx)("div",{className:"border-b px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative w-64",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search by Team Name...",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ef.team_alias,onChange:e=>sn("team_alias",e.target.value)}),(0,a.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,a.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 ".concat(eg?"bg-gray-100":""),onClick:()=>e_(!eg),children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters",(ef.team_id||ef.team_alias||ef.organization_id)&&(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-blue-500"})]}),(0,a.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",onClick:()=>{ev({team_id:"",team_alias:"",organization_id:"",sort_by:"created_at",sort_order:"desc"}),Z&&(0,r.v2TeamListCall)(Z,null,S||null,null,null).then(e=>{e&&e.teams&&N(e.teams)}).catch(e=>{console.error("Error fetching teams:",e)})},children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Filters"]})]}),eg&&(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[(0,a.jsxs)("div",{className:"relative w-64",children:[(0,a.jsx)("input",{type:"text",placeholder:"Enter Team ID",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ef.team_id,onChange:e=>sn("team_id",e.target.value)}),(0,a.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,a.jsx)("div",{className:"w-64",children:(0,a.jsx)(b.P,{value:ef.organization_id||"",onValueChange:e=>sn("organization_id",e),placeholder:"Select Organization",children:null==$?void 0:$.map(e=>(0,a.jsx)(b.Q,{value:e.organization_id||"",children:e.organization_alias||e.organization_id},e.organization_id))})})]})]})}),(0,a.jsxs)(J.Z,{children:[(0,a.jsx)(K.Z,{children:(0,a.jsxs)(H.Z,{children:[(0,a.jsx)(Y.Z,{children:"Team Name"}),(0,a.jsx)(Y.Z,{children:"Team ID"}),(0,a.jsx)(Y.Z,{children:"Created"}),(0,a.jsx)(Y.Z,{children:"Spend (USD)"}),(0,a.jsx)(Y.Z,{children:"Budget (USD)"}),(0,a.jsx)(Y.Z,{children:"Models"}),(0,a.jsx)(Y.Z,{children:"Organization"}),(0,a.jsx)(Y.Z,{children:"Info"})]})}),(0,a.jsx)(q.Z,{children:s&&s.length>0?s.filter(e=>!ex||e.organization_id===ex.organization_id).sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>(0,a.jsxs)(H.Z,{children:[(0,a.jsx)(G.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.team_alias}),(0,a.jsx)(G.Z,{children:(0,a.jsx)("div",{className:"overflow-hidden",children:(0,a.jsx)(u.Z,{title:e.team_id,children:(0,a.jsxs)(D.Z,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>{eM(e.team_id)},children:[e.team_id.slice(0,7),"..."]})})})}),(0,a.jsx)(G.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,a.jsx)(G.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:(0,ea.pw)(e.spend,4)}),(0,a.jsx)(G.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:null!==e.max_budget&&void 0!==e.max_budget?e.max_budget:"No limit"}),(0,a.jsx)(G.Z,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:e.models.length>3?"px-0":"",children:(0,a.jsx)("div",{className:"flex flex-col",children:Array.isArray(e.models)?(0,a.jsx)("div",{className:"flex flex-col",children:0===e.models.length?(0,a.jsx)(I.Z,{size:"xs",className:"mb-1",color:"red",children:(0,a.jsx)(Q.Z,{children:"All Proxy Models"})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-start",children:[e.models.length>3&&(0,a.jsx)("div",{children:(0,a.jsx)(O.Z,{icon:e$[e.team_id]?d.Z:c.Z,className:"cursor-pointer",size:"xs",onClick:()=>{e0(s=>({...s,[e.team_id]:!s[e.team_id]}))}})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.models.slice(0,3).map((e,s)=>"all-proxy-models"===e?(0,a.jsx)(I.Z,{size:"xs",color:"red",children:(0,a.jsx)(Q.Z,{children:"All Proxy Models"})},s):(0,a.jsx)(I.Z,{size:"xs",color:"blue",children:(0,a.jsx)(Q.Z,{children:e.length>30?"".concat((0,v.W0)(e).slice(0,30),"..."):(0,v.W0)(e)})},s)),e.models.length>3&&!e$[e.team_id]&&(0,a.jsx)(I.Z,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,a.jsxs)(Q.Z,{children:["+",e.models.length-3," ",e.models.length-3==1?"more model":"more models"]})}),e$[e.team_id]&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.models.slice(3).map((e,s)=>"all-proxy-models"===e?(0,a.jsx)(I.Z,{size:"xs",color:"red",children:(0,a.jsx)(Q.Z,{children:"All Proxy Models"})},s+3):(0,a.jsx)(I.Z,{size:"xs",color:"blue",children:(0,a.jsx)(Q.Z,{children:e.length>30?"".concat((0,v.W0)(e).slice(0,30),"..."):(0,v.W0)(e)})},s+3))})]})]})})}):null})}),(0,a.jsx)(G.Z,{children:e.organization_id}),(0,a.jsxs)(G.Z,{children:[(0,a.jsxs)(Q.Z,{children:[eY&&e.team_id&&eY[e.team_id]&&eY[e.team_id].keys&&eY[e.team_id].keys.length," ","Keys"]}),(0,a.jsxs)(Q.Z,{children:[eY&&e.team_id&&eY[e.team_id]&&eY[e.team_id].team_info&&eY[e.team_id].team_info.members_with_roles&&eY[e.team_id].team_info.members_with_roles.length," ","Members"]})]}),(0,a.jsx)(G.Z,{children:"Admin"==C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.Z,{icon:m.Z,size:"sm",onClick:()=>{eM(e.team_id),eI(!0)}}),(0,a.jsx)(O.Z,{onClick:()=>sl(e.team_id),icon:h.Z,size:"sm"})]}):null})]},e.team_id)):null})]}),eR&&(()=>{var e;let l=null==s?void 0:s.find(e=>e.team_id===eJ),t=(null==l?void 0:l.team_alias)||"",i=(null==l?void 0:null===(e=l.keys)||void 0===e?void 0:e.length)||0,r=e6===t;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl min-h-[380px] py-6 overflow-hidden transform transition-all flex flex-col justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Team"}),(0,a.jsx)("button",{onClick:()=>{st(),e7("")},className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:(0,a.jsx)(et.Z,{size:20})})]}),(0,a.jsxs)("div",{className:"px-6 py-4",children:[i>0&&(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-100 rounded-md mb-5",children:[(0,a.jsx)("div",{className:"text-red-500 mt-0.5",children:(0,a.jsx)(ei.Z,{size:20})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-base font-medium text-red-600",children:["Warning: This team has ",i," associated key",i>1?"s":"","."]}),(0,a.jsx)("p",{className:"text-base text-red-600 mt-2",children:"Deleting the team will also delete all associated keys. This action is irreversible."})]})]}),(0,a.jsx)("p",{className:"text-base text-gray-600 mb-5",children:"Are you sure you want to force delete this team and all its keys?"}),(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("label",{className:"block text-base font-medium text-gray-700 mb-2",children:["Type ",(0,a.jsx)("span",{className:"underline",children:t})," to confirm deletion:"]}),(0,a.jsx)("input",{type:"text",value:e6,onChange:e=>e7(e.target.value),placeholder:"Enter team name exactly",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-base",autoFocus:!0})]})]})]}),(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50 flex justify-end gap-4",children:[(0,a.jsx)("button",{onClick:()=>{st(),e7("")},className:"px-5 py-3 bg-white border border-gray-300 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,a.jsx)("button",{onClick:sa,disabled:!r,className:"px-5 py-3 rounded-md text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 ".concat(r?"bg-red-600 hover:bg-red-700":"bg-red-300 cursor-not-allowed"),children:"Force Delete"})]})]})})})()]})})})]}),(0,a.jsx)(R.Z,{children:(0,a.jsx)(ee,{accessToken:Z,userID:S})}),(0,T.tY)(C||"")&&(0,a.jsx)(R.Z,{children:(0,a.jsx)(z,{accessToken:Z,userID:S||"",userRole:C||""})})]})]}),("Admin"==C||"Org Admin"==C)&&(0,a.jsx)(p.Z,{title:"Create Team",visible:eD,width:1e3,footer:null,onOk:()=>{eF(!1),eb.resetFields(),e2([]),se({})},onCancel:()=>{eF(!1),eb.resetFields(),e2([]),se({})},children:(0,a.jsxs)(x.Z,{form:eb,onFinish:si,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z.Item,{label:"Team Name",name:"team_alias",rules:[{required:!0,message:"Please input a team name"}],children:(0,a.jsx)(X.Z,{placeholder:""})}),(0,a.jsx)(x.Z.Item,{label:(0,a.jsxs)("span",{children:["Organization"," ",(0,a.jsx)(u.Z,{title:(0,a.jsxs)("span",{children:["Organizations can have multiple teams. Learn more about"," ",(0,a.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/user_management_heirarchy",target:"_blank",rel:"noopener noreferrer",style:{color:"#1890ff",textDecoration:"underline"},onClick:e=>e.stopPropagation(),children:"user management hierarchy"})]}),children:(0,a.jsx)(y.Z,{style:{marginLeft:"4px"}})})]}),name:"organization_id",initialValue:ex?ex.organization_id:null,className:"mt-8",children:(0,a.jsx)(j.default,{showSearch:!0,allowClear:!0,placeholder:"Search or select an Organization",onChange:e=>{eb.setFieldValue("organization_id",e),ej((null==$?void 0:$.find(s=>s.organization_id===e))||null)},filterOption:(e,s)=>{var l;return!!s&&((null===(l=s.children)||void 0===l?void 0:l.toString())||"").toLowerCase().includes(e.toLowerCase())},optionFilterProp:"children",children:null==$?void 0:$.map(e=>(0,a.jsxs)(j.default.Option,{value:e.organization_id,children:[(0,a.jsx)("span",{className:"font-medium",children:e.organization_alias})," ",(0,a.jsxs)("span",{className:"text-gray-500",children:["(",e.organization_id,")"]})]},e.organization_id))})}),(0,a.jsx)(x.Z.Item,{label:(0,a.jsxs)("span",{children:["Models"," ",(0,a.jsx)(u.Z,{title:"These are the models that your selected team has access to",children:(0,a.jsx)(y.Z,{style:{marginLeft:"4px"}})})]}),name:"models",children:(0,a.jsxs)(j.default,{mode:"multiple",placeholder:"Select models",style:{width:"100%"},children:[(0,a.jsx)(j.default.Option,{value:"all-proxy-models",children:"All Proxy Models"},"all-proxy-models"),eG.map(e=>(0,a.jsx)(j.default.Option,{value:e,children:(0,v.W0)(e)},e))]})}),(0,a.jsx)(x.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,a.jsx)(f.Z,{step:.01,precision:2,width:200})}),(0,a.jsx)(x.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,a.jsxs)(j.default,{defaultValue:null,placeholder:"n/a",children:[(0,a.jsx)(j.default.Option,{value:"24h",children:"daily"}),(0,a.jsx)(j.default.Option,{value:"7d",children:"weekly"}),(0,a.jsx)(j.default.Option,{value:"30d",children:"monthly"})]})}),(0,a.jsx)(x.Z.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,a.jsx)(f.Z,{step:1,width:400})}),(0,a.jsx)(x.Z.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,a.jsx)(f.Z,{step:1,width:400})}),(0,a.jsxs)(A.Z,{className:"mt-20 mb-8",onClick:()=>{e3||(ss(),e8(!0))},children:[(0,a.jsx)(L.Z,{children:(0,a.jsx)("b",{children:"Additional Settings"})}),(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(x.Z.Item,{label:"Team ID",name:"team_id",help:"ID of the team you want to create. If not provided, it will be generated automatically.",children:(0,a.jsx)(X.Z,{onChange:e=>{e.target.value=e.target.value.trim()}})}),(0,a.jsx)(x.Z.Item,{label:"Team Member Budget (USD)",name:"team_member_budget",normalize:e=>e?Number(e):void 0,tooltip:"This is the individual budget for a user in the team.",children:(0,a.jsx)(f.Z,{step:.01,precision:2,width:200})}),(0,a.jsx)(x.Z.Item,{label:"Team Member Key Duration (eg: 1d, 1mo)",name:"team_member_key_duration",tooltip:"Set a limit to the duration of a team member's key. Format: 30s (seconds), 30m (minutes), 30h (hours), 30d (days), 1mo (month)",children:(0,a.jsx)(X.Z,{placeholder:"e.g., 30d"})}),(0,a.jsx)(x.Z.Item,{label:"Team Member RPM Limit",name:"team_member_rpm_limit",tooltip:"The RPM (Requests Per Minute) limit for individual team members",children:(0,a.jsx)(f.Z,{step:1,width:400})}),(0,a.jsx)(x.Z.Item,{label:"Team Member TPM Limit",name:"team_member_tpm_limit",tooltip:"The TPM (Tokens Per Minute) limit for individual team members",children:(0,a.jsx)(f.Z,{step:1,width:400})}),(0,a.jsx)(x.Z.Item,{label:"Metadata",name:"metadata",help:"Additional team metadata. Enter metadata as JSON object.",children:(0,a.jsx)(g.default.TextArea,{rows:4})}),(0,a.jsx)(x.Z.Item,{label:(0,a.jsxs)("span",{children:["Guardrails"," ",(0,a.jsx)(u.Z,{title:"Setup your first guardrail",children:(0,a.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(y.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-8",help:"Select existing guardrails or enter new ones",children:(0,a.jsx)(j.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter guardrails",options:eQ.map(e=>({value:e,label:e}))})}),(0,a.jsx)(x.Z.Item,{label:(0,a.jsxs)("span",{children:["Allowed Vector Stores"," ",(0,a.jsx)(u.Z,{title:"Select which vector stores this team can access by default. Leave empty for access to all vector stores",children:(0,a.jsx)(y.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-8",help:"Select vector stores this team can access. Leave empty for access to all vector stores",children:(0,a.jsx)(es.Z,{onChange:e=>eb.setFieldValue("allowed_vector_store_ids",e),value:eb.getFieldValue("allowed_vector_store_ids"),accessToken:Z||"",placeholder:"Select vector stores (optional)"})})]})]}),(0,a.jsxs)(A.Z,{className:"mt-8 mb-8",children:[(0,a.jsx)(L.Z,{children:(0,a.jsx)("b",{children:"MCP Settings"})}),(0,a.jsxs)(M.Z,{children:[(0,a.jsx)(x.Z.Item,{label:(0,a.jsxs)("span",{children:["Allowed MCP Servers"," ",(0,a.jsx)(u.Z,{title:"Select which MCP servers or access groups this team can access",children:(0,a.jsx)(y.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",className:"mt-4",help:"Select MCP servers or access groups this team can access",children:(0,a.jsx)(er.Z,{onChange:e=>eb.setFieldValue("allowed_mcp_servers_and_groups",e),value:eb.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:Z||"",placeholder:"Select MCP servers or access groups (optional)"})}),(0,a.jsx)(x.Z.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,a.jsx)(g.default,{type:"hidden"})}),(0,a.jsx)(x.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.allowed_mcp_servers_and_groups!==s.allowed_mcp_servers_and_groups||e.mcp_tool_permissions!==s.mcp_tool_permissions,children:()=>{var e;return(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(en.Z,{accessToken:Z||"",selectedServers:(null===(e=eb.getFieldValue("allowed_mcp_servers_and_groups"))||void 0===e?void 0:e.servers)||[],toolPermissions:eb.getFieldValue("mcp_tool_permissions")||{},onChange:e=>eb.setFieldsValue({mcp_tool_permissions:e})})})}})]})]}),(0,a.jsxs)(A.Z,{className:"mt-8 mb-8",children:[(0,a.jsx)(L.Z,{children:(0,a.jsx)("b",{children:"Logging Settings"})}),(0,a.jsx)(M.Z,{children:(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(el.Z,{value:e1,onChange:e2,premiumUser:ec})})})]}),(0,a.jsxs)(A.Z,{className:"mt-8 mb-8",children:[(0,a.jsx)(L.Z,{children:(0,a.jsx)("b",{children:"Model Aliases"})}),(0,a.jsx)(M.Z,{children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(Q.Z,{className:"text-sm text-gray-600 mb-4",children:"Create custom aliases for models that can be used by team members in API calls. This allows you to create shortcuts for specific models."}),(0,a.jsx)(eo.Z,{accessToken:Z||"",initialModelAliases:e9,onAliasUpdate:se,showExampleConfig:!1})]})})]})]}),(0,a.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,a.jsx)(_.ZP,{htmlType:"submit",children:"Create Team"})})]})})]})})})}}}]);