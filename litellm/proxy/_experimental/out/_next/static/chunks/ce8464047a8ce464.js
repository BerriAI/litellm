(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,980187,e=>{"use strict";e.s(["createTeamAliasMap",0,e=>e?e.reduce((e,l)=>(e[l.team_id]=l.team_alias,e),{}):{},"resolveTeamAliasFromTeamID",0,(e,l)=>{let a=l.find(l=>l.team_id===e);return a?a.team_alias:null}])},846753,e=>{"use strict";let l=(0,e.i(475254).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["default",()=>l])},655913,38419,78334,54943,555436,e=>{"use strict";var l=e.i(843476),a=e.i(115504),s=e.i(311451),i=e.i(374009),t=e.i(271645);e.s(["FilterInput",0,({placeholder:e,value:r,onChange:n,icon:o,className:d})=>{let[c,m]=(0,t.useState)(r);(0,t.useEffect)(()=>{m(r)},[r]);let u=(0,t.useMemo)(()=>(0,i.default)(e=>n(e),300),[n]);(0,t.useEffect)(()=>()=>{u.cancel()},[u]);let x=(0,t.useCallback)(e=>{let l=e.target.value;m(l),u(l)},[u]);return(0,l.jsx)(s.Input,{placeholder:e,value:c,onChange:x,prefix:o?(0,l.jsx)(o,{size:16,className:"text-gray-500"}):void 0,className:(0,a.cx)("w-64",d)})}],655913);var r=e.i(906579),n=e.i(464571),o=e.i(475254);let d=(0,o.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["FiltersButton",0,({onClick:e,active:a,hasActiveFilters:s,label:i="Filters"})=>(0,l.jsx)(r.Badge,{color:"blue",dot:s,children:(0,l.jsx)(n.Button,{type:"default",onClick:e,icon:(0,l.jsx)(d,{size:16}),className:a?"bg-gray-100":"",children:i})})],38419);let c=(0,o.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["ResetFiltersButton",0,({onClick:e,label:a="Reset Filters"})=>(0,l.jsx)(n.Button,{type:"default",onClick:e,icon:(0,l.jsx)(c,{size:16}),children:a})],78334);let m=(0,o.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["default",()=>m],54943),e.s(["Search",()=>m],555436)},284614,e=>{"use strict";var l=e.i(846753);e.s(["User",()=>l.default])},846835,e=>{"use strict";var l=e.i(843476),a=e.i(655913),s=e.i(38419),i=e.i(78334),t=e.i(555436),r=e.i(284614);let n=({filters:e,showFilters:n,onToggleFilters:o,onChange:d,onReset:c})=>{let m=!!(e.org_id||e.org_alias);return(0,l.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,l.jsx)(a.FilterInput,{placeholder:"Search by Organization Name",value:e.org_alias,onChange:e=>d("org_alias",e),icon:t.Search,className:"w-64"}),(0,l.jsx)(s.FiltersButton,{onClick:()=>o(!n),active:n,hasActiveFilters:m}),(0,l.jsx)(i.ResetFiltersButton,{onClick:c})]}),n&&(0,l.jsx)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:(0,l.jsx)(a.FilterInput,{placeholder:"Search by Organization ID",value:e.org_id,onChange:e=>d("org_id",e),icon:r.User,className:"w-64"})})]})};var o=e.i(827252),d=e.i(871943),c=e.i(502547),m=e.i(278587),u=e.i(389083),x=e.i(994388),h=e.i(304967),g=e.i(309426),_=e.i(350967),j=e.i(752978),p=e.i(197647),b=e.i(653824),v=e.i(269200),f=e.i(942232),T=e.i(977572),C=e.i(427612),y=e.i(64848),w=e.i(496020),z=e.i(881073),N=e.i(404206),S=e.i(723731),F=e.i(599724),I=e.i(779241),M=e.i(808613),k=e.i(311451),O=e.i(212931),B=e.i(199133),A=e.i(592968),P=e.i(271645),D=e.i(500330),L=e.i(127952),R=e.i(902555),U=e.i(355619),E=e.i(75921),H=e.i(162386),V=e.i(727749),G=e.i(764205),q=e.i(785242),$=e.i(980187),W=e.i(530212),J=e.i(591935),K=e.i(68155),Y=e.i(629569),Q=e.i(464571),X=e.i(678784),Z=e.i(118366),ee=e.i(907308),el=e.i(384767),ea=e.i(435451),es=e.i(276173),ei=e.i(916940);let et=({organizationId:e,onClose:a,accessToken:s,is_org_admin:i,is_proxy_admin:t,userModels:r,editOrg:n})=>{let[o,d]=(0,P.useState)(null),[c,m]=(0,P.useState)(!0),[g]=M.Form.useForm(),[O,A]=(0,P.useState)(!1),[L,R]=(0,P.useState)(!1),[U,et]=(0,P.useState)(!1),[er,en]=(0,P.useState)(null),[eo,ed]=(0,P.useState)({}),[ec,em]=(0,P.useState)(!1),eu=i||t,{data:ex}=(0,q.useTeams)(),eh=(0,P.useMemo)(()=>(0,$.createTeamAliasMap)(ex),[ex]),eg=async()=>{try{if(m(!0),!s)return;let l=await (0,G.organizationInfoCall)(s,e);d(l)}catch(e){V.default.fromBackend("Failed to load organization information"),console.error("Error fetching organization info:",e)}finally{m(!1)}};(0,P.useEffect)(()=>{eg()},[e,s]);let e_=async l=>{try{if(null==s)return;let a={user_email:l.user_email,user_id:l.user_id,role:l.role};await (0,G.organizationMemberAddCall)(s,e,a),V.default.success("Organization member added successfully"),R(!1),g.resetFields(),eg()}catch(e){V.default.fromBackend("Failed to add organization member"),console.error("Error adding organization member:",e)}},ej=async l=>{try{if(!s)return;let a={user_email:l.user_email,user_id:l.user_id,role:l.role};await (0,G.organizationMemberUpdateCall)(s,e,a),V.default.success("Organization member updated successfully"),et(!1),g.resetFields(),eg()}catch(e){V.default.fromBackend("Failed to update organization member"),console.error("Error updating organization member:",e)}},ep=async l=>{try{if(!s)return;await (0,G.organizationMemberDeleteCall)(s,e,l.user_id),V.default.success("Organization member deleted successfully"),et(!1),g.resetFields(),eg()}catch(e){V.default.fromBackend("Failed to delete organization member"),console.error("Error deleting organization member:",e)}},eb=async l=>{try{if(!s)return;em(!0);let a={organization_id:e,organization_alias:l.organization_alias,models:l.models,litellm_budget_table:{tpm_limit:l.tpm_limit,rpm_limit:l.rpm_limit,max_budget:l.max_budget,budget_duration:l.budget_duration},metadata:l.metadata?JSON.parse(l.metadata):null};if((void 0!==l.vector_stores||void 0!==l.mcp_servers_and_groups)&&(a.object_permission={...o?.object_permission,vector_stores:l.vector_stores||[]},void 0!==l.mcp_servers_and_groups)){let{servers:e,accessGroups:s}=l.mcp_servers_and_groups||{servers:[],accessGroups:[]};e&&e.length>0&&(a.object_permission.mcp_servers=e),s&&s.length>0&&(a.object_permission.mcp_access_groups=s)}await (0,G.organizationUpdateCall)(s,a),V.default.success("Organization settings updated successfully"),A(!1),eg()}catch(e){V.default.fromBackend("Failed to update organization settings"),console.error("Error updating organization:",e)}finally{em(!1)}};if(c)return(0,l.jsx)("div",{className:"p-4",children:"Loading..."});if(!o)return(0,l.jsx)("div",{className:"p-4",children:"Organization not found"});let ev=async(e,l)=>{await (0,D.copyToClipboard)(e)&&(ed(e=>({...e,[l]:!0})),setTimeout(()=>{ed(e=>({...e,[l]:!1}))},2e3))};return(0,l.jsxs)("div",{className:"w-full h-screen p-4 bg-white",children:[(0,l.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(x.Button,{icon:W.ArrowLeftIcon,onClick:a,variant:"light",className:"mb-4",children:"Back to Organizations"}),(0,l.jsx)(Y.Title,{children:o.organization_alias}),(0,l.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,l.jsx)(F.Text,{className:"text-gray-500 font-mono",children:o.organization_id}),(0,l.jsx)(Q.Button,{type:"text",size:"small",icon:eo["org-id"]?(0,l.jsx)(X.CheckIcon,{size:12}):(0,l.jsx)(Z.CopyIcon,{size:12}),onClick:()=>ev(o.organization_id,"org-id"),className:`left-2 z-10 transition-all duration-200 ${eo["org-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`})]})]})}),(0,l.jsxs)(b.TabGroup,{defaultIndex:2*!!n,children:[(0,l.jsxs)(z.TabList,{className:"mb-4",children:[(0,l.jsx)(p.Tab,{children:"Overview"}),(0,l.jsx)(p.Tab,{children:"Members"}),(0,l.jsx)(p.Tab,{children:"Settings"})]}),(0,l.jsxs)(S.TabPanels,{children:[(0,l.jsx)(N.TabPanel,{children:(0,l.jsxs)(_.Grid,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,l.jsxs)(h.Card,{children:[(0,l.jsx)(F.Text,{children:"Organization Details"}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)(F.Text,{children:["Created: ",new Date(o.created_at).toLocaleDateString()]}),(0,l.jsxs)(F.Text,{children:["Updated: ",new Date(o.updated_at).toLocaleDateString()]}),(0,l.jsxs)(F.Text,{children:["Created By: ",o.created_by]})]})]}),(0,l.jsxs)(h.Card,{children:[(0,l.jsx)(F.Text,{children:"Budget Status"}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)(Y.Title,{children:["$",(0,D.formatNumberWithCommas)(o.spend,4)]}),(0,l.jsxs)(F.Text,{children:["of"," ",null===o.litellm_budget_table.max_budget?"Unlimited":`$${(0,D.formatNumberWithCommas)(o.litellm_budget_table.max_budget,4)}`]}),o.litellm_budget_table.budget_duration&&(0,l.jsxs)(F.Text,{className:"text-gray-500",children:["Reset: ",o.litellm_budget_table.budget_duration]})]})]}),(0,l.jsxs)(h.Card,{children:[(0,l.jsx)(F.Text,{children:"Rate Limits"}),(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)(F.Text,{children:["TPM: ",o.litellm_budget_table.tpm_limit||"Unlimited"]}),(0,l.jsxs)(F.Text,{children:["RPM: ",o.litellm_budget_table.rpm_limit||"Unlimited"]}),o.litellm_budget_table.max_parallel_requests&&(0,l.jsxs)(F.Text,{children:["Max Parallel Requests: ",o.litellm_budget_table.max_parallel_requests]})]})]}),(0,l.jsxs)(h.Card,{children:[(0,l.jsx)(F.Text,{children:"Models"}),(0,l.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:0===o.models.length?(0,l.jsx)(u.Badge,{color:"red",children:"All proxy models"}):o.models.map((e,a)=>(0,l.jsx)(u.Badge,{color:"red",children:e},a))})]}),(0,l.jsxs)(h.Card,{children:[(0,l.jsx)(F.Text,{children:"Teams"}),(0,l.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:o.teams?.map((e,a)=>(0,l.jsx)(u.Badge,{color:"red",children:eh[e.team_id]||e.team_id},a))})]}),(0,l.jsx)(el.default,{objectPermission:o.object_permission,variant:"card",accessToken:s})]})}),(0,l.jsx)(N.TabPanel,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(h.Card,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[75vh]",children:(0,l.jsxs)(v.Table,{children:[(0,l.jsx)(C.TableHead,{children:(0,l.jsxs)(w.TableRow,{children:[(0,l.jsx)(y.TableHeaderCell,{children:"User ID"}),(0,l.jsx)(y.TableHeaderCell,{children:"Role"}),(0,l.jsx)(y.TableHeaderCell,{children:"Spend"}),(0,l.jsx)(y.TableHeaderCell,{children:"Created At"}),(0,l.jsx)(y.TableHeaderCell,{})]})}),(0,l.jsx)(f.TableBody,{children:o.members&&o.members.length>0?o.members.map((e,a)=>(0,l.jsxs)(w.TableRow,{children:[(0,l.jsx)(T.TableCell,{children:(0,l.jsx)(F.Text,{className:"font-mono",children:e.user_id})}),(0,l.jsx)(T.TableCell,{children:(0,l.jsx)(F.Text,{className:"font-mono",children:e.user_role})}),(0,l.jsx)(T.TableCell,{children:(0,l.jsxs)(F.Text,{children:["$",(0,D.formatNumberWithCommas)(e.spend,4)]})}),(0,l.jsx)(T.TableCell,{children:(0,l.jsx)(F.Text,{children:new Date(e.created_at).toLocaleString()})}),(0,l.jsx)(T.TableCell,{children:eu&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.Icon,{icon:J.PencilAltIcon,size:"sm",onClick:()=>{en({role:e.user_role,user_email:e.user_email,user_id:e.user_id}),et(!0)}}),(0,l.jsx)(j.Icon,{icon:K.TrashIcon,size:"sm",onClick:()=>{ep(e)}})]})})]},a)):(0,l.jsx)(w.TableRow,{children:(0,l.jsx)(T.TableCell,{colSpan:5,className:"text-center py-8",children:(0,l.jsx)(F.Text,{className:"text-gray-500",children:"No members found"})})})})]})}),eu&&(0,l.jsx)(x.Button,{onClick:()=>{R(!0)},children:"Add Member"})]})}),(0,l.jsx)(N.TabPanel,{children:(0,l.jsxs)(h.Card,{className:"overflow-y-auto max-h-[65vh]",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)(Y.Title,{children:"Organization Settings"}),eu&&!O&&(0,l.jsx)(x.Button,{onClick:()=>A(!0),children:"Edit Settings"})]}),O?(0,l.jsxs)(M.Form,{form:g,onFinish:eb,initialValues:{organization_alias:o.organization_alias,models:o.models,tpm_limit:o.litellm_budget_table.tpm_limit,rpm_limit:o.litellm_budget_table.rpm_limit,max_budget:o.litellm_budget_table.max_budget,budget_duration:o.litellm_budget_table.budget_duration,metadata:o.metadata?JSON.stringify(o.metadata,null,2):"",vector_stores:o.object_permission?.vector_stores||[],mcp_servers_and_groups:{servers:o.object_permission?.mcp_servers||[],accessGroups:o.object_permission?.mcp_access_groups||[]}},layout:"vertical",children:[(0,l.jsx)(M.Form.Item,{label:"Organization Name",name:"organization_alias",rules:[{required:!0,message:"Please input an organization name"}],children:(0,l.jsx)(I.TextInput,{})}),(0,l.jsx)(M.Form.Item,{label:"Models",name:"models",children:(0,l.jsx)(H.ModelSelect,{value:g.getFieldValue("models"),onChange:e=>g.setFieldValue("models",e),context:"organization",options:{includeSpecialOptions:!0,showAllProxyModelsOverride:!0}})}),(0,l.jsx)(M.Form.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,l.jsx)(ea.default,{step:.01,precision:2,style:{width:"100%"}})}),(0,l.jsx)(M.Form.Item,{label:"Reset Budget",name:"budget_duration",children:(0,l.jsxs)(B.Select,{placeholder:"n/a",children:[(0,l.jsx)(B.Select.Option,{value:"24h",children:"daily"}),(0,l.jsx)(B.Select.Option,{value:"7d",children:"weekly"}),(0,l.jsx)(B.Select.Option,{value:"30d",children:"monthly"})]})}),(0,l.jsx)(M.Form.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,l.jsx)(ea.default,{step:1,style:{width:"100%"}})}),(0,l.jsx)(M.Form.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,l.jsx)(ea.default,{step:1,style:{width:"100%"}})}),(0,l.jsx)(M.Form.Item,{label:"Vector Stores",name:"vector_stores",children:(0,l.jsx)(ei.default,{onChange:e=>g.setFieldValue("vector_stores",e),value:g.getFieldValue("vector_stores"),accessToken:s||"",placeholder:"Select vector stores"})}),(0,l.jsx)(M.Form.Item,{label:"MCP Servers & Access Groups",name:"mcp_servers_and_groups",children:(0,l.jsx)(E.default,{onChange:e=>g.setFieldValue("mcp_servers_and_groups",e),value:g.getFieldValue("mcp_servers_and_groups"),accessToken:s||"",placeholder:"Select MCP servers and access groups"})}),(0,l.jsx)(M.Form.Item,{label:"Metadata",name:"metadata",children:(0,l.jsx)(k.Input.TextArea,{rows:4})}),(0,l.jsx)("div",{className:"sticky z-10 bg-white p-4 border-t border-gray-200 bottom-[-1.5rem] inset-x-[-1.5rem]",children:(0,l.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,l.jsx)(x.Button,{variant:"secondary",onClick:()=>A(!1),disabled:ec,children:"Cancel"}),(0,l.jsx)(x.Button,{type:"submit",loading:ec,children:"Save Changes"})]})})]}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Organization Name"}),(0,l.jsx)("div",{children:o.organization_alias})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Organization ID"}),(0,l.jsx)("div",{className:"font-mono",children:o.organization_id})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Created At"}),(0,l.jsx)("div",{children:new Date(o.created_at).toLocaleString()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Models"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:o.models.map((e,a)=>(0,l.jsx)(u.Badge,{color:"red",children:e},a))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Rate Limits"}),(0,l.jsxs)("div",{children:["TPM: ",o.litellm_budget_table.tpm_limit||"Unlimited"]}),(0,l.jsxs)("div",{children:["RPM: ",o.litellm_budget_table.rpm_limit||"Unlimited"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(F.Text,{className:"font-medium",children:"Budget"}),(0,l.jsxs)("div",{children:["Max:"," ",null!==o.litellm_budget_table.max_budget?`$${(0,D.formatNumberWithCommas)(o.litellm_budget_table.max_budget,4)}`:"No Limit"]}),(0,l.jsxs)("div",{children:["Reset: ",o.litellm_budget_table.budget_duration||"Never"]})]}),(0,l.jsx)(el.default,{objectPermission:o.object_permission,variant:"inline",className:"pt-4 border-t border-gray-200",accessToken:s})]})]})})]})]}),(0,l.jsx)(ee.default,{isVisible:L,onCancel:()=>R(!1),onSubmit:e_,accessToken:s,title:"Add Organization Member",roles:[{label:"org_admin",value:"org_admin",description:"Can add and remove members, and change their roles."},{label:"internal_user",value:"internal_user",description:"Can view/create keys for themselves within organization."},{label:"internal_user_viewer",value:"internal_user_viewer",description:"Can only view their keys within organization."}],defaultRole:"internal_user"}),(0,l.jsx)(es.default,{visible:U,onCancel:()=>et(!1),onSubmit:ej,initialData:er,mode:"edit",config:{title:"Edit Member",showEmail:!0,showUserId:!0,roleOptions:[{label:"Org Admin",value:"org_admin"},{label:"Internal User",value:"internal_user"},{label:"Internal User Viewer",value:"internal_user_viewer"}]}})]})},er=async(e,l,a=null,s=null)=>{l(await (0,G.organizationListCall)(e,a,s))};e.s(["default",0,({organizations:e,userRole:a,userModels:s,accessToken:i,lastRefreshed:t,handleRefreshClick:r,currentOrg:q,guardrailsList:$=[],setOrganizations:W,premiumUser:J})=>{let[K,Y]=(0,P.useState)(null),[Q,X]=(0,P.useState)(!1),[Z,ee]=(0,P.useState)(!1),[el,es]=(0,P.useState)(null),[en,eo]=(0,P.useState)(!1),[ed,ec]=(0,P.useState)(!1),[em]=M.Form.useForm(),[eu,ex]=(0,P.useState)({}),[eh,eg]=(0,P.useState)(!1),[e_,ej]=(0,P.useState)({org_id:"",org_alias:"",sort_by:"created_at",sort_order:"desc"}),ep=async()=>{if(el&&i)try{eo(!0),await (0,G.organizationDeleteCall)(i,el),V.default.success("Organization deleted successfully"),ee(!1),es(null),await er(i,W,e_.org_id||null,e_.org_alias||null)}catch(e){console.error("Error deleting organization:",e)}finally{eo(!1)}},eb=async e=>{try{if(!i)return;console.log(`values in organizations new create call: ${JSON.stringify(e)}`),(e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0||e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0||e.allowed_mcp_servers_and_groups.accessGroups?.length>0))&&(e.object_permission={},e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission.vector_stores=e.allowed_vector_store_ids,delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups&&(e.allowed_mcp_servers_and_groups.servers?.length>0&&(e.object_permission.mcp_servers=e.allowed_mcp_servers_and_groups.servers),e.allowed_mcp_servers_and_groups.accessGroups?.length>0&&(e.object_permission.mcp_access_groups=e.allowed_mcp_servers_and_groups.accessGroups),delete e.allowed_mcp_servers_and_groups)),await (0,G.organizationCreateCall)(i,e),V.default.success("Organization created successfully"),ec(!1),em.resetFields(),er(i,W,e_.org_id||null,e_.org_alias||null)}catch(e){console.error("Error creating organization:",e)}};return J?(0,l.jsxs)("div",{className:"w-full mx-4 h-[75vh]",children:[(0,l.jsx)(_.Grid,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,l.jsxs)(g.Col,{numColSpan:1,className:"flex flex-col gap-2",children:[("Admin"===a||"Org Admin"===a)&&(0,l.jsx)(x.Button,{className:"w-fit",onClick:()=>ec(!0),children:"+ Create New Organization"}),K?(0,l.jsx)(et,{organizationId:K,onClose:()=>{Y(null),X(!1)},accessToken:i,is_org_admin:!0,is_proxy_admin:"Admin"===a,userModels:s,editOrg:Q}):(0,l.jsxs)(b.TabGroup,{className:"gap-2 h-[75vh] w-full",children:[(0,l.jsxs)(z.TabList,{className:"flex justify-between mt-2 w-full items-center",children:[(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)(p.Tab,{children:"Your Organizations"})}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[t&&(0,l.jsxs)(F.Text,{children:["Last Refreshed: ",t]}),(0,l.jsx)(j.Icon,{icon:m.RefreshIcon,variant:"shadow",size:"xs",className:"self-center",onClick:r})]})]}),(0,l.jsx)(S.TabPanels,{children:(0,l.jsxs)(N.TabPanel,{children:[(0,l.jsx)(F.Text,{children:"Click on “Organization ID” to view organization details."}),(0,l.jsx)(_.Grid,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,l.jsx)(g.Col,{numColSpan:1,children:(0,l.jsxs)(h.Card,{className:"w-full mx-auto flex-auto overflow-hidden overflow-y-auto max-h-[50vh]",children:[(0,l.jsx)("div",{className:"border-b px-6 py-4",children:(0,l.jsx)("div",{className:"flex flex-col space-y-4",children:(0,l.jsx)(n,{filters:e_,showFilters:eh,onToggleFilters:eg,onChange:(e,l)=>{let a={...e_,[e]:l};ej(a),i&&(0,G.organizationListCall)(i,a.org_id||null,a.org_alias||null).then(e=>{e&&W(e)}).catch(e=>{console.error("Error fetching organizations:",e)})},onReset:()=>{ej({org_id:"",org_alias:"",sort_by:"created_at",sort_order:"desc"}),i&&(0,G.organizationListCall)(i,null,null).then(e=>{e&&W(e)}).catch(e=>{console.error("Error fetching organizations:",e)})}})})}),(0,l.jsxs)(v.Table,{children:[(0,l.jsx)(C.TableHead,{children:(0,l.jsxs)(w.TableRow,{children:[(0,l.jsx)(y.TableHeaderCell,{children:"Organization ID"}),(0,l.jsx)(y.TableHeaderCell,{children:"Organization Name"}),(0,l.jsx)(y.TableHeaderCell,{children:"Created"}),(0,l.jsx)(y.TableHeaderCell,{children:"Spend (USD)"}),(0,l.jsx)(y.TableHeaderCell,{children:"Budget (USD)"}),(0,l.jsx)(y.TableHeaderCell,{children:"Models"}),(0,l.jsx)(y.TableHeaderCell,{children:"TPM / RPM Limits"}),(0,l.jsx)(y.TableHeaderCell,{children:"Info"}),(0,l.jsx)(y.TableHeaderCell,{children:"Actions"})]})}),(0,l.jsx)(f.TableBody,{children:e&&e.length>0?e.sort((e,l)=>new Date(l.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>(0,l.jsxs)(w.TableRow,{children:[(0,l.jsx)(T.TableCell,{children:(0,l.jsx)("div",{className:"overflow-hidden",children:(0,l.jsx)(A.Tooltip,{title:e.organization_id,children:(0,l.jsxs)(x.Button,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>Y(e.organization_id),children:[e.organization_id?.slice(0,7),"..."]})})})}),(0,l.jsx)(T.TableCell,{children:e.organization_alias}),(0,l.jsx)(T.TableCell,{children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,l.jsx)(T.TableCell,{children:(0,D.formatNumberWithCommas)(e.spend,4)}),(0,l.jsx)(T.TableCell,{children:e.litellm_budget_table?.max_budget!==null&&e.litellm_budget_table?.max_budget!==void 0?e.litellm_budget_table?.max_budget:"No limit"}),(0,l.jsx)(T.TableCell,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:e.models.length>3?"px-0":"",children:(0,l.jsx)("div",{className:"flex flex-col",children:Array.isArray(e.models)?(0,l.jsx)("div",{className:"flex flex-col",children:0===e.models.length?(0,l.jsx)(u.Badge,{size:"xs",className:"mb-1",color:"red",children:(0,l.jsx)(F.Text,{children:"All Proxy Models"})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex items-start",children:[e.models.length>3&&(0,l.jsx)("div",{children:(0,l.jsx)(j.Icon,{icon:eu[e.organization_id||""]?d.ChevronDownIcon:c.ChevronRightIcon,className:"cursor-pointer",size:"xs",onClick:()=>{ex(l=>({...l,[e.organization_id||""]:!l[e.organization_id||""]}))}})}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.models.slice(0,3).map((e,a)=>"all-proxy-models"===e?(0,l.jsx)(u.Badge,{size:"xs",color:"red",children:(0,l.jsx)(F.Text,{children:"All Proxy Models"})},a):(0,l.jsx)(u.Badge,{size:"xs",color:"blue",children:(0,l.jsx)(F.Text,{children:e.length>30?`${(0,U.getModelDisplayName)(e).slice(0,30)}...`:(0,U.getModelDisplayName)(e)})},a)),e.models.length>3&&!eu[e.organization_id||""]&&(0,l.jsx)(u.Badge,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,l.jsxs)(F.Text,{children:["+",e.models.length-3," ",e.models.length-3==1?"more model":"more models"]})}),eu[e.organization_id||""]&&(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:e.models.slice(3).map((e,a)=>"all-proxy-models"===e?(0,l.jsx)(u.Badge,{size:"xs",color:"red",children:(0,l.jsx)(F.Text,{children:"All Proxy Models"})},a+3):(0,l.jsx)(u.Badge,{size:"xs",color:"blue",children:(0,l.jsx)(F.Text,{children:e.length>30?`${(0,U.getModelDisplayName)(e).slice(0,30)}...`:(0,U.getModelDisplayName)(e)})},a+3))})]})]})})}):null})}),(0,l.jsx)(T.TableCell,{children:(0,l.jsxs)(F.Text,{children:["TPM:"," ",e.litellm_budget_table?.tpm_limit?e.litellm_budget_table?.tpm_limit:"Unlimited",(0,l.jsx)("br",{}),"RPM:"," ",e.litellm_budget_table?.rpm_limit?e.litellm_budget_table?.rpm_limit:"Unlimited"]})}),(0,l.jsx)(T.TableCell,{children:(0,l.jsxs)(F.Text,{children:[e.members?.length||0," Members"]})}),(0,l.jsx)(T.TableCell,{children:"Admin"===a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(R.default,{variant:"Edit",tooltipText:"Edit organization",onClick:()=>{Y(e.organization_id),X(!0)}}),(0,l.jsx)(R.default,{variant:"Delete",tooltipText:"Delete organization",onClick:()=>{var l;(l=e.organization_id)&&(es(l),ee(!0))}})]})})]},e.organization_id)):null})]})]})})})]})})]})]})}),(0,l.jsx)(O.Modal,{title:"Create Organization",visible:ed,width:800,footer:null,onCancel:()=>{ec(!1),em.resetFields()},children:(0,l.jsxs)(M.Form,{form:em,onFinish:eb,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,l.jsx)(M.Form.Item,{label:"Organization Name",name:"organization_alias",rules:[{required:!0,message:"Please input an organization name"}],children:(0,l.jsx)(I.TextInput,{placeholder:""})}),(0,l.jsx)(M.Form.Item,{label:"Models",name:"models",children:(0,l.jsx)(H.ModelSelect,{options:{showAllProxyModelsOverride:!0,includeSpecialOptions:!0},value:em.getFieldValue("models"),onChange:e=>em.setFieldValue("models",e),context:"organization"})}),(0,l.jsx)(M.Form.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,l.jsx)(ea.default,{step:.01,precision:2,width:200})}),(0,l.jsx)(M.Form.Item,{label:"Reset Budget",name:"budget_duration",children:(0,l.jsxs)(B.Select,{defaultValue:null,placeholder:"n/a",children:[(0,l.jsx)(B.Select.Option,{value:"24h",children:"daily"}),(0,l.jsx)(B.Select.Option,{value:"7d",children:"weekly"}),(0,l.jsx)(B.Select.Option,{value:"30d",children:"monthly"})]})}),(0,l.jsx)(M.Form.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,l.jsx)(ea.default,{step:1,width:400})}),(0,l.jsx)(M.Form.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,l.jsx)(ea.default,{step:1,width:400})}),(0,l.jsx)(M.Form.Item,{label:(0,l.jsxs)("span",{children:["Allowed Vector Stores"," ",(0,l.jsx)(A.Tooltip,{title:"Select which vector stores this organization can access by default. Leave empty for access to all vector stores",children:(0,l.jsx)(o.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-4",help:"Select vector stores this organization can access. Leave empty for access to all vector stores",children:(0,l.jsx)(ei.default,{onChange:e=>em.setFieldValue("allowed_vector_store_ids",e),value:em.getFieldValue("allowed_vector_store_ids"),accessToken:i||"",placeholder:"Select vector stores (optional)"})}),(0,l.jsx)(M.Form.Item,{label:(0,l.jsxs)("span",{children:["Allowed MCP Servers"," ",(0,l.jsx)(A.Tooltip,{title:"Select which MCP servers and access groups this organization can access by default.",children:(0,l.jsx)(o.InfoCircleOutlined,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",className:"mt-4",help:"Select MCP servers and access groups this organization can access.",children:(0,l.jsx)(E.default,{onChange:e=>em.setFieldValue("allowed_mcp_servers_and_groups",e),value:em.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:i||"",placeholder:"Select MCP servers and access groups (optional)"})}),(0,l.jsx)(M.Form.Item,{label:"Metadata",name:"metadata",children:(0,l.jsx)(k.Input.TextArea,{rows:4})}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(x.Button,{type:"submit",children:"Create Organization"})})]})}),(0,l.jsx)(L.default,{isOpen:Z,title:"Delete Organization?",message:"Are you sure you want to delete this organization? This action cannot be undone.",resourceInformationTitle:"Organization Information",resourceInformation:[{label:"Organization ID",value:el,code:!0}],onCancel:()=>{ee(!1),es(null)},onOk:ep,confirmLoading:en})]}):(0,l.jsx)("div",{children:(0,l.jsxs)(F.Text,{children:["This is a LiteLLM Enterprise feature, and requires a valid key to use. Get a trial key"," ",(0,l.jsx)("a",{href:"https://www.litellm.ai/#pricing",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})})},"fetchOrganizations",0,er],846835)}]);