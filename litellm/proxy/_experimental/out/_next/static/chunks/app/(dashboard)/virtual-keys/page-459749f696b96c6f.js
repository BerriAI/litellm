(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7049],{4222:function(e,a,n){Promise.resolve().then(n.bind(n,98441))},98441:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return f}});var t=n(57437),l=n(2265),r=n(19250),s=e=>{let{selectedTeam:a,currentOrg:n,selectedKeyAlias:t,accessToken:s,createClicked:o,expand:c=[]}=e,[i,u]=(0,l.useState)({keys:[],total_count:0,current_page:1,total_pages:0}),[m,f]=(0,l.useState)(!0),[h,d]=(0,l.useState)(null),g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(console.log("calling fetchKeys"),!s){console.log("accessToken",s);return}f(!0);let a="number"==typeof e.page?e.page:1,n="number"==typeof e.pageSize?e.pageSize:100,t=await (0,r.keyListCall)(s,null,null,null,null,null,a,n,null,null,c.join(","));console.log("data",t),u(t),d(null)}catch(e){d(e instanceof Error?e:Error("An error occurred"))}finally{f(!1)}};return(0,l.useEffect)(()=>{g(),console.log("selectedTeam",a,"currentOrg",n,"accessToken",s,"selectedKeyAlias",t)},[a,n,s,t,o]),{keys:i.keys,isLoading:m,error:h,pagination:{currentPage:i.current_page,totalPages:i.total_pages,totalCount:i.total_count},refresh:g,setKeys:e=>{u(a=>{let n="function"==typeof e?e(a.keys):e;return{...a,keys:n}})}}},o=n(54114),c=n(29827),i=n(39760),u=n(85975),m=n(49282),f=()=>{let{accessToken:e,userRole:a,userId:n,premiumUser:r,userEmail:f}=(0,i.Z)(),{teams:h,setTeams:d}=(0,m.Z)(),[g,p]=(0,l.useState)(!1),[y,S]=(0,l.useState)([]),C=new o.S,{keys:b,isLoading:x,error:E,pagination:k,refresh:v,setKeys:w}=s({selectedKeyAlias:null,currentOrg:null,accessToken:e||"",createClicked:g});return(0,t.jsx)(c.aH,{client:C,children:(0,t.jsx)(u.Z,{userID:n,userRole:a,userEmail:f,teams:h,keys:b,setUserRole:()=>{},setUserEmail:()=>{},setTeams:d,setKeys:w,premiumUser:r,organizations:y,addKey:e=>{w(a=>a?[...a,e]:[e]),p(()=>!g)},createClicked:g})})}},12363:function(e,a,n){"use strict";n.d(a,{d:function(){return r},n:function(){return l}});var t=n(2265);let l=()=>{let[e,a]=(0,t.useState)("http://localhost:4000");return(0,t.useEffect)(()=>{{let{protocol:e,host:n}=window.location;a("".concat(e,"//").concat(n))}},[]),e},r=25},30841:function(e,a,n){"use strict";n.d(a,{IE:function(){return r},LO:function(){return l},cT:function(){return s}});var t=n(19250);let l=async e=>{if(!e)return[];try{let{aliases:a}=await (0,t.keyAliasesCall)(e);return Array.from(new Set((a||[]).filter(Boolean)))}catch(e){return console.error("Error fetching all key aliases:",e),[]}},r=async(e,a)=>{if(!e)return[];try{let n=[],l=1,r=!0;for(;r;){let s=await (0,t.teamListCall)(e,a||null,null);n=[...n,...s],l<s.total_pages?l++:r=!1}return n}catch(e){return console.error("Error fetching all teams:",e),[]}},s=async e=>{if(!e)return[];try{let a=[],n=1,l=!0;for(;l;){let r=await (0,t.organizationListCall)(e);a=[...a,...r],n<r.total_pages?n++:l=!1}return a}catch(e){return console.error("Error fetching all organizations:",e),[]}}},23048:function(e,a,n){"use strict";var t=n(57437),l=n(2356),r=n(5545),s=n(37592),o=n(4260),c=n(7310),i=n.n(c),u=n(2265);a.Z=e=>{let{options:a,onApplyFilters:n,onResetFilters:c,initialValues:m={},buttonLabel:f="Filters"}=e,[h,d]=(0,u.useState)(!1),[g,p]=(0,u.useState)(m),[y,S]=(0,u.useState)({}),[C,b]=(0,u.useState)({}),[x,E]=(0,u.useState)({}),[k,v]=(0,u.useState)({}),w=(0,u.useCallback)(i()(async(e,a)=>{if(a.isSearchable&&a.searchFn){b(e=>({...e,[a.name]:!0}));try{let n=await a.searchFn(e);S(e=>({...e,[a.name]:n}))}catch(e){console.error("Error searching:",e),S(e=>({...e,[a.name]:[]}))}finally{b(e=>({...e,[a.name]:!1}))}}},300),[]),j=(0,u.useCallback)(async e=>{if(e.isSearchable&&e.searchFn&&!k[e.name]){b(a=>({...a,[e.name]:!0})),v(a=>({...a,[e.name]:!0}));try{let a=await e.searchFn("");S(n=>({...n,[e.name]:a}))}catch(a){console.error("Error loading initial options:",a),S(a=>({...a,[e.name]:[]}))}finally{b(a=>({...a,[e.name]:!1}))}}},[k]);(0,u.useEffect)(()=>{h&&a.forEach(e=>{e.isSearchable&&!k[e.name]&&j(e)})},[h,a,j,k]);let N=(e,a)=>{let t={...g,[e]:a};p(t),n(t)},_=(e,a)=>{e&&a.isSearchable&&!k[a.name]&&j(a)};return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,t.jsx)(r.ZP,{icon:(0,t.jsx)(l.Z,{className:"h-4 w-4"}),onClick:()=>d(!h),className:"flex items-center gap-2",children:f}),(0,t.jsx)(r.ZP,{onClick:()=>{let e={};a.forEach(a=>{e[a.name]=""}),p(e),c()},children:"Reset Filters"})]}),h&&(0,t.jsx)("div",{className:"grid grid-cols-3 gap-x-6 gap-y-4 mb-6",children:["Team ID","Status","Organization ID","Key Alias","User ID","End User","Error Code","Error Message","Key Hash","Model"].map(e=>{let n=a.find(a=>a.label===e||a.name===e);return n?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:n.label||n.name}),n.isSearchable?(0,t.jsx)(s.default,{showSearch:!0,className:"w-full",placeholder:"Search ".concat(n.label||n.name,"..."),value:g[n.name]||void 0,onChange:e=>N(n.name,e),onOpenChange:e=>_(e,n),onSearch:e=>{E(a=>({...a,[n.name]:e})),n.searchFn&&w(e,n)},filterOption:!1,loading:C[n.name],options:y[n.name]||[],allowClear:!0,notFoundContent:C[n.name]?"Loading...":"No results found"}):n.options?(0,t.jsx)(s.default,{className:"w-full",placeholder:"Select ".concat(n.label||n.name,"..."),value:g[n.name]||void 0,onChange:e=>N(n.name,e),allowClear:!0,children:n.options.map(e=>(0,t.jsx)(s.default.Option,{value:e.value,children:e.label},e.value))}):n.customComponent?(()=>{let e=n.customComponent;return(0,t.jsx)(e,{value:g[n.name]||void 0,onChange:e=>N(n.name,null!=e?e:""),placeholder:"Select ".concat(n.label||n.name,"...")})})():(0,t.jsx)(o.default,{className:"w-full",placeholder:"Enter ".concat(n.label||n.name,"..."),value:g[n.name]||"",onChange:e=>N(n.name,e.target.value),allowClear:!0})]},n.name):null})})]})}}},function(e){e.O(0,[1047,3665,7271,5173,3092,1632,4865,7840,337,2652,3367,5869,2926,353,1994,3709,7474,536,6894,9258,6941,9190,6609,5319,9442,1213,4776,3711,8049,5144,8640,1098,665,5975,2971,2117,1744],function(){return e(e.s=4222)}),_N_E=e.O()}]);