(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1900:function(e,l,s){Promise.resolve().then(s.bind(s,76031))},12011:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return y}});var t=s(57437),a=s(2265),r=s(99376),n=s(20831),i=s(94789),o=s(12514),d=s(49804),c=s(67101),m=s(84264),u=s(26637),h=s(96761),x=s(84566),p=s(19250),g=s(14474),j=s(13634),f=s(73002);function y(){let[e]=j.Z.useForm(),l=(0,r.useSearchParams)();!function(e){console.log("COOKIES",document.cookie);let l=document.cookie.split("; ").find(l=>l.startsWith(e+"="));l&&l.split("=")[1]}("token");let s=l.get("invitation_id"),[y,_]=(0,a.useState)(null),[Z,b]=(0,a.useState)(""),[v,w]=(0,a.useState)(""),[k,S]=(0,a.useState)(null),[N,C]=(0,a.useState)(""),[I,A]=(0,a.useState)("");return(0,a.useEffect)(()=>{s&&(0,p.W_)(s).then(e=>{let l=e.login_url;console.log("login_url:",l),C(l);let s=e.token,t=(0,g.o)(s);A(s),console.log("decoded:",t),_(t.key),console.log("decoded user email:",t.user_email),w(t.user_email),S(t.user_id)})},[s]),(0,t.jsx)("div",{className:"mx-auto w-full max-w-md mt-10",children:(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(h.Z,{className:"text-sm mb-5 text-center",children:"\uD83D\uDE85 LiteLLM"}),(0,t.jsx)(h.Z,{className:"text-xl",children:"Sign up"}),(0,t.jsx)(m.Z,{children:"Claim your user account to login to Admin UI."}),(0,t.jsx)(i.Z,{className:"mt-4",title:"SSO",icon:x.GH$,color:"sky",children:(0,t.jsxs)(c.Z,{numItems:2,className:"flex justify-between items-center",children:[(0,t.jsx)(d.Z,{children:"SSO is under the Enterprise Tirer."}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(n.Z,{variant:"primary",className:"mb-2",children:(0,t.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"Get Free Trial"})})})]})}),(0,t.jsxs)(j.Z,{className:"mt-10 mb-5 mx-auto",layout:"vertical",onFinish:e=>{console.log("in handle submit. accessToken:",y,"token:",I,"formValues:",e),y&&I&&(e.user_email=v,k&&s&&(0,p.m_)(y,s,k,e.password).then(e=>{var l;let s="/ui/";s+="?userID="+((null===(l=e.data)||void 0===l?void 0:l.user_id)||e.user_id),document.cookie="token="+I,console.log("redirecting to:",s),window.location.href=s}))},children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Z.Item,{label:"Email Address",name:"user_email",children:(0,t.jsx)(u.Z,{type:"email",disabled:!0,value:v,defaultValue:v,className:"max-w-md"})}),(0,t.jsx)(j.Z.Item,{label:"Password",name:"password",rules:[{required:!0,message:"password required to sign up"}],help:"Create a password for your account",children:(0,t.jsx)(u.Z,{placeholder:"",type:"password",className:"max-w-md"})})]}),(0,t.jsx)("div",{className:"mt-10",children:(0,t.jsx)(f.ZP,{htmlType:"submit",children:"Sign Up"})})]})]})})}},76031:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return sS}});var t,a,r=s(57437),n=s(2265),i=s(99376),o=s(14474),d=s(90946),c=s(29827);let m={organization_id:null,organization_alias:"Default Organization"};var u=s(27648),h=s(92643),x=e=>{let{userID:l,userRole:s,userEmail:t,premiumUser:a,setProxySettings:n,proxySettings:i,currentOrg:o=null,onOrgChange:d=()=>{},onNewOrg:c=()=>{},organizations:x=[]}=e;console.log("currentOrg: ".concat(JSON.stringify(o))),console.log("organizations: ".concat(JSON.stringify(x)));let p=(null==i?void 0:i.PROXY_LOGOUT_URL)||"",g=[{key:"1",label:(0,r.jsxs)("div",{className:"px-1 py-1",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Role: ",s]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["ID: ",l]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Premium User: ",String(a)]})]})},{key:"2",label:(0,r.jsx)("p",{className:"text-sm hover:text-gray-900",onClick:()=>{document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=p},children:"Logout"})}],j=[{key:"header",label:"Organizations",type:"group",style:{color:"#6B7280",fontSize:"0.875rem"}},{key:"default",label:(0,r.jsx)("div",{className:"flex items-center justify-between py-1",children:(0,r.jsx)("span",{className:"text-sm",children:"Default Organization"})}),onClick:()=>d(m)},...x.filter(e=>null!==e.organization_id).map(e=>{var l;return{key:null!==(l=e.organization_id)&&void 0!==l?l:"default",label:(0,r.jsx)("div",{className:"flex items-center justify-between py-1",children:(0,r.jsx)("span",{className:"text-sm",children:e.organization_alias})}),onClick:()=>d(e)}}),{key:"note",label:(0,r.jsx)("div",{className:"flex items-center justify-between py-1 px-2 bg-gray-50 text-gray-500 text-xs italic",children:(0,r.jsx)("span",{children:"Switching between organizations on the UI is currently in beta."})}),disabled:!0}];return(0,r.jsx)("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)("div",{className:"flex items-center h-12 px-4",children:[(0,r.jsx)("div",{className:"flex items-center flex-shrink-0",children:(0,r.jsx)(u.default,{href:"/",className:"flex items-center",children:(0,r.jsx)("img",{src:"/get_image",alt:"LiteLLM Brand",className:"h-8 w-auto"})})}),(0,r.jsxs)("div",{className:"ml-8 flex items-center",children:[(0,r.jsx)(h.Z,{menu:{items:j,style:{width:"280px",padding:"4px",marginTop:"4px"}},trigger:["click"],placement:"bottomLeft",children:(0,r.jsxs)("button",{className:"inline-flex items-center text-[13px] text-gray-700 hover:text-gray-900 transition-colors",children:[o?o.organization_alias:"Default Organization",(0,r.jsx)("svg",{className:"ml-1 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 9l-7 7-7-7"})})]})}),(0,r.jsx)("span",{className:"ml-2 text-[10px] bg-blue-100 text-blue-800 font-medium px-2 py-0.5 rounded",children:"BETA"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-5 ml-auto",children:[(0,r.jsx)("a",{href:"https://docs.litellm.ai/docs/",target:"_blank",rel:"noopener noreferrer",className:"text-[13px] text-gray-600 hover:text-gray-900 transition-colors",children:"Docs"}),(0,r.jsx)(h.Z,{menu:{items:g,style:{padding:"4px",marginTop:"4px"}},children:(0,r.jsxs)("button",{className:"inline-flex items-center text-[13px] text-gray-600 hover:text-gray-900 transition-colors",children:["User",(0,r.jsx)("svg",{className:"ml-1 w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 9l-7 7-7-7"})})]})})]})]})})})},p=s(19250);let g=async(e,l,s,t,a)=>{let r;r="Admin"!=s&&"Admin Viewer"!=s?await (0,p.It)(e,(null==t?void 0:t.organization_id)||p.lO,l):await (0,p.It)(e,(null==t?void 0:t.organization_id)||p.lO),console.log("givenTeams: ".concat(r)),a(r)};var j=s(49804),f=s(67101),y=s(20831),_=s(26637),Z=s(87452),b=s(88829),v=s(72208),w=s(84264),k=s(96761),S=s(29233),N=s(41326),C=s(13634),I=s(41021),A=s(51369),P=s(8104),E=s(20577),O=s(56632),T=s(73002);let M=async(e,l,s)=>{try{if(null===e||null===l)return;if(null!==s){let t=(await (0,p.So)(s,e,l,!0)).data.map(e=>e.id),a=[],r=[];return t.forEach(e=>{e.endsWith("/*")?a.push(e):r.push(e)}),[...a,...r]}}catch(e){console.error("Error fetching user models:",e)}},D=e=>{if(e.endsWith("/*")){let l=e.replace("/*","");return"All ".concat(l," models")}return e},F=(e,l)=>{let s=[],t=[];return console.log("teamModels",e),console.log("allModels",l),e.forEach(e=>{if(e.endsWith("/*")){let a=e.replace("/*",""),r=l.filter(e=>e.startsWith(a+"/"));t.push(...r),s.push(e)}else t.push(e)}),[...s,...t].filter((e,l,s)=>s.indexOf(e)===l)};var L=s(15424),R=s(75957);let{Option:z}=N.default,U=e=>{let l=[];if(console.log("data:",JSON.stringify(e)),e)for(let s of e)s.metadata&&s.metadata.tags&&l.push(...s.metadata.tags);let s=Array.from(new Set(l)).map(e=>({value:e,label:e}));return console.log("uniqueTags:",s),s};var V=e=>{let{userID:l,team:s,userRole:t,accessToken:a,data:i,setData:o}=e,[d]=C.Z.useForm(),[c,m]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[x,g]=(0,n.useState)(null),[M,V]=(0,n.useState)([]),[q,B]=(0,n.useState)([]),[K,W]=(0,n.useState)("you"),[H,G]=(0,n.useState)(U(i)),[J,Y]=(0,n.useState)([]),$=()=>{m(!1),d.resetFields()},X=()=>{m(!1),h(null),d.resetFields()};(0,n.useEffect)(()=>{(async()=>{try{if(null===l||null===t)return;if(null!==a){let e=(await (0,p.So)(a,l,t)).data.map(e=>e.id);console.log("available_model_names:",e),V(e)}}catch(e){console.error("Error fetching user models:",e)}})()},[a,l,t]),(0,n.useEffect)(()=>{(async()=>{try{let e=(await (0,p.t3)(a)).guardrails.map(e=>e.guardrail_name);Y(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})()},[a]);let Q=async e=>{try{var s,t,r;let n=null!==(s=null==e?void 0:e.key_alias)&&void 0!==s?s:"",c=null!==(t=null==e?void 0:e.team_id)&&void 0!==t?t:null;if((null!==(r=null==i?void 0:i.filter(e=>e.team_id===c).map(e=>e.key_alias))&&void 0!==r?r:[]).includes(n))throw Error("Key alias ".concat(n," already exists for team with ID ").concat(c,", please provide another key alias"));if(I.ZP.info("Making API Call"),m(!0),"you"===K&&(e.user_id=l),"service_account"===K){let l={};try{l=JSON.parse(e.metadata||"{}")}catch(e){console.error("Error parsing metadata:",e)}l.service_account_id=e.key_alias,e.metadata=JSON.stringify(l)}let u=await (0,p.wX)(a,l,e);console.log("key create Response:",u),o(e=>e?[...e,u]:[u]),h(u.key),g(u.soft_budget),I.ZP.success("API Key Created"),d.resetFields(),localStorage.removeItem("userData"+l)}catch(e){console.log("error in create key:",e),I.ZP.error("Error creating the key: ".concat(e))}};return(0,n.useEffect)(()=>{B(F(s&&s.models.length>0?s.models.includes("all-proxy-models")?M:s.models:M,M))},[s,M]),(0,r.jsxs)("div",{children:[(0,r.jsx)(y.Z,{className:"mx-auto",onClick:()=>m(!0),children:"+ Create New Key"}),(0,r.jsx)(A.Z,{title:"Create Key",visible:c,width:800,footer:null,onOk:$,onCancel:X,children:(0,r.jsxs)(C.Z,{form:d,onFinish:Q,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"Owned By",className:"mb-4",children:(0,r.jsxs)(P.ZP.Group,{onChange:e=>W(e.target.value),value:K,children:[(0,r.jsx)(P.ZP,{value:"you",children:"You"}),(0,r.jsx)(P.ZP,{value:"service_account",children:"Service Account"}),"Admin"===t&&(0,r.jsx)(P.ZP,{value:"another_user",children:"Another User"})]})}),(0,r.jsx)(C.Z.Item,{label:"User ID",name:"user_id",hidden:"another_user"!==K,valuePropName:"user_id",className:"mt-8",rules:[{required:"another_user"===K,message:"Please input the user ID of the user you are assigning the key to"}],help:"Get User ID - Click on the 'Users' tab in the sidebar.",children:(0,r.jsx)(_.Z,{placeholder:"User ID",onChange:e=>d.setFieldValue("user_id",e.target.value)})}),(0,r.jsx)(C.Z.Item,{label:"you"===K||"another_user"===K?"Key Name":"Service Account ID",name:"key_alias",rules:[{required:!0,message:"Please input a ".concat("you"===K?"key name":"service account ID")}],help:"you"===K?"required":"IDs can include letters, numbers, and hyphens",children:(0,r.jsx)(_.Z,{placeholder:""})}),(0,r.jsx)(C.Z.Item,{label:"Team ID",name:"team_id",hidden:"another_user"!==K,initialValue:s?s.team_id:null,valuePropName:"team_id",className:"mt-8",children:(0,r.jsx)(_.Z,{defaultValue:s?s.team_id:null,onChange:e=>d.setFieldValue("team_id",e.target.value)})}),(0,r.jsx)(C.Z.Item,{label:"Models",name:"models",rules:[{required:!0,message:"Please select a model"}],help:"required",children:(0,r.jsxs)(N.default,{mode:"multiple",placeholder:"Select models",style:{width:"100%"},onChange:e=>{e.includes("all-team-models")&&d.setFieldsValue({models:["all-team-models"]})},children:[(0,r.jsx)(z,{value:"all-team-models",children:"All Team Models"},"all-team-models"),q.map(e=>(0,r.jsx)(z,{value:e,children:D(e)},e))]})}),(0,r.jsxs)(Z.Z,{className:"mt-20 mb-8",children:[(0,r.jsx)(v.Z,{children:(0,r.jsx)("b",{children:"Optional Settings"})}),(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"Max Budget (USD)",name:"max_budget",help:"Budget cannot exceed team max budget: $".concat((null==s?void 0:s.max_budget)!==null&&(null==s?void 0:s.max_budget)!==void 0?null==s?void 0:s.max_budget:"unlimited"),rules:[{validator:async(e,l)=>{if(l&&s&&null!==s.max_budget&&l>s.max_budget)throw Error("Budget cannot exceed team max budget: $".concat(s.max_budget))}}],children:(0,r.jsx)(E.Z,{step:.01,precision:2,width:200})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",help:"Team Reset Budget: ".concat((null==s?void 0:s.budget_duration)!==null&&(null==s?void 0:s.budget_duration)!==void 0?null==s?void 0:s.budget_duration:"None"),children:(0,r.jsxs)(N.default,{defaultValue:null,placeholder:"n/a",children:[(0,r.jsx)(N.default.Option,{value:"24h",children:"daily"}),(0,r.jsx)(N.default.Option,{value:"7d",children:"weekly"}),(0,r.jsx)(N.default.Option,{value:"30d",children:"monthly"})]})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"Tokens per minute Limit (TPM)",name:"tpm_limit",help:"TPM cannot exceed team TPM limit: ".concat((null==s?void 0:s.tpm_limit)!==null&&(null==s?void 0:s.tpm_limit)!==void 0?null==s?void 0:s.tpm_limit:"unlimited"),rules:[{validator:async(e,l)=>{if(l&&s&&null!==s.tpm_limit&&l>s.tpm_limit)throw Error("TPM limit cannot exceed team TPM limit: ".concat(s.tpm_limit))}}],children:(0,r.jsx)(E.Z,{step:1,width:400})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"Requests per minute Limit (RPM)",name:"rpm_limit",help:"RPM cannot exceed team RPM limit: ".concat((null==s?void 0:s.rpm_limit)!==null&&(null==s?void 0:s.rpm_limit)!==void 0?null==s?void 0:s.rpm_limit:"unlimited"),rules:[{validator:async(e,l)=>{if(l&&s&&null!==s.rpm_limit&&l>s.rpm_limit)throw Error("RPM limit cannot exceed team RPM limit: ".concat(s.rpm_limit))}}],children:(0,r.jsx)(E.Z,{step:1,width:400})}),(0,r.jsx)(C.Z.Item,{label:"Expire Key (eg: 30s, 30h, 30d)",name:"duration",className:"mt-8",children:(0,r.jsx)(_.Z,{placeholder:""})}),(0,r.jsx)(C.Z.Item,{label:(0,r.jsxs)("span",{children:["Guardrails"," ",(0,r.jsx)(R.Z,{title:"Setup your first guardrail",children:(0,r.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(L.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-8",help:"Select existing guardrails or enter new ones",children:(0,r.jsx)(N.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter guardrails",options:J.map(e=>({value:e,label:e}))})}),(0,r.jsx)(C.Z.Item,{label:"Metadata",name:"metadata",className:"mt-8",children:(0,r.jsx)(O.Z.TextArea,{rows:4,placeholder:"Enter metadata as JSON"})}),(0,r.jsx)(C.Z.Item,{label:"Tags",name:"tags",className:"mt-8",help:"Tags for tracking spend and/or doing tag-based routing.",children:(0,r.jsx)(N.default,{mode:"tags",style:{width:"100%"},placeholder:"Enter tags",tokenSeparators:[","],options:H})})]})]})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Create Key"})})]})}),u&&(0,r.jsx)(A.Z,{visible:c,onOk:$,onCancel:X,footer:null,children:(0,r.jsxs)(f.Z,{numItems:1,className:"gap-2 w-full",children:[(0,r.jsx)(k.Z,{children:"Save your Key"}),(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsxs)("p",{children:["Please save this secret key somewhere safe and accessible. For security reasons, ",(0,r.jsx)("b",{children:"you will not be able to view it again"})," ","through your LiteLLM account. If you lose this secret key, you will need to generate a new one."]})}),(0,r.jsx)(j.Z,{numColSpan:1,children:null!=u?(0,r.jsxs)("div",{children:[(0,r.jsx)(w.Z,{className:"mt-3",children:"API Key:"}),(0,r.jsx)("div",{style:{background:"#f8f8f8",padding:"10px",borderRadius:"5px",marginBottom:"10px"},children:(0,r.jsx)("pre",{style:{wordWrap:"break-word",whiteSpace:"normal"},children:u})}),(0,r.jsx)(S.CopyToClipboard,{text:u,onCopy:()=>{I.ZP.success("API Key copied to clipboard")},children:(0,r.jsx)(y.Z,{className:"mt-3",children:"Copy API Key"})})]}):(0,r.jsx)(w.Z,{children:"Key being created, this might take 30s"})})]})})]})},q=s(7366),B=s(15731),K=s(53410),W=s(23628),H=s(74998),G=s(41649),J=s(12514),Y=s(47323),$=s(21626),X=s(97214),Q=s(28241),ee=s(58834),el=s(69552),es=s(71876),et=s(27281),ea=s(57365),er=s(90464),en=e=>{let{selectedTeam:l,currentOrg:s,accessToken:t}=e,[a,r]=(0,n.useState)({keys:[],total_count:0,current_page:1,total_pages:0}),[i,o]=(0,n.useState)(!0),[d,c]=(0,n.useState)(null),m=async function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(console.log("calling fetchKeys"),!s||!l||!t){console.log("currentOrg",s),console.log("selectedTeam",l),console.log("accessToken",t);return}o(!0);let e=await (0,p.OD)(t,s.organization_id,l.team_id);console.log("data",e),r(e),c(null)}catch(e){c(e instanceof Error?e:Error("An error occurred"))}finally{o(!1)}};return(0,n.useEffect)(()=>{m()},[l,s]),{keys:a.keys,isLoading:i,error:d,pagination:{currentPage:a.current_page,totalPages:a.total_pages,totalCount:a.total_count},refresh:m}};let{Option:ei}=N.default;console.log=function(){};var eo=e=>{let{userID:l,userRole:s,accessToken:t,selectedTeam:a,data:i,setData:o,teams:d,premiumUser:c,currentOrg:m}=e,[u,h]=(0,n.useState)(!1),[x,g]=(0,n.useState)(!1),[Z,b]=(0,n.useState)(null),[v,P]=(0,n.useState)(null),[O,F]=(0,n.useState)(null),{keys:z,isLoading:U,error:V,refresh:eo}=en({selectedTeam:a,currentOrg:m,accessToken:t});console.log("keys",z);let[ed,ec]=(0,n.useState)(!1),[em,eu]=(0,n.useState)(!1),[eh,ex]=(0,n.useState)(null),[ep,eg]=(0,n.useState)([]),ej=new Set,[ef,ey]=(0,n.useState)(!1),[e_,eZ]=(0,n.useState)(!1),[eb,ev]=(0,n.useState)(null),[ew,ek]=(0,n.useState)(null),[eS]=C.Z.useForm(),[eN,eC]=(0,n.useState)(null),[eI,eA]=(0,n.useState)(ej),[eP,eE]=(0,n.useState)([]);(0,n.useEffect)(()=>{console.log("in calculateNewExpiryTime for selectedToken",eh),(null==ew?void 0:ew.duration)?eC((e=>{if(!e)return null;try{let l;let s=new Date;if(e.endsWith("s"))l=(0,q.Z)(s,{seconds:parseInt(e)});else if(e.endsWith("h"))l=(0,q.Z)(s,{hours:parseInt(e)});else if(e.endsWith("d"))l=(0,q.Z)(s,{days:parseInt(e)});else throw Error("Invalid duration format");return l.toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0})}catch(e){return null}})(ew.duration)):eC(null),console.log("calculateNewExpiryTime:",eN)},[eh,null==ew?void 0:ew.duration]),(0,n.useEffect)(()=>{(async()=>{try{if(null===l||null===s||null===t)return;let e=await M(l,s,t);e&&eg(e)}catch(e){console.error("Error fetching user models:",e)}})()},[t,l,s]);let eO=e=>{ex(e),ey(!0)},eT=async e=>{if(null==t||null==eh)return;let l={...eh,metadata:e,key:eh.token};try{let e=await (0,p.Nc)(t,l);if(console.log("Model limits updated:",e),i){let l=i.map(l=>l.token===eh.token?e:l);o(l)}I.ZP.success("Model-specific limits updated successfully")}catch(e){console.error("Error updating model-specific limits:",e),I.ZP.error("Failed to update model-specific limits")}ey(!1),ex(null)};(0,n.useEffect)(()=>{if(d){let e=new Set;d.forEach((l,s)=>{let t=l.team_id;e.add(t)}),eA(e)}},[d]);let eM=e=>{console.log("handleEditClick:",e),null==e.token&&null!==e.token_id&&(e.token=e.token_id);let l=null;if(e.budget_duration)switch(e.budget_duration){case"24h":l="daily";break;case"7d":l="weekly";break;case"30d":l="monthly";break;default:l="None"}ex({...e,budget_duration:l}),ec(!0)},eD=async e=>{var l,s;if(null==t)return;let a=e.token;if(e.key=a,e.metadata&&"string"==typeof e.metadata)try{let s=JSON.parse(e.metadata);e.metadata={...s,...(null===(l=e.guardrails)||void 0===l?void 0:l.length)>0?{guardrails:e.guardrails}:{}}}catch(l){console.error("Error parsing metadata JSON:",l),I.ZP.error("Invalid metadata JSON for formValue "+e.metadata);return}else e.metadata={...e.metadata||{},...(null===(s=e.guardrails)||void 0===s?void 0:s.length)>0?{guardrails:e.guardrails}:{}};if(e.budget_duration)switch(e.budget_duration){case"daily":e.budget_duration="24h";break;case"weekly":e.budget_duration="7d";break;case"monthly":e.budget_duration="30d"}console.log("handleEditSubmit:",e);try{let l=await (0,p.Nc)(t,e);if(console.log("handleEditSubmit: newKeyValues",l),i){let e=i.map(e=>e.token===a?l:e);o(e)}I.ZP.success("Key updated successfully"),ec(!1),ex(null)}catch(e){console.error("Error updating key:",e),I.ZP.error("Failed to update key")}},eF=async e=>{console.log("handleDelete:",e),null==e.token&&null!==e.token_id&&(e.token=e.token_id),null!=i&&(b(e.token),localStorage.removeItem("userData"+l),g(!0))},eL=async()=>{if(null!=Z&&null!=i){try{await (0,p.I1)(t,Z);let e=i.filter(e=>e.token!==Z);o(e)}catch(e){console.error("Error deleting the key:",e)}g(!1),b(null)}},eR=e=>{ex(e),eC(null),eS.setFieldsValue({key_alias:e.key_alias,max_budget:e.max_budget,tpm_limit:e.tpm_limit,rpm_limit:e.rpm_limit,duration:e.duration||""}),eZ(!0)},ez=(e,l)=>{ek(s=>({...s,[e]:l}))},eU=async()=>{if(!c){I.ZP.error("Regenerate API Key is an Enterprise feature. Please upgrade to use this feature.");return}if(null!=eh)try{let e=await eS.validateFields(),l=await (0,p.s0)(t,eh.token,e);if(ev(l.key),i){let s=i.map(s=>s.token===(null==eh?void 0:eh.token)?{...s,key_name:l.key_name,...e}:s);o(s)}eZ(!1),eS.resetFields(),I.ZP.success("API Key regenerated successfully")}catch(e){console.error("Error regenerating key:",e),I.ZP.error("Failed to regenerate API Key")}};return(0,r.jsxs)("div",{children:[(0,r.jsxs)(J.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh] mb-4 mt-2",children:[(0,r.jsxs)($.Z,{className:"mt-5 max-h-[300px] min-h-[300px]",children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Key Alias"}),(0,r.jsx)(el.Z,{children:"Secret Key"}),(0,r.jsx)(el.Z,{children:"Created"}),(0,r.jsx)(el.Z,{children:"Expires"}),(0,r.jsx)(el.Z,{children:"Spend (USD)"}),(0,r.jsx)(el.Z,{children:"Budget (USD)"}),(0,r.jsx)(el.Z,{children:"Budget Reset"}),(0,r.jsx)(el.Z,{children:"Models"}),(0,r.jsx)(el.Z,{children:"Rate Limits"}),(0,r.jsx)(el.Z,{children:"Rate Limits per model"})]})}),(0,r.jsx)(X.Z,{children:z&&z.map(e=>{if(console.log(e),"litellm-dashboard"===e.team_id)return null;if(a){if((null!=a.team_id||null===e.team_id||eI.has(e.team_id))&&e.team_id!=a.team_id)return null;console.log("item team id: ".concat(e.team_id,", is returned"))}return(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{style:{maxWidth:"2px",whiteSpace:"pre-wrap",overflow:"hidden"},children:null!=e.key_alias?(0,r.jsx)(w.Z,{children:e.key_alias}):(0,r.jsx)(w.Z,{children:"Not Set"})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{children:e.key_name})}),(0,r.jsx)(Q.Z,{children:null!=e.created_at?(0,r.jsx)("div",{children:(0,r.jsx)("p",{style:{fontSize:"0.70rem"},children:new Date(e.created_at).toLocaleDateString()})}):(0,r.jsx)("p",{style:{fontSize:"0.70rem"},children:"Not available"})}),(0,r.jsx)(Q.Z,{children:null!=e.expires?(0,r.jsx)("div",{children:(0,r.jsx)("p",{style:{fontSize:"0.70rem"},children:new Date(e.expires).toLocaleDateString()})}):(0,r.jsx)("p",{style:{fontSize:"0.70rem"},children:"Never"})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{children:(()=>{try{return e.spend.toFixed(4)}catch(l){return e.spend}})()})}),(0,r.jsx)(Q.Z,{children:null!=e.max_budget?(0,r.jsx)(w.Z,{children:e.max_budget}):(0,r.jsx)(w.Z,{children:"Unlimited"})}),(0,r.jsx)(Q.Z,{children:null!=e.budget_reset_at?(0,r.jsx)("div",{children:(0,r.jsx)("p",{style:{fontSize:"0.70rem"},children:new Date(e.budget_reset_at).toLocaleString()})}):(0,r.jsx)("p",{style:{fontSize:"0.70rem"},children:"Never"})}),(0,r.jsx)(Q.Z,{children:Array.isArray(e.models)?(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:0===e.models.length?(0,r.jsx)(r.Fragment,{children:a&&a.models&&a.models.length>0?a.models.map((e,l)=>"all-proxy-models"===e?(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"red",children:(0,r.jsx)(w.Z,{children:"All Proxy Models"})},l):"all-team-models"===e?(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"red",children:(0,r.jsx)(w.Z,{children:"All Team Models"})},l):(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"blue",children:(0,r.jsx)(w.Z,{children:e.length>30?"".concat(D(e).slice(0,30),"..."):D(e)})},l)):(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"blue",children:(0,r.jsx)(w.Z,{children:"all-proxy-models"})})}):e.models.map((e,l)=>"all-proxy-models"===e?(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"red",children:(0,r.jsx)(w.Z,{children:"All Proxy Models"})},l):"all-team-models"===e?(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"red",children:(0,r.jsx)(w.Z,{children:"All Team Models"})},l):(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"blue",children:(0,r.jsx)(w.Z,{children:e.length>30?"".concat(D(e).slice(0,30),"..."):D(e)})},l))}):null}),(0,r.jsx)(Q.Z,{children:(0,r.jsxs)(w.Z,{children:["TPM: ",e.tpm_limit?e.tpm_limit:"Unlimited"," ",(0,r.jsx)("br",{})," RPM:"," ",e.rpm_limit?e.rpm_limit:"Unlimited"]})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(y.Z,{size:"xs",onClick:()=>eO(e),children:"Edit Limits"})}),(0,r.jsxs)(Q.Z,{children:[(0,r.jsx)(Y.Z,{onClick:()=>{ex(e),eu(!0)},icon:B.Z,size:"sm"}),(0,r.jsx)(A.Z,{open:em,onCancel:()=>{eu(!1),ex(null)},footer:null,width:800,children:eh&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 mt-8",children:[(0,r.jsxs)(J.Z,{children:[(0,r.jsx)("p",{className:"text-tremor-default font-medium text-tremor-content dark:text-dark-tremor-content",children:"Spend"}),(0,r.jsx)("div",{className:"mt-2 flex items-baseline space-x-2.5",children:(0,r.jsx)("p",{className:"text-tremor font-semibold text-tremor-content-strong dark:text-dark-tremor-content-strong",children:(()=>{try{return eh.spend.toFixed(4)}catch(e){return eh.spend}})()})})]}),(0,r.jsxs)(J.Z,{children:[(0,r.jsx)("p",{className:"text-tremor-default font-medium text-tremor-content dark:text-dark-tremor-content",children:"Budget"}),(0,r.jsx)("div",{className:"mt-2 flex items-baseline space-x-2.5",children:(0,r.jsx)("p",{className:"text-tremor font-semibold text-tremor-content-strong dark:text-dark-tremor-content-strong",children:null!=eh.max_budget?(0,r.jsxs)(r.Fragment,{children:[eh.max_budget,eh.budget_duration&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),"Budget will be reset at"," ",eh.budget_reset_at?new Date(eh.budget_reset_at).toLocaleString():"Never"]})]}):(0,r.jsx)(r.Fragment,{children:"Unlimited"})})})]},e.key_name),(0,r.jsxs)(J.Z,{children:[(0,r.jsx)("p",{className:"text-tremor-default font-medium text-tremor-content dark:text-dark-tremor-content",children:"Expires"}),(0,r.jsx)("div",{className:"mt-2 flex items-baseline space-x-2.5",children:(0,r.jsx)("p",{className:"text-tremor-default font-small text-tremor-content-strong dark:text-dark-tremor-content-strong",children:null!=eh.expires?(0,r.jsx)(r.Fragment,{children:new Date(eh.expires).toLocaleString(void 0,{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}):(0,r.jsx)(r.Fragment,{children:"Never"})})})]},e.key_name)]}),(0,r.jsxs)(J.Z,{className:"my-4",children:[(0,r.jsx)(k.Z,{children:"Token Name"}),(0,r.jsx)(w.Z,{className:"my-1",children:eh.key_alias?eh.key_alias:eh.key_name}),(0,r.jsx)(k.Z,{children:"Token ID"}),(0,r.jsx)(w.Z,{className:"my-1 text-[12px]",children:eh.token}),(0,r.jsx)(k.Z,{children:"User ID"}),(0,r.jsx)(w.Z,{className:"my-1 text-[12px]",children:eh.user_id}),(0,r.jsx)(k.Z,{children:"Metadata"}),(0,r.jsx)(w.Z,{className:"my-1",children:(0,r.jsxs)("pre",{children:[JSON.stringify(eh.metadata)," "]})})]}),(0,r.jsx)(y.Z,{className:"mx-auto flex items-center",onClick:()=>{eu(!1),ex(null)},children:"Close"})]})}),(0,r.jsx)(Y.Z,{icon:K.Z,size:"sm",onClick:()=>eM(e)}),(0,r.jsx)(Y.Z,{onClick:()=>eR(e),icon:W.Z,size:"sm"}),(0,r.jsx)(Y.Z,{onClick:()=>eF(e),icon:H.Z,size:"sm"})]})]},e.token)})})]}),x&&(0,r.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,r.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,r.jsx)("div",{className:"sm:flex sm:items-start",children:(0,r.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Key"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this key ?"})})]})})}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,r.jsx)(y.Z,{onClick:eL,color:"red",className:"ml-2",children:"Delete"}),(0,r.jsx)(y.Z,{onClick:()=>{g(!1),b(null)},children:"Cancel"})]})]})]})})]}),eh&&(0,r.jsx)(e=>{let{visible:l,onCancel:s,token:i,onSubmit:o}=e,[c]=C.Z.useForm(),[m,u]=(0,n.useState)(a),[h,x]=(0,n.useState)([]),[g,j]=(0,n.useState)(!1),[f,y]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{let e=(await (0,p.t3)(t)).guardrails.map(e=>e.guardrail_name);y(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})()},[t]);let Z="";try{let e={...i.metadata};delete e.guardrails,Z=JSON.stringify(e,null,2)}catch(e){console.error("Error stringifying metadata:",e),Z=""}let b=[];try{var v;b=(null===(v=i.metadata)||void 0===v?void 0:v.guardrails)||[]}catch(e){console.error("Error extracting guardrails:",e)}let w=i?{...i,budget_duration:i.budget_duration,metadata:Z,guardrails:b}:{metadata:Z,guardrails:[]};return(0,r.jsx)(A.Z,{title:"Edit Key",visible:l,width:800,footer:null,onOk:()=>{c.validateFields().then(e=>{c.resetFields()}).catch(e=>{console.error("Validation failed:",e)})},onCancel:s,children:(0,r.jsxs)(C.Z,{form:c,onFinish:eD,initialValues:w,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{name:"key_alias",label:"Key Alias",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"Models",name:"models",rules:[{validator:(e,l)=>{if("Default Team"===m.team_alias)return Promise.resolve();let s=l.filter(e=>!m.models.includes(e)&&"all-team-models"!==e&&"all-proxy-models"!==e&&!m.models.includes("all-proxy-models"));return(console.log("errorModels: ".concat(s)),s.length>0)?Promise.reject("Some models are not part of the new team's models - ".concat(s," Team models: ").concat(m.models)):Promise.resolve()}}],children:(0,r.jsxs)(N.default,{mode:"multiple",placeholder:"Select models",style:{width:"100%"},children:[(0,r.jsx)(ei,{value:"all-team-models",children:"All Team Models"},"all-team-models"),"Default Team"===m.team_alias?ep.filter(e=>"all-proxy-models"!==e).map(e=>(0,r.jsx)(ei,{value:e,children:D(e)},e)):m.models.map(e=>(0,r.jsx)(ei,{value:e,children:D(e)},e))]})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"Max Budget (USD)",name:"max_budget",help:"Budget cannot exceed team max budget: ".concat((null==m?void 0:m.max_budget)!==null&&(null==m?void 0:m.max_budget)!==void 0?null==m?void 0:m.max_budget:"unlimited"),rules:[{validator:async(e,l)=>{if(l&&m&&null!==m.max_budget&&l>m.max_budget)throw console.log("keyTeam.max_budget: ".concat(m.max_budget)),Error("Budget cannot exceed team max budget: $".concat(m.max_budget))}}],children:(0,r.jsx)(E.Z,{step:.01,precision:2,width:200})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",help:"Current Reset Budget: ".concat(i.budget_duration,", budget will be reset: ").concat(i.budget_reset_at?new Date(i.budget_reset_at).toLocaleString():"Never"),children:(0,r.jsxs)(N.default,{placeholder:"n/a",children:[(0,r.jsx)(N.default.Option,{value:"daily",children:"daily"}),(0,r.jsx)(N.default.Option,{value:"weekly",children:"weekly"}),(0,r.jsx)(N.default.Option,{value:"monthly",children:"monthly"})]})}),(0,r.jsx)(C.Z.Item,{label:"token",name:"token",hidden:!0}),(0,r.jsx)(C.Z.Item,{label:"Team",name:"team_id",className:"mt-8",help:"the team this key belongs to",children:(0,r.jsx)(et.Z,{value:i.team_alias,children:null==d?void 0:d.map((e,l)=>(0,r.jsx)(ea.Z,{value:e.team_id,onClick:()=>u(e),children:e.team_alias},l))})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"TPM Limit (tokens per minute)",name:"tpm_limit",help:"tpm_limit cannot exceed team tpm_limit ".concat((null==m?void 0:m.tpm_limit)!==null&&(null==m?void 0:m.tpm_limit)!==void 0?null==m?void 0:m.tpm_limit:"unlimited"),rules:[{validator:async(e,l)=>{if(l&&m&&null!==m.tpm_limit&&l>m.tpm_limit)throw console.log("keyTeam.tpm_limit: ".concat(m.tpm_limit)),Error("tpm_limit cannot exceed team max tpm_limit: $".concat(m.tpm_limit))}}],children:(0,r.jsx)(E.Z,{step:1,precision:1,width:200})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"RPM Limit (requests per minute)",name:"rpm_limit",help:"rpm_limit cannot exceed team max rpm_limit: ".concat((null==m?void 0:m.rpm_limit)!==null&&(null==m?void 0:m.rpm_limit)!==void 0?null==m?void 0:m.rpm_limit:"unlimited"),rules:[{validator:async(e,l)=>{if(l&&m&&null!==m.rpm_limit&&l>m.rpm_limit)throw console.log("keyTeam.rpm_limit: ".concat(m.rpm_limit)),Error("rpm_limit cannot exceed team max rpm_limit: $".concat(m.rpm_limit))}}],children:(0,r.jsx)(E.Z,{step:1,precision:1,width:200})}),(0,r.jsx)(C.Z.Item,{label:(0,r.jsxs)("span",{children:["Guardrails"," ",(0,r.jsx)(R.Z,{title:"Setup your first guardrail",children:(0,r.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(L.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-8",help:"Select existing guardrails or enter new ones",children:(0,r.jsx)(N.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter guardrails",options:f.map(e=>({value:e,label:e}))})}),(0,r.jsx)(C.Z.Item,{label:"Metadata (ensure this is valid JSON)",name:"metadata",children:(0,r.jsx)(er.Z,{rows:10,onChange:e=>{c.setFieldsValue({metadata:e.target.value})}})})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Edit Key"})})]})})},{visible:ed,onCancel:()=>{ec(!1),ex(null)},token:eh,onSubmit:eD}),eh&&(0,r.jsx)(e=>{let{visible:l,onCancel:s,token:t,onSubmit:a,accessToken:i}=e,[o,d]=(0,n.useState)({}),[c,m]=(0,n.useState)([]),[u,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(t.metadata){let e=t.metadata.model_tpm_limit||{},l=t.metadata.model_rpm_limit||{},s={};Object.keys({...e,...l}).forEach(t=>{s[t]={tpm:e[t]||0,rpm:l[t]||0}}),d(s)}(async()=>{try{let e=await (0,p.AZ)(i,"",""),l=Array.from(new Set(e.data.map(e=>e.model_name)));m(l)}catch(e){console.error("Error fetching model data:",e),I.ZP.error("Failed to fetch available models")}})()},[t,i]);let x=(e,l,s)=>{d(t=>({...t,[e]:{...t[e],[l]:s||0}}))},g=e=>{d(l=>{let{[e]:s,...t}=l;return t})};return(0,r.jsxs)(A.Z,{title:"Edit Model-Specific Limits",visible:l,onCancel:s,footer:null,width:800,children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Model"}),(0,r.jsx)(el.Z,{children:"TPM Limit"}),(0,r.jsx)(el.Z,{children:"RPM Limit"}),(0,r.jsx)(el.Z,{children:"Actions"})]})}),(0,r.jsxs)(X.Z,{children:[Object.entries(o).map(e=>{let[l,s]=e;return(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:l}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(E.Z,{value:s.tpm,onChange:e=>x(l,"tpm",e)})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(E.Z,{value:s.rpm,onChange:e=>x(l,"rpm",e)})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(y.Z,{onClick:()=>g(l),children:"Remove"})})]},l)}),null!==u&&(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:(0,r.jsx)(N.default,{style:{width:200},placeholder:"Select a model",onChange:e=>{o[e]||d(l=>({...l,[e]:{tpm:0,rpm:0}})),h(null)},value:u||void 0,children:c.filter(e=>!o.hasOwnProperty(e)).map(e=>(0,r.jsx)(ei,{value:e,children:e},e))})}),(0,r.jsx)(Q.Z,{children:"-"}),(0,r.jsx)(Q.Z,{children:"-"}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(y.Z,{onClick:()=>h(null),children:"Cancel"})})]})]})]}),(0,r.jsx)(y.Z,{onClick:()=>{h("")},disabled:null!==u,children:"Add Limit"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,r.jsx)(y.Z,{onClick:s,children:"Cancel"}),(0,r.jsx)(y.Z,{onClick:()=>{a({...t.metadata,model_tpm_limit:Object.fromEntries(Object.entries(o).map(e=>{let[l,s]=e;return[l,s.tpm]})),model_rpm_limit:Object.fromEntries(Object.entries(o).map(e=>{let[l,s]=e;return[l,s.rpm]}))})},children:"Save"})]})]})},{visible:ef,onCancel:()=>ey(!1),token:eh,onSubmit:eT,accessToken:t}),(0,r.jsx)(A.Z,{title:"Regenerate API Key",visible:e_,onCancel:()=>{eZ(!1),eS.resetFields()},footer:[(0,r.jsx)(y.Z,{onClick:()=>{eZ(!1),eS.resetFields()},className:"mr-2",children:"Cancel"},"cancel"),(0,r.jsx)(y.Z,{onClick:eU,disabled:!c,children:c?"Regenerate":"Upgrade to Regenerate"},"regenerate")],children:c?(0,r.jsxs)(C.Z,{form:eS,layout:"vertical",onValuesChange:(e,l)=>{"duration"in e&&ez("duration",e.duration)},children:[(0,r.jsx)(C.Z.Item,{name:"key_alias",label:"Key Alias",children:(0,r.jsx)(_.Z,{disabled:!0})}),(0,r.jsx)(C.Z.Item,{name:"max_budget",label:"Max Budget (USD)",children:(0,r.jsx)(E.Z,{step:.01,precision:2,style:{width:"100%"}})}),(0,r.jsx)(C.Z.Item,{name:"tpm_limit",label:"TPM Limit",children:(0,r.jsx)(E.Z,{style:{width:"100%"}})}),(0,r.jsx)(C.Z.Item,{name:"rpm_limit",label:"RPM Limit",children:(0,r.jsx)(E.Z,{style:{width:"100%"}})}),(0,r.jsx)(C.Z.Item,{name:"duration",label:"Expire Key (eg: 30s, 30h, 30d)",className:"mt-8",children:(0,r.jsx)(_.Z,{placeholder:""})}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Current expiry:"," ",(null==eh?void 0:eh.expires)!=null?new Date(eh.expires).toLocaleString():"Never"]}),eN&&(0,r.jsxs)("div",{className:"mt-2 text-sm text-green-600",children:["New expiry: ",eN]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"mb-2 text-gray-500 italic text-[12px]",children:"Upgrade to use this feature"}),(0,r.jsx)(y.Z,{variant:"primary",className:"mb-2",children:(0,r.jsx)("a",{href:"https://calendly.com/d/4mp-gd3-k5k/litellm-1-1-onboarding-chat",target:"_blank",children:"Get Free Trial"})})]})}),eb&&(0,r.jsx)(A.Z,{visible:!!eb,onCancel:()=>ev(null),footer:[(0,r.jsx)(y.Z,{onClick:()=>ev(null),children:"Close"},"close")],children:(0,r.jsxs)(f.Z,{numItems:1,className:"gap-2 w-full",children:[(0,r.jsx)(k.Z,{children:"Regenerated Key"}),(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsxs)("p",{children:["Please replace your old key with the new key generated. For security reasons, ",(0,r.jsx)("b",{children:"you will not be able to view it again"})," ","through your LiteLLM account. If you lose this secret key, you will need to generate a new one."]})}),(0,r.jsxs)(j.Z,{numColSpan:1,children:[(0,r.jsx)(w.Z,{className:"mt-3",children:"Key Alias:"}),(0,r.jsx)("div",{style:{background:"#f8f8f8",padding:"10px",borderRadius:"5px",marginBottom:"10px"},children:(0,r.jsx)("pre",{style:{wordWrap:"break-word",whiteSpace:"normal"},children:(null==eh?void 0:eh.key_alias)||"No alias set"})}),(0,r.jsx)(w.Z,{className:"mt-3",children:"New API Key:"}),(0,r.jsx)("div",{style:{background:"#f8f8f8",padding:"10px",borderRadius:"5px",marginBottom:"10px"},children:(0,r.jsx)("pre",{style:{wordWrap:"break-word",whiteSpace:"normal"},children:eb})}),(0,r.jsx)(S.CopyToClipboard,{text:eb,onCopy:()=>I.ZP.success("API Key copied to clipboard"),children:(0,r.jsx)(y.Z,{className:"mt-3",children:"Copy API Key"})})]})]})})]})};console.log=function(){};var ed=e=>{let{userID:l,userRole:s,accessToken:t,userSpend:a,userMaxBudget:i,selectedTeam:o}=e;console.log("userSpend: ".concat(a));let[d,c]=(0,n.useState)(null!==a?a:0),[m,u]=(0,n.useState)(o?o.max_budget:null);(0,n.useEffect)(()=>{if(o){if("Default Team"===o.team_alias)u(i);else{let e=!1;if(o.team_memberships)for(let s of o.team_memberships)s.user_id===l&&"max_budget"in s.litellm_budget_table&&null!==s.litellm_budget_table.max_budget&&(u(s.litellm_budget_table.max_budget),e=!0);e||u(o.max_budget)}}},[o,i]);let[h,x]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=async()=>{if(!t||!l||!s)return};(async()=>{try{if(null===l||null===s)return;if(null!==t){let e=(await (0,p.So)(t,l,s)).data.map(e=>e.id);console.log("available_model_names:",e),x(e)}}catch(e){console.error("Error fetching user models:",e)}})(),e()},[s,t,l]),(0,n.useEffect)(()=>{null!==a&&c(a)},[a]);let g=[];o&&o.models&&(g=o.models),g&&g.includes("all-proxy-models")?(console.log("user models:",h),g=h):g&&g.includes("all-team-models")?g=o.models:g&&0===g.length&&(g=h);let j=void 0!==d?d.toFixed(4):null;return console.log("spend in view user spend: ".concat(d)),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)("div",{className:"flex justify-between gap-x-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-tremor-default text-tremor-content dark:text-dark-tremor-content",children:"Total Spend"}),(0,r.jsxs)("p",{className:"text-2xl text-tremor-content-strong dark:text-dark-tremor-content-strong font-semibold",children:["$",j]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-tremor-default text-tremor-content dark:text-dark-tremor-content",children:"Max Budget"}),(0,r.jsx)("p",{className:"text-2xl text-tremor-content-strong dark:text-dark-tremor-content-strong font-semibold",children:null!==m?"$".concat(m," limit"):"No limit"})]})]})})};console.log=function(){};var ec=e=>{let{userID:l,userRole:s,selectedTeam:t,accessToken:a}=e,[i,o]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{if(null===l||null===s)return;if(null!==a){let e=(await (0,p.So)(a,l,s)).data.map(e=>e.id);console.log("available_model_names:",e),o(e)}}catch(e){console.error("Error fetching user models:",e)}})()},[a,l,s]);let d=[];return t&&t.models&&(d=t.models),d&&d.includes("all-proxy-models")&&(console.log("user models:",i),d=i),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsx)("p",{className:"text-3xl text-tremor-content-strong dark:text-dark-tremor-content-strong font-semibold",children:null==t?void 0:t.team_alias}),(null==t?void 0:t.team_id)&&(0,r.jsxs)("p",{className:"text-xs text-gray-400 dark:text-gray-400 font-semibold",children:["Team ID: ",null==t?void 0:t.team_id]})]})})},em=e=>{let l,{teams:s,setSelectedTeam:t,userRole:a,proxySettings:i,setProxySettings:o,userInfo:d,accessToken:c,setKeys:m}=e;console.log("userInfo: ".concat(JSON.stringify(d)));let u={models:(null==d?void 0:d.models)||[],team_id:null,team_alias:"Default Team",max_budget:(null==d?void 0:d.max_budget)||null},h=async()=>{null===i&&c&&o(await (0,p.g)(c))};(0,n.useEffect)(()=>{h()},[i]);let[x,g]=(0,n.useState)(u);return console.log("userRole: ".concat(a)),console.log("proxySettings: ".concat(JSON.stringify(i))),l="App User"===a?s:i&&!0===i.DEFAULT_TEAM_DISABLED?s?[...s]:[u]:s?[...s,u]:[u],(0,r.jsxs)("div",{className:"mt-5 mb-5",children:[(0,r.jsx)(k.Z,{children:"Select Team"}),(0,r.jsx)(w.Z,{children:"If you belong to multiple teams, this setting controls which team is used by default when creating new API Keys."}),(0,r.jsxs)(w.Z,{className:"mt-3 mb-3",children:[(0,r.jsx)("b",{children:"Default Team:"})," If no team_id is set for a key, it will be grouped under here."]}),l&&l.length>0?(0,r.jsx)(et.Z,{defaultValue:"0",children:l.map((e,l)=>(0,r.jsx)(ea.Z,{value:String(l),onClick:()=>{t(e)},children:e.team_alias},l))}):(0,r.jsxs)(w.Z,{children:["No team created. ",(0,r.jsx)("b",{children:"Defaulting to personal account."})]})]})},eu=s(12011),eh=s(68060);console.log=function(){},console.log("isLocal:",!1);var ex=e=>{let{userID:l,userRole:s,teams:t,keys:a,setUserRole:d,userEmail:c,setUserEmail:m,setTeams:u,setKeys:h,setOrganizations:x,premiumUser:y,currentOrg:_}=e;console.log("currentOrg in user dashboard: ".concat(JSON.stringify(_)));let[Z,b]=(0,n.useState)(null),v=(0,i.useSearchParams)(),w=function(e){console.log("COOKIES",document.cookie);let l=document.cookie.split("; ").find(l=>l.startsWith(e+"="));return l?l.split("=")[1]:null}("token"),k=v.get("invitation_id"),[S,N]=(0,n.useState)(null),[C,I]=(0,n.useState)(null),[A,P]=(0,n.useState)([]),[E,O]=(0,n.useState)(null),T={models:[],team_alias:"Default Team",team_id:null},[M,D]=(0,n.useState)(t?t[0]:T);if(window.addEventListener("beforeunload",function(){sessionStorage.clear()}),(0,n.useEffect)(()=>{if(w){let e=(0,o.o)(w);if(e){if(console.log("Decoded token:",e),console.log("Decoded key:",e.key),N(e.key),e.user_role){let l=function(e){if(!e)return"Undefined Role";switch(console.log("Received user role: ".concat(e)),e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"app_user":return"App User";case"internal_user":return"Internal User";case"internal_user_viewer":return"Internal Viewer";default:return"Unknown Role"}}(e.user_role);console.log("Decoded user_role:",l),d(l)}else console.log("User role not defined");e.user_email?m(e.user_email):console.log("User Email is not set ".concat(e))}}if(l&&S&&s&&!a&&!Z){let e=sessionStorage.getItem("userModels"+l);if(e)P(JSON.parse(e));else{console.log("currentOrg: ".concat(JSON.stringify(_)));let e=async()=>{x(await (0,p.r6)(S))};(async()=>{try{let e=await (0,p.g)(S);O(e);let t=await (0,p.Br)(S,l,s,!1,null,null);b(t.user_info),console.log("userSpendData: ".concat(JSON.stringify(Z))),(null==t?void 0:t.teams[0].keys)?h(t.keys.concat(t.teams.filter(e=>"Admin"===s||e.user_id===l).flatMap(e=>e.keys))):h(t.keys);let a=[...t.teams];a.length>0?(console.log("response['teams']: ".concat(JSON.stringify(a))),D(a[0])):D(T),sessionStorage.setItem("userData"+l,JSON.stringify(t.keys)),sessionStorage.setItem("userSpendData"+l,JSON.stringify(t.user_info));let r=(await (0,p.So)(S,l,s)).data.map(e=>e.id);console.log("available_model_names:",r),P(r),console.log("userModels:",A),sessionStorage.setItem("userModels"+l,JSON.stringify(r))}catch(e){console.error("There was an error fetching the data",e)}})(),g(S,l,s,_,u),e()}}},[l,w,S,a,s]),(0,n.useEffect)(()=>{console.log("currentOrg: ".concat(JSON.stringify(_),", accessToken: ").concat(S,", userID: ").concat(l,", userRole: ").concat(s)),S&&(console.log("fetching teams"),g(S,l,s,_,u))},[_]),(0,n.useEffect)(()=>{if(null!==a&&null!=M&&null!==M.team_id){let e=0;for(let l of(console.log("keys: ".concat(JSON.stringify(a))),a))M.hasOwnProperty("team_id")&&null!==l.team_id&&l.team_id===M.team_id&&(e+=l.spend);console.log("sum: ".concat(e)),I(e)}else if(null!==a){let e=0;for(let l of a)e+=l.spend;I(e)}},[M]),null!=k)return(0,r.jsx)(eu.default,{});if(null==l||null==w){let e="/sso/key/generate";return document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",console.log("Full URL:",e),window.location.href=e,null}if(null==S)return null;if(null==s&&d("App Owner"),s&&"Admin Viewer"==s){let{Title:e,Paragraph:l}=eh.default;return(0,r.jsxs)("div",{children:[(0,r.jsx)(e,{level:1,children:"Access Denied"}),(0,r.jsx)(l,{children:"Ask your proxy admin for access to create keys"})]})}return console.log("inside user dashboard, selected team",M),(0,r.jsx)("div",{className:"w-full mx-4",children:(0,r.jsx)(f.Z,{numItems:1,className:"gap-2 p-8 h-[75vh] w-full mt-2",children:(0,r.jsxs)(j.Z,{numColSpan:1,children:[(0,r.jsx)(ec,{userID:l,userRole:s,selectedTeam:M||null,accessToken:S}),(0,r.jsx)(ed,{userID:l,userRole:s,userMaxBudget:(null==Z?void 0:Z.max_budget)||null,accessToken:S,userSpend:C,selectedTeam:M||null}),(0,r.jsx)(eo,{userID:l,userRole:s,accessToken:S,selectedTeam:M||null,data:a,setData:h,premiumUser:y,teams:t,currentOrg:_}),(0,r.jsx)(V,{userID:l,team:M||null,userRole:s,accessToken:S,data:a,setData:h},M?M.team_id:null),(0,r.jsx)(em,{teams:t,setSelectedTeam:D,userRole:s,proxySettings:E,setProxySettings:O,userInfo:Z,accessToken:S,setKeys:h})]})})})},ep=s(97765),eg=s(47451),ej=s(69410),ef=()=>{let e=C.Z.useFormInstance();return(C.Z.useWatch("model",e)||[]).includes("all-wildcard")?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"Public Model Name",name:"model_name",tooltip:"Model name your users will pass in. Also used for load-balancing, LiteLLM will load balance between all models with this public name.",labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",required:!1,className:"mb-0",rules:[e=>{let{getFieldValue:l}=e;return{validator:(e,s)=>!(l("model")||[]).includes("all-wildcard")||s?Promise.resolve():Promise.reject(Error('Public Model Name is required unless "All Models" is selected.'))}}],children:(0,r.jsx)(_.Z,{placeholder:"my-gpt-4"})}),(0,r.jsxs)(eg.Z,{children:[(0,r.jsx)(ej.Z,{span:10}),(0,r.jsx)(ej.Z,{span:10,children:(0,r.jsx)(w.Z,{className:"mb-2",children:"Model name your users will pass in."})})]})]})};(t=a||(a={})).OpenAI="OpenAI",t.Azure="Azure",t.Azure_AI_Studio="Azure AI Studio",t.Anthropic="Anthropic",t.Vertex_AI="Vertex AI (Anthropic, Gemini, etc.)",t.Google_AI_Studio="Google AI Studio",t.Bedrock="Amazon Bedrock",t.Groq="Groq",t.MistralAI="Mistral AI",t.Deepseek="Deepseek",t.OpenAI_Compatible="OpenAI-Compatible Endpoints (Together AI, etc.)",t.Cohere="Cohere",t.Databricks="Databricks",t.Ollama="Ollama",t.xAI="xAI",t.AssemblyAI="AssemblyAI";let ey={OpenAI:"openai",Azure:"azure",Azure_AI_Studio:"azure_ai",Anthropic:"anthropic",Google_AI_Studio:"gemini",Bedrock:"bedrock",Groq:"groq",MistralAI:"mistral",Cohere:"cohere_chat",OpenAI_Compatible:"openai",Vertex_AI:"vertex_ai",Databricks:"databricks",xAI:"xai",Deepseek:"deepseek",Ollama:"ollama",AssemblyAI:"assemblyai"},e_={OpenAI:"https://artificialanalysis.ai/img/logos/openai_small.svg",Azure:"https://upload.wikimedia.org/wikipedia/commons/a/a8/Microsoft_Azure_Logo.svg","Azure AI Studio":"https://upload.wikimedia.org/wikipedia/commons/a/a8/Microsoft_Azure_Logo.svg",Anthropic:"https://artificialanalysis.ai/img/logos/anthropic_small.svg","Google AI Studio":"https://artificialanalysis.ai/img/logos/google_small.svg","Amazon Bedrock":"https://artificialanalysis.ai/img/logos/aws_small.png",Groq:"https://artificialanalysis.ai/img/logos/groq_small.png","Mistral AI":"https://artificialanalysis.ai/img/logos/mistral_small.png",Cohere:"https://artificialanalysis.ai/img/logos/cohere_small.png","OpenAI-Compatible Endpoints (Together AI, etc.)":"https://upload.wikimedia.org/wikipedia/commons/4/4e/OpenAI_Logo.svg","Vertex AI (Anthropic, Gemini, etc.)":"https://artificialanalysis.ai/img/logos/google_small.svg",Databricks:"https://artificialanalysis.ai/img/logos/databricks_small.png",Ollama:"https://artificialanalysis.ai/img/logos/ollama_small.svg",xAI:"https://artificialanalysis.ai/img/logos/xai_small.svg",Deepseek:"https://artificialanalysis.ai/img/logos/deepseek_small.jpg",AssemblyAI:"https://artificialanalysis.ai/img/logos/assemblyai_small.png"},eZ=e=>{if(!e)return{logo:"",displayName:"-"};let l=Object.keys(ey).find(l=>ey[l].toLowerCase()===e.toLowerCase());if(!l)return{logo:"",displayName:e};let s=a[l];return{logo:e_[s],displayName:s}},eb=e=>"Vertex AI (Anthropic, Gemini, etc.)"===e?"gemini-pro":"Anthropic"==e||"Amazon Bedrock"==e?"claude-3-opus":"Google AI Studio"==e?"gemini-pro":"Azure AI Studio"==e?"azure_ai/command-r-plus":"Azure"==e?"azure/my-deployment":"gpt-3.5-turbo",ev=(e,l)=>{console.log("Provider key: ".concat(e));let s=ey[e];console.log("Provider mapped to: ".concat(s));let t=[];return e&&"object"==typeof l&&(Object.entries(l).forEach(e=>{let[l,a]=e;null!==a&&"object"==typeof a&&"litellm_provider"in a&&(a.litellm_provider===s||a.litellm_provider.includes(s))&&t.push(l)}),"Cohere"==e&&(console.log("Adding cohere chat models"),Object.entries(l).forEach(e=>{let[l,s]=e;null!==s&&"object"==typeof s&&"litellm_provider"in s&&"cohere"===s.litellm_provider&&t.push(l)}))),t};var ew=e=>{let{selectedProvider:l,providerModels:s,getPlaceholder:t}=e,n=C.Z.useFormInstance();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(C.Z.Item,{label:"LiteLLM Model Name(s)",tooltip:"Actual model name used for making litellm.completion() / litellm.embedding() call.",className:"mb-0",children:[(0,r.jsx)(C.Z.Item,{name:"model",rules:[{required:!0,message:"Please select at least one model."}],noStyle:!0,children:l===a.Azure||l===a.OpenAI_Compatible||l===a.Ollama?(0,r.jsx)(_.Z,{placeholder:t(l.toString())}):s.length>0?(0,r.jsx)(N.default,{allowClear:!0,showSearch:!0,placeholder:"Select models",onChange:e=>{e.includes("all-wildcard")&&n.setFieldsValue({model_name:void 0})},optionFilterProp:"children",filterOption:(e,l)=>{var s;return(null!==(s=null==l?void 0:l.label)&&void 0!==s?s:"").toLowerCase().includes(e.toLowerCase())},options:[{label:"All ".concat(l," Models (Wildcard)"),value:"all-wildcard"},...s.map(e=>({label:e,value:e})),{label:"Custom Model Name (Enter below)",value:"custom"}],style:{width:"100%"}}):(0,r.jsx)(_.Z,{placeholder:t(l.toString())})}),(0,r.jsx)(C.Z.Item,{noStyle:!0,shouldUpdate:(e,l)=>e.model!==l.model,children:e=>{let{getFieldValue:l}=e;return(l("model")||[]).includes("custom")&&(0,r.jsx)(C.Z.Item,{name:"custom_model_name",rules:[{required:!0,message:"Please enter a custom model name."}],className:"mt-2",children:(0,r.jsx)(_.Z,{placeholder:"Enter custom model name"})})}})]}),(0,r.jsxs)(eg.Z,{children:[(0,r.jsx)(ej.Z,{span:10}),(0,r.jsx)(ej.Z,{span:10,children:(0,r.jsx)(w.Z,{className:"mb-3 mt-1",children:"Actual model name used for making litellm.completion() call. We loadbalance models with the same public name"})})]})]})},ek=s(63709);let{Link:eS}=eh.default;var eN=e=>{let{showAdvancedSettings:l,setShowAdvancedSettings:s}=e,[t]=C.Z.useForm(),[a,i]=n.useState(!1),[o,d]=n.useState("per_token"),c=(e,l)=>l&&(isNaN(Number(l))||0>Number(l))?Promise.reject("Please enter a valid positive number"):Promise.resolve(),m=(e,l)=>{if(!l)return Promise.resolve();try{return JSON.parse(l),Promise.resolve()}catch(e){return Promise.reject("Please enter valid JSON")}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Z.Z,{className:"mt-2 mb-4",children:[(0,r.jsx)(v.Z,{children:(0,r.jsx)("b",{children:"Advanced Settings"})}),(0,r.jsx)(b.Z,{children:(0,r.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,r.jsx)(C.Z.Item,{label:"Custom Pricing",name:"custom_pricing",valuePropName:"checked",className:"mb-4",children:(0,r.jsx)(ek.Z,{onChange:e=>{i(e),e||t.setFieldsValue({input_cost_per_token:void 0,output_cost_per_token:void 0,input_cost_per_second:void 0})},className:"bg-gray-600"})}),a&&(0,r.jsxs)("div",{className:"ml-6 pl-4 border-l-2 border-gray-200",children:[(0,r.jsx)(C.Z.Item,{label:"Pricing Model",name:"pricing_model",className:"mb-4",children:(0,r.jsx)(N.default,{defaultValue:"per_token",onChange:e=>d(e),options:[{value:"per_token",label:"Per Million Tokens"},{value:"per_second",label:"Per Second"}]})}),"per_token"===o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"Input Cost (per 1M tokens)",name:"input_cost_per_token",rules:[{validator:c}],className:"mb-4",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"Output Cost (per 1M tokens)",name:"output_cost_per_token",rules:[{validator:c}],className:"mb-4",children:(0,r.jsx)(_.Z,{})})]}):(0,r.jsx)(C.Z.Item,{label:"Cost Per Second",name:"input_cost_per_second",rules:[{validator:c}],className:"mb-4",children:(0,r.jsx)(_.Z,{})})]}),(0,r.jsx)(C.Z.Item,{label:"Use in pass through routes",name:"use_in_pass_through",valuePropName:"checked",className:"mb-4 mt-4",tooltip:(0,r.jsxs)("span",{children:["Allow using these credentials in pass through routes."," ",(0,r.jsx)(eS,{href:"https://docs.litellm.ai/docs/pass_through/vertex_ai",target:"_blank",children:"Learn more"})]}),children:(0,r.jsx)(ek.Z,{onChange:e=>{let l=t.getFieldValue("litellm_extra_params");try{let s=l?JSON.parse(l):{};e?s.use_in_pass_through=!0:delete s.use_in_pass_through,Object.keys(s).length>0?t.setFieldValue("litellm_extra_params",JSON.stringify(s,null,2)):t.setFieldValue("litellm_extra_params","")}catch(l){e?t.setFieldValue("litellm_extra_params",JSON.stringify({use_in_pass_through:!0},null,2)):t.setFieldValue("litellm_extra_params","")}},className:"bg-gray-600"})}),(0,r.jsx)(C.Z.Item,{label:"LiteLLM Params",name:"litellm_extra_params",tooltip:"Optional litellm params used for making a litellm.completion() call.",className:"mb-4 mt-4",rules:[{validator:m}],children:(0,r.jsx)(er.Z,{rows:4,placeholder:'{ "rpm": 100, "timeout": 0, "stream_timeout": 0 }'})}),(0,r.jsxs)(eg.Z,{className:"mb-4",children:[(0,r.jsx)(ej.Z,{span:10}),(0,r.jsx)(ej.Z,{span:10,children:(0,r.jsxs)(w.Z,{className:"text-gray-600 text-sm",children:["Pass JSON of litellm supported params"," ",(0,r.jsx)(eS,{href:"https://docs.litellm.ai/docs/completion/input",target:"_blank",children:"litellm.completion() call"})]})})]}),(0,r.jsx)(C.Z.Item,{label:"Model Info",name:"model_info_params",tooltip:"Optional model info params. Returned when calling `/model/info` endpoint.",className:"mb-0",rules:[{validator:m}],children:(0,r.jsx)(er.Z,{rows:4,placeholder:'{ "mode": "chat" }'})})]})})]})})},eC=s(18502),eI=s(3632);let{Link:eA}=eh.default;var eP=e=>{let{selectedProvider:l,uploadProps:s}=e;console.log("Selected provider: ".concat(l)),console.log("type of selectedProvider: ".concat(typeof l));let t=a[l];return console.log("selectedProviderEnum: ".concat(t)),console.log("type of selectedProviderEnum: ".concat(typeof t)),(0,r.jsxs)(r.Fragment,{children:[t===a.OpenAI&&(0,r.jsx)(C.Z.Item,{label:"Organization ID",name:"organization",children:(0,r.jsx)(_.Z,{placeholder:"[OPTIONAL] my-unique-org"})}),t===a.Vertex_AI&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Vertex Project",name:"vertex_project",children:(0,r.jsx)(_.Z,{placeholder:"adroit-cadet-1234.."})}),(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Vertex Location",name:"vertex_location",children:(0,r.jsx)(_.Z,{placeholder:"us-east-1"})}),(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Vertex Credentials",name:"vertex_credentials",className:"mb-0",children:(0,r.jsx)(eC.Z,{...s,children:(0,r.jsx)(T.ZP,{icon:(0,r.jsx)(eI.Z,{}),children:"Click to Upload"})})}),(0,r.jsxs)(eg.Z,{children:[(0,r.jsx)(ej.Z,{span:10}),(0,r.jsx)(ej.Z,{span:10,children:(0,r.jsx)(w.Z,{className:"mb-3 mt-1",children:"Give litellm a gcp service account(.json file), so it can make the relevant calls"})})]})]}),t===a.AssemblyAI&&(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"API Base",name:"api_base",children:(0,r.jsxs)(N.default,{placeholder:"Select API Base",children:[(0,r.jsx)(N.default.Option,{value:"https://api.assemblyai.com",children:"https://api.assemblyai.com"}),(0,r.jsx)(N.default.Option,{value:"https://api.eu.assemblyai.com",children:"https://api.eu.assemblyai.com"})]})}),(t===a.Azure||t===a.OpenAI_Compatible)&&(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"API Base",name:"api_base",children:(0,r.jsx)(_.Z,{placeholder:"https://..."})}),t===a.Azure&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"API Version",name:"api_version",tooltip:"By default litellm will use the latest version. If you want to use a different version, you can specify it here",children:(0,r.jsx)(_.Z,{placeholder:"2023-07-01-preview"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(C.Z.Item,{label:"Base Model",name:"base_model",className:"mb-0",children:(0,r.jsx)(_.Z,{placeholder:"azure/gpt-3.5-turbo"})}),(0,r.jsxs)(eg.Z,{children:[(0,r.jsx)(ej.Z,{span:10}),(0,r.jsx)(ej.Z,{span:10,children:(0,r.jsxs)(w.Z,{className:"mb-2",children:["The actual model your azure deployment uses. Used for accurate cost tracking. Select name from"," ",(0,r.jsx)(eA,{href:"https://github.com/BerriAI/litellm/blob/main/model_prices_and_context_window.json",target:"_blank",children:"here"})]})})]})]})]}),t===a.Bedrock&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"AWS Access Key ID",name:"aws_access_key_id",tooltip:"You can provide the raw key or the environment variable (e.g. `os.environ/MY_SECRET_KEY`).",children:(0,r.jsx)(_.Z,{placeholder:""})}),(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"AWS Secret Access Key",name:"aws_secret_access_key",tooltip:"You can provide the raw key or the environment variable (e.g. `os.environ/MY_SECRET_KEY`).",children:(0,r.jsx)(_.Z,{placeholder:""})}),(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"AWS Region Name",name:"aws_region_name",tooltip:"You can provide the raw key or the environment variable (e.g. `os.environ/MY_SECRET_KEY`).",children:(0,r.jsx)(_.Z,{placeholder:"us-east-1"})})]}),t!=a.Bedrock&&t!=a.Vertex_AI&&t!=a.Ollama&&(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"API Key",name:"api_key",tooltip:"LLM API Credentials",children:(0,r.jsx)(_.Z,{placeholder:"sk-",type:"password"})})]})};let eE=async(e,l,s,t)=>{try{if(console.log("handling submit for formValues:",e),e.model&&e.model.includes("all-wildcard")){let l=ey[e.custom_llm_provider]+"/*";e.model_name=l,e.model=l}let a=Array.isArray(e.model)?e.model:[e.model];console.log("received deployments: ".concat(a)),console.log("received type of deployments: ".concat(typeof a)),a.forEach(async s=>{console.log("litellm_model: ".concat(s));let a={},r={};e.input_cost_per_token&&(e.input_cost_per_token=Number(e.input_cost_per_token)/1e6),e.output_cost_per_token&&(e.output_cost_per_token=Number(e.output_cost_per_token)/1e6),a.model=s;let n="";for(let[l,s]of(console.log("formValues add deployment:",e),Object.entries(e)))if(""!==s&&"custom_pricing"!==l&&"pricing_model"!==l){if("model_name"==l)n+=s;else if("custom_llm_provider"==l){console.log("custom_llm_provider:",s);let e=ey[s];a.custom_llm_provider=e,console.log("custom_llm_provider mappingResult:",e)}else if("model"==l)continue;else if("base_model"===l)r[l]=s;else if("custom_model_name"===l)a.model=s;else if("litellm_extra_params"==l){console.log("litellm_extra_params:",s);let e={};if(s&&void 0!=s){try{e=JSON.parse(s)}catch(e){throw I.ZP.error("Failed to parse LiteLLM Extra Params: "+e,10),Error("Failed to parse litellm_extra_params: "+e)}for(let[l,s]of Object.entries(e))a[l]=s}}else if("model_info_params"==l){console.log("model_info_params:",s);let e={};if(s&&void 0!=s){try{e=JSON.parse(s)}catch(e){throw I.ZP.error("Failed to parse LiteLLM Extra Params: "+e,10),Error("Failed to parse litellm_extra_params: "+e)}for(let[l,s]of Object.entries(e))r[l]=s}}else if("input_cost_per_token"===l||"output_cost_per_token"===l||"input_cost_per_second"===l){s&&(a[l]=Number(s));continue}else a[l]=s}let i={model_name:n,litellm_params:a,model_info:r},o=await (0,p.kK)(l,i);t&&t(),console.log("response for model create call: ".concat(o.data))}),s.resetFields()}catch(e){I.ZP.error("Failed to create model: "+e,10)}};var eO=e=>{let{visible:l,onCancel:s,model:t,onSubmit:a}=e,[n]=C.Z.useForm(),i={},o="",d="";if(t){var c,m;i={...t.litellm_params,input_cost_per_token:(null===(c=t.litellm_params)||void 0===c?void 0:c.input_cost_per_token)?1e6*t.litellm_params.input_cost_per_token:void 0,output_cost_per_token:(null===(m=t.litellm_params)||void 0===m?void 0:m.output_cost_per_token)?1e6*t.litellm_params.output_cost_per_token:void 0},o=t.model_name;let e=t.model_info;e&&(d=e.id,console.log("model_id: ".concat(d)),i.model_id=d)}return(0,r.jsx)(A.Z,{title:"Edit '"+o+"' LiteLLM Params",visible:l,width:800,footer:null,onOk:()=>{n.validateFields().then(e=>{a({...e,input_cost_per_token:e.input_cost_per_token?Number(e.input_cost_per_token)/1e6:void 0,output_cost_per_token:e.output_cost_per_token?Number(e.output_cost_per_token)/1e6:void 0}),n.resetFields()}).catch(e=>{console.error("Validation failed:",e)})},onCancel:s,children:(0,r.jsxs)(C.Z,{form:n,onFinish:a,initialValues:i,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"Input Cost (per 1M tokens)",name:"input_cost_per_token",tooltip:"float (optional) - Input cost per 1 million tokens",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"Output Cost (per 1M tokens)",name:"output_cost_per_token",tooltip:"float (optional) - Output cost per 1 million tokens",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"api_base",name:"api_base",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"api_key",name:"api_key",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"custom_llm_provider",name:"custom_llm_provider",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"model",name:"model",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"organization",name:"organization",tooltip:"OpenAI Organization ID",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"tpm",name:"tpm",tooltip:"int (optional) - Tokens limit for this deployment: in tokens per minute (tpm). Find this information on your model/providers website",children:(0,r.jsx)(E.Z,{min:0,step:1})}),(0,r.jsx)(C.Z.Item,{label:"rpm",name:"rpm",tooltip:"int (optional) - Rate limit for this deployment: in requests per minute (rpm). Find this information on your model/providers website",children:(0,r.jsx)(E.Z,{min:0,step:1})}),(0,r.jsx)(C.Z.Item,{label:"max_retries",name:"max_retries",children:(0,r.jsx)(E.Z,{min:0,step:1})}),(0,r.jsx)(C.Z.Item,{label:"timeout",name:"timeout",tooltip:"int (optional) - Timeout in seconds for LLM requests (Defaults to 600 seconds)",children:(0,r.jsx)(E.Z,{min:0,step:1})}),(0,r.jsx)(C.Z.Item,{label:"stream_timeout",name:"stream_timeout",tooltip:"int (optional) - Timeout for stream requests (seconds)",children:(0,r.jsx)(E.Z,{min:0,step:1})}),(0,r.jsx)(C.Z.Item,{label:"model_id",name:"model_id",hidden:!0})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Save"})})]})})},eT=s(53003),eM=s(12485),eD=s(18135),eF=s(35242),eL=s(29706),eR=s(77991),ez=s(75105),eU=s(40278),eV=s(14301),eq=s(2356),eB=e=>{let{modelID:l,accessToken:s,callback:t}=e,[a,i]=(0,n.useState)(!1),o=async()=>{try{I.ZP.info("Making API Call"),i(!0);let e=await (0,p.Og)(s,l);console.log("model delete Response:",e),I.ZP.success("Model ".concat(l," deleted successfully")),i(!1),t&&setTimeout(t,4e3)}catch(e){console.error("Error deleting the model:",e)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)(Y.Z,{onClick:()=>i(!0),icon:H.Z,size:"sm"}),(0,r.jsx)(A.Z,{open:a,onOk:o,okType:"danger",onCancel:()=>i(!1),children:(0,r.jsxs)(f.Z,{numItems:1,className:"gap-2 w-full",children:[(0,r.jsx)(k.Z,{children:"Delete Model"}),(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsx)("p",{children:"Are you sure you want to delete this model? This action is irreversible."})}),(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsxs)("p",{children:["Model ID: ",(0,r.jsx)("b",{children:l})]})})]})})]})},eK=s(94789),eW=s(59664),eH=e=>{let{modelMetrics:l,modelMetricsCategories:s,customTooltip:t,premiumUser:a}=e;return a?(0,r.jsx)(eW.Z,{title:"Time to First token (s)",className:"h-72",data:l,index:"date",showLegend:!1,categories:s,colors:["indigo","rose"],connectNulls:!0,customTooltip:t}):(0,r.jsxs)("div",{children:[(0,r.jsx)(eK.Z,{title:"✨ Enterprise Feature",color:"teal",className:"mt-2 mb-4",children:"Enterprise features are available for users with a specific license, please contact LiteLLM to unlock this limitation."}),(0,r.jsx)(y.Z,{variant:"primary",children:(0,r.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"Get in touch"})})]})},eG=s(17906);let{Title:eJ,Link:eY}=eh.default,e$={"BadRequestError (400)":"BadRequestErrorRetries","AuthenticationError  (401)":"AuthenticationErrorRetries","TimeoutError (408)":"TimeoutErrorRetries","RateLimitError (429)":"RateLimitErrorRetries","ContentPolicyViolationError (400)":"ContentPolicyViolationErrorRetries","InternalServerError (500)":"InternalServerErrorRetries"};var eX=e=>{let{accessToken:l,token:s,userRole:t,userID:i,modelData:o={data:[]},keys:d,setModelData:c,premiumUser:m}=e,[u,h]=(0,n.useState)([]),[x]=C.Z.useForm(),[g,j]=(0,n.useState)(null),[_,Z]=(0,n.useState)(""),[b,v]=(0,n.useState)([]);Object.values(a).filter(e=>isNaN(Number(e)));let[S,P]=(0,n.useState)([]),[O,M]=(0,n.useState)(a.OpenAI),[D,F]=(0,n.useState)(""),[L,z]=(0,n.useState)(!1),[U,V]=(0,n.useState)(!1),[q,H]=(0,n.useState)(null),[er,en]=(0,n.useState)([]),[ei,eo]=(0,n.useState)([]),[ed,ec]=(0,n.useState)(null),[em,eu]=(0,n.useState)([]),[ex,eg]=(0,n.useState)([]),[ek,eS]=(0,n.useState)([]),[eC,eI]=(0,n.useState)([]),[eA,eK]=(0,n.useState)([]),[eW,eY]=(0,n.useState)([]),[eX,eQ]=(0,n.useState)([]),[e0,e1]=(0,n.useState)([]),[e2,e4]=(0,n.useState)([]),[e5,e8]=(0,n.useState)({from:new Date(Date.now()-6048e5),to:new Date}),[e3,e6]=(0,n.useState)(null),[e7,e9]=(0,n.useState)(0),[le,ll]=(0,n.useState)({}),[ls,lt]=(0,n.useState)([]),[la,lr]=(0,n.useState)(!1),[ln,li]=(0,n.useState)(null),[lo,ld]=(0,n.useState)(null),[lc,lm]=(0,n.useState)([]),[lu,lh]=(0,n.useState)(!1),lx=e=>{let l=ev(e,g);v(l),console.log("providerModels: ".concat(l))},lp=async(e,s,a)=>{if(console.log("Updating model metrics for group:",e),!l||!i||!t||!s||!a)return;console.log("inside updateModelMetrics - startTime:",s,"endTime:",a),ec(e);let r=null==ln?void 0:ln.token;void 0===r&&(r=null);let n=lo;void 0===n&&(n=null),s.setHours(0),s.setMinutes(0),s.setSeconds(0),a.setHours(23),a.setMinutes(59),a.setSeconds(59);try{let o=await (0,p.o6)(l,i,t,e,s.toISOString(),a.toISOString(),r,n);console.log("Model metrics response:",o),eg(o.data),eS(o.all_api_bases);let d=await (0,p.Rg)(l,e,s.toISOString(),a.toISOString());eI(d.data),eK(d.all_api_bases);let c=await (0,p.N8)(l,i,t,e,s.toISOString(),a.toISOString(),r,n);console.log("Model exceptions response:",c),eY(c.data),eQ(c.exception_types);let m=await (0,p.fP)(l,i,t,e,s.toISOString(),a.toISOString(),r,n);if(console.log("slowResponses:",m),e4(m),e){let t=await (0,p.n$)(l,null==s?void 0:s.toISOString().split("T")[0],null==a?void 0:a.toISOString().split("T")[0],e);ll(t);let r=await (0,p.v9)(l,null==s?void 0:s.toISOString().split("T")[0],null==a?void 0:a.toISOString().split("T")[0],e);lt(r)}}catch(e){console.error("Failed to fetch model metrics",e)}};(0,n.useEffect)(()=>{lp(ed,e5.from,e5.to)},[ln,lo]);let lg=e=>{H(e),z(!0)},lj=e=>{H(e),V(!0)},lf=async e=>{if(console.log("handleEditSubmit:",e),null==l)return;let s={},t=null;for(let[l,a]of(e.input_cost_per_token&&(e.input_cost_per_token=Number(e.input_cost_per_token)/1e6),e.output_cost_per_token&&(e.output_cost_per_token=Number(e.output_cost_per_token)/1e6),Object.entries(e)))"model_id"!==l?s[l]=""===a?null:a:t=""===a?null:a;let a={litellm_params:Object.keys(s).length>0?s:void 0,model_info:void 0!==t?{id:t}:void 0};console.log("handleEditSubmit payload:",a);try{await (0,p.um)(l,a),I.ZP.success("Model updated successfully, restart server to see updates"),z(!1),H(null)}catch(e){console.log("Error occurred")}},ly=()=>{Z(new Date().toLocaleString())},l_=async()=>{if(!l){console.error("Access token is missing");return}console.log("new modelGroupRetryPolicy:",e3);try{await (0,p.K_)(l,{router_settings:{model_group_retry_policy:e3}}),I.ZP.success("Retry settings saved successfully")}catch(e){console.error("Failed to save retry settings:",e),I.ZP.error("Failed to save retry settings")}};if((0,n.useEffect)(()=>{if(!l||!s||!t||!i)return;let e=async()=>{try{var e,s,a,r,n,o,d,m,u,h,x,g;let j=await (0,p.hy)(l);P(j);let f=await (0,p.AZ)(l,i,t);console.log("Model data response:",f.data),c(f);let y=new Set;for(let e=0;e<f.data.length;e++){let l=f.data[e];y.add(l.model_name)}console.log("all_model_groups:",y);let _=Array.from(y);_=_.sort(),en(_),console.log("array_model_groups:",_);let Z="all";_.length>0&&(Z=_[_.length-1],console.log("_initial_model_group:",Z)),console.log("selectedModelGroup:",ed);let b=await (0,p.o6)(l,i,t,Z,null===(e=e5.from)||void 0===e?void 0:e.toISOString(),null===(s=e5.to)||void 0===s?void 0:s.toISOString(),null==ln?void 0:ln.token,lo);console.log("Model metrics response:",b),eg(b.data),eS(b.all_api_bases);let v=await (0,p.Rg)(l,Z,null===(a=e5.from)||void 0===a?void 0:a.toISOString(),null===(r=e5.to)||void 0===r?void 0:r.toISOString());eI(v.data),eK(v.all_api_bases);let w=await (0,p.N8)(l,i,t,Z,null===(n=e5.from)||void 0===n?void 0:n.toISOString(),null===(o=e5.to)||void 0===o?void 0:o.toISOString(),null==ln?void 0:ln.token,lo);console.log("Model exceptions response:",w),eY(w.data),eQ(w.exception_types);let k=await (0,p.fP)(l,i,t,Z,null===(d=e5.from)||void 0===d?void 0:d.toISOString(),null===(m=e5.to)||void 0===m?void 0:m.toISOString(),null==ln?void 0:ln.token,lo),S=await (0,p.n$)(l,null===(u=e5.from)||void 0===u?void 0:u.toISOString().split("T")[0],null===(h=e5.to)||void 0===h?void 0:h.toISOString().split("T")[0],Z);ll(S);let N=await (0,p.v9)(l,null===(x=e5.from)||void 0===x?void 0:x.toISOString().split("T")[0],null===(g=e5.to)||void 0===g?void 0:g.toISOString().split("T")[0],Z);lt(N),console.log("dailyExceptions:",S),console.log("dailyExceptionsPerDeplyment:",N),console.log("slowResponses:",k),e4(k);let C=await (0,p.j2)(l);lm(null==C?void 0:C.end_users);let I=(await (0,p.BL)(l,i,t)).router_settings;console.log("routerSettingsInfo:",I);let A=I.model_group_retry_policy,E=I.num_retries;console.log("model_group_retry_policy:",A),console.log("default_retries:",E),e6(A),e9(E)}catch(e){console.error("There was an error fetching the model data",e)}};l&&s&&t&&i&&e();let a=async()=>{let e=await (0,p.qm)(l);console.log("received model cost map data: ".concat(Object.keys(e))),j(e)};null==g&&a(),ly()},[l,s,t,i,g,_]),!o||!l||!s||!t||!i)return(0,r.jsx)("div",{children:"Loading..."});let lZ=[],lb=[];for(let e=0;e<o.data.length;e++){var lv,lw,lk;let l=o.data[e],s=null==l?void 0:null===(lv=l.litellm_params)||void 0===lv?void 0:lv.model,t=null==l?void 0:null===(lw=l.litellm_params)||void 0===lw?void 0:lw.custom_llm_provider,a=null==l?void 0:l.model_info,r="",n="Undefined",i="Undefined",d="Undefined",c="Undefined",m={},u=e=>(console.log("GET PROVIDER CALLED! - ".concat(g)),null!=g&&"object"==typeof g&&e in g)?g[e].litellm_provider:"openai";if(s){let e=s.split("/"),l=e[0];(r=t)||(r=1===e.length?u(s):l)}else r="-";a&&(n=null==a?void 0:a.input_cost_per_token,i=null==a?void 0:a.output_cost_per_token,d=null==a?void 0:a.max_tokens,c=null==a?void 0:a.max_input_tokens),(null==l?void 0:l.litellm_params)&&(m=Object.fromEntries(Object.entries(null==l?void 0:l.litellm_params).filter(e=>{let[l]=e;return"model"!==l&&"api_base"!==l}))),o.data[e].provider=r,o.data[e].input_cost=n,o.data[e].output_cost=i,o.data[e].litellm_model_name=s,lb.push(r),o.data[e].input_cost&&(o.data[e].input_cost=(1e6*Number(o.data[e].input_cost)).toFixed(2)),o.data[e].output_cost&&(o.data[e].output_cost=(1e6*Number(o.data[e].output_cost)).toFixed(2)),o.data[e].max_tokens=d,o.data[e].max_input_tokens=c,o.data[e].api_base=null==l?void 0:null===(lk=l.litellm_params)||void 0===lk?void 0:lk.api_base,o.data[e].cleanedLitellmParams=m,lZ.push(l.model_name),console.log(o.data[e])}if(o.data&&o.data.length>0&&o.data.sort((e,l)=>e.provider&&l.provider?e.provider.localeCompare(l.provider):e.provider&&!l.provider?-1:!e.provider&&l.provider?1:0),t&&"Admin Viewer"==t){let{Title:e,Paragraph:l}=eh.default;return(0,r.jsxs)("div",{children:[(0,r.jsx)(e,{level:1,children:"Access Denied"}),(0,r.jsx)(l,{children:"Ask your proxy admin for access to view all models"})]})}let lS=async()=>{try{I.ZP.info("Running health check..."),F("");let e=await (0,p.EY)(l);F(e)}catch(e){console.error("Error running health check:",e),F("Error running health check")}},lN=(0,r.jsxs)("div",{children:[(0,r.jsx)(w.Z,{className:"mb-1",children:"Select API Key Name"}),m?(0,r.jsxs)("div",{children:[(0,r.jsxs)(et.Z,{defaultValue:"all-keys",children:[(0,r.jsx)(ea.Z,{value:"all-keys",onClick:()=>{li(null)},children:"All Keys"},"all-keys"),null==d?void 0:d.map((e,l)=>e&&null!==e.key_alias&&e.key_alias.length>0?(0,r.jsx)(ea.Z,{value:String(l),onClick:()=>{li(e)},children:e.key_alias},l):null)]}),(0,r.jsx)(w.Z,{className:"mt-1",children:"Select Customer Name"}),(0,r.jsxs)(et.Z,{defaultValue:"all-customers",children:[(0,r.jsx)(ea.Z,{value:"all-customers",onClick:()=>{ld(null)},children:"All Customers"},"all-customers"),null==lc?void 0:lc.map((e,l)=>(0,r.jsx)(ea.Z,{value:e,onClick:()=>{ld(e)},children:e},l))]})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)(et.Z,{defaultValue:"all-keys",children:[(0,r.jsx)(ea.Z,{value:"all-keys",onClick:()=>{li(null)},children:"All Keys"},"all-keys"),null==d?void 0:d.map((e,l)=>e&&null!==e.key_alias&&e.key_alias.length>0?(0,r.jsxs)(ea.Z,{value:String(l),disabled:!0,onClick:()=>{li(e)},children:["✨ ",e.key_alias," (Enterprise only Feature)"]},l):null)]}),(0,r.jsx)(w.Z,{className:"mt-1",children:"Select Customer Name"}),(0,r.jsxs)(et.Z,{defaultValue:"all-customers",children:[(0,r.jsx)(ea.Z,{value:"all-customers",onClick:()=>{ld(null)},children:"All Customers"},"all-customers"),null==lc?void 0:lc.map((e,l)=>(0,r.jsxs)(ea.Z,{value:e,disabled:!0,onClick:()=>{ld(e)},children:["✨ ",e," (Enterprise only Feature)"]},l))]})]})]}),lC=e=>{var l,s;let{payload:t,active:a}=e;if(!a||!t)return null;let n=null===(s=t[0])||void 0===s?void 0:null===(l=s.payload)||void 0===l?void 0:l.date,i=t.sort((e,l)=>l.value-e.value);if(i.length>5){let e=i.length-5;(i=i.slice(0,5)).push({dataKey:"".concat(e," other deployments"),value:t.slice(5).reduce((e,l)=>e+l.value,0),color:"gray"})}return(0,r.jsxs)("div",{className:"w-150 rounded-tremor-default border border-tremor-border bg-tremor-background p-2 text-tremor-default shadow-tremor-dropdown",children:[n&&(0,r.jsxs)("p",{className:"text-tremor-content-emphasis mb-2",children:["Date: ",n]}),i.map((e,l)=>{let s=parseFloat(e.value.toFixed(5)),t=0===s&&e.value>0?"<0.00001":s.toFixed(5);return(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 mt-1 rounded-full bg-".concat(e.color,"-500")}),(0,r.jsx)("p",{className:"text-tremor-content",children:e.dataKey})]}),(0,r.jsx)("p",{className:"font-medium text-tremor-content-emphasis text-righ ml-2",children:t})]},l)})]})};console.log("selectedProvider: ".concat(O)),console.log("providerModels.length: ".concat(b.length));let lI=Object.keys(a).find(e=>a[e]===O);return lI&&S.find(e=>e.name===ey[lI]),(0,r.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,r.jsxs)(eD.Z,{className:"gap-2 p-8 h-[75vh] w-full mt-2",children:[(0,r.jsxs)(eF.Z,{className:"flex justify-between mt-2 w-full items-center",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(eM.Z,{children:"All Models"}),(0,r.jsx)(eM.Z,{children:"Add Model"}),(0,r.jsx)(eM.Z,{children:(0,r.jsx)("pre",{children:"/health Models"})}),(0,r.jsx)(eM.Z,{children:"Model Analytics"}),(0,r.jsx)(eM.Z,{children:"Model Retry Settings"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[_&&(0,r.jsxs)(w.Z,{children:["Last Refreshed: ",_]}),(0,r.jsx)(Y.Z,{icon:W.Z,variant:"shadow",size:"xs",className:"self-center",onClick:ly})]})]}),(0,r.jsxs)(eR.Z,{children:[(0,r.jsxs)(eL.Z,{children:[(0,r.jsxs)(f.Z,{children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(w.Z,{children:"Filter by Public Model Name"}),(0,r.jsxs)(et.Z,{className:"mb-4 mt-2 ml-2 w-50",defaultValue:ed||void 0,onValueChange:e=>ec("all"===e?"all":e),value:ed||void 0,children:[(0,r.jsx)(ea.Z,{value:"all",children:"All Models"}),er.map((e,l)=>(0,r.jsx)(ea.Z,{value:e,onClick:()=>ec(e),children:e},l))]})]}),(0,r.jsx)(J.Z,{children:(0,r.jsxs)($.Z,{style:{maxWidth:"1500px",width:"100%"},children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{style:{maxWidth:"150px",whiteSpace:"normal",wordBreak:"break-word",fontSize:"11px"},children:"Public Model Name"}),(0,r.jsx)(el.Z,{style:{maxWidth:"100px",whiteSpace:"normal",wordBreak:"break-word",fontSize:"11px"},children:"Provider"}),(0,r.jsx)(el.Z,{style:{maxWidth:"150px",whiteSpace:"normal",wordBreak:"break-word",fontSize:"11px"},children:"LiteLLM Model"}),"Admin"===t&&(0,r.jsx)(el.Z,{style:{maxWidth:"150px",whiteSpace:"normal",wordBreak:"break-word",fontSize:"11px"},children:"API Base"}),(0,r.jsxs)(el.Z,{style:{maxWidth:"85px",whiteSpace:"normal",wordBreak:"break-word",fontSize:"11px"},children:["Input Price"," ",(0,r.jsx)("p",{style:{fontSize:"10px",color:"gray"},children:"/1M Tokens ($)"})]}),(0,r.jsxs)(el.Z,{style:{maxWidth:"85px",whiteSpace:"normal",wordBreak:"break-word",fontSize:"11px"},children:["Output Price"," ",(0,r.jsx)("p",{style:{fontSize:"10px",color:"gray"},children:"/1M Tokens ($)"})]}),(0,r.jsx)(el.Z,{style:{maxWidth:"100px",whiteSpace:"normal",wordBreak:"break-word",fontSize:"11px"},children:m?"Created At":(0,r.jsxs)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",style:{color:"#72bcd4"},children:[" ","✨ Created At"]})}),(0,r.jsx)(el.Z,{style:{maxWidth:"100px",whiteSpace:"normal",wordBreak:"break-word",fontSize:"11px"},children:m?"Created By":(0,r.jsxs)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",style:{color:"#72bcd4"},children:[" ","✨ Created By"]})}),(0,r.jsx)(el.Z,{style:{maxWidth:"50px",whiteSpace:"normal",wordBreak:"break-word",fontSize:"11px"},children:"Status"}),(0,r.jsx)(el.Z,{})]})}),(0,r.jsx)(X.Z,{children:o.data.filter(e=>"all"===ed||e.model_name===ed||null==ed||""===ed).map((e,s)=>{var a;return(0,r.jsxs)(es.Z,{style:{maxHeight:"1px",minHeight:"1px"},children:[(0,r.jsx)(Q.Z,{style:{maxWidth:"100px",whiteSpace:"normal",wordBreak:"break-word"},children:(0,r.jsx)("p",{className:"text-xs",children:e.model_name||"-"})}),(0,r.jsx)(Q.Z,{style:{maxWidth:"100px",whiteSpace:"normal",wordBreak:"break-word"},children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[e.provider&&(0,r.jsx)("img",{src:eZ(e.provider).logo,alt:"".concat(e.provider," logo"),className:"w-4 h-4",onError:l=>{let s=l.target,t=s.parentElement;if(t){var a;let l=document.createElement("div");l.className="w-4 h-4 rounded-full bg-gray-200 flex items-center justify-center text-xs",l.textContent=(null===(a=e.provider)||void 0===a?void 0:a.charAt(0))||"-",t.replaceChild(l,s)}}}),(0,r.jsx)("p",{className:"text-xs",children:e.provider||"-"})]})}),(0,r.jsx)(Q.Z,{style:{maxWidth:"100px",whiteSpace:"normal",wordBreak:"break-word"},children:(0,r.jsx)(R.Z,{title:e&&e.litellm_model_name,children:(0,r.jsx)("pre",{style:{maxWidth:"150px",whiteSpace:"normal",wordBreak:"break-word"},className:"text-xs",title:e&&e.litellm_model_name?e.litellm_model_name:"",children:e&&e.litellm_model_name?e.litellm_model_name.slice(0,20)+(e.litellm_model_name.length>20?"...":""):"-"})})}),"Admin"===t&&(0,r.jsx)(Q.Z,{style:{maxWidth:"150px",whiteSpace:"normal",wordBreak:"break-word"},children:(0,r.jsx)(R.Z,{title:e&&e.api_base,children:(0,r.jsx)("pre",{style:{maxWidth:"150px",whiteSpace:"normal",wordBreak:"break-word"},className:"text-xs",title:e&&e.api_base?e.api_base:"",children:e&&e.api_base?e.api_base.slice(0,20):"-"})})}),(0,r.jsx)(Q.Z,{style:{maxWidth:"80px",whiteSpace:"normal",wordBreak:"break-word"},children:(0,r.jsx)("pre",{className:"text-xs",children:e.input_cost?e.input_cost:null!=e.litellm_params.input_cost_per_token&&void 0!=e.litellm_params.input_cost_per_token?(1e6*Number(e.litellm_params.input_cost_per_token)).toFixed(2):null})}),(0,r.jsx)(Q.Z,{style:{maxWidth:"80px",whiteSpace:"normal",wordBreak:"break-word"},children:(0,r.jsx)("pre",{className:"text-xs",children:e.output_cost?e.output_cost:e.litellm_params.output_cost_per_token?(1e6*Number(e.litellm_params.output_cost_per_token)).toFixed(2):null})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)("p",{className:"text-xs",children:m&&((a=e.model_info.created_at)?new Date(a).toLocaleDateString("en-US"):null)||"-"})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)("p",{className:"text-xs",children:m&&e.model_info.created_by||"-"})}),(0,r.jsx)(Q.Z,{style:{maxWidth:"100px",whiteSpace:"normal",wordBreak:"break-word"},children:e.model_info.db_model?(0,r.jsx)(G.Z,{size:"xs",className:"text-white",children:(0,r.jsx)("p",{className:"text-xs",children:"DB Model"})}):(0,r.jsx)(G.Z,{size:"xs",className:"text-black",children:(0,r.jsx)("p",{className:"text-xs",children:"Config Model"})})}),(0,r.jsx)(Q.Z,{style:{maxWidth:"150px",whiteSpace:"normal",wordBreak:"break-word"},children:(0,r.jsxs)(f.Z,{numItems:3,children:[(0,r.jsx)(ej.Z,{children:(0,r.jsx)(Y.Z,{icon:B.Z,size:"sm",onClick:()=>lj(e)})}),(0,r.jsx)(ej.Z,{children:(0,r.jsx)(Y.Z,{icon:K.Z,size:"sm",onClick:()=>lg(e)})}),(0,r.jsx)(ej.Z,{children:(0,r.jsx)(eB,{modelID:e.model_info.id,accessToken:l,callback:ly})})]})})]},s)})})]})})]}),(0,r.jsx)(eO,{visible:L,onCancel:()=>{z(!1),H(null)},model:q,onSubmit:lf}),(0,r.jsxs)(A.Z,{title:q&&q.model_name,visible:U,width:800,footer:null,onCancel:()=>{V(!1),H(null)},children:[(0,r.jsx)(k.Z,{children:"Model Info"}),(0,r.jsx)(eG.Z,{language:"json",children:q&&JSON.stringify(q,null,2)})]})]}),(0,r.jsxs)(eL.Z,{className:"h-full",children:[(0,r.jsx)(eJ,{level:2,children:"Add new model"}),(0,r.jsx)(J.Z,{children:(0,r.jsx)(C.Z,{form:x,onFinish:()=>{x.validateFields().then(e=>{eE(e,l,x,ly)}).catch(e=>{console.error("Validation failed:",e)})},labelCol:{span:10},wrapperCol:{span:16},labelAlign:"left",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"Provider:",name:"custom_llm_provider",tooltip:"E.g. OpenAI, Azure OpenAI, Anthropic, Bedrock, etc.",labelCol:{span:10},labelAlign:"left",children:(0,r.jsx)(N.default,{showSearch:!0,value:O,onChange:e=>{M(e),lx(e),x.setFieldsValue({model:[],model_name:void 0})},children:Object.entries(a).map(e=>{let[l,s]=e;return(0,r.jsx)(N.default.Option,{value:l,children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("img",{src:e_[s],alt:"".concat(l," logo"),className:"w-5 h-5",onError:e=>{let l=e.target,t=l.parentElement;if(t){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=s.charAt(0),t.replaceChild(e,l)}}}),(0,r.jsx)("span",{children:s})]})},l)})})}),(0,r.jsx)(ew,{selectedProvider:O,providerModels:b,getPlaceholder:eb}),(0,r.jsx)(ef,{}),(0,r.jsx)(eP,{selectedProvider:O,uploadProps:{name:"file",accept:".json",beforeUpload:e=>{if("application/json"===e.type){let l=new FileReader;l.onload=e=>{if(e.target){let l=e.target.result;x.setFieldsValue({vertex_credentials:l})}},l.readAsText(e)}return!1},onChange(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?I.ZP.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&I.ZP.error("".concat(e.file.name," file upload failed."))}}}),(0,r.jsx)(eN,{showAdvancedSettings:lu,setShowAdvancedSettings:lh}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)(R.Z,{title:"Get help on our github",children:(0,r.jsx)(eh.default.Link,{href:"https://github.com/BerriAI/litellm/issues",children:"Need Help?"})}),(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Add Model"})]})]})})})]}),(0,r.jsx)(eL.Z,{children:(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(w.Z,{children:"`/health` will run a very small request through your models configured on litellm"}),(0,r.jsx)(y.Z,{onClick:lS,children:"Run `/health`"}),D&&(0,r.jsx)("pre",{children:JSON.stringify(D,null,2)})]})}),(0,r.jsxs)(eL.Z,{children:[(0,r.jsxs)(f.Z,{numItems:4,className:"mt-2 mb-2",children:[(0,r.jsxs)(ej.Z,{children:[(0,r.jsx)(w.Z,{children:"Select Time Range"}),(0,r.jsx)(eT.Z,{enableSelect:!0,value:e5,className:"mr-2",onValueChange:e=>{e8(e),lp(ed,e.from,e.to)}})]}),(0,r.jsxs)(ej.Z,{className:"ml-2",children:[(0,r.jsx)(w.Z,{children:"Select Model Group"}),(0,r.jsx)(et.Z,{defaultValue:ed||er[0],value:ed||er[0],children:er.map((e,l)=>(0,r.jsx)(ea.Z,{value:e,onClick:()=>lp(e,e5.from,e5.to),children:e},l))})]}),(0,r.jsx)(ej.Z,{children:(0,r.jsx)(eV.Z,{trigger:"click",content:lN,overlayStyle:{width:"20vw"},children:(0,r.jsx)(y.Z,{icon:eq.Z,size:"md",variant:"secondary",className:"mt-4 ml-2",style:{border:"none"},onClick:()=>lr(!0)})})})]}),(0,r.jsxs)(f.Z,{numItems:2,children:[(0,r.jsx)(ej.Z,{children:(0,r.jsx)(J.Z,{className:"mr-2 max-h-[400px] min-h-[400px]",children:(0,r.jsxs)(eD.Z,{children:[(0,r.jsxs)(eF.Z,{variant:"line",defaultValue:"1",children:[(0,r.jsx)(eM.Z,{value:"1",children:"Avg. Latency per Token"}),(0,r.jsx)(eM.Z,{value:"2",children:"✨ Time to first token"})]}),(0,r.jsxs)(eR.Z,{children:[(0,r.jsxs)(eL.Z,{children:[(0,r.jsx)("p",{className:"text-gray-500 italic",children:" (seconds/token)"}),(0,r.jsx)(w.Z,{className:"text-gray-500 italic mt-1 mb-1",children:"average Latency for successfull requests divided by the total tokens"}),ex&&ek&&(0,r.jsx)(ez.Z,{title:"Model Latency",className:"h-72",data:ex,showLegend:!1,index:"date",categories:ek,connectNulls:!0,customTooltip:lC})]}),(0,r.jsx)(eL.Z,{children:(0,r.jsx)(eH,{modelMetrics:eC,modelMetricsCategories:eA,customTooltip:lC,premiumUser:m})})]})]})})}),(0,r.jsx)(ej.Z,{children:(0,r.jsx)(J.Z,{className:"ml-2 max-h-[400px] min-h-[400px]  overflow-y-auto",children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Deployment"}),(0,r.jsx)(el.Z,{children:"Success Responses"}),(0,r.jsxs)(el.Z,{children:["Slow Responses ",(0,r.jsx)("p",{children:"Success Responses taking 600+s"})]})]})}),(0,r.jsx)(X.Z,{children:e2.map((e,l)=>(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:e.api_base}),(0,r.jsx)(Q.Z,{children:e.total_count}),(0,r.jsx)(Q.Z,{children:e.slow_count})]},l))})]})})})]}),(0,r.jsx)(f.Z,{numItems:1,className:"gap-2 w-full mt-2",children:(0,r.jsxs)(J.Z,{children:[(0,r.jsxs)(k.Z,{children:["All Exceptions for ",ed]}),(0,r.jsx)(eU.Z,{className:"h-60",data:eW,index:"model",categories:eX,stack:!0,yAxisWidth:30})]})}),(0,r.jsxs)(f.Z,{numItems:1,className:"gap-2 w-full mt-2",children:[(0,r.jsxs)(J.Z,{children:[(0,r.jsxs)(k.Z,{children:["All Up Rate Limit Errors (429) for ",ed]}),(0,r.jsxs)(f.Z,{numItems:1,children:[(0,r.jsxs)(ej.Z,{children:[(0,r.jsxs)(ep.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Num Rate Limit Errors ",le.sum_num_rate_limit_exceptions]}),(0,r.jsx)(eU.Z,{className:"h-40",data:le.daily_data,index:"date",colors:["rose"],categories:["num_rate_limit_exceptions"],onValueChange:e=>console.log(e)})]}),(0,r.jsx)(ej.Z,{})]})]}),m?(0,r.jsx)(r.Fragment,{children:ls.map((e,l)=>(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:e.api_base?e.api_base:"Unknown API Base"}),(0,r.jsx)(f.Z,{numItems:1,children:(0,r.jsxs)(ej.Z,{children:[(0,r.jsxs)(ep.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Num Rate Limit Errors (429) ",e.sum_num_rate_limit_exceptions]}),(0,r.jsx)(eU.Z,{className:"h-40",data:e.daily_data,index:"date",colors:["rose"],categories:["num_rate_limit_exceptions"],onValueChange:e=>console.log(e)})]})})]},l))}):(0,r.jsx)(r.Fragment,{children:ls&&ls.length>0&&ls.slice(0,1).map((e,l)=>(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:"✨ Rate Limit Errors by Deployment"}),(0,r.jsx)("p",{className:"mb-2 text-gray-500 italic text-[12px]",children:"Upgrade to see exceptions for all deployments"}),(0,r.jsx)(y.Z,{variant:"primary",className:"mb-2",children:(0,r.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"Get Free Trial"})}),(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:e.api_base}),(0,r.jsx)(f.Z,{numItems:1,children:(0,r.jsxs)(ej.Z,{children:[(0,r.jsxs)(ep.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Num Rate Limit Errors ",e.sum_num_rate_limit_exceptions]}),(0,r.jsx)(eU.Z,{className:"h-40",data:e.daily_data,index:"date",colors:["rose"],categories:["num_rate_limit_exceptions"],onValueChange:e=>console.log(e)})]})})]})]},l))})]})]}),(0,r.jsxs)(eL.Z,{children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(w.Z,{children:"Filter by Public Model Name"}),(0,r.jsx)(et.Z,{className:"mb-4 mt-2 ml-2 w-50",defaultValue:ed||er[0],value:ed||er[0],onValueChange:e=>ec(e),children:er.map((e,l)=>(0,r.jsx)(ea.Z,{value:e,onClick:()=>ec(e),children:e},l))})]}),(0,r.jsxs)(k.Z,{children:["Retry Policy for ",ed]}),(0,r.jsx)(w.Z,{className:"mb-6",children:"How many retries should be attempted based on the Exception"}),e$&&(0,r.jsx)("table",{children:(0,r.jsx)("tbody",{children:Object.entries(e$).map((e,l)=>{var s;let[t,a]=e,n=null==e3?void 0:null===(s=e3[ed])||void 0===s?void 0:s[a];return null==n&&(n=e7),(0,r.jsxs)("tr",{className:"flex justify-between items-center mt-2",children:[(0,r.jsx)("td",{children:(0,r.jsx)(w.Z,{children:t})}),(0,r.jsx)("td",{children:(0,r.jsx)(E.Z,{className:"ml-5",value:n,min:0,step:1,onChange:e=>{e6(l=>{var s;let t=null!==(s=null==l?void 0:l[ed])&&void 0!==s?s:{};return{...null!=l?l:{},[ed]:{...t,[a]:e}}})}})})]},l)})})}),(0,r.jsx)(y.Z,{className:"mt-6 mr-8",onClick:l_,children:"Save"})]})]})]})})};function eQ(e){let{isInvitationLinkModalVisible:l,setIsInvitationLinkModalVisible:s,baseUrl:t,invitationLinkData:a}=e,{Title:n,Paragraph:i}=eh.default,o=()=>(null==a?void 0:a.has_user_setup_sso)?new URL("/ui",t).toString():new URL("/ui?invitation_id=".concat(null==a?void 0:a.id),t).toString();return(0,r.jsxs)(A.Z,{title:"Invitation Link",visible:l,width:800,footer:null,onOk:()=>{s(!1)},onCancel:()=>{s(!1)},children:[(0,r.jsx)(i,{children:"Copy and send the generated link to onboard this user to the proxy."}),(0,r.jsxs)("div",{className:"flex justify-between pt-5 pb-2",children:[(0,r.jsx)(w.Z,{className:"text-base",children:"User ID"}),(0,r.jsx)(w.Z,{children:null==a?void 0:a.user_id})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-5 pb-2",children:[(0,r.jsx)(w.Z,{children:"Invitation Link"}),(0,r.jsx)(w.Z,{children:(0,r.jsx)(w.Z,{children:o()})})]}),(0,r.jsx)("div",{className:"flex justify-end mt-5",children:(0,r.jsx)(S.CopyToClipboard,{text:o(),onCopy:()=>I.ZP.success("Copied!"),children:(0,r.jsx)(y.Z,{variant:"primary",children:"Copy invitation link"})})})]})}let{Option:e0}=N.default;var e1=e=>{let{userID:l,accessToken:s,teams:t,possibleUIRoles:a}=e,[o,d]=(0,n.useState)(null),[c]=C.Z.useForm(),[m,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(null),[g,j]=(0,n.useState)([]),[f,Z]=(0,n.useState)(!1),[b,v]=(0,n.useState)(null),k=(0,i.useRouter)(),[S,P]=(0,n.useState)("http://localhost:4000");(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,p.So)(s,l,"any"),t=[];for(let l=0;l<e.data.length;l++){let s=e.data[l];t.push(s.id)}console.log("Model data response:",e.data),console.log("Available models:",t),j(t);let a=await (0,p.g)(s);console.log("uiSettingsResponse:",a),d(a)}catch(e){console.error("Error fetching model data:",e)}})()},[]),(0,n.useEffect)(()=>{k&&P(new URL("/",window.location.href).toString())},[k]);let E=async e=>{try{var t;I.ZP.info("Making API Call"),u(!0),console.log("formValues in create user:",e);let a=await (0,p.Ov)(s,null,e);console.log("user create Response:",a),x(a.key);let r=(null===(t=a.data)||void 0===t?void 0:t.user_id)||a.user_id;if(null==o?void 0:o.SSO_ENABLED){let e={id:crypto.randomUUID(),user_id:r,is_accepted:!1,accepted_at:null,expires_at:new Date(Date.now()+6048e5),created_at:new Date,created_by:l,updated_at:new Date,updated_by:l,has_user_setup_sso:!0};v(e),Z(!0)}else(0,p.XO)(s,r).then(e=>{e.has_user_setup_sso=!1,v(e),Z(!0)});I.ZP.success("API user Created"),c.resetFields(),localStorage.removeItem("userData"+l)}catch(e){console.error("Error creating the user:",e)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)(y.Z,{className:"mx-auto mb-0",onClick:()=>u(!0),children:"+ Invite User"}),(0,r.jsxs)(A.Z,{title:"Invite User",visible:m,width:800,footer:null,onOk:()=>{u(!1),c.resetFields()},onCancel:()=>{u(!1),x(null),c.resetFields()},children:[(0,r.jsx)(w.Z,{className:"mb-1",children:"Create a User who can own keys"}),(0,r.jsxs)(C.Z,{form:c,onFinish:E,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsx)(C.Z.Item,{label:"User Email",name:"user_email",children:(0,r.jsx)(_.Z,{placeholder:""})}),(0,r.jsx)(C.Z.Item,{label:"User Role",name:"user_role",children:(0,r.jsx)(N.default,{children:a&&Object.entries(a).map(e=>{let[l,{ui_label:s,description:t}]=e;return(0,r.jsx)(ea.Z,{value:l,title:s,children:(0,r.jsxs)("div",{className:"flex",children:[s," ",(0,r.jsx)("p",{className:"ml-2",style:{color:"gray",fontSize:"12px"},children:t})]})},l)})})}),(0,r.jsx)(C.Z.Item,{label:"Team ID",name:"team_id",children:(0,r.jsx)(N.default,{placeholder:"Select Team ID",style:{width:"100%"},children:t?t.map(e=>(0,r.jsx)(e0,{value:e.team_id,children:e.team_alias},e.team_id)):(0,r.jsx)(e0,{value:null,children:"Default Team"},"default")})}),(0,r.jsx)(C.Z.Item,{label:"Metadata",name:"metadata",children:(0,r.jsx)(O.Z.TextArea,{rows:4,placeholder:"Enter metadata as JSON"})}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Create User"})})]})]}),h&&(0,r.jsx)(eQ,{isInvitationLinkModalVisible:f,setIsInvitationLinkModalVisible:Z,baseUrl:S,invitationLinkData:b})]})},e2=e=>{let{visible:l,possibleUIRoles:s,onCancel:t,user:a,onSubmit:i}=e,[o,d]=(0,n.useState)(a),[c]=C.Z.useForm();(0,n.useEffect)(()=>{c.resetFields()},[a]);let m=async()=>{c.resetFields(),t()},u=async e=>{i(e),c.resetFields(),t()};return a?(0,r.jsx)(A.Z,{visible:l,onCancel:m,footer:null,title:"Edit User "+a.user_id,width:1e3,children:(0,r.jsx)(C.Z,{form:c,onFinish:u,initialValues:a,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"User Email",tooltip:"Email of the User",name:"user_email",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"user_id",name:"user_id",hidden:!0,children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"User Role",name:"user_role",children:(0,r.jsx)(N.default,{children:s&&Object.entries(s).map(e=>{let[l,{ui_label:s,description:t}]=e;return(0,r.jsx)(ea.Z,{value:l,title:s,children:(0,r.jsxs)("div",{className:"flex",children:[s," ",(0,r.jsx)("p",{className:"ml-2",style:{color:"gray",fontSize:"12px"},children:t})]})},l)})})}),(0,r.jsx)(C.Z.Item,{label:"Spend (USD)",name:"spend",tooltip:"(float) - Spend of all LLM calls completed by this user",help:"Across all keys (including keys with team_id).",children:(0,r.jsx)(E.Z,{min:0,step:1})}),(0,r.jsx)(C.Z.Item,{label:"User Budget (USD)",name:"max_budget",tooltip:"(float) - Maximum budget of this user",help:"Ignored if the key has a team_id; team budget applies there.",children:(0,r.jsx)(E.Z,{min:0,step:1})}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Save"})})]})})}):null};console.log=function(){};var e4=e=>{let{accessToken:l,token:s,keys:t,userRole:a,userID:i,teams:o,setKeys:d}=e,[c,m]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),[x,g]=(0,n.useState)(null),[j,_]=(0,n.useState)(1),[Z,b]=n.useState(null),[v,w]=(0,n.useState)(null),[k,S]=(0,n.useState)(!1),[N,C]=(0,n.useState)(null),[A,P]=(0,n.useState)(!1),[E,O]=(0,n.useState)(null),[T,M]=(0,n.useState)({});window.addEventListener("beforeunload",function(){sessionStorage.clear()});let D=e=>{O(e),P(!0)},F=async()=>{if(E&&l)try{if(await (0,p.Eb)(l,[E]),I.ZP.success("User deleted successfully"),u){let e=u.filter(e=>e.user_id!==E);h(e)}}catch(e){console.error("Error deleting user:",e),I.ZP.error("Failed to delete user")}P(!1),O(null)},L=async()=>{C(null),S(!1)},R=async e=>{if(console.log("inside handleEditSubmit:",e),l&&s&&a&&i){try{await (0,p.pf)(l,e,null),I.ZP.success("User ".concat(e.user_id," updated successfully"))}catch(e){console.error("There was an error updating the user",e)}u&&h(u.map(l=>l.user_id===e.user_id?e:l)),C(null),S(!1)}};return((0,n.useEffect)(()=>{if(!l||!s||!a||!i)return;let e=async()=>{try{let e=sessionStorage.getItem("userList_".concat(j));if(e){let l=JSON.parse(e);m(l),h(l.users||[])}else{let e=await (0,p.Br)(l,null,a,!0,j,25);sessionStorage.setItem("userList_".concat(j),JSON.stringify(e)),m(e),h(e.users||[])}let s=sessionStorage.getItem("possibleUserRoles");if(s)M(JSON.parse(s));else{let e=await (0,p.lg)(l);sessionStorage.setItem("possibleUserRoles",JSON.stringify(e)),M(e)}}catch(e){console.error("There was an error fetching the model data",e)}};l&&s&&a&&i&&e()},[l,s,a,i,j]),u&&l&&s&&a&&i)?(0,r.jsx)("div",{style:{width:"100%"},children:(0,r.jsxs)(f.Z,{className:"gap-2 p-2 h-[90vh] w-full mt-8",children:[(0,r.jsx)(e1,{userID:i,accessToken:l,teams:o,possibleUIRoles:T}),(0,r.jsxs)(J.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[90vh] mb-4",children:[(0,r.jsx)("div",{className:"mb-4 mt-1"}),(0,r.jsx)(eD.Z,{children:(0,r.jsxs)(eR.Z,{children:[(0,r.jsx)(eL.Z,{children:(0,r.jsxs)($.Z,{className:"mt-5",children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"User ID"}),(0,r.jsx)(el.Z,{children:"User Email"}),(0,r.jsx)(el.Z,{children:"Role"}),(0,r.jsx)(el.Z,{children:"User Spend ($ USD)"}),(0,r.jsx)(el.Z,{children:"User Max Budget ($ USD)"}),(0,r.jsx)(el.Z,{children:"API Keys"}),(0,r.jsx)(el.Z,{})]})}),(0,r.jsx)(X.Z,{children:u.map(e=>{var l,s;return(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:e.user_id||"-"}),(0,r.jsx)(Q.Z,{children:e.user_email||"-"}),(0,r.jsx)(Q.Z,{children:(null==T?void 0:null===(l=T[null==e?void 0:e.user_role])||void 0===l?void 0:l.ui_label)||"-"}),(0,r.jsx)(Q.Z,{children:e.spend?null===(s=e.spend)||void 0===s?void 0:s.toFixed(2):"-"}),(0,r.jsx)(Q.Z,{children:null!==e.max_budget?e.max_budget:"Unlimited"}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(f.Z,{numItems:2,children:e.key_count>0?(0,r.jsxs)(G.Z,{size:"xs",color:"indigo",children:[e.key_count," Keys"]}):(0,r.jsx)(G.Z,{size:"xs",color:"gray",children:"No Keys"})})}),(0,r.jsxs)(Q.Z,{children:[(0,r.jsx)(Y.Z,{icon:K.Z,onClick:()=>{C(e),S(!0)},children:"View Keys"}),(0,r.jsx)(Y.Z,{icon:H.Z,onClick:()=>D(e.user_id),children:"Delete"})]})]},e.user_id)})})]})}),(0,r.jsx)(eL.Z,{children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-1"}),(0,r.jsx)("div",{className:"flex-1 flex justify-between items-center"})]})})]})}),(0,r.jsx)(e2,{visible:k,possibleUIRoles:T,onCancel:L,user:N,onSubmit:R}),A&&(0,r.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,r.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,r.jsx)("div",{className:"sm:flex sm:items-start",children:(0,r.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete User"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this user?"}),(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900 mt-2",children:["User ID: ",E]})]})]})})}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,r.jsx)(y.Z,{onClick:F,color:"red",className:"ml-2",children:"Delete"}),(0,r.jsx)(y.Z,{onClick:()=>{P(!1),O(null)},children:"Cancel"})]})]})]})})]}),function(){if(!u)return null;let e=(null==c?void 0:c.total_pages)||0,l=e=>{h([]),_(e)};return(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:["Showing Page ",j," of ",e]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-l focus:outline-none",disabled:1===j,onClick:()=>l(j-1),children:"← Prev"}),(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-r focus:outline-none",disabled:j===e,onClick:()=>l(j+1),children:"Next →"})]})]})}()]})}):(0,r.jsx)("div",{children:"Loading..."})},e5=e=>{var l,s;let{visible:t,onCancel:a,onSubmit:i,initialData:o,mode:d}=e,[c]=C.Z.useForm();(0,n.useEffect)(()=>{o&&c.setFieldsValue({user_email:o.user_email,user_id:o.user_id,role:o.role})},[o,c]);let m=async e=>{try{let l={user_email:e.user_email,user_id:e.user_id,role:e.role};i(l),c.resetFields(),I.ZP.success("Successfully ".concat("add"===d?"added":"updated"," team member"))}catch(e){I.ZP.error("Failed to submit form"),console.error("Form submission error:",e)}};return(0,r.jsx)(A.Z,{title:"add"===d?"Add Team Member":"Edit Team Member",visible:t,width:800,footer:null,onCancel:a,children:(0,r.jsxs)(C.Z,{form:c,onFinish:m,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:{user_email:(null==o?void 0:null===(l=o.user_email)||void 0===l?void 0:l.trim())||"",user_id:(null==o?void 0:null===(s=o.user_id)||void 0===s?void 0:s.trim())||"",role:(null==o?void 0:o.role)||"user"},children:[(0,r.jsx)(C.Z.Item,{label:"Email",name:"user_email",className:"mb-4",rules:[{type:"email",message:"Please enter a valid email!"}],children:(0,r.jsx)(O.Z,{name:"user_email",className:"px-3 py-2 border rounded-md w-full",placeholder:"user@example.com",onChange:e=>{e.target.value=e.target.value.trim()}})}),(0,r.jsx)("div",{className:"text-center mb-4",children:(0,r.jsx)(w.Z,{children:"OR"})}),(0,r.jsx)(C.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,r.jsx)(O.Z,{name:"user_id",className:"px-3 py-2 border rounded-md w-full",placeholder:"user_123",onChange:e=>{e.target.value=e.target.value.trim()}})}),(0,r.jsx)(C.Z.Item,{label:"Member Role",name:"role",className:"mb-4",rules:[{required:!0,message:"Please select a role!"}],children:(0,r.jsxs)(N.default,{defaultValue:"user",children:[(0,r.jsx)(N.default.Option,{value:"admin",children:"admin"}),(0,r.jsx)(N.default.Option,{value:"user",children:"user"})]})}),(0,r.jsxs)("div",{style:{textAlign:"right",marginTop:"20px"},children:[(0,r.jsx)(T.ZP,{onClick:a,style:{marginRight:8},children:"Cancel"}),(0,r.jsx)(T.ZP,{type:"primary",htmlType:"submit",children:"add"===d?"Add Member":"Save Changes"})]})]})})},e8=s(7310),e3=s.n(e8),e6=e=>{let{isVisible:l,onCancel:s,onSubmit:t,accessToken:a}=e,[i]=C.Z.useForm(),[o,d]=(0,n.useState)([]),[c,m]=(0,n.useState)(!1),[u,h]=(0,n.useState)("user_email"),x=async(e,l)=>{if(!e){d([]);return}m(!0);try{let s=new URLSearchParams;if(s.append(l,e),null==a)return;let t=(await (0,p.u5)(a,s)).map(e=>({label:"user_email"===l?"".concat(e.user_email):"".concat(e.user_id),value:"user_email"===l?e.user_email:e.user_id,user:e}));d(t)}catch(e){console.error("Error fetching users:",e)}finally{m(!1)}},g=(0,n.useCallback)(e3()((e,l)=>x(e,l),300),[]),j=(e,l)=>{h(l),g(e,l)},f=(e,l)=>{let s=l.user;i.setFieldsValue({user_email:s.user_email,user_id:s.user_id,role:i.getFieldValue("role")})};return(0,r.jsx)(A.Z,{title:"Add Team Member",open:l,onCancel:()=>{i.resetFields(),d([]),s()},footer:null,width:800,children:(0,r.jsxs)(C.Z,{form:i,onFinish:t,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:{role:"user"},children:[(0,r.jsx)(C.Z.Item,{label:"Email",name:"user_email",className:"mb-4",children:(0,r.jsx)(N.default,{showSearch:!0,className:"w-full",placeholder:"Search by email",filterOption:!1,onSearch:e=>j(e,"user_email"),onSelect:(e,l)=>f(e,l),options:"user_email"===u?o:[],loading:c,allowClear:!0})}),(0,r.jsx)("div",{className:"text-center mb-4",children:"OR"}),(0,r.jsx)(C.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,r.jsx)(N.default,{showSearch:!0,className:"w-full",placeholder:"Search by user ID",filterOption:!1,onSearch:e=>j(e,"user_id"),onSelect:(e,l)=>f(e,l),options:"user_id"===u?o:[],loading:c,allowClear:!0})}),(0,r.jsx)(C.Z.Item,{label:"Member Role",name:"role",className:"mb-4",children:(0,r.jsxs)(N.default,{defaultValue:"user",children:[(0,r.jsx)(N.default.Option,{value:"admin",children:"admin"}),(0,r.jsx)(N.default.Option,{value:"user",children:"user"})]})}),(0,r.jsx)("div",{className:"text-right mt-4",children:(0,r.jsx)(T.ZP,{type:"primary",htmlType:"submit",children:"Add Member"})})]})})},e7=e=>{let{teamId:l,accessToken:s,currentAliases:t,availableModels:a,onUpdate:i}=e,[o,d]=(0,n.useState)(!1),[c]=C.Z.useForm(),m=async e=>{try{if(!s)return;let a={...t,[e.alias_name]:e.original_model};await (0,p.Gh)(s,{team_id:l,model_aliases:a}),I.ZP.success("Model alias created successfully"),d(!1),c.resetFields(),t[e.alias_name]=e.original_model}catch(e){I.ZP.error("Failed to create model alias"),console.error("Error creating model alias:",e)}};return(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)(k.Z,{children:"Team Aliases"}),(0,r.jsx)(w.Z,{className:"text-gray-600 mb-4",children:"Allow a team to use an alias that points to a specific model deployment."}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex space-x-4 text-gray-600",children:[(0,r.jsx)("div",{className:"w-64",children:"ALIAS"}),(0,r.jsx)("div",{children:"POINTS TO"})]})}),(0,r.jsx)(y.Z,{size:"md",variant:"primary",onClick:()=>d(!0),children:"Create Model Alias"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[Object.entries(t).map((e,l)=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"flex space-x-4 border-t border-gray-200 pt-4",children:[(0,r.jsx)("div",{className:"w-64",children:(0,r.jsx)("span",{className:"bg-gray-100 px-2 py-1 rounded font-mono text-sm text-gray-700",children:s})}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"bg-gray-100 px-2 py-1 rounded font-mono text-sm text-gray-700",children:t})})]},l)}),0===Object.keys(t).length&&(0,r.jsx)("div",{className:"text-gray-500 text-center py-4 border-t border-gray-200",children:"No model aliases configured"})]})]}),(0,r.jsx)(A.Z,{title:"Create Model Alias",open:o,onCancel:()=>{d(!1),c.resetFields()},footer:null,width:500,children:(0,r.jsxs)(C.Z,{form:c,onFinish:m,layout:"vertical",className:"mt-4",children:[(0,r.jsx)(C.Z.Item,{label:"Alias Name",name:"alias_name",rules:[{required:!0,message:"Please enter an alias name"}],children:(0,r.jsx)(O.Z,{placeholder:"Enter the model alias (e.g., gpt-4o)",type:""})}),(0,r.jsx)(C.Z.Item,{label:"Points To",name:"original_model",rules:[{required:!0,message:"Please select a model"}],children:(0,r.jsx)(N.default,{placeholder:"Select model version",className:"w-full font-mono",showSearch:!0,optionFilterProp:"children",children:a.map(e=>(0,r.jsx)(N.default.Option,{value:e,className:"font-mono",children:e},e))})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,r.jsx)(y.Z,{size:"md",variant:"secondary",onClick:()=>{d(!1),c.resetFields()},className:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)(y.Z,{size:"md",variant:"secondary",type:"submit",children:"Create Alias"})]})]})})]})},e9=e=>{var l,s,t;let{teamId:a,onClose:i,accessToken:o,is_team_admin:d,is_proxy_admin:c,userModels:m,editTeam:u}=e,[h,x]=(0,n.useState)(null),[g,j]=(0,n.useState)(!0),[_,Z]=(0,n.useState)(!1),[b]=C.Z.useForm(),[v,S]=(0,n.useState)(!1),[A,P]=(0,n.useState)(null),[M,F]=(0,n.useState)(!1);console.log("userModels in team info",m);let z=d||c,U=async()=>{try{if(j(!0),!o)return;let e=await (0,p.Xm)(o,a);x(e)}catch(e){I.ZP.error("Failed to load team information"),console.error("Error fetching team info:",e)}finally{j(!1)}};(0,n.useEffect)(()=>{U()},[a,o]);let V=async e=>{try{if(null==o)return;let l={user_email:e.user_email,user_id:e.user_id,role:e.role};await (0,p.cu)(o,a,l),I.ZP.success("Team member added successfully"),Z(!1),b.resetFields(),U()}catch(e){I.ZP.error("Failed to add team member"),console.error("Error adding team member:",e)}},q=async e=>{try{if(null==o)return;let l={user_email:e.user_email,user_id:e.user_id,role:e.role};await (0,p.sN)(o,a,l),I.ZP.success("Team member updated successfully"),S(!1),U()}catch(e){I.ZP.error("Failed to update team member"),console.error("Error updating team member:",e)}},B=async e=>{try{if(null==o)return;await (0,p.Lp)(o,a,e),I.ZP.success("Team member removed successfully"),U()}catch(e){I.ZP.error("Failed to remove team member"),console.error("Error removing team member:",e)}},W=async e=>{try{var l;if(!o)return;let s={team_id:a,team_alias:e.team_alias,models:e.models,tpm_limit:e.tpm_limit,rpm_limit:e.rpm_limit,max_budget:e.max_budget,budget_duration:e.budget_duration,metadata:{...null==h?void 0:null===(l=h.team_info)||void 0===l?void 0:l.metadata,guardrails:e.guardrails||[]}};await (0,p.Gh)(o,s),I.ZP.success("Team settings updated successfully"),F(!1),U()}catch(e){I.ZP.error("Failed to update team settings"),console.error("Error updating team:",e)}};if(g)return(0,r.jsx)("div",{className:"p-4",children:"Loading..."});if(!(null==h?void 0:h.team_info))return(0,r.jsx)("div",{className:"p-4",children:"Team not found"});let{team_info:et}=h;return(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(T.ZP,{onClick:i,className:"mb-4",children:"← Back"}),(0,r.jsx)(k.Z,{children:et.team_alias}),(0,r.jsx)(w.Z,{className:"text-gray-500 font-mono",children:et.team_id})]})}),(0,r.jsxs)(eD.Z,{defaultIndex:u?2:0,children:[(0,r.jsxs)(eF.Z,{className:"mb-4",children:[(0,r.jsx)(eM.Z,{children:"Overview"}),(0,r.jsx)(eM.Z,{children:"Members"}),(0,r.jsx)(eM.Z,{children:"Settings"})]}),(0,r.jsxs)(eR.Z,{children:[(0,r.jsx)(eL.Z,{children:(0,r.jsxs)(f.Z,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(w.Z,{children:"Budget Status"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)(k.Z,{children:["$",et.spend.toFixed(6)]}),(0,r.jsxs)(w.Z,{children:["of ",null===et.max_budget?"Unlimited":"$".concat(et.max_budget)]}),et.budget_duration&&(0,r.jsxs)(w.Z,{className:"text-gray-500",children:["Reset: ",et.budget_duration]})]})]}),(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(w.Z,{children:"Rate Limits"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)(w.Z,{children:["TPM: ",et.tpm_limit||"Unlimited"]}),(0,r.jsxs)(w.Z,{children:["RPM: ",et.rpm_limit||"Unlimited"]}),et.max_parallel_requests&&(0,r.jsxs)(w.Z,{children:["Max Parallel Requests: ",et.max_parallel_requests]})]})]}),(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(w.Z,{children:"Models"}),(0,r.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:et.models.map((e,l)=>(0,r.jsx)(G.Z,{color:"red",children:e},l))})]})]})}),(0,r.jsx)(eL.Z,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(J.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh]",children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"User ID"}),(0,r.jsx)(el.Z,{children:"User Email"}),(0,r.jsx)(el.Z,{children:"Role"}),(0,r.jsx)(el.Z,{})]})}),(0,r.jsx)(X.Z,{children:h.team_info.members_with_roles.map((e,l)=>(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{className:"font-mono",children:e.user_id})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{className:"font-mono",children:e.user_email})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{className:"font-mono",children:e.role})}),(0,r.jsx)(Q.Z,{children:d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y.Z,{icon:K.Z,size:"sm",onClick:()=>{P(e),S(!0)}}),(0,r.jsx)(Y.Z,{onClick:()=>B(e),icon:H.Z,size:"sm"})]})})]},l))})]})}),(0,r.jsx)(y.Z,{onClick:()=>Z(!0),children:"Add Member"})]})}),(0,r.jsxs)(eL.Z,{children:[(0,r.jsxs)(J.Z,{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)(k.Z,{children:"Team Settings"}),z&&!M&&(0,r.jsx)(y.Z,{onClick:()=>F(!0),children:"Edit Settings"})]}),M?(0,r.jsxs)(C.Z,{form:b,onFinish:W,initialValues:{...et,team_alias:et.team_alias,models:et.models,tpm_limit:et.tpm_limit,rpm_limit:et.rpm_limit,max_budget:et.max_budget,budget_duration:et.budget_duration,guardrails:(null===(l=et.metadata)||void 0===l?void 0:l.guardrails)||[]},layout:"vertical",children:[(0,r.jsx)(C.Z.Item,{label:"Team Name",name:"team_alias",rules:[{required:!0,message:"Please input a team name"}],children:(0,r.jsx)(O.Z,{type:""})}),(0,r.jsx)(C.Z.Item,{label:"Models",name:"models",children:(0,r.jsxs)(N.default,{mode:"multiple",placeholder:"Select models",children:[(0,r.jsx)(N.default.Option,{value:"all-proxy-models",children:"All Proxy Models"},"all-proxy-models"),m.map(e=>(0,r.jsx)(N.default.Option,{value:e,children:D(e)},e))]})}),(0,r.jsx)(C.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,r.jsx)(E.Z,{step:.01,precision:2,style:{width:"100%"}})}),(0,r.jsx)(C.Z.Item,{label:"Reset Budget",name:"budget_duration",children:(0,r.jsxs)(N.default,{placeholder:"n/a",children:[(0,r.jsx)(N.default.Option,{value:"24h",children:"daily"}),(0,r.jsx)(N.default.Option,{value:"7d",children:"weekly"}),(0,r.jsx)(N.default.Option,{value:"30d",children:"monthly"})]})}),(0,r.jsx)(C.Z.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,r.jsx)(E.Z,{step:1,style:{width:"100%"}})}),(0,r.jsx)(C.Z.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,r.jsx)(E.Z,{step:1,style:{width:"100%"}})}),(0,r.jsx)(C.Z.Item,{label:(0,r.jsxs)("span",{children:["Guardrails"," ",(0,r.jsx)(R.Z,{title:"Setup your first guardrail",children:(0,r.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(L.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",help:"Select existing guardrails or enter new ones",children:(0,r.jsx)(N.default,{mode:"tags",placeholder:"Select or enter guardrails"})}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,r.jsx)(T.ZP,{onClick:()=>F(!1),children:"Cancel"}),(0,r.jsx)(y.Z,{children:"Save Changes"})]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(w.Z,{className:"font-medium",children:"Team Name"}),(0,r.jsx)("div",{children:et.team_alias})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(w.Z,{className:"font-medium",children:"Team ID"}),(0,r.jsx)("div",{className:"font-mono",children:et.team_id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(w.Z,{className:"font-medium",children:"Created At"}),(0,r.jsx)("div",{children:new Date(et.created_at).toLocaleString()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(w.Z,{className:"font-medium",children:"Models"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:et.models.map((e,l)=>(0,r.jsx)(G.Z,{color:"red",children:e},l))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(w.Z,{className:"font-medium",children:"Rate Limits"}),(0,r.jsxs)("div",{children:["TPM: ",et.tpm_limit||"Unlimited"]}),(0,r.jsxs)("div",{children:["RPM: ",et.rpm_limit||"Unlimited"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(w.Z,{className:"font-medium",children:"Budget"}),(0,r.jsxs)("div",{children:["Max: ",null!==et.max_budget?"$".concat(et.max_budget):"No Limit"]}),(0,r.jsxs)("div",{children:["Reset: ",et.budget_duration||"Never"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(w.Z,{className:"font-medium",children:"Status"}),(0,r.jsx)(G.Z,{color:et.blocked?"red":"green",children:et.blocked?"Blocked":"Active"})]})]})]}),(0,r.jsx)(e7,{teamId:a,accessToken:o,currentAliases:(null==h?void 0:null===(t=h.team_info)||void 0===t?void 0:null===(s=t.litellm_model_table)||void 0===s?void 0:s.model_aliases)||{},availableModels:m,onUpdate:U})]})]})]}),(0,r.jsx)(e5,{visible:v,onCancel:()=>S(!1),onSubmit:q,initialData:A,mode:"edit"}),(0,r.jsx)(e6,{isVisible:_,onCancel:()=>Z(!1),onSubmit:V,accessToken:o})]})},le=e=>{let{accessToken:l,userID:s}=e,[t,a]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{if(l&&s)try{let e=await (0,p.a6)(l);a(e)}catch(e){console.error("Error fetching available teams:",e)}})()},[l,s]);let i=async e=>{if(l&&s)try{await (0,p.cu)(l,e,{user_id:s,role:"user"}),I.ZP.success("Successfully joined team"),a(l=>l.filter(l=>l.team_id!==e))}catch(e){console.error("Error joining team:",e),I.ZP.error("Failed to join team")}};return(0,r.jsx)(J.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh]",children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Team Name"}),(0,r.jsx)(el.Z,{children:"Description"}),(0,r.jsx)(el.Z,{children:"Members"}),(0,r.jsx)(el.Z,{children:"Models"}),(0,r.jsx)(el.Z,{children:"Actions"})]})}),(0,r.jsxs)(X.Z,{children:[t.map(e=>(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{children:e.team_alias})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{children:e.description||"No description available"})}),(0,r.jsx)(Q.Z,{children:(0,r.jsxs)(w.Z,{children:[e.members_with_roles.length," members"]})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)("div",{className:"flex flex-col",children:e.models&&0!==e.models.length?e.models.map((e,l)=>(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"blue",children:(0,r.jsx)(w.Z,{children:e.length>30?"".concat(e.slice(0,30),"..."):e})},l)):(0,r.jsx)(G.Z,{size:"xs",color:"red",children:(0,r.jsx)(w.Z,{children:"All Proxy Models"})})})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(y.Z,{size:"xs",variant:"secondary",onClick:()=>i(e.team_id),children:"Join Team"})})]},e.team_id)),0===t.length&&(0,r.jsx)(es.Z,{children:(0,r.jsx)(Q.Z,{colSpan:5,className:"text-center",children:(0,r.jsx)(w.Z,{children:"No available teams to join"})})})]})]})})};console.log=function(){};var ll=e=>{let{teams:l,searchParams:s,accessToken:t,setTeams:a,userID:i,userRole:o,currentOrg:d}=e,[c,m]=(0,n.useState)("");(0,n.useEffect)(()=>{console.log("inside useeffect - ".concat(l)),null===l&&t&&g(t,i,o,d,a)},[l]),(0,n.useEffect)(()=>{console.log("inside useeffect - ".concat(c)),t&&g(t,i,o,d,a),ew()},[c]);let[u]=C.Z.useForm(),[h]=C.Z.useForm(),{Title:x,Paragraph:k}=eh.default,[S,P]=(0,n.useState)(""),[O,F]=(0,n.useState)(!1),[z,U]=(0,n.useState)(null),[V,q]=(0,n.useState)(null),[B,et]=(0,n.useState)(!1),[ea,er]=(0,n.useState)(!1),[en,ei]=(0,n.useState)(!1),[eo,ed]=(0,n.useState)(!1),[ec,em]=(0,n.useState)([]),[eu,ex]=(0,n.useState)(!1),[ep,eg]=(0,n.useState)(null),[ej,ef]=(0,n.useState)({}),[ey,e_]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{if(null==t)return;let e=(await (0,p.t3)(t)).guardrails.map(e=>e.guardrail_name);e_(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})()},[t]);let eZ=async e=>{eg(e),ex(!0)},eb=async()=>{if(null!=ep&&null!=l&&null!=t){try{await (0,p.rs)(t,ep);let e=l.filter(e=>e.team_id!==ep);a(e)}catch(e){console.error("Error deleting the team:",e)}ex(!1),eg(null)}};(0,n.useEffect)(()=>{let e=async()=>{try{let e;if(null===i||null===o||null===t||null===l)return;let s={};e="Admin"!=o&&"Admin Viewer"!=o?await (0,p.It)(t,(null==d?void 0:d.organization_id)||p.lO,i):await (0,p.It)(t,(null==d?void 0:d.organization_id)||p.lO);for(let l=0;l<e.length;l++){let t=e[l],a=t.team_id;null!==t&&(s={...s,[a]:t})}ef(s)}catch(e){console.error("Error fetching team info:",e)}};(async()=>{try{if(null===i||null===o||null===t)return;let e=await M(i,o,t);e&&em(e)}catch(e){console.error("Error fetching user models:",e)}})(),e()},[t,i,o,l]);let ev=async e=>{try{if(console.log("formValues: ".concat(JSON.stringify(e))),null!=t){var s;let r=null==e?void 0:e.team_alias,n=null!==(s=null==l?void 0:l.map(e=>e.team_alias))&&void 0!==s?s:[],i=(null==e?void 0:e.organization_id)||(null==d?void 0:d.organization_id);if(""===i||"string"!=typeof i?e.organization_id=null:e.organization_id=i.trim(),e.metadata={...e.guardrails?{guardrails:e.guardrails}:{}},delete e.guardrails,n.includes(r))throw Error("Team alias ".concat(r," already exists, please pick another alias"));I.ZP.info("Creating Team");let o=await (0,p.hT)(t,e);null!==l?a([...l,o]):a([o]),console.log("response for team create call: ".concat(o)),I.ZP.success("Team created"),er(!1)}}catch(e){console.error("Error creating the team:",e),I.ZP.error("Error creating the team: "+e,20)}},ew=()=>{m(new Date().toLocaleString())};return(0,r.jsx)("div",{className:"w-full mx-4",children:V?(0,r.jsx)(e9,{teamId:V,onClose:()=>{q(null),et(!1)},accessToken:t,is_team_admin:(e=>{if(null==e||null==e.members_with_roles)return!1;for(let l=0;l<e.members_with_roles.length;l++){let s=e.members_with_roles[l];if(s.user_id==i&&"admin"==s.role)return!0}return!1})(null==l?void 0:l.find(e=>e.team_id===V)),is_proxy_admin:"Admin"==o,userModels:ec,editTeam:B}):(0,r.jsxs)(eD.Z,{className:"gap-2 p-8 h-[75vh] w-full mt-2",children:[(0,r.jsxs)(eF.Z,{className:"flex justify-between mt-2 w-full items-center",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(eM.Z,{children:"Your Teams"}),(0,r.jsx)(eM.Z,{children:"Available Teams"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[c&&(0,r.jsxs)(w.Z,{children:["Last Refreshed: ",c]}),(0,r.jsx)(Y.Z,{icon:W.Z,variant:"shadow",size:"xs",className:"self-center",onClick:ew})]})]}),(0,r.jsxs)(eR.Z,{children:[(0,r.jsxs)(eL.Z,{children:[(0,r.jsxs)(w.Z,{children:["Click on “Team ID” to view team details ",(0,r.jsx)("b",{children:"and"})," manage team members."]}),(0,r.jsxs)(f.Z,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:[(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsxs)(J.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh]",children:[(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Team Name"}),(0,r.jsx)(el.Z,{children:"Team ID"}),(0,r.jsx)(el.Z,{children:"Created"}),(0,r.jsx)(el.Z,{children:"Spend (USD)"}),(0,r.jsx)(el.Z,{children:"Budget (USD)"}),(0,r.jsx)(el.Z,{children:"Models"}),(0,r.jsx)(el.Z,{children:"TPM / RPM Limits"}),(0,r.jsx)(el.Z,{children:"Info"})]})}),(0,r.jsx)(X.Z,{children:l&&l.length>0?l.filter(e=>{let l=d?d.organization_id:null;return e.organization_id===l}).sort((e,l)=>new Date(l.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.team_alias}),(0,r.jsx)(es.Z,{children:(0,r.jsx)(Q.Z,{children:(0,r.jsx)("div",{className:"overflow-hidden",children:(0,r.jsx)(R.Z,{title:e.team_id,children:(0,r.jsxs)(y.Z,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>{q(e.team_id)},children:[e.team_id.slice(0,7),"..."]})})})})}),(0,r.jsx)(Q.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,r.jsx)(Q.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.spend}),(0,r.jsx)(Q.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:null!==e.max_budget&&void 0!==e.max_budget?e.max_budget:"No limit"}),(0,r.jsx)(Q.Z,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},children:Array.isArray(e.models)?(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:0===e.models.length?(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"red",children:(0,r.jsx)(w.Z,{children:"All Proxy Models"})}):e.models.map((e,l)=>"all-proxy-models"===e?(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"red",children:(0,r.jsx)(w.Z,{children:"All Proxy Models"})},l):(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"blue",children:(0,r.jsx)(w.Z,{children:e.length>30?"".concat(D(e).slice(0,30),"..."):D(e)})},l))}):null}),(0,r.jsx)(Q.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:(0,r.jsxs)(w.Z,{children:["TPM: ",e.tpm_limit?e.tpm_limit:"Unlimited"," ",(0,r.jsx)("br",{}),"RPM:"," ",e.rpm_limit?e.rpm_limit:"Unlimited"]})}),(0,r.jsxs)(Q.Z,{children:[(0,r.jsxs)(w.Z,{children:[ej&&e.team_id&&ej[e.team_id]&&ej[e.team_id].keys&&ej[e.team_id].keys.length," ","Keys"]}),(0,r.jsxs)(w.Z,{children:[ej&&e.team_id&&ej[e.team_id]&&ej[e.team_id].members_with_roles&&ej[e.team_id].members_with_roles.length," ","Members"]})]}),(0,r.jsx)(Q.Z,{children:"Admin"==o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y.Z,{icon:K.Z,size:"sm",onClick:()=>{q(e.team_id),et(!0)}}),(0,r.jsx)(Y.Z,{onClick:()=>eZ(e.team_id),icon:H.Z,size:"sm"})]}):null})]},e.team_id)):null})]}),eu&&(0,r.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,r.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,r.jsx)("div",{className:"sm:flex sm:items-start",children:(0,r.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Team"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this team ?"})})]})})}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,r.jsx)(y.Z,{onClick:eb,color:"red",className:"ml-2",children:"Delete"}),(0,r.jsx)(y.Z,{onClick:()=>{ex(!1),eg(null)},children:"Cancel"})]})]})]})})]})}),"Admin"==o||"Org Admin"==o?(0,r.jsxs)(j.Z,{numColSpan:1,children:[(0,r.jsx)(y.Z,{className:"mx-auto",onClick:()=>er(!0),children:"+ Create New Team"}),(0,r.jsx)(A.Z,{title:"Create Team",visible:ea,width:800,footer:null,onOk:()=>{er(!1),u.resetFields()},onCancel:()=>{er(!1),u.resetFields()},children:(0,r.jsxs)(C.Z,{form:u,onFinish:ev,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"Team Name",name:"team_alias",rules:[{required:!0,message:"Please input a team name"}],children:(0,r.jsx)(_.Z,{placeholder:""})}),(0,r.jsx)(C.Z.Item,{label:"Models",name:"models",children:(0,r.jsxs)(N.default,{mode:"multiple",placeholder:"Select models",style:{width:"100%"},children:[(0,r.jsx)(N.default.Option,{value:"all-proxy-models",children:"All Proxy Models"},"all-proxy-models"),ec.map(e=>(0,r.jsx)(N.default.Option,{value:e,children:D(e)},e))]})}),(0,r.jsx)(C.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,r.jsx)(E.Z,{step:.01,precision:2,width:200})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,r.jsxs)(N.default,{defaultValue:null,placeholder:"n/a",children:[(0,r.jsx)(N.default.Option,{value:"24h",children:"daily"}),(0,r.jsx)(N.default.Option,{value:"7d",children:"weekly"}),(0,r.jsx)(N.default.Option,{value:"30d",children:"monthly"})]})}),(0,r.jsx)(C.Z.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,r.jsx)(E.Z,{step:1,width:400})}),(0,r.jsx)(C.Z.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,r.jsx)(E.Z,{step:1,width:400})}),(0,r.jsxs)(Z.Z,{className:"mt-20 mb-8",children:[(0,r.jsx)(v.Z,{children:(0,r.jsx)("b",{children:"Additional Settings"})}),(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(C.Z.Item,{label:"Team ID",name:"team_id",help:"ID of the team you want to create. If not provided, it will be generated automatically.",children:(0,r.jsx)(_.Z,{onChange:e=>{e.target.value=e.target.value.trim()}})}),(0,r.jsx)(C.Z.Item,{label:"Organization ID",name:"organization_id",help:"Assign team to an organization. Found in the 'Organization' tab.",children:(0,r.jsx)(_.Z,{placeholder:"",onChange:e=>{e.target.value=e.target.value.trim()}})}),(0,r.jsx)(C.Z.Item,{label:(0,r.jsxs)("span",{children:["Guardrails"," ",(0,r.jsx)(R.Z,{title:"Setup your first guardrail",children:(0,r.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,r.jsx)(L.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-8",help:"Select existing guardrails or enter new ones",children:(0,r.jsx)(N.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter guardrails",options:ey.map(e=>({value:e,label:e}))})})]})]})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Create Team"})})]})})]}):null]})]}),(0,r.jsx)(eL.Z,{children:(0,r.jsx)(le,{accessToken:t,userID:i})})]})]})})};let ls=async(e,l,s)=>{if(null!=l)try{I.ZP.info("Creating Organization"),console.log("formValues: "+JSON.stringify(e));let t=await (0,p.H1)(l,e);console.log("response for organization create call: ".concat(t)),I.ZP.success("Organization created"),sessionStorage.removeItem("organizations"),s(!1)}catch(e){console.error("Error creating the organization:",e),I.ZP.error("Error creating the organization: "+e,20)}};var lt=e=>{let{title:l="Create Organization",onCancel:s,accessToken:t,availableModels:a=[],initialValues:i={},submitButtonText:o="Create",modelSelectionType:d="multiple"}=e,[c]=C.Z.useForm(),[m,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)({name:i.name||"",models:i.models||[],maxBudget:i.maxBudget||null,budgetDuration:i.budgetDuration||null,tpmLimit:i.tpmLimit||null,rpmLimit:i.rpmLimit||null});console.log("availableModels: ".concat(a));let p=async e=>{null!=t&&(await ls(e,t,u),u(!1))};return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)(y.Z,{onClick:()=>u(!0),className:"mx-auto",type:"button",children:["+ Create New ",l]}),(0,r.jsx)(A.Z,{title:"Create ".concat(l),visible:m,width:800,footer:null,onCancel:()=>{u(!1),s&&s()},children:(0,r.jsxs)(C.Z,{form:c,onFinish:p,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"".concat(l," Name"),name:"organization_alias",rules:[{required:!0,message:"Please input a ".concat(l," name")}],children:(0,r.jsx)(_.Z,{placeholder:""})}),(0,r.jsx)(C.Z.Item,{label:"Models",name:"models",children:(0,r.jsxs)(N.default,{mode:"multiple",placeholder:"Select models",style:{width:"100%"},children:[(0,r.jsx)(N.default.Option,{value:"all-proxy-models",children:"All Proxy Models"},"all-proxy-models"),a.map(e=>(0,r.jsx)(N.default.Option,{value:e,children:e},e))]})}),(0,r.jsx)(C.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,r.jsx)(E.Z,{step:.01,precision:2,width:200})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,r.jsxs)(N.default,{defaultValue:null,placeholder:"n/a",children:[(0,r.jsx)(N.default.Option,{value:"24h",children:"daily"}),(0,r.jsx)(N.default.Option,{value:"7d",children:"weekly"}),(0,r.jsx)(N.default.Option,{value:"30d",children:"monthly"})]})}),(0,r.jsx)(C.Z.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,r.jsx)(E.Z,{step:1,width:400})}),(0,r.jsx)(C.Z.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,r.jsx)(E.Z,{step:1,width:400})})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:o})})]})})]})};let la=(e,l)=>{for(let s=0;s<e.members_with_roles.length;s++){let t=e.members_with_roles[s];if(t.user_id==l&&"admin"==t.role)return!0}return!1};var lr=e=>{let{userRole:l,userID:s,selectedOrganization:t,onMemberAdd:a}=e,[i,o]=n.useState(!1),[d]=C.Z.useForm();return(0,r.jsxs)(j.Z,{numColSpan:1,children:["Admin"===l||t&&la(t,s)?(0,r.jsx)(y.Z,{className:"mx-auto mb-5",onClick:()=>o(!0),children:"+ Add member"}):null,(0,r.jsxs)(A.Z,{title:"Add member",visible:i,width:800,footer:null,onOk:()=>{d.submit()},onCancel:()=>{d.resetFields(),o(!1)},children:[(0,r.jsx)(w.Z,{className:"mb-2",children:"User must exist in proxy. Get User ID from 'Users' tab."}),(0,r.jsxs)(C.Z,{form:d,onFinish:a,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:{role:"internal_user"},children:[(0,r.jsx)(C.Z.Item,{label:"Email",name:"user_email",className:"mb-4",children:(0,r.jsx)(O.Z,{name:"user_email",className:"px-3 py-2 border rounded-md w-full"})}),(0,r.jsx)("div",{className:"text-center mb-4",children:"OR"}),(0,r.jsx)(C.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,r.jsx)(O.Z,{name:"user_id",className:"px-3 py-2 border rounded-md w-full"})}),(0,r.jsx)(C.Z.Item,{label:"Member Role",name:"role",className:"mb-4",children:(0,r.jsxs)(N.default,{defaultValue:"user",children:[(0,r.jsx)(N.default.Option,{value:"org_admin",children:(0,r.jsxs)("div",{className:"flex",children:["Org Admin"," ",(0,r.jsx)("p",{className:"ml-2",style:{color:"gray",fontSize:"12px"},children:"Can add and remove members, and change their roles."})]})}),(0,r.jsx)(N.default.Option,{value:"internal_user",children:(0,r.jsxs)("div",{className:"flex",children:["Internal User"," ",(0,r.jsx)("p",{className:"ml-2",style:{color:"gray",fontSize:"12px"},children:"Can view/create keys for themselves within organization."})]})}),(0,r.jsx)(N.default.Option,{value:"internal_user_viewer",children:(0,r.jsxs)("div",{className:"flex",children:["Internal User Viewer"," ",(0,r.jsx)("p",{className:"ml-2",style:{color:"gray",fontSize:"12px"},children:"Can only view their keys within organization."})]})})]})}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Add member"})})]})]})]})},ln=e=>{var l;let{selectedEntity:s,onEditSubmit:t,editModalComponent:a,entityType:i}=e,[o,d]=n.useState(!1);return(0,r.jsxs)(j.Z,{numColSpan:1,children:[(0,r.jsx)(J.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh]",children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"team"===i?"Team Member":"Organization Member"}),(0,r.jsx)(el.Z,{children:"Role"})]})}),(0,r.jsx)(X.Z,{children:(null!==(l=null==s?void 0:s.members)&&void 0!==l?l:[]).map((e,l)=>(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:e.user_id}),(0,r.jsx)(Q.Z,{children:e.user_role})]},"".concat(e.user_id,"-").concat(l)))})]})}),s&&(0,r.jsx)(a,{visible:o,onCancel:()=>{d(!1)},entity:s,onSubmit:e=>{t(e),d(!1)}})]})},li=e=>{let{data:l,columns:s,actions:t,emptyMessage:a="No data available",deleteModal:n}=e,i=(e,l)=>{let s=l[e.accessor];return e.cellRenderer?e.cellRenderer(s,l):Array.isArray(s)?(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:0===s.length?(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"red",children:(0,r.jsx)(w.Z,{children:"None"})}):s.map((e,l)=>(0,r.jsx)(G.Z,{size:"xs",className:"mb-1",color:"blue",children:(0,r.jsx)(w.Z,{children:String(e).length>30?"".concat(String(e).slice(0,30),"..."):e})},l))}):(null==s?void 0:s.toString())||""};return(0,r.jsx)(J.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[40vh]",children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[s.map((e,l)=>(0,r.jsx)(el.Z,{children:e.header},l)),t&&t.length>0&&(0,r.jsx)(el.Z,{children:"Actions"})]})}),(0,r.jsx)(X.Z,{children:l&&l.length>0?l.map((e,l)=>(0,r.jsxs)(es.Z,{children:[s.map((l,s)=>(0,r.jsx)(Q.Z,{style:{maxWidth:l.width||"4px",whiteSpace:"pre-wrap",overflow:"hidden",...l.style},children:"id"===l.accessor?(0,r.jsx)(R.Z,{title:e[l.accessor],children:i(l,e)}):i(l,e)},s)),t&&t.length>0&&(0,r.jsx)(Q.Z,{children:t.map((l,s)=>{var t;return(null===(t=l.condition)||void 0===t?void 0:t.call(l,e))!==!1&&(0,r.jsx)(R.Z,{title:l.tooltip,children:(0,r.jsx)(Y.Z,{icon:l.icon,size:"sm",onClick:()=>l.onClick(e),className:"cursor-pointer mx-1"})},s)})})]},l)):(0,r.jsx)(es.Z,{children:(0,r.jsx)(Q.Z,{colSpan:s.length+(t?1:0),children:(0,r.jsx)(w.Z,{className:"text-center",children:a})})})})]})})};console.log=function(){};let lo=e=>{let{visible:l,onCancel:s,entity:t,onSubmit:a}=e;return(0,r.jsx)("div",{})},ld=e=>{let{organizations:l,userRole:s,onEdit:t,onDelete:a,isDeleteModalOpen:n,setIsDeleteModalOpen:i,selectedOrganization:o,setSelectedOrganization:d}=e,c=[...t&&"Admin"===s?[{icon:void 0,onClick:e=>t(e),condition:()=>"Admin"===s,tooltip:"Edit organization"}]:[],...a&&"Admin"===s?[{icon:void 0,onClick:e=>a(e),condition:()=>"Admin"===s,tooltip:"Delete organization"}]:[]];return(0,r.jsx)(li,{data:l,columns:[{header:"Organization Name",accessor:"organization_alias",width:"4px",style:{whiteSpace:"pre-wrap",overflow:"hidden"}},{header:"Organization ID",accessor:"organization_id",width:"4px",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.75em"}},{header:"Spend (USD)",accessor:"spend"},{header:"Budget (USD)",accessor:"max_budget",cellRenderer:e=>null!=e?e:"No limit"},{header:"Models",accessor:"models"},{header:"TPM / RPM Limits",accessor:"limits",cellRenderer:(e,l)=>(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("span",{children:["TPM: ",l.tpm_limit?l.tpm_limit:"Unlimited"]}),(0,r.jsx)("br",{}),(0,r.jsxs)("span",{children:["RPM: ",l.rpm_limit?l.rpm_limit:"Unlimited"]})]})},{header:"Info",accessor:"info",cellRenderer:(e,l)=>{var s;return(0,r.jsx)("div",{className:"space-y-1",children:(0,r.jsxs)("div",{className:"text-sm",children:[(null===(s=l.members)||void 0===s?void 0:s.length)||0," Members"]})})}}],actions:c,emptyMessage:"No organizations available",deleteModal:{isOpen:n,onConfirm:()=>{o&&a&&a(o),i(!1),d(null)},onCancel:()=>{i(!1),d(null)},title:"Delete Organization",message:"Are you sure you want to delete this organization?"}})};var lc=e=>{let{accessToken:l,userID:s,userRole:t,premiumUser:a}=e,[i,o]=(0,n.useState)([]),{Title:d,Paragraph:c}=eh.default,[m,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(null),[g,y]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!l||!s||!t)return;let e=async()=>{try{let e=(await (0,p.So)(l,s,t)).data.map(e=>e.id);console.log("available_model_names:",e),y(e)}catch(e){console.error("Error fetching user models:",e)}},r=async()=>{let e;e=await (0,p.r6)(l),console.log("givenOrganizations: ".concat(e)),o(e),sessionStorage.setItem("organizations",JSON.stringify(e))};a&&(e(),r())},[l]);let _=async e=>{if(h&&l)try{let s={user_email:e.user_email,user_id:e.user_id,role:e.role};await (0,p.vh)(l,h.organization_id,s),I.ZP.success("Member added")}catch(e){console.error("Error creating the team:",e),I.ZP.error("Error creating the organization: "+e)}};return(0,r.jsx)("div",{className:"w-full mx-4",children:(0,r.jsxs)(f.Z,{numItems:1,className:"gap-2 p-8 h-[75vh] w-full mt-2",children:[(0,r.jsxs)(j.Z,{numColSpan:1,children:[(0,r.jsx)(d,{level:4,children:"✨ All Organizations"}),(0,r.jsxs)(w.Z,{className:"mb-2",children:["This is a LiteLLM Enterprise feature, and requires a valid key to use. Get a trial key ",(0,r.jsx)("a",{href:"https://www.litellm.ai/#trial",className:"text-blue-600 hover:text-blue-800 underline",target:"_blank",rel:"noopener noreferrer",children:"here"})]}),t?ld({organizations:i,userRole:t,isDeleteModalOpen:m,setIsDeleteModalOpen:u,selectedOrganization:h,setSelectedOrganization:x}):null]}),"Admin"==t&&l&&a?(0,r.jsx)(lt,{title:"Organization",accessToken:l,availableModels:g,submitButtonText:"Create Organization"}):null,a?(0,r.jsxs)(j.Z,{numColSpan:1,children:[(0,r.jsx)(d,{level:4,children:"Organization Members"}),(0,r.jsx)(c,{children:"If you belong to multiple organizations, this setting controls which organizations' members you see."}),i&&i.length>0?(0,r.jsx)(et.Z,{children:i.map((e,l)=>(0,r.jsx)(ea.Z,{value:String(l),onClick:()=>{x(e)},children:e.organization_alias},l))}):(0,r.jsxs)(c,{children:["No team created. ",(0,r.jsx)("b",{children:"Defaulting to personal account."})]})]}):null,"Admin"==t&&s&&h&&a?(0,r.jsx)(lr,{userRole:t,userID:s,selectedOrganization:h,onMemberAdd:_}):null,"Admin"==t&&s&&h&&a?(0,r.jsx)(ln,{selectedEntity:h,onEditSubmit:()=>{},editModalComponent:lo,entityType:"organization"}):null]})})};let lm=()=>{let[e,l]=(0,n.useState)("http://localhost:4000");return(0,n.useEffect)(()=>{{let{protocol:e,host:s}=window.location;l("".concat(e,"//").concat(s))}},[]),e};var lu=e=>{let{searchParams:l,accessToken:s,showSSOBanner:t,premiumUser:a}=e,[o]=C.Z.useForm(),[d]=C.Z.useForm(),{Title:c,Paragraph:m}=eh.default,[u,h]=(0,n.useState)(""),[x,g]=(0,n.useState)(null),[_,Z]=(0,n.useState)(null),[b,v]=(0,n.useState)(!1),[k,S]=(0,n.useState)(!1),[N,P]=(0,n.useState)(!1),[E,M]=(0,n.useState)(!1),[D,F]=(0,n.useState)(!1),[L,R]=(0,n.useState)(!1),[z,U]=(0,n.useState)(!1),[V,q]=(0,n.useState)(!1),[B,W]=(0,n.useState)(!1),[H,G]=(0,n.useState)([]),[er,en]=(0,n.useState)(null);(0,i.useRouter)();let[ei,eo]=(0,n.useState)(null);console.log=function(){};let ed=lm(),ec="All IP Addresses Allowed",em=ed;em+="/fallback/login";let eu=async()=>{try{if(!0!==a){I.ZP.error("This feature is only available for premium users. Please upgrade your account.");return}if(s){let e=await (0,p.PT)(s);G(e&&e.length>0?e:[ec])}else G([ec])}catch(e){console.error("Error fetching allowed IPs:",e),I.ZP.error("Failed to fetch allowed IPs ".concat(e)),G([ec])}finally{!0===a&&U(!0)}},ex=async e=>{try{if(s){await (0,p.eH)(s,e.ip);let l=await (0,p.PT)(s);G(l),I.ZP.success("IP address added successfully")}}catch(e){console.error("Error adding IP:",e),I.ZP.error("Failed to add IP address ".concat(e))}finally{q(!1)}},ep=async e=>{en(e),W(!0)},eg=async()=>{if(er&&s)try{await (0,p.$I)(s,er);let e=await (0,p.PT)(s);G(e.length>0?e:[ec]),I.ZP.success("IP address deleted successfully")}catch(e){console.error("Error deleting IP:",e),I.ZP.error("Failed to delete IP address ".concat(e))}finally{W(!1),en(null)}},ej=()=>{R(!1)},ef=["proxy_admin","proxy_admin_viewer"];(0,n.useEffect)(()=>{(async()=>{if(null!=s){let e=[],l=await (0,p.Xd)(s,"proxy_admin_viewer");console.log("proxy admin viewer response: ",l);let t=l.users;console.log("proxy viewers response: ".concat(t)),t.forEach(l=>{e.push({user_role:l.user_role,user_id:l.user_id,user_email:l.user_email})}),console.log("proxy viewers: ".concat(t));let a=(await (0,p.Xd)(s,"proxy_admin")).users;a.forEach(l=>{e.push({user_role:l.user_role,user_id:l.user_id,user_email:l.user_email})}),console.log("proxy admins: ".concat(a)),console.log("combinedList: ".concat(e)),g(e),eo(await (0,p.lg)(s))}})()},[s]);let ey=()=>{M(!1),d.resetFields(),o.resetFields()},e_=()=>{M(!1),d.resetFields(),o.resetFields()},eZ=e=>(0,r.jsxs)(C.Z,{form:o,onFinish:e,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(C.Z.Item,{label:"Email",name:"user_email",className:"mb-8 mt-4",children:(0,r.jsx)(O.Z,{name:"user_email",className:"px-3 py-2 border rounded-md w-full"})})}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},className:"mt-4",children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Add member"})})]}),eb=(e,l,s)=>(0,r.jsxs)(C.Z,{form:o,onFinish:e,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{rules:[{required:!0,message:"Required"}],label:"User Role",name:"user_role",labelCol:{span:10},labelAlign:"left",children:(0,r.jsx)(et.Z,{value:l,children:ef.map((e,l)=>(0,r.jsx)(ea.Z,{value:e,children:e},l))})}),(0,r.jsx)(C.Z.Item,{label:"Team ID",name:"user_id",hidden:!0,initialValue:s,valuePropName:"user_id",className:"mt-8",children:(0,r.jsx)(O.Z,{value:s,disabled:!0})})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Update role"})})]}),ev=async e=>{try{if(null!=s&&null!=x){I.ZP.info("Making API Call");let l=await (0,p.pf)(s,e,null);console.log("response for team create call: ".concat(l));let t=x.findIndex(e=>(console.log("user.user_id=".concat(e.user_id,"; response.user_id=").concat(l.user_id)),e.user_id===l.user_id));console.log("foundIndex: ".concat(t)),-1==t&&(console.log("updates admin with new user"),x.push(l),g(x)),I.ZP.success("Refresh tab to see updated user role"),M(!1)}}catch(e){console.error("Error creating the key:",e)}},ew=async e=>{try{if(null!=s&&null!=x){var l;I.ZP.info("Making API Call");let t=await (0,p.pf)(s,e,"proxy_admin_viewer");console.log("response for team create call: ".concat(t));let a=(null===(l=t.data)||void 0===l?void 0:l.user_id)||t.user_id;(0,p.XO)(s,a).then(e=>{Z(e),v(!0)});let r=x.findIndex(e=>(console.log("user.user_id=".concat(e.user_id,"; response.user_id=").concat(t.user_id)),e.user_id===t.user_id));console.log("foundIndex: ".concat(r)),-1==r&&(console.log("updates admin with new user"),x.push(t),g(x)),o.resetFields(),S(!1)}}catch(e){console.error("Error creating the key:",e)}},ek=async e=>{try{if(null!=s&&null!=x){var l;I.ZP.info("Making API Call"),e.user_email,e.user_id;let t=await (0,p.pf)(s,e,"proxy_admin"),a=(null===(l=t.data)||void 0===l?void 0:l.user_id)||t.user_id;(0,p.XO)(s,a).then(e=>{Z(e),v(!0)}),console.log("response for team create call: ".concat(t));let r=x.findIndex(e=>(console.log("user.user_id=".concat(e.user_id,"; response.user_id=").concat(a)),e.user_id===t.user_id));console.log("foundIndex: ".concat(r)),-1==r&&(console.log("updates admin with new user"),x.push(t),g(x)),o.resetFields(),P(!1)}}catch(e){console.error("Error creating the key:",e)}},eS=async e=>{if(null==s)return;let l={environment_variables:{PROXY_BASE_URL:e.proxy_base_url,GOOGLE_CLIENT_ID:e.google_client_id,GOOGLE_CLIENT_SECRET:e.google_client_secret}};(0,p.K_)(s,l)};return console.log("admins: ".concat(null==x?void 0:x.length)),(0,r.jsxs)("div",{className:"w-full m-2 mt-2 p-8",children:[(0,r.jsx)(c,{level:4,children:"Admin Access "}),(0,r.jsxs)(m,{children:[t&&(0,r.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/ui#restrict-ui-access",children:"Requires SSO Setup"}),(0,r.jsx)("br",{}),(0,r.jsx)("b",{children:"Proxy Admin: "})," Can create keys, teams, users, add models, etc."," ",(0,r.jsx)("br",{}),(0,r.jsx)("b",{children:"Proxy Admin Viewer: "}),"Can just view spend. They cannot create keys, teams or grant users access to new models."," "]}),(0,r.jsxs)(f.Z,{numItems:1,className:"gap-2 p-2 w-full",children:[(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsx)(J.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh]",children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Member Name"}),(0,r.jsx)(el.Z,{children:"Role"})]})}),(0,r.jsx)(X.Z,{children:x?x.map((e,l)=>{var s;return(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:e.user_email?e.user_email:e.user_id?e.user_id:null}),(0,r.jsxs)(Q.Z,{children:[" ",(null==ei?void 0:null===(s=ei[null==e?void 0:e.user_role])||void 0===s?void 0:s.ui_label)||"-"]}),(0,r.jsxs)(Q.Z,{children:[(0,r.jsx)(Y.Z,{icon:K.Z,size:"sm",onClick:()=>M(!0)}),(0,r.jsx)(A.Z,{title:"Update role",visible:E,width:800,footer:null,onOk:ey,onCancel:e_,children:eb(ev,e.user_role,e.user_id)})]})]},l)}):null})]})})}),(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsxs)("div",{className:"flex justify-start",children:[(0,r.jsx)(y.Z,{className:"mr-4 mb-5",onClick:()=>P(!0),children:"+ Add admin"}),(0,r.jsx)(A.Z,{title:"Add admin",visible:N,width:800,footer:null,onOk:()=>{P(!1),d.resetFields(),o.resetFields()},onCancel:()=>{P(!1),v(!1),d.resetFields(),o.resetFields()},children:eZ(ek)}),(0,r.jsx)(eQ,{isInvitationLinkModalVisible:b,setIsInvitationLinkModalVisible:v,baseUrl:ed,invitationLinkData:_}),(0,r.jsx)(y.Z,{className:"mb-5",onClick:()=>S(!0),children:"+ Add viewer"}),(0,r.jsx)(A.Z,{title:"Add viewer",visible:k,width:800,footer:null,onOk:()=>{S(!1),d.resetFields(),o.resetFields()},onCancel:()=>{S(!1),d.resetFields(),o.resetFields()},children:eZ(ew)})]})})]}),(0,r.jsxs)(f.Z,{children:[(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(c,{level:4,children:" ✨ Security Settings"}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"1rem"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(y.Z,{onClick:()=>!0===a?F(!0):I.ZP.error("Only premium users can add SSO"),children:"Add SSO"})}),(0,r.jsx)("div",{children:(0,r.jsx)(y.Z,{onClick:eu,children:"Allowed IPs"})})]})]}),(0,r.jsxs)("div",{className:"flex justify-start mb-4",children:[(0,r.jsx)(A.Z,{title:"Add SSO",visible:D,width:800,footer:null,onOk:()=>{F(!1),o.resetFields()},onCancel:()=>{F(!1),o.resetFields()},children:(0,r.jsxs)(C.Z,{form:o,onFinish:e=>{ek(e),eS(e),F(!1),R(!0)},labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"Admin Email",name:"user_email",rules:[{required:!0,message:"Please enter the email of the proxy admin"}],children:(0,r.jsx)(O.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"PROXY BASE URL",name:"proxy_base_url",rules:[{required:!0,message:"Please enter the proxy base url"}],children:(0,r.jsx)(O.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"GOOGLE CLIENT ID",name:"google_client_id",rules:[{required:!0,message:"Please enter the google client id"}],children:(0,r.jsx)(O.Z.Password,{})}),(0,r.jsx)(C.Z.Item,{label:"GOOGLE CLIENT SECRET",name:"google_client_secret",rules:[{required:!0,message:"Please enter the google client secret"}],children:(0,r.jsx)(O.Z.Password,{})})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Save"})})]})}),(0,r.jsxs)(A.Z,{title:"SSO Setup Instructions",visible:L,width:800,footer:null,onOk:ej,onCancel:()=>{R(!1)},children:[(0,r.jsx)("p",{children:"Follow these steps to complete the SSO setup:"}),(0,r.jsx)(w.Z,{className:"mt-2",children:"1. DO NOT Exit this TAB"}),(0,r.jsx)(w.Z,{className:"mt-2",children:"2. Open a new tab, visit your proxy base url"}),(0,r.jsx)(w.Z,{className:"mt-2",children:"3. Confirm your SSO is configured correctly and you can login on the new Tab"}),(0,r.jsx)(w.Z,{className:"mt-2",children:"4. If Step 3 is successful, you can close this tab"}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{onClick:ej,children:"Done"})})]}),(0,r.jsx)(A.Z,{title:"Manage Allowed IP Addresses",width:800,visible:z,onCancel:()=>U(!1),footer:[(0,r.jsx)(y.Z,{className:"mx-1",onClick:()=>q(!0),children:"Add IP Address"},"add"),(0,r.jsx)(y.Z,{onClick:()=>U(!1),children:"Close"},"close")],children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"IP Address"}),(0,r.jsx)(el.Z,{className:"text-right",children:"Action"})]})}),(0,r.jsx)(X.Z,{children:H.map((e,l)=>(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:e}),(0,r.jsx)(Q.Z,{className:"text-right",children:e!==ec&&(0,r.jsx)(y.Z,{onClick:()=>ep(e),color:"red",size:"xs",children:"Delete"})})]},l))})]})}),(0,r.jsx)(A.Z,{title:"Add Allowed IP Address",visible:V,onCancel:()=>q(!1),footer:null,children:(0,r.jsxs)(C.Z,{onFinish:ex,children:[(0,r.jsx)(C.Z.Item,{name:"ip",rules:[{required:!0,message:"Please enter an IP address"}],children:(0,r.jsx)(O.Z,{placeholder:"Enter IP address"})}),(0,r.jsx)(C.Z.Item,{children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Add IP Address"})})]})}),(0,r.jsx)(A.Z,{title:"Confirm Delete",visible:B,onCancel:()=>W(!1),onOk:eg,footer:[(0,r.jsx)(y.Z,{className:"mx-1",onClick:()=>eg(),children:"Yes"},"delete"),(0,r.jsx)(y.Z,{onClick:()=>W(!1),children:"Close"},"close")],children:(0,r.jsxs)("p",{children:["Are you sure you want to delete the IP address: ",er,"?"]})})]}),(0,r.jsxs)(eK.Z,{title:"Login without SSO",color:"teal",children:["If you need to login without sso, you can access"," ",(0,r.jsxs)("a",{href:em,target:"_blank",children:[(0,r.jsx)("b",{children:em})," "]})]})]})]})},lh=s(92858),lx=s(44643),lp=e=>{let{alertingSettings:l,handleInputChange:s,handleResetField:t,handleSubmit:a,premiumUser:n}=e,[i]=C.Z.useForm();return(0,r.jsxs)(C.Z,{form:i,onFinish:()=>{console.log("INSIDE ONFINISH");let e=i.getFieldsValue(),l=Object.entries(e).every(e=>{let[l,s]=e;return"boolean"!=typeof s&&(""===s||null==s)});console.log("formData: ".concat(JSON.stringify(e),", isEmpty: ").concat(l)),l?console.log("Some form fields are empty."):a(e)},labelAlign:"left",children:[l.map((e,l)=>(0,r.jsxs)(es.Z,{children:[(0,r.jsxs)(Q.Z,{align:"center",children:[(0,r.jsx)(w.Z,{children:e.field_name}),(0,r.jsx)("p",{style:{fontSize:"0.65rem",color:"#808080",fontStyle:"italic"},className:"mt-1",children:e.field_description})]}),e.premium_field?n?(0,r.jsx)(C.Z.Item,{name:e.field_name,children:(0,r.jsx)(Q.Z,{children:"Integer"===e.field_type?(0,r.jsx)(E.Z,{step:1,value:e.field_value,onChange:l=>s(e.field_name,l)}):"Boolean"===e.field_type?(0,r.jsx)(lh.Z,{checked:e.field_value,onChange:l=>s(e.field_name,l)}):(0,r.jsx)(O.Z,{value:e.field_value,onChange:l=>s(e.field_name,l)})})}):(0,r.jsx)(Q.Z,{children:(0,r.jsx)(y.Z,{className:"flex items-center justify-center",children:(0,r.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"✨ Enterprise Feature"})})}):(0,r.jsx)(C.Z.Item,{name:e.field_name,className:"mb-0",valuePropName:"Boolean"===e.field_type?"checked":"value",children:(0,r.jsx)(Q.Z,{children:"Integer"===e.field_type?(0,r.jsx)(E.Z,{step:1,value:e.field_value,onChange:l=>s(e.field_name,l),className:"p-0"}):"Boolean"===e.field_type?(0,r.jsx)(lh.Z,{checked:e.field_value,onChange:l=>{s(e.field_name,l),i.setFieldsValue({[e.field_name]:l})}}):(0,r.jsx)(O.Z,{value:e.field_value,onChange:l=>s(e.field_name,l)})})}),(0,r.jsx)(Q.Z,{children:!0==e.stored_in_db?(0,r.jsx)(G.Z,{icon:lx.Z,className:"text-white",children:"In DB"}):!1==e.stored_in_db?(0,r.jsx)(G.Z,{className:"text-gray bg-white outline",children:"In Config"}):(0,r.jsx)(G.Z,{className:"text-gray bg-white outline",children:"Not Set"})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(Y.Z,{icon:H.Z,color:"red",onClick:()=>t(e.field_name,l),children:"Reset"})})]},l)),(0,r.jsx)("div",{children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Update Settings"})})]})},lg=e=>{let{accessToken:l,premiumUser:s}=e,[t,a]=(0,n.useState)([]);return(0,n.useEffect)(()=>{l&&(0,p.RQ)(l).then(e=>{a(e)})},[l]),(0,r.jsx)(lp,{alertingSettings:t,handleInputChange:(e,l)=>{let s=t.map(s=>s.field_name===e?{...s,field_value:l}:s);console.log("updatedSettings: ".concat(JSON.stringify(s))),a(s)},handleResetField:(e,s)=>{if(l)try{let l=t.map(l=>l.field_name===e?{...l,stored_in_db:null,field_value:l.field_default_value}:l);a(l)}catch(e){console.log("ERROR OCCURRED!")}},handleSubmit:e=>{if(!l||(console.log("formValues: ".concat(e)),null==e||void 0==e))return;let s={};t.forEach(e=>{s[e.field_name]=e.field_value});let a={...e,...s};console.log("mergedFormValues: ".concat(JSON.stringify(a)));let{slack_alerting:r,...n}=a;console.log("slack_alerting: ".concat(r,", alertingArgs: ").concat(JSON.stringify(n)));try{(0,p.jA)(l,"alerting_args",n),"boolean"==typeof r&&(!0==r?(0,p.jA)(l,"alerting",["slack"]):(0,p.jA)(l,"alerting",[])),I.ZP.success("Wait 10s for proxy to update.")}catch(e){}},premiumUser:s})},lj=s(86582);let{Title:lf,Paragraph:ly}=eh.default;console.log=function(){};var l_=e=>{let{accessToken:l,userRole:s,userID:t,premiumUser:a}=e,[i,o]=(0,n.useState)([]),[d,c]=(0,n.useState)([]),[m,u]=(0,n.useState)(!1),[h]=C.Z.useForm(),[x,g]=(0,n.useState)(null),[j,Z]=(0,n.useState)([]),[b,v]=(0,n.useState)(""),[k,S]=(0,n.useState)({}),[P,E]=(0,n.useState)([]),[O,M]=(0,n.useState)(!1),[D,F]=(0,n.useState)([]),[L,R]=(0,n.useState)(null),[z,U]=(0,n.useState)([]),[V,q]=(0,n.useState)(!1),[B,W]=(0,n.useState)(null),H=e=>{P.includes(e)?E(P.filter(l=>l!==e)):E([...P,e])},G={llm_exceptions:"LLM Exceptions",llm_too_slow:"LLM Responses Too Slow",llm_requests_hanging:"LLM Requests Hanging",budget_alerts:"Budget Alerts (API Keys, Users)",db_exceptions:"Database Exceptions (Read/Write)",daily_reports:"Weekly/Monthly Spend Reports",outage_alerts:"Outage Alerts",region_outage_alerts:"Region Outage Alerts"};(0,n.useEffect)(()=>{l&&s&&t&&(0,p.BL)(l,t,s).then(e=>{console.log("callbacks",e),o(e.callbacks),F(e.available_callbacks);let l=e.alerts;if(console.log("alerts_data",l),l&&l.length>0){let e=l[0];console.log("_alert_info",e);let s=e.variables.SLACK_WEBHOOK_URL;console.log("catch_all_webhook",s),E(e.active_alerts),v(s),S(e.alerts_to_webhook)}c(l)})},[l,s,t]);let et=e=>P&&P.includes(e),er=()=>{if(!l)return;let e={};d.filter(e=>"email"===e.name).forEach(l=>{var s;Object.entries(null!==(s=l.variables)&&void 0!==s?s:{}).forEach(l=>{let[s,t]=l,a=document.querySelector('input[name="'.concat(s,'"]'));a&&a.value&&(e[s]=null==a?void 0:a.value)})}),console.log("updatedVariables",e);try{(0,p.K_)(l,{general_settings:{alerting:["email"]},environment_variables:e})}catch(e){I.ZP.error("Failed to update alerts: "+e,20)}I.ZP.success("Email settings updated successfully")},en=async e=>{if(!l)return;let s={};Object.entries(e).forEach(e=>{let[l,t]=e;"callback"!==l&&(s[l]=t)});try{await (0,p.K_)(l,{environment_variables:s}),I.ZP.success("Callback added successfully"),u(!1),h.resetFields(),g(null)}catch(e){I.ZP.error("Failed to add callback: "+e,20)}},ei=async e=>{if(!l)return;let s=null==e?void 0:e.callback,t={};Object.entries(e).forEach(e=>{let[l,s]=e;"callback"!==l&&(t[l]=s)});try{await (0,p.K_)(l,{environment_variables:t,litellm_settings:{success_callback:[s]}}),I.ZP.success("Callback ".concat(s," added successfully")),u(!1),h.resetFields(),g(null)}catch(e){I.ZP.error("Failed to add callback: "+e,20)}},eo=e=>{console.log("inside handleSelectedCallbackChange",e),g(e.litellm_callback_name),console.log("all callbacks",D),e&&e.litellm_callback_params?(U(e.litellm_callback_params),console.log("selectedCallbackParams",z)):U([])};return l?(console.log("callbacks: ".concat(i)),(0,r.jsxs)("div",{className:"w-full mx-4",children:[(0,r.jsx)(f.Z,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,r.jsxs)(eD.Z,{children:[(0,r.jsxs)(eF.Z,{variant:"line",defaultValue:"1",children:[(0,r.jsx)(eM.Z,{value:"1",children:"Logging Callbacks"}),(0,r.jsx)(eM.Z,{value:"2",children:"Alerting Types"}),(0,r.jsx)(eM.Z,{value:"3",children:"Alerting Settings"}),(0,r.jsx)(eM.Z,{value:"4",children:"Email Alerts"})]}),(0,r.jsxs)(eR.Z,{children:[(0,r.jsxs)(eL.Z,{children:[(0,r.jsx)(lf,{level:4,children:"Active Logging Callbacks"}),(0,r.jsx)(f.Z,{numItems:2,children:(0,r.jsx)(J.Z,{className:"max-h-[50vh]",children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsx)(es.Z,{children:(0,r.jsx)(el.Z,{children:"Callback Name"})})}),(0,r.jsx)(X.Z,{children:i.map((e,s)=>(0,r.jsxs)(es.Z,{className:"flex justify-between",children:[(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{children:e.name})}),(0,r.jsx)(Q.Z,{children:(0,r.jsxs)(f.Z,{numItems:2,className:"flex justify-between",children:[(0,r.jsx)(Y.Z,{icon:K.Z,size:"sm",onClick:()=>{W(e),q(!0)}}),(0,r.jsx)(y.Z,{onClick:()=>(0,p.jE)(l,e.name),className:"ml-2",variant:"secondary",children:"Test Callback"})]})})]},s))})]})})}),(0,r.jsx)(y.Z,{className:"mt-2",onClick:()=>M(!0),children:"Add Callback"})]}),(0,r.jsx)(eL.Z,{children:(0,r.jsxs)(J.Z,{children:[(0,r.jsxs)(w.Z,{className:"my-2",children:["Alerts are only supported for Slack Webhook URLs. Get your webhook urls from"," ",(0,r.jsx)("a",{href:"https://api.slack.com/messaging/webhooks",target:"_blank",style:{color:"blue"},children:"here"})]}),(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{}),(0,r.jsx)(el.Z,{}),(0,r.jsx)(el.Z,{children:"Slack Webhook URL"})]})}),(0,r.jsx)(X.Z,{children:Object.entries(G).map((e,l)=>{let[s,t]=e;return(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:"region_outage_alerts"==s?a?(0,r.jsx)(lh.Z,{id:"switch",name:"switch",checked:et(s),onChange:()=>H(s)}):(0,r.jsx)(y.Z,{className:"flex items-center justify-center",children:(0,r.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"✨ Enterprise Feature"})}):(0,r.jsx)(lh.Z,{id:"switch",name:"switch",checked:et(s),onChange:()=>H(s)})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{children:t})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(_.Z,{name:s,type:"password",defaultValue:k&&k[s]?k[s]:b})})]},l)})})]}),(0,r.jsx)(y.Z,{size:"xs",className:"mt-2",onClick:()=>{if(!l)return;let e={};Object.entries(G).forEach(l=>{let[s,t]=l,a=document.querySelector('input[name="'.concat(s,'"]'));console.log("key",s),console.log("webhookInput",a);let r=(null==a?void 0:a.value)||"";console.log("newWebhookValue",r),e[s]=r}),console.log("updatedAlertToWebhooks",e);let s={general_settings:{alert_to_webhook_url:e,alert_types:P}};console.log("payload",s);try{(0,p.K_)(l,s)}catch(e){I.ZP.error("Failed to update alerts: "+e,20)}I.ZP.success("Alerts updated successfully")},children:"Save Changes"}),(0,r.jsx)(y.Z,{onClick:()=>(0,p.jE)(l,"slack"),className:"mx-2",children:"Test Alerts"})]})}),(0,r.jsx)(eL.Z,{children:(0,r.jsx)(lg,{accessToken:l,premiumUser:a})}),(0,r.jsx)(eL.Z,{children:(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(lf,{level:4,children:"Email Settings"}),(0,r.jsxs)(w.Z,{children:[(0,r.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/email",target:"_blank",style:{color:"blue"},children:" LiteLLM Docs: email alerts"})," ",(0,r.jsx)("br",{})]}),(0,r.jsx)("div",{className:"flex w-full",children:d.filter(e=>"email"===e.name).map((e,l)=>{var s;return(0,r.jsx)(Q.Z,{children:(0,r.jsx)("ul",{children:(0,r.jsx)(f.Z,{numItems:2,children:Object.entries(null!==(s=e.variables)&&void 0!==s?s:{}).map(e=>{let[l,s]=e;return(0,r.jsxs)("li",{className:"mx-2 my-2",children:[!0!=a&&("EMAIL_LOGO_URL"===l||"EMAIL_SUPPORT_CONTACT"===l)?(0,r.jsxs)("div",{children:[(0,r.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:(0,r.jsxs)(w.Z,{className:"mt-2",children:[" ","✨ ",l]})}),(0,r.jsx)(_.Z,{name:l,defaultValue:s,type:"password",disabled:!0,style:{width:"400px"}})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)(w.Z,{className:"mt-2",children:l}),(0,r.jsx)(_.Z,{name:l,defaultValue:s,type:"password",style:{width:"400px"}})]}),(0,r.jsxs)("p",{style:{fontSize:"small",fontStyle:"italic"},children:["SMTP_HOST"===l&&(0,r.jsxs)("div",{style:{color:"gray"},children:["Enter the SMTP host address, e.g. `smtp.resend.com`",(0,r.jsx)("span",{style:{color:"red"},children:" Required * "})]}),"SMTP_PORT"===l&&(0,r.jsxs)("div",{style:{color:"gray"},children:["Enter the SMTP port number, e.g. `587`",(0,r.jsx)("span",{style:{color:"red"},children:" Required * "})]}),"SMTP_USERNAME"===l&&(0,r.jsxs)("div",{style:{color:"gray"},children:["Enter the SMTP username, e.g. `username`",(0,r.jsx)("span",{style:{color:"red"},children:" Required * "})]}),"SMTP_PASSWORD"===l&&(0,r.jsx)("span",{style:{color:"red"},children:" Required * "}),"SMTP_SENDER_EMAIL"===l&&(0,r.jsxs)("div",{style:{color:"gray"},children:["Enter the sender email address, e.g. `sender@berri.ai`",(0,r.jsx)("span",{style:{color:"red"},children:" Required * "})]}),"TEST_EMAIL_ADDRESS"===l&&(0,r.jsxs)("div",{style:{color:"gray"},children:["Email Address to send `Test Email Alert` to. example: `info@berri.ai`",(0,r.jsx)("span",{style:{color:"red"},children:" Required * "})]}),"EMAIL_LOGO_URL"===l&&(0,r.jsx)("div",{style:{color:"gray"},children:"(Optional) Customize the Logo that appears in the email, pass a url to your logo"}),"EMAIL_SUPPORT_CONTACT"===l&&(0,r.jsx)("div",{style:{color:"gray"},children:"(Optional) Customize the support email address that appears in the email. Default is support@berri.ai"})]})]},l)})})})},l)})}),(0,r.jsx)(y.Z,{className:"mt-2",onClick:()=>er(),children:"Save Changes"}),(0,r.jsx)(y.Z,{onClick:()=>(0,p.jE)(l,"email"),className:"mx-2",children:"Test Email Alerts"})]})})]})]})}),(0,r.jsxs)(A.Z,{title:"Add Logging Callback",visible:O,width:800,onCancel:()=>M(!1),footer:null,children:[(0,r.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/logging",className:"mb-8 mt-4",target:"_blank",style:{color:"blue"},children:" LiteLLM Docs: Logging"}),(0,r.jsx)(C.Z,{form:h,onFinish:ei,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(lj.Z,{label:"Callback",name:"callback",rules:[{required:!0,message:"Please select a callback"}],children:(0,r.jsx)(N.default,{onChange:e=>{let l=D[e];l&&(console.log(l.ui_callback_name),eo(l))},children:D&&Object.values(D).map(e=>(0,r.jsx)(ea.Z,{value:e.litellm_callback_name,children:e.ui_callback_name},e.litellm_callback_name))})}),z&&z.map(e=>(0,r.jsx)(lj.Z,{label:e,name:e,rules:[{required:!0,message:"Please enter the value for "+e}],children:(0,r.jsx)(_.Z,{type:"password"})},e)),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Save"})})]})})]}),(0,r.jsx)(A.Z,{visible:V,width:800,title:"Edit ".concat(null==B?void 0:B.name," Settings"),onCancel:()=>q(!1),footer:null,children:(0,r.jsxs)(C.Z,{form:h,onFinish:en,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsx)(r.Fragment,{children:B&&B.variables&&Object.entries(B.variables).map(e=>{let[l,s]=e;return(0,r.jsx)(lj.Z,{label:l,name:l,children:(0,r.jsx)(_.Z,{type:"password",defaultValue:s})},l)})}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Save"})})]})})]})):null},lZ=s(92414),lb=s(46030);let{Option:lv}=N.default;var lw=e=>{let{models:l,accessToken:s,routerSettings:t,setRouterSettings:a}=e,[i]=C.Z.useForm(),[o,d]=(0,n.useState)(!1),[c,m]=(0,n.useState)("");return(0,r.jsxs)("div",{children:[(0,r.jsx)(y.Z,{className:"mx-auto",onClick:()=>d(!0),children:"+ Add Fallbacks"}),(0,r.jsx)(A.Z,{title:"Add Fallbacks",visible:o,width:800,footer:null,onOk:()=>{d(!1),i.resetFields()},onCancel:()=>{d(!1),i.resetFields()},children:(0,r.jsxs)(C.Z,{form:i,onFinish:e=>{console.log(e);let{model_name:l,models:r}=e,n=[...t.fallbacks||[],{[l]:r}],o={...t,fallbacks:n};console.log(o);try{(0,p.K_)(s,{router_settings:o}),a(o)}catch(e){I.ZP.error("Failed to update router settings: "+e,20)}I.ZP.success("router settings updated successfully"),d(!1),i.resetFields()},labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"Public Model Name",name:"model_name",rules:[{required:!0,message:"Set the model to fallback for"}],help:"required",children:(0,r.jsx)(et.Z,{defaultValue:c,children:l&&l.map((e,l)=>(0,r.jsx)(ea.Z,{value:e,onClick:()=>m(e),children:e},l))})}),(0,r.jsx)(C.Z.Item,{label:"Fallback Models",name:"models",rules:[{required:!0,message:"Please select a model"}],help:"required",children:(0,r.jsx)(lZ.Z,{value:l,children:l&&l.filter(e=>e!=c).map(e=>(0,r.jsx)(lb.Z,{value:e,children:e},e))})})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Add Fallbacks"})})]})})]})},lk=s(33619);async function lS(e,l){console.log=function(){},console.log("isLocal:",!1);let s=window.location.origin,t=new lk.ZP.OpenAI({apiKey:l,baseURL:s,dangerouslyAllowBrowser:!0});try{let l=await t.chat.completions.create({model:e,messages:[{role:"user",content:"Hi, this is a test message"}],mock_testing_fallbacks:!0});I.ZP.success((0,r.jsxs)("span",{children:["Test model=",(0,r.jsx)("strong",{children:e}),", received model=",(0,r.jsx)("strong",{children:l.model}),". See"," ",(0,r.jsx)("a",{href:"#",onClick:()=>window.open("https://docs.litellm.ai/docs/proxy/reliability","_blank"),style:{textDecoration:"underline",color:"blue"},children:"curl"})]}))}catch(e){I.ZP.error("Error occurred while generating model response. Please try again. Error: ".concat(e),20)}}let lN={ttl:3600,lowest_latency_buffer:0},lC=e=>{let{selectedStrategy:l,strategyArgs:s,paramExplanation:t}=e;return(0,r.jsxs)(Z.Z,{children:[(0,r.jsx)(v.Z,{className:"text-sm font-medium text-tremor-content-strong dark:text-dark-tremor-content-strong",children:"Routing Strategy Specific Args"}),(0,r.jsx)(b.Z,{children:"latency-based-routing"==l?(0,r.jsx)(J.Z,{children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Setting"}),(0,r.jsx)(el.Z,{children:"Value"})]})}),(0,r.jsx)(X.Z,{children:Object.entries(s).map(e=>{let[l,s]=e;return(0,r.jsxs)(es.Z,{children:[(0,r.jsxs)(Q.Z,{children:[(0,r.jsx)(w.Z,{children:l}),(0,r.jsx)("p",{style:{fontSize:"0.65rem",color:"#808080",fontStyle:"italic"},className:"mt-1",children:t[l]})]}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(_.Z,{name:l,defaultValue:"object"==typeof s?JSON.stringify(s,null,2):s.toString()})})]},l)})})]})}):(0,r.jsx)(w.Z,{children:"No specific settings"})})]})};var lI=e=>{let{accessToken:l,userRole:s,userID:t,modelData:a}=e,[i,o]=(0,n.useState)({}),[d,c]=(0,n.useState)({}),[m,u]=(0,n.useState)([]),[h,x]=(0,n.useState)(!1),[g]=C.Z.useForm(),[Z,b]=(0,n.useState)(null),[v,S]=(0,n.useState)(null),[N,A]=(0,n.useState)(null),P={routing_strategy_args:"(dict) Arguments to pass to the routing strategy",routing_strategy:"(string) Routing strategy to use",allowed_fails:"(int) Number of times a deployment can fail before being added to cooldown",cooldown_time:"(int) time in seconds to cooldown a deployment after failure",num_retries:"(int) Number of retries for failed requests. Defaults to 0.",timeout:"(float) Timeout for requests. Defaults to None.",retry_after:"(int) Minimum time to wait before retrying a failed request",ttl:"(int) Sliding window to look back over when calculating the average latency of a deployment. Default - 1 hour (in seconds).",lowest_latency_buffer:"(float) Shuffle between deployments within this % of the lowest latency. Default - 0 (i.e. always pick lowest latency)."};(0,n.useEffect)(()=>{l&&s&&t&&((0,p.BL)(l,t,s).then(e=>{console.log("callbacks",e);let l=e.router_settings;"model_group_retry_policy"in l&&delete l.model_group_retry_policy,o(l)}),(0,p.YU)(l).then(e=>{u(e)}))},[l,s,t]);let O=async e=>{if(l){console.log("received key: ".concat(e)),console.log("routerSettings['fallbacks']: ".concat(i.fallbacks)),i.fallbacks.map(l=>(e in l&&delete l[e],l));try{await (0,p.K_)(l,{router_settings:i}),o({...i}),S(i.routing_strategy),I.ZP.success("Router settings updated successfully")}catch(e){I.ZP.error("Failed to update router settings: "+e,20)}}},T=(e,l)=>{u(m.map(s=>s.field_name===e?{...s,field_value:l}:s))},M=(e,s)=>{if(!l)return;let t=m[s].field_value;if(null!=t&&void 0!=t)try{(0,p.jA)(l,e,t);let s=m.map(l=>l.field_name===e?{...l,stored_in_db:!0}:l);u(s)}catch(e){}},D=(e,s)=>{if(l)try{(0,p.ao)(l,e);let s=m.map(l=>l.field_name===e?{...l,stored_in_db:null,field_value:null}:l);u(s)}catch(e){}},F=e=>{if(!l)return;console.log("router_settings",e);let s=Object.fromEntries(Object.entries(e).map(e=>{let[l,s]=e;if("routing_strategy_args"!==l&&"routing_strategy"!==l){var t;return[l,(null===(t=document.querySelector('input[name="'.concat(l,'"]')))||void 0===t?void 0:t.value)||s]}if("routing_strategy"==l)return[l,v];if("routing_strategy_args"==l&&"latency-based-routing"==v){let e={},l=document.querySelector('input[name="lowest_latency_buffer"]'),s=document.querySelector('input[name="ttl"]');return(null==l?void 0:l.value)&&(e.lowest_latency_buffer=Number(l.value)),(null==s?void 0:s.value)&&(e.ttl=Number(s.value)),console.log("setRoutingStrategyArgs: ".concat(e)),["routing_strategy_args",e]}return null}).filter(e=>null!=e));console.log("updatedVariables",s);try{(0,p.K_)(l,{router_settings:s})}catch(e){I.ZP.error("Failed to update router settings: "+e,20)}I.ZP.success("router settings updated successfully")};return l?(0,r.jsx)("div",{className:"w-full mx-4",children:(0,r.jsxs)(eD.Z,{className:"gap-2 p-8 h-[75vh] w-full mt-2",children:[(0,r.jsxs)(eF.Z,{variant:"line",defaultValue:"1",children:[(0,r.jsx)(eM.Z,{value:"1",children:"Loadbalancing"}),(0,r.jsx)(eM.Z,{value:"2",children:"Fallbacks"}),(0,r.jsx)(eM.Z,{value:"3",children:"General"})]}),(0,r.jsxs)(eR.Z,{children:[(0,r.jsx)(eL.Z,{children:(0,r.jsxs)(f.Z,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:[(0,r.jsx)(k.Z,{children:"Router Settings"}),(0,r.jsxs)(J.Z,{children:[(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Setting"}),(0,r.jsx)(el.Z,{children:"Value"})]})}),(0,r.jsx)(X.Z,{children:Object.entries(i).filter(e=>{let[l,s]=e;return"fallbacks"!=l&&"context_window_fallbacks"!=l&&"routing_strategy_args"!=l}).map(e=>{let[l,s]=e;return(0,r.jsxs)(es.Z,{children:[(0,r.jsxs)(Q.Z,{children:[(0,r.jsx)(w.Z,{children:l}),(0,r.jsx)("p",{style:{fontSize:"0.65rem",color:"#808080",fontStyle:"italic"},className:"mt-1",children:P[l]})]}),(0,r.jsx)(Q.Z,{children:"routing_strategy"==l?(0,r.jsxs)(et.Z,{defaultValue:s,className:"w-full max-w-md",onValueChange:S,children:[(0,r.jsx)(ea.Z,{value:"usage-based-routing",children:"usage-based-routing"}),(0,r.jsx)(ea.Z,{value:"latency-based-routing",children:"latency-based-routing"}),(0,r.jsx)(ea.Z,{value:"simple-shuffle",children:"simple-shuffle"})]}):(0,r.jsx)(_.Z,{name:l,defaultValue:"object"==typeof s?JSON.stringify(s,null,2):s.toString()})})]},l)})})]}),(0,r.jsx)(lC,{selectedStrategy:v,strategyArgs:i&&i.routing_strategy_args&&Object.keys(i.routing_strategy_args).length>0?i.routing_strategy_args:lN,paramExplanation:P})]}),(0,r.jsx)(j.Z,{children:(0,r.jsx)(y.Z,{className:"mt-2",onClick:()=>F(i),children:"Save Changes"})})]})}),(0,r.jsxs)(eL.Z,{children:[(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Model Name"}),(0,r.jsx)(el.Z,{children:"Fallbacks"})]})}),(0,r.jsx)(X.Z,{children:i.fallbacks&&i.fallbacks.map((e,s)=>Object.entries(e).map(e=>{let[t,a]=e;return(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:t}),(0,r.jsx)(Q.Z,{children:Array.isArray(a)?a.join(", "):a}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(y.Z,{onClick:()=>lS(t,l),children:"Test Fallback"})}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(Y.Z,{icon:H.Z,size:"sm",onClick:()=>O(t)})})]},s.toString()+t)}))})]}),(0,r.jsx)(lw,{models:(null==a?void 0:a.data)?a.data.map(e=>e.model_name):[],accessToken:l,routerSettings:i,setRouterSettings:o})]}),(0,r.jsx)(eL.Z,{children:(0,r.jsx)(J.Z,{children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Setting"}),(0,r.jsx)(el.Z,{children:"Value"}),(0,r.jsx)(el.Z,{children:"Status"}),(0,r.jsx)(el.Z,{children:"Action"})]})}),(0,r.jsx)(X.Z,{children:m.filter(e=>"TypedDictionary"!==e.field_type).map((e,l)=>(0,r.jsxs)(es.Z,{children:[(0,r.jsxs)(Q.Z,{children:[(0,r.jsx)(w.Z,{children:e.field_name}),(0,r.jsx)("p",{style:{fontSize:"0.65rem",color:"#808080",fontStyle:"italic"},className:"mt-1",children:e.field_description})]}),(0,r.jsx)(Q.Z,{children:"Integer"==e.field_type?(0,r.jsx)(E.Z,{step:1,value:e.field_value,onChange:l=>T(e.field_name,l)}):null}),(0,r.jsx)(Q.Z,{children:!0==e.stored_in_db?(0,r.jsx)(G.Z,{icon:lx.Z,className:"text-white",children:"In DB"}):!1==e.stored_in_db?(0,r.jsx)(G.Z,{className:"text-gray bg-white outline",children:"In Config"}):(0,r.jsx)(G.Z,{className:"text-gray bg-white outline",children:"Not Set"})}),(0,r.jsxs)(Q.Z,{children:[(0,r.jsx)(y.Z,{onClick:()=>M(e.field_name,l),children:"Update"}),(0,r.jsx)(Y.Z,{icon:H.Z,color:"red",onClick:()=>D(e.field_name,l),children:"Reset"})]})]},l))})]})})})]})]})}):null},lA=s(93142),lP=s(45246),lE=s(96473),lO=e=>{let{value:l={},onChange:s}=e,[t,a]=(0,n.useState)(Object.entries(l)),i=e=>{let l=t.filter((l,s)=>s!==e);a(l),null==s||s(Object.fromEntries(l))},o=(e,l,r)=>{let n=[...t];n[e]=[l,r],a(n),null==s||s(Object.fromEntries(n))};return(0,r.jsxs)("div",{children:[t.map((e,l)=>{let[s,t]=e;return(0,r.jsxs)(lA.Z,{style:{display:"flex",marginBottom:8},align:"start",children:[(0,r.jsx)(_.Z,{placeholder:"Header Name",value:s,onChange:e=>o(l,e.target.value,t)}),(0,r.jsx)(_.Z,{placeholder:"Header Value",value:t,onChange:e=>o(l,s,e.target.value)}),(0,r.jsx)(lP.Z,{onClick:()=>i(l)})]},l)}),(0,r.jsx)(T.ZP,{type:"dashed",onClick:()=>{a([...t,["",""]])},icon:(0,r.jsx)(lE.Z,{}),children:"Add Header"})]})};let{Option:lT}=N.default;var lM=e=>{let{accessToken:l,setPassThroughItems:s,passThroughItems:t}=e,[a]=C.Z.useForm(),[i,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)("");return(0,r.jsxs)("div",{children:[(0,r.jsx)(y.Z,{className:"mx-auto",onClick:()=>o(!0),children:"+ Add Pass-Through Endpoint"}),(0,r.jsx)(A.Z,{title:"Add Pass-Through Endpoint",visible:i,width:800,footer:null,onOk:()=>{o(!1),a.resetFields()},onCancel:()=>{o(!1),a.resetFields()},children:(0,r.jsxs)(C.Z,{form:a,onFinish:e=>{console.log(e);let r=[...t,{headers:e.headers,path:e.path,target:e.target}];try{(0,p.Vt)(l,e),s(r)}catch(e){I.ZP.error("Failed to update router settings: "+e,20)}I.ZP.success("Pass through endpoint successfully added"),o(!1),a.resetFields()},labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"Path",name:"path",rules:[{required:!0,message:"The route to be added to the LiteLLM Proxy Server."}],help:"required",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"Target",name:"target",rules:[{required:!0,message:"The URL to which requests for this path should be forwarded."}],help:"required",children:(0,r.jsx)(_.Z,{})}),(0,r.jsx)(C.Z.Item,{label:"Headers",name:"headers",rules:[{required:!0,message:"Key-value pairs of headers to be forwarded with the request. You can set any key value pair here and it will be forwarded to your target endpoint"}],help:"required",children:(0,r.jsx)(lO,{})})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Add Pass-Through Endpoint"})})]})})]})},lD=e=>{let{accessToken:l,userRole:s,userID:t,modelData:a}=e,[i,o]=(0,n.useState)([]);(0,n.useEffect)(()=>{l&&s&&t&&(0,p.mp)(l).then(e=>{o(e.endpoints)})},[l,s,t]);let d=(e,s)=>{if(l)try{(0,p.EG)(l,e);let s=i.filter(l=>l.path!==e);o(s),I.ZP.success("Endpoint deleted successfully.")}catch(e){}};return l?(0,r.jsx)("div",{className:"w-full mx-4",children:(0,r.jsx)(eD.Z,{className:"gap-2 p-8 h-[75vh] w-full mt-2",children:(0,r.jsxs)(J.Z,{children:[(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Path"}),(0,r.jsx)(el.Z,{children:"Target"}),(0,r.jsx)(el.Z,{children:"Headers"}),(0,r.jsx)(el.Z,{children:"Action"})]})}),(0,r.jsx)(X.Z,{children:i.map((e,l)=>(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:(0,r.jsx)(w.Z,{children:e.path})}),(0,r.jsx)(Q.Z,{children:e.target}),(0,r.jsx)(Q.Z,{children:JSON.stringify(e.headers)}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)(Y.Z,{icon:H.Z,color:"red",onClick:()=>d(e.path,l),children:"Reset"})})]},l))})]}),(0,r.jsx)(lM,{accessToken:l,setPassThroughItems:o,passThroughItems:i})]})})}):null},lF=e=>{let{isModalVisible:l,accessToken:s,setIsModalVisible:t,setBudgetList:a}=e,[n]=C.Z.useForm(),i=async e=>{if(null!=s&&void 0!=s)try{I.ZP.info("Making API Call");let l=await (0,p.Zr)(s,e);console.log("key create Response:",l),a(e=>e?[...e,l]:[l]),I.ZP.success("API Key Created"),n.resetFields()}catch(e){console.error("Error creating the key:",e),I.ZP.error("Error creating the key: ".concat(e),20)}};return(0,r.jsx)(A.Z,{title:"Create Budget",visible:l,width:800,footer:null,onOk:()=>{t(!1),n.resetFields()},onCancel:()=>{t(!1),n.resetFields()},children:(0,r.jsxs)(C.Z,{form:n,onFinish:i,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,r.jsx)(_.Z,{placeholder:""})}),(0,r.jsx)(C.Z.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,r.jsx)(E.Z,{step:1,precision:2,width:200})}),(0,r.jsx)(C.Z.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,r.jsx)(E.Z,{step:1,precision:2,width:200})}),(0,r.jsxs)(Z.Z,{className:"mt-20 mb-8",children:[(0,r.jsx)(v.Z,{children:(0,r.jsx)("b",{children:"Optional Settings"})}),(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(C.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,r.jsx)(E.Z,{step:.01,precision:2,width:200})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,r.jsxs)(N.default,{defaultValue:null,placeholder:"n/a",children:[(0,r.jsx)(N.default.Option,{value:"24h",children:"daily"}),(0,r.jsx)(N.default.Option,{value:"7d",children:"weekly"}),(0,r.jsx)(N.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Create Budget"})})]})})},lL=e=>{let{isModalVisible:l,accessToken:s,setIsModalVisible:t,setBudgetList:a,existingBudget:i,handleUpdateCall:o}=e;console.log("existingBudget",i);let[d]=C.Z.useForm();(0,n.useEffect)(()=>{d.setFieldsValue(i)},[i,d]);let c=async e=>{if(null!=s&&void 0!=s)try{I.ZP.info("Making API Call"),t(!0);let l=await (0,p.qI)(s,e);a(e=>e?[...e,l]:[l]),I.ZP.success("Budget Updated"),d.resetFields(),o()}catch(e){console.error("Error creating the key:",e),I.ZP.error("Error creating the key: ".concat(e),20)}};return(0,r.jsx)(A.Z,{title:"Edit Budget",visible:l,width:800,footer:null,onOk:()=>{t(!1),d.resetFields()},onCancel:()=>{t(!1),d.resetFields()},children:(0,r.jsxs)(C.Z,{form:d,onFinish:c,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:i,children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,r.jsx)(_.Z,{placeholder:""})}),(0,r.jsx)(C.Z.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,r.jsx)(E.Z,{step:1,precision:2,width:200})}),(0,r.jsx)(C.Z.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,r.jsx)(E.Z,{step:1,precision:2,width:200})}),(0,r.jsxs)(Z.Z,{className:"mt-20 mb-8",children:[(0,r.jsx)(v.Z,{children:(0,r.jsx)("b",{children:"Optional Settings"})}),(0,r.jsxs)(b.Z,{children:[(0,r.jsx)(C.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,r.jsx)(E.Z,{step:.01,precision:2,width:200})}),(0,r.jsx)(C.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,r.jsxs)(N.default,{defaultValue:null,placeholder:"n/a",children:[(0,r.jsx)(N.default.Option,{value:"24h",children:"daily"}),(0,r.jsx)(N.default.Option,{value:"7d",children:"weekly"}),(0,r.jsx)(N.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,r.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,r.jsx)(T.ZP,{htmlType:"submit",children:"Save"})})]})})},lR=e=>{let{accessToken:l}=e,[s,t]=(0,n.useState)(!1),[a,i]=(0,n.useState)(!1),[o,d]=(0,n.useState)(null),[c,m]=(0,n.useState)([]);(0,n.useEffect)(()=>{l&&(0,p.O3)(l).then(e=>{m(e)})},[l]);let u=async(e,s)=>{console.log("budget_id",e),null!=l&&(d(c.find(l=>l.budget_id===e)||null),i(!0))},h=async(e,s)=>{if(null==l)return;I.ZP.info("Request made"),await (0,p.NV)(l,e);let t=[...c];t.splice(s,1),m(t),I.ZP.success("Budget Deleted.")},x=async()=>{null!=l&&(0,p.O3)(l).then(e=>{m(e)})};return(0,r.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,r.jsx)(y.Z,{size:"sm",variant:"primary",className:"mb-2",onClick:()=>t(!0),children:"+ Create Budget"}),(0,r.jsx)(lF,{accessToken:l,isModalVisible:s,setIsModalVisible:t,setBudgetList:m}),o&&(0,r.jsx)(lL,{accessToken:l,isModalVisible:a,setIsModalVisible:i,setBudgetList:m,existingBudget:o,handleUpdateCall:x}),(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(w.Z,{children:"Create a budget to assign to customers."}),(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Budget ID"}),(0,r.jsx)(el.Z,{children:"Max Budget"}),(0,r.jsx)(el.Z,{children:"TPM"}),(0,r.jsx)(el.Z,{children:"RPM"})]})}),(0,r.jsx)(X.Z,{children:c.slice().sort((e,l)=>new Date(l.updated_at).getTime()-new Date(e.updated_at).getTime()).map((e,l)=>(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:e.budget_id}),(0,r.jsx)(Q.Z,{children:e.max_budget?e.max_budget:"n/a"}),(0,r.jsx)(Q.Z,{children:e.tpm_limit?e.tpm_limit:"n/a"}),(0,r.jsx)(Q.Z,{children:e.rpm_limit?e.rpm_limit:"n/a"}),(0,r.jsx)(Y.Z,{icon:K.Z,size:"sm",onClick:()=>u(e.budget_id,l)}),(0,r.jsx)(Y.Z,{icon:H.Z,size:"sm",onClick:()=>h(e.budget_id,l)})]},l))})]})]}),(0,r.jsxs)("div",{className:"mt-5",children:[(0,r.jsx)(w.Z,{className:"text-base",children:"How to use budget id"}),(0,r.jsxs)(eD.Z,{children:[(0,r.jsxs)(eF.Z,{children:[(0,r.jsx)(eM.Z,{children:"Assign Budget to Customer"}),(0,r.jsx)(eM.Z,{children:"Test it (Curl)"}),(0,r.jsx)(eM.Z,{children:"Test it (OpenAI SDK)"})]}),(0,r.jsxs)(eR.Z,{children:[(0,r.jsx)(eL.Z,{children:(0,r.jsx)(eG.Z,{language:"bash",children:"\ncurl -X POST --location '<your_proxy_base_url>/end_user/new' \n-H 'Authorization: Bearer <your-master-key>' \n-H 'Content-Type: application/json' \n-d '{\"user_id\": \"my-customer-id', \"budget_id\": \"<BUDGET_ID>\"}' # \uD83D\uDC48 KEY CHANGE\n\n            "})}),(0,r.jsx)(eL.Z,{children:(0,r.jsx)(eG.Z,{language:"bash",children:'\ncurl -X POST --location \'<your_proxy_base_url>/chat/completions\' \n-H \'Authorization: Bearer <your-master-key>\' \n-H \'Content-Type: application/json\' \n-d \'{\n  "model": "gpt-3.5-turbo\', \n  "messages":[{"role": "user", "content": "Hey, how\'s it going?"}],\n  "user": "my-customer-id"\n}\' # \uD83D\uDC48 KEY CHANGE\n\n            '})}),(0,r.jsx)(eL.Z,{children:(0,r.jsx)(eG.Z,{language:"python",children:'from openai import OpenAI\nclient = OpenAI(\n  base_url="<your_proxy_base_url>",\n  api_key="<your_proxy_key>"\n)\n\ncompletion = client.chat.completions.create(\n  model="gpt-3.5-turbo",\n  messages=[\n    {"role": "system", "content": "You are a helpful assistant."},\n    {"role": "user", "content": "Hello!"}\n  ],\n  user="my-customer-id"\n)\n\nprint(completion.choices[0].message)'})})]})]})]})]})},lz=s(77398),lU=s.n(lz),lV=s(20016),lq=s(71594),lB=s(24525);function lK(e){let{data:l=[],columns:s,getRowCanExpand:t,renderSubComponent:a,isLoading:i=!1}=e,o=(0,lq.b7)({data:l,columns:s,getRowCanExpand:t,getCoreRowModel:(0,lB.sC)(),getExpandedRowModel:(0,lB.rV)()});return(0,r.jsx)("div",{className:"rounded-lg custom-border table-wrapper",children:(0,r.jsxs)($.Z,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,r.jsx)(ee.Z,{children:o.getHeaderGroups().map(e=>(0,r.jsx)(es.Z,{children:e.headers.map(e=>(0,r.jsx)(el.Z,{className:"py-1 h-8",children:e.isPlaceholder?null:(0,lq.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)(X.Z,{children:i?(0,r.jsx)(es.Z,{children:(0,r.jsx)(Q.Z,{colSpan:s.length,className:"h-8 text-center",children:(0,r.jsx)("div",{className:"text-center text-gray-500",children:(0,r.jsx)("p",{children:"\uD83D\uDE85 Loading logs..."})})})}):o.getRowModel().rows.length>0?o.getRowModel().rows.map(e=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(es.Z,{className:"h-8",children:e.getVisibleCells().map(e=>(0,r.jsx)(Q.Z,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap",children:(0,lq.ie)(e.column.columnDef.cell,e.getContext())},e.id))}),e.getIsExpanded()&&(0,r.jsx)(es.Z,{children:(0,r.jsx)(Q.Z,{colSpan:e.getVisibleCells().length,children:a({row:e})})})]},e.id)):(0,r.jsx)(es.Z,{children:(0,r.jsx)(Q.Z,{colSpan:s.length,className:"h-8 text-center",children:(0,r.jsx)("div",{className:"text-center text-gray-500",children:(0,r.jsx)("p",{children:"No logs found"})})})})})]})})}async function lW(e){try{let l=await fetch("http://ip-api.com/json/".concat(e)),s=await l.json();console.log("ip lookup data",s);let t=s.countryCode?s.countryCode.toUpperCase().split("").map(e=>String.fromCodePoint(e.charCodeAt(0)+127397)).join(""):"";return s.country?"".concat(t," ").concat(s.country):"Unknown"}catch(e){return console.error("Error looking up IP:",e),"Unknown"}}let lH=e=>{let{ipAddress:l}=e,[s,t]=n.useState("-");return n.useEffect(()=>{if(!l)return;let e=!0;return lW(l).then(l=>{e&&t(l)}).catch(()=>{e&&t("-")}),()=>{e=!1}},[l]),(0,r.jsx)("span",{children:s})},lG=e=>{try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).replace(",","")}catch(e){return"Error converting time"}},lJ=e=>{let{utcTime:l}=e;return(0,r.jsx)("span",{style:{fontFamily:"monospace",width:"180px",display:"inline-block"},children:lG(l)})},lY=[{id:"expander",header:()=>null,cell:e=>{let{row:l}=e;return l.getCanExpand()?(0,r.jsx)("button",{onClick:l.getToggleExpandedHandler(),style:{cursor:"pointer"},children:l.getIsExpanded()?"▼":"▶"}):"●"}},{header:"Time",accessorKey:"startTime",cell:e=>(0,r.jsx)(lJ,{utcTime:e.getValue()})},{header:"Request ID",accessorKey:"request_id",cell:e=>(0,r.jsx)(R.Z,{title:String(e.getValue()||""),children:(0,r.jsx)("span",{className:"font-mono text-xs max-w-[100px] truncate block",children:String(e.getValue()||"")})})},{header:"Country",accessorKey:"requester_ip_address",cell:e=>(0,r.jsx)(lH,{ipAddress:e.getValue()})},{header:"Team Name",accessorKey:"metadata.user_api_key_team_alias",cell:e=>(0,r.jsx)("span",{children:String(e.getValue()||"-")})},{header:"Key Hash",accessorKey:"metadata.user_api_key",cell:e=>{let l=String(e.getValue()||"-");return(0,r.jsx)(R.Z,{title:l,children:(0,r.jsxs)("span",{className:"font-mono",children:[l.slice(0,5),"..."]})})}},{header:"Key Name",accessorKey:"metadata.user_api_key_alias",cell:e=>(0,r.jsx)("span",{children:String(e.getValue()||"-")})},{header:"Model",accessorKey:"model",cell:e=>{let l=e.row.original.custom_llm_provider,s=String(e.getValue()||"");return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&(0,r.jsx)("img",{src:eZ(l).logo,alt:"",className:"w-4 h-4",onError:e=>{e.target.style.display="none"}}),(0,r.jsx)(R.Z,{title:s,children:(0,r.jsx)("span",{className:"max-w-[100px] truncate",children:s})})]})}},{header:"Tokens",accessorKey:"total_tokens",cell:e=>{let l=e.row.original;return(0,r.jsxs)("span",{className:"text-sm",children:[String(l.total_tokens||"0"),(0,r.jsxs)("span",{className:"text-gray-400 text-xs ml-1",children:["(",String(l.prompt_tokens||"0"),"+",String(l.completion_tokens||"0"),")"]})]})}},{header:"Internal User",accessorKey:"user",cell:e=>(0,r.jsx)("span",{children:String(e.getValue()||"-")})},{header:"End User",accessorKey:"end_user",cell:e=>(0,r.jsx)("span",{children:String(e.getValue()||"-")})},{header:"Cost",accessorKey:"spend",cell:e=>(0,r.jsxs)("span",{children:["$",Number(e.getValue()||0).toFixed(6)]})},{header:"Tags",accessorKey:"request_tags",cell:e=>{let l=e.getValue();if(!l||0===Object.keys(l).length)return"-";let s=Object.entries(l),t=s[0],a=s.slice(1);return(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:(0,r.jsx)(R.Z,{title:(0,r.jsx)("div",{className:"flex flex-col gap-1",children:s.map(e=>{let[l,s]=e;return(0,r.jsxs)("span",{children:[l,": ",String(s)]},l)})}),children:(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:[t[0],": ",String(t[1]),a.length>0&&" +".concat(a.length)]})})})}}],l$=async(e,l,s,t)=>{console.log("prefetchLogDetails called with",e.length,"logs");let a=e.map(e=>{if(e.request_id)return console.log("Prefetching details for request_id:",e.request_id),t.prefetchQuery({queryKey:["logDetails",e.request_id,l],queryFn:async()=>{console.log("Fetching details for",e.request_id);let t=await (0,p.qk)(s,e.request_id,l);return console.log("Received details for",e.request_id,":",t?"success":"failed"),t},staleTime:6e5,gcTime:6e5})});try{let e=await Promise.all(a);return console.log("All prefetch promises completed:",e.length),e}catch(e){throw console.error("Error in prefetchLogDetails:",e),e}};function lX(e){var l,s,t;let{accessToken:a,token:i,userRole:o,userID:d}=e,[m,u]=(0,n.useState)(""),[h,x]=(0,n.useState)(!1),[g,j]=(0,n.useState)(!1),[f,y]=(0,n.useState)(1),[_]=(0,n.useState)(50),Z=(0,n.useRef)(null),b=(0,n.useRef)(null),v=(0,n.useRef)(null),[w,k]=(0,n.useState)(lU()().subtract(24,"hours").format("YYYY-MM-DDTHH:mm")),[S,N]=(0,n.useState)(lU()().format("YYYY-MM-DDTHH:mm")),[C,I]=(0,n.useState)(!1),[A,P]=(0,n.useState)(!1),[E,O]=(0,n.useState)(""),[T,M]=(0,n.useState)(""),[D,F]=(0,n.useState)(""),[L,R]=(0,n.useState)(""),[z,U]=(0,n.useState)("Team ID"),V=(0,c.NL)();(0,n.useEffect)(()=>{function e(e){Z.current&&!Z.current.contains(e.target)&&j(!1),b.current&&!b.current.contains(e.target)&&x(!1),v.current&&!v.current.contains(e.target)&&P(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let q=(0,lV.a)({queryKey:["logs","table",f,_,w,S,D,L],queryFn:async()=>{if(!a||!i||!o||!d)return console.log("Missing required auth parameters"),{data:[],total:0,page:1,page_size:_,total_pages:0};let e=lU()(w).utc().format("YYYY-MM-DD HH:mm:ss"),l=C?lU()(S).utc().format("YYYY-MM-DD HH:mm:ss"):lU()().utc().format("YYYY-MM-DD HH:mm:ss"),s=await (0,p.h3)(a,L||void 0,D||void 0,void 0,e,l,f,_);return await l$(s.data,e,a,V),s.data=s.data.map(l=>{let s=V.getQueryData(["logDetails",l.request_id,e]);return(null==s?void 0:s.messages)&&(null==s?void 0:s.response)&&(l.messages=s.messages,l.response=s.response),l}),s},enabled:!!a&&!!i&&!!o&&!!d,refetchInterval:5e3,refetchIntervalInBackground:!0});if(!a||!i||!o||!d)return console.log("got None values for one of accessToken, token, userRole, userID"),null;let B=(null===(s=q.data)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.filter(e=>!m||e.request_id.includes(m)||e.model.includes(m)||e.user&&e.user.includes(m)))||[],K=()=>{if(C)return"".concat(lU()(w).format("MMM D, h:mm A")," - ").concat(lU()(S).format("MMM D, h:mm A"));let e=lU()(),l=lU()(w),s=e.diff(l,"minutes");if(s<=15)return"Last 15 Minutes";if(s<=60)return"Last Hour";let t=e.diff(l,"hours");return t<=4?"Last 4 Hours":t<=24?"Last 24 Hours":t<=168?"Last 7 Days":"".concat(l.format("MMM D")," - ").concat(e.format("MMM D"))};return(0,r.jsxs)("div",{className:"w-full p-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"Request Logs"})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"border-b px-6 py-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between space-y-4 md:space-y-0",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative w-64",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by Request ID",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:m,onChange:e=>u(e.target.value)}),(0,r.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,r.jsxs)("div",{className:"relative",ref:b,children:[(0,r.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",onClick:()=>x(!h),children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filter"]}),h&&(0,r.jsx)("div",{className:"absolute left-0 mt-2 w-[500px] bg-white rounded-lg shadow-lg border p-4 z-50",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Where"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>j(!g),className:"px-3 py-1.5 border rounded-md bg-white text-sm min-w-[160px] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-left flex justify-between items-center",children:[z,(0,r.jsx)("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&(0,r.jsx)("div",{className:"absolute left-0 mt-1 w-[160px] bg-white border rounded-md shadow-lg z-50",children:["Team ID","Key Hash"].map(e=>(0,r.jsxs)("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ".concat(z===e?"bg-blue-50 text-blue-600":""),onClick:()=>{U(e),j(!1),"Team ID"===e?M(""):O("")},children:[z===e&&(0,r.jsx)("svg",{className:"h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e]},e))})]}),(0,r.jsx)("input",{type:"text",placeholder:"Enter value...",className:"px-3 py-1.5 border rounded-md text-sm flex-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:"Team ID"===z?E:T,onChange:e=>{"Team ID"===z?O(e.target.value):M(e.target.value)}}),(0,r.jsx)("button",{className:"p-1 hover:bg-gray-100 rounded-md",onClick:()=>{O(""),M("")},children:(0,r.jsx)("span",{className:"text-gray-500",children:"\xd7"})})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{className:"px-3 py-1.5 text-sm border rounded-md hover:bg-gray-50",onClick:()=>{O(""),M(""),x(!1)},children:"Cancel"}),(0,r.jsx)("button",{className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",onClick:()=>{F(E),R(T),y(1),x(!1)},children:"Apply Filters"})]})]})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"relative",ref:v,children:[(0,r.jsxs)("button",{onClick:()=>P(!A),className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),K()]}),A&&(0,r.jsx)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border p-2 z-50",children:(0,r.jsxs)("div",{className:"space-y-1",children:[[{label:"Last 15 Minutes",value:15,unit:"minutes"},{label:"Last Hour",value:1,unit:"hours"},{label:"Last 4 Hours",value:4,unit:"hours"},{label:"Last 24 Hours",value:24,unit:"hours"},{label:"Last 7 Days",value:7,unit:"days"}].map(e=>(0,r.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ".concat(K()===e.label?"bg-blue-50 text-blue-600":""),onClick:()=>{N(lU()().format("YYYY-MM-DDTHH:mm")),k(lU()().subtract(e.value,e.unit).format("YYYY-MM-DDTHH:mm")),P(!1),I(!1)},children:e.label},e.label)),(0,r.jsx)("div",{className:"border-t my-2"}),(0,r.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-50 rounded-md ".concat(C?"bg-blue-50 text-blue-600":""),onClick:()=>I(!C),children:"Custom Range"})]})})]}),(0,r.jsxs)("button",{onClick:()=>{q.refetch()},className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",title:"Refresh data",children:[(0,r.jsx)("svg",{className:"w-4 h-4 ".concat(q.isFetching?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,r.jsx)("span",{children:"Refresh"})]})]}),C&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"datetime-local",value:w,onChange:e=>{k(e.target.value),y(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),(0,r.jsx)("span",{className:"text-gray-500",children:"to"}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"datetime-local",value:S,onChange:e=>{N(e.target.value),y(1)},className:"px-3 py-2 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-700",children:["Showing"," ",q.isLoading?"...":q.data?(f-1)*_+1:0," ","-"," ",q.isLoading?"...":q.data?Math.min(f*_,q.data.total):0," ","of"," ",q.isLoading?"...":q.data?q.data.total:0," ","results"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",q.isLoading?"...":f," of"," ",q.isLoading?"...":q.data?q.data.total_pages:1]}),(0,r.jsx)("button",{onClick:()=>y(e=>Math.max(1,e-1)),disabled:q.isLoading||1===f,className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,r.jsx)("button",{onClick:()=>y(e=>{var l;return Math.min((null===(l=q.data)||void 0===l?void 0:l.total_pages)||1,e+1)}),disabled:q.isLoading||f===((null===(t=q.data)||void 0===t?void 0:t.total_pages)||1),className:"px-3 py-1 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}),(0,r.jsx)(lK,{columns:lY,data:B,renderSubComponent:lQ,getRowCanExpand:()=>!0})]})]})}function lQ(e){var l,s;let{row:t}=e,a=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e};return(0,r.jsxs)("div",{className:"p-6 bg-gray-50 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-4 border-b",children:(0,r.jsx)("h3",{className:"text-lg font-medium ",children:"Request Details"})}),(0,r.jsxs)("div",{className:"space-y-2 p-4 ",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Request ID:"}),(0,r.jsx)("span",{children:t.original.request_id})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Api Key:"}),(0,r.jsx)("span",{children:t.original.api_key})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Team ID:"}),(0,r.jsx)("span",{children:t.original.team_id})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Model:"}),(0,r.jsx)("span",{children:t.original.model})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Api Base:"}),(0,r.jsx)("span",{children:t.original.api_base})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Call Type:"}),(0,r.jsx)("span",{children:t.original.call_type})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Spend:"}),(0,r.jsx)("span",{children:t.original.spend})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Total Tokens:"}),(0,r.jsx)("span",{children:t.original.total_tokens})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Prompt Tokens:"}),(0,r.jsx)("span",{children:t.original.prompt_tokens})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Completion Tokens:"}),(0,r.jsx)("span",{children:t.original.completion_tokens})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Start Time:"}),(0,r.jsx)("span",{children:t.original.startTime})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"End Time:"}),(0,r.jsx)("span",{children:t.original.endTime})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Cache Hit:"}),(0,r.jsx)("span",{children:t.original.cache_hit})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Cache Key:"}),(0,r.jsx)("span",{children:t.original.cache_key})]}),(null==t?void 0:null===(l=t.original)||void 0===l?void 0:l.requester_ip_address)&&(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("span",{className:"font-medium w-1/3",children:"Request IP Address:"}),(0,r.jsx)("span",{children:null==t?void 0:null===(s=t.original)||void 0===s?void 0:s.requester_ip_address})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"flex justify-between items-center p-4 border-b",children:(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Request Tags"})}),(0,r.jsx)("pre",{className:"p-4  text-wrap overflow-auto text-sm",children:JSON.stringify(a(t.original.request_tags),null,2)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"flex justify-between items-center p-4 border-b",children:(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Request"})}),(0,r.jsx)("pre",{className:"p-4  text-wrap overflow-auto text-sm",children:JSON.stringify(a(t.original.messages),null,2)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Response"}),(0,r.jsx)("div",{})]}),(0,r.jsx)("pre",{className:"p-4 text-wrap overflow-auto text-sm",children:JSON.stringify(a(t.original.response),null,2)})]}),t.original.metadata&&Object.keys(t.original.metadata).length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"flex justify-between items-center p-4 border-b",children:(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Metadata"})}),(0,r.jsx)("pre",{className:"p-4 text-wrap  overflow-auto text-sm ",children:JSON.stringify(t.original.metadata,null,2)})]})]})}var l0=s(92699),l1=e=>{let{proxySettings:l}=e,s="<your_proxy_base_url>";return l&&l.PROXY_BASE_URL&&void 0!==l.PROXY_BASE_URL&&(s=l.PROXY_BASE_URL),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(f.Z,{className:"gap-2 p-8 h-[80vh] w-full mt-2",children:(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsx)("p",{className:"text-2xl text-tremor-content-strong dark:text-dark-tremor-content-strong font-semibold",children:"OpenAI Compatible Proxy: API Reference"}),(0,r.jsx)(w.Z,{className:"mt-2 mb-2",children:"LiteLLM is OpenAI Compatible. This means your API Key works with the OpenAI SDK. Just replace the base_url to point to your litellm proxy. Example Below "}),(0,r.jsxs)(eD.Z,{children:[(0,r.jsxs)(eF.Z,{children:[(0,r.jsx)(eM.Z,{children:"OpenAI Python SDK"}),(0,r.jsx)(eM.Z,{children:"LlamaIndex"}),(0,r.jsx)(eM.Z,{children:"Langchain Py"})]}),(0,r.jsxs)(eR.Z,{children:[(0,r.jsx)(eL.Z,{children:(0,r.jsx)(eG.Z,{language:"python",children:'\nimport openai\nclient = openai.OpenAI(\n    api_key="your_api_key",\n    base_url="'.concat(s,'" # LiteLLM Proxy is OpenAI compatible, Read More: https://docs.litellm.ai/docs/proxy/user_keys\n)\n\nresponse = client.chat.completions.create(\n    model="gpt-3.5-turbo", # model to send to the proxy\n    messages = [\n        {\n            "role": "user",\n            "content": "this is a test request, write a short poem"\n        }\n    ]\n)\n\nprint(response)\n            ')})}),(0,r.jsx)(eL.Z,{children:(0,r.jsx)(eG.Z,{language:"python",children:'\nimport os, dotenv\n\nfrom llama_index.llms import AzureOpenAI\nfrom llama_index.embeddings import AzureOpenAIEmbedding\nfrom llama_index import VectorStoreIndex, SimpleDirectoryReader, ServiceContext\n\nllm = AzureOpenAI(\n    engine="azure-gpt-3.5",               # model_name on litellm proxy\n    temperature=0.0,\n    azure_endpoint="'.concat(s,'", # litellm proxy endpoint\n    api_key="sk-1234",                    # litellm proxy API Key\n    api_version="2023-07-01-preview",\n)\n\nembed_model = AzureOpenAIEmbedding(\n    deployment_name="azure-embedding-model",\n    azure_endpoint="').concat(s,'",\n    api_key="sk-1234",\n    api_version="2023-07-01-preview",\n)\n\n\ndocuments = SimpleDirectoryReader("llama_index_data").load_data()\nservice_context = ServiceContext.from_defaults(llm=llm, embed_model=embed_model)\nindex = VectorStoreIndex.from_documents(documents, service_context=service_context)\n\nquery_engine = index.as_query_engine()\nresponse = query_engine.query("What did the author do growing up?")\nprint(response)\n\n            ')})}),(0,r.jsx)(eL.Z,{children:(0,r.jsx)(eG.Z,{language:"python",children:'\nfrom langchain.chat_models import ChatOpenAI\nfrom langchain.prompts.chat import (\n    ChatPromptTemplate,\n    HumanMessagePromptTemplate,\n    SystemMessagePromptTemplate,\n)\nfrom langchain.schema import HumanMessage, SystemMessage\n\nchat = ChatOpenAI(\n    openai_api_base="'.concat(s,'",\n    model = "gpt-3.5-turbo",\n    temperature=0.1\n)\n\nmessages = [\n    SystemMessage(\n        content="You are a helpful assistant that im using to make a test request to."\n    ),\n    HumanMessage(\n        content="test from litellm. tell me why it\'s amazing in 1 sentence"\n    ),\n]\nresponse = chat(messages)\n\nprint(response)\n\n            ')})})]})]})]})})})},l2=s(243),l4=s(94263);async function l5(e,l,s,t){console.log=function(){},console.log("isLocal:",!1);let a=window.location.origin,r=new lk.ZP.OpenAI({apiKey:t,baseURL:a,dangerouslyAllowBrowser:!0});try{for await(let t of(await r.chat.completions.create({model:s,stream:!0,messages:e})))console.log(t),t.choices[0].delta.content&&l(t.choices[0].delta.content,t.model)}catch(e){I.ZP.error("Error occurred while generating model response. Please try again. Error: ".concat(e),20)}}var l8=e=>{let{accessToken:l,token:s,userRole:t,userID:a,disabledPersonalKeyCreation:i}=e,[o,d]=(0,n.useState)(i?"custom":"session"),[c,m]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[x,g]=(0,n.useState)([]),[Z,b]=(0,n.useState)(void 0),[v,k]=(0,n.useState)([]),S=(0,n.useRef)(null);(0,n.useEffect)(()=>{l&&s&&t&&a&&(async()=>{try{let e=await (0,p.So)(l,a,t);if(console.log("model_info:",e),(null==e?void 0:e.data.length)>0){let l=new Map;e.data.forEach(e=>{l.set(e.id,{value:e.id,label:e.id})});let s=Array.from(l.values());s.sort((e,l)=>e.label.localeCompare(l.label)),k(s),b(s[0].value)}}catch(e){console.error("Error fetching model info:",e)}})()},[l,a,t]),(0,n.useEffect)(()=>{S.current&&setTimeout(()=>{var e;null===(e=S.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})},100)},[x]);let C=(e,l,s)=>{g(t=>{let a=t[t.length-1];return a&&a.role===e?[...t.slice(0,t.length-1),{role:e,content:a.content+l,model:s}]:[...t,{role:e,content:l,model:s}]})},A=async()=>{if(""===u.trim()||!s||!t||!a)return;let e="session"===o?l:c;if(!e){I.ZP.error("Please provide an API key or select Current UI Session");return}let r={role:"user",content:u},n=[...x.map(e=>{let{role:l,content:s}=e;return{role:l,content:s}}),r];g([...x,r]);try{Z&&await l5(n,(e,l)=>C("assistant",e,l),Z,e)}catch(e){console.error("Error fetching model response",e),C("assistant","Error fetching model response")}h("")};if(t&&"Admin Viewer"===t){let{Title:e,Paragraph:l}=eh.default;return(0,r.jsxs)("div",{children:[(0,r.jsx)(e,{level:1,children:"Access Denied"}),(0,r.jsx)(l,{children:"Ask your proxy admin for access to test models"})]})}return(0,r.jsx)("div",{style:{width:"100%",position:"relative"},children:(0,r.jsx)(f.Z,{className:"gap-2 p-8 h-[80vh] w-full mt-2",children:(0,r.jsx)(J.Z,{children:(0,r.jsxs)(eD.Z,{children:[(0,r.jsx)(eF.Z,{children:(0,r.jsx)(eM.Z,{children:"Chat"})}),(0,r.jsx)(eR.Z,{children:(0,r.jsxs)(eL.Z,{children:[(0,r.jsxs)("div",{className:"sm:max-w-2xl",children:[(0,r.jsxs)(f.Z,{numItems:2,children:[(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(w.Z,{children:"API Key Source"}),(0,r.jsx)(N.default,{disabled:i,defaultValue:"session",style:{width:"100%"},onChange:e=>d(e),options:[{value:"session",label:"Current UI Session"},{value:"custom",label:"Virtual Key"}]}),"custom"===o&&(0,r.jsx)(_.Z,{className:"mt-2",placeholder:"Enter custom API key",type:"password",onValueChange:m,value:c})]}),(0,r.jsxs)(j.Z,{className:"mx-2",children:[(0,r.jsx)(w.Z,{children:"Select Model:"}),(0,r.jsx)(N.default,{placeholder:"Select a Model",onChange:e=>{console.log("selected ".concat(e)),b(e)},options:v,style:{width:"350px"},showSearch:!0})]})]}),(0,r.jsx)(y.Z,{onClick:()=>{g([]),I.ZP.success("Chat history cleared.")},className:"mt-4",children:"Clear Chat"})]}),(0,r.jsxs)($.Z,{className:"mt-5",style:{display:"block",maxHeight:"60vh",overflowY:"auto"},children:[(0,r.jsx)(ee.Z,{children:(0,r.jsx)(es.Z,{children:(0,r.jsx)(Q.Z,{})})}),(0,r.jsxs)(X.Z,{children:[x.map((e,l)=>(0,r.jsx)(es.Z,{children:(0,r.jsxs)(Q.Z,{children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[(0,r.jsx)("strong",{children:e.role}),"assistant"===e.role&&e.model&&(0,r.jsx)("span",{style:{fontSize:"12px",color:"#666",backgroundColor:"#f5f5f5",padding:"2px 6px",borderRadius:"4px",fontWeight:"normal"},children:e.model})]}),(0,r.jsx)("div",{style:{whiteSpace:"pre-wrap",wordBreak:"break-word",maxWidth:"100%"},children:(0,r.jsx)(l2.U,{components:{code(e){let{node:l,inline:s,className:t,children:a,...n}=e,i=/language-(\w+)/.exec(t||"");return!s&&i?(0,r.jsx)(eG.Z,{style:l4.Z,language:i[1],PreTag:"div",...n,children:String(a).replace(/\n$/,"")}):(0,r.jsx)("code",{className:t,...n,children:a})}},children:e.content})})]})},l)),(0,r.jsx)(es.Z,{children:(0,r.jsx)(Q.Z,{children:(0,r.jsx)("div",{ref:S,style:{height:"1px"}})})})]})]}),(0,r.jsx)("div",{className:"mt-3",style:{position:"absolute",bottom:5,width:"95%"},children:(0,r.jsxs)("div",{className:"flex",style:{marginTop:"16px"},children:[(0,r.jsx)(_.Z,{type:"text",value:u,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&A()},placeholder:"Type your message..."}),(0,r.jsx)(y.Z,{onClick:A,className:"ml-2",children:"Send"})]})})]})})]})})})})},l3=s(19226),l6=s(61787),l7=s(92403),l9=s(28595),se=s(68208),sl=s(9775),ss=s(41361),st=s(37527),sa=s(15883),sr=s(12660),sn=s(88009),si=s(48231),so=s(41169),sd=s(44625),sc=s(57400),sm=s(55322);let{Sider:su}=l3.default,sh=["Admin","Admin Viewer","proxy_admin","proxy_admin_viewer","org_admin"],sx=[{key:"1",page:"api-keys",label:"Virtual Keys",icon:(0,r.jsx)(l7.Z,{})},{key:"3",page:"llm-playground",label:"Test Key",icon:(0,r.jsx)(l9.Z,{})},{key:"2",page:"models",label:"Models",icon:(0,r.jsx)(se.Z,{}),roles:sh},{key:"4",page:"usage",label:"Usage",icon:(0,r.jsx)(sl.Z,{})},{key:"6",page:"teams",label:"Teams",icon:(0,r.jsx)(ss.Z,{})},{key:"17",page:"organizations",label:"Organizations",icon:(0,r.jsx)(st.Z,{}),roles:sh},{key:"5",page:"users",label:"Internal Users",icon:(0,r.jsx)(sa.Z,{}),roles:sh},{key:"14",page:"api_ref",label:"API Reference",icon:(0,r.jsx)(sr.Z,{})},{key:"16",page:"model-hub",label:"Model Hub",icon:(0,r.jsx)(sn.Z,{})},{key:"15",page:"logs",label:"Logs",icon:(0,r.jsx)(si.Z,{}),roles:sh},{key:"experimental",page:"experimental",label:"Experimental",icon:(0,r.jsx)(so.Z,{}),roles:sh,children:[{key:"9",page:"caching",label:"Caching",icon:(0,r.jsx)(sd.Z,{}),roles:sh},{key:"10",page:"budgets",label:"Budgets",icon:(0,r.jsx)(st.Z,{}),roles:sh},{key:"11",page:"guardrails",label:"Guardrails",icon:(0,r.jsx)(sc.Z,{}),roles:sh}]},{key:"settings",page:"settings",label:"Settings",icon:(0,r.jsx)(sm.Z,{}),roles:sh,children:[{key:"11",page:"general-settings",label:"Router Settings",icon:(0,r.jsx)(sm.Z,{}),roles:sh},{key:"12",page:"pass-through-settings",label:"Pass-Through",icon:(0,r.jsx)(sr.Z,{}),roles:sh},{key:"8",page:"settings",label:"Logging & Alerts",icon:(0,r.jsx)(sm.Z,{}),roles:sh},{key:"13",page:"admin-panel",label:"Admin Settings",icon:(0,r.jsx)(sm.Z,{}),roles:sh}]}];var sp=e=>{let{setPage:l,userRole:s,defaultSelectedKey:t}=e,a=(e=>{let l=sx.find(l=>l.page===e);if(l)return l.key;for(let l of sx)if(l.children){let s=l.children.find(l=>l.page===e);if(s)return s.key}return"1"})(t),n=sx.filter(e=>!e.roles||e.roles.includes(s));return(0,r.jsx)(l3.default,{style:{minHeight:"100vh"},children:(0,r.jsx)(su,{theme:"light",width:220,children:(0,r.jsx)(l6.Z,{mode:"inline",selectedKeys:[a],style:{borderRight:0,backgroundColor:"transparent",fontSize:"14px"},items:n.map(e=>{var s;return{key:e.key,icon:e.icon,label:e.label,children:null===(s=e.children)||void 0===s?void 0:s.map(e=>({key:e.key,icon:e.icon,label:e.label,onClick:()=>{let s=new URLSearchParams(window.location.search);s.set("page",e.page),window.history.pushState(null,"","?".concat(s.toString())),l(e.page)}})),onClick:e.children?void 0:()=>{let s=new URLSearchParams(window.location.search);s.set("page",e.page),window.history.pushState(null,"","?".concat(s.toString())),l(e.page)}}})})})})},sg=s(96889),sj=s(14042);console.log("process.env.NODE_ENV","production"),console.log=function(){};let sf=e=>null!==e&&("Admin"===e||"Admin Viewer"===e);var sy=e=>{let{accessToken:l,token:s,userRole:t,userID:a,keys:i,premiumUser:o}=e,d=new Date,[c,m]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),[_,Z]=(0,n.useState)([]),[b,v]=(0,n.useState)([]),[S,N]=(0,n.useState)([]),[C,I]=(0,n.useState)([]),[A,P]=(0,n.useState)([]),[E,O]=(0,n.useState)([]),[T,M]=(0,n.useState)([]),[D,F]=(0,n.useState)({}),[L,R]=(0,n.useState)([]),[z,U]=(0,n.useState)(""),[V,q]=(0,n.useState)(["all-tags"]),[B,K]=(0,n.useState)({from:new Date(Date.now()-6048e5),to:new Date}),[W,H]=(0,n.useState)(null),[G,Y]=(0,n.useState)(0),er=new Date(d.getFullYear(),d.getMonth(),1),en=new Date(d.getFullYear(),d.getMonth()+1,0),ei=ex(er),eo=ex(en);function ec(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0,notation:"compact",compactDisplay:"short"}).format(e)}console.log("keys in usage",i),console.log("premium user in usage",o);let em=async()=>{if(l)try{let e=await (0,p.g)(l);return console.log("usage tab: proxy_settings",e),e}catch(e){console.error("Error fetching proxy settings:",e)}};(0,n.useEffect)(()=>{eh(B.from,B.to)},[B,V]);let eu=async(e,s,t)=>{if(!e||!s||!l)return;s.setHours(23,59,59,999),e.setHours(0,0,0,0),console.log("uiSelectedKey",t);let a=await (0,p.b1)(l,t,e.toISOString(),s.toISOString());console.log("End user data updated successfully",a),Z(a)},eh=async(e,s)=>{if(!e||!s||!l)return;let t=await em();null!=t&&t.DISABLE_EXPENSIVE_DB_QUERIES||(s.setHours(23,59,59,999),e.setHours(0,0,0,0),N((await (0,p.J$)(l,e.toISOString(),s.toISOString(),0===V.length?void 0:V)).spend_per_tag),console.log("Tag spend data updated successfully"))};function ex(e){let l=e.getFullYear(),s=e.getMonth()+1,t=e.getDate();return"".concat(l,"-").concat(s<10?"0"+s:s,"-").concat(t<10?"0"+t:t)}console.log("Start date is ".concat(ei)),console.log("End date is ".concat(eo));let eg=async(e,l,s)=>{try{let s=await e();l(s)}catch(e){console.error(s,e)}},ej=(e,l,s,t)=>{let a=[],r=new Date(l),n=e=>{if(e.includes("-"))return e;{let[l,s]=e.split(" ");return new Date(new Date().getFullYear(),new Date("".concat(l," 01 2024")).getMonth(),parseInt(s)).toISOString().split("T")[0]}},i=new Map(e.map(e=>{let l=n(e.date);return[l,{...e,date:l}]}));for(;r<=s;){let e=r.toISOString().split("T")[0];if(i.has(e))a.push(i.get(e));else{let l={date:e,api_requests:0,total_tokens:0};t.forEach(e=>{l[e]||(l[e]=0)}),a.push(l)}r.setDate(r.getDate()+1)}return a},ef=async()=>{if(l)try{let e=await (0,p.FC)(l),s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1),a=new Date(s.getFullYear(),s.getMonth()+1,0),r=ej(e,t,a,[]),n=Number(r.reduce((e,l)=>e+(l.spend||0),0).toFixed(2));Y(n),m(r)}catch(e){console.error("Error fetching overall spend:",e)}},ey=()=>eg(()=>l&&s?(0,p.OU)(l,s,ei,eo):Promise.reject("No access token or token"),M,"Error fetching provider spend"),e_=async()=>{l&&await eg(async()=>(await (0,p.tN)(l)).map(e=>({key:(e.key_alias||e.key_name||e.api_key).substring(0,10),spend:Number(e.total_spend.toFixed(2))})),h,"Error fetching top keys")},eZ=async()=>{l&&await eg(async()=>(await (0,p.Au)(l)).map(e=>({key:e.model,spend:Number(e.total_spend.toFixed(2))})),g,"Error fetching top models")},eb=async()=>{l&&await eg(async()=>{let e=await (0,p.mR)(l),s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1),a=new Date(s.getFullYear(),s.getMonth()+1,0);return v(ej(e.daily_spend,t,a,e.teams)),P(e.teams),e.total_spend_per_team.map(e=>({name:e.team_id||"",value:Number(e.total_spend||0).toFixed(2)}))},O,"Error fetching team spend")},ev=()=>{l&&eg(async()=>(await (0,p.X)(l)).tag_names,I,"Error fetching tag names")},ew=()=>{l&&eg(()=>{var e,s;return(0,p.J$)(l,null===(e=B.from)||void 0===e?void 0:e.toISOString(),null===(s=B.to)||void 0===s?void 0:s.toISOString(),void 0)},e=>N(e.spend_per_tag),"Error fetching top tags")},ek=()=>{l&&eg(()=>(0,p.b1)(l,null,void 0,void 0),Z,"Error fetching top end users")},eS=async()=>{if(l)try{let e=await (0,p.wd)(l,ei,eo),s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1),a=new Date(s.getFullYear(),s.getMonth()+1,0),r=ej(e.daily_data||[],t,a,["api_requests","total_tokens"]);F({...e,daily_data:r})}catch(e){console.error("Error fetching global activity:",e)}},eN=async()=>{if(l)try{let e=await (0,p.xA)(l,ei,eo),s=new Date,t=new Date(s.getFullYear(),s.getMonth(),1),a=new Date(s.getFullYear(),s.getMonth()+1,0),r=e.map(e=>({...e,daily_data:ej(e.daily_data||[],t,a,["api_requests","total_tokens"])}));R(r)}catch(e){console.error("Error fetching global activity per model:",e)}};return((0,n.useEffect)(()=>{(async()=>{if(l&&s&&t&&a){let e=await em();e&&(H(e),null!=e&&e.DISABLE_EXPENSIVE_DB_QUERIES)||(console.log("fetching data - valiue of proxySettings",W),ef(),ey(),e_(),eZ(),eS(),eN(),sf(t)&&(eb(),ev(),ew(),ek()))}})()},[l,s,t,a,ei,eo]),null==W?void 0:W.DISABLE_EXPENSIVE_DB_QUERIES)?(0,r.jsx)("div",{style:{width:"100%"},className:"p-8",children:(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:"Database Query Limit Reached"}),(0,r.jsxs)(w.Z,{className:"mt-4",children:["SpendLogs in DB has ",W.NUM_SPEND_LOGS_ROWS," rows.",(0,r.jsx)("br",{}),"Please follow our guide to view usage when SpendLogs has more than 1M rows."]}),(0,r.jsx)(y.Z,{className:"mt-4",children:(0,r.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/spending_monitoring",target:"_blank",children:"View Usage Guide"})})]})}):(0,r.jsx)("div",{style:{width:"100%"},className:"p-8",children:(0,r.jsxs)(eD.Z,{children:[(0,r.jsxs)(eF.Z,{className:"mt-2",children:[(0,r.jsx)(eM.Z,{children:"All Up"}),sf(t)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eM.Z,{children:"Team Based Usage"}),(0,r.jsx)(eM.Z,{children:"Customer Usage"}),(0,r.jsx)(eM.Z,{children:"Tag Based Usage"})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{})})]}),(0,r.jsxs)(eR.Z,{children:[(0,r.jsx)(eL.Z,{children:(0,r.jsxs)(eD.Z,{children:[(0,r.jsxs)(eF.Z,{variant:"solid",className:"mt-1",children:[(0,r.jsx)(eM.Z,{children:"Cost"}),(0,r.jsx)(eM.Z,{children:"Activity"})]}),(0,r.jsxs)(eR.Z,{children:[(0,r.jsx)(eL.Z,{children:(0,r.jsxs)(f.Z,{numItems:2,className:"gap-2 h-[100vh] w-full",children:[(0,r.jsxs)(j.Z,{numColSpan:2,children:[(0,r.jsxs)(w.Z,{className:"text-tremor-default text-tremor-content dark:text-dark-tremor-content mb-2 mt-2 text-lg",children:["Project Spend ",new Date().toLocaleString("default",{month:"long"})," 1 - ",new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate()]}),(0,r.jsx)(ed,{userID:a,userRole:t,accessToken:l,userSpend:G,selectedTeam:null,userMaxBudget:null})]}),(0,r.jsx)(j.Z,{numColSpan:2,children:(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:"Monthly Spend"}),(0,r.jsx)(eU.Z,{data:c,index:"date",categories:["spend"],colors:["cyan"],valueFormatter:e=>"$ ".concat(e.toFixed(2)),yAxisWidth:100,tickGap:5})]})}),(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:"Top API Keys"}),(0,r.jsx)(eU.Z,{className:"mt-4 h-40",data:u,index:"key",categories:["spend"],colors:["cyan"],yAxisWidth:80,tickGap:5,layout:"vertical",showXAxis:!1,showLegend:!1,valueFormatter:e=>"$".concat(e.toFixed(2))})]})}),(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:"Top Models"}),(0,r.jsx)(eU.Z,{className:"mt-4 h-40",data:x,index:"key",categories:["spend"],colors:["cyan"],yAxisWidth:200,layout:"vertical",showXAxis:!1,showLegend:!1,valueFormatter:e=>"$".concat(e.toFixed(2))})]})}),(0,r.jsx)(j.Z,{numColSpan:1}),(0,r.jsx)(j.Z,{numColSpan:2,children:(0,r.jsxs)(J.Z,{className:"mb-2",children:[(0,r.jsx)(k.Z,{children:"Spend by Provider"}),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(f.Z,{numItems:2,children:[(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsx)(sj.Z,{className:"mt-4 h-40",variant:"pie",data:T,index:"provider",category:"spend",colors:["cyan"],valueFormatter:e=>"$".concat(e.toFixed(2))})}),(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Provider"}),(0,r.jsx)(el.Z,{children:"Spend"})]})}),(0,r.jsx)(X.Z,{children:T.map(e=>(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:e.provider}),(0,r.jsx)(Q.Z,{children:1e-5>parseFloat(e.spend.toFixed(2))?"less than 0.00":e.spend.toFixed(2)})]},e.provider))})]})})]})})]})})]})}),(0,r.jsx)(eL.Z,{children:(0,r.jsxs)(f.Z,{numItems:1,className:"gap-2 h-[75vh] w-full",children:[(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:"All Up"}),(0,r.jsxs)(f.Z,{numItems:2,children:[(0,r.jsxs)(j.Z,{children:[(0,r.jsxs)(ep.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["API Requests ",ec(D.sum_api_requests)]}),(0,r.jsx)(ez.Z,{className:"h-40",data:D.daily_data,valueFormatter:ec,index:"date",colors:["cyan"],categories:["api_requests"],onValueChange:e=>console.log(e)})]}),(0,r.jsxs)(j.Z,{children:[(0,r.jsxs)(ep.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Tokens ",ec(D.sum_total_tokens)]}),(0,r.jsx)(eU.Z,{className:"h-40",data:D.daily_data,valueFormatter:ec,index:"date",colors:["cyan"],categories:["total_tokens"],onValueChange:e=>console.log(e)})]})]})]}),(0,r.jsx)(r.Fragment,{children:L.map((e,l)=>(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:e.model}),(0,r.jsxs)(f.Z,{numItems:2,children:[(0,r.jsxs)(j.Z,{children:[(0,r.jsxs)(ep.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["API Requests ",ec(e.sum_api_requests)]}),(0,r.jsx)(ez.Z,{className:"h-40",data:e.daily_data,index:"date",colors:["cyan"],categories:["api_requests"],valueFormatter:ec,onValueChange:e=>console.log(e)})]}),(0,r.jsxs)(j.Z,{children:[(0,r.jsxs)(ep.Z,{style:{fontSize:"15px",fontWeight:"normal",color:"#535452"},children:["Tokens ",ec(e.sum_total_tokens)]}),(0,r.jsx)(eU.Z,{className:"h-40",data:e.daily_data,index:"date",colors:["cyan"],categories:["total_tokens"],valueFormatter:ec,onValueChange:e=>console.log(e)})]})]})]},l))})]})})]})]})}),(0,r.jsx)(eL.Z,{children:(0,r.jsxs)(f.Z,{numItems:2,className:"gap-2 h-[75vh] w-full",children:[(0,r.jsxs)(j.Z,{numColSpan:2,children:[(0,r.jsxs)(J.Z,{className:"mb-2",children:[(0,r.jsx)(k.Z,{children:"Total Spend Per Team"}),(0,r.jsx)(sg.Z,{data:E})]}),(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:"Daily Spend Per Team"}),(0,r.jsx)(eU.Z,{className:"h-72",data:b,showLegend:!0,index:"date",categories:A,yAxisWidth:80,stack:!0})]})]}),(0,r.jsx)(j.Z,{numColSpan:2})]})}),(0,r.jsxs)(eL.Z,{children:[(0,r.jsxs)("p",{className:"mb-2 text-gray-500 italic text-[12px]",children:["Customers of your LLM API calls. Tracked when a `user` param is passed in your LLM calls ",(0,r.jsx)("a",{className:"text-blue-500",href:"https://docs.litellm.ai/docs/proxy/users",target:"_blank",children:"docs here"})]}),(0,r.jsxs)(f.Z,{numItems:2,children:[(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(w.Z,{children:"Select Time Range"}),(0,r.jsx)(eT.Z,{enableSelect:!0,value:B,onValueChange:e=>{K(e),eu(e.from,e.to,null)}})]}),(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(w.Z,{children:"Select Key"}),(0,r.jsxs)(et.Z,{defaultValue:"all-keys",children:[(0,r.jsx)(ea.Z,{value:"all-keys",onClick:()=>{eu(B.from,B.to,null)},children:"All Keys"},"all-keys"),null==i?void 0:i.map((e,l)=>e&&null!==e.key_alias&&e.key_alias.length>0?(0,r.jsx)(ea.Z,{value:String(l),onClick:()=>{eu(B.from,B.to,e.token)},children:e.key_alias},l):null)]})]})]}),(0,r.jsx)(J.Z,{className:"mt-4",children:(0,r.jsxs)($.Z,{className:"max-h-[70vh] min-h-[500px]",children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Customer"}),(0,r.jsx)(el.Z,{children:"Spend"}),(0,r.jsx)(el.Z,{children:"Total Events"})]})}),(0,r.jsx)(X.Z,{children:null==_?void 0:_.map((e,l)=>{var s;return(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:e.end_user}),(0,r.jsx)(Q.Z,{children:null===(s=e.total_spend)||void 0===s?void 0:s.toFixed(4)}),(0,r.jsx)(Q.Z,{children:e.total_count})]},l)})})]})})]}),(0,r.jsxs)(eL.Z,{children:[(0,r.jsxs)(f.Z,{numItems:2,children:[(0,r.jsx)(j.Z,{numColSpan:1,children:(0,r.jsx)(eT.Z,{className:"mb-4",enableSelect:!0,value:B,onValueChange:e=>{K(e),eh(e.from,e.to)}})}),(0,r.jsx)(j.Z,{children:o?(0,r.jsx)("div",{children:(0,r.jsxs)(lZ.Z,{value:V,onValueChange:e=>q(e),children:[(0,r.jsx)(lb.Z,{value:"all-tags",onClick:()=>q(["all-tags"]),children:"All Tags"},"all-tags"),C&&C.filter(e=>"all-tags"!==e).map((e,l)=>(0,r.jsx)(lb.Z,{value:String(e),children:e},e))]})}):(0,r.jsx)("div",{children:(0,r.jsxs)(lZ.Z,{value:V,onValueChange:e=>q(e),children:[(0,r.jsx)(lb.Z,{value:"all-tags",onClick:()=>q(["all-tags"]),children:"All Tags"},"all-tags"),C&&C.filter(e=>"all-tags"!==e).map((e,l)=>(0,r.jsxs)(ea.Z,{value:String(e),disabled:!0,children:["✨ ",e," (Enterprise only Feature)"]},e))]})})})]}),(0,r.jsxs)(f.Z,{numItems:2,className:"gap-2 h-[75vh] w-full mb-4",children:[(0,r.jsx)(j.Z,{numColSpan:2,children:(0,r.jsxs)(J.Z,{children:[(0,r.jsx)(k.Z,{children:"Spend Per Tag"}),(0,r.jsxs)(w.Z,{children:["Get Started Tracking cost per tag ",(0,r.jsx)("a",{className:"text-blue-500",href:"https://docs.litellm.ai/docs/proxy/cost_tracking",target:"_blank",children:"here"})]}),(0,r.jsx)(eU.Z,{className:"h-72",data:S,index:"name",categories:["spend"],colors:["cyan"]})]})}),(0,r.jsx)(j.Z,{numColSpan:2})]})]})]})]})})};let s_=e=>{if(e)return e.toISOString().split("T")[0]};function sZ(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0,notation:"compact",compactDisplay:"short"}).format(e)}var sb=e=>{let{accessToken:l,token:s,userRole:t,userID:a,premiumUser:i}=e,[o,d]=(0,n.useState)([]),[c,m]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),[y,_]=(0,n.useState)("0"),[Z,b]=(0,n.useState)("0"),[v,w]=(0,n.useState)("0"),[k,S]=(0,n.useState)({from:new Date(Date.now()-6048e5),to:new Date});(0,n.useEffect)(()=>{l&&k&&(async()=>{g(await (0,p.zg)(l,s_(k.from),s_(k.to)))})()},[l]);let N=Array.from(new Set(x.map(e=>{var l;return null!==(l=null==e?void 0:e.api_key)&&void 0!==l?l:""}))),C=Array.from(new Set(x.map(e=>{var l;return null!==(l=null==e?void 0:e.model)&&void 0!==l?l:""})));Array.from(new Set(x.map(e=>{var l;return null!==(l=null==e?void 0:e.call_type)&&void 0!==l?l:""})));let I=async(e,s)=>{e&&s&&l&&(s.setHours(23,59,59,999),e.setHours(0,0,0,0),g(await (0,p.zg)(l,s_(e),s_(s))))};return(0,n.useEffect)(()=>{console.log("DATA IN CACHE DASHBOARD",x);let e=x;c.length>0&&(e=e.filter(e=>c.includes(e.api_key))),u.length>0&&(e=e.filter(e=>u.includes(e.model))),console.log("before processed data in cache dashboard",e);let l=0,s=0,t=0,a=e.reduce((e,a)=>{console.log("Processing item:",a),a.call_type||(console.log("Item has no call_type:",a),a.call_type="Unknown"),l+=(a.total_rows||0)-(a.cache_hit_true_rows||0),s+=a.cache_hit_true_rows||0,t+=a.cached_completion_tokens||0;let r=e.find(e=>e.name===a.call_type);return r?(r["LLM API requests"]+=(a.total_rows||0)-(a.cache_hit_true_rows||0),r["Cache hit"]+=a.cache_hit_true_rows||0,r["Cached Completion Tokens"]+=a.cached_completion_tokens||0,r["Generated Completion Tokens"]+=a.generated_completion_tokens||0):e.push({name:a.call_type,"LLM API requests":(a.total_rows||0)-(a.cache_hit_true_rows||0),"Cache hit":a.cache_hit_true_rows||0,"Cached Completion Tokens":a.cached_completion_tokens||0,"Generated Completion Tokens":a.generated_completion_tokens||0}),e},[]);_(sZ(s)),b(sZ(t));let r=s+l;r>0?w((s/r*100).toFixed(2)):w("0"),d(a),console.log("PROCESSED DATA IN CACHE DASHBOARD",a)},[c,u,k,x]),(0,r.jsxs)(J.Z,{children:[(0,r.jsxs)(f.Z,{numItems:3,className:"gap-4 mt-4",children:[(0,r.jsx)(j.Z,{children:(0,r.jsx)(lZ.Z,{placeholder:"Select API Keys",value:c,onValueChange:m,children:N.map(e=>(0,r.jsx)(lb.Z,{value:e,children:e},e))})}),(0,r.jsx)(j.Z,{children:(0,r.jsx)(lZ.Z,{placeholder:"Select Models",value:u,onValueChange:h,children:C.map(e=>(0,r.jsx)(lb.Z,{value:e,children:e},e))})}),(0,r.jsx)(j.Z,{children:(0,r.jsx)(eT.Z,{enableSelect:!0,value:k,onValueChange:e=>{S(e),I(e.from,e.to)},selectPlaceholder:"Select date range"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 mt-4",children:[(0,r.jsxs)(J.Z,{children:[(0,r.jsx)("p",{className:"text-tremor-default font-medium text-tremor-content dark:text-dark-tremor-content",children:"Cache Hit Ratio"}),(0,r.jsx)("div",{className:"mt-2 flex items-baseline space-x-2.5",children:(0,r.jsxs)("p",{className:"text-tremor-metric font-semibold text-tremor-content-strong dark:text-dark-tremor-content-strong",children:[v,"%"]})})]}),(0,r.jsxs)(J.Z,{children:[(0,r.jsx)("p",{className:"text-tremor-default font-medium text-tremor-content dark:text-dark-tremor-content",children:"Cache Hits"}),(0,r.jsx)("div",{className:"mt-2 flex items-baseline space-x-2.5",children:(0,r.jsx)("p",{className:"text-tremor-metric font-semibold text-tremor-content-strong dark:text-dark-tremor-content-strong",children:y})})]}),(0,r.jsxs)(J.Z,{children:[(0,r.jsx)("p",{className:"text-tremor-default font-medium text-tremor-content dark:text-dark-tremor-content",children:"Cached Tokens"}),(0,r.jsx)("div",{className:"mt-2 flex items-baseline space-x-2.5",children:(0,r.jsx)("p",{className:"text-tremor-metric font-semibold text-tremor-content-strong dark:text-dark-tremor-content-strong",children:Z})})]})]}),(0,r.jsx)(ep.Z,{className:"mt-4",children:"Cache Hits vs API Requests"}),(0,r.jsx)(eU.Z,{title:"Cache Hits vs API Requests",data:o,stack:!0,index:"name",valueFormatter:sZ,categories:["LLM API requests","Cache hit"],colors:["sky","teal"],yAxisWidth:48}),(0,r.jsx)(ep.Z,{className:"mt-4",children:"Cached Completion Tokens vs Generated Completion Tokens"}),(0,r.jsx)(eU.Z,{className:"mt-6",data:o,stack:!0,index:"name",valueFormatter:sZ,categories:["Generated Completion Tokens","Cached Completion Tokens"],colors:["sky","teal"],yAxisWidth:48})]})},sv=e=>{let{accessToken:l}=e,[s,t]=(0,n.useState)([]);return(0,n.useEffect)(()=>{l&&(async()=>{try{let e=await (0,p.t3)(l);console.log("guardrails: ".concat(JSON.stringify(e))),t(e.guardrails)}catch(e){console.error("Error fetching guardrails:",e)}})()},[l]),(0,r.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,r.jsxs)(w.Z,{className:"mb-4",children:["Configured guardrails and their current status. Setup guardrails in config.yaml."," ",(0,r.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 underline",children:"Docs"})]}),(0,r.jsx)(J.Z,{children:(0,r.jsxs)($.Z,{children:[(0,r.jsx)(ee.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Guardrail Name"}),(0,r.jsx)(el.Z,{children:"Mode"}),(0,r.jsx)(el.Z,{children:"Status"})]})}),(0,r.jsx)(X.Z,{children:s&&0!==s.length?null==s?void 0:s.map((e,l)=>(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(Q.Z,{children:e.guardrail_name}),(0,r.jsx)(Q.Z,{children:e.litellm_params.mode}),(0,r.jsx)(Q.Z,{children:(0,r.jsx)("div",{className:"inline-flex rounded-full px-2 py-1 text-xs font-medium\n                    ".concat(e.litellm_params.default_on?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.litellm_params.default_on?"Always On":"Per Request"})})]},l)):(0,r.jsx)(es.Z,{children:(0,r.jsx)(Q.Z,{colSpan:3,className:"mt-4 text-gray-500 text-center py-4",children:"No guardrails configured"})})})]})})]})};function sw(e){if(!e)return"Undefined Role";switch(console.log("Received user role: ".concat(e.toLowerCase())),console.log("Received user role length: ".concat(e.toLowerCase().length)),e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"org_admin":return"Org Admin";case"internal_user":return"Internal User";case"internal_viewer":return"Internal Viewer";case"app_user":return"App User";default:return"Unknown Role"}}let sk=new d.S;function sS(){let[e,l]=(0,n.useState)(""),[s,t]=(0,n.useState)(!1),[a,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[g,j]=(0,n.useState)(null),[f,y]=(0,n.useState)(null),[_,Z]=(0,n.useState)(m),[b,v]=(0,n.useState)([]),[w,k]=(0,n.useState)({PROXY_BASE_URL:"",PROXY_LOGOUT_URL:""}),[S,N]=(0,n.useState)(!0),C=(0,i.useSearchParams)(),[I,A]=(0,n.useState)({data:[]}),[P,E]=(0,n.useState)(null),O=C.get("userID"),T=C.get("invitation_id"),[M,D]=(0,n.useState)(()=>C.get("page")||"api-keys"),[F,L]=(0,n.useState)(null);return(0,n.useEffect)(()=>{E(function(e){let l=document.cookie.split("; ").find(l=>l.startsWith(e+"="));return l?l.split("=")[1]:null}("token"))},[]),(0,n.useEffect)(()=>{if(!P)return;let e=(0,o.o)(P);if(e){if(console.log("Decoded token:",e),console.log("Decoded key:",e.key),L(e.key),d(e.disabled_non_admin_personal_key_creation),e.user_role){let s=sw(e.user_role);console.log("Decoded user_role:",s),l(s),"Admin Viewer"==s&&D("usage")}else console.log("User role not defined");e.user_email?h(e.user_email):console.log("User Email is not set ".concat(e)),e.login_method?N("username_password"==e.login_method):console.log("User Email is not set ".concat(e)),e.premium_user&&t(e.premium_user),e.auth_header_name&&(0,p.K8)(e.auth_header_name)}},[P]),(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(c.aH,{client:sk,children:T?(0,r.jsx)(ex,{userID:O,userRole:e,premiumUser:s,teams:g,keys:f,setUserRole:l,userEmail:u,setUserEmail:h,setTeams:j,setKeys:y,setOrganizations:v,currentOrg:_}):(0,r.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,r.jsx)(x,{userID:O,userRole:e,userEmail:u,premiumUser:s,setProxySettings:k,proxySettings:w,currentOrg:_,organizations:b,onOrgChange:s=>{if(Z(s),console.log("org: ".concat(JSON.stringify(s))),s.members&&"Admin"!=e)for(let e of s.members)console.log("member: ".concat(JSON.stringify(e))),e.user_id==O&&(console.log("member.user_role: ".concat(e.user_role)),l(sw(e.user_role)));j(null)}}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-auto",children:[(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsx)(sp,{setPage:e=>{let l=new URLSearchParams(C);l.set("page",e),window.history.pushState(null,"","?".concat(l.toString())),D(e)},userRole:e,defaultSelectedKey:M})}),"api-keys"==M?(0,r.jsx)(ex,{userID:O,userRole:e,premiumUser:s,teams:g,keys:f,setUserRole:l,userEmail:u,setUserEmail:h,setTeams:j,setKeys:y,setOrganizations:v,currentOrg:_}):"models"==M?(0,r.jsx)(eX,{userID:O,userRole:e,token:P,keys:f,accessToken:F,modelData:I,setModelData:A,premiumUser:s}):"llm-playground"==M?(0,r.jsx)(l8,{userID:O,userRole:e,token:P,accessToken:F,disabledPersonalKeyCreation:a}):"users"==M?(0,r.jsx)(e4,{userID:O,userRole:e,token:P,keys:f,teams:g,accessToken:F,setKeys:y}):"teams"==M?(0,r.jsx)(ll,{teams:g,setTeams:j,searchParams:C,accessToken:F,userID:O,userRole:e,currentOrg:_}):"organizations"==M?(0,r.jsx)(lc,{teams:g,setTeams:j,searchParams:C,accessToken:F,userID:O,userRole:e,premiumUser:s}):"admin-panel"==M?(0,r.jsx)(lu,{setTeams:j,searchParams:C,accessToken:F,showSSOBanner:S,premiumUser:s}):"api_ref"==M?(0,r.jsx)(l1,{proxySettings:w}):"settings"==M?(0,r.jsx)(l_,{userID:O,userRole:e,accessToken:F,premiumUser:s}):"budgets"==M?(0,r.jsx)(lR,{accessToken:F}):"guardrails"==M?(0,r.jsx)(sv,{accessToken:F}):"general-settings"==M?(0,r.jsx)(lI,{userID:O,userRole:e,accessToken:F,modelData:I}):"model-hub"==M?(0,r.jsx)(l0.Z,{accessToken:F,publicPage:!1,premiumUser:s}):"caching"==M?(0,r.jsx)(sb,{userID:O,userRole:e,token:P,accessToken:F,premiumUser:s}):"pass-through-settings"==M?(0,r.jsx)(lD,{userID:O,userRole:e,accessToken:F,modelData:I}):"logs"==M?(0,r.jsx)(lX,{userID:O,userRole:e,token:P,accessToken:F}):(0,r.jsx)(sy,{userID:O,userRole:e,token:P,accessToken:F,keys:f,premiumUser:s})]})]})})})}}},function(e){e.O(0,[665,990,42,261,755,217,250,699,971,117,744],function(){return e(e.s=1900)}),_N_E=e.O()}]);