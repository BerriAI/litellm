(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5649],{21044:function(e,l,t){Promise.resolve().then(t.bind(t,78858))},78858:function(e,l,t){"use strict";t.r(l);var n=t(57437),s=t(49104),i=t(39760);l.default=()=>{let{accessToken:e}=(0,i.Z)();return(0,n.jsx)(s.Z,{accessToken:e})}},39760:function(e,l,t){"use strict";var n=t(2265),s=t(99376),i=t(14474),r=t(3914),a=t(19250);l.Z=()=>{var e,l,t,d,u,o;let c=(0,s.useRouter)(),m="undefined"!=typeof document?(0,r.e)("token"):null;(0,n.useEffect)(()=>{m||c.replace("".concat((0,a.getProxyBaseUrl)(),"/ui/login"))},[m,c]);let h=(0,n.useMemo)(()=>{if(!m)return null;try{return(0,i.o)(m)}catch(e){return(0,r.b)(),c.replace("".concat((0,a.getProxyBaseUrl)(),"/ui/login")),null}},[m,c]);return{token:m,accessToken:null!==(e=null==h?void 0:h.key)&&void 0!==e?e:null,userId:null!==(l=null==h?void 0:h.user_id)&&void 0!==l?l:null,userEmail:null!==(t=null==h?void 0:h.user_email)&&void 0!==t?t:null,userRole:function(e){if(!e)return"Undefined Role";switch(e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"org_admin":return"Org Admin";case"internal_user":return"Internal User";case"internal_user_viewer":case"internal_viewer":return"Internal Viewer";case"app_user":return"App User";default:return"Unknown Role"}}(null!==(d=null==h?void 0:h.user_role)&&void 0!==d?d:null),premiumUser:null!==(u=null==h?void 0:h.premium_user)&&void 0!==u?u:null,disabledPersonalKeyCreation:null!==(o=null==h?void 0:h.disabled_non_admin_personal_key_creation)&&void 0!==o?o:null,showSSOBanner:(null==h?void 0:h.login_method)==="username_password"}}},49104:function(e,l,t){"use strict";t.d(l,{Z:function(){return S}});var n=t(57437),s=t(53410),i=t(74998),r=t(78489),a=t(12514),d=t(47323),u=t(12485),o=t(18135),c=t(35242),m=t(29706),h=t(77991),x=t(21626),p=t(97214),g=t(28241),j=t(58834),f=t(69552),b=t(71876),y=t(84264),Z=t(2265),_=t(17906),v=t(21609),k=t(9114),w=t(19250),B=t(87452),C=t(88829),I=t(72208),T=t(49566),D=t(10032),O=t(22116),A=t(19015),N=t(37592),E=t(5545),M=e=>{let{isModalVisible:l,accessToken:t,setIsModalVisible:s,setBudgetList:i}=e,[r]=D.default.useForm(),a=async e=>{if(null!=t&&void 0!=t)try{k.Z.info("Making API Call");let l=await (0,w.budgetCreateCall)(t,e);console.log("key create Response:",l),i(e=>e?[...e,l]:[l]),k.Z.success("Budget Created"),r.resetFields()}catch(e){console.error("Error creating the key:",e),k.Z.fromBackend("Error creating the key: ".concat(e))}};return(0,n.jsx)(O.Z,{title:"Create Budget",visible:l,width:800,footer:null,onOk:()=>{s(!1),r.resetFields()},onCancel:()=>{s(!1),r.resetFields()},children:(0,n.jsxs)(D.default,{form:r,onFinish:a,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.default.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,n.jsx)(T.Z,{placeholder:""})}),(0,n.jsx)(D.default.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,n.jsx)(A.Z,{step:1,precision:2,width:200})}),(0,n.jsx)(D.default.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,n.jsx)(A.Z,{step:1,precision:2,width:200})}),(0,n.jsxs)(B.Z,{className:"mt-20 mb-8",children:[(0,n.jsx)(I.Z,{children:(0,n.jsx)("b",{children:"Optional Settings"})}),(0,n.jsxs)(C.Z,{children:[(0,n.jsx)(D.default.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,n.jsx)(A.Z,{step:.01,precision:2,width:200})}),(0,n.jsx)(D.default.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,n.jsxs)(N.default,{defaultValue:null,placeholder:"n/a",children:[(0,n.jsx)(N.default.Option,{value:"24h",children:"daily"}),(0,n.jsx)(N.default.Option,{value:"7d",children:"weekly"}),(0,n.jsx)(N.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,n.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,n.jsx)(E.ZP,{htmlType:"submit",children:"Create Budget"})})]})})},P=e=>{let{isModalVisible:l,accessToken:t,setIsModalVisible:s,setBudgetList:i,existingBudget:r,handleUpdateCall:a}=e;console.log("existingBudget",r);let[d]=D.default.useForm();(0,Z.useEffect)(()=>{d.setFieldsValue(r)},[r,d]);let u=async e=>{if(null!=t&&void 0!=t)try{k.Z.info("Making API Call"),s(!0);let l=await (0,w.budgetUpdateCall)(t,e);i(e=>e?[...e,l]:[l]),k.Z.success("Budget Updated"),d.resetFields(),a()}catch(e){console.error("Error creating the key:",e),k.Z.fromBackend("Error creating the key: ".concat(e))}};return(0,n.jsx)(O.Z,{title:"Edit Budget",visible:l,width:800,footer:null,onOk:()=>{s(!1),d.resetFields()},onCancel:()=>{s(!1),d.resetFields()},children:(0,n.jsxs)(D.default,{form:d,onFinish:u,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:r,children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.default.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,n.jsx)(T.Z,{placeholder:""})}),(0,n.jsx)(D.default.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,n.jsx)(A.Z,{step:1,precision:2,width:200})}),(0,n.jsx)(D.default.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,n.jsx)(A.Z,{step:1,precision:2,width:200})}),(0,n.jsxs)(B.Z,{className:"mt-20 mb-8",children:[(0,n.jsx)(I.Z,{children:(0,n.jsx)("b",{children:"Optional Settings"})}),(0,n.jsxs)(C.Z,{children:[(0,n.jsx)(D.default.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,n.jsx)(A.Z,{step:.01,precision:2,width:200})}),(0,n.jsx)(D.default.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,n.jsxs)(N.default,{defaultValue:null,placeholder:"n/a",children:[(0,n.jsx)(N.default.Option,{value:"24h",children:"daily"}),(0,n.jsx)(N.default.Option,{value:"7d",children:"weekly"}),(0,n.jsx)(N.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,n.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,n.jsx)(E.ZP,{htmlType:"submit",children:"Save"})})]})})},S=e=>{let{accessToken:l}=e,[t,B]=(0,Z.useState)(!1),[C,I]=(0,Z.useState)(!1),[T,D]=(0,Z.useState)(null),[O,A]=(0,Z.useState)([]),[N,E]=(0,Z.useState)(!1),[S,F]=(0,Z.useState)(!1);(0,Z.useEffect)(()=>{l&&(0,w.getBudgetList)(l).then(e=>{A(e)})},[l]);let U=async e=>{null!=l&&(D(e),I(!0))},R=e=>{D(e),F(!0)},V=async()=>{if(T&&null!=l){E(!0);try{await (0,w.budgetDeleteCall)(l,T.budget_id),k.Z.success("Budget deleted."),await H()}catch(e){console.error("Error deleting budget:",e),"function"==typeof k.Z.fromBackend?k.Z.fromBackend("Failed to delete budget"):k.Z.info("Failed to delete budget")}finally{E(!1),F(!1),D(null)}}},H=async()=>{null!=l&&(0,w.getBudgetList)(l).then(e=>{A(e)})};return(0,n.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,n.jsx)(r.Z,{size:"sm",variant:"primary",className:"mb-2",onClick:()=>B(!0),children:"+ Create Budget"}),(0,n.jsx)(M,{accessToken:l,isModalVisible:t,setIsModalVisible:B,setBudgetList:A}),T&&(0,n.jsx)(P,{accessToken:l,isModalVisible:C,setIsModalVisible:I,setBudgetList:A,existingBudget:T,handleUpdateCall:H}),(0,n.jsxs)(a.Z,{children:[(0,n.jsx)(y.Z,{children:"Create a budget to assign to customers."}),(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(j.Z,{children:(0,n.jsxs)(b.Z,{children:[(0,n.jsx)(f.Z,{children:"Budget ID"}),(0,n.jsx)(f.Z,{children:"Max Budget"}),(0,n.jsx)(f.Z,{children:"TPM"}),(0,n.jsx)(f.Z,{children:"RPM"})]})}),(0,n.jsx)(p.Z,{children:O.slice().sort((e,l)=>new Date(l.updated_at).getTime()-new Date(e.updated_at).getTime()).map((e,l)=>(0,n.jsxs)(b.Z,{children:[(0,n.jsx)(g.Z,{children:e.budget_id}),(0,n.jsx)(g.Z,{children:e.max_budget?e.max_budget:"n/a"}),(0,n.jsx)(g.Z,{children:e.tpm_limit?e.tpm_limit:"n/a"}),(0,n.jsx)(g.Z,{children:e.rpm_limit?e.rpm_limit:"n/a"}),(0,n.jsx)(d.Z,{icon:s.Z,size:"sm",className:"cursor-pointer",onClick:()=>U(e)}),(0,n.jsx)(d.Z,{icon:i.Z,size:"sm",className:"cursor-pointer hover:text-red-500",onClick:()=>R(e)})]},l))})]})]}),(0,n.jsx)(v.Z,{isOpen:S,title:"Delete Budget?",message:"Are you sure you want to delete this budget? This action cannot be undone.",resourceInformationTitle:"Budget Information",resourceInformation:[{label:"Budget ID",value:null==T?void 0:T.budget_id,code:!0},{label:"Max Budget",value:null==T?void 0:T.max_budget},{label:"TPM",value:null==T?void 0:T.tpm_limit},{label:"RPM",value:null==T?void 0:T.rpm_limit}],onCancel:()=>{F(!1)},onOk:V,confirmLoading:N}),(0,n.jsxs)("div",{className:"mt-5",children:[(0,n.jsx)(y.Z,{className:"text-base",children:"How to use budget id"}),(0,n.jsxs)(o.Z,{children:[(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(u.Z,{children:"Assign Budget to Customer"}),(0,n.jsx)(u.Z,{children:"Test it (Curl)"}),(0,n.jsx)(u.Z,{children:"Test it (OpenAI SDK)"})]}),(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(m.Z,{children:(0,n.jsx)(_.Z,{language:"bash",children:"\ncurl -X POST --location '<your_proxy_base_url>/end_user/new' \n-H 'Authorization: Bearer <your-master-key>' \n-H 'Content-Type: application/json' \n-d '{\"user_id\": \"my-customer-id', \"budget_id\": \"<BUDGET_ID>\"}' # \uD83D\uDC48 KEY CHANGE\n\n            "})}),(0,n.jsx)(m.Z,{children:(0,n.jsx)(_.Z,{language:"bash",children:'\ncurl -X POST --location \'<your_proxy_base_url>/chat/completions\' \n-H \'Authorization: Bearer <your-master-key>\' \n-H \'Content-Type: application/json\' \n-d \'{\n  "model": "gpt-3.5-turbo\', \n  "messages":[{"role": "user", "content": "Hey, how\'s it going?"}],\n  "user": "my-customer-id"\n}\' # \uD83D\uDC48 KEY CHANGE\n\n            '})}),(0,n.jsx)(m.Z,{children:(0,n.jsx)(_.Z,{language:"python",children:'from openai import OpenAI\nclient = OpenAI(\n  base_url="<your_proxy_base_url>",\n  api_key="<your_proxy_key>"\n)\n\ncompletion = client.chat.completions.create(\n  model="gpt-3.5-turbo",\n  messages=[\n    {"role": "system", "content": "You are a helpful assistant."},\n    {"role": "user", "content": "Hello!"}\n  ],\n  user="my-customer-id"\n)\n\nprint(completion.choices[0].message)'})})]})]})]})]})}},21609:function(e,l,t){"use strict";t.d(l,{Z:function(){return o}});var n=t(57437),s=t(57840),i=t(22116),r=t(51653),a=t(76188),d=t(4260),u=t(2265);function o(e){let{isOpen:l,title:t,alertMessage:o,message:c,resourceInformationTitle:m,resourceInformation:h,onCancel:x,onOk:p,confirmLoading:g,requiredConfirmation:j}=e,{Title:f,Text:b}=s.default,[y,Z]=(0,u.useState)("");return(0,u.useEffect)(()=>{l&&Z("")},[l]),(0,n.jsx)(i.Z,{title:t,open:l,onOk:p,onCancel:x,confirmLoading:g,okText:g?"Deleting...":"Delete",cancelText:"Cancel",okButtonProps:{danger:!0,disabled:!!j&&y!==j||g},cancelButtonProps:{disabled:g},children:(0,n.jsxs)("div",{className:"space-y-4",children:[o&&(0,n.jsx)(r.Z,{message:o,type:"warning"}),(0,n.jsxs)("div",{className:"mt-4 p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,n.jsx)(f,{level:5,className:"mb-3 text-gray-900",children:m}),(0,n.jsx)(a.Z,{column:1,size:"small",children:h&&h.map(e=>{let{label:l,value:t,...s}=e;return(0,n.jsx)(a.Z.Item,{label:(0,n.jsx)("span",{className:"font-semibold text-gray-700",children:l}),children:(0,n.jsx)(b,{...s,children:null!=t?t:"-"})},l)})})]}),(0,n.jsx)("div",{children:(0,n.jsx)(b,{children:c})}),j&&(0,n.jsxs)("div",{className:"mb-6 mt-4 pt-4 border-t border-gray-200",children:[(0,n.jsxs)(b,{className:"block text-base font-medium text-gray-700 mb-2",children:[(0,n.jsx)(b,{children:"Type "}),(0,n.jsx)(b,{strong:!0,type:"danger",children:j}),(0,n.jsx)(b,{children:" to confirm deletion:"})]}),(0,n.jsx)(d.default,{value:y,onChange:e=>Z(e.target.value),placeholder:j,className:"rounded-md text-base border-gray-200",autoFocus:!0})]})]})})}}},function(e){e.O(0,[9028,9409,4865,337,8135,1442,2926,2409,4546,7906,1602,8049,2971,2117,1744],function(){return e(e.s=21044)}),_N_E=e.O()}]);