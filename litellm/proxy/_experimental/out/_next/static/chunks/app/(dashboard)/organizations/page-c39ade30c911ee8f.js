(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6459],{71992:function(e,s,l){Promise.resolve().then(l.bind(l,15066))},72274:function(e,s,l){"use strict";l.d(s,{C:function(){return r.Z},x:function(){return t.Z}});var r=l(69627),t=l(17226)},42321:function(e,s,l){"use strict";l.d(s,{J:function(){return r.Z}});var r=l(12845)},15066:function(e,s,l){"use strict";l.r(s);var r=l(49937),t=l(75813),a=l(37954),n=l(99743),i=l(44934);s.default=()=>{let{userId:e,accessToken:s,userRole:l,premiumUser:c}=(0,a.Z)(),[o,d]=(0,n.useState)([]),[m,u]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(0,t.g)(s,d).then(()=>{})},[s]),(0,n.useEffect)(()=>{(0,i.Nr)(e,l,s,u).then(()=>{})},[e,l,s]),(0,r.jsx)(t.Z,{organizations:o,userRole:l,userModels:m,accessToken:s,setOrganizations:d,premiumUser:c})}},99352:function(e,s,l){"use strict";l.d(s,{Z:function(){return d}});var r=l(49937),t=l(76903),a=l(62869),n=l(31131),i=l(47018),c=l(59912),o=l(99743);function d(e){let{isOpen:s,title:l,alertMessage:d,message:m,resourceInformationTitle:u,resourceInformation:x,onCancel:h,onOk:p,confirmLoading:g,requiredConfirmation:f}=e,{Title:v,Text:b}=t.default,[j,y]=(0,o.useState)("");return(0,o.useEffect)(()=>{s&&y("")},[s]),(0,r.jsx)(a.Z,{title:l,open:s,onOk:p,onCancel:h,confirmLoading:g,okText:g?"Deleting...":"Delete",cancelText:"Cancel",okButtonProps:{danger:!0,disabled:!!f&&j!==f||g},cancelButtonProps:{disabled:g},children:(0,r.jsxs)("div",{className:"space-y-4",children:[d&&(0,r.jsx)(n.Z,{message:d,type:"warning"}),(0,r.jsxs)("div",{className:"mt-4 p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,r.jsx)(v,{level:5,className:"mb-3 text-gray-900",children:u}),(0,r.jsx)(i.Z,{column:1,size:"small",children:x&&x.map(e=>{let{label:s,value:l,...t}=e;return(0,r.jsx)(i.Z.Item,{label:(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:s}),children:(0,r.jsx)(b,{...t,children:null!=l?l:"-"})},s)})})]}),(0,r.jsx)("div",{children:(0,r.jsx)(b,{children:m})}),f&&(0,r.jsxs)("div",{className:"mb-6 mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsxs)(b,{className:"block text-base font-medium text-gray-700 mb-2",children:[(0,r.jsx)(b,{children:"Type "}),(0,r.jsx)(b,{strong:!0,type:"danger",children:f}),(0,r.jsx)(b,{children:" to confirm deletion:"})]}),(0,r.jsx)(c.default,{value:j,onChange:e=>y(e.target.value),placeholder:f,className:"rounded-md text-base border-gray-200",autoFocus:!0})]})]})})}},50306:function(e,s,l){"use strict";l.d(s,{Z:function(){return g}});var r=l(49937),t=l(19011),a=l(24652),n=l(13966),i=l(22841),c=l(31349),o=l(48710),d=l(3787),m=l(9752),u=l(19824),x=l(42321);function h(e){let{icon:s,onClick:l,className:t,disabled:a,dataTestId:n}=e;return a?(0,r.jsx)(x.J,{icon:s,size:"sm",className:"opacity-50 cursor-not-allowed","data-testid":n}):(0,r.jsx)(x.J,{icon:s,size:"sm",onClick:l,className:(0,u.cx)("cursor-pointer",t),"data-testid":n})}l(99743);let p={Edit:{icon:t.Z,className:"hover:text-blue-600"},Delete:{icon:a.Z,className:"hover:text-red-600"},Test:{icon:n.Z,className:"hover:text-blue-600"},Regenerate:{icon:i.Z,className:"hover:text-green-600"},Up:{icon:c.Z,className:"hover:text-blue-600"},Down:{icon:o.Z,className:"hover:text-blue-600"},Open:{icon:d.Z,className:"hover:text-green-600"}};function g(e){let{onClick:s,tooltipText:l,disabled:t=!1,disabledTooltipText:a,dataTestId:n,variant:i}=e,{icon:c,className:o}=p[i];return(0,r.jsx)(m.Z,{title:t?a:l,children:(0,r.jsx)("span",{children:(0,r.jsx)(h,{icon:c,onClick:s,className:o,disabled:t,dataTestId:n})})})}},15909:function(e,s,l){"use strict";var r=l(49937),t=l(99743),a=l(10840),n=l(62869),i=l(90661),c=l(9752),o=l(11330),d=l(36990),m=l.n(d),u=l(52859);s.Z=e=>{let{isVisible:s,onCancel:l,onSubmit:d,accessToken:x,title:h="Add Team Member",roles:p=[{label:"admin",value:"admin",description:"Admin role. Can create team keys, add members, and manage settings."},{label:"user",value:"user",description:"User role. Can view team info, but not manage it."}],defaultRole:g="user"}=e,[f]=a.Z.useForm(),[v,b]=(0,t.useState)([]),[j,y]=(0,t.useState)(!1),[N,_]=(0,t.useState)("user_email"),w=async(e,s)=>{if(!e){b([]);return}y(!0);try{let l=new URLSearchParams;if(l.append(s,e),null==x)return;let r=(await (0,u.userFilterUICall)(x,l)).map(e=>({label:"user_email"===s?"".concat(e.user_email):"".concat(e.user_id),value:"user_email"===s?e.user_email:e.user_id,user:e}));b(r)}catch(e){console.error("Error fetching users:",e)}finally{y(!1)}},Z=(0,t.useCallback)(m()((e,s)=>w(e,s),300),[]),C=(e,s)=>{_(s),Z(e,s)},S=(e,s)=>{let l=s.user;f.setFieldsValue({user_email:l.user_email,user_id:l.user_id,role:f.getFieldValue("role")})};return(0,r.jsx)(n.Z,{title:h,open:s,onCancel:()=>{f.resetFields(),b([]),l()},footer:null,width:800,children:(0,r.jsxs)(a.Z,{form:f,onFinish:d,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:{role:g},children:[(0,r.jsx)(a.Z.Item,{label:"Email",name:"user_email",className:"mb-4",children:(0,r.jsx)(i.default,{showSearch:!0,className:"w-full",placeholder:"Search by email",filterOption:!1,onSearch:e=>C(e,"user_email"),onSelect:(e,s)=>S(e,s),options:"user_email"===N?v:[],loading:j,allowClear:!0})}),(0,r.jsx)("div",{className:"text-center mb-4",children:"OR"}),(0,r.jsx)(a.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,r.jsx)(i.default,{showSearch:!0,className:"w-full",placeholder:"Search by user ID",filterOption:!1,onSearch:e=>C(e,"user_id"),onSelect:(e,s)=>S(e,s),options:"user_id"===N?v:[],loading:j,allowClear:!0})}),(0,r.jsx)(a.Z.Item,{label:"Member Role",name:"role",className:"mb-4",children:(0,r.jsx)(i.default,{defaultValue:g,children:p.map(e=>(0,r.jsx)(i.default.Option,{value:e.value,children:(0,r.jsxs)(c.Z,{title:e.description,children:[(0,r.jsx)("span",{className:"font-medium",children:e.label}),(0,r.jsxs)("span",{className:"ml-2 text-gray-500 text-sm",children:["- ",e.description]})]})},e.value))})}),(0,r.jsx)("div",{className:"text-right mt-4",children:(0,r.jsx)(o.ZP,{type:"default",htmlType:"submit",children:"Add Member"})})]})})}},7683:function(e,s,l){"use strict";l.d(s,{Z:function(){return f}});var r=l(49937),t=l(99743),a=l(50229),n=l(72274),i=l(52796),c=l(52859),o=function(e){let{vectorStores:s,accessToken:l}=e,[a,o]=(0,t.useState)([]);(0,t.useEffect)(()=>{(async()=>{if(l&&0!==s.length)try{let e=await (0,c.vectorStoreListCall)(l);e.data&&o(e.data.map(e=>({vector_store_id:e.vector_store_id,vector_store_name:e.vector_store_name})))}catch(e){console.error("Error fetching vector stores:",e)}})()},[l,s.length]);let d=e=>{let s=a.find(s=>s.vector_store_id===e);return s?"".concat(s.vector_store_name||s.vector_store_id," (").concat(s.vector_store_id,")"):e};return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(n.x,{className:"font-semibold text-gray-900",children:"Vector Stores"}),(0,r.jsx)(n.C,{color:"blue",size:"xs",children:s.length})]}),s.length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map((e,s)=>(0,r.jsx)("div",{className:"inline-flex items-center px-3 py-1.5 rounded-lg bg-blue-50 border border-blue-200 text-blue-800 text-sm font-medium",children:d(e)},s))}):(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)(n.x,{className:"text-gray-500 text-sm",children:"No vector stores configured"})]})]})},d=l(32939),m=l(48710),u=l(38422),x=l(9752),h=function(e){let{mcpServers:s,mcpAccessGroups:a=[],mcpToolPermissions:i={},accessToken:o}=e,[h,p]=(0,t.useState)([]),[g,f]=(0,t.useState)([]),[v,b]=(0,t.useState)(new Set),j=e=>{b(s=>{let l=new Set(s);return l.has(e)?l.delete(e):l.add(e),l})};(0,t.useEffect)(()=>{(async()=>{if(o&&s.length>0)try{let e=await (0,c.fetchMCPServers)(o);e&&Array.isArray(e)?p(e):e.data&&Array.isArray(e.data)&&p(e.data)}catch(e){console.error("Error fetching MCP servers:",e)}})()},[o,s.length]),(0,t.useEffect)(()=>{(async()=>{if(o&&a.length>0)try{let e=await Promise.resolve().then(l.bind(l,52859)).then(e=>e.fetchMCPAccessGroups(o));f(Array.isArray(e)?e:e.data||[])}catch(e){console.error("Error fetching MCP access groups:",e)}})()},[o,a.length]);let y=e=>{let s=h.find(s=>s.server_id===e);if(s){let l=e.length>7?"".concat(e.slice(0,3),"...").concat(e.slice(-4)):e;return"".concat(s.alias," (").concat(l,")")}return e},N=e=>e,_=[...s.map(e=>({type:"server",value:e})),...a.map(e=>({type:"accessGroup",value:e}))],w=_.length;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(n.x,{className:"font-semibold text-gray-900",children:"MCP Servers"}),(0,r.jsx)(n.C,{color:"blue",size:"xs",children:w})]}),w>0?(0,r.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2 pr-1",children:_.map((e,s)=>{let l="server"===e.type?i[e.value]:void 0,t=l&&l.length>0,a=v.has(e.value);return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{onClick:()=>t&&j(e.value),className:"flex items-center gap-3 py-2 px-3 rounded-lg border border-gray-200 transition-all ".concat(t?"cursor-pointer hover:bg-gray-50 hover:border-gray-300":"bg-white"),children:[(0,r.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:"server"===e.type?(0,r.jsx)(x.Z,{title:"Full ID: ".concat(e.value),placement:"top",children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,r.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-blue-500 rounded-full flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:y(e.value)})]})}):(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,r.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-green-500 rounded-full flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:N(e.value)}),(0,r.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-[9px] font-semibold text-green-600 bg-green-50 border border-green-200 rounded uppercase tracking-wide flex-shrink-0",children:"Group"})]})}),t&&(0,r.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0 whitespace-nowrap",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-gray-600",children:l.length}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:1===l.length?"tool":"tools"}),a?(0,r.jsx)(m.Z,{className:"h-3.5 w-3.5 text-gray-400 ml-0.5"}):(0,r.jsx)(u.Z,{className:"h-3.5 w-3.5 text-gray-400 ml-0.5"})]})]}),t&&a&&(0,r.jsx)("div",{className:"ml-4 pl-4 border-l-2 border-blue-200 pb-1",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1.5",children:l.map((e,s)=>(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg bg-blue-50 border border-blue-200 text-blue-800 text-xs font-medium",children:e},s))})})]},s)})}):(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)(n.x,{className:"text-gray-500 text-sm",children:"No MCP servers or access groups configured"})]})]})},p=l(78388),g=function(e){let{agents:s,agentAccessGroups:l=[],accessToken:a}=e,[i,o]=(0,t.useState)([]);(0,t.useEffect)(()=>{(async()=>{if(a&&s.length>0)try{let e=await (0,c.getAgentsList)(a);e&&e.agents&&Array.isArray(e.agents)&&o(e.agents)}catch(e){console.error("Error fetching agents:",e)}})()},[a,s.length]);let d=e=>{let s=i.find(s=>s.agent_id===e);if(s){let l=e.length>7?"".concat(e.slice(0,3),"...").concat(e.slice(-4)):e;return"".concat(s.agent_name," (").concat(l,")")}return e},m=[...s.map(e=>({type:"agent",value:e})),...l.map(e=>({type:"accessGroup",value:e}))],u=m.length;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 text-purple-600"}),(0,r.jsx)(n.x,{className:"font-semibold text-gray-900",children:"Agents"}),(0,r.jsx)(n.C,{color:"purple",size:"xs",children:u})]}),u>0?(0,r.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2 pr-1",children:m.map((e,s)=>(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)("div",{className:"flex items-center gap-3 py-2 px-3 rounded-lg border border-gray-200 bg-white",children:(0,r.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:"agent"===e.type?(0,r.jsx)(x.Z,{title:"Full ID: ".concat(e.value),placement:"top",children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,r.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-purple-500 rounded-full flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:d(e.value)})]})}):(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,r.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-green-500 rounded-full flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.value}),(0,r.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-[9px] font-semibold text-green-600 bg-green-50 border border-green-200 rounded uppercase tracking-wide flex-shrink-0",children:"Group"})]})})})},s))}):(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)(n.x,{className:"text-gray-500 text-sm",children:"No agents or access groups configured"})]})]})},f=function(e){let{objectPermission:s,variant:l="card",className:t="",accessToken:n}=e,i=(null==s?void 0:s.vector_stores)||[],c=(null==s?void 0:s.mcp_servers)||[],d=(null==s?void 0:s.mcp_access_groups)||[],m=(null==s?void 0:s.mcp_tool_permissions)||{},u=(null==s?void 0:s.agents)||[],x=(null==s?void 0:s.agent_access_groups)||[],p=(0,r.jsxs)("div",{className:"card"===l?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:[(0,r.jsx)(o,{vectorStores:i,accessToken:n}),(0,r.jsx)(h,{mcpServers:c,mcpAccessGroups:d,mcpToolPermissions:m,accessToken:n}),(0,r.jsx)(g,{agents:u,agentAccessGroups:x,accessToken:n})]});return"card"===l?(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 ".concat(t),children:[(0,r.jsx)("div",{className:"flex items-center gap-2 mb-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(a.x,{className:"font-semibold text-gray-900",children:"Object Permissions"}),(0,r.jsx)(a.x,{className:"text-xs text-gray-500",children:"Access control for Vector Stores and MCP Servers"})]})}),p]}):(0,r.jsxs)("div",{className:"".concat(t),children:[(0,r.jsx)(a.x,{className:"font-medium text-gray-900 mb-3",children:"Object Permissions"}),p]})}},54302:function(e,s,l){"use strict";var r=l(49937),t=l(12545),a=l(10840),n=l(90661),i=l(62869),c=l(11330),o=l(99743),d=l(3332);s.Z=e=>{var s,l,m;let{visible:u,onCancel:x,onSubmit:h,initialData:p,mode:g,config:f}=e,[v]=a.Z.useForm(),[b,j]=(0,o.useState)(!1);console.log("Initial Data:",p),(0,o.useEffect)(()=>{if(u){if("edit"===g&&p){let e={...p,role:p.role||f.defaultRole,max_budget_in_team:p.max_budget_in_team||null,tpm_limit:p.tpm_limit||null,rpm_limit:p.rpm_limit||null};console.log("Setting form values:",e),v.setFieldsValue(e)}else{var e;v.resetFields(),v.setFieldsValue({role:f.defaultRole||(null===(e=f.roleOptions[0])||void 0===e?void 0:e.value)})}}},[u,p,g,v,f.defaultRole,f.roleOptions]);let y=async e=>{try{j(!0);let s=Object.entries(e).reduce((e,s)=>{let[l,r]=s;if("string"==typeof r){let s=r.trim();return""===s&&("max_budget_in_team"===l||"tpm_limit"===l||"rpm_limit"===l)?{...e,[l]:null}:{...e,[l]:s}}return{...e,[l]:r}},{});console.log("Submitting form data:",s),await Promise.resolve(h(s)),v.resetFields()}catch(e){console.error("Form submission error:",e)}finally{j(!1)}},N=e=>{switch(e.type){case"input":return(0,r.jsx)(t.o,{placeholder:e.placeholder});case"numerical":return(0,r.jsx)(d.Z,{step:e.step||1,min:e.min||0,style:{width:"100%"},placeholder:e.placeholder||"Enter a numerical value"});case"select":var s;return(0,r.jsx)(n.default,{children:null===(s=e.options)||void 0===s?void 0:s.map(e=>(0,r.jsx)(n.default.Option,{value:e.value,children:e.label},e.value))});default:return null}};return(0,r.jsx)(i.Z,{title:f.title||("add"===g?"Add Member":"Edit Member"),open:u,width:1e3,footer:null,onCancel:x,children:(0,r.jsxs)(a.Z,{form:v,onFinish:y,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[f.showEmail&&(0,r.jsx)(a.Z.Item,{label:"Email",name:"user_email",className:"mb-4",rules:[{type:"email",message:"Please enter a valid email!"}],children:(0,r.jsx)(t.o,{placeholder:"user@example.com"})}),f.showEmail&&f.showUserId&&(0,r.jsx)("div",{className:"text-center mb-4",children:(0,r.jsx)(t.x,{children:"OR"})}),f.showUserId&&(0,r.jsx)(a.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,r.jsx)(t.o,{placeholder:"user_123"})}),(0,r.jsx)(a.Z.Item,{label:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"Role"}),"edit"===g&&p&&(0,r.jsxs)("span",{className:"text-gray-500 text-sm",children:["(Current: ",(l=p.role,(null===(m=f.roleOptions.find(e=>e.value===l))||void 0===m?void 0:m.label)||l),")"]})]}),name:"role",className:"mb-4",rules:[{required:!0,message:"Please select a role!"}],children:(0,r.jsx)(n.default,{children:"edit"===g&&p?[...f.roleOptions.filter(e=>e.value===p.role),...f.roleOptions.filter(e=>e.value!==p.role)].map(e=>(0,r.jsx)(n.default.Option,{value:e.value,children:e.label},e.value)):f.roleOptions.map(e=>(0,r.jsx)(n.default.Option,{value:e.value,children:e.label},e.value))})}),null===(s=f.additionalFields)||void 0===s?void 0:s.map(e=>(0,r.jsx)(a.Z.Item,{label:e.label,name:e.name,className:"mb-4",rules:e.rules,children:N(e)},e.name)),(0,r.jsxs)("div",{className:"text-right mt-6",children:[(0,r.jsx)(c.ZP,{onClick:x,className:"mr-2",disabled:b,children:"Cancel"}),(0,r.jsx)(c.ZP,{type:"default",htmlType:"submit",loading:b,children:"add"===g?b?"Adding...":"Add Member":b?"Saving...":"Save Changes"})]})]})})}},19824:function(e,s,l){"use strict";l.d(s,{cx:function(){return n}});var r=l(79120),t=l(41430);let{cva:a,cx:n,compose:i}=(0,r.ZD)({hooks:{onComplete:e=>(0,t.m6)(e)}})}},function(e){e.O(0,[1601,9512,3229,8721,3868,4927,1529,7558,1191,5047,7714,818,4636,1697,1086,7033,1810,7470,2435,2503,6900,7228,1500,422,6076,2861,4934,5813,3755,3493,1744],function(){return e(e.s=71992)}),_N_E=e.O()}]);