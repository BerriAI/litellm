(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8461],{2532:function(e,s,t){Promise.resolve().then(t.bind(t,12011))},12011:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var n=t(57437),r=t(2265),l=t(99376),a=t(78489),o=t(94789),i=t(12514),c=t(49804),u=t(67101),d=t(84264),m=t(49566),h=t(96761),x=t(84566),g=t(19250),p=t(14474),f=t(10032),w=t(5545),j=t(3914);function _(){let[e]=f.Z.useForm(),s=(0,l.useSearchParams)();(0,j.e)("token");let t=s.get("invitation_id"),_=s.get("action"),[b,Z]=(0,r.useState)(null),[y,k]=(0,r.useState)(""),[S,N]=(0,r.useState)(""),[v,E]=(0,r.useState)(null),[P,U]=(0,r.useState)(""),[C,O]=(0,r.useState)(""),[F,I]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(0,g.getUiConfig)().then(e=>{console.log("ui config in onboarding.tsx:",e),I(!1)})},[]),(0,r.useEffect)(()=>{t&&!F&&(0,g.getOnboardingCredentials)(t).then(e=>{let s=e.login_url;console.log("login_url:",s),U(s);let t=e.token,n=(0,p.o)(t);O(t),console.log("decoded:",n),Z(n.key),console.log("decoded user email:",n.user_email),N(n.user_email),E(n.user_id)})},[t,F]),(0,n.jsx)("div",{className:"mx-auto w-full max-w-md mt-10",children:(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(h.Z,{className:"text-sm mb-5 text-center",children:"\uD83D\uDE85 LiteLLM"}),(0,n.jsx)(h.Z,{className:"text-xl",children:"reset_password"===_?"Reset Password":"Sign up"}),(0,n.jsx)(d.Z,{children:"reset_password"===_?"Reset your password to access Admin UI.":"Claim your user account to login to Admin UI."}),"reset_password"!==_&&(0,n.jsx)(o.Z,{className:"mt-4",title:"SSO",icon:x.GH$,color:"sky",children:(0,n.jsxs)(u.Z,{numItems:2,className:"flex justify-between items-center",children:[(0,n.jsx)(c.Z,{children:"SSO is under the Enterprise Tier."}),(0,n.jsx)(c.Z,{children:(0,n.jsx)(a.Z,{variant:"primary",className:"mb-2",children:(0,n.jsx)("a",{href:"https://forms.gle/W3U4PZpJGFHWtHyA9",target:"_blank",children:"Get Free Trial"})})})]})}),(0,n.jsxs)(f.Z,{className:"mt-10 mb-5 mx-auto",layout:"vertical",onFinish:e=>{console.log("in handle submit. accessToken:",b,"token:",C,"formValues:",e),b&&C&&(e.user_email=S,v&&t&&(0,g.claimOnboardingToken)(b,t,v,e.password).then(e=>{document.cookie="token="+C;let s=(0,g.getProxyBaseUrl)();console.log("proxyBaseUrl:",s);let t=s?"".concat(s,"/ui/?login=success"):"/ui/?login=success";console.log("redirecting to:",t),window.location.href=t}))},children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z.Item,{label:"Email Address",name:"user_email",children:(0,n.jsx)(m.Z,{type:"email",disabled:!0,value:S,defaultValue:S,className:"max-w-md"})}),(0,n.jsx)(f.Z.Item,{label:"Password",name:"password",rules:[{required:!0,message:"password required to sign up"}],help:"reset_password"===_?"Enter your new password":"Create a password for your account",children:(0,n.jsx)(m.Z,{placeholder:"",type:"password",className:"max-w-md"})})]}),(0,n.jsx)("div",{className:"mt-10",children:(0,n.jsx)(w.ZP,{htmlType:"submit",children:"reset_password"===_?"Reset Password":"Sign Up"})})]})]})})}function b(){return(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}),children:(0,n.jsx)(_,{})})}}},function(e){e.O(0,[3665,7271,5173,3092,4865,5510,8049,2971,2117,1744],function(){return e(e.s=2532)}),_N_E=e.O()}]);