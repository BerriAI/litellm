(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{89705:function(e,s,t){Promise.resolve().then(t.bind(t,51656))},23192:function(e,s,t){"use strict";t.d(s,{Z:function(){return h}});var l=t(57437);t(2265);var a=t(67101),r=t(12485),i=t(18135),n=t(35242),o=t(29706),d=t(77991),c=t(84264),m=t(25653),u=t(96362),x=e=>{let{href:s,className:t}=e;return(0,l.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",title:"Open documentation in a new tab",className:function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter(Boolean).join(" ")}("inline-flex items-center gap-2 rounded-xl border border-zinc-200 bg-white/80 px-3.5 py-2 text-sm font-medium text-zinc-700 shadow-sm","hover:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 active:translate-y-[0.5px]",t),children:[(0,l.jsx)("span",{children:"API Reference Docs"}),(0,l.jsx)(u.Z,{"aria-hidden":!0,className:"h-4 w-4 opacity-80"}),(0,l.jsx)("span",{className:"sr-only",children:"(opens in a new tab)"})]})},h=e=>{let{proxySettings:s}=e,t="<your_proxy_base_url>",u=null==s?void 0:s.LITELLM_UI_API_DOC_BASE_URL;return u&&u.trim()?t=u:(null==s?void 0:s.PROXY_BASE_URL)&&(t=s.PROXY_BASE_URL),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a.Z,{className:"gap-2 p-8 h-[80vh] w-full mt-2",children:(0,l.jsxs)("div",{className:"mb-5",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-2xl text-tremor-content-strong dark:text-dark-tremor-content-strong font-semibold",children:"OpenAI Compatible Proxy: API Reference"}),(0,l.jsx)(x,{className:"ml-3 shrink-0",href:"https://docs.litellm.ai/docs/proxy/user_keys"})]}),(0,l.jsxs)(c.Z,{className:"mt-2 mb-2",children:["LiteLLM is OpenAI Compatible. This means your API Key works with the OpenAI SDK. Just replace the base_url to point to your litellm proxy. Example Below"," "]}),(0,l.jsxs)(i.Z,{children:[(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(r.Z,{children:"OpenAI Python SDK"}),(0,l.jsx)(r.Z,{children:"LlamaIndex"}),(0,l.jsx)(r.Z,{children:"Langchain Py"})]}),(0,l.jsxs)(d.Z,{children:[(0,l.jsx)(o.Z,{children:(0,l.jsx)(m.Z,{language:"python",code:'import openai\nclient = openai.OpenAI(\n    api_key="your_api_key",\n    base_url="'.concat(t,'" # LiteLLM Proxy is OpenAI compatible, Read More: https://docs.litellm.ai/docs/proxy/user_keys\n)\n\nresponse = client.chat.completions.create(\n    model="gpt-3.5-turbo", # model to send to the proxy\n    messages = [\n        {\n            "role": "user",\n            "content": "this is a test request, write a short poem"\n        }\n    ]\n)\n\nprint(response)')})}),(0,l.jsx)(o.Z,{children:(0,l.jsx)(m.Z,{language:"python",code:'import os, dotenv\n\nfrom llama_index.llms import AzureOpenAI\nfrom llama_index.embeddings import AzureOpenAIEmbedding\nfrom llama_index import VectorStoreIndex, SimpleDirectoryReader, ServiceContext\n\nllm = AzureOpenAI(\n    engine="azure-gpt-3.5",               # model_name on litellm proxy\n    temperature=0.0,\n    azure_endpoint="'.concat(t,'", # litellm proxy endpoint\n    api_key="sk-1234",                    # litellm proxy API Key\n    api_version="2023-07-01-preview",\n)\n\nembed_model = AzureOpenAIEmbedding(\n    deployment_name="azure-embedding-model",\n    azure_endpoint="').concat(t,'",\n    api_key="sk-1234",\n    api_version="2023-07-01-preview",\n)\n\ndocuments = SimpleDirectoryReader("llama_index_data").load_data()\nservice_context = ServiceContext.from_defaults(llm=llm, embed_model=embed_model)\nindex = VectorStoreIndex.from_documents(documents, service_context=service_context)\n\nquery_engine = index.as_query_engine()\nresponse = query_engine.query("What did the author do growing up?")\nprint(response)')})}),(0,l.jsx)(o.Z,{children:(0,l.jsx)(m.Z,{language:"python",code:'from langchain.chat_models import ChatOpenAI\nfrom langchain.prompts.chat import (\n    ChatPromptTemplate,\n    HumanMessagePromptTemplate,\n    SystemMessagePromptTemplate,\n)\nfrom langchain.schema import HumanMessage, SystemMessage\n\nchat = ChatOpenAI(\n    openai_api_base="'.concat(t,'",\n    model = "gpt-3.5-turbo",\n    temperature=0.1\n)\n\nmessages = [\n    SystemMessage(\n        content="You are a helpful assistant that im using to make a test request to."\n    ),\n    HumanMessage(\n        content="test from litellm. tell me why it\'s amazing in 1 sentence"\n    ),\n]\nresponse = chat(messages)\n\nprint(response)')})})]})]})]})})})}},25653:function(e,s,t){"use strict";var l=t(57437),a=t(2265),r=t(30401),i=t(5136),n=t(17906),o=t(1479);s.Z=e=>{let{code:s,language:t}=e,[d,c]=(0,a.useState)(!1);return(0,l.jsxs)("div",{className:"relative rounded-lg border border-gray-200 overflow-hidden",children:[(0,l.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(s),c(!0),setTimeout(()=>c(!1),2e3)},className:"absolute top-3 right-3 p-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-600 z-10","aria-label":"Copy code",children:d?(0,l.jsx)(r.Z,{size:16}):(0,l.jsx)(i.Z,{size:16})}),(0,l.jsx)(n.Z,{language:t,style:o.Z,customStyle:{margin:0,padding:"1.5rem",borderRadius:"0.5rem",fontSize:"0.9rem",backgroundColor:"#fafafa"},showLineNumbers:!0,children:s})]})}},51656:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return td}});var l=t(57437),a=t(23192),r=t(80443),i=t(92403),n=t(28595),o=t(68208),d=t(9775),c=t(41361),m=t(37527),u=t(15883),x=t(99458),h=t(12660),p=t(88009),g=t(48231),j=t(57400),f=t(58630),y=t(29436),v=t(44625),b=t(41169),_=t(69993),Z=t(38434),N=t(71891),w=t(55322),k=t(11429),S=t(13817),C=t(18310),T=t(60985),A=t(20347),L=t(79262);let{Sider:z}=S.default;var P=e=>{let{accessToken:s,setPage:t,userRole:a,defaultSelectedKey:r,collapsed:P=!1}=e,I=[{key:"api-keys",page:"api-keys",label:"Virtual Keys",icon:(0,l.jsx)(i.Z,{style:{fontSize:"18px"}})},{key:"llm-playground",page:"llm-playground",label:"Playground",icon:(0,l.jsx)(n.Z,{style:{fontSize:"18px"}}),roles:A.LQ},{key:"models",page:"models",label:"Models + Endpoints",icon:(0,l.jsx)(o.Z,{style:{fontSize:"18px"}}),roles:A.LQ},{key:"new_usage",page:"new_usage",label:"Usage",icon:(0,l.jsx)(d.Z,{style:{fontSize:"18px"}}),roles:[...A.ZL,...A.lo]},{key:"teams",page:"teams",label:"Teams",icon:(0,l.jsx)(c.Z,{style:{fontSize:"18px"}})},{key:"organizations",page:"organizations",label:"Organizations",icon:(0,l.jsx)(m.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"users",page:"users",label:"Internal Users",icon:(0,l.jsx)(u.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"budgets",page:"budgets",label:"Budgets",icon:(0,l.jsx)(x.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"api_ref",page:"api_ref",label:"API Reference",icon:(0,l.jsx)(h.Z,{style:{fontSize:"18px"}})},{key:"model-hub-table",page:"model-hub-table",label:"AI Hub",icon:(0,l.jsx)(p.Z,{style:{fontSize:"18px"}})},{key:"logs",page:"logs",label:"Logs",icon:(0,l.jsx)(g.Z,{style:{fontSize:"18px"}})},{key:"guardrails",page:"guardrails",label:"Guardrails",icon:(0,l.jsx)(j.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"mcp-servers",page:"mcp-servers",label:"MCP Servers",icon:(0,l.jsx)(f.Z,{style:{fontSize:"18px"}})},{key:"tools",page:"tools",label:"Tools",icon:(0,l.jsx)(f.Z,{style:{fontSize:"18px"}}),children:[{key:"search-tools",page:"search-tools",label:"Search Tools",icon:(0,l.jsx)(y.Z,{style:{fontSize:"18px"}})},{key:"vector-stores",page:"vector-stores",label:"Vector Stores",icon:(0,l.jsx)(v.Z,{style:{fontSize:"18px"}}),roles:A.ZL}]},{key:"experimental",page:"experimental",label:"Experimental",icon:(0,l.jsx)(b.Z,{style:{fontSize:"18px"}}),children:[{key:"caching",page:"caching",label:"Caching",icon:(0,l.jsx)(v.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"agents",page:"agents",label:"Agents",icon:(0,l.jsx)(_.Z,{style:{fontSize:"18px"}}),roles:A.LQ},{key:"prompts",page:"prompts",label:"Prompts",icon:(0,l.jsx)(Z.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"transform-request",page:"transform-request",label:"API Playground",icon:(0,l.jsx)(h.Z,{style:{fontSize:"18px"}}),roles:[...A.ZL,...A.lo]},{key:"tag-management",page:"tag-management",label:"Tag Management",icon:(0,l.jsx)(N.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"4",page:"usage",label:"Old Usage",icon:(0,l.jsx)(d.Z,{style:{fontSize:"18px"}})}]},{key:"settings",page:"settings",label:"Settings",icon:(0,l.jsx)(w.Z,{style:{fontSize:"18px"}}),roles:A.ZL,children:[{key:"router-settings",page:"router-settings",label:"Router Settings",icon:(0,l.jsx)(w.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"logging-and-alerts",page:"logging-and-alerts",label:"Logging & Alerts",icon:(0,l.jsx)(w.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"admin-panel",page:"admin-panel",label:"Admin Settings",icon:(0,l.jsx)(w.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"cost-tracking",page:"cost-tracking",label:"Cost Tracking",icon:(0,l.jsx)(d.Z,{style:{fontSize:"18px"}}),roles:A.ZL},{key:"ui-theme",page:"ui-theme",label:"UI Theme",icon:(0,l.jsx)(k.Z,{style:{fontSize:"18px"}}),roles:A.ZL}]}],D=(e=>{let s=I.find(s=>s.page===e);if(s)return s.key;for(let s of I)if(s.children){let t=s.children.find(s=>s.page===e);if(t)return t.key}return"1"})(r),E=I.filter(e=>{let s=!e.roles||e.roles.includes(a);return console.log("Menu item ".concat(e.label,": roles=").concat(e.roles,", userRole=").concat(a,", hasAccess=").concat(s)),!!s&&(e.children&&(e.children=e.children.filter(e=>!e.roles||e.roles.includes(a))),!0)});return(0,l.jsx)(S.default,{children:(0,l.jsxs)(z,{theme:"light",width:220,collapsed:P,collapsedWidth:80,collapsible:!0,trigger:null,style:{transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative"},children:[(0,l.jsx)(C.ZP,{theme:{components:{Menu:{iconSize:18,fontSize:14}}},children:(0,l.jsx)(T.Z,{mode:"inline",selectedKeys:[D],defaultOpenKeys:P?[]:["llm-tools"],inlineCollapsed:P,className:"custom-sidebar-menu",style:{borderRight:0,backgroundColor:"transparent",fontSize:"14px"},items:E.map(e=>{var s;return{key:e.key,icon:e.icon,label:e.label,children:null===(s=e.children)||void 0===s?void 0:s.map(e=>({key:e.key,icon:e.icon,label:e.label,onClick:()=>{let s=new URLSearchParams(window.location.search);s.set("page",e.page),window.history.pushState(null,"","?".concat(s.toString())),t(e.page)}})),onClick:e.children?void 0:()=>{let s=new URLSearchParams(window.location.search);s.set("page",e.page),window.history.pushState(null,"","?".concat(s.toString())),t(e.page)}}})})}),(0,A.tY)(a)&&!P&&(0,l.jsx)(L.Z,{accessToken:s,width:220})]})})},I=e=>{let{setPage:s,defaultSelectedKey:t,sidebarCollapsed:a}=e,{accessToken:i,userRole:n}=(0,r.Z)();return(0,l.jsx)(P,{accessToken:i,setPage:s,userRole:n,defaultSelectedKey:t,collapsed:a})},D=t(31200),E=t(81518),O=t(90773),M=t(2265),F=t(16312),R=t(22116),B=t(19250),U=t(10032),q=t(42264),V=t(5545),H=t(44851),K=t(4260),W=t(63709),Y=t(45246),J=t(96473);let G={basic:{key:"basic",title:"Basic Information",defaultExpanded:!0,fields:[{name:"name",label:"Display Name",type:"text",required:!0,placeholder:"e.g., Customer Support Agent"},{name:"description",label:"Description",type:"textarea",required:!0,placeholder:"Describe what this agent does...",rows:3},{name:"url",label:"URL",type:"url",required:!0,placeholder:"http://localhost:9999/",tooltip:"Base URL where the agent is hosted"},{name:"version",label:"Version",type:"text",placeholder:"1.0.0",defaultValue:"1.0.0"},{name:"protocolVersion",label:"Protocol Version",type:"text",placeholder:"1.0",defaultValue:"1.0"}]},skills:{key:"skills",title:"Skills",fields:[{name:"skills",label:"Skills",type:"list",defaultValue:[]}]},capabilities:{key:"capabilities",title:"Capabilities",fields:[{name:"streaming",label:"Streaming",type:"switch",defaultValue:!1},{name:"pushNotifications",label:"Push Notifications",type:"switch"},{name:"stateTransitionHistory",label:"State Transition History",type:"switch"}]},optional:{key:"optional",title:"Optional Settings",fields:[{name:"iconUrl",label:"Icon URL",type:"url",placeholder:"https://example.com/icon.png"},{name:"documentationUrl",label:"Documentation URL",type:"url",placeholder:"https://docs.example.com"},{name:"supportsAuthenticatedExtendedCard",label:"Supports Authenticated Extended Card",type:"switch"}]},litellm:{key:"litellm",title:"LiteLLM Parameters",fields:[{name:"model",label:"Model (Optional)",type:"text"},{name:"make_public",label:"Make Public",type:"switch"}]}},X=()=>{let e={defaultInputModes:["text"],defaultOutputModes:["text"]};return Object.values(G).forEach(s=>{s.fields.forEach(s=>{void 0!==s.defaultValue&&(e[s.name]=s.defaultValue)})}),e},$=(e,s)=>{var t,l;let a={agent_name:e.agent_name,agent_card_params:{protocolVersion:e.protocolVersion||"1.0",name:e.name,description:e.description,url:e.url,version:e.version||"1.0.0",defaultInputModes:(null==s?void 0:null===(t=s.agent_card_params)||void 0===t?void 0:t.defaultInputModes)||["text"],defaultOutputModes:(null==s?void 0:null===(l=s.agent_card_params)||void 0===l?void 0:l.defaultOutputModes)||["text"],capabilities:{streaming:!0===e.streaming,...void 0!==e.pushNotifications&&{pushNotifications:e.pushNotifications},...void 0!==e.stateTransitionHistory&&{stateTransitionHistory:e.stateTransitionHistory}},skills:e.skills||[],...e.iconUrl&&{iconUrl:e.iconUrl},...e.documentationUrl&&{documentationUrl:e.documentationUrl},...void 0!==e.supportsAuthenticatedExtendedCard&&{supportsAuthenticatedExtendedCard:e.supportsAuthenticatedExtendedCard}}};return(e.model||void 0!==e.make_public)&&(a.litellm_params={...e.model&&{model:e.model},...void 0!==e.make_public&&{make_public:e.make_public}}),a},Q=e=>{var s,t,l,a,r,i,n,o,d,c,m,u,x,h,p,g,j,f;let y=(null===(t=e.agent_card_params)||void 0===t?void 0:null===(s=t.skills)||void 0===s?void 0:s.map(e=>({...e,tags:e.tags,examples:e.examples||[]})))||[];return{agent_name:e.agent_name,name:null===(l=e.agent_card_params)||void 0===l?void 0:l.name,description:null===(a=e.agent_card_params)||void 0===a?void 0:a.description,url:null===(r=e.agent_card_params)||void 0===r?void 0:r.url,version:null===(i=e.agent_card_params)||void 0===i?void 0:i.version,protocolVersion:null===(n=e.agent_card_params)||void 0===n?void 0:n.protocolVersion,streaming:null===(d=e.agent_card_params)||void 0===d?void 0:null===(o=d.capabilities)||void 0===o?void 0:o.streaming,pushNotifications:null===(m=e.agent_card_params)||void 0===m?void 0:null===(c=m.capabilities)||void 0===c?void 0:c.pushNotifications,stateTransitionHistory:null===(x=e.agent_card_params)||void 0===x?void 0:null===(u=x.capabilities)||void 0===u?void 0:u.stateTransitionHistory,skills:y,iconUrl:null===(h=e.agent_card_params)||void 0===h?void 0:h.iconUrl,documentationUrl:null===(p=e.agent_card_params)||void 0===p?void 0:p.documentationUrl,supportsAuthenticatedExtendedCard:null===(g=e.agent_card_params)||void 0===g?void 0:g.supportsAuthenticatedExtendedCard,model:null===(j=e.litellm_params)||void 0===j?void 0:j.model,make_public:null===(f=e.litellm_params)||void 0===f?void 0:f.make_public}},{Panel:ee}=H.default;var es=e=>{let{showAgentName:s=!0}=e;return(0,l.jsxs)(l.Fragment,{children:[s&&(0,l.jsx)(U.Z.Item,{label:"Agent Name",name:"agent_name",rules:[{required:!0,message:"Please enter a unique agent name"}],tooltip:"Unique identifier for the agent",children:(0,l.jsx)(K.default,{placeholder:"e.g., customer-support-agent"})}),(0,l.jsxs)(H.default,{defaultActiveKey:["basic"],style:{marginBottom:16},children:[(0,l.jsx)(ee,{header:"".concat(G.basic.title," (Required)"),children:G.basic.fields.map(e=>(0,l.jsx)(U.Z.Item,{label:e.label,name:e.name,rules:e.required?[{required:!0,message:"Please enter ".concat(e.label.toLowerCase())}]:void 0,tooltip:e.tooltip,children:"textarea"===e.type?(0,l.jsx)(K.default.TextArea,{rows:e.rows,placeholder:e.placeholder}):(0,l.jsx)(K.default,{placeholder:e.placeholder})},e.name))},G.basic.key),(0,l.jsx)(ee,{header:"".concat(G.skills.title," (Required)"),children:(0,l.jsx)(U.Z.List,{name:"skills",children:(e,s)=>{let{add:t,remove:a}=s;return(0,l.jsxs)(l.Fragment,{children:[e.map(e=>(0,l.jsxs)("div",{style:{marginBottom:16,padding:16,border:"1px solid #d9d9d9",borderRadius:4},children:[(0,l.jsx)(U.Z.Item,{...e,label:"Skill ID",name:[e.name,"id"],rules:[{required:!0,message:"Required"}],children:(0,l.jsx)(K.default,{placeholder:"e.g., hello_world"})}),(0,l.jsx)(U.Z.Item,{...e,label:"Skill Name",name:[e.name,"name"],rules:[{required:!0,message:"Required"}],children:(0,l.jsx)(K.default,{placeholder:"e.g., Returns hello world"})}),(0,l.jsx)(U.Z.Item,{...e,label:"Description",name:[e.name,"description"],rules:[{required:!0,message:"Required"}],children:(0,l.jsx)(K.default.TextArea,{rows:2,placeholder:"What this skill does"})}),(0,l.jsx)(U.Z.Item,{...e,label:"Tags (comma-separated)",name:[e.name,"tags"],rules:[{required:!0,message:"Required"}],getValueFromEvent:e=>e.target.value.split(",").map(e=>e.trim()),getValueProps:e=>({value:Array.isArray(e)?e.join(", "):e}),children:(0,l.jsx)(K.default,{placeholder:"e.g., hello world, greeting"})}),(0,l.jsx)(U.Z.Item,{...e,label:"Examples (comma-separated)",name:[e.name,"examples"],getValueFromEvent:e=>e.target.value.split(",").map(e=>e.trim()).filter(e=>e),getValueProps:e=>({value:Array.isArray(e)?e.join(", "):""}),children:(0,l.jsx)(K.default,{placeholder:"e.g., hi, hello world"})}),(0,l.jsx)(V.ZP,{type:"link",danger:!0,onClick:()=>a(e.name),icon:(0,l.jsx)(Y.Z,{}),children:"Remove Skill"})]},e.key)),(0,l.jsx)(V.ZP,{type:"dashed",onClick:()=>t(),icon:(0,l.jsx)(J.Z,{}),style:{width:"100%"},children:"Add Skill"})]})}})},G.skills.key),(0,l.jsx)(ee,{header:G.capabilities.title,children:G.capabilities.fields.map(e=>(0,l.jsx)(U.Z.Item,{label:e.label,name:e.name,valuePropName:"checked",children:(0,l.jsx)(W.Z,{})},e.name))},G.capabilities.key),(0,l.jsx)(ee,{header:G.optional.title,children:G.optional.fields.map(e=>(0,l.jsx)(U.Z.Item,{label:e.label,name:e.name,valuePropName:"switch"===e.type?"checked":void 0,children:"switch"===e.type?(0,l.jsx)(W.Z,{}):(0,l.jsx)(K.default,{placeholder:e.placeholder})},e.name))},G.optional.key),(0,l.jsx)(ee,{header:G.litellm.title,children:G.litellm.fields.map(e=>(0,l.jsx)(U.Z.Item,{label:e.label,name:e.name,valuePropName:"switch"===e.type?"checked":void 0,children:"switch"===e.type?(0,l.jsx)(W.Z,{}):(0,l.jsx)(K.default,{placeholder:e.placeholder})},e.name))},G.litellm.key)]})]})},et=e=>{let{visible:s,onClose:t,accessToken:a,onSuccess:r}=e,[i]=U.Z.useForm(),[n,o]=(0,M.useState)(!1),d=async e=>{if(!a){q.ZP.error("No access token available");return}o(!0);try{let s=$(e);await (0,B.createAgentCall)(a,s),q.ZP.success("Agent created successfully"),i.resetFields(),r(),t()}catch(e){console.error("Error creating agent:",e),q.ZP.error("Failed to create agent")}finally{o(!1)}},c=()=>{i.resetFields(),t()};return(0,l.jsx)(R.Z,{title:"Add New Agent",open:s,onCancel:c,footer:null,width:800,children:(0,l.jsxs)(U.Z,{form:i,layout:"vertical",onFinish:d,initialValues:X(),children:[(0,l.jsx)(es,{showAgentName:!0}),(0,l.jsx)(U.Z.Item,{children:(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[(0,l.jsx)(V.ZP,{onClick:c,children:"Cancel"}),(0,l.jsx)(V.ZP,{htmlType:"submit",loading:n,children:"Create Agent"})]})})]})})},el=t(2967),ea=t(74998),er=t(99981),ei=e=>{let{agentsList:s,isLoading:t,onDeleteClick:a,accessToken:r,onAgentUpdated:i,isAdmin:n,onAgentClick:o}=e;return t?(0,l.jsx)("div",{children:"Loading agents..."}):s&&0!==s.length?(0,l.jsxs)(el.iA,{children:[(0,l.jsx)(el.ss,{children:(0,l.jsxs)(el.SC,{children:[(0,l.jsx)(el.xs,{children:"Agent Name"}),(0,l.jsx)(el.xs,{children:"Description"}),(0,l.jsx)(el.xs,{children:"Created At"}),n&&(0,l.jsx)(el.xs,{children:"Actions"})]})}),(0,l.jsx)(el.RM,{children:s.map(e=>{var s;return(0,l.jsxs)(el.SC,{children:[(0,l.jsx)(el.pj,{children:(0,l.jsx)(er.Z,{title:e.agent_name||"",children:(0,l.jsx)(el.zx,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>o(e.agent_id),children:e.agent_name||""})})}),(0,l.jsx)(el.pj,{children:(null===(s=e.agent_card_params)||void 0===s?void 0:s.description)||"No description"}),(0,l.jsx)(el.pj,{children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),n&&(0,l.jsx)(el.pj,{children:(0,l.jsx)("div",{className:"flex space-x-2",children:(0,l.jsx)(er.Z,{title:"Delete agent",children:(0,l.jsx)(el.JO,{icon:ea.Z,size:"sm",className:"cursor-pointer text-red-500 hover:text-red-700",onClick:s=>{s.stopPropagation(),a(e.agent_id,e.agent_name)},"aria-label":"Delete agent"})})})})]},e.agent_id)})})]}):(0,l.jsx)("div",{children:"No agents found. Create one to get started."})},en=t(78489),eo=t(12514),ed=t(12485),ec=t(18135),em=t(35242),eu=t(29706),ex=t(77991),eh=t(84264),ep=t(96761),eg=t(10353),ej=t(76188),ef=t(10900),ey=e=>{var s,t,a,r,i,n,o,d,c,m,u,x,h,p,g,j,f,y;let{agentId:v,onClose:b,accessToken:_,isAdmin:Z}=e,[N,w]=(0,M.useState)(null),[k,S]=(0,M.useState)(!0),[C,T]=(0,M.useState)(!1),[A,L]=(0,M.useState)(!1),[z]=U.Z.useForm();(0,M.useEffect)(()=>{P()},[v,_]);let P=async()=>{if(_){S(!0);try{let e=await (0,B.getAgentInfo)(_,v);w(e),z.setFieldsValue(Q(e))}catch(e){console.error("Error fetching agent info:",e),q.ZP.error("Failed to load agent information")}finally{S(!1)}}},I=async e=>{if(_&&N){L(!0);try{let s=$(e,N);await (0,B.patchAgentCall)(_,v,s),q.ZP.success("Agent updated successfully"),T(!1),P()}catch(e){console.error("Error updating agent:",e),q.ZP.error("Failed to update agent")}finally{L(!1)}}};if(k)return(0,l.jsx)("div",{className:"p-4",children:(0,l.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,l.jsx)(eg.Z,{size:"large"})})});if(!N)return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("div",{className:"text-center",children:"Agent not found"}),(0,l.jsx)(en.Z,{onClick:b,className:"mt-4",children:"Back to Agents List"})]});let D=e=>e?new Date(e).toLocaleString():"-";return(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(en.Z,{icon:ef.Z,variant:"light",onClick:b,className:"mb-4",children:"Back to Agents"}),(0,l.jsx)(ep.Z,{children:N.agent_name||"Unnamed Agent"}),(0,l.jsx)(eh.Z,{className:"text-gray-500 font-mono",children:N.agent_id})]}),(0,l.jsxs)(ec.Z,{children:[(0,l.jsxs)(em.Z,{className:"mb-4",children:[(0,l.jsx)(ed.Z,{children:"Overview"},"overview"),Z?(0,l.jsx)(ed.Z,{children:"Settings"},"settings"):(0,l.jsx)(l.Fragment,{})]}),(0,l.jsxs)(ex.Z,{children:[(0,l.jsxs)(eu.Z,{children:[(0,l.jsxs)(ej.Z,{bordered:!0,column:1,children:[(0,l.jsx)(ej.Z.Item,{label:"Agent ID",children:N.agent_id}),(0,l.jsx)(ej.Z.Item,{label:"Agent Name",children:N.agent_name}),(0,l.jsx)(ej.Z.Item,{label:"Display Name",children:(null===(s=N.agent_card_params)||void 0===s?void 0:s.name)||"-"}),(0,l.jsx)(ej.Z.Item,{label:"Description",children:(null===(t=N.agent_card_params)||void 0===t?void 0:t.description)||"-"}),(0,l.jsx)(ej.Z.Item,{label:"URL",children:(null===(a=N.agent_card_params)||void 0===a?void 0:a.url)||"-"}),(0,l.jsx)(ej.Z.Item,{label:"Version",children:(null===(r=N.agent_card_params)||void 0===r?void 0:r.version)||"-"}),(0,l.jsx)(ej.Z.Item,{label:"Protocol Version",children:(null===(i=N.agent_card_params)||void 0===i?void 0:i.protocolVersion)||"-"}),(0,l.jsx)(ej.Z.Item,{label:"Streaming",children:(null===(o=N.agent_card_params)||void 0===o?void 0:null===(n=o.capabilities)||void 0===n?void 0:n.streaming)?"Yes":"No"}),(null===(c=N.agent_card_params)||void 0===c?void 0:null===(d=c.capabilities)||void 0===d?void 0:d.pushNotifications)&&(0,l.jsx)(ej.Z.Item,{label:"Push Notifications",children:"Yes"}),(null===(u=N.agent_card_params)||void 0===u?void 0:null===(m=u.capabilities)||void 0===m?void 0:m.stateTransitionHistory)&&(0,l.jsx)(ej.Z.Item,{label:"State Transition History",children:"Yes"}),(0,l.jsxs)(ej.Z.Item,{label:"Skills",children:[(null===(h=N.agent_card_params)||void 0===h?void 0:null===(x=h.skills)||void 0===x?void 0:x.length)||0," configured"]}),(null===(p=N.litellm_params)||void 0===p?void 0:p.model)&&(0,l.jsx)(ej.Z.Item,{label:"Model",children:N.litellm_params.model}),(null===(g=N.litellm_params)||void 0===g?void 0:g.make_public)!==void 0&&(0,l.jsx)(ej.Z.Item,{label:"Make Public",children:N.litellm_params.make_public?"Yes":"No"}),(null===(j=N.agent_card_params)||void 0===j?void 0:j.iconUrl)&&(0,l.jsx)(ej.Z.Item,{label:"Icon URL",children:N.agent_card_params.iconUrl}),(null===(f=N.agent_card_params)||void 0===f?void 0:f.documentationUrl)&&(0,l.jsx)(ej.Z.Item,{label:"Documentation URL",children:N.agent_card_params.documentationUrl}),(0,l.jsx)(ej.Z.Item,{label:"Created At",children:D(N.created_at)}),(0,l.jsx)(ej.Z.Item,{label:"Updated At",children:D(N.updated_at)})]}),(null===(y=N.agent_card_params)||void 0===y?void 0:y.skills)&&N.agent_card_params.skills.length>0&&(0,l.jsxs)("div",{style:{marginTop:24},children:[(0,l.jsx)(ep.Z,{children:"Skills"}),(0,l.jsx)(ej.Z,{bordered:!0,column:1,style:{marginTop:16},children:N.agent_card_params.skills.map((e,s)=>(0,l.jsx)(ej.Z.Item,{label:e.name||"Skill ".concat(s+1),children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Description:"})," ",e.description]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Tags:"})," ",Array.isArray(e.tags)?e.tags.join(", "):e.tags]}),e.examples&&e.examples.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Examples:"})," ",Array.isArray(e.examples)?e.examples.join(", "):e.examples]})]})},s))})]})]}),Z&&(0,l.jsx)(eu.Z,{children:(0,l.jsxs)(eo.Z,{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)(ep.Z,{children:"Agent Settings"}),!C&&(0,l.jsx)(en.Z,{onClick:()=>T(!0),children:"Edit Settings"})]}),C?(0,l.jsxs)(U.Z,{form:z,layout:"vertical",onFinish:I,children:[(0,l.jsx)(U.Z.Item,{label:"Agent ID",children:(0,l.jsx)(K.default,{value:N.agent_id,disabled:!0})}),(0,l.jsx)(es,{showAgentName:!0}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,l.jsx)(V.ZP,{onClick:()=>{T(!1),P()},children:"Cancel"}),(0,l.jsx)(en.Z,{loading:A,children:"Save Changes"})]})]}):(0,l.jsx)(eh.Z,{children:'Click "Edit Settings" to modify agent configuration.'})]})})]})]})]})},ev=t(9114),eb=e=>{let{accessToken:s,userRole:t}=e,[a,r]=(0,M.useState)([]),[i,n]=(0,M.useState)(!1),[o,d]=(0,M.useState)(!1),[c,m]=(0,M.useState)(!1),[u,x]=(0,M.useState)(null),[h,p]=(0,M.useState)(null),g=!!t&&(0,A.tY)(t),j=async()=>{if(s){d(!0);try{let e=await (0,B.getAgentsList)(s);console.log("agents: ".concat(JSON.stringify(e))),r(e.agents)}catch(e){console.error("Error fetching agents:",e)}finally{d(!1)}}};(0,M.useEffect)(()=>{j()},[s]);let f=async()=>{if(u&&s){m(!0);try{await (0,B.deleteAgentCall)(s,u.id),ev.Z.success('Agent "'.concat(u.name,'" deleted successfully')),j()}catch(e){console.error("Error deleting agent:",e),ev.Z.fromBackend("Failed to delete agent")}finally{m(!1),x(null)}}};return(0,l.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsxs)("div",{className:"flex-col gap-2",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"Agents"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"List of A2A-spec agents that are available to be used in your organization. Go to AI Hub, to make agents public."})]}),(0,l.jsx)(F.z,{onClick:()=>{h&&p(null),n(!0)},disabled:!s,children:"+ Add New Agent"})]}),h?(0,l.jsx)(ey,{agentId:h,onClose:()=>p(null),accessToken:s,isAdmin:g}):(0,l.jsx)(ei,{agentsList:a,isLoading:o,onDeleteClick:(e,s)=>{x({id:e,name:s})},accessToken:s,onAgentUpdated:j,isAdmin:g,onAgentClick:e=>p(e)}),(0,l.jsx)(et,{visible:i,onClose:()=>{n(!1)},accessToken:s,onSuccess:()=>{j()}}),u&&(0,l.jsxs)(R.Z,{title:"Delete Agent",open:null!==u,onOk:f,onCancel:()=>{x(null)},confirmLoading:c,okText:"Delete",okButtonProps:{danger:!0},children:[(0,l.jsxs)("p",{children:["Are you sure you want to delete agent: ",u.name,"?"]}),(0,l.jsx)("p",{children:"This action cannot be undone."})]})]})},e_=t(49104),eZ=t(66600),eN=t(39210),ew=t(94987),ek=t(71668),eS=t(42673);let eC=e=>{let s=Object.keys(eS.fK).find(s=>eS.fK[s]===e);if(s){let e=eS.Cl[s],t=eS.cd[e];return{displayName:e,logo:t,enumKey:s}}return{displayName:e,logo:"",enumKey:null}},eT=e=>eS.fK[e]||null,eA=(e,s)=>{let t=e.target,l=t.parentElement;if(l){let e=document.createElement("div");e.className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs",e.textContent=s.charAt(0),l.replaceChild(e,t)}};var eL=t(47323),ez=t(49566),eP=t(82422),eI=t(3837),eD=t(53410),eE=t(21626),eO=t(97214),eM=t(28241),eF=t(58834),eR=t(69552),eB=t(71876);function eU(e){let{data:s,columns:t,isLoading:a=!1,loadingMessage:r="Loading...",emptyMessage:i="No data",getRowKey:n}=e;return(0,l.jsxs)(eE.Z,{children:[(0,l.jsx)(eF.Z,{children:(0,l.jsx)(eB.Z,{children:t.map((e,s)=>(0,l.jsx)(eR.Z,{style:{width:e.width},children:e.header},s))})}),(0,l.jsx)(eO.Z,{children:a?(0,l.jsx)(eB.Z,{children:(0,l.jsx)(eM.Z,{colSpan:t.length,className:"text-center",children:(0,l.jsx)(eh.Z,{className:"text-gray-500",children:r})})}):s.length>0?s.map((e,s)=>(0,l.jsx)(eB.Z,{children:t.map((s,t)=>{var a;return(0,l.jsx)(eM.Z,{children:s.cell?s.cell(e):String(null!==(a=e[s.accessor])&&void 0!==a?a:"")},t)})},n?n(e,s):s)):(0,l.jsx)(eB.Z,{children:(0,l.jsx)(eM.Z,{colSpan:t.length,className:"text-center",children:(0,l.jsx)(eh.Z,{className:"text-gray-500",children:i})})})})]})}var eq=e=>{let{discountConfig:s,onDiscountChange:t,onRemoveProvider:a}=e,[r,i]=(0,M.useState)(null),[n,o]=(0,M.useState)(""),d=(e,s)=>{i(e),o((100*s).toString())},c=e=>{let s=parseFloat(n);!isNaN(s)&&s>=0&&s<=100&&t(e,(s/100).toString()),i(null),o("")},m=()=>{i(null),o("")},u=(e,s)=>{"Enter"===e.key?c(s):"Escape"===e.key&&m()},x=Object.entries(s).map(e=>{let[s,t]=e;return{provider:s,discount:t}}).sort((e,s)=>{let t=eC(e.provider).displayName,l=eC(s.provider).displayName;return t.localeCompare(l)});return(0,l.jsx)(eU,{data:x,columns:[{header:"Provider",cell:e=>{let{displayName:s,logo:t}=eC(e.provider);return(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[t&&(0,l.jsx)("img",{src:t,alt:"".concat(s," logo"),className:"w-5 h-5",onError:e=>eA(e,s)}),(0,l.jsx)("span",{className:"font-medium",children:s})]})}},{header:"Discount Percentage",cell:e=>(0,l.jsx)("div",{className:"flex items-center gap-2",children:r===e.provider?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ez.Z,{value:n,onValueChange:o,onKeyDown:s=>u(s,e.provider),placeholder:"5",className:"w-20",autoFocus:!0}),(0,l.jsx)("span",{className:"text-gray-600",children:"%"}),(0,l.jsx)(eL.Z,{icon:eP.Z,size:"sm",onClick:()=>c(e.provider),className:"cursor-pointer text-green-600 hover:text-green-700"}),(0,l.jsx)(eL.Z,{icon:eI.Z,size:"sm",onClick:m,className:"cursor-pointer text-gray-600 hover:text-gray-700"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eh.Z,{className:"font-medium",children:[(100*e.discount).toFixed(1),"%"]}),(0,l.jsx)(eL.Z,{icon:eD.Z,size:"sm",onClick:()=>d(e.provider,e.discount),className:"cursor-pointer text-blue-600 hover:text-blue-700"})]})}),width:"250px"},{header:"Actions",cell:e=>{let{displayName:s}=eC(e.provider);return(0,l.jsx)(eL.Z,{icon:ea.Z,size:"sm",onClick:()=>a(e.provider,s),className:"cursor-pointer hover:text-red-600"})},width:"80px"}],getRowKey:e=>e.provider,emptyMessage:"No provider discounts configured"})},eV=t(64504),eH=t(37592),eK=t(15424),eW=t(33145),eY=e=>{let{discountConfig:s,selectedProvider:t,newDiscount:a,onProviderChange:r,onDiscountChange:i,onAddProvider:n}=e;return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Provider",(0,l.jsx)(er.Z,{title:"Select the LLM provider you want to configure a discount for",children:(0,l.jsx)(eK.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please select a provider"}],children:(0,l.jsx)(eH.default,{showSearch:!0,placeholder:"Select provider",value:t,onChange:r,style:{width:"100%"},size:"large",optionFilterProp:"children",filterOption:(e,s)=>{var t;return String(null!==(t=null==s?void 0:s.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},children:Object.entries(eS.Cl).map(e=>{let[t,a]=e,r=eS.fK[t];return r&&s[r]?null:(0,l.jsx)(eH.default.Option,{value:t,label:a,children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(eW.default,{src:eS.cd[a],alt:"".concat(t," logo"),width:20,height:20,className:"w-5 h-5",onError:e=>eA(e,a)}),(0,l.jsx)("span",{children:a})]})},t)})})}),(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Discount Percentage",(0,l.jsx)(er.Z,{title:"Enter a percentage value (e.g., 5 for 5% discount)",children:(0,l.jsx)(eK.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),rules:[{required:!0,message:"Please enter a discount percentage"}],children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(eV.o,{placeholder:"5",value:a,onValueChange:i,className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500 flex-1"}),(0,l.jsx)("span",{className:"text-gray-600",children:"%"})]})}),(0,l.jsx)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-100",children:(0,l.jsx)(eV.z,{variant:"primary",onClick:n,disabled:!t||!a,children:"Add Provider Discount"})})]})},eJ=t(29271),eG=t(40875),eX=t(96362);let e$=e=>{let{items:s,children:t="Docs",className:a=""}=e,[r,i]=(0,M.useState)(!1),n=(0,M.useRef)(null);return(0,M.useEffect)(()=>{let e=e=>{n.current&&!n.current.contains(e.target)&&i(!1)};return r&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r]),(0,l.jsxs)("div",{className:"relative inline-block ".concat(a),ref:n,children:[(0,l.jsxs)("button",{type:"button",onClick:()=>i(!r),className:"inline-flex items-center gap-1 text-gray-500 hover:text-gray-700 text-xs transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1 rounded px-2 py-1","aria-expanded":r,"aria-haspopup":"true",children:[(0,l.jsx)("span",{children:t}),(0,l.jsx)(eG.Z,{className:"h-3 w-3 transition-transform ".concat(r?"rotate-180":""),"aria-hidden":"true"})]}),r&&(0,l.jsx)("div",{className:"absolute right-0 mt-1 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:s.map((e,s)=>(0,l.jsxs)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>i(!1),children:[(0,l.jsx)("span",{children:e.label}),(0,l.jsx)(eX.Z,{className:"h-3.5 w-3.5 text-gray-400 flex-shrink-0 ml-2","aria-hidden":"true"})]},s))})]})};var eQ=t(56522),e0=t(25653),e1=()=>{let[e,s]=(0,M.useState)(""),[t,a]=(0,M.useState)(""),r=(0,M.useMemo)(()=>{let s=parseFloat(e),l=parseFloat(t);if(isNaN(s)||isNaN(l)||0===s||0===l)return null;let a=s+l;return{originalCost:a.toFixed(10),finalCost:s.toFixed(10),discountAmount:l.toFixed(10),discountPercentage:(l/a*100).toFixed(2)}},[e,t]);return(0,l.jsxs)("div",{className:"space-y-4 pt-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(eQ.x,{className:"font-medium text-gray-900 text-sm mb-1",children:"Cost Calculation"}),(0,l.jsxs)(eQ.x,{className:"text-xs text-gray-600",children:["Discounts are applied to provider costs: ",(0,l.jsx)("code",{className:"bg-gray-100 px-1.5 py-0.5 rounded text-xs",children:"final_cost = base_cost \xd7 (1 - discount%/100)"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(eQ.x,{className:"font-medium text-gray-900 text-sm mb-1",children:"Example"}),(0,l.jsx)(eQ.x,{className:"text-xs text-gray-600",children:"A 5% discount on a $10.00 request results in: $10.00 \xd7 (1 - 0.05) = $9.50"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(eQ.x,{className:"font-medium text-gray-900 text-sm mb-1",children:"Valid Range"}),(0,l.jsx)(eQ.x,{className:"text-xs text-gray-600",children:"Discount percentages must be between 0% and 100%"})]}),(0,l.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,l.jsx)(eQ.x,{className:"font-medium text-gray-900 text-sm mb-2",children:"Validating Discounts"}),(0,l.jsx)(eQ.x,{className:"text-xs text-gray-600 mb-3",children:"Make a test request and check the response headers to verify discounts are applied:"}),(0,l.jsx)(e0.Z,{language:"bash",code:'curl -X POST -i http://your-proxy:4000/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "gemini/gemini-2.5-pro",\n    "messages": [{"role": "user", "content": "Hello"}]\n  }\''}),(0,l.jsx)(eQ.x,{className:"text-xs text-gray-600 mt-3 mb-2",children:"Look for these headers in the response:"}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono text-gray-800 whitespace-nowrap",children:"x-litellm-response-cost"}),(0,l.jsx)(eQ.x,{className:"text-xs text-gray-600",children:"Final cost after discount"})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono text-gray-800 whitespace-nowrap",children:"x-litellm-response-cost-original"}),(0,l.jsx)(eQ.x,{className:"text-xs text-gray-600",children:"Original cost before discount"})]}),(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs font-mono text-gray-800 whitespace-nowrap",children:"x-litellm-response-cost-discount-amount"}),(0,l.jsx)(eQ.x,{className:"text-xs text-gray-600",children:"Amount discounted"})]})]})]}),(0,l.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,l.jsx)(eQ.x,{className:"font-medium text-gray-900 text-sm mb-3",children:"Discount Calculator"}),(0,l.jsx)(eQ.x,{className:"text-xs text-gray-600 mb-3",children:"Enter values from your response headers to verify the discount:"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Response Cost (x-litellm-response-cost)"}),(0,l.jsx)(eQ.o,{placeholder:"0.0171938125",value:e,onValueChange:s,className:"text-sm"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Discount Amount (x-litellm-response-cost-discount-amount)"}),(0,l.jsx)(eQ.o,{placeholder:"0.0009049375",value:t,onValueChange:a,className:"text-sm"})]})]}),r&&(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,l.jsx)(eQ.x,{className:"text-sm font-medium text-blue-900 mb-2",children:"Calculated Results"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(eQ.x,{className:"text-xs text-blue-800",children:"Original Cost:"}),(0,l.jsxs)("code",{className:"text-xs font-mono text-blue-900",children:["$",r.originalCost]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(eQ.x,{className:"text-xs text-blue-800",children:"Final Cost:"}),(0,l.jsxs)("code",{className:"text-xs font-mono text-blue-900",children:["$",r.finalCost]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(eQ.x,{className:"text-xs text-blue-800",children:"Discount Amount:"}),(0,l.jsxs)("code",{className:"text-xs font-mono text-blue-900",children:["$",r.discountAmount]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-blue-300",children:[(0,l.jsx)(eQ.x,{className:"text-xs font-semibold text-blue-900",children:"Discount Applied:"}),(0,l.jsxs)(eQ.x,{className:"text-sm font-bold text-blue-900",children:[r.discountPercentage,"%"]})]})]})]})]})]})};let e2=[{label:"Custom pricing for models",href:"https://docs.litellm.ai/docs/proxy/custom_pricing"},{label:"Spend tracking",href:"https://docs.litellm.ai/docs/proxy/cost_tracking"}];var e4=e=>{let{userID:s,userRole:t,accessToken:a}=e,[r,i]=(0,M.useState)({}),[n,o]=(0,M.useState)(void 0),[d,c]=(0,M.useState)(""),[m,u]=(0,M.useState)(!0),[x,h]=(0,M.useState)(!1),[p]=U.Z.useForm(),[g,j]=R.Z.useModal(),f=(0,M.useCallback)(async()=>{u(!0);try{let e=(0,B.getProxyBaseUrl)(),s=await fetch(e?"".concat(e,"/config/cost_discount_config"):"/config/cost_discount_config",{method:"GET",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();i(e.values||{})}else console.error("Failed to fetch discount config")}catch(e){console.error("Error fetching discount config:",e),ev.Z.fromBackend("Failed to fetch discount configuration")}finally{u(!1)}},[a]);(0,M.useEffect)(()=>{a&&f()},[a,f]);let y=async e=>{try{let t=(0,B.getProxyBaseUrl)(),l=await fetch(t?"".concat(t,"/config/cost_discount_config"):"/config/cost_discount_config",{method:"PATCH",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(e)});if(l.ok)ev.Z.success("Discount configuration updated successfully"),await f();else{var s;let e=await l.json(),t=(null===(s=e.detail)||void 0===s?void 0:s.error)||e.detail||"Failed to update settings";ev.Z.fromBackend(t)}}catch(e){console.error("Error updating discount config:",e),ev.Z.fromBackend("Failed to update discount configuration")}},v=async()=>{if(!n||!d){ev.Z.fromBackend("Please select a provider and enter discount percentage");return}let e=parseFloat(d);if(isNaN(e)||e<0||e>100){ev.Z.fromBackend("Discount must be between 0% and 100%");return}let s=eT(n);if(!s){ev.Z.fromBackend("Invalid provider selected");return}if(r[s]){ev.Z.fromBackend("Discount for ".concat(eS.Cl[n]," already exists. Edit it in the table above."));return}let t={...r,[s]:e/100};i(t),await y(t),o(void 0),c(""),h(!1)},b=async(e,s)=>{g.confirm({title:"Remove Provider Discount",icon:(0,l.jsx)(eJ.Z,{}),content:"Are you sure you want to remove the discount for ".concat(s,"?"),okText:"Remove",okType:"danger",cancelText:"Cancel",onOk:async()=>{let s={...r};delete s[e],i(s),await y(s)}})},_=async(e,s)=>{let t=parseFloat(s);if(!isNaN(t)&&t>=0&&t<=1){let s={...r,[e]:t};i(s),await y(s)}};return a?(0,l.jsxs)("div",{className:"w-full p-8",children:[j,(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(ek.Dx,{children:"Cost Tracking Settings"}),(0,l.jsx)(e$,{items:e2})]}),(0,l.jsx)(ek.xv,{className:"text-gray-500 mt-1",children:"Configure cost discounts for different LLM providers. Changes are saved automatically."})]}),(0,l.jsx)(ek.zx,{onClick:()=>h(!0),className:"mt-4 md:mt-0",children:"+ Add Provider Discount"})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow w-full max-w-full",children:(0,l.jsxs)(ek.v0,{children:[(0,l.jsxs)(ek.td,{className:"px-6 pt-4",children:[(0,l.jsx)(ek.OK,{children:"Provider Discounts"}),(0,l.jsx)(ek.OK,{children:"Test It"})]}),(0,l.jsxs)(ek.nP,{children:[(0,l.jsx)(ek.x4,{children:m?(0,l.jsx)("div",{className:"py-12 text-center",children:(0,l.jsx)(ek.xv,{className:"text-gray-500",children:"Loading configuration..."})}):Object.keys(r).length>0?(0,l.jsx)("div",{className:"p-6",children:(0,l.jsx)(eq,{discountConfig:r,onDiscountChange:_,onRemoveProvider:b})}):(0,l.jsxs)("div",{className:"py-16 px-6 text-center",children:[(0,l.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsx)(ek.xv,{className:"text-gray-700 font-medium mb-2",children:"No provider discounts configured"}),(0,l.jsx)(ek.xv,{className:"text-gray-500 text-sm",children:'Click "Add Provider Discount" to get started'})]})}),(0,l.jsx)(ek.x4,{children:(0,l.jsx)("div",{className:"px-6 pb-4",children:(0,l.jsx)(e1,{})})})]})]})}),(0,l.jsx)(R.Z,{title:(0,l.jsx)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add Provider Discount"})}),open:x,width:1e3,onCancel:()=>{h(!1),p.resetFields(),o(void 0),c("")},footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)(ek.xv,{className:"text-sm text-gray-600 mb-6",children:"Select a provider and set its discount percentage. Enter a value between 0% and 100% (e.g., 5 for a 5% discount)."}),(0,l.jsx)(U.Z,{form:p,onFinish:e=>{v()},layout:"vertical",className:"space-y-6",children:(0,l.jsx)(eY,{discountConfig:r,selectedProvider:n,newDiscount:d,onProviderChange:o,onDiscountChange:c,onAddProvider:v})})]})})]}):null},e5=t(27975),e6=t(50630),e3=t(87641),e8=t(92249),e9=t(67325),e7=t(28866),se=t(918),ss=t(33293),st=t(88904),sl=t(23628),sa=t(86462),sr=t(47686),si=t(87452),sn=t(88829),so=t(72208),sd=t(41649),sc=t(49804),sm=t(67101),su=t(27281),sx=t(57365),sh=t(57840),sp=t(59872),sg=t(72885),sj=t(2597),sf=t(46468),sy=t(95920),sv=t(68473),sb=t(82586),s_=t(24199),sZ=t(97415),sN=t(21609);let sw=(e,s)=>{let t=[];return e&&e.models.length>0?(console.log("organization.models: ".concat(e.models)),t=e.models):t=s,(0,sf.Ob)(t,s)},sk=(e,s,t)=>"Admin"===e||!!t&&!!s&&t.some(e=>{var t;return null===(t=e.members)||void 0===t?void 0:t.some(e=>e.user_id===s&&"org_admin"===e.user_role)}),sS=(e,s,t)=>"Admin"===e?t||[]:t&&s?t.filter(e=>{var t;return null===(t=e.members)||void 0===t?void 0:t.some(e=>e.user_id===s&&"org_admin"===e.user_role)}):[];var sC=e=>{var s,t,a,r;let{teams:i,searchParams:n,accessToken:o,setTeams:d,userID:c,userRole:m,organizations:u,premiumUser:x=!1}=e;console.log("organizations: ".concat(JSON.stringify(u)));let[h,p]=(0,M.useState)(""),[g,j]=(0,M.useState)(null),[f,y]=(0,M.useState)(null),[v,b]=(0,M.useState)(!1),[_,Z]=(0,M.useState)({team_id:"",team_alias:"",organization_id:"",sort_by:"created_at",sort_order:"desc"});(0,M.useEffect)(()=>{console.log("inside useeffect - ".concat(h)),o&&(0,eN.Z)(o,c,m,g,d),eJ()},[h]);let[N]=U.Z.useForm(),[w]=U.Z.useForm(),{Title:k,Paragraph:S}=sh.default,[C,T]=(0,M.useState)(""),[L,z]=(0,M.useState)(!1),[P,I]=(0,M.useState)(null),[D,E]=(0,M.useState)(null),[O,F]=(0,M.useState)(!1),[q,H]=(0,M.useState)(!1),[Y,J]=(0,M.useState)(!1),[G,X]=(0,M.useState)(!1),[$,Q]=(0,M.useState)([]),[ee,es]=(0,M.useState)(!1),[et,el]=(0,M.useState)(null),[ei,ep]=(0,M.useState)([]),[eg,ej]=(0,M.useState)({}),[ef,ey]=(0,M.useState)(!1),[eb,e_]=(0,M.useState)([]),[eZ,ew]=(0,M.useState)({}),[ek,eS]=(0,M.useState)([]),[eC,eT]=(0,M.useState)([]),[eA,eP]=(0,M.useState)(!1),[eI,eU]=(0,M.useState)({});(0,M.useEffect)(()=>{console.log("currentOrgForCreateTeam: ".concat(f));let e=sw(f,$);console.log("models: ".concat(e)),ep(e),N.setFieldValue("models",[])},[f,$]),(0,M.useEffect)(()=>{if(q){let e=sS(m,c,u);if(1===e.length){let s=e[0];N.setFieldValue("organization_id",s.organization_id),y(s)}else N.setFieldValue("organization_id",(null==g?void 0:g.organization_id)||null),y(g)}},[q,m,c,u,g]),(0,M.useEffect)(()=>{(async()=>{try{if(null==o)return;let e=(await (0,B.getGuardrailsList)(o)).guardrails.map(e=>e.guardrail_name);e_(e)}catch(e){console.error("Failed to fetch guardrails:",e)}})()},[o]);let eq=async()=>{try{if(null==o)return;let e=await (0,B.fetchMCPAccessGroups)(o);eT(e)}catch(e){console.error("Failed to fetch MCP access groups:",e)}};(0,M.useEffect)(()=>{eq()},[o]),(0,M.useEffect)(()=>{i&&ej(i.reduce((e,s)=>(e[s.team_id]={keys:s.keys||[],team_info:{members_with_roles:s.members_with_roles||[]}},e),{}))},[i]);let eV=async e=>{el(e),es(!0)},eW=async()=>{if(null!=et&&null!=i&&null!=o)try{ey(!0),await (0,B.teamDeleteCall)(o,et.team_id),await (0,eN.Z)(o,c,m,g,d),ev.Z.success("Team deleted successfully")}catch(e){ev.Z.fromBackend("Error deleting the team: "+e)}finally{ey(!1),es(!1),el(null)}};(0,M.useEffect)(()=>{(async()=>{try{if(null===c||null===m||null===o)return;let e=await (0,sf.K2)(c,m,o);e&&Q(e)}catch(e){console.error("Error fetching user models:",e)}})()},[o,c,m,i]);let eY=async e=>{try{if(console.log("formValues: ".concat(JSON.stringify(e))),null!=o){var s,t,l;let a=null==e?void 0:e.team_alias,r=null!==(l=null==i?void 0:i.map(e=>e.team_alias))&&void 0!==l?l:[],n=(null==e?void 0:e.organization_id)||(null==g?void 0:g.organization_id);if(""===n||"string"!=typeof n?e.organization_id=null:e.organization_id=n.trim(),r.includes(a))throw Error("Team alias ".concat(a," already exists, please pick another alias"));if(ev.Z.info("Creating Team"),ek.length>0){let s={};if(e.metadata)try{s=JSON.parse(e.metadata)}catch(e){console.warn("Invalid JSON in metadata field, starting with empty object")}s={...s,logging:ek.filter(e=>e.callback_name)},e.metadata=JSON.stringify(s)}if(e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0||e.allowed_mcp_servers_and_groups&&((null===(s=e.allowed_mcp_servers_and_groups.servers)||void 0===s?void 0:s.length)>0||(null===(t=e.allowed_mcp_servers_and_groups.accessGroups)||void 0===t?void 0:t.length)>0||e.allowed_mcp_servers_and_groups.toolPermissions)){if(e.object_permission={},e.allowed_vector_store_ids&&e.allowed_vector_store_ids.length>0&&(e.object_permission.vector_stores=e.allowed_vector_store_ids,delete e.allowed_vector_store_ids),e.allowed_mcp_servers_and_groups){let{servers:s,accessGroups:t}=e.allowed_mcp_servers_and_groups;s&&s.length>0&&(e.object_permission.mcp_servers=s),t&&t.length>0&&(e.object_permission.mcp_access_groups=t),delete e.allowed_mcp_servers_and_groups}e.mcp_tool_permissions&&Object.keys(e.mcp_tool_permissions).length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_tool_permissions=e.mcp_tool_permissions,delete e.mcp_tool_permissions)}if(e.allowed_mcp_access_groups&&e.allowed_mcp_access_groups.length>0&&(e.object_permission||(e.object_permission={}),e.object_permission.mcp_access_groups=e.allowed_mcp_access_groups,delete e.allowed_mcp_access_groups),e.allowed_agents_and_groups){let{agents:s,accessGroups:t}=e.allowed_agents_and_groups;e.object_permission||(e.object_permission={}),s&&s.length>0&&(e.object_permission.agents=s),t&&t.length>0&&(e.object_permission.agent_access_groups=t),delete e.allowed_agents_and_groups}Object.keys(eI).length>0&&(e.model_aliases=eI);let c=await (0,B.teamCreateCall)(o,e);null!==i?d([...i,c]):d([c]),console.log("response for team create call: ".concat(c)),ev.Z.success("Team created"),N.resetFields(),eS([]),eU({}),H(!1)}}catch(e){console.error("Error creating the team:",e),ev.Z.fromBackend("Error creating the team: "+e)}},eJ=()=>{p(new Date().toLocaleString())},eG=(e,s)=>{let t={..._,[e]:s};Z(t),o&&(0,B.v2TeamListCall)(o,t.organization_id||null,null,t.team_id||null,t.team_alias||null).then(e=>{e&&e.teams&&d(e.teams)}).catch(e=>{console.error("Error fetching teams:",e)})};return(0,l.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:(0,l.jsx)(sm.Z,{numItems:1,className:"gap-2 p-8 w-full mt-2",children:(0,l.jsxs)(sc.Z,{numColSpan:1,className:"flex flex-col gap-2",children:[sk(m,c,u)&&(0,l.jsx)(en.Z,{className:"w-fit",onClick:()=>H(!0),children:"+ Create New Team"}),D?(0,l.jsx)(ss.Z,{teamId:D,onUpdate:e=>{d(s=>{if(null==s)return s;let t=s.map(s=>e.team_id===s.team_id?(0,sp.nl)(s,e):s);return o&&(0,eN.Z)(o,c,m,g,d),t})},onClose:()=>{E(null),F(!1)},accessToken:o,is_team_admin:(e=>{if(null==e||null==e.members_with_roles)return!1;for(let s=0;s<e.members_with_roles.length;s++){let t=e.members_with_roles[s];if(t.user_id==c&&"admin"==t.role)return!0}return!1})(null==i?void 0:i.find(e=>e.team_id===D)),is_proxy_admin:"Admin"==m,userModels:$,editTeam:O}):(0,l.jsxs)(ec.Z,{className:"gap-2 h-[75vh] w-full",children:[(0,l.jsxs)(em.Z,{className:"flex justify-between mt-2 w-full items-center",children:[(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(ed.Z,{children:"Your Teams"}),(0,l.jsx)(ed.Z,{children:"Available Teams"}),(0,A.P4)(m||"")&&(0,l.jsx)(ed.Z,{children:"Default Team Settings"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[h&&(0,l.jsxs)(eh.Z,{children:["Last Refreshed: ",h]}),(0,l.jsx)(eL.Z,{icon:sl.Z,variant:"shadow",size:"xs",className:"self-center",onClick:eJ})]})]}),(0,l.jsxs)(ex.Z,{children:[(0,l.jsxs)(eu.Z,{children:[(0,l.jsxs)(eh.Z,{children:["Click on Team ID to view team details ",(0,l.jsx)("b",{children:"and"})," manage team members."]}),(0,l.jsx)(sm.Z,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,l.jsx)(sc.Z,{numColSpan:1,children:(0,l.jsxs)(eo.Z,{className:"w-full mx-auto flex-auto overflow-hidden overflow-y-auto max-h-[50vh]",children:[(0,l.jsx)("div",{className:"border-b px-6 py-4",children:(0,l.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,l.jsxs)("div",{className:"relative w-64",children:[(0,l.jsx)("input",{type:"text",placeholder:"Search by Team Name...",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:_.team_alias,onChange:e=>eG("team_alias",e.target.value)}),(0,l.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(0,l.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2 ".concat(v?"bg-gray-100":""),onClick:()=>b(!v),children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Filters",(_.team_id||_.team_alias||_.organization_id)&&(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-blue-500"})]}),(0,l.jsxs)("button",{className:"px-3 py-2 text-sm border rounded-md hover:bg-gray-50 flex items-center gap-2",onClick:()=>{Z({team_id:"",team_alias:"",organization_id:"",sort_by:"created_at",sort_order:"desc"}),o&&(0,B.v2TeamListCall)(o,null,c||null,null,null).then(e=>{e&&e.teams&&d(e.teams)}).catch(e=>{console.error("Error fetching teams:",e)})},children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset Filters"]})]}),v&&(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-3",children:[(0,l.jsxs)("div",{className:"relative w-64",children:[(0,l.jsx)("input",{type:"text",placeholder:"Enter Team ID",className:"w-full px-3 py-2 pl-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:_.team_id,onChange:e=>eG("team_id",e.target.value)}),(0,l.jsx)("svg",{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),(0,l.jsx)("div",{className:"w-64",children:(0,l.jsx)(su.Z,{value:_.organization_id||"",onValueChange:e=>eG("organization_id",e),placeholder:"Select Organization",children:null==u?void 0:u.map(e=>(0,l.jsx)(sx.Z,{value:e.organization_id||"",children:e.organization_alias||e.organization_id},e.organization_id))})})]})]})}),(0,l.jsxs)(eE.Z,{children:[(0,l.jsx)(eF.Z,{children:(0,l.jsxs)(eB.Z,{children:[(0,l.jsx)(eR.Z,{children:"Team Name"}),(0,l.jsx)(eR.Z,{children:"Team ID"}),(0,l.jsx)(eR.Z,{children:"Created"}),(0,l.jsx)(eR.Z,{children:"Spend (USD)"}),(0,l.jsx)(eR.Z,{children:"Budget (USD)"}),(0,l.jsx)(eR.Z,{children:"Models"}),(0,l.jsx)(eR.Z,{children:"Organization"}),(0,l.jsx)(eR.Z,{children:"Info"}),(0,l.jsx)(eR.Z,{children:"Actions"})]})}),(0,l.jsx)(eO.Z,{children:i&&i.length>0?i.filter(e=>!g||e.organization_id===g.organization_id).sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>(0,l.jsxs)(eB.Z,{children:[(0,l.jsx)(eM.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.team_alias}),(0,l.jsx)(eM.Z,{children:(0,l.jsx)("div",{className:"overflow-hidden",children:(0,l.jsx)(er.Z,{title:e.team_id,children:(0,l.jsxs)(en.Z,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left overflow-hidden truncate max-w-[200px]",onClick:()=>{E(e.team_id)},children:[e.team_id.slice(0,7),"..."]})})})}),(0,l.jsx)(eM.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,l.jsx)(eM.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:(0,sp.pw)(e.spend,4)}),(0,l.jsx)(eM.Z,{style:{maxWidth:"4px",whiteSpace:"pre-wrap",overflow:"hidden"},children:null!==e.max_budget&&void 0!==e.max_budget?e.max_budget:"No limit"}),(0,l.jsx)(eM.Z,{style:{maxWidth:"8-x",whiteSpace:"pre-wrap",overflow:"hidden"},className:e.models.length>3?"px-0":"",children:(0,l.jsx)("div",{className:"flex flex-col",children:Array.isArray(e.models)?(0,l.jsx)("div",{className:"flex flex-col",children:0===e.models.length?(0,l.jsx)(sd.Z,{size:"xs",className:"mb-1",color:"red",children:(0,l.jsx)(eh.Z,{children:"All Proxy Models"})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex items-start",children:[e.models.length>3&&(0,l.jsx)("div",{children:(0,l.jsx)(eL.Z,{icon:eZ[e.team_id]?sa.Z:sr.Z,className:"cursor-pointer",size:"xs",onClick:()=>{ew(s=>({...s,[e.team_id]:!s[e.team_id]}))}})}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.models.slice(0,3).map((e,s)=>"all-proxy-models"===e?(0,l.jsx)(sd.Z,{size:"xs",color:"red",children:(0,l.jsx)(eh.Z,{children:"All Proxy Models"})},s):(0,l.jsx)(sd.Z,{size:"xs",color:"blue",children:(0,l.jsx)(eh.Z,{children:e.length>30?"".concat((0,sf.W0)(e).slice(0,30),"..."):(0,sf.W0)(e)})},s)),e.models.length>3&&!eZ[e.team_id]&&(0,l.jsx)(sd.Z,{size:"xs",color:"gray",className:"cursor-pointer",children:(0,l.jsxs)(eh.Z,{children:["+",e.models.length-3," ",e.models.length-3==1?"more model":"more models"]})}),eZ[e.team_id]&&(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:e.models.slice(3).map((e,s)=>"all-proxy-models"===e?(0,l.jsx)(sd.Z,{size:"xs",color:"red",children:(0,l.jsx)(eh.Z,{children:"All Proxy Models"})},s+3):(0,l.jsx)(sd.Z,{size:"xs",color:"blue",children:(0,l.jsx)(eh.Z,{children:e.length>30?"".concat((0,sf.W0)(e).slice(0,30),"..."):(0,sf.W0)(e)})},s+3))})]})]})})}):null})}),(0,l.jsx)(eM.Z,{children:e.organization_id}),(0,l.jsxs)(eM.Z,{children:[(0,l.jsxs)(eh.Z,{children:[eg&&e.team_id&&eg[e.team_id]&&eg[e.team_id].keys&&eg[e.team_id].keys.length," ","Keys"]}),(0,l.jsxs)(eh.Z,{children:[eg&&e.team_id&&eg[e.team_id]&&eg[e.team_id].team_info&&eg[e.team_id].team_info.members_with_roles&&eg[e.team_id].team_info.members_with_roles.length," ","Members"]})]}),(0,l.jsx)(eM.Z,{children:"Admin"==m?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(er.Z,{title:"Edit team",children:[" ",(0,l.jsx)(eL.Z,{icon:eD.Z,size:"sm",className:"cursor-pointer hover:text-blue-600",onClick:()=>{E(e.team_id),F(!0)}})]}),(0,l.jsxs)(er.Z,{title:"Delete team",children:[" ",(0,l.jsx)(eL.Z,{onClick:()=>eV(e),icon:ea.Z,size:"sm",className:"cursor-pointer hover:text-red-600","data-testid":"delete-team-button"})]})]}):null})]},e.team_id)):(0,l.jsx)(eB.Z,{children:(0,l.jsx)(eM.Z,{colSpan:9,className:"text-center",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-4",children:[(0,l.jsx)(eh.Z,{className:"text-lg font-medium mb-2",children:"No teams found"}),(0,l.jsx)(eh.Z,{className:"text-sm",children:"Adjust your filters or create a new team"})]})})})})]}),(0,l.jsx)(sN.Z,{isOpen:ee,title:"Delete Team?",alertMessage:(null==et?void 0:null===(s=et.keys)||void 0===s?void 0:s.length)===0?void 0:"Warning: This team has ".concat(null==et?void 0:null===(t=et.keys)||void 0===t?void 0:t.length," keys associated with it. Deleting the team will also delete all associated keys. This action is irreversible."),message:"Are you sure you want to delete this team and all its keys? This action cannot be undone.",resourceInformationTitle:"Team Information",resourceInformation:[{label:"Team ID",value:null==et?void 0:et.team_id,code:!0},{label:"Team Name",value:null==et?void 0:et.team_alias},{label:"Keys",value:null==et?void 0:null===(a=et.keys)||void 0===a?void 0:a.length},{label:"Members",value:null==et?void 0:null===(r=et.members_with_roles)||void 0===r?void 0:r.length}],requiredConfirmation:null==et?void 0:et.team_alias,onCancel:()=>{es(!1),el(null)},onOk:eW,confirmLoading:ef})]})})})]}),(0,l.jsx)(eu.Z,{children:(0,l.jsx)(se.Z,{accessToken:o,userID:c})}),(0,A.P4)(m||"")&&(0,l.jsx)(eu.Z,{children:(0,l.jsx)(st.Z,{accessToken:o,userID:c||"",userRole:m||""})})]})]}),sk(m,c,u)&&(0,l.jsx)(R.Z,{title:"Create Team",visible:q,width:1e3,footer:null,onOk:()=>{H(!1),N.resetFields(),eS([]),eU({})},onCancel:()=>{H(!1),N.resetFields(),eS([]),eU({})},children:(0,l.jsxs)(U.Z,{form:N,onFinish:eY,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U.Z.Item,{label:"Team Name",name:"team_alias",rules:[{required:!0,message:"Please input a team name"}],children:(0,l.jsx)(ez.Z,{placeholder:""})}),(()=>{let e=sS(m,c,u),s="Admin"!==m,t=1===e.length,a=0===e.length;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{children:["Organization"," ",(0,l.jsx)(er.Z,{title:(0,l.jsxs)("span",{children:["Organizations can have multiple teams. Learn more about"," ",(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/user_management_heirarchy",target:"_blank",rel:"noopener noreferrer",style:{color:"#1890ff",textDecoration:"underline"},onClick:e=>e.stopPropagation(),children:"user management hierarchy"})]}),children:(0,l.jsx)(eK.Z,{style:{marginLeft:"4px"}})})]}),name:"organization_id",initialValue:g?g.organization_id:null,className:"mt-8",rules:s?[{required:!0,message:"Please select an organization"}]:[],help:t?"You can only create teams within this organization":s?"required":"",children:(0,l.jsx)(eH.default,{showSearch:!0,allowClear:!s,disabled:t,placeholder:a?"No organizations available":"Search or select an Organization",onChange:s=>{N.setFieldValue("organization_id",s),y((null==e?void 0:e.find(e=>e.organization_id===s))||null)},filterOption:(e,s)=>{var t;return!!s&&((null===(t=s.children)||void 0===t?void 0:t.toString())||"").toLowerCase().includes(e.toLowerCase())},optionFilterProp:"children",children:null==e?void 0:e.map(e=>(0,l.jsxs)(eH.default.Option,{value:e.organization_id,children:[(0,l.jsx)("span",{className:"font-medium",children:e.organization_alias})," ",(0,l.jsxs)("span",{className:"text-gray-500",children:["(",e.organization_id,")"]})]},e.organization_id))})}),s&&!t&&e.length>1&&(0,l.jsx)("div",{className:"mb-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:(0,l.jsx)(eh.Z,{className:"text-blue-800 text-sm",children:"Please select an organization to create a team for. You can only create teams within organizations where you are an admin."})})]})})(),(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{children:["Models"," ",(0,l.jsx)(er.Z,{title:"These are the models that your selected team has access to",children:(0,l.jsx)(eK.Z,{style:{marginLeft:"4px"}})})]}),rules:[{required:!0,message:"Please select at least one model"}],name:"models",children:(0,l.jsxs)(eH.default,{mode:"multiple",placeholder:"Select models",style:{width:"100%"},children:[((0,A.P4)(m||"")||$.includes("all-proxy-models"))&&(0,l.jsx)(eH.default.Option,{value:"all-proxy-models",children:"All Proxy Models"},"all-proxy-models"),(0,l.jsx)(eH.default.Option,{value:"no-default-models",children:"No Default Models"},"no-default-models"),ei.map(e=>(0,l.jsx)(eH.default.Option,{value:e,children:(0,sf.W0)(e)},e))]})}),(0,l.jsx)(U.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,l.jsx)(s_.Z,{step:.01,precision:2,width:200})}),(0,l.jsx)(U.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,l.jsxs)(eH.default,{defaultValue:null,placeholder:"n/a",children:[(0,l.jsx)(eH.default.Option,{value:"24h",children:"daily"}),(0,l.jsx)(eH.default.Option,{value:"7d",children:"weekly"}),(0,l.jsx)(eH.default.Option,{value:"30d",children:"monthly"})]})}),(0,l.jsx)(U.Z.Item,{label:"Tokens per minute Limit (TPM)",name:"tpm_limit",children:(0,l.jsx)(s_.Z,{step:1,width:400})}),(0,l.jsx)(U.Z.Item,{label:"Requests per minute Limit (RPM)",name:"rpm_limit",children:(0,l.jsx)(s_.Z,{step:1,width:400})}),(0,l.jsxs)(si.Z,{className:"mt-20 mb-8",onClick:()=>{eA||(eq(),eP(!0))},children:[(0,l.jsx)(so.Z,{children:(0,l.jsx)("b",{children:"Additional Settings"})}),(0,l.jsxs)(sn.Z,{children:[(0,l.jsx)(U.Z.Item,{label:"Team ID",name:"team_id",help:"ID of the team you want to create. If not provided, it will be generated automatically.",children:(0,l.jsx)(ez.Z,{onChange:e=>{e.target.value=e.target.value.trim()}})}),(0,l.jsx)(U.Z.Item,{label:"Team Member Budget (USD)",name:"team_member_budget",normalize:e=>e?Number(e):void 0,tooltip:"This is the individual budget for a user in the team.",children:(0,l.jsx)(s_.Z,{step:.01,precision:2,width:200})}),(0,l.jsx)(U.Z.Item,{label:"Team Member Key Duration (eg: 1d, 1mo)",name:"team_member_key_duration",tooltip:"Set a limit to the duration of a team member's key. Format: 30s (seconds), 30m (minutes), 30h (hours), 30d (days), 1mo (month)",children:(0,l.jsx)(ez.Z,{placeholder:"e.g., 30d"})}),(0,l.jsx)(U.Z.Item,{label:"Team Member RPM Limit",name:"team_member_rpm_limit",tooltip:"The RPM (Requests Per Minute) limit for individual team members",children:(0,l.jsx)(s_.Z,{step:1,width:400})}),(0,l.jsx)(U.Z.Item,{label:"Team Member TPM Limit",name:"team_member_tpm_limit",tooltip:"The TPM (Tokens Per Minute) limit for individual team members",children:(0,l.jsx)(s_.Z,{step:1,width:400})}),(0,l.jsx)(U.Z.Item,{label:"Metadata",name:"metadata",help:"Additional team metadata. Enter metadata as JSON object.",children:(0,l.jsx)(K.default.TextArea,{rows:4})}),(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{children:["Guardrails"," ",(0,l.jsx)(er.Z,{title:"Setup your first guardrail",children:(0,l.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/guardrails/quick_start",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,l.jsx)(eK.Z,{style:{marginLeft:"4px"}})})})]}),name:"guardrails",className:"mt-8",help:"Select existing guardrails or enter new ones",children:(0,l.jsx)(eH.default,{mode:"tags",style:{width:"100%"},placeholder:"Select or enter guardrails",options:eb.map(e=>({value:e,label:e}))})}),(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{children:["Disable Global Guardrails"," ",(0,l.jsx)(er.Z,{title:"When enabled, this team will bypass any guardrails configured to run on every request (global guardrails)",children:(0,l.jsx)(eK.Z,{style:{marginLeft:"4px"}})})]}),name:"disable_global_guardrails",className:"mt-4",valuePropName:"checked",help:"Bypass global guardrails for this team",children:(0,l.jsx)(W.Z,{disabled:!x,checkedChildren:x?"Yes":"Premium feature - Upgrade to disable global guardrails by team",unCheckedChildren:x?"No":"Premium feature - Upgrade to disable global guardrails by team"})}),(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{children:["Allowed Vector Stores"," ",(0,l.jsx)(er.Z,{title:"Select which vector stores this team can access by default. Leave empty for access to all vector stores",children:(0,l.jsx)(eK.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_vector_store_ids",className:"mt-8",help:"Select vector stores this team can access. Leave empty for access to all vector stores",children:(0,l.jsx)(sZ.Z,{onChange:e=>N.setFieldValue("allowed_vector_store_ids",e),value:N.getFieldValue("allowed_vector_store_ids"),accessToken:o||"",placeholder:"Select vector stores (optional)"})})]})]}),(0,l.jsxs)(si.Z,{className:"mt-8 mb-8",children:[(0,l.jsx)(so.Z,{children:(0,l.jsx)("b",{children:"MCP Settings"})}),(0,l.jsxs)(sn.Z,{children:[(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{children:["Allowed MCP Servers"," ",(0,l.jsx)(er.Z,{title:"Select which MCP servers or access groups this team can access",children:(0,l.jsx)(eK.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_mcp_servers_and_groups",className:"mt-4",help:"Select MCP servers or access groups this team can access",children:(0,l.jsx)(sy.Z,{onChange:e=>N.setFieldValue("allowed_mcp_servers_and_groups",e),value:N.getFieldValue("allowed_mcp_servers_and_groups"),accessToken:o||"",placeholder:"Select MCP servers or access groups (optional)"})}),(0,l.jsx)(U.Z.Item,{name:"mcp_tool_permissions",initialValue:{},hidden:!0,children:(0,l.jsx)(K.default,{type:"hidden"})}),(0,l.jsx)(U.Z.Item,{noStyle:!0,shouldUpdate:(e,s)=>e.allowed_mcp_servers_and_groups!==s.allowed_mcp_servers_and_groups||e.mcp_tool_permissions!==s.mcp_tool_permissions,children:()=>{var e;return(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsx)(sv.Z,{accessToken:o||"",selectedServers:(null===(e=N.getFieldValue("allowed_mcp_servers_and_groups"))||void 0===e?void 0:e.servers)||[],toolPermissions:N.getFieldValue("mcp_tool_permissions")||{},onChange:e=>N.setFieldsValue({mcp_tool_permissions:e})})})}})]})]}),(0,l.jsxs)(si.Z,{className:"mt-8 mb-8",children:[(0,l.jsx)(so.Z,{children:(0,l.jsx)("b",{children:"Agent Settings"})}),(0,l.jsx)(sn.Z,{children:(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{children:["Allowed Agents"," ",(0,l.jsx)(er.Z,{title:"Select which agents or access groups this team can access",children:(0,l.jsx)(eK.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_agents_and_groups",className:"mt-4",help:"Select agents or access groups this team can access",children:(0,l.jsx)(sb.Z,{onChange:e=>N.setFieldValue("allowed_agents_and_groups",e),value:N.getFieldValue("allowed_agents_and_groups"),accessToken:o||"",placeholder:"Select agents or access groups (optional)"})})})]}),(0,l.jsxs)(si.Z,{className:"mt-8 mb-8",children:[(0,l.jsx)(so.Z,{children:(0,l.jsx)("b",{children:"Logging Settings"})}),(0,l.jsx)(sn.Z,{children:(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(sj.Z,{value:ek,onChange:eS,premiumUser:x})})})]}),(0,l.jsxs)(si.Z,{className:"mt-8 mb-8",children:[(0,l.jsx)(so.Z,{children:(0,l.jsx)("b",{children:"Model Aliases"})}),(0,l.jsx)(sn.Z,{children:(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)(eh.Z,{className:"text-sm text-gray-600 mb-4",children:"Create custom aliases for models that can be used by team members in API calls. This allows you to create shortcuts for specific models."}),(0,l.jsx)(sg.Z,{accessToken:o||"",initialModelAliases:eI,onAliasUpdate:eU,showExampleConfig:!1})]})})]})]}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(V.ZP,{htmlType:"submit",children:"Create Team"})})]})})]})})})},sT=t(30874),sA=t(22004),sL=t(27593),sz=t(78093),sP=t(87526),sI=t(11713),sD=t(12322),sE=t(58927);let sO=(e,s,t,a)=>[{accessorKey:"search_tool_id",header:"Search Tool ID",cell:s=>{var t;let{row:a}=s;return(0,l.jsxs)("button",{onClick:()=>e(a.original.search_tool_id),className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5 text-left w-full truncate whitespace-nowrap cursor-pointer max-w-[15ch]",children:[null===(t=a.original.search_tool_id)||void 0===t?void 0:t.slice(0,7),"..."]})}},{accessorKey:"search_tool_name",header:"Name",cell:e=>{let{getValue:s}=e;return(0,l.jsx)("span",{className:"font-medium",children:s()})}},{id:"provider",header:"Provider",cell:e=>{let{row:s}=e,t=s.original.litellm_params.search_provider,r=a.find(e=>e.provider_name===t),i=(null==r?void 0:r.ui_friendly_name)||t;return(0,l.jsx)("span",{className:"text-sm",children:i})}},{header:"Created At",accessorKey:"created_at",sortingFn:"datetime",cell:e=>{let{row:s}=e,t=s.original;return(0,l.jsx)("span",{className:"text-xs",children:t.created_at?new Date(t.created_at).toLocaleDateString():"-"})}},{header:"Updated At",accessorKey:"updated_at",sortingFn:"datetime",cell:e=>{let{row:s}=e,t=s.original;return(0,l.jsx)("span",{className:"text-xs",children:t.updated_at?new Date(t.updated_at).toLocaleDateString():"-"})}},{id:"actions",header:"Actions",cell:e=>{let{row:a}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(sE.J,{icon:eD.Z,size:"sm",onClick:()=>s(a.original.search_tool_id),className:"cursor-pointer"}),(0,l.jsx)(sE.J,{icon:ea.Z,size:"sm",onClick:()=>t(a.original.search_tool_id),className:"cursor-pointer"})]})}}];var sM=t(30401),sF=t(78867),sR=t(61935);let{Text:sB}=sh.default,sU=e=>{var s,t,a,r;let{searchToolName:i,accessToken:n,className:o=""}=e,[d,c]=(0,M.useState)(""),[m,u]=(0,M.useState)(!1),[x,h]=(0,M.useState)([]),[p,g]=(0,M.useState)({}),[j,f]=(0,M.useState)(!1),v=async()=>{if(!d.trim()){q.ZP.warning("Please enter a search query");return}u(!0);let e=performance.now();try{let s=await (0,B.searchToolQueryCall)(n,i,d),t=performance.now(),l={query:d,response:s,timestamp:Date.now(),latency:Math.round(t-e)};h(e=>[l,...e])}catch(e){console.error("Error querying search tool:",e),ev.Z.fromBackend("Failed to query search tool")}finally{u(!1)}},b=e=>new Date(e).toLocaleString(),_=(e,s)=>{let t="".concat(e,"-").concat(s);g(e=>({...e,[t]:!e[t]}))},Z=(0,l.jsx)(sR.Z,{style:{fontSize:24},spin:!0}),N=x.length>0?x[0]:null;return(0,l.jsxs)(eo.Z,{className:"mt-6",children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)(ep.Z,{children:"Test Search Tool"})}),(0,l.jsxs)("div",{className:"flex flex-col",style:{minHeight:"600px"},children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("div",{className:"flex items-stretch gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center flex-1 bg-white rounded-lg px-4 transition-all duration-200",style:{border:j?"2px solid #3b82f6":"2px solid #e5e7eb",boxShadow:j?"0 0 0 3px rgba(59, 130, 246, 0.1)":"0 1px 2px 0 rgba(0, 0, 0, 0.05)",height:"48px"},children:[(0,l.jsx)(y.Z,{className:"text-gray-400 mr-3",style:{fontSize:"18px"}}),(0,l.jsx)(K.default,{value:d,onChange:e=>c(e.target.value),onFocus:()=>f(!0),onBlur:()=>f(!1),onPressEnter:e=>{e.shiftKey||(e.preventDefault(),v())},placeholder:"Enter your search query...",disabled:m,bordered:!1,style:{fontSize:"15px",padding:0,height:"100%",boxShadow:"none"}})]}),(0,l.jsx)(V.ZP,{type:"primary",onClick:v,disabled:m||!d.trim(),icon:(0,l.jsx)(y.Z,{}),loading:m,style:{height:"48px",paddingLeft:"24px",paddingRight:"24px",borderRadius:"8px",fontWeight:500,fontSize:"15px",backgroundColor:m||!d.trim()?void 0:"#1890ff",borderColor:m||!d.trim()?void 0:"#1890ff",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},children:"Search"})]})}),(0,l.jsx)("div",{className:"flex-1",children:N||m?(0,l.jsxs)("div",{children:[m&&(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center py-16",children:[(0,l.jsx)(eg.Z,{indicator:Z}),(0,l.jsx)(sB,{className:"mt-4 text-gray-600 font-medium",children:"Searching..."})]}),N&&!m&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",style:{boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)(sB,{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Search Query"}),(0,l.jsx)("div",{className:"text-base font-semibold text-gray-900 mt-1.5",children:N.query})]}),(0,l.jsxs)("div",{className:"text-right ml-4",children:[(0,l.jsx)(sB,{className:"text-xs text-gray-500",children:b(N.timestamp)}),(0,l.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,l.jsxs)("div",{className:"text-sm font-semibold text-blue-600",children:[(null===(t=N.response)||void 0===t?void 0:null===(s=t.results)||void 0===s?void 0:s.length)||0," ",(null===(r=N.response)||void 0===r?void 0:null===(a=r.results)||void 0===a?void 0:a.length)===1?"result":"results"]}),void 0!==N.latency&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-gray-400",children:""}),(0,l.jsxs)("div",{className:"text-sm font-semibold text-green-600",children:[N.latency,"ms"]})]})]})]})]})}),N.response&&N.response.results&&N.response.results.length>0?(0,l.jsx)("div",{className:"space-y-3",children:N.response.results.map((e,s)=>{let t=p["0-".concat(s)]||!1;return(0,l.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden transition-all duration-200",style:{boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},onMouseEnter:e=>{e.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",e.currentTarget.style.borderColor="#e0e7ff"},onMouseLeave:e=>{e.currentTarget.style.boxShadow="0 1px 2px 0 rgba(0, 0, 0, 0.05)",e.currentTarget.style.borderColor="#e5e7eb"},children:(0,l.jsxs)("div",{className:"p-5",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-2",children:[(0,l.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-lg font-semibold text-blue-600 hover:text-blue-700 flex-1 leading-snug",style:{textDecoration:"none"},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:e.title}),(0,l.jsx)(V.ZP,{type:"text",size:"small",className:"flex-shrink-0",icon:(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),onClick:()=>window.open(e.url,"_blank"),style:{color:"#6b7280"}})]}),(0,l.jsx)("div",{className:"text-sm text-green-700 mb-3 truncate font-medium",children:e.url}),(0,l.jsx)("div",{className:"text-sm text-gray-700 leading-relaxed",children:t?e.snippet:"".concat(e.snippet.substring(0,200)).concat(e.snippet.length>200?"...":"")}),e.snippet.length>200&&(0,l.jsx)(V.ZP,{type:"link",size:"small",className:"mt-3 p-0 h-auto",onClick:()=>_(0,s),style:{fontSize:"13px",fontWeight:500,color:"#3b82f6"},children:t?"Show less":"Show more"})]})},s)})}):(0,l.jsxs)("div",{className:"text-center py-12 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 mx-auto mb-4",children:(0,l.jsx)(y.Z,{style:{fontSize:"24px",color:"#9ca3af"}})}),(0,l.jsx)(sB,{className:"text-gray-600 font-medium",children:"No results found"}),(0,l.jsx)(sB,{className:"text-sm text-gray-500 mt-1",children:"Try a different search query"})]})]}),x.length>1&&(0,l.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)(sB,{className:"text-sm font-semibold text-gray-700",children:"Previous Searches"}),(0,l.jsx)(V.ZP,{onClick:()=>{h([]),g({}),ev.Z.success("Search history cleared")},size:"small",type:"link",style:{fontSize:"13px",fontWeight:500},children:"Clear All"})]}),(0,l.jsx)("div",{className:"space-y-2",children:x.slice(1,6).map((e,s)=>{var t,a,r,i;return(0,l.jsxs)("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-100 hover:border-gray-300",onClick:()=>{c(e.query)},children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-800 truncate",children:e.query}),(0,l.jsxs)("div",{className:"text-xs text-gray-500 mt-1.5 flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"font-medium text-blue-600",children:[(null===(a=e.response)||void 0===a?void 0:null===(t=a.results)||void 0===t?void 0:t.length)||0," ",(null===(i=e.response)||void 0===i?void 0:null===(r=i.results)||void 0===r?void 0:r.length)===1?"result":"results"]}),void 0!==e.latency&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:""}),(0,l.jsxs)("span",{className:"font-medium text-green-600",children:[e.latency,"ms"]})]}),(0,l.jsx)("span",{children:""}),(0,l.jsx)("span",{children:b(e.timestamp)})]})]},s+1)})})]})]}):(0,l.jsxs)("div",{className:"h-full flex flex-col items-center justify-center p-8",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-24 h-24 rounded-full bg-gray-100 mb-6",children:(0,l.jsx)(y.Z,{style:{fontSize:"48px",color:"#9ca3af"}})}),(0,l.jsx)(sB,{className:"text-lg text-gray-600 font-medium",children:"Test your search tool"}),(0,l.jsx)(sB,{className:"text-sm text-gray-500 mt-2",children:"Enter a query above to see search results"})]})})]})]})},sq=e=>{var s;let{searchTool:t,onBack:a,isEditing:r,accessToken:i,availableProviders:n}=e,[o,d]=(0,M.useState)({}),c=async(e,s)=>{await (0,sp.vQ)(e)&&(d(e=>({...e,[s]:!0})),setTimeout(()=>{d(e=>({...e,[s]:!1}))},2e3))};return(0,l.jsxs)("div",{className:"p-4 max-w-full",children:[(0,l.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(en.Z,{icon:ef.Z,variant:"light",className:"mb-4",onClick:a,children:"Back to All Search Tools"}),(0,l.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,l.jsx)(ep.Z,{children:t.search_tool_name}),(0,l.jsx)(V.ZP,{type:"text",size:"small",icon:o["search-tool-name"]?(0,l.jsx)(sM.Z,{size:12}):(0,l.jsx)(sF.Z,{size:12}),onClick:()=>c(t.search_tool_name,"search-tool-name"),className:"left-2 z-10 transition-all duration-200 ".concat(o["search-tool-name"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")})]}),(0,l.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,l.jsx)(eh.Z,{className:"text-gray-500 font-mono",children:t.search_tool_id}),(0,l.jsx)(V.ZP,{type:"text",size:"small",icon:o["search-tool-id"]?(0,l.jsx)(sM.Z,{size:12}):(0,l.jsx)(sF.Z,{size:12}),onClick:()=>c(t.search_tool_id,"search-tool-id"),className:"left-2 z-10 transition-all duration-200 ".concat(o["search-tool-id"]?"text-green-600 bg-green-50 border-green-200":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")})]})]})}),(0,l.jsxs)(sm.Z,{numItems:1,numItemsSm:2,numItemsLg:3,className:"gap-6",children:[(0,l.jsxs)(eo.Z,{children:[(0,l.jsx)(eh.Z,{children:"Provider"}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(ep.Z,{children:(e=>{let s=n.find(s=>s.provider_name===e);return(null==s?void 0:s.ui_friendly_name)||e})(t.litellm_params.search_provider)})})]}),(0,l.jsxs)(eo.Z,{children:[(0,l.jsx)(eh.Z,{children:"API Key"}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(eh.Z,{children:t.litellm_params.api_key?"****":"Not set"})})]}),(0,l.jsxs)(eo.Z,{children:[(0,l.jsx)(eh.Z,{children:"Created At"}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(eh.Z,{children:t.created_at?new Date(t.created_at).toLocaleString():"Unknown"})})]})]}),(null===(s=t.search_tool_info)||void 0===s?void 0:s.description)&&(0,l.jsxs)(eo.Z,{className:"mt-6",children:[(0,l.jsx)(eh.Z,{children:"Description"}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(eh.Z,{children:t.search_tool_info.description})})]}),(0,l.jsx)("div",{className:"mt-6",children:i&&(0,l.jsx)(sU,{searchToolName:t.search_tool_name,accessToken:i})})]})};var sV=t(29),sH=t.n(sV),sK=t(23496),sW=t(35291);let{Text:sY}=sh.default;var sJ=e=>{let{litellmParams:s,accessToken:t,onTestComplete:a}=e,[r,i]=(0,M.useState)(!0),[n,o]=(0,M.useState)(null),[d,c]=(0,M.useState)(!1);(0,M.useEffect)(()=>{(async()=>{i(!0);try{let e=await (0,B.testSearchToolConnection)(t,s);o(e),"success"===e.status&&ev.Z.success("Connection test successful!")}catch(e){o({status:"error",message:e instanceof Error?e.message:"Unknown error occurred",error_type:"NetworkError"})}finally{i(!1),a&&a()}})()},[t,s,a]);let m=(null==n?void 0:n.message)?(e=>{if(!e)return"Unknown error";let s=e.split("stack trace:")[0].trim().replace(/^litellm\.(.*?)Error:\s*/,"").replace(/^AuthenticationError:\s*/,"");if(s.includes("<html>")||s.includes("<!DOCTYPE")){let e=s.match(/<title>(.*?)<\/title>/);return e?e[1]:s.includes("401")||s.includes("Authorization Required")?"Authentication failed: Invalid API key or credentials":"Authentication error - please check your API key"}return s.length>200?s.substring(0,200)+"...":s})(n.message):"Unknown error";return r?(0,l.jsx)("div",{style:{padding:"24px",borderRadius:"8px",backgroundColor:"#fff"},children:(0,l.jsxs)("div",{style:{textAlign:"center",padding:"32px 20px"},className:"jsx-dc9a0e2d897fe63b",children:[(0,l.jsx)("div",{style:{marginBottom:"16px"},className:"jsx-dc9a0e2d897fe63b loading-spinner",children:(0,l.jsx)("div",{style:{border:"3px solid #f3f3f3",borderTop:"3px solid #1890ff",borderRadius:"50%",width:"30px",height:"30px",animation:"spin 1s linear infinite",margin:"0 auto"},className:"jsx-dc9a0e2d897fe63b"})}),(0,l.jsxs)(sY,{style:{fontSize:"16px"},children:["Testing connection to ",s.search_provider||"search provider","..."]}),(0,l.jsx)(sH(),{id:"dc9a0e2d897fe63b",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}):n?(0,l.jsxs)("div",{style:{padding:"24px",borderRadius:"8px",backgroundColor:"#fff"},children:["success"===n.status?(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"32px 20px"},children:[(0,l.jsx)("div",{style:{color:"#52c41a",fontSize:"24px",display:"flex",alignItems:"center"},children:(0,l.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false","data-icon":"check-circle",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,l.jsx)("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"})})}),(0,l.jsxs)("div",{style:{marginLeft:"12px"},children:[(0,l.jsxs)(sY,{type:"success",style:{fontSize:"18px",fontWeight:500,display:"block"},children:["Connection to ",s.search_provider," successful!"]}),n.test_query&&(0,l.jsxs)(sY,{style:{fontSize:"14px",color:"#666",marginTop:"8px",display:"block"},children:["Test query: ",(0,l.jsx)("code",{style:{backgroundColor:"#f0f0f0",padding:"2px 6px",borderRadius:"4px"},children:n.test_query})]}),void 0!==n.results_count&&(0,l.jsxs)(sY,{style:{fontSize:"14px",color:"#666",display:"block"},children:["Results retrieved: ",n.results_count]})]})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[(0,l.jsx)(sW.Z,{style:{color:"#ff4d4f",fontSize:"24px",marginRight:"12px"}}),(0,l.jsxs)(sY,{type:"danger",style:{fontSize:"18px",fontWeight:500},children:["Connection to ",s.search_provider||"search provider"," failed"]})]}),(0,l.jsxs)("div",{style:{backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:"8px",padding:"16px",marginBottom:"20px",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.03)"},children:[(0,l.jsxs)(sY,{strong:!0,style:{display:"block",marginBottom:"8px"},children:["Error:"," "]}),(0,l.jsx)(sY,{type:"danger",style:{fontSize:"14px",lineHeight:"1.5"},children:m}),n.error_type&&(0,l.jsx)("div",{style:{marginTop:"8px"},children:(0,l.jsxs)(sY,{style:{fontSize:"13px",color:"#666"},children:["Error type:"," ",(0,l.jsx)("code",{style:{backgroundColor:"#ffebee",padding:"2px 6px",borderRadius:"4px",color:"#d32f2f"},children:n.error_type})]})}),n.message&&(0,l.jsx)("div",{style:{marginTop:"12px"},children:(0,l.jsx)(V.ZP,{type:"link",onClick:()=>c(!d),style:{paddingLeft:0,height:"auto"},children:d?"Hide Details":"Show Details"})})]}),d&&(0,l.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,l.jsx)(sY,{strong:!0,style:{display:"block",marginBottom:"8px",fontSize:"15px"},children:"Full Error Details"}),(0,l.jsx)("pre",{style:{backgroundColor:"#f5f5f5",padding:"16px",borderRadius:"8px",fontSize:"13px",maxHeight:"200px",overflow:"auto",border:"1px solid #e8e8e8",lineHeight:"1.5",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:n.message})]}),(0,l.jsxs)("div",{style:{backgroundColor:"#fffbf0",border:"1px solid #ffe58f",borderLeft:"4px solid #faad14",borderRadius:"8px",padding:"16px"},children:[(0,l.jsx)(sY,{strong:!0,style:{display:"block",marginBottom:"8px",color:"#d48806"},children:"Troubleshooting tips:"}),(0,l.jsxs)("ul",{style:{margin:"8px 0",paddingLeft:"20px",color:"#ad6800"},children:[(0,l.jsx)("li",{style:{marginBottom:"6px"},children:"Verify your API key is correct and active"}),(0,l.jsx)("li",{style:{marginBottom:"6px"},children:"Check if the search provider service is operational"}),(0,l.jsx)("li",{style:{marginBottom:"6px"},children:"Ensure you have sufficient credits/quota with the provider"}),(0,l.jsx)("li",{style:{marginBottom:"6px"},children:"Review the provider's documentation for any additional requirements"})]})]})]})}),(0,l.jsx)(sK.Z,{style:{margin:"24px 0 16px"}}),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,l.jsx)(V.ZP,{type:"link",href:"https://docs.litellm.ai/docs/search",target:"_blank",icon:(0,l.jsx)(eK.Z,{}),children:"View Search Documentation"})})]}):null};let{TextArea:sG}=K.default,sX=e=>"".concat("../ui/assets/logos/").concat(e,".png"),s$=e=>{let{providerName:s,displayName:t}=e;return(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(eW.default,{src:sX(s),alt:"",width:20,height:20,style:{marginRight:"8px",objectFit:"contain"},onError:e=>{e.currentTarget.style.display="none"}}),(0,l.jsx)("span",{children:t})]})};var sQ=e=>{let{userRole:s,accessToken:t,onCreateSuccess:a,isModalVisible:r,setModalVisible:i}=e,[n]=U.Z.useForm(),[o,d]=(0,M.useState)(!1),[c,m]=(0,M.useState)({}),[u,x]=(0,M.useState)(!1),[h,p]=(0,M.useState)(!1),[g,j]=(0,M.useState)(""),{data:f,isLoading:y}=(0,sI.a)({queryKey:["searchProviders"],queryFn:()=>{if(!t)throw Error("Access Token required");return(0,B.fetchAvailableSearchProviders)(t)},enabled:!!t&&r}),v=(null==f?void 0:f.providers)||[],b=async e=>{d(!0);try{let s={search_tool_name:e.search_tool_name,litellm_params:{search_provider:e.search_provider,api_key:e.api_key,api_base:e.api_base,timeout:e.timeout?parseFloat(e.timeout):void 0,max_retries:e.max_retries?parseInt(e.max_retries):void 0},search_tool_info:e.description?{description:e.description}:void 0};if(console.log("Creating search tool with payload:",s),null!=t){let e=await (0,B.createSearchTool)(t,s);ev.Z.success("Search tool created successfully"),n.resetFields(),m({}),i(!1),a(e)}}catch(e){ev.Z.error("Error creating search tool: "+e)}finally{d(!1)}},_=async()=>{try{await n.validateFields(["search_provider","api_key"]),p(!0),j("test-".concat(Date.now())),x(!0)}catch(e){ev.Z.error("Please fill in Search Provider and API Key before testing")}};return(M.useEffect(()=>{r||m({})},[r]),(0,A.tY)(s))?(0,l.jsxs)(R.Z,{title:(0,l.jsxs)("div",{className:"flex items-center space-x-3 pb-4 border-b border-gray-100",children:[(0,l.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD0D"}),(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Search Tool"})]}),open:r,width:800,onCancel:()=>{n.resetFields(),m({}),i(!1)},footer:null,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:[(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsxs)(U.Z,{form:n,onFinish:b,onValuesChange:(e,s)=>m(s),layout:"vertical",className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Search Tool Name",(0,l.jsx)(er.Z,{title:"A unique name to identify this search tool configuration (e.g., 'perplexity-search', 'tavily-news-search').",children:(0,l.jsx)(eK.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"search_tool_name",rules:[{required:!0,message:"Please enter a search tool name"},{pattern:/^[a-zA-Z0-9_-]+$/,message:"Name can only contain letters, numbers, hyphens, and underscores"}],children:(0,l.jsx)(eV.o,{placeholder:"e.g., perplexity-search, my-tavily-tool",className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"})}),(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["Search Provider",(0,l.jsx)(er.Z,{title:"Select the search provider you want to use. Each provider has different capabilities and pricing.",children:(0,l.jsx)(eK.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"search_provider",rules:[{required:!0,message:"Please select a search provider"}],children:(0,l.jsx)(eH.default,{placeholder:"Select a search provider",className:"rounded-lg",size:"large",loading:y,showSearch:!0,optionFilterProp:"children",optionLabelProp:"label",children:v.map(e=>(0,l.jsx)(eH.default.Option,{value:e.provider_name,label:(0,l.jsx)(s$,{providerName:e.provider_name,displayName:e.ui_friendly_name}),children:(0,l.jsx)(s$,{providerName:e.provider_name,displayName:e.ui_friendly_name})},e.provider_name))})}),(0,l.jsx)(U.Z.Item,{label:(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:["API Key",(0,l.jsx)(er.Z,{title:"The API key for authenticating with the search provider. This will be securely stored.",children:(0,l.jsx)(eK.Z,{className:"ml-2 text-blue-400 hover:text-blue-600 cursor-help"})})]}),name:"api_key",rules:[{required:!1,message:"Please enter an API key"}],children:(0,l.jsx)(eV.o,{type:"password",placeholder:"Enter your API key",className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"})}),(0,l.jsx)(U.Z.Item,{label:(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Description (Optional)"}),name:"description",children:(0,l.jsx)(sG,{rows:3,placeholder:"Brief description of this search tool's purpose",className:"rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"})})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-gray-100",children:[(0,l.jsx)(er.Z,{title:"Get help on our github",children:(0,l.jsx)(sh.default.Link,{href:"https://github.com/BerriAI/litellm/issues",target:"_blank",children:"Need Help?"})}),(0,l.jsxs)("div",{className:"space-x-2",children:[(0,l.jsx)(eV.z,{onClick:_,loading:h,children:"Test Connection"}),(0,l.jsx)(eV.z,{loading:o,type:"submit",children:"Add Search Tool"})]})]})]})}),(0,l.jsx)(R.Z,{title:"Connection Test Results",open:u,onCancel:()=>{x(!1),p(!1)},footer:[(0,l.jsx)(eV.z,{onClick:()=>{x(!1),p(!1)},children:"Close"},"close")],width:700,children:u&&t&&(0,l.jsx)(sJ,{litellmParams:{search_provider:c.search_provider,api_key:c.api_key,api_base:c.api_base},accessToken:t,onTestComplete:()=>p(!1)},g)})]}):null};let s0=e=>{let{isModalOpen:s,title:t,confirmDelete:a,cancelDelete:r}=e;return s?(0,l.jsx)(R.Z,{open:s,onOk:a,okType:"danger",onCancel:r,children:(0,l.jsxs)(sm.Z,{numItems:1,className:"gap-2 w-full",children:[(0,l.jsx)(ep.Z,{children:t}),(0,l.jsx)(sc.Z,{numColSpan:1,children:(0,l.jsx)("p",{children:"Are you sure you want to delete this search tool?"})})]})}):null};var s1=e=>{let{accessToken:s,userRole:t,userID:a}=e,{data:r,isLoading:i,refetch:n}=(0,sI.a)({queryKey:["searchTools"],queryFn:()=>{if(!s)throw Error("Access Token required");return(0,B.fetchSearchTools)(s).then(e=>e.search_tools||[])},enabled:!!s}),{data:o,isLoading:d}=(0,sI.a)({queryKey:["searchProviders"],queryFn:()=>{if(!s)throw Error("Access Token required");return(0,B.fetchAvailableSearchProviders)(s)},enabled:!!s}),c=(null==o?void 0:o.providers)||[],[m,u]=(0,M.useState)(null),[x,h]=(0,M.useState)(!1),[p,g]=(0,M.useState)(null),[j,f]=(0,M.useState)(!1),[y,v]=(0,M.useState)(!1),[b,_]=(0,M.useState)(!1),[Z]=U.Z.useForm(),N=M.useMemo(()=>sO(e=>{g(e),f(!1)},e=>{let s=null==r?void 0:r.find(s=>s.search_tool_id===e);if(s){var t;Z.setFieldsValue({search_tool_name:s.search_tool_name,search_provider:s.litellm_params.search_provider,api_key:s.litellm_params.api_key,api_base:s.litellm_params.api_base,timeout:s.litellm_params.timeout,max_retries:s.litellm_params.max_retries,description:null===(t=s.search_tool_info)||void 0===t?void 0:t.description}),g(e),_(!0)}},w,c),[c,r,Z]);function w(e){u(e),h(!0)}let k=async()=>{if(null!=m&&null!=s){try{await (0,B.deleteSearchTool)(s,m),ev.Z.success("Deleted search tool successfully"),n()}catch(e){console.error("Error deleting the search tool:",e),ev.Z.error("Failed to delete search tool")}h(!1),u(null)}},S=async()=>{if(s&&p)try{let e=await Z.validateFields(),t={search_tool_name:e.search_tool_name,litellm_params:{search_provider:e.search_provider,api_key:e.api_key,api_base:e.api_base,timeout:e.timeout?parseFloat(e.timeout):void 0,max_retries:e.max_retries?parseInt(e.max_retries):void 0},search_tool_info:e.description?{description:e.description}:void 0};await (0,B.updateSearchTool)(s,p,t),ev.Z.success("Search tool updated successfully"),_(!1),Z.resetFields(),g(null),n()}catch(e){console.error("Failed to update search tool:",e),ev.Z.error("Failed to update search tool")}};return s&&t&&a?(0,l.jsxs)("div",{className:"w-full h-full p-6",children:[(0,l.jsx)(s0,{isModalOpen:x,title:"Delete Search Tool",confirmDelete:k,cancelDelete:()=>{h(!1),u(null)}}),(0,l.jsx)(sQ,{userRole:t,accessToken:s,onCreateSuccess:e=>{v(!1),n()},isModalVisible:y,setModalVisible:v}),(0,l.jsx)(R.Z,{title:"Edit Search Tool",open:b,onOk:S,onCancel:()=>{_(!1),Z.resetFields(),g(null)},width:600,children:(0,l.jsxs)(U.Z,{form:Z,layout:"vertical",children:[(0,l.jsx)(U.Z.Item,{name:"search_tool_name",label:"Search Tool Name",rules:[{required:!0,message:"Please enter a search tool name"}],children:(0,l.jsx)(K.default,{placeholder:"e.g., my-perplexity-search"})}),(0,l.jsx)(U.Z.Item,{name:"search_provider",label:"Search Provider",rules:[{required:!0,message:"Please select a search provider"}],children:(0,l.jsx)(eH.default,{placeholder:"Select a search provider",loading:d,children:c.map(e=>(0,l.jsx)(eH.default.Option,{value:e.provider_name,children:e.ui_friendly_name},e.provider_name))})}),(0,l.jsx)(U.Z.Item,{name:"api_key",label:"API Key",extra:"API key for the search provider",children:(0,l.jsx)(K.default.Password,{placeholder:"Enter API key"})}),(0,l.jsx)(U.Z.Item,{name:"description",label:"Description",children:(0,l.jsx)(K.default.TextArea,{rows:3,placeholder:"Description of this search tool"})})]})}),(0,l.jsx)(ep.Z,{children:"Search Tools"}),(0,l.jsx)(eh.Z,{className:"text-tremor-content mt-2",children:"Configure and manage your search providers"}),(0,A.tY)(t)&&(0,l.jsx)(en.Z,{className:"mt-4 mb-4",onClick:()=>v(!0),children:"+ Add New Search Tool"}),(0,l.jsx)(()=>p?(0,l.jsx)(sq,{searchTool:(null==r?void 0:r.find(e=>e.search_tool_id===p))||{search_tool_id:"",search_tool_name:"",litellm_params:{search_provider:""}},onBack:()=>{f(!1),g(null),n()},isEditing:j,accessToken:s,availableProviders:c}):(0,l.jsx)("div",{className:"w-full h-full",children:(0,l.jsx)("div",{className:"w-full px-6 mt-6",children:(0,l.jsx)(sD.w,{data:r||[],columns:N,renderSubComponent:()=>(0,l.jsx)("div",{}),getRowCanExpand:()=>!1,isLoading:i,noDataMessage:"No search tools configured"})})}),{})]}):(console.log("Missing required authentication parameters",{accessToken:s,userRole:t,userID:a}),(0,l.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Missing required authentication parameters."}))},s2=t(89111),s4=t(42273),s5=t(6674),s6=t(5183),s3=t(18143),s8=t(21739),s9=t(98524),s7=t(33801),te=t(77155),ts=t(69734),tt=t(97060),tl=t(21623),ta=t(29827),tr=t(14474),ti=t(99376);function tn(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";document.cookie="".concat(e,"=; Max-Age=0; Path=").concat(s)}let to=new tl.S;function td(){let[e,s]=(0,M.useState)(""),[t,r]=(0,M.useState)(!1),[i,n]=(0,M.useState)(!1),[o,d]=(0,M.useState)(null),[c,m]=(0,M.useState)(null),[u,x]=(0,M.useState)([]),[h,p]=(0,M.useState)([]),[g,j]=(0,M.useState)([]),[f,y]=(0,M.useState)({PROXY_BASE_URL:"",PROXY_LOGOUT_URL:""}),[v,b]=(0,M.useState)(!0),_=(0,ti.useSearchParams)(),[Z,N]=(0,M.useState)({data:[]}),[w,k]=(0,M.useState)(null),[S,C]=(0,M.useState)(!1),[T,L]=(0,M.useState)(!0),[z,P]=(0,M.useState)(null),F=_.get("invitation_id"),[R,U]=(0,M.useState)(()=>_.get("page")||"api-keys"),[q,V]=(0,M.useState)(null),[H,K]=(0,M.useState)(!1),W=e=>{x(s=>s?[...s,e]:[e]),C(()=>!S)},Y=!1===T&&null===w&&null===F;return((0,M.useEffect)(()=>{let e=!1;return(async()=>{try{await (0,B.getUiConfig)()}catch(e){}if(e)return;let s=function(e){let s=document.cookie.split("; ").find(s=>s.startsWith(e+"="));if(!s)return null;let t=s.slice(e.length+1);try{return decodeURIComponent(t)}catch(e){return t}}("token"),t=s&&!(0,tt.v)(s)?s:null;s&&!t&&tn("token","/"),e||(k(t),L(!1))})(),()=>{e=!0}},[]),(0,M.useEffect)(()=>{if(Y){let e=(B.proxyBaseUrl||"")+"/ui/login";window.location.replace(e)}},[Y]),(0,M.useEffect)(()=>{if(!w)return;if((0,tt.v)(w)){tn("token","/"),k(null);return}let e=null;try{e=(0,tr.o)(w)}catch(e){tn("token","/"),k(null);return}if(e){if(V(e.key),n(e.disabled_non_admin_personal_key_creation),e.user_role){let t=function(e){if(!e)return"Undefined Role";switch(e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"org_admin":return"Org Admin";case"internal_user":return"Internal User";case"internal_user_viewer":case"internal_viewer":return"Internal Viewer";case"app_user":return"App User";default:return"Unknown Role"}}(e.user_role);s(t),"Admin Viewer"==t&&U("usage")}e.user_email&&d(e.user_email),e.login_method&&b("username_password"==e.login_method),e.premium_user&&r(e.premium_user),e.auth_header_name&&(0,B.setGlobalLitellmHeaderName)(e.auth_header_name),e.user_id&&P(e.user_id)}},[w]),(0,M.useEffect)(()=>{q&&z&&e&&(0,sT.Nr)(z,e,q,j),q&&z&&e&&(0,eN.Z)(q,z,e,null,m),q&&(0,sA.g)(q,p)},[q,z,e]),T||Y)?(0,l.jsx)(ew.Z,{}):(0,l.jsx)(M.Suspense,{fallback:(0,l.jsx)(ew.Z,{}),children:(0,l.jsx)(ta.aH,{client:to,children:(0,l.jsx)(ts.f,{accessToken:q,children:F?(0,l.jsx)(s8.Z,{userID:z,userRole:e,premiumUser:t,teams:c,keys:u,setUserRole:s,userEmail:o,setUserEmail:d,setTeams:m,setKeys:x,organizations:h,addKey:W,createClicked:S}):(0,l.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,l.jsx)(e9.Z,{userID:z,userRole:e,premiumUser:t,userEmail:o,setProxySettings:y,proxySettings:f,accessToken:q,isPublicPage:!1,sidebarCollapsed:H,onToggleSidebar:()=>{K(!H)}}),(0,l.jsxs)("div",{className:"flex flex-1",children:[(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(I,{setPage:e=>{let s=new URLSearchParams(_);s.set("page",e),window.history.pushState(null,"","?".concat(s.toString())),U(e)},defaultSelectedKey:R,sidebarCollapsed:H})}),"api-keys"==R?(0,l.jsx)(s8.Z,{userID:z,userRole:e,premiumUser:t,teams:c,keys:u,setUserRole:s,userEmail:o,setUserEmail:d,setTeams:m,setKeys:x,organizations:h,addKey:W,createClicked:S}):"models"==R?(0,l.jsx)(D.Z,{userID:z,userRole:e,token:w,keys:u,accessToken:q,modelData:Z,setModelData:N,premiumUser:t,teams:c}):"llm-playground"==R?(0,l.jsx)(E.default,{}):"users"==R?(0,l.jsx)(te.Z,{userID:z,userRole:e,token:w,keys:u,teams:c,accessToken:q,setKeys:x}):"teams"==R?(0,l.jsx)(sC,{teams:c,setTeams:m,accessToken:q,userID:z,userRole:e,organizations:h,premiumUser:t,searchParams:_}):"organizations"==R?(0,l.jsx)(sA.Z,{organizations:h,setOrganizations:p,userModels:g,accessToken:q,userRole:e,premiumUser:t}):"admin-panel"==R?(0,l.jsx)(O.Z,{setTeams:m,searchParams:_,accessToken:q,userID:z,showSSOBanner:v,premiumUser:t,proxySettings:f}):"api_ref"==R?(0,l.jsx)(a.Z,{proxySettings:f}):"logging-and-alerts"==R?(0,l.jsx)(s2.Z,{userID:z,userRole:e,accessToken:q,premiumUser:t}):"budgets"==R?(0,l.jsx)(e_.Z,{accessToken:q}):"guardrails"==R?(0,l.jsx)(e6.Z,{accessToken:q,userRole:e}):"agents"==R?(0,l.jsx)(eb,{accessToken:q,userRole:e}):"prompts"==R?(0,l.jsx)(sz.Z,{accessToken:q,userRole:e}):"transform-request"==R?(0,l.jsx)(s5.Z,{accessToken:q}):"router-settings"==R?(0,l.jsx)(e5.Z,{userID:z,userRole:e,accessToken:q,modelData:Z}):"ui-theme"==R?(0,l.jsx)(s6.Z,{userID:z,userRole:e,accessToken:q}):"cost-tracking"==R?(0,l.jsx)(e4,{userID:z,userRole:e,accessToken:q}):"model-hub-table"==R?(0,A.tY)(e)?(0,l.jsx)(e8.Z,{accessToken:q,publicPage:!1,premiumUser:t,userRole:e}):(0,l.jsx)(sP.Z,{accessToken:q,isEmbedded:!0}):"caching"==R?(0,l.jsx)(eZ.Z,{userID:z,userRole:e,token:w,accessToken:q,premiumUser:t}):"pass-through-settings"==R?(0,l.jsx)(sL.Z,{userID:z,userRole:e,accessToken:q,modelData:Z,premiumUser:t}):"logs"==R?(0,l.jsx)(s7.Z,{userID:z,userRole:e,token:w,accessToken:q,allTeams:null!=c?c:[],premiumUser:t}):"mcp-servers"==R?(0,l.jsx)(e3.d,{accessToken:q,userRole:e,userID:z}):"search-tools"==R?(0,l.jsx)(s1,{accessToken:q,userRole:e,userID:z}):"tag-management"==R?(0,l.jsx)(s4.Z,{accessToken:q,userRole:e,userID:z}):"vector-stores"==R?(0,l.jsx)(s9.Z,{accessToken:q,userRole:e,userID:z}):"new_usage"==R?(0,l.jsx)(e7.Z,{userID:z,userRole:e,accessToken:q,teams:null!=c?c:[],organizations:null!=h?h:[],premiumUser:t}):(0,l.jsx)(s3.Z,{userID:z,userRole:e,token:w,accessToken:q,keys:u,premiumUser:t})]})]})})})})}},88904:function(e,s,t){"use strict";var l=t(57437),a=t(2265),r=t(88913),i=t(57840),n=t(37592),o=t(63709),d=t(10353),c=t(19250),m=t(65925),u=t(46468),x=t(9114);s.Z=e=>{var s;let{accessToken:t,userID:h,userRole:p}=e,[g,j]=(0,a.useState)(!0),[f,y]=(0,a.useState)(null),[v,b]=(0,a.useState)(!1),[_,Z]=(0,a.useState)({}),[N,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)([]),{Paragraph:C}=i.default,{Option:T}=n.default;(0,a.useEffect)(()=>{(async()=>{if(!t){j(!1);return}try{let e=await (0,c.getDefaultTeamSettings)(t);if(y(e),Z(e.values||{}),t)try{let e=await (0,c.modelAvailableCall)(t,h,p);if(e&&e.data){let s=e.data.map(e=>e.id);S(s)}}catch(e){console.error("Error fetching available models:",e)}}catch(e){console.error("Error fetching team SSO settings:",e),x.Z.fromBackend("Failed to fetch team settings")}finally{j(!1)}})()},[t]);let A=async()=>{if(t){w(!0);try{let e=await (0,c.updateDefaultTeamSettings)(t,_);y({...f,values:e.settings}),b(!1),x.Z.success("Default team settings updated successfully")}catch(e){console.error("Error updating team settings:",e),x.Z.fromBackend("Failed to update team settings")}finally{w(!1)}}},L=(e,s)=>{Z(t=>({...t,[e]:s}))},z=(e,s,t)=>{var a;let i=s.type;return"budget_duration"===e?(0,l.jsx)(m.Z,{value:_[e]||null,onChange:s=>L(e,s),className:"mt-2"}):"boolean"===i?(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)(o.Z,{checked:!!_[e],onChange:s=>L(e,s)})}):"array"===i&&(null===(a=s.items)||void 0===a?void 0:a.enum)?(0,l.jsx)(n.default,{mode:"multiple",style:{width:"100%"},value:_[e]||[],onChange:s=>L(e,s),className:"mt-2",children:s.items.enum.map(e=>(0,l.jsx)(T,{value:e,children:e},e))}):"models"===e?(0,l.jsxs)(n.default,{mode:"multiple",style:{width:"100%"},value:_[e]||[],onChange:s=>L(e,s),className:"mt-2",children:[(0,l.jsx)(T,{value:"no-default-models",children:"No Default Models"},"no-default-models"),k.map(e=>(0,l.jsx)(T,{value:e,children:(0,u.W0)(e)},e))]}):"string"===i&&s.enum?(0,l.jsx)(n.default,{style:{width:"100%"},value:_[e]||"",onChange:s=>L(e,s),className:"mt-2",children:s.enum.map(e=>(0,l.jsx)(T,{value:e,children:e},e))}):(0,l.jsx)(r.oi,{value:void 0!==_[e]?String(_[e]):"",onChange:s=>L(e,s.target.value),placeholder:s.description||"",className:"mt-2"})},P=(e,s)=>null==s?(0,l.jsx)("span",{className:"text-gray-400",children:"Not set"}):"budget_duration"===e?(0,l.jsx)("span",{children:(0,m.m)(s)}):"boolean"==typeof s?(0,l.jsx)("span",{children:s?"Enabled":"Disabled"}):"models"===e&&Array.isArray(s)?0===s.length?(0,l.jsx)("span",{className:"text-gray-400",children:"None"}):(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:s.map((e,s)=>(0,l.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-xs",children:(0,u.W0)(e)},s))}):"object"==typeof s?Array.isArray(s)?0===s.length?(0,l.jsx)("span",{className:"text-gray-400",children:"None"}):(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:s.map((e,s)=>(0,l.jsx)("span",{className:"px-2 py-1 bg-blue-100 rounded text-xs",children:"object"==typeof e?JSON.stringify(e):String(e)},s))}):(0,l.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-auto mt-1",children:JSON.stringify(s,null,2)}):(0,l.jsx)("span",{children:String(s)});return g?(0,l.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,l.jsx)(d.Z,{size:"large"})}):f?(0,l.jsxs)(r.Zb,{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)(r.Dx,{className:"text-xl",children:"Default Team Settings"}),!g&&f&&(v?(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(r.zx,{variant:"secondary",onClick:()=>{b(!1),Z(f.values||{})},disabled:N,children:"Cancel"}),(0,l.jsx)(r.zx,{onClick:A,loading:N,children:"Save Changes"})]}):(0,l.jsx)(r.zx,{onClick:()=>b(!0),children:"Edit Settings"}))]}),(0,l.jsx)(r.xv,{children:"These settings will be applied by default when creating new teams."}),(null==f?void 0:null===(s=f.field_schema)||void 0===s?void 0:s.description)&&(0,l.jsx)(C,{className:"mb-4 mt-2",children:f.field_schema.description}),(0,l.jsx)(r.iz,{}),(0,l.jsx)("div",{className:"mt-4 space-y-4",children:(()=>{let{values:e,field_schema:s}=f;return s&&s.properties?Object.entries(s.properties).map(s=>{let[t,a]=s,i=e[t],n=t.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase());return(0,l.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200 last:border-0",children:[(0,l.jsx)(r.xv,{className:"font-medium text-lg",children:n}),(0,l.jsx)(C,{className:"text-sm text-gray-500 mt-1",children:a.description||"No description available"}),v?(0,l.jsx)("div",{className:"mt-2",children:z(t,a,i)}):(0,l.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded",children:P(t,i)})]},t)}):(0,l.jsx)(r.xv,{children:"No schema information available"})})()})]}):(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.xv,{children:"No team settings available or you do not have permission to view them."})})}},49104:function(e,s,t){"use strict";t.d(s,{Z:function(){return O}});var l=t(57437),a=t(53410),r=t(74998),i=t(78489),n=t(12514),o=t(47323),d=t(12485),c=t(18135),m=t(35242),u=t(29706),x=t(77991),h=t(21626),p=t(97214),g=t(28241),j=t(58834),f=t(69552),y=t(71876),v=t(84264),b=t(2265),_=t(17906),Z=t(21609),N=t(9114),w=t(19250),k=t(87452),S=t(88829),C=t(72208),T=t(49566),A=t(10032),L=t(22116),z=t(19015),P=t(37592),I=t(5545),D=e=>{let{isModalVisible:s,accessToken:t,setIsModalVisible:a,setBudgetList:r}=e,[i]=A.Z.useForm(),n=async e=>{if(null!=t&&void 0!=t)try{N.Z.info("Making API Call");let s=await (0,w.budgetCreateCall)(t,e);console.log("key create Response:",s),r(e=>e?[...e,s]:[s]),N.Z.success("Budget Created"),i.resetFields()}catch(e){console.error("Error creating the key:",e),N.Z.fromBackend("Error creating the key: ".concat(e))}};return(0,l.jsx)(L.Z,{title:"Create Budget",visible:s,width:800,footer:null,onOk:()=>{a(!1),i.resetFields()},onCancel:()=>{a(!1),i.resetFields()},children:(0,l.jsxs)(A.Z,{form:i,onFinish:n,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A.Z.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,l.jsx)(T.Z,{placeholder:""})}),(0,l.jsx)(A.Z.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,l.jsx)(z.Z,{step:1,precision:2,width:200})}),(0,l.jsx)(A.Z.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,l.jsx)(z.Z,{step:1,precision:2,width:200})}),(0,l.jsxs)(k.Z,{className:"mt-20 mb-8",children:[(0,l.jsx)(C.Z,{children:(0,l.jsx)("b",{children:"Optional Settings"})}),(0,l.jsxs)(S.Z,{children:[(0,l.jsx)(A.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,l.jsx)(z.Z,{step:.01,precision:2,width:200})}),(0,l.jsx)(A.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,l.jsxs)(P.default,{defaultValue:null,placeholder:"n/a",children:[(0,l.jsx)(P.default.Option,{value:"24h",children:"daily"}),(0,l.jsx)(P.default.Option,{value:"7d",children:"weekly"}),(0,l.jsx)(P.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(I.ZP,{htmlType:"submit",children:"Create Budget"})})]})})},E=e=>{let{isModalVisible:s,accessToken:t,setIsModalVisible:a,setBudgetList:r,existingBudget:i,handleUpdateCall:n}=e;console.log("existingBudget",i);let[o]=A.Z.useForm();(0,b.useEffect)(()=>{o.setFieldsValue(i)},[i,o]);let d=async e=>{if(null!=t&&void 0!=t)try{N.Z.info("Making API Call"),a(!0);let s=await (0,w.budgetUpdateCall)(t,e);r(e=>e?[...e,s]:[s]),N.Z.success("Budget Updated"),o.resetFields(),n()}catch(e){console.error("Error creating the key:",e),N.Z.fromBackend("Error creating the key: ".concat(e))}};return(0,l.jsx)(L.Z,{title:"Edit Budget",visible:s,width:800,footer:null,onOk:()=>{a(!1),o.resetFields()},onCancel:()=>{a(!1),o.resetFields()},children:(0,l.jsxs)(A.Z,{form:o,onFinish:d,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:i,children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A.Z.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,l.jsx)(T.Z,{placeholder:""})}),(0,l.jsx)(A.Z.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,l.jsx)(z.Z,{step:1,precision:2,width:200})}),(0,l.jsx)(A.Z.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,l.jsx)(z.Z,{step:1,precision:2,width:200})}),(0,l.jsxs)(k.Z,{className:"mt-20 mb-8",children:[(0,l.jsx)(C.Z,{children:(0,l.jsx)("b",{children:"Optional Settings"})}),(0,l.jsxs)(S.Z,{children:[(0,l.jsx)(A.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,l.jsx)(z.Z,{step:.01,precision:2,width:200})}),(0,l.jsx)(A.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,l.jsxs)(P.default,{defaultValue:null,placeholder:"n/a",children:[(0,l.jsx)(P.default.Option,{value:"24h",children:"daily"}),(0,l.jsx)(P.default.Option,{value:"7d",children:"weekly"}),(0,l.jsx)(P.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(I.ZP,{htmlType:"submit",children:"Save"})})]})})},O=e=>{let{accessToken:s}=e,[t,k]=(0,b.useState)(!1),[S,C]=(0,b.useState)(!1),[T,A]=(0,b.useState)(null),[L,z]=(0,b.useState)([]),[P,I]=(0,b.useState)(!1),[O,M]=(0,b.useState)(!1);(0,b.useEffect)(()=>{s&&(0,w.getBudgetList)(s).then(e=>{z(e)})},[s]);let F=async e=>{null!=s&&(A(e),C(!0))},R=e=>{A(e),M(!0)},B=async()=>{if(T&&null!=s){I(!0);try{await (0,w.budgetDeleteCall)(s,T.budget_id),N.Z.success("Budget deleted."),await U()}catch(e){console.error("Error deleting budget:",e),"function"==typeof N.Z.fromBackend?N.Z.fromBackend("Failed to delete budget"):N.Z.info("Failed to delete budget")}finally{I(!1),M(!1),A(null)}}},U=async()=>{null!=s&&(0,w.getBudgetList)(s).then(e=>{z(e)})};return(0,l.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,l.jsx)(i.Z,{size:"sm",variant:"primary",className:"mb-2",onClick:()=>k(!0),children:"+ Create Budget"}),(0,l.jsx)(D,{accessToken:s,isModalVisible:t,setIsModalVisible:k,setBudgetList:z}),T&&(0,l.jsx)(E,{accessToken:s,isModalVisible:S,setIsModalVisible:C,setBudgetList:z,existingBudget:T,handleUpdateCall:U}),(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(v.Z,{children:"Create a budget to assign to customers."}),(0,l.jsxs)(h.Z,{children:[(0,l.jsx)(j.Z,{children:(0,l.jsxs)(y.Z,{children:[(0,l.jsx)(f.Z,{children:"Budget ID"}),(0,l.jsx)(f.Z,{children:"Max Budget"}),(0,l.jsx)(f.Z,{children:"TPM"}),(0,l.jsx)(f.Z,{children:"RPM"})]})}),(0,l.jsx)(p.Z,{children:L.slice().sort((e,s)=>new Date(s.updated_at).getTime()-new Date(e.updated_at).getTime()).map((e,s)=>(0,l.jsxs)(y.Z,{children:[(0,l.jsx)(g.Z,{children:e.budget_id}),(0,l.jsx)(g.Z,{children:e.max_budget?e.max_budget:"n/a"}),(0,l.jsx)(g.Z,{children:e.tpm_limit?e.tpm_limit:"n/a"}),(0,l.jsx)(g.Z,{children:e.rpm_limit?e.rpm_limit:"n/a"}),(0,l.jsx)(o.Z,{icon:a.Z,size:"sm",className:"cursor-pointer",onClick:()=>F(e)}),(0,l.jsx)(o.Z,{icon:r.Z,size:"sm",className:"cursor-pointer hover:text-red-500",onClick:()=>R(e)})]},s))})]})]}),(0,l.jsx)(Z.Z,{isOpen:O,title:"Delete Budget?",message:"Are you sure you want to delete this budget? This action cannot be undone.",resourceInformationTitle:"Budget Information",resourceInformation:[{label:"Budget ID",value:null==T?void 0:T.budget_id,code:!0},{label:"Max Budget",value:null==T?void 0:T.max_budget},{label:"TPM",value:null==T?void 0:T.tpm_limit},{label:"RPM",value:null==T?void 0:T.rpm_limit}],onCancel:()=>{M(!1)},onOk:B,confirmLoading:P}),(0,l.jsxs)("div",{className:"mt-5",children:[(0,l.jsx)(v.Z,{className:"text-base",children:"How to use budget id"}),(0,l.jsxs)(c.Z,{children:[(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(d.Z,{children:"Assign Budget to Customer"}),(0,l.jsx)(d.Z,{children:"Test it (Curl)"}),(0,l.jsx)(d.Z,{children:"Test it (OpenAI SDK)"})]}),(0,l.jsxs)(x.Z,{children:[(0,l.jsx)(u.Z,{children:(0,l.jsx)(_.Z,{language:"bash",children:"\ncurl -X POST --location '<your_proxy_base_url>/end_user/new' \n-H 'Authorization: Bearer <your-master-key>' \n-H 'Content-Type: application/json' \n-d '{\"user_id\": \"my-customer-id', \"budget_id\": \"<BUDGET_ID>\"}' # \uD83D\uDC48 KEY CHANGE\n\n            "})}),(0,l.jsx)(u.Z,{children:(0,l.jsx)(_.Z,{language:"bash",children:'\ncurl -X POST --location \'<your_proxy_base_url>/chat/completions\' \n-H \'Authorization: Bearer <your-master-key>\' \n-H \'Content-Type: application/json\' \n-d \'{\n  "model": "gpt-3.5-turbo\', \n  "messages":[{"role": "user", "content": "Hey, how\'s it going?"}],\n  "user": "my-customer-id"\n}\' # \uD83D\uDC48 KEY CHANGE\n\n            '})}),(0,l.jsx)(u.Z,{children:(0,l.jsx)(_.Z,{language:"python",children:'from openai import OpenAI\nclient = OpenAI(\n  base_url="<your_proxy_base_url>",\n  api_key="<your_proxy_key>"\n)\n\ncompletion = client.chat.completions.create(\n  model="gpt-3.5-turbo",\n  messages=[\n    {"role": "system", "content": "You are a helpful assistant."},\n    {"role": "user", "content": "Hello!"}\n  ],\n  user="my-customer-id"\n)\n\nprint(completion.choices[0].message)'})})]})]})]})]})}},94987:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var l=t(57437),a=t(10012),r=t(91323);function i(){return(0,l.jsxs)("div",{className:(0,a.cx)("h-screen","flex items-center justify-center gap-4"),children:[(0,l.jsx)("div",{className:"text-lg font-medium py-2 pr-4 border-r border-r-gray-200",children:"\uD83D\uDE85 LiteLLM"}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,l.jsx)(r.S,{className:"size-4"}),(0,l.jsx)("span",{className:"text-gray-600 text-sm",children:"Loading..."})]})]})}},918:function(e,s,t){"use strict";var l=t(57437),a=t(2265),r=t(62490),i=t(19250),n=t(9114);s.Z=e=>{let{accessToken:s,userID:t}=e,[o,d]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{if(s&&t)try{let e=await (0,i.availableTeamListCall)(s);d(e)}catch(e){console.error("Error fetching available teams:",e)}})()},[s,t]);let c=async e=>{if(s&&t)try{await (0,i.teamMemberAddCall)(s,e,{user_id:t,role:"user"}),n.Z.success("Successfully joined team"),d(s=>s.filter(s=>s.team_id!==e))}catch(e){console.error("Error joining team:",e),n.Z.fromBackend("Failed to join team")}};return(0,l.jsx)(r.Zb,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh]",children:(0,l.jsxs)(r.iA,{children:[(0,l.jsx)(r.ss,{children:(0,l.jsxs)(r.SC,{children:[(0,l.jsx)(r.xs,{children:"Team Name"}),(0,l.jsx)(r.xs,{children:"Description"}),(0,l.jsx)(r.xs,{children:"Members"}),(0,l.jsx)(r.xs,{children:"Models"}),(0,l.jsx)(r.xs,{children:"Actions"})]})}),(0,l.jsxs)(r.RM,{children:[o.map(e=>(0,l.jsxs)(r.SC,{children:[(0,l.jsx)(r.pj,{children:(0,l.jsx)(r.xv,{children:e.team_alias})}),(0,l.jsx)(r.pj,{children:(0,l.jsx)(r.xv,{children:e.description||"No description available"})}),(0,l.jsx)(r.pj,{children:(0,l.jsxs)(r.xv,{children:[e.members_with_roles.length," members"]})}),(0,l.jsx)(r.pj,{children:(0,l.jsx)("div",{className:"flex flex-col",children:e.models&&0!==e.models.length?e.models.map((e,s)=>(0,l.jsx)(r.Ct,{size:"xs",className:"mb-1",color:"blue",children:(0,l.jsx)(r.xv,{children:e.length>30?"".concat(e.slice(0,30),"..."):e})},s)):(0,l.jsx)(r.Ct,{size:"xs",color:"red",children:(0,l.jsx)(r.xv,{children:"All Proxy Models"})})})}),(0,l.jsx)(r.pj,{children:(0,l.jsx)(r.zx,{size:"xs",variant:"secondary",onClick:()=>c(e.team_id),children:"Join Team"})})]},e.team_id)),0===o.length&&(0,l.jsx)(r.SC,{children:(0,l.jsx)(r.pj,{colSpan:5,className:"text-center",children:(0,l.jsx)(r.xv,{children:"No available teams to join"})})})]})]})})}},6674:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var l=t(57437),a=t(2265),r=t(5545),i=t(23639),n=t(96761),o=t(19250),d=t(9114),c=e=>{let{accessToken:s}=e,[t,c]=(0,a.useState)('{\n  "model": "openai/gpt-4o",\n  "messages": [\n    {\n      "role": "system",\n      "content": "You are a helpful assistant."\n    },\n    {\n      "role": "user",\n      "content": "Explain quantum computing in simple terms"\n    }\n  ],\n  "temperature": 0.7,\n  "max_tokens": 500,\n  "stream": true\n}'),[m,u]=(0,a.useState)(""),[x,h]=(0,a.useState)(!1),p=(e,s,t)=>{let l=JSON.stringify(s,null,2).split("\n").map(e=>"  ".concat(e)).join("\n"),a=Object.entries(t).map(e=>{let[s,t]=e;return"-H '".concat(s,": ").concat(t,"'")}).join(" \\\n  ");return"curl -X POST \\\n  ".concat(e," \\\n  ").concat(a?"".concat(a," \\\n  "):"","-H 'Content-Type: application/json' \\\n  -d '{\n").concat(l,"\n  }'")},g=async()=>{h(!0);try{let e;try{e=JSON.parse(t)}catch(e){d.Z.fromBackend("Invalid JSON in request body"),h(!1);return}let l={call_type:"completion",request_body:e};if(!s){d.Z.fromBackend("No access token found"),h(!1);return}let a=await (0,o.transformRequestCall)(s,l);if(a.raw_request_api_base&&a.raw_request_body){let e=p(a.raw_request_api_base,a.raw_request_body,a.raw_request_headers||{});u(e),d.Z.success("Request transformed successfully")}else{let e="string"==typeof a?a:JSON.stringify(a);u(e),d.Z.info("Transformed request received in unexpected format")}}catch(e){console.error("Error transforming request:",e),d.Z.fromBackend("Failed to transform request")}finally{h(!1)}};return(0,l.jsxs)("div",{className:"w-full m-2",style:{overflow:"hidden"},children:[(0,l.jsx)(n.Z,{children:"Playground"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"See how LiteLLM transforms your request for the specified provider."}),(0,l.jsxs)("div",{style:{display:"flex",gap:"16px",width:"100%",minWidth:0,overflow:"hidden"},className:"mt-4",children:[(0,l.jsxs)("div",{style:{flex:"1 1 50%",display:"flex",flexDirection:"column",border:"1px solid #e8e8e8",borderRadius:"8px",padding:"24px",overflow:"hidden",maxHeight:"600px",minWidth:0},children:[(0,l.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,l.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 4px 0"},children:"Original Request"}),(0,l.jsx)("p",{style:{color:"#666",margin:0},children:"The request you would send to LiteLLM /chat/completions endpoint."})]}),(0,l.jsx)("textarea",{style:{flex:"1 1 auto",width:"100%",minHeight:"240px",padding:"16px",border:"1px solid #e8e8e8",borderRadius:"6px",fontFamily:"monospace",fontSize:"14px",resize:"none",marginBottom:"24px",overflow:"auto"},value:t,onChange:e=>c(e.target.value),onKeyDown:e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),g())},placeholder:"Press Cmd/Ctrl + Enter to transform"}),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"auto"},children:(0,l.jsxs)(r.ZP,{type:"primary",style:{backgroundColor:"#000",display:"flex",alignItems:"center",gap:"8px"},onClick:g,loading:x,children:[(0,l.jsx)("span",{children:"Transform"}),(0,l.jsx)("span",{children:""})]})})]}),(0,l.jsxs)("div",{style:{flex:"1 1 50%",display:"flex",flexDirection:"column",border:"1px solid #e8e8e8",borderRadius:"8px",padding:"24px",overflow:"hidden",maxHeight:"800px",minWidth:0},children:[(0,l.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,l.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 4px 0"},children:"Transformed Request"}),(0,l.jsx)("p",{style:{color:"#666",margin:0},children:"How LiteLLM transforms your request for the specified provider."}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{style:{color:"#666",margin:0},className:"text-xs",children:"Note: Sensitive headers are not shown."})]}),(0,l.jsxs)("div",{style:{position:"relative",backgroundColor:"#f5f5f5",borderRadius:"6px",flex:"1 1 auto",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,l.jsx)("pre",{style:{padding:"16px",fontFamily:"monospace",fontSize:"14px",margin:0,overflow:"auto",flex:"1 1 auto"},children:m||'curl -X POST \\\n  https://api.openai.com/v1/chat/completions \\\n  -H \'Authorization: Bearer sk-xxx\' \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n  "model": "gpt-4",\n  "messages": [\n    {\n      "role": "system",\n      "content": "You are a helpful assistant."\n    }\n  ],\n  "temperature": 0.7\n  }\''}),(0,l.jsx)(r.ZP,{type:"text",icon:(0,l.jsx)(i.Z,{}),style:{position:"absolute",right:"8px",top:"8px"},size:"small",onClick:()=>{navigator.clipboard.writeText(m||""),d.Z.success("Copied to clipboard")}})]})]})]}),(0,l.jsx)("div",{className:"mt-4 text-right w-full",children:(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Found an error? File an issue"," ",(0,l.jsx)("a",{href:"https://github.com/BerriAI/litellm/issues",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})})]})}},5183:function(e,s,t){"use strict";var l=t(57437),a=t(2265),r=t(19046),i=t(69734),n=t(19250),o=t(9114);s.Z=e=>{let{userID:s,userRole:t,accessToken:d}=e,{logoUrl:c,setLogoUrl:m}=(0,i.F)(),[u,x]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d&&g()},[d]);let g=async()=>{try{let s=(0,n.getProxyBaseUrl)(),t=await fetch(s?"".concat(s,"/get/ui_theme_settings"):"/get/ui_theme_settings",{method:"GET",headers:{Authorization:"Bearer ".concat(d),"Content-Type":"application/json"}});if(t.ok){var e;let s=await t.json(),l=(null===(e=s.values)||void 0===e?void 0:e.logo_url)||"";x(l),m(l||null)}}catch(e){console.error("Error fetching theme settings:",e)}},j=async()=>{p(!0);try{let e=(0,n.getProxyBaseUrl)();if((await fetch(e?"".concat(e,"/update/ui_theme_settings"):"/update/ui_theme_settings",{method:"PATCH",headers:{Authorization:"Bearer ".concat(d),"Content-Type":"application/json"},body:JSON.stringify({logo_url:u||null})})).ok)o.Z.success("Logo settings updated successfully!"),m(u||null);else throw Error("Failed to update settings")}catch(e){console.error("Error updating logo settings:",e),o.Z.fromBackend("Failed to update logo settings")}finally{p(!1)}},f=async()=>{x(""),m(null),p(!0);try{let e=(0,n.getProxyBaseUrl)();if((await fetch(e?"".concat(e,"/update/ui_theme_settings"):"/update/ui_theme_settings",{method:"PATCH",headers:{Authorization:"Bearer ".concat(d),"Content-Type":"application/json"},body:JSON.stringify({logo_url:null})})).ok)o.Z.success("Logo reset to default!");else throw Error("Failed to reset logo")}catch(e){console.error("Error resetting logo:",e),o.Z.fromBackend("Failed to reset logo")}finally{p(!1)}};return d?(0,l.jsxs)("div",{className:"w-full mx-auto max-w-4xl px-6 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)(r.Dx,{className:"text-2xl font-bold mb-2",children:"Logo Customization"}),(0,l.jsx)(r.xv,{className:"text-gray-600",children:"Customize your LiteLLM admin dashboard with a custom logo."})]}),(0,l.jsx)(r.Zb,{className:"shadow-sm p-6",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(r.xv,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Custom Logo URL"}),(0,l.jsx)(r.oi,{placeholder:"https://example.com/logo.png",value:u,onValueChange:e=>{x(e),m(e||null)},className:"w-full"}),(0,l.jsx)(r.xv,{className:"text-xs text-gray-500 mt-1",children:"Enter a URL for your custom logo or leave empty to use the default LiteLLM logo"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(r.xv,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Current Logo"}),(0,l.jsx)("div",{className:"bg-gray-50 rounded-lg p-6 flex items-center justify-center min-h-[120px]",children:u?(0,l.jsx)("img",{src:u,alt:"Custom logo",className:"max-w-full max-h-24 object-contain",onError:e=>{var s;let t=e.target;t.style.display="none";let l=document.createElement("div");l.className="text-gray-500 text-sm",l.textContent="Failed to load image",null===(s=t.parentElement)||void 0===s||s.appendChild(l)}}):(0,l.jsx)(r.xv,{className:"text-gray-500 text-sm",children:"Default LiteLLM logo will be used"})})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,l.jsx)(r.zx,{onClick:j,loading:h,disabled:h,color:"indigo",children:"Save Changes"}),(0,l.jsx)(r.zx,{onClick:f,loading:h,disabled:h,variant:"secondary",color:"gray",children:"Reset to Default"})]})]})})]}):null}},79262:function(e,s,t){"use strict";t.d(s,{Z:function(){return x}});var l=t(57437);t(1309);var a=t(76865),r=t(70525),i=t(95805),n=t(51817),o=t(21047);t(22135),t(40875);var d=t(49663),c=t(2265),m=t(19250);let u=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter(Boolean).join(" ")};function x(e){let{accessToken:s,width:t=220}=e,[x,h]=(0,c.useState)(!1),[p,g]=(0,c.useState)(!1),[j,f]=(0,c.useState)(null),[y,v]=(0,c.useState)(!1),[b,_]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{if(s){v(!0),_(null);try{let e=await (0,m.getRemainingUsers)(s);f(e)}catch(e){console.error("Failed to fetch usage data:",e),_("Failed to load usage data")}finally{v(!1)}}})()},[s]);let{isOverLimit:Z,isNearLimit:N,usagePercentage:w,userMetrics:k,teamMetrics:S}=(e=>{if(!e)return{isOverLimit:!1,isNearLimit:!1,usagePercentage:0,userMetrics:{isOverLimit:!1,isNearLimit:!1,usagePercentage:0},teamMetrics:{isOverLimit:!1,isNearLimit:!1,usagePercentage:0}};let s=e.total_users?e.total_users_used/e.total_users*100:0,t=s>100,l=s>=80&&s<=100,a=e.total_teams?e.total_teams_used/e.total_teams*100:0,r=a>100,i=a>=80&&a<=100,n=t||r;return{isOverLimit:n,isNearLimit:(l||i)&&!n,usagePercentage:Math.max(s,a),userMetrics:{isOverLimit:t,isNearLimit:l,usagePercentage:s},teamMetrics:{isOverLimit:r,isNearLimit:i,usagePercentage:a}}})(j),C=()=>Z?(0,l.jsx)(a.Z,{className:"h-3 w-3"}):N?(0,l.jsx)(r.Z,{className:"h-3 w-3"}):null;return s&&((null==j?void 0:j.total_users)!==null||(null==j?void 0:j.total_teams)!==null)?(0,l.jsx)("div",{className:"fixed bottom-4 left-4 z-50",style:{width:"".concat(Math.min(t,220),"px")},children:(0,l.jsx)(()=>p?(0,l.jsx)("button",{onClick:()=>g(!1),className:u("bg-white border border-gray-200 rounded-lg shadow-sm p-3 hover:shadow-md transition-all w-full"),title:"Show usage details",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(i.Z,{className:"h-4 w-4 flex-shrink-0"}),(Z||N)&&(0,l.jsx)("span",{className:"flex-shrink-0",children:C()}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium truncate",children:[j&&null!==j.total_users&&(0,l.jsxs)("span",{className:u("flex-shrink-0 px-1.5 py-0.5 rounded text-xs border",k.isOverLimit&&"bg-red-50 text-red-700 border-red-200",k.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!k.isOverLimit&&!k.isNearLimit&&"bg-gray-50 text-gray-700 border-gray-200"),children:["U: ",j.total_users_used,"/",j.total_users]}),j&&null!==j.total_teams&&(0,l.jsxs)("span",{className:u("flex-shrink-0 px-1.5 py-0.5 rounded text-xs border",S.isOverLimit&&"bg-red-50 text-red-700 border-red-200",S.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!S.isOverLimit&&!S.isNearLimit&&"bg-gray-50 text-gray-700 border-gray-200"),children:["T: ",j.total_teams_used,"/",j.total_teams]}),!j||null===j.total_users&&null===j.total_teams&&(0,l.jsx)("span",{className:"truncate",children:"Usage"})]})]})}):y?(0,l.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 w-full",children:(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2",children:[(0,l.jsx)(n.Z,{className:"h-4 w-4 animate-spin"}),(0,l.jsx)("span",{className:"text-sm text-gray-500 truncate",children:"Loading..."})]})}):b||!j?(0,l.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 group w-full",children:(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsx)("div",{className:"flex-1 min-w-0",children:(0,l.jsx)("span",{className:"text-sm text-gray-500 truncate block",children:b||"No data"})}),(0,l.jsx)("button",{onClick:()=>g(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 rounded transition-all flex-shrink-0",title:"Minimize",children:(0,l.jsx)(o.Z,{className:"h-3 w-3 text-gray-400"})})]})}):(0,l.jsxs)("div",{className:u("bg-white border rounded-lg shadow-sm p-3 transition-all duration-200 group w-full"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,l.jsx)(i.Z,{className:"h-4 w-4 flex-shrink-0"}),(0,l.jsx)("span",{className:"font-medium text-sm truncate",children:"Usage"})]}),(0,l.jsx)("button",{onClick:()=>g(!0),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-gray-100 rounded transition-all flex-shrink-0",title:"Minimize",children:(0,l.jsx)(o.Z,{className:"h-3 w-3 text-gray-400"})})]}),(0,l.jsxs)("div",{className:"space-y-3 text-sm",children:[null!==j.total_users&&(0,l.jsxs)("div",{className:u("space-y-1 border rounded-md p-2",k.isOverLimit&&"border-red-200 bg-red-50",k.isNearLimit&&"border-yellow-200 bg-yellow-50"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[(0,l.jsx)(i.Z,{className:"h-3 w-3"}),(0,l.jsx)("span",{className:"font-medium",children:"Users"}),(0,l.jsx)("span",{className:u("ml-1 px-1.5 py-0.5 rounded border",k.isOverLimit&&"bg-red-50 text-red-700 border-red-200",k.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!k.isOverLimit&&!k.isNearLimit&&"bg-gray-50 text-gray-600 border-gray-200"),children:k.isOverLimit?"Over limit":k.isNearLimit?"Near limit":"OK"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Used:"}),(0,l.jsxs)("span",{className:"font-medium text-right",children:[j.total_users_used,"/",j.total_users]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Remaining:"}),(0,l.jsx)("span",{className:u("font-medium text-right",k.isOverLimit&&"text-red-600",k.isNearLimit&&"text-yellow-600"),children:j.total_users_remaining})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Usage:"}),(0,l.jsxs)("span",{className:"font-medium text-right",children:[Math.round(k.usagePercentage),"%"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:u("h-2 rounded-full transition-all duration-300",k.isOverLimit&&"bg-red-500",k.isNearLimit&&"bg-yellow-500",!k.isOverLimit&&!k.isNearLimit&&"bg-green-500"),style:{width:"".concat(Math.min(k.usagePercentage,100),"%")}})})]}),null!==j.total_teams&&(0,l.jsxs)("div",{className:u("space-y-1 border rounded-md p-2",S.isOverLimit&&"border-red-200 bg-red-50",S.isNearLimit&&"border-yellow-200 bg-yellow-50"),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 mb-1",children:[(0,l.jsx)(d.Z,{className:"h-3 w-3"}),(0,l.jsx)("span",{className:"font-medium",children:"Teams"}),(0,l.jsx)("span",{className:u("ml-1 px-1.5 py-0.5 rounded border",S.isOverLimit&&"bg-red-50 text-red-700 border-red-200",S.isNearLimit&&"bg-yellow-50 text-yellow-700 border-yellow-200",!S.isOverLimit&&!S.isNearLimit&&"bg-gray-50 text-gray-600 border-gray-200"),children:S.isOverLimit?"Over limit":S.isNearLimit?"Near limit":"OK"})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Used:"}),(0,l.jsxs)("span",{className:"font-medium text-right",children:[j.total_teams_used,"/",j.total_teams]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Remaining:"}),(0,l.jsx)("span",{className:u("font-medium text-right",S.isOverLimit&&"text-red-600",S.isNearLimit&&"text-yellow-600"),children:j.total_teams_remaining})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600 text-xs",children:"Usage:"}),(0,l.jsxs)("span",{className:"font-medium text-right",children:[Math.round(S.usagePercentage),"%"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:u("h-2 rounded-full transition-all duration-300",S.isOverLimit&&"bg-red-500",S.isNearLimit&&"bg-yellow-500",!S.isOverLimit&&!S.isNearLimit&&"bg-green-500"),style:{width:"".concat(Math.min(S.usagePercentage,100),"%")}})})]})]})]}),{})}):null}},97060:function(e,s,t){"use strict";t.d(s,{v:function(){return a}});var l=t(14474);function a(e){try{let s=(0,l.o)(e);if(s&&"number"==typeof s.exp)return 1e3*s.exp<=Date.now();return!1}catch(e){return!0}}}},function(e){e.O(0,[9546,1047,3665,6990,9028,9409,4865,337,8135,1442,2926,2409,3367,353,1994,7318,3705,8565,3709,5319,5333,525,6609,5869,7906,1713,9611,7140,816,7271,8237,9349,8468,766,611,6043,849,4073,605,2831,9878,8049,4679,2202,874,4292,7526,5301,2249,2012,2004,1200,7641,8866,3801,630,8093,7155,8524,1739,6600,773,9111,1518,8143,7975,2273,2971,2117,1744],function(){return e(e.s=89705)}),_N_E=e.O()}]);