(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5649],{50373:function(e,t,n){Promise.resolve().then(n.bind(n,78858))},58927:function(e,t,n){"use strict";n.d(t,{J:function(){return l.Z}});var l=n(47323)},78858:function(e,t,n){"use strict";n.r(t);var l=n(57437),s=n(54939),r=n(39760);t.default=()=>{let{accessToken:e}=(0,r.Z)();return(0,l.jsx)(s.Z,{accessToken:e})}},90246:function(e,t,n){"use strict";function l(e){let t=[e];return{all:t,lists:()=>[...t,"list"],list:e=>[...t,"list",{params:e}],details:()=>[...t,"detail"],detail:e=>[...t,"detail",e]}}n.d(t,{n:function(){return l}})},76191:function(e,t,n){"use strict";n.d(t,{p:function(){return i}});var l=n(19250),s=n(11713);let r=(0,n(90246).n)("uiConfig"),i=()=>(0,s.a)({queryKey:r.list({}),queryFn:async()=>await (0,l.getUiConfig)(),staleTime:864e5,gcTime:864e5})},39760:function(e,t,n){"use strict";var l=n(19250),s=n(3914),r=n(97060),i=n(14474),a=n(99376),o=n(2265),d=n(76191);t.Z=()=>{var e,t,n,u,c,m;let h=(0,a.useRouter)(),{data:x,isLoading:p}=(0,d.p)(),g="undefined"!=typeof document?(0,s.e)("token"):null;(0,o.useEffect)(()=>{(!g||g&&(0,r.v)(g))&&(g&&(0,s.b)(),h.replace("".concat((0,l.getProxyBaseUrl)(),"/ui/login")))},[g,h]),(0,o.useEffect)(()=>{!p&&(null==x?void 0:x.admin_ui_disabled)&&h.replace("".concat((0,l.getProxyBaseUrl)(),"/ui/login"))},[h,p,x]);let j=(0,o.useMemo)(()=>{if(!g)return null;try{return(0,i.o)(g)}catch(e){return(0,s.b)(),h.replace("".concat((0,l.getProxyBaseUrl)(),"/ui/login")),null}},[g,h]);return{token:g,accessToken:null!==(e=null==j?void 0:j.key)&&void 0!==e?e:null,userId:null!==(t=null==j?void 0:j.user_id)&&void 0!==t?t:null,userEmail:null!==(n=null==j?void 0:j.user_email)&&void 0!==n?n:null,userRole:function(e){if(!e)return"Undefined Role";switch(e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"org_admin":return"Org Admin";case"internal_user":return"Internal User";case"internal_user_viewer":case"internal_viewer":return"Internal Viewer";case"app_user":return"App User";default:return"Unknown Role"}}(null!==(u=null==j?void 0:j.user_role)&&void 0!==u?u:null),premiumUser:null!==(c=null==j?void 0:j.premium_user)&&void 0!==c?c:null,disabledPersonalKeyCreation:null!==(m=null==j?void 0:j.disabled_non_admin_personal_key_creation)&&void 0!==m?m:null,showSSOBanner:(null==j?void 0:j.login_method)==="username_password"}}},54939:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}});var l=n(57437),s=n(78489),r=n(12514),i=n(12485),a=n(18135),o=n(35242),d=n(29706),u=n(77991),c=n(21626),m=n(97214),h=n(28241),x=n(58834),p=n(69552),g=n(71876),j=n(84264),f=n(2265),Z=n(17906),b=n(21609),y=n(39957),_=n(9114),v=n(19250),k=n(87452),C=n(88829),w=n(72208),B=n(49566),T=n(10032),I=n(22116),D=n(12221),N=n(37592),E=n(5545),O=e=>{let{isModalVisible:t,accessToken:n,setIsModalVisible:s,setBudgetList:r}=e,[i]=T.Z.useForm(),a=async e=>{if(null!=n&&void 0!=n)try{_.Z.info("Making API Call");let t=await (0,v.budgetCreateCall)(n,e);console.log("key create Response:",t),r(e=>e?[...e,t]:[t]),_.Z.success("Budget Created"),i.resetFields()}catch(e){console.error("Error creating the key:",e),_.Z.fromBackend("Error creating the key: ".concat(e))}};return(0,l.jsx)(I.Z,{title:"Create Budget",visible:t,width:800,footer:null,onOk:()=>{s(!1),i.resetFields()},onCancel:()=>{s(!1),i.resetFields()},children:(0,l.jsxs)(T.Z,{form:i,onFinish:a,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.Z.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,l.jsx)(B.Z,{placeholder:""})}),(0,l.jsx)(T.Z.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,l.jsx)(D.Z,{step:1,precision:2,width:200})}),(0,l.jsx)(T.Z.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,l.jsx)(D.Z,{step:1,precision:2,width:200})}),(0,l.jsxs)(k.Z,{className:"mt-20 mb-8",children:[(0,l.jsx)(w.Z,{children:(0,l.jsx)("b",{children:"Optional Settings"})}),(0,l.jsxs)(C.Z,{children:[(0,l.jsx)(T.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,l.jsx)(D.Z,{step:.01,precision:2,width:200})}),(0,l.jsx)(T.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,l.jsxs)(N.default,{defaultValue:null,placeholder:"n/a",children:[(0,l.jsx)(N.default.Option,{value:"24h",children:"daily"}),(0,l.jsx)(N.default.Option,{value:"7d",children:"weekly"}),(0,l.jsx)(N.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(E.ZP,{htmlType:"submit",children:"Create Budget"})})]})})},A=e=>{let{isModalVisible:t,accessToken:n,setIsModalVisible:s,setBudgetList:r,existingBudget:i,handleUpdateCall:a}=e;console.log("existingBudget",i);let[o]=T.Z.useForm();(0,f.useEffect)(()=>{o.setFieldsValue(i)},[i,o]);let d=async e=>{if(null!=n&&void 0!=n)try{_.Z.info("Making API Call"),s(!0);let t=await (0,v.budgetUpdateCall)(n,e);r(e=>e?[...e,t]:[t]),_.Z.success("Budget Updated"),o.resetFields(),a()}catch(e){console.error("Error creating the key:",e),_.Z.fromBackend("Error creating the key: ".concat(e))}};return(0,l.jsx)(I.Z,{title:"Edit Budget",visible:t,width:800,footer:null,onOk:()=>{s(!1),o.resetFields()},onCancel:()=>{s(!1),o.resetFields()},children:(0,l.jsxs)(T.Z,{form:o,onFinish:d,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:i,children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T.Z.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,l.jsx)(B.Z,{placeholder:""})}),(0,l.jsx)(T.Z.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,l.jsx)(D.Z,{step:1,precision:2,width:200})}),(0,l.jsx)(T.Z.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,l.jsx)(D.Z,{step:1,precision:2,width:200})}),(0,l.jsxs)(k.Z,{className:"mt-20 mb-8",children:[(0,l.jsx)(w.Z,{children:(0,l.jsx)("b",{children:"Optional Settings"})}),(0,l.jsxs)(C.Z,{children:[(0,l.jsx)(T.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,l.jsx)(D.Z,{step:.01,precision:2,width:200})}),(0,l.jsx)(T.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,l.jsxs)(N.default,{defaultValue:null,placeholder:"n/a",children:[(0,l.jsx)(N.default.Option,{value:"24h",children:"daily"}),(0,l.jsx)(N.default.Option,{value:"7d",children:"weekly"}),(0,l.jsx)(N.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(E.ZP,{htmlType:"submit",children:"Save"})})]})})},M=e=>{let{accessToken:t}=e,[n,k]=(0,f.useState)(!1),[C,w]=(0,f.useState)(!1),[B,T]=(0,f.useState)(null),[I,D]=(0,f.useState)([]),[N,E]=(0,f.useState)(!1),[M,P]=(0,f.useState)(!1);(0,f.useEffect)(()=>{t&&(0,v.getBudgetList)(t).then(e=>{D(e)})},[t]);let F=async e=>{null!=t&&(T(e),w(!0))},S=e=>{T(e),P(!0)},U=async()=>{if(B&&null!=t){E(!0);try{await (0,v.budgetDeleteCall)(t,B.budget_id),_.Z.success("Budget deleted."),await R()}catch(e){console.error("Error deleting budget:",e),"function"==typeof _.Z.fromBackend?_.Z.fromBackend("Failed to delete budget"):_.Z.info("Failed to delete budget")}finally{E(!1),P(!1),T(null)}}},R=async()=>{null!=t&&(0,v.getBudgetList)(t).then(e=>{D(e)})};return(0,l.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,l.jsx)(s.Z,{size:"sm",variant:"primary",className:"mb-2",onClick:()=>k(!0),children:"+ Create Budget"}),(0,l.jsxs)(a.Z,{children:[(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(i.Z,{children:"Budgets"}),(0,l.jsx)(i.Z,{children:"Examples"})]}),(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(d.Z,{children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)(O,{accessToken:t,isModalVisible:n,setIsModalVisible:k,setBudgetList:D}),B&&(0,l.jsx)(A,{accessToken:t,isModalVisible:C,setIsModalVisible:w,setBudgetList:D,existingBudget:B,handleUpdateCall:R}),(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(j.Z,{children:"Create a budget to assign to customers."}),(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(x.Z,{children:(0,l.jsxs)(g.Z,{children:[(0,l.jsx)(p.Z,{children:"Budget ID"}),(0,l.jsx)(p.Z,{children:"Max Budget"}),(0,l.jsx)(p.Z,{children:"TPM"}),(0,l.jsx)(p.Z,{children:"RPM"})]})}),(0,l.jsx)(m.Z,{children:I.slice().sort((e,t)=>new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime()).map((e,t)=>(0,l.jsxs)(g.Z,{children:[(0,l.jsx)(h.Z,{children:e.budget_id}),(0,l.jsx)(h.Z,{children:e.max_budget?e.max_budget:"n/a"}),(0,l.jsx)(h.Z,{children:e.tpm_limit?e.tpm_limit:"n/a"}),(0,l.jsx)(h.Z,{children:e.rpm_limit?e.rpm_limit:"n/a"}),(0,l.jsx)(y.Z,{variant:"Edit",tooltipText:"Edit budget",onClick:()=>F(e),dataTestId:"edit-budget-button"}),(0,l.jsx)(y.Z,{variant:"Delete",tooltipText:"Delete budget",onClick:()=>S(e),dataTestId:"delete-budget-button"})]},t))})]})]}),(0,l.jsx)(b.Z,{isOpen:M,title:"Delete Budget?",message:"Are you sure you want to delete this budget? This action cannot be undone.",resourceInformationTitle:"Budget Information",resourceInformation:[{label:"Budget ID",value:null==B?void 0:B.budget_id,code:!0},{label:"Max Budget",value:null==B?void 0:B.max_budget},{label:"TPM",value:null==B?void 0:B.tpm_limit},{label:"RPM",value:null==B?void 0:B.rpm_limit}],onCancel:()=>{P(!1)},onOk:U,confirmLoading:N})]})}),(0,l.jsx)(d.Z,{children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)(j.Z,{className:"text-base",children:"How to use budget id"}),(0,l.jsxs)(a.Z,{children:[(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(i.Z,{children:"Assign Budget to Customer"}),(0,l.jsx)(i.Z,{children:"Test it (Curl)"}),(0,l.jsx)(i.Z,{children:"Test it (OpenAI SDK)"})]}),(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(d.Z,{children:(0,l.jsx)(Z.Z,{language:"bash",children:"\ncurl -X POST --location '<your_proxy_base_url>/end_user/new' \\\n\n-H 'Authorization: Bearer <your-master-key>' \\\n\n-H 'Content-Type: application/json' \\\n\n-d '{\"user_id\": \"my-customer-id', \"budget_id\": \"<BUDGET_ID>\"}' # \uD83D\uDC48 KEY CHANGE\n\n"})}),(0,l.jsx)(d.Z,{children:(0,l.jsx)(Z.Z,{language:"bash",children:'\ncurl -X POST --location \'<your_proxy_base_url>/chat/completions\' \\\n\n-H \'Authorization: Bearer <your-master-key>\' \\\n\n-H \'Content-Type: application/json\' \\\n\n-d \'{\n  "model": "gpt-3.5-turbo\',\n  "messages":[{"role": "user", "content": "Hey, how\'s it going?"}],\n  "user": "my-customer-id"\n}\' # \uD83D\uDC48 KEY CHANGE\n\n'})}),(0,l.jsx)(d.Z,{children:(0,l.jsx)(Z.Z,{language:"python",children:'from openai import OpenAI\nclient = OpenAI(\n  base_url="<your_proxy_base_url>",\n  api_key="<your_proxy_key>"\n)\n\ncompletion = client.chat.completions.create(\n  model="gpt-3.5-turbo",\n  messages=[\n    {"role": "system", "content": "You are a helpful assistant."},\n    {"role": "user", "content": "Hello!"}\n  ],\n  user="my-customer-id"\n)\n\nprint(completion.choices[0].message)'})})]})]})]})})]})]})]})}},21609:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var l=n(57437),s=n(57840),r=n(2651),i=n(22116),a=n(51653),o=n(5945),d=n(76188),u=n(4260),c=n(29271),m=n(2265);function h(e){let{isOpen:t,title:n,alertMessage:h,message:x,resourceInformationTitle:p,resourceInformation:g,onCancel:j,onOk:f,confirmLoading:Z,requiredConfirmation:b}=e,{Title:y,Text:_}=s.default,{token:v}=r.Z.useToken(),[k,C]=(0,m.useState)("");return(0,m.useEffect)(()=>{t&&C("")},[t]),(0,l.jsx)(i.Z,{title:n,open:t,onOk:f,onCancel:j,confirmLoading:Z,okText:Z?"Deleting...":"Delete",cancelText:"Cancel",okButtonProps:{danger:!0,disabled:!!b&&k!==b||Z},cancelButtonProps:{disabled:Z},children:(0,l.jsxs)("div",{className:"space-y-4",children:[h&&(0,l.jsx)(a.Z,{message:h,type:"warning"}),(0,l.jsx)(o.Z,{title:p,className:"mt-4",styles:{body:{padding:"16px"},header:{backgroundColor:v.colorErrorBg,borderColor:v.colorErrorBorder}},style:{backgroundColor:v.colorErrorBg,borderColor:v.colorErrorBorder},children:(0,l.jsx)(d.Z,{column:1,size:"small",children:g&&g.map(e=>{let{label:t,value:n,...s}=e;return(0,l.jsx)(d.Z.Item,{label:(0,l.jsx)("span",{className:"font-semibold",children:t}),children:(0,l.jsx)(_,{...s,children:null!=n?n:"-"})},t)})})}),(0,l.jsx)("div",{children:(0,l.jsx)(_,{children:x})}),b&&(0,l.jsxs)("div",{className:"mb-6 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,l.jsxs)(_,{className:"block text-base font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,l.jsx)(_,{children:"Type "}),(0,l.jsx)(_,{strong:!0,type:"danger",children:b}),(0,l.jsx)(_,{children:" to confirm deletion:"})]}),(0,l.jsx)(u.default,{value:k,onChange:e=>C(e.target.value),placeholder:b,className:"rounded-md",prefix:(0,l.jsx)(c.Z,{style:{color:v.colorError}}),autoFocus:!0})]})]})})}},39957:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var l=n(57437),s=n(53410),r=n(74998),i=n(91126),a=n(23628),o=n(44633),d=n(86462),u=n(3477),c=n(99981),m=n(10012),h=n(58927);function x(e){let{icon:t,onClick:n,className:s,disabled:r,dataTestId:i}=e;return r?(0,l.jsx)(h.J,{icon:t,size:"sm",className:"opacity-50 cursor-not-allowed","data-testid":i}):(0,l.jsx)(h.J,{icon:t,size:"sm",onClick:n,className:(0,m.cx)("cursor-pointer",s),"data-testid":i})}n(2265);let p={Edit:{icon:s.Z,className:"hover:text-blue-600"},Delete:{icon:r.Z,className:"hover:text-red-600"},Test:{icon:i.Z,className:"hover:text-blue-600"},Regenerate:{icon:a.Z,className:"hover:text-green-600"},Up:{icon:o.Z,className:"hover:text-blue-600"},Down:{icon:d.Z,className:"hover:text-blue-600"},Open:{icon:u.Z,className:"hover:text-green-600"}};function g(e){let{onClick:t,tooltipText:n,disabled:s=!1,disabledTooltipText:r,dataTestId:i,variant:a}=e,{icon:o,className:d}=p[a];return(0,l.jsx)(c.Z,{title:s?r:n,children:(0,l.jsx)("span",{children:(0,l.jsx)(x,{icon:o,onClick:t,className:d,disabled:s,dataTestId:i})})})}},10012:function(e,t,n){"use strict";n.d(t,{cx:function(){return i}});var l=n(49096),s=n(53335);let{cva:r,cx:i,compose:a}=(0,l.ZD)({hooks:{onComplete:e=>(0,s.m6)(e)}})},97060:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var l=n(14474);function s(e){try{let t=(0,l.o)(e);if(t&&"number"==typeof t.exp)return 1e3*t.exp<=Date.now();return!1}catch(e){return!0}}}},function(e){e.O(0,[9028,8745,1713,4865,7840,337,2652,2926,3367,5869,536,9258,2618,7906,6697,8049,2971,2117,1744],function(){return e(e.s=50373)}),_N_E=e.O()}]);