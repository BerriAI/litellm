(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6459],{44243:function(e,s,l){Promise.resolve().then(l.bind(l,57616))},40728:function(e,s,l){"use strict";l.d(s,{C:function(){return r.Z},x:function(){return a.Z}});var r=l(41649),a=l(84264)},57616:function(e,s,l){"use strict";l.r(s);var r=l(57437),a=l(22004),t=l(80443),n=l(2265),i=l(30874);s.default=()=>{let{userId:e,accessToken:s,userRole:l,premiumUser:c}=(0,t.Z)(),[o,d]=(0,n.useState)([]),[m,u]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(0,a.g)(s,d).then(()=>{})},[s]),(0,n.useEffect)(()=>{(0,i.Nr)(e,l,s,u).then(()=>{})},[e,l,s]),(0,r.jsx)(a.Z,{organizations:o,userRole:l,userModels:m,accessToken:s,setOrganizations:d,premiumUser:c})}},21609:function(e,s,l){"use strict";l.d(s,{Z:function(){return d}});var r=l(57437),a=l(57840),t=l(22116),n=l(51653),i=l(76188),c=l(4260),o=l(2265);function d(e){let{isOpen:s,title:l,alertMessage:d,message:m,resourceInformationTitle:u,resourceInformation:x,onCancel:h,onOk:p,confirmLoading:f,requiredConfirmation:g}=e,{Title:b,Text:v}=a.default,[j,y]=(0,o.useState)("");return(0,o.useEffect)(()=>{s&&y("")},[s]),(0,r.jsx)(t.Z,{title:l,open:s,onOk:p,onCancel:h,confirmLoading:f,okText:f?"Deleting...":"Delete",cancelText:"Cancel",okButtonProps:{danger:!0,disabled:!!g&&j!==g||f},cancelButtonProps:{disabled:f},children:(0,r.jsxs)("div",{className:"space-y-4",children:[d&&(0,r.jsx)(n.Z,{message:d,type:"warning"}),(0,r.jsxs)("div",{className:"mt-4 p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,r.jsx)(b,{level:5,className:"mb-3 text-gray-900",children:u}),(0,r.jsx)(i.Z,{column:1,size:"small",children:x&&x.map(e=>{let{label:s,value:l,...a}=e;return(0,r.jsx)(i.Z.Item,{label:(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:s}),children:(0,r.jsx)(v,{...a,children:null!=l?l:"-"})},s)})})]}),(0,r.jsx)("div",{children:(0,r.jsx)(v,{children:m})}),g&&(0,r.jsxs)("div",{className:"mb-6 mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsxs)(v,{className:"block text-base font-medium text-gray-700 mb-2",children:[(0,r.jsx)(v,{children:"Type "}),(0,r.jsx)(v,{strong:!0,type:"danger",children:g}),(0,r.jsx)(v,{children:" to confirm deletion:"})]}),(0,r.jsx)(c.default,{value:j,onChange:e=>y(e.target.value),placeholder:g,className:"rounded-md text-base border-gray-200",autoFocus:!0})]})]})})}},33860:function(e,s,l){"use strict";var r=l(57437),a=l(2265),t=l(10032),n=l(22116),i=l(37592),c=l(99981),o=l(5545),d=l(7310),m=l.n(d),u=l(19250);s.Z=e=>{let{isVisible:s,onCancel:l,onSubmit:d,accessToken:x,title:h="Add Team Member",roles:p=[{label:"admin",value:"admin",description:"Admin role. Can create team keys, add members, and manage settings."},{label:"user",value:"user",description:"User role. Can view team info, but not manage it."}],defaultRole:f="user"}=e,[g]=t.Z.useForm(),[b,v]=(0,a.useState)([]),[j,y]=(0,a.useState)(!1),[N,_]=(0,a.useState)("user_email"),w=async(e,s)=>{if(!e){v([]);return}y(!0);try{let l=new URLSearchParams;if(l.append(s,e),null==x)return;let r=(await (0,u.userFilterUICall)(x,l)).map(e=>({label:"user_email"===s?"".concat(e.user_email):"".concat(e.user_id),value:"user_email"===s?e.user_email:e.user_id,user:e}));v(r)}catch(e){console.error("Error fetching users:",e)}finally{y(!1)}},Z=(0,a.useCallback)(m()((e,s)=>w(e,s),300),[]),C=(e,s)=>{_(s),Z(e,s)},S=(e,s)=>{let l=s.user;g.setFieldsValue({user_email:l.user_email,user_id:l.user_id,role:g.getFieldValue("role")})};return(0,r.jsx)(n.Z,{title:h,open:s,onCancel:()=>{g.resetFields(),v([]),l()},footer:null,width:800,children:(0,r.jsxs)(t.Z,{form:g,onFinish:d,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:{role:f},children:[(0,r.jsx)(t.Z.Item,{label:"Email",name:"user_email",className:"mb-4",children:(0,r.jsx)(i.default,{showSearch:!0,className:"w-full",placeholder:"Search by email",filterOption:!1,onSearch:e=>C(e,"user_email"),onSelect:(e,s)=>S(e,s),options:"user_email"===N?b:[],loading:j,allowClear:!0})}),(0,r.jsx)("div",{className:"text-center mb-4",children:"OR"}),(0,r.jsx)(t.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,r.jsx)(i.default,{showSearch:!0,className:"w-full",placeholder:"Search by user ID",filterOption:!1,onSearch:e=>C(e,"user_id"),onSelect:(e,s)=>S(e,s),options:"user_id"===N?b:[],loading:j,allowClear:!0})}),(0,r.jsx)(t.Z.Item,{label:"Member Role",name:"role",className:"mb-4",children:(0,r.jsx)(i.default,{defaultValue:f,children:p.map(e=>(0,r.jsx)(i.default.Option,{value:e.value,children:(0,r.jsxs)(c.Z,{title:e.description,children:[(0,r.jsx)("span",{className:"font-medium",children:e.label}),(0,r.jsxs)("span",{className:"ml-2 text-gray-500 text-sm",children:["- ",e.description]})]})},e.value))})}),(0,r.jsx)("div",{className:"text-right mt-4",children:(0,r.jsx)(o.ZP,{type:"default",htmlType:"submit",children:"Add Member"})})]})})}},98015:function(e,s,l){"use strict";l.d(s,{Z:function(){return p}});var r=l(57437),a=l(2265),t=l(92280),n=l(40728),i=l(79814),c=l(19250),o=function(e){let{vectorStores:s,accessToken:l}=e,[t,o]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{if(l&&0!==s.length)try{let e=await (0,c.vectorStoreListCall)(l);e.data&&o(e.data.map(e=>({vector_store_id:e.vector_store_id,vector_store_name:e.vector_store_name})))}catch(e){console.error("Error fetching vector stores:",e)}})()},[l,s.length]);let d=e=>{let s=t.find(s=>s.vector_store_id===e);return s?"".concat(s.vector_store_name||s.vector_store_id," (").concat(s.vector_store_id,")"):e};return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(n.x,{className:"font-semibold text-gray-900",children:"Vector Stores"}),(0,r.jsx)(n.C,{color:"blue",size:"xs",children:s.length})]}),s.length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map((e,s)=>(0,r.jsx)("div",{className:"inline-flex items-center px-3 py-1.5 rounded-lg bg-blue-50 border border-blue-200 text-blue-800 text-sm font-medium",children:d(e)},s))}):(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)(n.x,{className:"text-gray-500 text-sm",children:"No vector stores configured"})]})]})},d=l(25327),m=l(86462),u=l(47686),x=l(99981),h=function(e){let{mcpServers:s,mcpAccessGroups:t=[],mcpToolPermissions:i={},accessToken:o}=e,[h,p]=(0,a.useState)([]),[f,g]=(0,a.useState)([]),[b,v]=(0,a.useState)(new Set),j=e=>{v(s=>{let l=new Set(s);return l.has(e)?l.delete(e):l.add(e),l})};(0,a.useEffect)(()=>{(async()=>{if(o&&s.length>0)try{let e=await (0,c.fetchMCPServers)(o);e&&Array.isArray(e)?p(e):e.data&&Array.isArray(e.data)&&p(e.data)}catch(e){console.error("Error fetching MCP servers:",e)}})()},[o,s.length]),(0,a.useEffect)(()=>{(async()=>{if(o&&t.length>0)try{let e=await Promise.resolve().then(l.bind(l,19250)).then(e=>e.fetchMCPAccessGroups(o));g(Array.isArray(e)?e:e.data||[])}catch(e){console.error("Error fetching MCP access groups:",e)}})()},[o,t.length]);let y=e=>{let s=h.find(s=>s.server_id===e);if(s){let l=e.length>7?"".concat(e.slice(0,3),"...").concat(e.slice(-4)):e;return"".concat(s.alias," (").concat(l,")")}return e},N=e=>e,_=[...s.map(e=>({type:"server",value:e})),...t.map(e=>({type:"accessGroup",value:e}))],w=_.length;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(n.x,{className:"font-semibold text-gray-900",children:"MCP Servers"}),(0,r.jsx)(n.C,{color:"blue",size:"xs",children:w})]}),w>0?(0,r.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2 pr-1",children:_.map((e,s)=>{let l="server"===e.type?i[e.value]:void 0,a=l&&l.length>0,t=b.has(e.value);return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{onClick:()=>a&&j(e.value),className:"flex items-center gap-3 py-2 px-3 rounded-lg border border-gray-200 transition-all ".concat(a?"cursor-pointer hover:bg-gray-50 hover:border-gray-300":"bg-white"),children:[(0,r.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:"server"===e.type?(0,r.jsx)(x.Z,{title:"Full ID: ".concat(e.value),placement:"top",children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,r.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-blue-500 rounded-full flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:y(e.value)})]})}):(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,r.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-green-500 rounded-full flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:N(e.value)}),(0,r.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-[9px] font-semibold text-green-600 bg-green-50 border border-green-200 rounded uppercase tracking-wide flex-shrink-0",children:"Group"})]})}),a&&(0,r.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0 whitespace-nowrap",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-gray-600",children:l.length}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:1===l.length?"tool":"tools"}),t?(0,r.jsx)(m.Z,{className:"h-3.5 w-3.5 text-gray-400 ml-0.5"}):(0,r.jsx)(u.Z,{className:"h-3.5 w-3.5 text-gray-400 ml-0.5"})]})]}),a&&t&&(0,r.jsx)("div",{className:"ml-4 pl-4 border-l-2 border-blue-200 pb-1",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1.5",children:l.map((e,s)=>(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg bg-blue-50 border border-blue-200 text-blue-800 text-xs font-medium",children:e},s))})})]},s)})}):(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)(n.x,{className:"text-gray-500 text-sm",children:"No MCP servers or access groups configured"})]})]})},p=function(e){let{objectPermission:s,variant:l="card",className:a="",accessToken:n}=e,i=(null==s?void 0:s.vector_stores)||[],c=(null==s?void 0:s.mcp_servers)||[],d=(null==s?void 0:s.mcp_access_groups)||[],m=(null==s?void 0:s.mcp_tool_permissions)||{},u=(0,r.jsxs)("div",{className:"card"===l?"grid grid-cols-1 md:grid-cols-2 gap-6":"space-y-4",children:[(0,r.jsx)(o,{vectorStores:i,accessToken:n}),(0,r.jsx)(h,{mcpServers:c,mcpAccessGroups:d,mcpToolPermissions:m,accessToken:n})]});return"card"===l?(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 ".concat(a),children:[(0,r.jsx)("div",{className:"flex items-center gap-2 mb-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(t.x,{className:"font-semibold text-gray-900",children:"Object Permissions"}),(0,r.jsx)(t.x,{className:"text-xs text-gray-500",children:"Access control for Vector Stores and MCP Servers"})]})}),u]}):(0,r.jsxs)("div",{className:"".concat(a),children:[(0,r.jsx)(t.x,{className:"font-medium text-gray-900 mb-3",children:"Object Permissions"}),u]})}},10901:function(e,s,l){"use strict";l.d(s,{Z:function(){return x}});var r=l(57437),a=l(2265),t=l(10032),n=l(22116),i=l(5545),c=l(27281),o=l(57365),d=l(49566),m=l(92280),u=l(24199),x=e=>{var s,l,x;let{visible:h,onCancel:p,onSubmit:f,initialData:g,mode:b,config:v}=e,[j]=t.Z.useForm();console.log("Initial Data:",g),(0,a.useEffect)(()=>{if(h){if("edit"===b&&g){let e={...g,role:g.role||v.defaultRole,max_budget_in_team:g.max_budget_in_team||null,tpm_limit:g.tpm_limit||null,rpm_limit:g.rpm_limit||null};console.log("Setting form values:",e),j.setFieldsValue(e)}else{var e;j.resetFields(),j.setFieldsValue({role:v.defaultRole||(null===(e=v.roleOptions[0])||void 0===e?void 0:e.value)})}}},[h,g,b,j,v.defaultRole,v.roleOptions]);let y=async e=>{try{let s=Object.entries(e).reduce((e,s)=>{let[l,r]=s;if("string"==typeof r){let s=r.trim();return""===s&&("max_budget_in_team"===l||"tpm_limit"===l||"rpm_limit"===l)?{...e,[l]:null}:{...e,[l]:s}}return{...e,[l]:r}},{});console.log("Submitting form data:",s),f(s),j.resetFields()}catch(e){console.error("Form submission error:",e)}},N=e=>{switch(e.type){case"input":return(0,r.jsx)(d.Z,{placeholder:e.placeholder});case"numerical":return(0,r.jsx)(u.Z,{step:e.step||1,min:e.min||0,style:{width:"100%"},placeholder:e.placeholder||"Enter a numerical value"});case"select":var s;return(0,r.jsx)(c.Z,{children:null===(s=e.options)||void 0===s?void 0:s.map(e=>(0,r.jsx)(o.Z,{value:e.value,children:e.label},e.value))});default:return null}};return(0,r.jsx)(n.Z,{title:v.title||("add"===b?"Add Member":"Edit Member"),open:h,width:1e3,footer:null,onCancel:p,children:(0,r.jsxs)(t.Z,{form:j,onFinish:y,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[v.showEmail&&(0,r.jsx)(t.Z.Item,{label:"Email",name:"user_email",className:"mb-4",rules:[{type:"email",message:"Please enter a valid email!"}],children:(0,r.jsx)(d.Z,{placeholder:"user@example.com"})}),v.showEmail&&v.showUserId&&(0,r.jsx)("div",{className:"text-center mb-4",children:(0,r.jsx)(m.x,{children:"OR"})}),v.showUserId&&(0,r.jsx)(t.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,r.jsx)(d.Z,{placeholder:"user_123"})}),(0,r.jsx)(t.Z.Item,{label:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"Role"}),"edit"===b&&g&&(0,r.jsxs)("span",{className:"text-gray-500 text-sm",children:["(Current: ",(l=g.role,(null===(x=v.roleOptions.find(e=>e.value===l))||void 0===x?void 0:x.label)||l),")"]})]}),name:"role",className:"mb-4",rules:[{required:!0,message:"Please select a role!"}],children:(0,r.jsx)(c.Z,{children:"edit"===b&&g?[...v.roleOptions.filter(e=>e.value===g.role),...v.roleOptions.filter(e=>e.value!==g.role)].map(e=>(0,r.jsx)(o.Z,{value:e.value,children:e.label},e.value)):v.roleOptions.map(e=>(0,r.jsx)(o.Z,{value:e.value,children:e.label},e.value))})}),null===(s=v.additionalFields)||void 0===s?void 0:s.map(e=>(0,r.jsx)(t.Z.Item,{label:e.label,name:e.name,className:"mb-4",rules:e.rules,children:N(e)},e.name)),(0,r.jsxs)("div",{className:"text-right mt-6",children:[(0,r.jsx)(i.ZP,{onClick:p,className:"mr-2",children:"Cancel"}),(0,r.jsx)(i.ZP,{type:"default",htmlType:"submit",children:"add"===b?"Add Member":"Save Changes"})]})]})})}}},function(e){e.O(0,[1047,9028,9409,4865,8135,1442,2926,2409,1529,3709,353,1994,3705,8565,5319,5333,525,6609,7996,4546,395,9301,8049,9877,2202,874,2004,2971,2117,1744],function(){return e(e.s=44243)}),_N_E=e.O()}]);