(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6061],{86947:function(e,s,l){Promise.resolve().then(l.bind(l,21933))},57018:function(e,s,l){"use strict";l.d(s,{Ct:function(){return t.Z},Dx:function(){return r.Z},Zb:function(){return i.Z},xv:function(){return n.Z},zx:function(){return a.Z}});var t=l(41649),a=l(20831),i=l(12514),n=l(84264),r=l(96761)},21933:function(e,s,l){"use strict";l.r(s);var t=l(57437),a=l(91162),i=l(39760);s.default=()=>{let{accessToken:e,userId:s,userRole:l}=(0,i.Z)();return(0,t.jsx)(a.Z,{accessToken:e,userID:s,userRole:l})}},91162:function(e,s,l){"use strict";l.d(s,{Z:function(){return R}});var t=l(57437),a=l(2265),i=l(20831),n=l(49804),r=l(67101),c=l(47323),d=l(84264),o=l(49566),m=l(23628),x=l(13634),h=l(82680),u=l(64482),g=l(89970),j=l(52787),p=l(15424),f=l(57018),v=l(30874),N=l(46468),Z=l(19250),w=l(9114),b=e=>{let{tagId:s,onClose:l,accessToken:i,is_admin:n,editTag:r}=e,[c]=x.Z.useForm(),[d,o]=(0,a.useState)(null),[m,h]=(0,a.useState)(r),[b,y]=(0,a.useState)([]),C=async()=>{if(i)try{let e=(await (0,Z.tagInfoCall)(i,[s]))[s];e&&(o(e),r&&c.setFieldsValue({name:e.name,description:e.description,models:e.models}))}catch(e){console.error("Error fetching tag details:",e),w.Z.fromBackend("Error fetching tag details: "+e)}};(0,a.useEffect)(()=>{C()},[s,i]),(0,a.useEffect)(()=>{i&&(0,v.Nr)("dummy-user","Admin",i,y)},[i]);let _=async e=>{if(i)try{await (0,Z.tagUpdateCall)(i,{name:e.name,description:e.description,models:e.models}),w.Z.success("Tag updated successfully"),h(!1),C()}catch(e){console.error("Error updating tag:",e),w.Z.fromBackend("Error updating tag: "+e)}};return d?(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(f.zx,{onClick:l,className:"mb-4",children:"â† Back to Tags"}),(0,t.jsxs)(f.Dx,{children:["Tag Name: ",d.name]}),(0,t.jsx)(f.xv,{className:"text-gray-500",children:d.description||"No description"})]}),n&&!m&&(0,t.jsx)(f.zx,{onClick:()=>h(!0),children:"Edit Tag"})]}),m?(0,t.jsx)(f.Zb,{children:(0,t.jsxs)(x.Z,{form:c,onFinish:_,layout:"vertical",initialValues:d,children:[(0,t.jsx)(x.Z.Item,{label:"Tag Name",name:"name",rules:[{required:!0,message:"Please input a tag name"}],children:(0,t.jsx)(u.default,{})}),(0,t.jsx)(x.Z.Item,{label:"Description",name:"description",children:(0,t.jsx)(u.default.TextArea,{rows:4})}),(0,t.jsx)(x.Z.Item,{label:(0,t.jsxs)("span",{children:["Allowed LLMs"," ",(0,t.jsx)(g.Z,{title:"Select which LLMs are allowed to process this type of data",children:(0,t.jsx)(p.Z,{style:{marginLeft:"4px"}})})]}),name:"models",children:(0,t.jsx)(j.default,{mode:"multiple",placeholder:"Select LLMs",children:b.map(e=>(0,t.jsx)(j.default.Option,{value:e,children:(0,N.W0)(e)},e))})}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(f.zx,{onClick:()=>h(!1),children:"Cancel"}),(0,t.jsx)(f.zx,{type:"submit",children:"Save Changes"})]})]})}):(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(f.Zb,{children:[(0,t.jsx)(f.Dx,{children:"Tag Details"}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(f.xv,{className:"font-medium",children:"Name"}),(0,t.jsx)(f.xv,{children:d.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.xv,{className:"font-medium",children:"Description"}),(0,t.jsx)(f.xv,{children:d.description||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.xv,{className:"font-medium",children:"Allowed LLMs"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:0===d.models.length?(0,t.jsx)(f.Ct,{color:"red",children:"All Models"}):d.models.map(e=>{var s;return(0,t.jsx)(f.Ct,{color:"blue",children:(0,t.jsx)(g.Z,{title:"ID: ".concat(e),children:(null===(s=d.model_info)||void 0===s?void 0:s[e])||e})},e)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.xv,{className:"font-medium",children:"Created"}),(0,t.jsx)(f.xv,{children:d.created_at?new Date(d.created_at).toLocaleString():"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(f.xv,{className:"font-medium",children:"Last Updated"}),(0,t.jsx)(f.xv,{children:d.updated_at?new Date(d.updated_at).toLocaleString():"-"})]})]})]})})]}):(0,t.jsx)("div",{children:"Loading..."})},y=l(41649),C=l(21626),_=l(97214),k=l(28241),S=l(58834),L=l(69552),D=l(71876),T=l(53410),E=l(74998),M=l(44633),I=l(86462),A=l(49084),z=l(71594),F=l(24525),B=e=>{let{data:s,onEdit:l,onDelete:n,onSelectTag:r}=e,[o,m]=a.useState([{id:"created_at",desc:!0}]),x=[{header:"Tag Name",accessorKey:"name",cell:e=>{let{row:s}=e,l=s.original;return(0,t.jsx)("div",{className:"overflow-hidden",children:(0,t.jsx)(g.Z,{title:l.name,children:(0,t.jsx)(i.Z,{size:"xs",variant:"light",className:"font-mono text-blue-500 bg-blue-50 hover:bg-blue-100 text-xs font-normal px-2 py-0.5",onClick:()=>r(l.name),children:l.name})})})}},{header:"Description",accessorKey:"description",cell:e=>{let{row:s}=e,l=s.original;return(0,t.jsx)(g.Z,{title:l.description,children:(0,t.jsx)("span",{className:"text-xs",children:l.description||"-"})})}},{header:"Allowed LLMs",accessorKey:"models",cell:e=>{var s,l;let{row:a}=e,i=a.original;return(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(null==i?void 0:null===(s=i.models)||void 0===s?void 0:s.length)===0?(0,t.jsx)(y.Z,{size:"xs",className:"mb-1",color:"red",children:"All Models"}):null==i?void 0:null===(l=i.models)||void 0===l?void 0:l.map(e=>{var s;return(0,t.jsx)(y.Z,{size:"xs",className:"mb-1",color:"blue",children:(0,t.jsx)(g.Z,{title:"ID: ".concat(e),children:(0,t.jsx)(d.Z,{children:(null===(s=i.model_info)||void 0===s?void 0:s[e])||e})})},e)})})}},{header:"Created",accessorKey:"created_at",sortingFn:"datetime",cell:e=>{let{row:s}=e,l=s.original;return(0,t.jsx)("span",{className:"text-xs",children:new Date(l.created_at).toLocaleDateString()})}},{id:"actions",header:"",cell:e=>{let{row:s}=e,a=s.original;return(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(c.Z,{icon:T.Z,size:"sm",onClick:()=>l(a),className:"cursor-pointer"}),(0,t.jsx)(c.Z,{icon:E.Z,size:"sm",onClick:()=>n(a.name),className:"cursor-pointer"})]})}}],h=(0,z.b7)({data:s,columns:x,state:{sorting:o},onSortingChange:m,getCoreRowModel:(0,F.sC)(),getSortedRowModel:(0,F.tj)(),enableSorting:!0});return(0,t.jsx)("div",{className:"rounded-lg custom-border relative",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(C.Z,{className:"[&_td]:py-0.5 [&_th]:py-1",children:[(0,t.jsx)(S.Z,{children:h.getHeaderGroups().map(e=>(0,t.jsx)(D.Z,{children:e.headers.map(e=>(0,t.jsx)(L.Z,{className:"py-1 h-8 ".concat("actions"===e.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""),onClick:e.column.getToggleSortingHandler(),children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"flex items-center",children:e.isPlaceholder?null:(0,z.ie)(e.column.columnDef.header,e.getContext())}),"actions"!==e.id&&(0,t.jsx)("div",{className:"w-4",children:e.column.getIsSorted()?({asc:(0,t.jsx)(M.Z,{className:"h-4 w-4 text-blue-500"}),desc:(0,t.jsx)(I.Z,{className:"h-4 w-4 text-blue-500"})})[e.column.getIsSorted()]:(0,t.jsx)(A.Z,{className:"h-4 w-4 text-gray-400"})})]})},e.id))},e.id))}),(0,t.jsx)(_.Z,{children:h.getRowModel().rows.length>0?h.getRowModel().rows.map(e=>(0,t.jsx)(D.Z,{className:"h-8",children:e.getVisibleCells().map(e=>(0,t.jsx)(k.Z,{className:"py-0.5 max-h-8 overflow-hidden text-ellipsis whitespace-nowrap ".concat("actions"===e.column.id?"sticky right-0 bg-white shadow-[-4px_0_8px_-6px_rgba(0,0,0,0.1)]":""),children:(0,z.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(D.Z,{children:(0,t.jsx)(k.Z,{colSpan:x.length,className:"h-8 text-center",children:(0,t.jsx)("div",{className:"text-center text-gray-500",children:(0,t.jsx)("p",{children:"No tags found"})})})})})]})})})},R=e=>{let{accessToken:s,userID:l,userRole:f}=e,[v,N]=(0,a.useState)([]),[y,C]=(0,a.useState)(!1),[_,k]=(0,a.useState)(null),[S,L]=(0,a.useState)(!1),[D,T]=(0,a.useState)(!1),[E,M]=(0,a.useState)(null),[I,A]=(0,a.useState)(""),[z]=x.Z.useForm(),[F,R]=(0,a.useState)([]),O=async()=>{if(s)try{let e=await (0,Z.tagListCall)(s);console.log("List tags response:",e),N(Object.values(e))}catch(e){console.error("Error fetching tags:",e),w.Z.fromBackend("Error fetching tags: "+e)}},q=async e=>{if(s)try{await (0,Z.tagCreateCall)(s,{name:e.tag_name,description:e.description,models:e.allowed_llms}),w.Z.success("Tag created successfully"),C(!1),z.resetFields(),O()}catch(e){console.error("Error creating tag:",e),w.Z.fromBackend("Error creating tag: "+e)}},K=async e=>{M(e),T(!0)},P=async()=>{if(s&&E){try{await (0,Z.tagDeleteCall)(s,E),w.Z.success("Tag deleted successfully"),O()}catch(e){console.error("Error deleting tag:",e),w.Z.fromBackend("Error deleting tag: "+e)}T(!1),M(null)}};return(0,a.useEffect)(()=>{l&&f&&s&&(async()=>{try{let e=await (0,Z.modelInfoCall)(s,l,f);e&&e.data&&R(e.data)}catch(e){console.error("Error fetching models:",e),w.Z.fromBackend("Error fetching models: "+e)}})()},[s,l,f]),(0,a.useEffect)(()=>{O()},[s]),(0,t.jsx)("div",{className:"w-full mx-4 h-[75vh]",children:_?(0,t.jsx)(b,{tagId:_,onClose:()=>{k(null),L(!1)},accessToken:s,is_admin:"Admin"===f,editTag:S}):(0,t.jsxs)("div",{className:"gap-2 p-8 h-[75vh] w-full mt-2",children:[(0,t.jsxs)("div",{className:"flex justify-between mt-2 w-full items-center mb-4",children:[(0,t.jsx)("h1",{children:"Tag Management"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[I&&(0,t.jsxs)(d.Z,{children:["Last Refreshed: ",I]}),(0,t.jsx)(c.Z,{icon:m.Z,variant:"shadow",size:"xs",className:"self-center cursor-pointer",onClick:()=>{O(),A(new Date().toLocaleString())}})]})]}),(0,t.jsxs)(d.Z,{className:"mb-4",children:["Click on a tag name to view and edit its details.",(0,t.jsxs)("p",{children:["You can use tags to restrict the usage of certain LLMs based on tags passed in the request. Read more about tag routing"," ",(0,t.jsx)("a",{href:"https://docs.litellm.ai/docs/proxy/tag_routing",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})]}),(0,t.jsx)(i.Z,{className:"mb-4",onClick:()=>C(!0),children:"+ Create New Tag"}),(0,t.jsx)(r.Z,{numItems:1,className:"gap-2 pt-2 pb-2 h-[75vh] w-full mt-2",children:(0,t.jsx)(n.Z,{numColSpan:1,children:(0,t.jsx)(B,{data:v,onEdit:e=>{k(e.name),L(!0)},onDelete:K,onSelectTag:k})})}),(0,t.jsx)(h.Z,{title:"Create New Tag",visible:y,width:800,footer:null,onCancel:()=>{C(!1),z.resetFields()},children:(0,t.jsxs)(x.Z,{form:z,onFinish:q,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsx)(x.Z.Item,{label:"Tag Name",name:"tag_name",rules:[{required:!0,message:"Please input a tag name"}],children:(0,t.jsx)(o.Z,{})}),(0,t.jsx)(x.Z.Item,{label:"Description",name:"description",children:(0,t.jsx)(u.default.TextArea,{rows:4})}),(0,t.jsx)(x.Z.Item,{label:(0,t.jsxs)("span",{children:["Allowed Models"," ",(0,t.jsx)(g.Z,{title:"Select which LLMs are allowed to process requests from this tag",children:(0,t.jsx)(p.Z,{style:{marginLeft:"4px"}})})]}),name:"allowed_llms",children:(0,t.jsx)(j.default,{mode:"multiple",placeholder:"Select LLMs",children:F.map(e=>(0,t.jsx)(j.default.Option,{value:e.model_info.id,children:(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:e.model_name}),(0,t.jsxs)("span",{className:"text-gray-400 ml-2",children:["(",e.model_info.id,")"]})]})},e.model_info.id))})}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(i.Z,{type:"submit",children:"Create Tag"})})]})}),D&&(0,t.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),(0,t.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,t.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,t.jsx)("div",{className:"sm:flex sm:items-start",children:(0,t.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[(0,t.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Delete Tag"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Are you sure you want to delete this tag?"})})]})})}),(0,t.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,t.jsx)(i.Z,{onClick:P,color:"red",className:"ml-2",children:"Delete"}),(0,t.jsx)(i.Z,{onClick:()=>{T(!1),M(null)},children:"Cancel"})]})]})]})})]})})}}},function(e){e.O(0,[9820,1491,1526,2417,3709,9775,2525,1529,2284,7908,9011,9678,3603,5319,1039,6494,5188,4924,8049,1633,2202,874,2971,2117,1744],function(){return e(e.s=86947)}),_N_E=e.O()}]);