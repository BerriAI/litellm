(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8021],{39793:function(e,l,t){Promise.resolve().then(t.bind(t,14809))},16312:function(e,l,t){"use strict";t.d(l,{z:function(){return r.Z}});var r=t(78489)},58643:function(e,l,t){"use strict";t.d(l,{OK:function(){return r.Z},nP:function(){return i.Z},td:function(){return s.Z},v0:function(){return a.Z},x4:function(){return n.Z}});var r=t(12485),a=t(18135),s=t(35242),n=t(29706),i=t(77991)},90246:function(e,l,t){"use strict";function r(e){let l=[e];return{all:l,lists:()=>[...l,"list"],list:e=>[...l,"list",{params:e}],details:()=>[...l,"detail"],detail:e=>[...l,"detail",e]}}t.d(l,{n:function(){return r}})},76191:function(e,l,t){"use strict";t.d(l,{p:function(){return n}});var r=t(19250),a=t(11713);let s=(0,t(90246).n)("uiConfig"),n=()=>(0,a.a)({queryKey:s.list({}),queryFn:async()=>await (0,r.getUiConfig)(),staleTime:864e5,gcTime:864e5})},39760:function(e,l,t){"use strict";var r=t(19250),a=t(3914),s=t(97060),n=t(14474),i=t(99376),o=t(2265),c=t(76191);l.Z=()=>{var e,l,t,d,u,m;let g=(0,i.useRouter)(),{data:x,isLoading:f}=(0,c.p)(),h="undefined"!=typeof document?(0,a.e)("token"):null;(0,o.useEffect)(()=>{(!h||h&&(0,s.v)(h))&&(h&&(0,a.b)(),g.replace("".concat((0,r.getProxyBaseUrl)(),"/ui/login")))},[h,g]),(0,o.useEffect)(()=>{!f&&(null==x?void 0:x.admin_ui_disabled)&&g.replace("".concat((0,r.getProxyBaseUrl)(),"/ui/login"))},[g,f,x]);let p=(0,o.useMemo)(()=>{if(!h)return null;try{return(0,n.o)(h)}catch(e){return(0,a.b)(),g.replace("".concat((0,r.getProxyBaseUrl)(),"/ui/login")),null}},[h,g]);return{token:h,accessToken:null!==(e=null==p?void 0:p.key)&&void 0!==e?e:null,userId:null!==(l=null==p?void 0:p.user_id)&&void 0!==l?l:null,userEmail:null!==(t=null==p?void 0:p.user_email)&&void 0!==t?t:null,userRole:function(e){if(!e)return"Undefined Role";switch(e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"org_admin":return"Org Admin";case"internal_user":return"Internal User";case"internal_user_viewer":case"internal_viewer":return"Internal Viewer";case"app_user":return"App User";default:return"Unknown Role"}}(null!==(d=null==p?void 0:p.user_role)&&void 0!==d?d:null),premiumUser:null!==(u=null==p?void 0:p.premium_user)&&void 0!==u?u:null,disabledPersonalKeyCreation:null!==(m=null==p?void 0:p.disabled_non_admin_personal_key_creation)&&void 0!==m?m:null,showSSOBanner:(null==p?void 0:p.login_method)==="username_password"}}},14809:function(e,l,t){"use strict";t.r(l);var r=t(57437),a=t(32526),s=t(39760);l.default=()=>{let{accessToken:e,userRole:l,userId:t}=(0,s.Z)();return(0,r.jsx)(a.Z,{accessToken:e,userRole:l,userID:t,modelData:{}})}},89348:function(e,l,t){"use strict";t.d(l,{$:function(){return f}});var r=t(57437),a=t(16312),s=t(42264),n=t(65869),i=t(99397),o=t(2265),c=t(37592),d=t(99981),u=t(49322),m=t(15051),g=t(32489);function x(e){let{group:l,onChange:t,availableModels:a,maxFallbacks:s}=e,n=a.filter(e=>e!==l.primaryModel),i=e=>{let r=l.fallbackModels.filter((l,t)=>t!==e);t({...l,fallbackModels:r})},o=l.fallbackModels.length<s;return(0,r.jsxs)("div",{className:"flex flex-col gap-8 py-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Primary Model ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(c.default,{className:"w-full h-12",size:"large",placeholder:"Select primary model",value:l.primaryModel,onChange:e=>{let r=[...l.fallbackModels];r.includes(e)&&(r=r.filter(l=>l!==e)),t({...l,primaryModel:e,fallbackModels:r})},showSearch:!0,filterOption:(e,l)=>{var t;return(null!==(t=null==l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},options:a.map(e=>({label:e,value:e}))}),!l.primaryModel&&(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-amber-600 text-xs bg-amber-50 p-2 rounded",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Select a model to begin configuring fallbacks"})]})]}),(0,r.jsx)("div",{className:"flex items-center justify-center -my-4 z-10",children:(0,r.jsxs)("div",{className:"bg-indigo-50 text-indigo-500 px-4 py-1 rounded-full text-xs font-bold border border-indigo-100 flex items-center gap-2 shadow-sm",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4"}),"IF FAILS, TRY..."]})}),(0,r.jsxs)("div",{className:"transition-opacity duration-300 ".concat(l.primaryModel?"opacity-100":"opacity-50 pointer-events-none"),children:[(0,r.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Fallback Chain ",(0,r.jsx)("span",{className:"text-red-500",children:"*"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 font-normal ml-2",children:["(Max ",s," fallbacks at a time)"]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(c.default,{mode:"multiple",className:"w-full",size:"large",placeholder:o?"Select fallback models to add...":"Maximum ".concat(s," fallbacks reached"),value:l.fallbackModels,onChange:e=>{let r=e.slice(0,s);t({...l,fallbackModels:r})},disabled:!l.primaryModel,options:n.map(e=>({label:e,value:e})),optionRender:(e,t)=>{let a=l.fallbackModels.includes(e.value),s=a?l.fallbackModels.indexOf(e.value)+1:null;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[a&&null!==s&&(0,r.jsx)("span",{className:"flex items-center justify-center w-5 h-5 rounded bg-indigo-100 text-indigo-600 text-xs font-bold",children:s}),(0,r.jsx)("span",{children:e.label})]})},maxTagCount:"responsive",maxTagPlaceholder:e=>(0,r.jsx)(d.Z,{styles:{root:{pointerEvents:"none"}},title:e.map(e=>{let{value:l}=e;return l}).join(", "),children:(0,r.jsxs)("span",{children:["+",e.length," more"]})}),showSearch:!0,filterOption:(e,l)=>{var t;return(null!==(t=null==l?void 0:l.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1 ml-1",children:o?"Search and select multiple models. Selected models will appear below in order. (".concat(l.fallbackModels.length,"/").concat(s," used)"):"Maximum ".concat(s," fallbacks reached. Remove some to add more.")})]}),(0,r.jsx)("div",{className:"space-y-2 min-h-[100px]",children:0===l.fallbackModels.length?(0,r.jsxs)("div",{className:"h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-400",children:[(0,r.jsx)("span",{className:"text-sm",children:"No fallback models selected"}),(0,r.jsx)("span",{className:"text-xs mt-1",children:"Add models from the dropdown above"})]}):l.fallbackModels.map((e,l)=>(0,r.jsxs)("div",{className:"group flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 hover:border-indigo-300 hover:shadow-sm transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded bg-gray-100 text-gray-400 group-hover:text-indigo-500 group-hover:bg-indigo-50",children:(0,r.jsx)("span",{className:"text-xs font-bold",children:l+1})}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"font-medium text-gray-800",children:e})})]}),(0,r.jsx)("button",{type:"button",onClick:()=>i(l),className:"opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-red-500 p-1",children:(0,r.jsx)(g.Z,{className:"w-4 h-4"})})]},"".concat(e,"-").concat(l)))})]})]})]})}function f(e){let{groups:l,onGroupsChange:t,availableModels:c,maxFallbacks:d=5,maxGroups:u=5}=e,[m,g]=(0,o.useState)(l.length>0?l[0].id:"1");(0,o.useEffect)(()=>{l.length>0?l.some(e=>e.id===m)||g(l[0].id):g("1")},[l]);let f=()=>{if(l.length>=u)return;let e=Date.now().toString();t([...l,{id:e,primaryModel:null,fallbackModels:[]}]),g(e)},h=e=>{if(1===l.length){s.ZP.warning("At least one group is required");return}let r=l.filter(l=>l.id!==e);t(r),m===e&&r.length>0&&g(r[r.length-1].id)},p=e=>{t(l.map(l=>l.id===e.id?e:l))},y=l.map((e,t)=>{let a=e.primaryModel?e.primaryModel:"Group ".concat(t+1);return{key:e.id,label:a,closable:l.length>1,children:(0,r.jsx)(x,{group:e,onChange:p,availableModels:c,maxFallbacks:d})}});return 0===l.length?(0,r.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"No fallback groups configured"}),(0,r.jsx)(a.z,{variant:"primary",onClick:f,icon:()=>(0,r.jsx)(i.Z,{className:"w-4 h-4"}),children:"Create First Group"})]}):(0,r.jsx)(n.default,{type:"editable-card",activeKey:m,onChange:g,onEdit:(e,t)=>{"add"===t?f():"remove"===t&&l.length>1&&h(e)},items:y,className:"fallback-tabs",tabBarStyle:{marginBottom:0},hideAdd:l.length>=u})}},21609:function(e,l,t){"use strict";t.d(l,{Z:function(){return g}});var r=t(57437),a=t(57840),s=t(2651),n=t(22116),i=t(51653),o=t(5945),c=t(76188),d=t(4260),u=t(29271),m=t(2265);function g(e){let{isOpen:l,title:t,alertMessage:g,message:x,resourceInformationTitle:f,resourceInformation:h,onCancel:p,onOk:y,confirmLoading:b,requiredConfirmation:j}=e,{Title:v,Text:_}=a.default,{token:k}=s.Z.useToken(),[N,w]=(0,m.useState)("");return(0,m.useEffect)(()=>{l&&w("")},[l]),(0,r.jsx)(n.Z,{title:t,open:l,onOk:y,onCancel:p,confirmLoading:b,okText:b?"Deleting...":"Delete",cancelText:"Cancel",okButtonProps:{danger:!0,disabled:!!j&&N!==j||b},cancelButtonProps:{disabled:b},children:(0,r.jsxs)("div",{className:"space-y-4",children:[g&&(0,r.jsx)(i.Z,{message:g,type:"warning"}),(0,r.jsx)(o.Z,{title:f,className:"mt-4",styles:{body:{padding:"16px"},header:{backgroundColor:k.colorErrorBg,borderColor:k.colorErrorBorder}},style:{backgroundColor:k.colorErrorBg,borderColor:k.colorErrorBorder},children:(0,r.jsx)(c.Z,{column:1,size:"small",children:h&&h.map(e=>{let{label:l,value:t,...a}=e;return(0,r.jsx)(c.Z.Item,{label:(0,r.jsx)("span",{className:"font-semibold",children:l}),children:(0,r.jsx)(_,{...a,children:null!=t?t:"-"})},l)})})}),(0,r.jsx)("div",{children:(0,r.jsx)(_,{children:x})}),j&&(0,r.jsxs)("div",{className:"mb-6 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)(_,{className:"block text-base font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,r.jsx)(_,{children:"Type "}),(0,r.jsx)(_,{strong:!0,type:"danger",children:j}),(0,r.jsx)(_,{children:" to confirm deletion:"})]}),(0,r.jsx)(d.default,{value:N,onChange:e=>w(e.target.value),placeholder:j,className:"rounded-md",prefix:(0,r.jsx)(u.Z,{style:{color:k.colorError}}),autoFocus:!0})]})]})})}},32526:function(e,l,t){"use strict";t.d(l,{Z:function(){return I}});var r=t(57437),a=t(2265),s=t(41649),n=t(78489),i=t(12514),o=t(47323),c=t(21626),d=t(97214),u=t(28241),m=t(58834),g=t(69552),x=t(71876),f=t(84264),h=t(58643),p=t(19250),y=t(12221),b=t(44643),j=t(74998),v=t(16312),_=t(9114),k=t(56334),N=e=>{let{accessToken:l,userRole:t,userID:s,modelData:n}=e,[i,o]=(0,a.useState)({routerSettings:{},selectedStrategy:null,enableTagFiltering:!1}),[c,d]=(0,a.useState)([]),[u,m]=(0,a.useState)({}),[g,x]=(0,a.useState)({});return((0,a.useEffect)(()=>{l&&t&&s&&((0,p.getCallbacksCall)(l,s,t).then(e=>{console.log("callbacks",e);let l=e.router_settings;"model_group_retry_policy"in l&&delete l.model_group_retry_policy;let t=l.routing_strategy||null;o(e=>({...e,routerSettings:l,selectedStrategy:t}))}),(0,p.getRouterSettingsCall)(l).then(e=>{if(console.log("router settings from API",e),e.fields){let l={};e.fields.forEach(e=>{l[e.field_name]={ui_field_name:e.ui_field_name,field_description:e.field_description,options:e.options,link:e.link}}),m(l);let t=e.fields.find(e=>"routing_strategy"===e.field_name);(null==t?void 0:t.options)&&d(t.options),e.routing_strategy_descriptions&&x(e.routing_strategy_descriptions);let r=e.fields.find(e=>"enable_tag_filtering"===e.field_name);(null==r?void 0:r.field_value)!==null&&(null==r?void 0:r.field_value)!==void 0&&o(e=>({...e,enableTagFiltering:r.field_value}))}}))},[l,t,s]),l)?(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(k.Z,{value:i,onChange:o,routerFieldsMetadata:u,availableRoutingStrategies:c,routingStrategyDescriptions:g}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-6 flex justify-end gap-3",children:[(0,r.jsx)(v.z,{variant:"secondary",size:"sm",onClick:()=>window.location.reload(),className:"text-sm",children:"Reset"}),(0,r.jsx)(v.z,{size:"sm",onClick:()=>{if(!l)return;let e=i.routerSettings;console.log("router_settings",e);let t=new Set(["allowed_fails","cooldown_time","num_retries","timeout","retry_after"]),r=new Set(["model_group_alias","retry_policy"]),a=(e,l,a)=>{if(void 0===l)return a;let s=l.trim();if("null"===s.toLowerCase())return null;if(t.has(e)){let e=Number(s);return Number.isNaN(e)?a:e}if(r.has(e)){if(""===s)return null;try{return JSON.parse(s)}catch(e){return a}}return"true"===s.toLowerCase()||"false"!==s.toLowerCase()&&s},s=Object.fromEntries(Object.entries({...e,enable_tag_filtering:i.enableTagFiltering}).map(e=>{let[l,t]=e;if("routing_strategy_args"!==l&&"routing_strategy"!==l&&"enable_tag_filtering"!==l){let e=document.querySelector('input[name="'.concat(l,'"]')),r=a(l,null==e?void 0:e.value,t);return[l,r]}if("routing_strategy"===l)return[l,i.selectedStrategy];if("enable_tag_filtering"===l)return[l,i.enableTagFiltering];if("routing_strategy_args"===l&&"latency-based-routing"===i.selectedStrategy){let e={},l=document.querySelector('input[name="lowest_latency_buffer"]'),t=document.querySelector('input[name="ttl"]');return(null==l?void 0:l.value)&&(e.lowest_latency_buffer=Number(l.value)),(null==t?void 0:t.value)&&(e.ttl=Number(t.value)),console.log("setRoutingStrategyArgs: ".concat(e)),["routing_strategy_args",e]}return null}).filter(e=>null!=e));console.log("updatedVariables",s);try{(0,p.setCallbacksCall)(l,{router_settings:s})}catch(e){_.Z.fromBackend("Failed to update router settings: "+e)}_.Z.success("router settings updated successfully")},className:"text-sm font-medium",children:"Save Changes"})]})]}):null},w=t(91126),Z=t(99981),S=t(7271),C=t(21609),M=t(42264),F=t(5545),O=t(10703),E=t(22116),T=t(76858);function A(e){let{open:l,onCancel:t,children:a}=e;return(0,r.jsx)(E.Z,{title:(0,r.jsx)("div",{className:"pb-4 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-800",children:[(0,r.jsx)("div",{className:"p-2 bg-indigo-50 rounded-lg",children:(0,r.jsx)(T.Z,{className:"w-5 h-5 text-indigo-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-bold m-0",children:"Configure Model Fallbacks"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 font-normal m-0",children:"Manage multiple fallback chains for different models (up to 5 groups at a time)"})]})]})}),open:l,width:900,footer:null,onCancel:t,maskClosable:!1,className:"top-8",styles:{body:{padding:"24px"},header:{padding:"24px 24px 0 24px",border:"none"}},children:(0,r.jsx)("div",{className:"mt-6",children:a})})}var R=t(89348);function B(e){let{models:l,accessToken:t,value:s=[],onChange:n}=e,[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)([]),[u,m]=(0,a.useState)(0),[g,x]=(0,a.useState)(!1),[f,h]=(0,a.useState)([{id:"1",primaryModel:null,fallbackModels:[]}]);(0,a.useEffect)(()=>{i&&(h([{id:"1",primaryModel:null,fallbackModels:[]}]),m(e=>e+1))},[i]),(0,a.useEffect)(()=>{let e=async()=>{try{let e=await (0,O.p)(t);console.log("Fetched models for fallbacks:",e),d(e)}catch(e){console.error("Error fetching model info for fallbacks:",e)}};i&&e()},[t,i]);let p=Array.from(new Set(c.map(e=>e.model_group))).sort(),y=()=>{o(!1),h([{id:"1",primaryModel:null,fallbackModels:[]}])},b=async()=>{let e=f.filter(e=>!e.primaryModel||0===e.fallbackModels.length);if(e.length>0){M.ZP.error("Please complete configuration for all groups. ".concat(e.length," group(s) incomplete."));return}let l=[...s||[],...f.map(e=>({[e.primaryModel]:e.fallbackModels}))];if(n){x(!0);try{await n(l),_.Z.success("".concat(f.length," fallback configuration(s) added successfully!")),y()}catch(e){console.error("Error saving fallbacks:",e)}finally{x(!1)}}else _.Z.fromBackend("onChange callback not provided")};return(0,r.jsxs)("div",{children:[(0,r.jsx)(v.z,{className:"mx-auto",onClick:()=>o(!0),icon:()=>(0,r.jsx)("span",{className:"mr-1",children:"+"}),children:"Add Fallbacks"}),(0,r.jsxs)(A,{open:i,onCancel:y,children:[(0,r.jsx)(R.$,{groups:f,onGroupsChange:h,availableModels:p,maxFallbacks:5,maxGroups:5},u),f.length>0&&(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 mt-6 border-t border-gray-100",children:[(0,r.jsx)(F.ZP,{type:"default",onClick:y,disabled:g,children:"Cancel"}),(0,r.jsx)(F.ZP,{type:"default",onClick:b,disabled:0===f.length||g,loading:g,children:g?"Saving Configuration...":"Save All Configurations"})]})]})]})}async function D(e,l){console.log=function(){};let t=window.location.origin,a=new S.ZP.OpenAI({apiKey:l,baseURL:t,dangerouslyAllowBrowser:!0});try{_.Z.info("Testing fallback model response...");let l=await a.chat.completions.create({model:e,messages:[{role:"user",content:"Hi, this is a test message"}],mock_testing_fallbacks:!0});_.Z.success((0,r.jsxs)("span",{children:["Test model=",(0,r.jsx)("strong",{children:e}),", received model=",(0,r.jsx)("strong",{children:l.model}),". See"," ",(0,r.jsx)("a",{href:"#",onClick:()=>window.open("https://docs.litellm.ai/docs/proxy/reliability","_blank"),style:{textDecoration:"underline",color:"blue"},children:"curl"})]}))}catch(e){_.Z.fromBackend("Error occurred while generating model response. Please try again. Error: ".concat(e))}}var P=e=>{let{accessToken:l,userRole:t,userID:s,modelData:n}=e,[i,f]=(0,a.useState)({}),[h,y]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[k,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l&&t&&s&&(0,p.getCallbacksCall)(l,s,t).then(e=>{console.log("callbacks",e);let l=e.router_settings;"model_group_retry_policy"in l&&delete l.model_group_retry_policy,f(l)})},[l,t,s]);let S=e=>{v(e),N(!0)},M=async()=>{if(!b||!l)return;let e=Object.keys(b)[0];if(!e)return;y(!0);let t=i.fallbacks.map(l=>{let t={...l};return e in t&&Array.isArray(t[e])&&delete t[e],t}).filter(e=>Object.keys(e).length>0),r={...i,fallbacks:t};try{await (0,p.setCallbacksCall)(l,{router_settings:r}),f(r),_.Z.success("Router settings updated successfully")}catch(e){_.Z.fromBackend("Failed to update router settings: "+e)}finally{y(!1),N(!1),v(null)}};if(!l)return null;let F=async e=>{if(!l)return;let r={...i,fallbacks:e};try{await (0,p.setCallbacksCall)(l,{router_settings:r}),f(r)}catch(e){throw _.Z.fromBackend("Failed to update router settings: "+e),l&&t&&s&&(0,p.getCallbacksCall)(l,s,t).then(e=>{let l=e.router_settings;"model_group_retry_policy"in l&&delete l.model_group_retry_policy,f(l)}),e}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B,{models:(null==n?void 0:n.data)?n.data.map(e=>e.model_name):[],accessToken:l||"",value:i.fallbacks||[],onChange:F}),(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(m.Z,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(g.Z,{children:"Model Name"}),(0,r.jsx)(g.Z,{children:"Fallbacks"}),(0,r.jsx)(g.Z,{children:"Actions"})]})}),(0,r.jsx)(d.Z,{children:i.fallbacks&&i.fallbacks.map((e,t)=>Object.entries(e).map(a=>{let[s,n]=a;return(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(u.Z,{children:s}),(0,r.jsx)(u.Z,{children:Array.isArray(n)?n.join(", "):n}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(Z.Z,{title:"Test fallback",children:(0,r.jsx)(o.Z,{icon:w.Z,size:"sm",onClick:()=>D(Object.keys(e)[0],l||""),className:"cursor-pointer hover:text-blue-600"})}),(0,r.jsx)(Z.Z,{title:"Delete fallback",children:(0,r.jsx)(o.Z,{icon:j.Z,size:"sm",onClick:()=>S(e),className:"cursor-pointer hover:text-red-600"})})]})]},t.toString()+s)}))})]}),(0,r.jsx)(C.Z,{isOpen:k,title:"Delete Fallback?",message:"Are you sure you want to delete this fallback? This action cannot be undone.",resourceInformationTitle:"Fallback Information",resourceInformation:[{label:"Model Name",value:b?Object.keys(b)[0]:"",code:!0}],onCancel:()=>{N(!1),v(null)},onOk:M,confirmLoading:h})]})},I=e=>{let{accessToken:l,userRole:t,userID:v,modelData:_}=e,[k,w]=(0,a.useState)([]);(0,a.useEffect)(()=>{l&&(0,p.getGeneralSettingsCall)(l).then(e=>{w(e)})},[l]);let Z=(e,l)=>{w(k.map(t=>t.field_name===e?{...t,field_value:l}:t))},S=(e,t)=>{if(!l)return;let r=k[t].field_value;if(null!=r&&void 0!=r)try{(0,p.updateConfigFieldSetting)(l,e,r);let t=k.map(l=>l.field_name===e?{...l,stored_in_db:!0}:l);w(t)}catch(e){}},C=(e,t)=>{if(l)try{(0,p.deleteConfigFieldSetting)(l,e);let t=k.map(l=>l.field_name===e?{...l,stored_in_db:null,field_value:null}:l);w(t)}catch(e){}};return l?(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)(h.v0,{className:"h-[75vh] w-full",children:[(0,r.jsxs)(h.td,{variant:"line",defaultValue:"1",className:"px-8 pt-4",children:[(0,r.jsx)(h.OK,{value:"1",children:"Loadbalancing"}),(0,r.jsx)(h.OK,{value:"2",children:"Fallbacks"}),(0,r.jsx)(h.OK,{value:"3",children:"General"})]}),(0,r.jsxs)(h.nP,{className:"px-8 py-6",children:[(0,r.jsx)(h.x4,{children:(0,r.jsx)(N,{accessToken:l,userRole:t,userID:v,modelData:_})}),(0,r.jsx)(h.x4,{children:(0,r.jsx)(P,{accessToken:l,userRole:t,userID:v,modelData:_})}),(0,r.jsx)(h.x4,{children:(0,r.jsx)(i.Z,{children:(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(m.Z,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(g.Z,{children:"Setting"}),(0,r.jsx)(g.Z,{children:"Value"}),(0,r.jsx)(g.Z,{children:"Status"}),(0,r.jsx)(g.Z,{children:"Action"})]})}),(0,r.jsx)(d.Z,{children:k.filter(e=>"TypedDictionary"!==e.field_type).map((e,l)=>(0,r.jsxs)(x.Z,{children:[(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(f.Z,{children:e.field_name}),(0,r.jsx)("p",{style:{fontSize:"0.65rem",color:"#808080",fontStyle:"italic"},className:"mt-1",children:e.field_description})]}),(0,r.jsx)(u.Z,{children:"Integer"==e.field_type?(0,r.jsx)(y.Z,{step:1,value:e.field_value,onChange:l=>Z(e.field_name,l)}):null}),(0,r.jsx)(u.Z,{children:!0==e.stored_in_db?(0,r.jsx)(s.Z,{icon:b.Z,className:"text-white",children:"In DB"}):!1==e.stored_in_db?(0,r.jsx)(s.Z,{className:"text-gray bg-white outline",children:"In Config"}):(0,r.jsx)(s.Z,{className:"text-gray bg-white outline",children:"Not Set"})}),(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(n.Z,{onClick:()=>S(e.field_name,l),children:"Update"}),(0,r.jsx)(o.Z,{icon:j.Z,color:"red",onClick:()=>C(e.field_name,l),children:"Reset"})]})]},l))})]})})})]})]})}):null}},10703:function(e,l,t){"use strict";t.d(l,{p:function(){return a}});var r=t(19250);let a=async e=>{try{let l=await (0,r.modelHubCall)(e);if(console.log("model_info:",l),(null==l?void 0:l.data.length)>0){let e=l.data.map(e=>({model_group:e.model_group,mode:null==e?void 0:e.mode}));return e.sort((e,l)=>e.model_group.localeCompare(l.model_group)),e}return[]}catch(e){throw console.error("Error fetching model info:",e),e}}},56334:function(e,l,t){"use strict";t.d(l,{Z:function(){return m}});var r=t(57437);t(2265);var a=t(31283);let s={ttl:3600,lowest_latency_buffer:0};var n=e=>{let{routingStrategyArgs:l}=e,t={ttl:"Sliding window to look back over when calculating the average latency of a deployment. Default - 1 hour (in seconds).",lowest_latency_buffer:"Shuffle between deployments within this % of the lowest latency. Default - 0 (i.e. always pick lowest latency)."};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"max-w-3xl",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Latency-Based Configuration"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Fine-tune latency-based routing behavior"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:Object.entries(l||s).map(e=>{let[l,s]=e;return(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:l.replace(/_/g," ")}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 mb-2",children:t[l]||""}),(0,r.jsx)(a.o,{name:l,defaultValue:"object"==typeof s?JSON.stringify(s,null,2):null==s?void 0:s.toString(),className:"font-mono text-sm w-full"})]})},l)})})]}),(0,r.jsx)("div",{className:"border-t border-gray-200"})]})},i=e=>{let{routerSettings:l,routerFieldsMetadata:t}=e;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"max-w-3xl",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Reliability & Retries"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Configure retry logic and failure handling"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2 xl:grid-cols-3",children:Object.entries(l).filter(e=>{let[l,t]=e;return"fallbacks"!=l&&"context_window_fallbacks"!=l&&"routing_strategy_args"!=l&&"routing_strategy"!=l&&"enable_tag_filtering"!=l}).map(e=>{var l,s;let[n,i]=e;return(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:(null===(l=t[n])||void 0===l?void 0:l.ui_field_name)||n}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 mb-2",children:(null===(s=t[n])||void 0===s?void 0:s.field_description)||""}),(0,r.jsx)(a.o,{name:n,defaultValue:null==i||"null"===i?"":"object"==typeof i?JSON.stringify(i,null,2):(null==i?void 0:i.toString())||"",placeholder:"â€”",className:"font-mono text-sm w-full"})]})},n)})})]})},o=t(37592),c=e=>{var l,t;let{selectedStrategy:a,availableStrategies:s,routingStrategyDescriptions:n,routerFieldsMetadata:i,onStrategyChange:c}=e;return(0,r.jsxs)("div",{className:"space-y-2 max-w-3xl",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:(null===(l=i.routing_strategy)||void 0===l?void 0:l.ui_field_name)||"Routing Strategy"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 mb-2",children:(null===(t=i.routing_strategy)||void 0===t?void 0:t.field_description)||""})]}),(0,r.jsx)("div",{className:"routing-strategy-select max-w-3xl",children:(0,r.jsx)(o.default,{value:a,onChange:c,style:{width:"100%"},size:"large",children:s.map(e=>(0,r.jsx)(o.default.Option,{value:e,label:e,children:(0,r.jsxs)("div",{className:"flex flex-col gap-0.5 py-1",children:[(0,r.jsx)("span",{className:"font-mono text-sm font-medium",children:e}),n[e]&&(0,r.jsx)("span",{className:"text-xs text-gray-500 font-normal",children:n[e]})]})},e))})})]})},d=t(59341),u=e=>{var l,t,a;let{enabled:s,routerFieldsMetadata:n,onToggle:i}=e;return(0,r.jsx)("div",{className:"space-y-3 max-w-3xl",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:(null===(l=n.enable_tag_filtering)||void 0===l?void 0:l.ui_field_name)||"Enable Tag Filtering"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[(null===(t=n.enable_tag_filtering)||void 0===t?void 0:t.field_description)||"",(null===(a=n.enable_tag_filtering)||void 0===a?void 0:a.link)&&(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)("a",{href:n.enable_tag_filtering.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Learn more"})]})]})]}),(0,r.jsx)(d.Z,{checked:s,onChange:i,className:"ml-4"})]})})},m=e=>{let{value:l,onChange:t,routerFieldsMetadata:a,availableRoutingStrategies:s,routingStrategyDescriptions:o}=e;return(0,r.jsxs)("div",{className:"w-full space-y-8 py-2",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"max-w-3xl",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Routing Settings"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Configure how requests are routed to deployments"})]}),s.length>0&&(0,r.jsx)(c,{selectedStrategy:l.selectedStrategy||l.routerSettings.routing_strategy||null,availableStrategies:s,routingStrategyDescriptions:o,routerFieldsMetadata:a,onStrategyChange:e=>{t({...l,selectedStrategy:e})}}),(0,r.jsx)(u,{enabled:l.enableTagFiltering,routerFieldsMetadata:a,onToggle:e=>{t({...l,enableTagFiltering:e})}})]}),(0,r.jsx)("div",{className:"border-t border-gray-200"}),"latency-based-routing"===l.selectedStrategy&&(0,r.jsx)(n,{routingStrategyArgs:l.routerSettings.routing_strategy_args}),(0,r.jsx)(i,{routerSettings:l.routerSettings,routerFieldsMetadata:a})]})}},97060:function(e,l,t){"use strict";t.d(l,{v:function(){return a}});var r=t(14474);function a(e){try{let l=(0,r.o)(e);if(l&&"number"==typeof l.exp)return 1e3*l.exp<=Date.now();return!1}catch(e){return!0}}}},function(e){e.O(0,[9028,8745,1713,4865,7840,337,2652,2926,3367,5869,536,9258,7271,730,8049,2971,2117,1744],function(){return e(e.s=39793)}),_N_E=e.O()}]);