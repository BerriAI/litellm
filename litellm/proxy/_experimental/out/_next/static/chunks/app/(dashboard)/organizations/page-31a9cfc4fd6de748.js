(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6459],{44243:function(e,l,t){Promise.resolve().then(t.bind(t,57616))},40728:function(e,l,t){"use strict";t.d(l,{C:function(){return r.Z},x:function(){return a.Z}});var r=t(41649),a=t(84264)},58927:function(e,l,t){"use strict";t.d(l,{J:function(){return r.Z}});var r=t(47323)},52178:function(e,l,t){"use strict";t.d(l,{QT:function(){return h},VI:function(){return x},XP:function(){return m},z7:function(){return p}});var r=t(71632),a=t(58962),s=t(90246),n=t(19250),i=t(39760);let o=(0,s.n)("models"),c=(0,s.n)("modelHub"),d=(0,s.n)("allProxyModels");(0,s.n)("selectedTeamModels");let u=(0,s.n)("infiniteModels"),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,d=arguments.length>6?arguments[6]:void 0,{accessToken:u,userId:m,userRole:x}=(0,i.Z)();return(0,r.a)({queryKey:o.list({filters:{...m&&{userId:m},...x&&{userRole:x},page:e,size:l,...t&&{search:t},...a&&{modelId:a},...s&&{teamId:s},...c&&{sortBy:c},...d&&{sortOrder:d}}}),queryFn:async()=>await (0,n.modelInfoCall)(u,m,x,e,l,t,a,s,c,d),enabled:!!(u&&m&&x)})},x=()=>{let{accessToken:e}=(0,i.Z)();return(0,r.a)({queryKey:c.list({}),queryFn:async()=>await (0,n.modelHubCall)(e),enabled:!!e})},p=()=>{let{accessToken:e,userId:l,userRole:t}=(0,i.Z)();return(0,r.a)({queryKey:d.list({}),queryFn:async()=>await (0,n.modelAvailableCall)(e,l,t,!0,null,!0,!1,"expand"),enabled:!!(e&&l&&t)})},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,l=arguments.length>1?arguments[1]:void 0,{accessToken:t,userId:r,userRole:s}=(0,i.Z)();return(0,a.N)({queryKey:u.list({filters:{...r&&{userId:r},...s&&{userRole:s},size:e,...l&&{search:l}}}),queryFn:async a=>{let{pageParam:i}=a;return await (0,n.modelInfoCall)(t,r,s,i,e,l)},initialPageParam:1,getNextPageParam:e=>{if(e.current_page<e.total_pages)return e.current_page+1},enabled:!!(t&&r&&s)})}},39823:function(e,l,t){"use strict";t.d(l,{o:function(){return c},q:function(){return o}});var r=t(39760),a=t(19250),s=t(71632),n=t(29827);let i=(0,t(90246).n)("organizations"),o=()=>{let{accessToken:e,userId:l,userRole:t}=(0,r.Z)();return(0,s.a)({queryKey:i.list({}),queryFn:async()=>await (0,a.organizationListCall)(e),enabled:!!(e&&l&&t)})},c=e=>{let l=(0,n.NL)(),{accessToken:t}=(0,r.Z)();return(0,s.a)({queryKey:i.detail(e),enabled:!!(t&&e),queryFn:async()=>{if(!t||!e)throw Error("Missing auth or teamId");return(0,a.organizationInfoCall)(t,e)},initialData:()=>{if(!e)return;let t=l.getQueryData(i.list({}));return null==t?void 0:t.find(l=>l.organization_id===e)}})}},47359:function(e,l,t){"use strict";t.d(l,{iN:function(){return h},t7:function(){return m},y2:function(){return u}});var r=t(71632),a=t(29827),s=t(45345),n=t(39760),i=t(39623),o=t(90246),c=t(19250);let d=(0,o.n)("teams"),u=()=>{let{accessToken:e,userId:l,userRole:t}=(0,n.Z)();return(0,r.a)({queryKey:d.list({}),queryFn:async()=>await (0,i.Z)(e,l,t,null),enabled:!!e})},m=e=>{let{accessToken:l}=(0,n.Z)(),t=(0,a.NL)();return(0,r.a)({queryKey:d.detail(e),enabled:!!(l&&e),queryFn:async()=>{if(!l||!e)throw Error("Missing auth or teamId");return(0,c.teamInfoCall)(l,e)},initialData:()=>{if(!e)return;let l=t.getQueryData(d.list({}));return null==l?void 0:l.find(l=>l.team_id===e)}})},x=async function(e,l,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{let a=(0,c.getProxyBaseUrl)(),s=new URLSearchParams(Object.entries({team_id:r.teamID,organization_id:r.organizationID,team_alias:r.team_alias,user_id:r.userID,page:l,page_size:t,sort_by:r.sortBy,sort_order:r.sortOrder,status:"deleted"}).filter(e=>{let[,l]=e;return null!=l}).map(e=>{let[l,t]=e;return[l,String(t)]})),n="".concat(a?"".concat(a,"/v2/team/list"):"/v2/team/list","?").concat(s),i=await fetch(n,{method:"GET",headers:{[(0,c.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!i.ok){let e=await i.json(),l=(0,c.deriveErrorMessage)(e);throw(0,c.handleError)(l),Error(l)}let o=await i.json();if(console.log("/team/list?status=deleted API Response:",o),o&&"object"==typeof o&&"teams"in o)return o.teams;return o}catch(e){throw console.error("Failed to list deleted teams:",e),e}},p=(0,o.n)("deletedTeams"),h=function(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{accessToken:a}=(0,n.Z)();return(0,r.a)({queryKey:p.list({page:e,limit:l,...t}),queryFn:async()=>await x(a,e,l,t),enabled:!!a,staleTime:3e4,placeholderData:s.Wk})}},76134:function(e,l,t){"use strict";t.d(l,{x:function(){return i}});var r=t(39760),a=t(19250),s=t(71632);let n=(0,t(90246).n)("users"),i=()=>{let{accessToken:e,userId:l,userRole:t}=(0,r.Z)();return(0,s.a)({queryKey:n.detail(l),queryFn:async()=>{let r=await (0,a.userInfoCall)(e,l,t,!1,null,null);return console.log("userInfo: ".concat(JSON.stringify(r))),r.user_info},enabled:!!(e&&l&&t)})}},39623:function(e,l,t){"use strict";t.d(l,{Z:function(){return a}});var r=t(19250);let a=async(e,l,t,a)=>"Admin"!=t&&"Admin Viewer"!=t?await (0,r.teamListCall)(e,(null==a?void 0:a.organization_id)||null,l):await (0,r.teamListCall)(e,(null==a?void 0:a.organization_id)||null)},57616:function(e,l,t){"use strict";t.r(l);var r=t(57437),a=t(35706),s=t(39760),n=t(2265),i=t(71098);l.default=()=>{let{userId:e,accessToken:l,userRole:t,premiumUser:o}=(0,s.Z)(),[c,d]=(0,n.useState)([]),[u,m]=(0,n.useState)([]);return(0,n.useEffect)(()=>{(0,a.g)(l,d).then(()=>{})},[l]),(0,n.useEffect)(()=>{(0,i.Nr)(e,t,l,m).then(()=>{})},[e,t,l]),(0,r.jsx)(a.Z,{organizations:c,userRole:t,userModels:u,accessToken:l,setOrganizations:d,premiumUser:o})}},8156:function(e,l,t){"use strict";t.d(l,{q:function(){return f}});var r=t(57437),a=t(52178),s=t(39823),n=t(47359),i=t(76134),o=t(50337),c=t(37592),d=t(99981);let u=e=>{let l=[],t=[];for(let r of e)r.endsWith("/*")?l.push(r):t.push(r);return{wildcard:l,regular:t}},m={label:"All Proxy Models",value:"all-proxy-models"},x={label:"No Default Models",value:"no-default-models"},p=[m,x],h={user:e=>{let{allProxyModels:l,userModels:t,options:r}=e;return t&&(null==r?void 0:r.includeUserModels)?t:[]},team:e=>{let{allProxyModels:l,selectedOrganization:t,userModels:r}=e;return t?t.models.includes(m.value)||0===t.models.length?l:l.filter(e=>t.models.includes(e)):null!=l?l:[]},organization:e=>{let{allProxyModels:l}=e;return l},global:e=>{let{allProxyModels:l}=e;return l}},g=(e,l,t)=>{var r;let a=Array.from(new Map(e.map(e=>[e.id,e])).values()).map(e=>e.id);if(null===(r=l.options)||void 0===r?void 0:r.showAllProxyModelsOverride)return a;let s=h[l.context];return s?s({allProxyModels:a,...t,options:l.options}):[]},f=e=>{var l;let{teamID:t,organizationID:h,options:f,context:v,dataTestId:b,value:y=[],onChange:j,style:N}=e,{includeUserModels:_,showAllTeamModelsOption:w,showAllProxyModelsOverride:Z,includeSpecialOptions:C}=f||{},{data:k,isLoading:S}=(0,a.z7)(),{data:E,isLoading:P}=(0,n.t7)(t),{data:I,isLoading:A}=(0,s.o)(h),{data:M,isLoading:O}=(0,i.x)(),F=e=>p.some(l=>l.value===e),q=y.some(F),T=(null==I?void 0:I.models.includes(m.value))||(null==I?void 0:I.models.length)===0;if(S||P||A||O)return(0,r.jsx)(o.Z.Input,{active:!0,block:!0});let{wildcard:z,regular:D}=u(g(null!==(l=null==k?void 0:k.data)&&void 0!==l?l:[],e,{selectedTeam:E,selectedOrganization:I,userModels:null==M?void 0:M.models}));return(0,r.jsx)(c.default,{"data-testid":b,value:y,onChange:e=>{let l=e.filter(F);j(l.length>0?[l[l.length-1]]:e)},style:N,options:[C?{label:(0,r.jsx)("span",{children:"Special Options"}),title:"Special Options",options:[...Z||T&&C||"global"===v?[{label:(0,r.jsx)("span",{children:"All Proxy Models"}),value:m.value,disabled:y.length>0&&y.some(e=>F(e)&&e!==m.value),key:m.value}]:[],{label:(0,r.jsx)("span",{children:"No Default Models"}),value:x.value,disabled:y.length>0&&y.some(e=>F(e)&&e!==x.value),key:x.value}]}:[],...z.length>0?[{label:(0,r.jsx)("span",{children:"Wildcard Options"}),title:"Wildcard Options",options:z.map(e=>{let l=e.replace("/*",""),t=l.charAt(0).toUpperCase()+l.slice(1);return{label:(0,r.jsx)("span",{children:"All ".concat(t," models")}),value:e,disabled:q}})}]:[],{label:(0,r.jsx)("span",{children:"Models"}),title:"Models",options:D.map(e=>({label:(0,r.jsx)("span",{children:e}),value:e,disabled:q}))}],mode:"multiple",placeholder:"Select Models",allowClear:!0,maxTagCount:"responsive",maxTagPlaceholder:e=>(0,r.jsx)(d.Z,{styles:{root:{pointerEvents:"none"}},title:e.map(e=>{let{value:l}=e;return l}).join(", "),children:(0,r.jsxs)("span",{children:["+",e.length," more"]})})})}},21609:function(e,l,t){"use strict";t.d(l,{Z:function(){return x}});var r=t(57437),a=t(57840),s=t(2651),n=t(22116),i=t(51653),o=t(5945),c=t(76188),d=t(4260),u=t(29271),m=t(2265);function x(e){let{isOpen:l,title:t,alertMessage:x,message:p,resourceInformationTitle:h,resourceInformation:g,onCancel:f,onOk:v,confirmLoading:b,requiredConfirmation:y}=e,{Title:j,Text:N}=a.default,{token:_}=s.Z.useToken(),[w,Z]=(0,m.useState)("");return(0,m.useEffect)(()=>{l&&Z("")},[l]),(0,r.jsx)(n.Z,{title:t,open:l,onOk:v,onCancel:f,confirmLoading:b,okText:b?"Deleting...":"Delete",cancelText:"Cancel",okButtonProps:{danger:!0,disabled:!!y&&w!==y||b},cancelButtonProps:{disabled:b},children:(0,r.jsxs)("div",{className:"space-y-4",children:[x&&(0,r.jsx)(i.Z,{message:x,type:"warning"}),(0,r.jsx)(o.Z,{title:h,className:"mt-4",styles:{body:{padding:"16px"},header:{backgroundColor:_.colorErrorBg,borderColor:_.colorErrorBorder}},style:{backgroundColor:_.colorErrorBg,borderColor:_.colorErrorBorder},children:(0,r.jsx)(c.Z,{column:1,size:"small",children:g&&g.map(e=>{let{label:l,value:t,...a}=e;return(0,r.jsx)(c.Z.Item,{label:(0,r.jsx)("span",{className:"font-semibold",children:l}),children:(0,r.jsx)(N,{...a,children:null!=t?t:"-"})},l)})})}),(0,r.jsx)("div",{children:(0,r.jsx)(N,{children:p})}),y&&(0,r.jsxs)("div",{className:"mb-6 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)(N,{className:"block text-base font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,r.jsx)(N,{children:"Type "}),(0,r.jsx)(N,{strong:!0,type:"danger",children:y}),(0,r.jsx)(N,{children:" to confirm deletion:"})]}),(0,r.jsx)(d.default,{value:w,onChange:e=>Z(e.target.value),placeholder:y,className:"rounded-md",prefix:(0,r.jsx)(u.Z,{style:{color:_.colorError}}),autoFocus:!0})]})]})})}},39957:function(e,l,t){"use strict";t.d(l,{Z:function(){return g}});var r=t(57437),a=t(53410),s=t(74998),n=t(91126),i=t(23628),o=t(44633),c=t(86462),d=t(3477),u=t(99981),m=t(10012),x=t(58927);function p(e){let{icon:l,onClick:t,className:a,disabled:s,dataTestId:n}=e;return s?(0,r.jsx)(x.J,{icon:l,size:"sm",className:"opacity-50 cursor-not-allowed","data-testid":n}):(0,r.jsx)(x.J,{icon:l,size:"sm",onClick:t,className:(0,m.cx)("cursor-pointer",a),"data-testid":n})}t(2265);let h={Edit:{icon:a.Z,className:"hover:text-blue-600"},Delete:{icon:s.Z,className:"hover:text-red-600"},Test:{icon:n.Z,className:"hover:text-blue-600"},Regenerate:{icon:i.Z,className:"hover:text-green-600"},Up:{icon:o.Z,className:"hover:text-blue-600"},Down:{icon:c.Z,className:"hover:text-blue-600"},Open:{icon:d.Z,className:"hover:text-green-600"}};function g(e){let{onClick:l,tooltipText:t,disabled:a=!1,disabledTooltipText:s,dataTestId:n,variant:i}=e,{icon:o,className:c}=h[i];return(0,r.jsx)(u.Z,{title:a?s:t,children:(0,r.jsx)("span",{children:(0,r.jsx)(p,{icon:o,onClick:l,className:c,disabled:a,dataTestId:n})})})}},33860:function(e,l,t){"use strict";var r=t(57437),a=t(2265),s=t(10032),n=t(22116),i=t(37592),o=t(99981),c=t(5545),d=t(7310),u=t.n(d),m=t(19250);l.Z=e=>{let{isVisible:l,onCancel:t,onSubmit:d,accessToken:x,title:p="Add Team Member",roles:h=[{label:"admin",value:"admin",description:"Admin role. Can create team keys, add members, and manage settings."},{label:"user",value:"user",description:"User role. Can view team info, but not manage it."}],defaultRole:g="user"}=e,[f]=s.Z.useForm(),[v,b]=(0,a.useState)([]),[y,j]=(0,a.useState)(!1),[N,_]=(0,a.useState)("user_email"),w=async(e,l)=>{if(!e){b([]);return}j(!0);try{let t=new URLSearchParams;if(t.append(l,e),null==x)return;let r=(await (0,m.userFilterUICall)(x,t)).map(e=>({label:"user_email"===l?"".concat(e.user_email):"".concat(e.user_id),value:"user_email"===l?e.user_email:e.user_id,user:e}));b(r)}catch(e){console.error("Error fetching users:",e)}finally{j(!1)}},Z=(0,a.useCallback)(u()((e,l)=>w(e,l),300),[]),C=(e,l)=>{_(l),Z(e,l)},k=(e,l)=>{let t=l.user;f.setFieldsValue({user_email:t.user_email,user_id:t.user_id,role:f.getFieldValue("role")})};return(0,r.jsx)(n.Z,{title:p,open:l,onCancel:()=>{f.resetFields(),b([]),t()},footer:null,width:800,children:(0,r.jsxs)(s.Z,{form:f,onFinish:d,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:{role:g},children:[(0,r.jsx)(s.Z.Item,{label:"Email",name:"user_email",className:"mb-4",children:(0,r.jsx)(i.default,{showSearch:!0,className:"w-full",placeholder:"Search by email",filterOption:!1,onSearch:e=>C(e,"user_email"),onSelect:(e,l)=>k(e,l),options:"user_email"===N?v:[],loading:y,allowClear:!0})}),(0,r.jsx)("div",{className:"text-center mb-4",children:"OR"}),(0,r.jsx)(s.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,r.jsx)(i.default,{showSearch:!0,className:"w-full",placeholder:"Search by user ID",filterOption:!1,onSearch:e=>C(e,"user_id"),onSelect:(e,l)=>k(e,l),options:"user_id"===N?v:[],loading:y,allowClear:!0})}),(0,r.jsx)(s.Z.Item,{label:"Member Role",name:"role",className:"mb-4",children:(0,r.jsx)(i.default,{defaultValue:g,children:h.map(e=>(0,r.jsx)(i.default.Option,{value:e.value,children:(0,r.jsxs)(o.Z,{title:e.description,children:[(0,r.jsx)("span",{className:"font-medium",children:e.label}),(0,r.jsxs)("span",{className:"ml-2 text-gray-500 text-sm",children:["- ",e.description]})]})},e.value))})}),(0,r.jsx)("div",{className:"text-right mt-4",children:(0,r.jsx)(c.ZP,{type:"default",htmlType:"submit",children:"Add Member"})})]})})}},60131:function(e,l,t){"use strict";t.d(l,{Z:function(){return f}});var r=t(57437),a=t(2265),s=t(92280),n=t(40728),i=t(79814),o=t(19250),c=function(e){let{vectorStores:l,accessToken:t}=e,[s,c]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{if(t&&0!==l.length)try{let e=await (0,o.vectorStoreListCall)(t);e.data&&c(e.data.map(e=>({vector_store_id:e.vector_store_id,vector_store_name:e.vector_store_name})))}catch(e){console.error("Error fetching vector stores:",e)}})()},[t,l.length]);let d=e=>{let l=s.find(l=>l.vector_store_id===e);return l?"".concat(l.vector_store_name||l.vector_store_id," (").concat(l.vector_store_id,")"):e};return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(n.x,{className:"font-semibold text-gray-900",children:"Vector Stores"}),(0,r.jsx)(n.C,{color:"blue",size:"xs",children:l.length})]}),l.length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:l.map((e,l)=>(0,r.jsx)("div",{className:"inline-flex items-center px-3 py-1.5 rounded-lg bg-blue-50 border border-blue-200 text-blue-800 text-sm font-medium",children:d(e)},l))}):(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)(n.x,{className:"text-gray-500 text-sm",children:"No vector stores configured"})]})]})},d=t(25327),u=t(86462),m=t(47686),x=t(99981),p=function(e){let{mcpServers:l,mcpAccessGroups:s=[],mcpToolPermissions:i={},accessToken:c}=e,[p,h]=(0,a.useState)([]),[g,f]=(0,a.useState)([]),[v,b]=(0,a.useState)(new Set),y=e=>{b(l=>{let t=new Set(l);return t.has(e)?t.delete(e):t.add(e),t})};(0,a.useEffect)(()=>{(async()=>{if(c&&l.length>0)try{let e=await (0,o.fetchMCPServers)(c);e&&Array.isArray(e)?h(e):e.data&&Array.isArray(e.data)&&h(e.data)}catch(e){console.error("Error fetching MCP servers:",e)}})()},[c,l.length]),(0,a.useEffect)(()=>{(async()=>{if(c&&s.length>0)try{let e=await Promise.resolve().then(t.bind(t,19250)).then(e=>e.fetchMCPAccessGroups(c));f(Array.isArray(e)?e:e.data||[])}catch(e){console.error("Error fetching MCP access groups:",e)}})()},[c,s.length]);let j=e=>{let l=p.find(l=>l.server_id===e);if(l){let t=e.length>7?"".concat(e.slice(0,3),"...").concat(e.slice(-4)):e;return"".concat(l.alias," (").concat(t,")")}return e},N=e=>e,_=[...l.map(e=>({type:"server",value:e})),...s.map(e=>({type:"accessGroup",value:e}))],w=_.length;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 text-blue-600"}),(0,r.jsx)(n.x,{className:"font-semibold text-gray-900",children:"MCP Servers"}),(0,r.jsx)(n.C,{color:"blue",size:"xs",children:w})]}),w>0?(0,r.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2 pr-1",children:_.map((e,l)=>{let t="server"===e.type?i[e.value]:void 0,a=t&&t.length>0,s=v.has(e.value);return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{onClick:()=>a&&y(e.value),className:"flex items-center gap-3 py-2 px-3 rounded-lg border border-gray-200 transition-all ".concat(a?"cursor-pointer hover:bg-gray-50 hover:border-gray-300":"bg-white"),children:[(0,r.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:"server"===e.type?(0,r.jsx)(x.Z,{title:"Full ID: ".concat(e.value),placement:"top",children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,r.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-blue-500 rounded-full flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:j(e.value)})]})}):(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,r.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-green-500 rounded-full flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:N(e.value)}),(0,r.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-[9px] font-semibold text-green-600 bg-green-50 border border-green-200 rounded uppercase tracking-wide flex-shrink-0",children:"Group"})]})}),a&&(0,r.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0 whitespace-nowrap",children:[(0,r.jsx)("span",{className:"text-xs font-medium text-gray-600",children:t.length}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:1===t.length?"tool":"tools"}),s?(0,r.jsx)(u.Z,{className:"h-3.5 w-3.5 text-gray-400 ml-0.5"}):(0,r.jsx)(m.Z,{className:"h-3.5 w-3.5 text-gray-400 ml-0.5"})]})]}),a&&s&&(0,r.jsx)("div",{className:"ml-4 pl-4 border-l-2 border-blue-200 pb-1",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-1.5",children:t.map((e,l)=>(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg bg-blue-50 border border-blue-200 text-blue-800 text-xs font-medium",children:e},l))})})]},l)})}):(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)(n.x,{className:"text-gray-500 text-sm",children:"No MCP servers or access groups configured"})]})]})},h=t(3497),g=function(e){let{agents:l,agentAccessGroups:t=[],accessToken:s}=e,[i,c]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{if(s&&l.length>0)try{let e=await (0,o.getAgentsList)(s);e&&e.agents&&Array.isArray(e.agents)&&c(e.agents)}catch(e){console.error("Error fetching agents:",e)}})()},[s,l.length]);let d=e=>{let l=i.find(l=>l.agent_id===e);if(l){let t=e.length>7?"".concat(e.slice(0,3),"...").concat(e.slice(-4)):e;return"".concat(l.agent_name," (").concat(t,")")}return e},u=[...l.map(e=>({type:"agent",value:e})),...t.map(e=>({type:"accessGroup",value:e}))],m=u.length;return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 text-purple-600"}),(0,r.jsx)(n.x,{className:"font-semibold text-gray-900",children:"Agents"}),(0,r.jsx)(n.C,{color:"purple",size:"xs",children:m})]}),m>0?(0,r.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2 pr-1",children:u.map((e,l)=>(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)("div",{className:"flex items-center gap-3 py-2 px-3 rounded-lg border border-gray-200 bg-white",children:(0,r.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:"agent"===e.type?(0,r.jsx)(x.Z,{title:"Full ID: ".concat(e.value),placement:"top",children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,r.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-purple-500 rounded-full flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:d(e.value)})]})}):(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 min-w-0",children:[(0,r.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-green-500 rounded-full flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.value}),(0,r.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-[9px] font-semibold text-green-600 bg-green-50 border border-green-200 rounded uppercase tracking-wide flex-shrink-0",children:"Group"})]})})})},l))}):(0,r.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-50 border border-gray-200",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)(n.x,{className:"text-gray-500 text-sm",children:"No agents or access groups configured"})]})]})},f=function(e){let{objectPermission:l,variant:t="card",className:a="",accessToken:n}=e,i=(null==l?void 0:l.vector_stores)||[],o=(null==l?void 0:l.mcp_servers)||[],d=(null==l?void 0:l.mcp_access_groups)||[],u=(null==l?void 0:l.mcp_tool_permissions)||{},m=(null==l?void 0:l.agents)||[],x=(null==l?void 0:l.agent_access_groups)||[],h=(0,r.jsxs)("div",{className:"card"===t?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:[(0,r.jsx)(c,{vectorStores:i,accessToken:n}),(0,r.jsx)(p,{mcpServers:o,mcpAccessGroups:d,mcpToolPermissions:u,accessToken:n}),(0,r.jsx)(g,{agents:m,agentAccessGroups:x,accessToken:n})]});return"card"===t?(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 ".concat(a),children:[(0,r.jsx)("div",{className:"flex items-center gap-2 mb-6",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(s.x,{className:"font-semibold text-gray-900",children:"Object Permissions"}),(0,r.jsx)(s.x,{className:"text-xs text-gray-500",children:"Access control for Vector Stores and MCP Servers"})]})}),h]}):(0,r.jsxs)("div",{className:"".concat(a),children:[(0,r.jsx)(s.x,{className:"font-medium text-gray-900 mb-3",children:"Object Permissions"}),h]})}},36894:function(e,l,t){"use strict";var r=t(57437),a=t(56522),s=t(10032),n=t(37592),i=t(22116),o=t(5545),c=t(2265),d=t(24199);l.Z=e=>{var l,t,u;let{visible:m,onCancel:x,onSubmit:p,initialData:h,mode:g,config:f}=e,[v]=s.Z.useForm(),[b,y]=(0,c.useState)(!1);console.log("Initial Data:",h),(0,c.useEffect)(()=>{if(m){if("edit"===g&&h){let e={...h,role:h.role||f.defaultRole,max_budget_in_team:h.max_budget_in_team||null,tpm_limit:h.tpm_limit||null,rpm_limit:h.rpm_limit||null};console.log("Setting form values:",e),v.setFieldsValue(e)}else{var e;v.resetFields(),v.setFieldsValue({role:f.defaultRole||(null===(e=f.roleOptions[0])||void 0===e?void 0:e.value)})}}},[m,h,g,v,f.defaultRole,f.roleOptions]);let j=async e=>{try{y(!0);let l=Object.entries(e).reduce((e,l)=>{let[t,r]=l;if("string"==typeof r){let l=r.trim();return""===l&&("max_budget_in_team"===t||"tpm_limit"===t||"rpm_limit"===t)?{...e,[t]:null}:{...e,[t]:l}}return{...e,[t]:r}},{});console.log("Submitting form data:",l),await Promise.resolve(p(l)),v.resetFields()}catch(e){console.error("Form submission error:",e)}finally{y(!1)}},N=e=>{switch(e.type){case"input":return(0,r.jsx)(a.o,{placeholder:e.placeholder});case"numerical":return(0,r.jsx)(d.Z,{step:e.step||1,min:e.min||0,style:{width:"100%"},placeholder:e.placeholder||"Enter a numerical value"});case"select":var l;return(0,r.jsx)(n.default,{children:null===(l=e.options)||void 0===l?void 0:l.map(e=>(0,r.jsx)(n.default.Option,{value:e.value,children:e.label},e.value))});default:return null}};return(0,r.jsx)(i.Z,{title:f.title||("add"===g?"Add Member":"Edit Member"),open:m,width:1e3,footer:null,onCancel:x,children:(0,r.jsxs)(s.Z,{form:v,onFinish:j,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[f.showEmail&&(0,r.jsx)(s.Z.Item,{label:"Email",name:"user_email",className:"mb-4",rules:[{type:"email",message:"Please enter a valid email!"}],children:(0,r.jsx)(a.o,{placeholder:"user@example.com"})}),f.showEmail&&f.showUserId&&(0,r.jsx)("div",{className:"text-center mb-4",children:(0,r.jsx)(a.x,{children:"OR"})}),f.showUserId&&(0,r.jsx)(s.Z.Item,{label:"User ID",name:"user_id",className:"mb-4",children:(0,r.jsx)(a.o,{placeholder:"user_123"})}),(0,r.jsx)(s.Z.Item,{label:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"Role"}),"edit"===g&&h&&(0,r.jsxs)("span",{className:"text-gray-500 text-sm",children:["(Current: ",(t=h.role,(null===(u=f.roleOptions.find(e=>e.value===t))||void 0===u?void 0:u.label)||t),")"]})]}),name:"role",className:"mb-4",rules:[{required:!0,message:"Please select a role!"}],children:(0,r.jsx)(n.default,{children:"edit"===g&&h?[...f.roleOptions.filter(e=>e.value===h.role),...f.roleOptions.filter(e=>e.value!==h.role)].map(e=>(0,r.jsx)(n.default.Option,{value:e.value,children:e.label},e.value)):f.roleOptions.map(e=>(0,r.jsx)(n.default.Option,{value:e.value,children:e.label},e.value))})}),null===(l=f.additionalFields)||void 0===l?void 0:l.map(e=>(0,r.jsx)(s.Z.Item,{label:e.label,name:e.name,className:"mb-4",rules:e.rules,children:N(e)},e.name)),(0,r.jsxs)("div",{className:"text-right mt-6",children:[(0,r.jsx)(o.ZP,{onClick:x,className:"mr-2",disabled:b,children:"Cancel"}),(0,r.jsx)(o.ZP,{type:"default",htmlType:"submit",loading:b,children:"add"===g?b?"Adding...":"Add Member":b?"Saving...":"Save Changes"})]})]})})}},10012:function(e,l,t){"use strict";t.d(l,{cx:function(){return n}});var r=t(49096),a=t(53335);let{cva:s,cx:n,compose:i}=(0,r.ZD)({hooks:{onComplete:e=>(0,a.m6)(e)}})}},function(e){e.O(0,[1047,7271,5173,3092,1632,4865,7840,337,2652,3367,5869,2926,353,1994,3709,7474,536,9258,6941,9190,6609,5319,2618,9442,1213,4776,3407,8049,5144,8640,1098,5706,2971,2117,1744],function(){return e(e.s=44243)}),_N_E=e.O()}]);