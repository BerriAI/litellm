(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7049],{50347:function(e,a,t){Promise.resolve().then(t.bind(t,98441))},98441:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var n=t(57437),l=t(2265),r=t(19250),s=e=>{let{selectedTeam:a,currentOrg:t,selectedKeyAlias:n,accessToken:s,createClicked:o,expand:c=[]}=e,[i,u]=(0,l.useState)({keys:[],total_count:0,current_page:1,total_pages:0}),[f,m]=(0,l.useState)(!0),[h,d]=(0,l.useState)(null),g=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{if(console.log("calling fetchKeys"),!s){console.log("accessToken",s);return}m(!0);let a="number"==typeof e.page?e.page:1,t="number"==typeof e.pageSize?e.pageSize:100,n=await (0,r.keyListCall)(s,null,null,null,null,null,a,t,null,null,c.join(","));console.log("data",n),u(n),d(null)}catch(e){d(e instanceof Error?e:Error("An error occurred"))}finally{m(!1)}};return(0,l.useEffect)(()=>{g(),console.log("selectedTeam",a,"currentOrg",t,"accessToken",s,"selectedKeyAlias",n)},[a,t,s,n,o]),{keys:i.keys,isLoading:f,error:h,pagination:{currentPage:i.current_page,totalPages:i.total_pages,totalCount:i.total_count},refresh:g,setKeys:e=>{u(a=>{let t="function"==typeof e?e(a.keys):e;return{...a,keys:t}})}}},o=t(21623),c=t(29827),i=t(39760),u=t(85975),f=t(49282),m=()=>{let{accessToken:e,userRole:a,userId:t,premiumUser:r,userEmail:m}=(0,i.Z)(),{teams:h,setTeams:d}=(0,f.Z)(),[g,y]=(0,l.useState)(!1),[p,S]=(0,l.useState)([]),b=new o.S,{keys:w,isLoading:E,error:k,pagination:x,refresh:C,setKeys:v}=s({selectedKeyAlias:null,currentOrg:null,accessToken:e||"",createClicked:g});return(0,n.jsx)(c.aH,{client:b,children:(0,n.jsx)(u.Z,{userID:t,userRole:a,userEmail:m,teams:h,keys:w,setUserRole:()=>{},setUserEmail:()=>{},setTeams:d,setKeys:v,premiumUser:r,organizations:p,addKey:e=>{v(a=>a?[...a,e]:[e]),y(()=>!g)},createClicked:g})})}},12363:function(e,a,t){"use strict";t.d(a,{d:function(){return r},n:function(){return l}});var n=t(2265);let l=()=>{let[e,a]=(0,n.useState)("http://localhost:4000");return(0,n.useEffect)(()=>{{let{protocol:e,host:t}=window.location;a("".concat(e,"//").concat(t))}},[]),e},r=25},30841:function(e,a,t){"use strict";t.d(a,{IE:function(){return r},LO:function(){return l},cT:function(){return s}});var n=t(19250);let l=async e=>{if(!e)return[];try{let{aliases:a}=await (0,n.keyAliasesCall)(e);return Array.from(new Set((a||[]).filter(Boolean)))}catch(e){return console.error("Error fetching all key aliases:",e),[]}},r=async(e,a)=>{if(!e)return[];try{let t=[],l=1,r=!0;for(;r;){let s=await (0,n.teamListCall)(e,a||null,null);t=[...t,...s],l<s.total_pages?l++:r=!1}return t}catch(e){return console.error("Error fetching all teams:",e),[]}},s=async e=>{if(!e)return[];try{let a=[],t=1,l=!0;for(;l;){let r=await (0,n.organizationListCall)(e);a=[...a,...r],t<r.total_pages?t++:l=!1}return a}catch(e){return console.error("Error fetching all organizations:",e),[]}}},23048:function(e,a,t){"use strict";var n=t(57437),l=t(2265),r=t(5545),s=t(37592),o=t(4260),c=t(2356),i=t(7310),u=t.n(i);a.Z=e=>{let{options:a,onApplyFilters:t,onResetFilters:i,initialValues:f={},buttonLabel:m="Filters"}=e,[h,d]=(0,l.useState)(!1),[g,y]=(0,l.useState)(f),[p,S]=(0,l.useState)({}),[b,w]=(0,l.useState)({}),[E,k]=(0,l.useState)({}),[x,C]=(0,l.useState)({}),v=(0,l.useCallback)(u()(async(e,a)=>{if(a.isSearchable&&a.searchFn){w(e=>({...e,[a.name]:!0}));try{let t=await a.searchFn(e);S(e=>({...e,[a.name]:t}))}catch(e){console.error("Error searching:",e),S(e=>({...e,[a.name]:[]}))}finally{w(e=>({...e,[a.name]:!1}))}}},300),[]),j=(0,l.useCallback)(async e=>{if(e.isSearchable&&e.searchFn&&!x[e.name]){w(a=>({...a,[e.name]:!0})),C(a=>({...a,[e.name]:!0}));try{let a=await e.searchFn("");S(t=>({...t,[e.name]:a}))}catch(a){console.error("Error loading initial options:",a),S(a=>({...a,[e.name]:[]}))}finally{w(a=>({...a,[e.name]:!1}))}}},[x]);(0,l.useEffect)(()=>{h&&a.forEach(e=>{e.isSearchable&&!x[e.name]&&j(e)})},[h,a,j,x]);let N=(e,a)=>{let n={...g,[e]:a};y(n),t(n)},_=(e,a)=>{e&&a.isSearchable&&!x[a.name]&&j(a)};return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,n.jsx)(r.ZP,{icon:(0,n.jsx)(c.Z,{className:"h-4 w-4"}),onClick:()=>d(!h),className:"flex items-center gap-2",children:m}),(0,n.jsx)(r.ZP,{onClick:()=>{let e={};a.forEach(a=>{e[a.name]=""}),y(e),i()},children:"Reset Filters"})]}),h&&(0,n.jsx)("div",{className:"grid grid-cols-3 gap-x-6 gap-y-4 mb-6",children:["Team ID","Status","Organization ID","Key Alias","User ID","End User","Error Code","Error Message","Key Hash","Model"].map(e=>{let t=a.find(a=>a.label===e||a.name===e);return t?(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{className:"text-sm text-gray-600",children:t.label||t.name}),t.isSearchable?(0,n.jsx)(s.default,{showSearch:!0,className:"w-full",placeholder:"Search ".concat(t.label||t.name,"..."),value:g[t.name]||void 0,onChange:e=>N(t.name,e),onDropdownVisibleChange:e=>_(e,t),onSearch:e=>{k(a=>({...a,[t.name]:e})),t.searchFn&&v(e,t)},filterOption:!1,loading:b[t.name],options:p[t.name]||[],allowClear:!0,notFoundContent:b[t.name]?"Loading...":"No results found"}):t.options?(0,n.jsx)(s.default,{className:"w-full",placeholder:"Select ".concat(t.label||t.name,"..."),value:g[t.name]||void 0,onChange:e=>N(t.name,e),allowClear:!0,children:t.options.map(e=>(0,n.jsx)(s.default.Option,{value:e.value,children:e.label},e.value))}):(0,n.jsx)(o.default,{className:"w-full",placeholder:"Enter ".concat(t.label||t.name,"..."),value:g[t.name]||"",onChange:e=>N(t.name,e.target.value),allowClear:!0})]},t.name):null})})]})}}},function(e){e.O(0,[1047,3665,9028,8745,1713,4865,7840,337,2652,2926,3367,5869,353,3709,7971,536,6894,7474,9258,3178,5319,9190,6609,2353,7967,3871,8049,5144,7914,1098,665,5975,2971,2117,1744],function(){return e(e.s=50347)}),_N_E=e.O()}]);