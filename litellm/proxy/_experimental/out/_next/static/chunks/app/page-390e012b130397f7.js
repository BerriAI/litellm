(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8598:function(e,t,r){Promise.resolve().then(r.t.bind(r,5250,23)),Promise.resolve().then(r.bind(r,7476))},7476:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var l=r(3827),n=r(4090),s=r(588);let a=async(e,t,r,l)=>{try{if(console.log("Form Values in keyCreateCall:",l),l.metadata)try{l.metadata=JSON.parse(l.metadata)}catch(e){s.ZP.error("Failed to parse metadata: "+e)}let n=await fetch("".concat(e,"/key/generate"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({user_id:r,...l})});if(!n.ok){let e=await n.text();throw s.ZP.error("Failed to create key: "+e),console.error("Error response from the server:",e),Error("Network response was not ok")}let a=await n.json();return console.log("API Response:",a),a}catch(e){throw console.error("Failed to create key:",e),e}},o=async(e,t,r)=>{try{let l=await fetch("".concat(e,"/key/delete"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({keys:[r]})});if(!l.ok)throw Error("Network response was not ok");let n=await l.json();return console.log(n),n}catch(e){throw console.error("Failed to create key:",e),e}},i=async(e,t,r)=>{try{let l=await fetch("".concat(e,"/user/info?user_id=").concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!l.ok)throw Error("Network response was not ok");let n=await l.json();return console.log(n),n}catch(e){throw console.error("Failed to create key:",e),e}};var c=r(384),d=r(6453),h=r(2179),x=r(1801),u=r(6776),m=r(2902),j=r(7171),y=r(9714),p=r(8707),Z=r(1861);let{Option:k}=u.default;var g=e=>{let{userID:t,accessToken:r,proxyBaseUrl:o,data:i,setData:u}=e,[k]=m.Z.useForm(),[g,f]=(0,n.useState)(!1),[w,b]=(0,n.useState)(null),C=()=>{f(!1),k.resetFields()},S=()=>{f(!1),b(null),k.resetFields()},v=async e=>{try{s.ZP.info("Making API Call"),e.models&&""!==e.models.trim()?e.models=e.models.split(",").map(e=>e.trim()):e.models=[],f(!0);let l=await a(o,r,t,e);u(e=>e?[...e,l]:[l]),b(l.key),s.ZP.success("API Key Created"),k.resetFields()}catch(e){console.error("Error creating the key:",e)}};return(0,l.jsxs)("div",{children:[(0,l.jsx)(h.Z,{className:"mx-auto",onClick:()=>f(!0),children:"+ Create New Key"}),(0,l.jsx)(j.Z,{title:"Create Key",visible:g,width:800,footer:null,onOk:C,onCancel:S,children:(0,l.jsxs)(m.Z,{form:k,onFinish:v,labelCol:{span:6},wrapperCol:{span:16},labelAlign:"left",children:[(0,l.jsx)(m.Z.Item,{label:"Key Name",name:"key_alias",children:(0,l.jsx)(y.Z,{})}),(0,l.jsx)(m.Z.Item,{label:"Models (Comma Separated). Eg: gpt-3.5-turbo,gpt-4",name:"models",children:(0,l.jsx)(y.Z,{placeholder:"gpt-4,gpt-3.5-turbo"})}),(0,l.jsx)(m.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,l.jsx)(p.Z,{step:.01,precision:2,width:200})}),(0,l.jsx)(m.Z.Item,{label:"Duration (eg: 30s, 30h, 30d)",name:"duration",children:(0,l.jsx)(y.Z,{})}),(0,l.jsx)(m.Z.Item,{label:"Team ID",name:"team_id",children:(0,l.jsx)(y.Z,{placeholder:"ai_team"})}),(0,l.jsx)(m.Z.Item,{label:"Metadata",name:"metadata",children:(0,l.jsx)(y.Z.TextArea,{rows:4,placeholder:"Enter metadata as JSON"})}),(0,l.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,l.jsx)(Z.ZP,{htmlType:"submit",children:"Create Key"})})]})}),w&&(0,l.jsx)(j.Z,{title:"Save your key",visible:g,onOk:C,onCancel:S,footer:null,children:(0,l.jsxs)(d.Z,{numItems:1,className:"gap-2 w-full",children:[(0,l.jsx)(c.Z,{numColSpan:1,children:(0,l.jsxs)("p",{children:["Please save this secret key somewhere safe and accessible. For security reasons, ",(0,l.jsx)("b",{children:"you will not be able to view it again"})," ","through your LiteLLM account. If you lose this secret key, you will need to generate a new one."]})}),(0,l.jsx)(c.Z,{numColSpan:1,children:null!=w?(0,l.jsxs)(x.Z,{children:["API Key: ",w]}):(0,l.jsx)(x.Z,{children:"Key being created, this might take 30s"})})]})})]})},f=r(3393),w=r(3810),b=r(1244),C=r(827),S=r(3851),v=r(2044),I=r(4167),N=r(4480),E=r(2287),D=r(2440),P=e=>{let{userID:t,accessToken:r,proxyBaseUrl:n,data:s,setData:a}=e,i=async e=>{if(null!=s)try{await o(n,r,e);let t=s.filter(t=>t.token!==e);a(t)}catch(e){console.error("Error deleting the key:",e)}};if(null!=s)return console.log("RERENDER TRIGGERED"),(0,l.jsxs)(w.Z,{className:"w-full mx-auto flex-auto overflow-y-auto max-h-[50vh] mb-4",children:[(0,l.jsx)(D.Z,{children:"API Keys"}),(0,l.jsxs)(C.Z,{className:"mt-5",children:[(0,l.jsx)(I.Z,{children:(0,l.jsxs)(E.Z,{children:[(0,l.jsx)(N.Z,{children:"Secret Key"}),(0,l.jsx)(N.Z,{children:"Spend (USD)"}),(0,l.jsx)(N.Z,{children:"Key Budget (USD)"}),(0,l.jsx)(N.Z,{children:"Team ID"}),(0,l.jsx)(N.Z,{children:"Metadata"}),(0,l.jsx)(N.Z,{children:"Expires"})]})}),(0,l.jsx)(S.Z,{children:s.map(e=>(console.log(e),(0,l.jsxs)(E.Z,{children:[(0,l.jsx)(v.Z,{children:null!=e.key_alias?(0,l.jsx)(x.Z,{children:e.key_alias}):(0,l.jsx)(x.Z,{children:e.token})}),(0,l.jsx)(v.Z,{children:(0,l.jsx)(x.Z,{children:e.spend})}),(0,l.jsx)(v.Z,{children:null!=e.max_budget?(0,l.jsx)(x.Z,{children:e.max_budget}):(0,l.jsx)(x.Z,{children:"Unlimited Budget"})}),(0,l.jsx)(v.Z,{children:(0,l.jsx)(x.Z,{children:e.team_id})}),(0,l.jsx)(v.Z,{children:(0,l.jsx)(x.Z,{children:JSON.stringify(e.metadata)})}),(0,l.jsx)(v.Z,{children:null!=e.expires?(0,l.jsx)(x.Z,{children:e.expires}):(0,l.jsx)(x.Z,{children:"Never expires"})}),(0,l.jsx)(v.Z,{children:(0,l.jsx)(b.Z,{onClick:()=>i(e.token),icon:f.Z,size:"xs"})})]},e.token)))})]})]})},_=r(891),T=()=>{let[e,t]=(0,n.useState)(""),[r,s]=(0,n.useState)(!1),a="".concat(window.location.href,"?proxyBaseUrl=").concat(e);return(0,l.jsx)("div",{children:(0,l.jsxs)(w.Z,{decoration:"top",decorationColor:"blue",style:{width:"1000px"},children:[(0,l.jsx)(x.Z,{children:"Admin Configuration"}),(0,l.jsx)("label",{htmlFor:"proxyUrl",children:"Enter Proxy URL:"}),(0,l.jsx)(_.Z,{type:"text",id:"proxyUrl",value:e,onChange:e=>{t(e.target.value),s(!1)},placeholder:"https://your-proxy-endpoint.com"}),(0,l.jsx)(h.Z,{onClick:()=>{s(!0)},className:"gap-2",children:"Save"}),r&&(0,l.jsx)("div",{children:(0,l.jsxs)(d.Z,{numItems:1,className:"gap-2",children:[(0,l.jsx)(c.Z,{children:(0,l.jsxs)("p",{children:["Proxy Admin UI (Save this URL): ",a]})}),(0,l.jsx)(c.Z,{children:(0,l.jsxs)("p",{children:["Get Started with Proxy Admin UI  \uD83D\uDC49",(0,l.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:a})]})})]})})]})})},A=r(7907),U=r(7963),F=()=>{let[e,t]=(0,n.useState)(null),r=(0,A.useSearchParams)(),s=r.get("userID"),a=r.get("proxyBaseUrl"),o=r.get("token"),[h,x]=(0,n.useState)(null);if((0,n.useEffect)(()=>{if(o){let e=(0,U.o)(o);e&&(console.log("Decoded token:",e),console.log("Decoded key:",e.key),x(e.key))}s&&h&&a&&!e&&(async()=>{try{let e=await i(a,h,s);t(e.keys)}catch(e){console.error("There was an error fetching the data",e)}})()},[s,o,h,a,e]),null==a)return(0,l.jsx)("div",{children:(0,l.jsx)(T,{})});if(null==s||null==o){let e=a.endsWith("/")?a:a+"/";return window.location.href="".concat(e,"sso/key/generate"),null}return null==h?null:(0,l.jsx)(d.Z,{numItems:1,className:"gap-0 p-10 h-[75vh] w-full",children:(0,l.jsxs)(c.Z,{numColSpan:1,children:[(0,l.jsx)(P,{userID:s,accessToken:h,proxyBaseUrl:a,data:e,setData:t}),(0,l.jsx)(g,{userID:s,accessToken:h,proxyBaseUrl:a,data:e,setData:t})]})})}}},function(e){e.O(0,[291,971,69,744],function(){return e(e.s=8598)}),_N_E=e.O()}]);