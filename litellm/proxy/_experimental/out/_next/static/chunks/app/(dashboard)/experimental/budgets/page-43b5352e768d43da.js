(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5649],{21044:function(e,n,l){Promise.resolve().then(l.bind(l,78858))},78858:function(e,n,l){"use strict";l.r(n);var t=l(57437),s=l(49104),i=l(39760);n.default=()=>{let{accessToken:e}=(0,i.Z)();return(0,t.jsx)(s.Z,{accessToken:e})}},39760:function(e,n,l){"use strict";var t=l(2265),s=l(99376),i=l(14474),r=l(3914);n.Z=()=>{var e,n,l,a,d,u,o;let c=(0,s.useRouter)(),m="undefined"!=typeof document?(0,r.e)("token"):null;(0,t.useEffect)(()=>{m||c.replace("/sso/key/generate")},[m,c]);let h=(0,t.useMemo)(()=>{if(!m)return null;try{return(0,i.o)(m)}catch(e){return(0,r.b)(),c.replace("/sso/key/generate"),null}},[m,c]);return{token:m,accessToken:null!==(e=null==h?void 0:h.key)&&void 0!==e?e:null,userId:null!==(n=null==h?void 0:h.user_id)&&void 0!==n?n:null,userEmail:null!==(l=null==h?void 0:h.user_email)&&void 0!==l?l:null,userRole:function(e){if(!e)return"Undefined Role";switch(e.toLowerCase()){case"app_owner":case"demo_app_owner":return"App Owner";case"app_admin":case"proxy_admin":return"Admin";case"proxy_admin_viewer":return"Admin Viewer";case"org_admin":return"Org Admin";case"internal_user":return"Internal User";case"internal_user_viewer":case"internal_viewer":return"Internal Viewer";case"app_user":return"App User";default:return"Unknown Role"}}(null!==(a=null==h?void 0:h.user_role)&&void 0!==a?a:null),premiumUser:null!==(d=null==h?void 0:h.premium_user)&&void 0!==d?d:null,disabledPersonalKeyCreation:null!==(u=null==h?void 0:h.disabled_non_admin_personal_key_creation)&&void 0!==u?u:null,showSSOBanner:(null==h?void 0:h.login_method)==="username_password"}}},49104:function(e,n,l){"use strict";l.d(n,{Z:function(){return F}});var t=l(57437),s=l(2265),i=l(87452),r=l(88829),a=l(72208),d=l(49566),u=l(13634),o=l(82680),c=l(20577),m=l(52787),h=l(73002),p=l(19250),x=l(9114),g=e=>{let{isModalVisible:n,accessToken:l,setIsModalVisible:s,setBudgetList:g}=e,[j]=u.Z.useForm(),Z=async e=>{if(null!=l&&void 0!=l)try{x.Z.info("Making API Call");let n=await (0,p.budgetCreateCall)(l,e);console.log("key create Response:",n),g(e=>e?[...e,n]:[n]),x.Z.success("Budget Created"),j.resetFields()}catch(e){console.error("Error creating the key:",e),x.Z.fromBackend("Error creating the key: ".concat(e))}};return(0,t.jsx)(o.Z,{title:"Create Budget",visible:n,width:800,footer:null,onOk:()=>{s(!1),j.resetFields()},onCancel:()=>{s(!1),j.resetFields()},children:(0,t.jsxs)(u.Z,{form:j,onFinish:Z,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,t.jsx)(d.Z,{placeholder:""})}),(0,t.jsx)(u.Z.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,t.jsx)(c.Z,{step:1,precision:2,width:200})}),(0,t.jsx)(u.Z.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,t.jsx)(c.Z,{step:1,precision:2,width:200})}),(0,t.jsxs)(i.Z,{className:"mt-20 mb-8",children:[(0,t.jsx)(a.Z,{children:(0,t.jsx)("b",{children:"Optional Settings"})}),(0,t.jsxs)(r.Z,{children:[(0,t.jsx)(u.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,t.jsx)(c.Z,{step:.01,precision:2,width:200})}),(0,t.jsx)(u.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,t.jsxs)(m.default,{defaultValue:null,placeholder:"n/a",children:[(0,t.jsx)(m.default.Option,{value:"24h",children:"daily"}),(0,t.jsx)(m.default.Option,{value:"7d",children:"weekly"}),(0,t.jsx)(m.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(h.ZP,{htmlType:"submit",children:"Create Budget"})})]})})},j=e=>{let{isModalVisible:n,accessToken:l,setIsModalVisible:g,setBudgetList:j,existingBudget:Z,handleUpdateCall:_}=e;console.log("existingBudget",Z);let[b]=u.Z.useForm();(0,s.useEffect)(()=>{b.setFieldsValue(Z)},[Z,b]);let f=async e=>{if(null!=l&&void 0!=l)try{x.Z.info("Making API Call"),g(!0);let n=await (0,p.budgetUpdateCall)(l,e);j(e=>e?[...e,n]:[n]),x.Z.success("Budget Updated"),b.resetFields(),_()}catch(e){console.error("Error creating the key:",e),x.Z.fromBackend("Error creating the key: ".concat(e))}};return(0,t.jsx)(o.Z,{title:"Edit Budget",visible:n,width:800,footer:null,onOk:()=>{g(!1),b.resetFields()},onCancel:()=>{g(!1),b.resetFields()},children:(0,t.jsxs)(u.Z,{form:b,onFinish:f,labelCol:{span:8},wrapperCol:{span:16},labelAlign:"left",initialValues:Z,children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z.Item,{label:"Budget ID",name:"budget_id",rules:[{required:!0,message:"Please input a human-friendly name for the budget"}],help:"A human-friendly name for the budget",children:(0,t.jsx)(d.Z,{placeholder:""})}),(0,t.jsx)(u.Z.Item,{label:"Max Tokens per minute",name:"tpm_limit",help:"Default is model limit.",children:(0,t.jsx)(c.Z,{step:1,precision:2,width:200})}),(0,t.jsx)(u.Z.Item,{label:"Max Requests per minute",name:"rpm_limit",help:"Default is model limit.",children:(0,t.jsx)(c.Z,{step:1,precision:2,width:200})}),(0,t.jsxs)(i.Z,{className:"mt-20 mb-8",children:[(0,t.jsx)(a.Z,{children:(0,t.jsx)("b",{children:"Optional Settings"})}),(0,t.jsxs)(r.Z,{children:[(0,t.jsx)(u.Z.Item,{label:"Max Budget (USD)",name:"max_budget",children:(0,t.jsx)(c.Z,{step:.01,precision:2,width:200})}),(0,t.jsx)(u.Z.Item,{className:"mt-8",label:"Reset Budget",name:"budget_duration",children:(0,t.jsxs)(m.default,{defaultValue:null,placeholder:"n/a",children:[(0,t.jsx)(m.default.Option,{value:"24h",children:"daily"}),(0,t.jsx)(m.default.Option,{value:"7d",children:"weekly"}),(0,t.jsx)(m.default.Option,{value:"30d",children:"monthly"})]})})]})]})]}),(0,t.jsx)("div",{style:{textAlign:"right",marginTop:"10px"},children:(0,t.jsx)(h.ZP,{htmlType:"submit",children:"Save"})})]})})},Z=l(20831),_=l(12514),b=l(47323),f=l(12485),y=l(18135),v=l(35242),k=l(29706),w=l(77991),C=l(21626),B=l(97214),I=l(28241),D=l(58834),A=l(69552),O=l(71876),T=l(84264),E=l(53410),M=l(74998),S=l(17906),F=e=>{let{accessToken:n}=e,[l,i]=(0,s.useState)(!1),[r,a]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),[o,c]=(0,s.useState)([]);(0,s.useEffect)(()=>{n&&(0,p.getBudgetList)(n).then(e=>{c(e)})},[n]);let m=async(e,l)=>{console.log("budget_id",e),null!=n&&(u(o.find(n=>n.budget_id===e)||null),a(!0))},h=async(e,l)=>{if(null==n)return;x.Z.info("Request made"),await (0,p.budgetDeleteCall)(n,e);let t=[...o];t.splice(l,1),c(t),x.Z.success("Budget Deleted.")},F=async()=>{null!=n&&(0,p.getBudgetList)(n).then(e=>{c(e)})};return(0,t.jsxs)("div",{className:"w-full mx-auto flex-auto overflow-y-auto m-8 p-2",children:[(0,t.jsx)(Z.Z,{size:"sm",variant:"primary",className:"mb-2",onClick:()=>i(!0),children:"+ Create Budget"}),(0,t.jsx)(g,{accessToken:n,isModalVisible:l,setIsModalVisible:i,setBudgetList:c}),d&&(0,t.jsx)(j,{accessToken:n,isModalVisible:r,setIsModalVisible:a,setBudgetList:c,existingBudget:d,handleUpdateCall:F}),(0,t.jsxs)(_.Z,{children:[(0,t.jsx)(T.Z,{children:"Create a budget to assign to customers."}),(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(D.Z,{children:(0,t.jsxs)(O.Z,{children:[(0,t.jsx)(A.Z,{children:"Budget ID"}),(0,t.jsx)(A.Z,{children:"Max Budget"}),(0,t.jsx)(A.Z,{children:"TPM"}),(0,t.jsx)(A.Z,{children:"RPM"})]})}),(0,t.jsx)(B.Z,{children:o.slice().sort((e,n)=>new Date(n.updated_at).getTime()-new Date(e.updated_at).getTime()).map((e,n)=>(0,t.jsxs)(O.Z,{children:[(0,t.jsx)(I.Z,{children:e.budget_id}),(0,t.jsx)(I.Z,{children:e.max_budget?e.max_budget:"n/a"}),(0,t.jsx)(I.Z,{children:e.tpm_limit?e.tpm_limit:"n/a"}),(0,t.jsx)(I.Z,{children:e.rpm_limit?e.rpm_limit:"n/a"}),(0,t.jsx)(b.Z,{icon:E.Z,size:"sm",onClick:()=>m(e.budget_id,n)}),(0,t.jsx)(b.Z,{icon:M.Z,size:"sm",onClick:()=>h(e.budget_id,n)})]},n))})]})]}),(0,t.jsxs)("div",{className:"mt-5",children:[(0,t.jsx)(T.Z,{className:"text-base",children:"How to use budget id"}),(0,t.jsxs)(y.Z,{children:[(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(f.Z,{children:"Assign Budget to Customer"}),(0,t.jsx)(f.Z,{children:"Test it (Curl)"}),(0,t.jsx)(f.Z,{children:"Test it (OpenAI SDK)"})]}),(0,t.jsxs)(w.Z,{children:[(0,t.jsx)(k.Z,{children:(0,t.jsx)(S.Z,{language:"bash",children:"\ncurl -X POST --location '<your_proxy_base_url>/end_user/new' \n-H 'Authorization: Bearer <your-master-key>' \n-H 'Content-Type: application/json' \n-d '{\"user_id\": \"my-customer-id', \"budget_id\": \"<BUDGET_ID>\"}' # \uD83D\uDC48 KEY CHANGE\n\n            "})}),(0,t.jsx)(k.Z,{children:(0,t.jsx)(S.Z,{language:"bash",children:'\ncurl -X POST --location \'<your_proxy_base_url>/chat/completions\' \n-H \'Authorization: Bearer <your-master-key>\' \n-H \'Content-Type: application/json\' \n-d \'{\n  "model": "gpt-3.5-turbo\', \n  "messages":[{"role": "user", "content": "Hey, how\'s it going?"}],\n  "user": "my-customer-id"\n}\' # \uD83D\uDC48 KEY CHANGE\n\n            '})}),(0,t.jsx)(k.Z,{children:(0,t.jsx)(S.Z,{language:"python",children:'from openai import OpenAI\nclient = OpenAI(\n  base_url="<your_proxy_base_url>",\n  api_key="<your_proxy_key>"\n)\n\ncompletion = client.chat.completions.create(\n  model="gpt-3.5-turbo",\n  messages=[\n    {"role": "system", "content": "You are a helpful assistant."},\n    {"role": "user", "content": "Hello!"}\n  ],\n  user="my-customer-id"\n)\n\nprint(completion.choices[0].message)'})})]})]})]})]})}}},function(e){e.O(0,[9820,1491,1526,2417,2926,7906,527,8049,2971,2117,1744],function(){return e(e.s=21044)}),_N_E=e.O()}]);