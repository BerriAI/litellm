"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1953],{19046:function(e,t,s){s.d(t,{Dx:function(){return n.Z},Zb:function(){return r.Z},oi:function(){return o.Z},xv:function(){return l.Z},zx:function(){return a.Z}});var a=s(78489),r=s(12514),l=s(84264),o=s(49566),n=s(96761)},88712:function(e,t,s){var a=s(57437);s(2265);var r=s(33145),l=s(66830),o=s(50010);t.Z=e=>{let{message:t}=e;if(!(0,l.br)(t))return null;let s="string"==typeof t.content&&t.content.includes("[PDF attached]");return(0,a.jsx)("div",{className:"mb-2",children:s?(0,a.jsx)("div",{className:"w-64 h-32 rounded-md border border-gray-200 bg-red-50 flex items-center justify-center",children:(0,a.jsx)(o.Z,{style:{fontSize:"48px",color:"#dc2626"}})}):(0,a.jsx)(r.default,{src:t.imagePreviewUrl||"",alt:"User uploaded image",width:256,height:200,className:"max-w-64 rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"200px",width:"auto",height:"auto"}})})}},27930:function(e,t,s){var a=s(57437);s(2265);var r=s(65319),l=s(99981),o=s(53508);let{Dragger:n}=r.default;t.Z=e=>{let{chatUploadedImage:t,chatImagePreviewUrl:s,onImageUpload:r,onRemoveImage:i}=e;return(0,a.jsx)(a.Fragment,{children:!t&&(0,a.jsx)(n,{beforeUpload:r,accept:"image/*,.pdf",showUploadList:!1,className:"inline-block",style:{padding:0,border:"none",background:"none"},children:(0,a.jsx)(l.Z,{title:"Attach image or PDF",children:(0,a.jsx)("button",{type:"button",className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:(0,a.jsx)(o.Z,{style:{fontSize:"16px"}})})})})})}},66830:function(e,t,s){s.d(t,{Hk:function(){return l},Sn:function(){return r},br:function(){return o}});let a=e=>new Promise((t,s)=>{let a=new FileReader;a.onload=()=>{t(a.result)},a.onerror=s,a.readAsDataURL(e)}),r=async(e,t)=>({role:"user",content:[{type:"text",text:e},{type:"image_url",image_url:{url:await a(t)}}]}),l=(e,t,s,a)=>{let r="";t&&a&&(r=a.toLowerCase().endsWith(".pdf")?"[PDF attached]":"[Image attached]");let l={role:"user",content:t?"".concat(e," ").concat(r):e};return t&&s&&(l.imagePreviewUrl=s),l},o=e=>"user"===e.role&&"string"==typeof e.content&&(e.content.includes("[Image attached]")||e.content.includes("[PDF attached]"))&&!!e.imagePreviewUrl},41953:function(e,t,s){s.d(t,{Z:function(){return ts}});var a=s(57437),r=s(61935),l=s(92403),o=s(55322),n=s(62272),i=s(26430),c=s(12660),d=s(25980),m=s(69993),u=s(71891),p=s(58630),x=s(15424),g=s(44625),h=s(57400),f=s(11894),v=s(15883),y=s(99890),b=s(26349),j=s(50010),N=s(79276),w=s(19046),S=s(4260),_=s(65319),P=s(57840),C=s(37592),k=s(5545),A=s(79326),E=s(99981),I=s(10353),Z=s(22116),T=s(2265),L=s(62831),M=s(17906),O=s(94263),R=s(93837),K=s(9309),U=s(67479),D=s(87972),B=s(10032),z=s(12221);let F=e=>"object"==typeof e&&null!==e&&!Array.isArray(e);function H(e){if(!e)return[];if(Array.isArray(e))return e.map(e=>G(e)).filter(e=>void 0!==e);let t=G(e);return void 0!==t?[t]:[]}function G(e,t){if(!e)return;let s=void 0!==t?t:e.default;if("object"===e.type){let t=F(s)?{...s}:{};return e.properties&&Object.entries(e.properties).forEach(e=>{let[s,a]=e;t[s]=G(a,t[s])}),t}if("array"===e.type){if(Array.isArray(s)){let t=e.items;if(!t)return s;if(0===s.length){let e=H(t);return e.length?e:s}return Array.isArray(t)?s.map((e,s)=>{var a;return G(null!==(a=t[s])&&void 0!==a?a:t[t.length-1],e)}):s.map(e=>G(t,e))}return void 0!==s?s:H(e.items)}if(void 0!==s)return s;switch(e.type){case"integer":case"number":return 0;case"boolean":return!1;default:return""}}let q=e=>{let t=G(e);if("object"===e.type||"array"===e.type){let s="array"===e.type?[]:{};return JSON.stringify(null!=t?t:s,null,2)}return t},J=(0,T.forwardRef)((e,t)=>{let{tool:s,className:r}=e,[l]=B.Z.useForm(),o=(0,T.useMemo)(()=>"string"==typeof s.inputSchema?{type:"object",properties:{input:{type:"string",description:"Input for this tool"}},required:["input"]}:s.inputSchema,[s.inputSchema]),n=(0,T.useMemo)(()=>{var e,t;return(null===(t=o.properties)||void 0===t?void 0:null===(e=t.params)||void 0===e?void 0:e.type)==="object"&&o.properties.params.properties?{type:"object",properties:o.properties.params.properties,required:o.properties.params.required||[]}:o},[o]);return((0,T.useImperativeHandle)(t,()=>({getSubmitValues:async()=>(function(e,t,s){var a,r;let l={};return Object.entries(e).forEach(e=>{var s;let[a,r]=e,o=null===(s=t.properties)||void 0===s?void 0:s[a];if(o&&null!=r&&""!==r)switch(o.type){case"boolean":l[a]="true"===r||!0===r;break;case"number":case"integer":{let e=Number(r);l[a]=Number.isNaN(e)?r:"integer"===o.type?Math.trunc(e):e;break}case"object":case"array":try{let e="string"==typeof r?JSON.parse(r):r,t="object"===o.type&&null!==e&&"object"==typeof e&&!Array.isArray(e),s="array"===o.type&&Array.isArray(e);"object"===o.type&&t||"array"===o.type&&s?l[a]=e:l[a]=r}catch(e){l[a]=r}break;case"string":l[a]=String(r);break;default:l[a]=r}else null!=r&&""!==r&&(l[a]=r)}),(null===(r=s.properties)||void 0===r?void 0:null===(a=r.params)||void 0===a?void 0:a.type)==="object"&&s.properties.params.properties?{params:l}:l})(await l.validateFields(),n,o)})),T.useEffect(()=>{if(l.resetFields(),!n.properties)return;let e={};Object.entries(n.properties).forEach(t=>{let[s,a]=t;e[s]=q(a)}),l.setFieldsValue(e)},[l,n,s]),"string"==typeof s.inputSchema)?(0,a.jsx)(B.Z,{form:l,layout:"vertical",className:r,children:(0,a.jsx)(B.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Input ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),name:"input",rules:[{required:!0,message:"Please enter input for this tool"}],children:(0,a.jsx)(S.default,{placeholder:"Enter input for this tool"})})}):n.properties?(0,a.jsx)(B.Z,{form:l,layout:"vertical",className:r,children:Object.entries(n.properties).map(e=>{var t,r,l,o;let[i,c]=e,d=q(c),m="".concat(s.name,"-").concat(i);return(0,a.jsx)(B.Z.Item,{label:(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex items-center",children:[i," ",(null===(t=n.required)||void 0===t?void 0:t.includes(i))&&(0,a.jsx)("span",{className:"text-red-500",children:"*"}),c.description&&(0,a.jsx)(E.Z,{title:c.description,children:(0,a.jsx)(x.Z,{className:"ml-2 text-gray-400 hover:text-gray-600"})})]}),name:i,initialValue:d,rules:[{required:null===(r=n.required)||void 0===r?void 0:r.includes(i),message:"Please enter ".concat(i)},..."object"===c.type||"array"===c.type?[{validator:(e,t)=>{var s;if((null==t||""===t)&&!(null===(s=n.required)||void 0===s?void 0:s.includes(i)))return Promise.resolve();try{let e="string"==typeof t?JSON.parse(t):t,s="object"===c.type&&null!==e&&"object"==typeof e&&!Array.isArray(e),a="array"===c.type&&Array.isArray(e);if("object"===c.type&&s||"array"===c.type&&a)return Promise.resolve();return Promise.reject(Error("object"===c.type?"Please enter a JSON object":"Please enter a JSON array"))}catch(e){return Promise.reject(Error("Invalid JSON"))}}}]:[]],children:"string"===c.type&&c.enum?(0,a.jsx)(C.default,{placeholder:"Select ".concat(i),allowClear:!(null===(l=n.required)||void 0===l?void 0:l.includes(i)),options:c.enum.map(e=>({value:e,label:e}))}):"string"!==c.type||c.enum?"number"===c.type||"integer"===c.type?(0,a.jsx)(z.Z,{step:"integer"===c.type?1:void 0,placeholder:c.description||"Enter ".concat(i),className:"w-full",style:{width:"100%"}}):"boolean"===c.type?(0,a.jsx)(C.default,{placeholder:"Select ".concat(i),allowClear:!(null===(o=n.required)||void 0===o?void 0:o.includes(i)),options:[{value:!0,label:"True"},{value:!1,label:"False"}]}):"object"===c.type||"array"===c.type?(0,a.jsx)(S.default.TextArea,{rows:"object"===c.type?4:3,placeholder:c.description||("object"===c.type?"Enter JSON object for ".concat(i):"Enter JSON array for ".concat(i)),spellCheck:!1,className:"font-mono"}):(0,a.jsx)(S.default,{placeholder:c.description||"Enter ".concat(i),allowClear:!0}):(0,a.jsx)(S.default,{placeholder:c.description||"Enter ".concat(i),allowClear:!0})},m)})}):(0,a.jsx)(B.Z,{form:l,layout:"vertical",className:r,children:(0,a.jsx)("div",{className:"py-4 text-center text-sm text-gray-500",children:"No parameters required for this tool."})})});J.displayName="MCPToolArgumentsForm";var W=s(9114),V=s(19250),Y=s(99020),X=s(97415),$=s(26832),Q=s(85498);async function ee(e,t,s,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,n=arguments.length>7?arguments[7]:void 0,i=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,u=arguments.length>12?arguments[12]:void 0,p=(arguments.length>13&&arguments[13],arguments.length>14?arguments[14]:void 0);if(!a)throw Error("Virtual Key is required");console.log=function(){};let x=p||(0,V.getProxyBaseUrl)(),g={};r&&r.length>0&&(g["x-litellm-tags"]=r.join(","));let h=new Q.ZP({apiKey:a,baseURL:x,dangerouslyAllowBrowser:!0,defaultHeaders:g});try{let a=Date.now(),r=!1,p={model:s,messages:e.map(e=>({role:e.role,content:e.content})),stream:!0,max_tokens:1024,litellm_trace_id:c};for await(let e of(d&&(p.vector_store_ids=d),m&&(p.guardrails=m),u&&(p.policies=u),h.messages.stream(p,{signal:l}))){if(console.log("Stream event:",e),"content_block_delta"===e.type){let l=e.delta;if(!r){r=!0;let e=Date.now()-a;console.log("First token received! Time:",e,"ms"),n&&n(e)}"text_delta"===l.type?t("assistant",l.text,s):"reasoning_delta"===l.type&&o&&o(l.text)}if("message_delta"===e.type&&e.usage&&i){let t=e.usage;console.log("Usage data found:",t);let s={completionTokens:t.output_tokens,promptTokens:t.input_tokens,totalTokens:t.input_tokens+t.output_tokens};i(s)}}}catch(e){throw(null==l?void 0:l.aborted)?console.log("Anthropic messages request was cancelled"):W.ZP.fromBackend("Error occurred while generating model response. Please try again. Error: ".concat(e)),e}}var et=s(7271);async function es(e,t,s,a,r,l,o,n,i,c){console.log=function(){},console.log("isLocal:",!1);let d=c||(0,V.getProxyBaseUrl)(),m=new et.ZP.OpenAI({apiKey:r,baseURL:d,dangerouslyAllowBrowser:!0,defaultHeaders:l&&l.length>0?{"x-litellm-tags":l.join(",")}:void 0});try{let r=await m.audio.speech.create({model:a,input:e,voice:t,...n?{response_format:n}:{},...i?{speed:i}:{}},{signal:o}),l=await r.blob(),c=URL.createObjectURL(l);s(c,a)}catch(e){throw(null==o?void 0:o.aborted)?console.log("Audio speech request was cancelled"):W.ZP.fromBackend("Error occurred while generating speech. Please try again. Error: ".concat(e)),e}}async function ea(e,t,s,a,r,l,o,n,i,c,d){console.log=function(){},console.log("isLocal:",!1);let m=d||(0,V.getProxyBaseUrl)(),u=new et.ZP.OpenAI({apiKey:a,baseURL:m,dangerouslyAllowBrowser:!0,defaultHeaders:r&&r.length>0?{"x-litellm-tags":r.join(",")}:void 0});try{console.log("Processing audio file for transcription:",e.name);let a=await u.audio.transcriptions.create({model:s,file:e,...o?{language:o}:{},...n?{prompt:n}:{},...i?{response_format:i}:{},...void 0!==c?{temperature:c}:{}},{signal:l});if(console.log("Transcription response:",a),a&&a.text)t(a.text,s),W.ZP.success("Audio transcribed successfully");else throw Error("No transcription text in response")}catch(e){if(console.error("Error making audio transcription request:",e),null==l?void 0:l.aborted)console.log("Audio transcription request was cancelled");else{var p;let t="Failed to transcribe audio";(null==e?void 0:null===(p=e.error)||void 0===p?void 0:p.message)?t=e.error.message:(null==e?void 0:e.message)&&(t=e.message),W.ZP.fromBackend("Audio transcription failed: ".concat(t))}throw e}}var er=s(95459);async function el(e,t,s,a,r,l){if(!a)throw Error("Virtual Key is required");console.log=function(){};let o=l||(0,V.getProxyBaseUrl)(),n={};r&&r.length>0&&(n["x-litellm-tags"]=r.join(","));try{var i,c,d;let r=o.endsWith("/")?o.slice(0,-1):o,l=await fetch("".concat(r,"/embeddings"),{method:"POST",headers:{"Content-Type":"application/json",[(0,V.getGlobalLitellmHeaderName)()]:"Bearer ".concat(a),...n},body:JSON.stringify({model:s,input:e})});if(!l.ok){let e=await l.text();throw Error(e||"Request failed with status ".concat(l.status))}let m=await l.json(),u=null==m?void 0:null===(c=m.data)||void 0===c?void 0:null===(i=c[0])||void 0===i?void 0:i.embedding;if(!u)throw Error("No embedding returned from server");t(JSON.stringify(u),null!==(d=null==m?void 0:m.model)&&void 0!==d?d:s)}catch(e){throw W.ZP.fromBackend("Error occurred while making embeddings request. Please try again. Error: ".concat(e)),e}}var eo=s(91643),en=s(10703);async function ei(e,t,s,a,r,l,o,n){console.log=function(){},console.log("isLocal:",!1);let i=n||(0,V.getProxyBaseUrl)(),c=new et.ZP.OpenAI({apiKey:r,baseURL:i,dangerouslyAllowBrowser:!0,defaultHeaders:l&&l.length>0?{"x-litellm-tags":l.join(",")}:void 0});try{let r=Array.isArray(e)?e:[e],l=[];for(let e=0;e<r.length;e++){let n=r[e];console.log("Processing image ".concat(e+1," of ").concat(r.length));let i=await c.images.edit({model:a,image:n,prompt:t},{signal:o});if(console.log("Response for image ".concat(e+1,":"),i.data),i.data&&i.data[0]){if(i.data[0].url)s(i.data[0].url,a),l.push(i.data[0].url);else if(i.data[0].b64_json){let e=i.data[0].b64_json,t="data:image/png;base64,".concat(e);s(t,a),l.push(t)}}}l.length>1&&W.ZP.success("Successfully processed ".concat(l.length," images"))}catch(e){if(console.error("Error making image edit request:",e),null==o?void 0:o.aborted)console.log("Image edits request was cancelled");else{var d;let t="Failed to edit image(s)";(null==e?void 0:null===(d=e.error)||void 0===d?void 0:d.message)?t=e.error.message:(null==e?void 0:e.message)&&(t=e.message),W.ZP.fromBackend("Image edit failed: ".concat(t))}throw e}}async function ec(e,t,s,a,r,l,o){console.log=function(){},console.log("isLocal:",!1);let n=o||(0,V.getProxyBaseUrl)(),i=new et.ZP.OpenAI({apiKey:a,baseURL:n,dangerouslyAllowBrowser:!0,defaultHeaders:r&&r.length>0?{"x-litellm-tags":r.join(",")}:void 0});try{let a=await i.images.generate({model:s,prompt:e},{signal:l});if(console.log(a.data),a.data&&a.data[0]){if(a.data[0].url)t(a.data[0].url,s);else if(a.data[0].b64_json){let e=a.data[0].b64_json;t("data:image/png;base64,".concat(e),s)}else throw Error("No image data found in response")}else throw Error("Invalid response format")}catch(e){throw(null==l?void 0:l.aborted)?console.log("Image generation request was cancelled"):W.ZP.fromBackend("Error occurred while generating image. Please try again. Error: ".concat(e)),e}}async function ed(e,t,s,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,n=arguments.length>7?arguments[7]:void 0,i=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,u=arguments.length>12?arguments[12]:void 0,p=arguments.length>13?arguments[13]:void 0,x=arguments.length>14?arguments[14]:void 0,g=arguments.length>15?arguments[15]:void 0,h=arguments.length>16?arguments[16]:void 0,f=arguments.length>17?arguments[17]:void 0,v=arguments.length>18?arguments[18]:void 0,y=arguments.length>19?arguments[19]:void 0,b=arguments.length>20?arguments[20]:void 0,j=arguments.length>21?arguments[21]:void 0;if(!a)throw Error("Virtual Key is required");if(!s||""===s.trim())throw Error("Model is required. Please select a model before sending a request.");console.log=function(){};let N=y||(0,V.getProxyBaseUrl)(),w={};r&&r.length>0&&(w["x-litellm-tags"]=r.join(","));let S=new et.ZP.OpenAI({apiKey:a,baseURL:N,dangerouslyAllowBrowser:!0,defaultHeaders:w});try{let a=Date.now(),r=!1,y=e.map(e=>(Array.isArray(e.content),{role:e.role,content:e.content,type:"message"})),N=[];p&&p.length>0&&(p.includes("__all__")?N.push({type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp",require_approval:"never"}):p.forEach(e=>{let t=null==b?void 0:b.find(t=>t.server_id===e),s=(null==t?void 0:t.alias)||(null==t?void 0:t.server_name)||e,a=(null==j?void 0:j[e])||[];N.push({type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp/".concat(s),require_approval:"never",...a.length>0?{allowed_tools:a}:{}})})),f&&N.push({type:"code_interpreter",container:{type:"auto"}});let w=await S.responses.create({model:s,input:y,stream:!0,litellm_trace_id:c,...x?{previous_response_id:x}:{},...d?{vector_store_ids:d}:{},...m?{guardrails:m}:{},...u?{policies:u}:{},...N.length>0?{tools:N,tool_choice:"auto"}:{}},{signal:l}),Z="",T={code:"",containerId:""};for await(let e of w)if(console.log("Response event:",e),"object"==typeof e&&null!==e){var _,P,C,k,A,E,I;if(((null===(_=e.type)||void 0===_?void 0:_.startsWith("response.mcp_"))||"response.output_item.done"===e.type&&((null===(P=e.item)||void 0===P?void 0:P.type)==="mcp_list_tools"||(null===(C=e.item)||void 0===C?void 0:C.type)==="mcp_call"))&&(console.log("MCP event received:",e),h)){let t={type:e.type,sequence_number:e.sequence_number,output_index:e.output_index,item_id:e.item_id||(null===(E=e.item)||void 0===E?void 0:E.id),item:e.item,delta:e.delta,arguments:e.arguments,timestamp:Date.now()};h(t)}if("response.output_item.done"===e.type&&(null===(k=e.item)||void 0===k?void 0:k.type)==="mcp_call"&&(null===(A=e.item)||void 0===A?void 0:A.name)&&(Z=e.item.name,console.log("MCP tool used:",Z)),T=function(e,t){var s;return"response.output_item.done"===e.type&&(null===(s=e.item)||void 0===s?void 0:s.type)==="code_interpreter_call"?(console.log("Code interpreter call completed:",e.item),{code:e.item.code||"",containerId:e.item.container_id||""}):t}(e,T),!function(e,t,s){var a,r;if("response.output_item.done"===e.type&&(null===(a=e.item)||void 0===a?void 0:a.type)==="message"&&(null===(r=e.item)||void 0===r?void 0:r.content)&&s){for(let a of e.item.content)if("output_text"===a.type&&a.annotations){let e=a.annotations.filter(e=>"container_file_citation"===e.type);(e.length>0||t.code)&&s({code:t.code,containerId:t.containerId,annotations:e})}}}(e,T,v),"response.role.delta"===e.type)continue;if("response.output_text.delta"===e.type&&"string"==typeof e.delta){let l=e.delta;if(console.log("Text delta",l),l.trim().length>0&&(t("assistant",l,s),!r)){r=!0;let e=Date.now()-a;console.log("First token received! Time:",e,"ms"),n&&n(e)}}if("response.reasoning.delta"===e.type&&"delta"in e){let t=e.delta;"string"==typeof t&&o&&o(t)}if("response.completed"===e.type&&"response"in e){let t=e.response,s=t.usage;if(console.log("Usage data:",s),console.log("Response completed event:",t),t.id&&g&&(console.log("Response ID for session management:",t.id),g(t.id)),s&&i){console.log("Usage data:",s);let e={completionTokens:s.output_tokens,promptTokens:s.input_tokens,totalTokens:s.total_tokens};(null===(I=s.completion_tokens_details)||void 0===I?void 0:I.reasoning_tokens)&&(e.reasoningTokens=s.completion_tokens_details.reasoning_tokens),i(e,Z)}}}return w}catch(e){throw(null==l?void 0:l.aborted)?console.log("Responses API request was cancelled"):W.ZP.fromBackend("Error occurred while generating model response. Please try again. Error: ".concat(e)),e}}var em=s(83669),eu=s(29271),ep=s(5540),ex=s(38434),eg=s(23639),eh=s(70464),ef=s(77565);let ev=e=>{switch(e){case"completed":return(0,a.jsx)(em.Z,{className:"text-green-500"});case"working":case"submitted":return(0,a.jsx)(r.Z,{className:"text-blue-500"});case"failed":case"canceled":return(0,a.jsx)(eu.Z,{className:"text-red-500"});default:return(0,a.jsx)(ep.Z,{className:"text-gray-500"})}},ey=e=>{switch(e){case"completed":return"bg-green-100 text-green-700";case"working":case"submitted":return"bg-blue-100 text-blue-700";case"failed":case"canceled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},eb=e=>{if(!e)return null;try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch(t){return e}},ej=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e?e.length>t?"".concat(e.substring(0,t),"…"):e:null},eN=e=>{navigator.clipboard.writeText(e)};var ew=e=>{let{a2aMetadata:t,timeToFirstToken:s,totalLatency:r}=e,[l,o]=(0,T.useState)(!1);if(!t&&!s&&!r)return null;let{taskId:i,contextId:c,status:d,metadata:u}=t||{},p=eb(null==d?void 0:d.timestamp);return(0,a.jsxs)("div",{className:"a2a-metrics mt-3 pt-2 border-t border-gray-200 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2 text-gray-600",children:[(0,a.jsx)(m.Z,{className:"mr-1.5 text-blue-500"}),(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"A2A Metadata"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-gray-500 ml-4",children:[(null==d?void 0:d.state)&&(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(ey(d.state)),children:[ev(d.state),(0,a.jsx)("span",{className:"ml-1 capitalize",children:d.state})]}),p&&(0,a.jsx)(E.Z,{title:null==d?void 0:d.timestamp,children:(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(ep.Z,{className:"mr-1"}),p]})}),void 0!==r&&(0,a.jsx)(E.Z,{title:"Total latency",children:(0,a.jsxs)("span",{className:"flex items-center text-blue-600",children:[(0,a.jsx)(ep.Z,{className:"mr-1"}),(r/1e3).toFixed(2),"s"]})}),void 0!==s&&(0,a.jsx)(E.Z,{title:"Time to first token",children:(0,a.jsxs)("span",{className:"flex items-center text-green-600",children:["TTFT: ",(s/1e3).toFixed(2),"s"]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-gray-500 ml-4 mt-1.5",children:[i&&(0,a.jsx)(E.Z,{title:"Click to copy: ".concat(i),children:(0,a.jsxs)("span",{className:"flex items-center cursor-pointer hover:text-gray-700",onClick:()=>eN(i),children:[(0,a.jsx)(ex.Z,{className:"mr-1"}),"Task: ",ej(i),(0,a.jsx)(eg.Z,{className:"ml-1 text-gray-400 hover:text-gray-600"})]})}),c&&(0,a.jsx)(E.Z,{title:"Click to copy: ".concat(c),children:(0,a.jsxs)("span",{className:"flex items-center cursor-pointer hover:text-gray-700",onClick:()=>eN(c),children:[(0,a.jsx)(n.Z,{className:"mr-1"}),"Session: ",ej(c),(0,a.jsx)(eg.Z,{className:"ml-1 text-gray-400 hover:text-gray-600"})]})}),(u||(null==d?void 0:d.message))&&(0,a.jsxs)(k.ZP,{type:"text",size:"small",className:"text-xs text-blue-500 hover:text-blue-700 p-0 h-auto",onClick:()=>o(!l),children:[l?(0,a.jsx)(eh.Z,{}):(0,a.jsx)(ef.Z,{}),(0,a.jsx)("span",{className:"ml-1",children:"Details"})]})]}),l&&(0,a.jsxs)("div",{className:"mt-2 ml-4 p-3 bg-gray-50 rounded-md text-gray-600 border border-gray-200",children:[(null==d?void 0:d.message)&&(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Status Message:"}),(0,a.jsx)("span",{className:"ml-2",children:d.message})]}),i&&(0,a.jsxs)("div",{className:"mb-1.5 flex items-center",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700 w-24",children:"Task ID:"}),(0,a.jsx)("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-200 rounded text-xs font-mono",children:i}),(0,a.jsx)(eg.Z,{className:"ml-2 cursor-pointer text-gray-400 hover:text-blue-500",onClick:()=>eN(i)})]}),c&&(0,a.jsxs)("div",{className:"mb-1.5 flex items-center",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700 w-24",children:"Session ID:"}),(0,a.jsx)("code",{className:"ml-2 px-2 py-1 bg-white border border-gray-200 rounded text-xs font-mono",children:c}),(0,a.jsx)(eg.Z,{className:"ml-2 cursor-pointer text-gray-400 hover:text-blue-500",onClick:()=>eN(c)})]}),u&&Object.keys(u).length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Custom Metadata:"}),(0,a.jsx)("pre",{className:"mt-1.5 p-2 bg-white border border-gray-200 rounded text-xs font-mono overflow-x-auto whitespace-pre-wrap",children:JSON.stringify(u,null,2)})]})]})]})},eS=s(92280),e_=s(61994),eP=s(85847),eC=e=>{let{temperature:t=1,maxTokens:s=2048,useAdvancedParams:r,onTemperatureChange:l,onMaxTokensChange:o,onUseAdvancedParamsChange:n}=e,[i,c]=(0,T.useState)(!1),d=void 0!==r?r:i,[m,u]=(0,T.useState)(t),[p,g]=(0,T.useState)(s);(0,T.useEffect)(()=>{u(t)},[t]),(0,T.useEffect)(()=>{g(s)},[s]);let h=e=>{let t=null!=e?e:1;u(t),null==l||l(t)},f=e=>{let t=null!=e?e:1e3;g(t),null==o||o(t)},v=d?"text-gray-700":"text-gray-400",y=e=>{n?n(e):c(e)};return(0,a.jsxs)("div",{className:"space-y-4 p-4 w-80",children:[(0,a.jsx)(e_.Z,{checked:d,onChange:e=>y(e.target.checked),children:(0,a.jsx)("span",{className:"font-medium",children:"Use Advanced Parameters"})}),(0,a.jsxs)("div",{className:"space-y-4 transition-opacity duration-200",style:{opacity:d?1:.4},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eS.x,{className:"text-sm ".concat(v),children:"Temperature"}),(0,a.jsx)(E.Z,{title:"Controls randomness. Lower values make output more deterministic, higher values more creative.",children:(0,a.jsx)(x.Z,{className:"text-xs ".concat(v," cursor-help")})})]}),(0,a.jsx)(z.Z,{min:0,max:2,step:.1,value:m,onChange:h,disabled:!d,precision:1,className:"w-20"})]}),(0,a.jsx)(eP.Z,{min:0,max:2,step:.1,value:m,onChange:h,disabled:!d,marks:{0:"0",1:"1.0",2:"2.0"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(eS.x,{className:"text-sm ".concat(v),children:"Max Tokens"}),(0,a.jsx)(E.Z,{title:"Maximum number of tokens to generate in the response.",children:(0,a.jsx)(x.Z,{className:"text-xs ".concat(v," cursor-help")})})]}),(0,a.jsx)(z.Z,{min:1,max:32768,step:1,value:p,onChange:f,disabled:!d})]}),(0,a.jsx)(eP.Z,{min:1,max:32768,step:1,value:p,onChange:f,disabled:!d,marks:{1:"1",32768:"32768"}})]})]})]})},ek=e=>{let{message:t}=e;return t.isAudio&&"string"==typeof t.content?(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("audio",{controls:!0,src:t.content,className:"max-w-full",style:{maxWidth:"500px"},children:"Your browser does not support the audio element."})}):null},eA=s(8443);let eE={ALLOY:"Alloy - Professional and confident",ASH:"Ash - Casual and relaxed",BALAD:"Ballad - Smooth and melodic",CORAL:"Coral - Warm and engaging",ECHO:"Echo - Friendly and conversational",FABLE:"Fable - Wise and measured",NOVA:"Nova - Friendly and conversational",ONYX:"Onyx - Deep and authoritative",SAGE:"Sage - Wise and measured",SHIMMER:"Shimmer - Bright and cheerful"},eI=Object.entries({ALLOY:"alloy",ASH:"ash",BALAD:"ballad",CORAL:"coral",ECHO:"echo",FABLE:"fable",NOVA:"nova",ONYX:"onyx",SAGE:"sage",SHIMMER:"shimmer"}).map(e=>{let[t,s]=e;return{value:s,label:eE[t]}}),eZ=[{value:eA.KP.CHAT,label:"/v1/chat/completions"},{value:eA.KP.RESPONSES,label:"/v1/responses"},{value:eA.KP.ANTHROPIC_MESSAGES,label:"/v1/messages"},{value:eA.KP.IMAGE,label:"/v1/images/generations"},{value:eA.KP.IMAGE_EDITS,label:"/v1/images/edits"},{value:eA.KP.EMBEDDINGS,label:"/v1/embeddings"},{value:eA.KP.SPEECH,label:"/v1/audio/speech"},{value:eA.KP.TRANSCRIPTION,label:"/v1/audio/transcriptions"},{value:eA.KP.A2A_AGENTS,label:"/v1/a2a/message/send"},{value:eA.KP.MCP,label:"/mcp-rest/tools/call"}];var eT=s(88712),eL=s(27930),eM=s(66830),eO=s(44851),eR=s(41589),eK=s(73879),eU=e=>{let{code:t,containerId:s,annotations:l=[],accessToken:o}=e,[n,i]=(0,T.useState)({}),[c,d]=(0,T.useState)({}),m=(0,V.getProxyBaseUrl)();(0,T.useEffect)(()=>{let e=async()=>{for(let r of l){var e,t,s,a;if(((null===(e=r.filename)||void 0===e?void 0:e.toLowerCase().endsWith(".png"))||(null===(t=r.filename)||void 0===t?void 0:t.toLowerCase().endsWith(".jpg"))||(null===(s=r.filename)||void 0===s?void 0:s.toLowerCase().endsWith(".jpeg"))||(null===(a=r.filename)||void 0===a?void 0:a.toLowerCase().endsWith(".gif")))&&r.container_id&&r.file_id){d(e=>({...e,[r.file_id]:!0}));try{let e=await fetch("".concat(m,"/v1/containers/").concat(r.container_id,"/files/").concat(r.file_id,"/content"),{headers:{[(0,V.getGlobalLitellmHeaderName)()]:"Bearer ".concat(o)}});if(e.ok){let t=await e.blob(),s=URL.createObjectURL(t);i(e=>({...e,[r.file_id]:s}))}}catch(e){console.error("Error fetching image:",e)}finally{d(e=>({...e,[r.file_id]:!1}))}}}};return l.length>0&&o&&e(),()=>{Object.values(n).forEach(e=>URL.revokeObjectURL(e))}},[l,o,m]);let u=async e=>{try{let t=await fetch("".concat(m,"/v1/containers/").concat(e.container_id,"/files/").concat(e.file_id,"/content"),{headers:{[(0,V.getGlobalLitellmHeaderName)()]:"Bearer ".concat(o)}});if(t.ok){let s=await t.blob(),a=URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download=e.filename||"file_".concat(e.file_id),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)}}catch(e){console.error("Error downloading file:",e)}},p=l.filter(e=>{var t,s,a,r;return(null===(t=e.filename)||void 0===t?void 0:t.toLowerCase().endsWith(".png"))||(null===(s=e.filename)||void 0===s?void 0:s.toLowerCase().endsWith(".jpg"))||(null===(a=e.filename)||void 0===a?void 0:a.toLowerCase().endsWith(".jpeg"))||(null===(r=e.filename)||void 0===r?void 0:r.toLowerCase().endsWith(".gif"))}),x=l.filter(e=>{var t,s,a,r;return!(null===(t=e.filename)||void 0===t?void 0:t.toLowerCase().endsWith(".png"))&&!(null===(s=e.filename)||void 0===s?void 0:s.toLowerCase().endsWith(".jpg"))&&!(null===(a=e.filename)||void 0===a?void 0:a.toLowerCase().endsWith(".jpeg"))&&!(null===(r=e.filename)||void 0===r?void 0:r.toLowerCase().endsWith(".gif"))});return t||0!==l.length?(0,a.jsxs)("div",{className:"mt-3 space-y-3",children:[t&&(0,a.jsx)(eO.default,{size:"small",items:[{key:"code",label:(0,a.jsxs)("span",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(f.Z,{})," Python Code Executed"]}),children:(0,a.jsx)(M.Z,{language:"python",style:O.Z,customStyle:{margin:0,borderRadius:"6px",fontSize:"12px",maxHeight:"300px",overflow:"auto"},children:t})}]}),p.map(e=>(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 overflow-hidden",children:c[e.file_id]?(0,a.jsxs)("div",{className:"flex items-center justify-center p-8 bg-gray-50",children:[(0,a.jsx)(I.Z,{indicator:(0,a.jsx)(r.Z,{spin:!0})}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"Loading image..."})]}):n[e.file_id]?(0,a.jsxs)("div",{children:[(0,a.jsx)("img",{src:n[e.file_id],alt:e.filename||"Generated chart",className:"max-w-full",style:{maxHeight:"400px"}}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 border-t border-gray-200",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,a.jsx)(eR.Z,{})," ",e.filename]}),(0,a.jsxs)("button",{onClick:()=>u(e),className:"text-xs text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[(0,a.jsx)(eK.Z,{})," Download"]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center p-4 bg-gray-50",children:(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Image not available"})})},e.file_id)),x.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(e=>(0,a.jsxs)("button",{onClick:()=>u(e),className:"flex items-center gap-2 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(ex.Z,{className:"text-blue-500"}),(0,a.jsx)("span",{className:"text-sm",children:e.filename}),(0,a.jsx)(eK.Z,{className:"text-gray-400"})]},e.file_id))})]}):null},eD=s(42264),eB=s(63709);let ez=e=>{if(!e)return!1;let t=e.toLowerCase();return t.startsWith("openai/")||t.startsWith("gpt-")||t.startsWith("o1")||t.startsWith("o3")||t.includes("openai")};var eF=e=>{let{enabled:t,onEnabledChange:s,selectedModel:r,disabled:l=!1}=e,o=ez(r);return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 bg-gradient-to-r from-blue-50 to-purple-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"text-blue-500"}),(0,a.jsx)(eS.x,{className:"font-medium text-gray-700",children:"Code Interpreter"}),(0,a.jsx)(E.Z,{title:"Run Python code to generate files, charts, and analyze data. Container is created automatically.",children:(0,a.jsx)(x.Z,{className:"text-gray-400 text-xs"})})]}),(0,a.jsx)(eB.Z,{checked:t&&o,onChange:e=>{if(e&&!o){eD.ZP.warning("Code Interpreter is only available for OpenAI models");return}s(e)},disabled:l||!o,size:"small",className:t&&o?"bg-blue-500":""})]}),!o&&(0,a.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(eu.Z,{className:"text-amber-500 mt-0.5"}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,a.jsx)("span",{children:"Code Interpreter is currently only supported for OpenAI models. "}),(0,a.jsx)("a",{href:"https://github.com/BerriAI/litellm/issues/new?template=feature_request.yml",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Request support for other providers"})]})]})})]})},eH=s(82971),eG=e=>{let{endpointType:t,onEndpointChange:s,className:r}=e;return(0,a.jsx)("div",{className:r,children:(0,a.jsx)(C.default,{showSearch:!0,value:t,style:{width:"100%"},onChange:s,options:eZ,className:"rounded-md",filterOption:(e,t)=>{var s,a;return(null!==(s=null==t?void 0:t.label)&&void 0!==s?s:"").toLowerCase().includes(e.toLowerCase())||(null!==(a=null==t?void 0:t.value)&&void 0!==a?a:"").toLowerCase().includes(e.toLowerCase())}})})},eq=s(29),eJ=s.n(eq);let{Text:eW}=P.default,{Panel:eV}=eO.default;var eY=e=>{var t,s;let{events:r,className:l}=e;if(console.log("MCPEventsDisplay: Received events:",r),!r||0===r.length)return console.log("MCPEventsDisplay: No events, returning null"),null;let o=r.find(e=>{var t;return"response.output_item.done"===e.type&&(null===(t=e.item)||void 0===t?void 0:t.type)==="mcp_list_tools"&&e.item.tools&&e.item.tools.length>0}),n=r.filter(e=>{var t;return"response.output_item.done"===e.type&&(null===(t=e.item)||void 0===t?void 0:t.type)==="mcp_call"});return(console.log("MCPEventsDisplay: toolsEvent:",o),console.log("MCPEventsDisplay: mcpCallEvents:",n),o||0!==n.length)?(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac "+"mcp-events-display ".concat(l||""),children:[(0,a.jsx)(eJ(),{id:"32b14b04f420f3ac",children:'.openai-mcp-tools.jsx-32b14b04f420f3ac{position:relative;margin:0;padding:0}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse.jsx-32b14b04f420f3ac{background:transparent!important;border:none!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-item.jsx-32b14b04f420f3ac{border:none!important;background:transparent!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-header.jsx-32b14b04f420f3ac{padding:0 0 0 20px!important;background:transparent!important;border:none!important;font-size:14px!important;color:#9ca3af!important;font-weight:400!important;line-height:20px!important;min-height:20px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-header.jsx-32b14b04f420f3ac:hover{background:transparent!important;color:#6b7280!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-content.jsx-32b14b04f420f3ac{border:none!important;background:transparent!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-content-box.jsx-32b14b04f420f3ac{padding:4px 0 0 20px!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-expand-icon.jsx-32b14b04f420f3ac{position:absolute!important;left:2px!important;top:2px!important;color:#9ca3af!important;font-size:10px!important;width:16px!important;height:16px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-moz-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-moz-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:center!important;-webkit-justify-content:center!important;-moz-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important}.openai-mcp-tools.jsx-32b14b04f420f3ac .ant-collapse-expand-icon.jsx-32b14b04f420f3ac:hover{color:#6b7280!important}.openai-vertical-line.jsx-32b14b04f420f3ac{position:absolute;left:9px;top:18px;bottom:0;width:.5px;background-color:#f3f4f6;opacity:.8}.tool-item.jsx-32b14b04f420f3ac{font-family:ui-monospace,SFMono-Regular,"SF Mono",Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:13px;color:#4b5563;line-height:18px;padding:0;margin:0;background:white;position:relative;z-index:1}.mcp-section.jsx-32b14b04f420f3ac{margin-bottom:12px;background:white;position:relative;z-index:1}.mcp-section.jsx-32b14b04f420f3ac:last-child{margin-bottom:0}.mcp-section-header.jsx-32b14b04f420f3ac{font-size:13px;color:#6b7280;font-weight:500;margin-bottom:4px}.mcp-code-block.jsx-32b14b04f420f3ac{background:#f9fafb;border:1px solid#f3f4f6;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;padding:8px;font-size:12px}.mcp-json.jsx-32b14b04f420f3ac{font-family:ui-monospace,SFMono-Regular,"SF Mono",Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:#374151;margin:0;white-space:pre-wrap;word-wrap:break-word}.mcp-approved.jsx-32b14b04f420f3ac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-size:13px;color:#6b7280}.mcp-checkmark.jsx-32b14b04f420f3ac{color:#10b981;margin-right:6px;font-weight:bold}.mcp-response-content.jsx-32b14b04f420f3ac{font-size:13px;color:#374151;line-height:1.5;white-space:pre-wrap;font-family:ui-monospace,SFMono-Regular,"SF Mono",Monaco,Consolas,"Liberation Mono","Courier New",monospace}'}),(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac openai-mcp-tools",children:[(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac openai-vertical-line"}),(0,a.jsxs)(eO.default,{ghost:!0,size:"small",expandIconPosition:"start",defaultActiveKey:o?["list-tools"]:n.map((e,t)=>"mcp-call-".concat(t)),children:[o&&(0,a.jsx)(eV,{header:"List tools",children:(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac",children:null===(s=o.item)||void 0===s?void 0:null===(t=s.tools)||void 0===t?void 0:t.map((e,t)=>(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac tool-item",children:e.name},t))})},"list-tools"),n.map((e,t)=>{var s,r,l;return(0,a.jsx)(eV,{header:(null===(s=e.item)||void 0===s?void 0:s.name)||"Tool call",children:(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac",children:[(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:[(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section-header",children:"Request"}),(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-code-block",children:(null===(r=e.item)||void 0===r?void 0:r.arguments)&&(0,a.jsx)("pre",{className:"jsx-32b14b04f420f3ac mcp-json",children:(()=>{try{return JSON.stringify(JSON.parse(e.item.arguments),null,2)}catch(t){return e.item.arguments}})()})})]}),(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-approved",children:[(0,a.jsx)("span",{className:"jsx-32b14b04f420f3ac mcp-checkmark",children:"✓"})," Approved"]})}),(null===(l=e.item)||void 0===l?void 0:l.output)&&(0,a.jsxs)("div",{className:"jsx-32b14b04f420f3ac mcp-section",children:[(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-section-header",children:"Response"}),(0,a.jsx)("div",{className:"jsx-32b14b04f420f3ac mcp-response-content",children:e.item.output})]})]})},"mcp-call-".concat(t))})]})]})]}):(console.log("MCPEventsDisplay: No valid events found, returning null"),null)},eX=s(94331),e$=s(38398);let eQ=e=>new Promise((t,s)=>{let a=new FileReader;a.onload=()=>{t(a.result.split(",")[1])},a.onerror=s,a.readAsDataURL(e)}),e0=async(e,t)=>{let s=await eQ(t),a=t.type||(t.name.toLowerCase().endsWith(".pdf")?"application/pdf":"image/jpeg");return{role:"user",content:[{type:"input_text",text:e},{type:"input_image",image_url:"data:".concat(a,";base64,").concat(s)}]}},e1=(e,t,s,a)=>{let r="";t&&a&&(r=a.toLowerCase().endsWith(".pdf")?"[PDF attached]":"[Image attached]");let l={role:"user",content:t?"".concat(e," ").concat(r):e};return t&&s&&(l.imagePreviewUrl=s),l},e2=e=>"user"===e.role&&"string"==typeof e.content&&(e.content.includes("[Image attached]")||e.content.includes("[PDF attached]"))&&!!e.imagePreviewUrl;var e4=e=>{let{message:t}=e;if(!e2(t))return null;let s="string"==typeof t.content&&t.content.includes("[PDF attached]");return(0,a.jsx)("div",{className:"mb-2",children:s?(0,a.jsx)("div",{className:"w-64 h-32 rounded-md border border-gray-200 bg-red-50 flex items-center justify-center",children:(0,a.jsx)(j.Z,{style:{fontSize:"48px",color:"#dc2626"}})}):(0,a.jsx)("img",{src:t.imagePreviewUrl,alt:"User uploaded image",className:"max-w-64 rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"200px"}})})},e3=s(53508);let{Dragger:e5}=_.default;var e6=e=>{let{responsesUploadedImage:t,responsesImagePreviewUrl:s,onImageUpload:r,onRemoveImage:l}=e;return(0,a.jsx)(a.Fragment,{children:!t&&(0,a.jsx)(e5,{beforeUpload:r,accept:"image/*,.pdf",showUploadList:!1,className:"inline-block",style:{padding:0,border:"none",background:"none"},children:(0,a.jsx)(E.Z,{title:"Attach image or PDF",children:(0,a.jsx)("button",{type:"button",className:"flex items-center justify-center w-8 h-8 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:(0,a.jsx)(e3.Z,{style:{fontSize:"16px"}})})})})})},e7=s(33152),e8=e=>{let{endpointType:t,responsesSessionId:s,useApiSessionManagement:r,onToggleSessionManagement:l}=e;return t!==eA.KP.RESPONSES?null:(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Session Management"}),(0,a.jsx)(E.Z,{title:"Choose between LiteLLM API session management (using previous_response_id) or UI-based session management (using chat history)",children:(0,a.jsx)(x.Z,{className:"text-gray-400",style:{fontSize:"12px"}})})]}),(0,a.jsx)(eB.Z,{checked:r,onChange:l,checkedChildren:"API",unCheckedChildren:"UI",size:"small"})]}),(0,a.jsxs)("div",{className:"text-xs p-2 rounded-md ".concat(s?"bg-green-50 text-green-700 border border-green-200":"bg-blue-50 text-blue-700 border border-blue-200"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.Z,{style:{fontSize:"12px"}}),(()=>{if(!s)return r?"API Session: Ready":"UI Session: Ready";let e=r?"Response ID":"UI Session",t=s.slice(0,10);return"".concat(e,": ").concat(t,"...")})()]}),s&&(0,a.jsx)(E.Z,{title:(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("div",{className:"mb-1",children:"Copy response ID to continue session:"}),(0,a.jsx)("div",{className:"bg-gray-800 text-gray-100 p-2 rounded font-mono text-xs whitespace-pre-wrap",children:'curl -X POST "your-proxy-url/v1/responses" \\\n  -H "Authorization: Bearer your-api-key" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "model": "your-model",\n    "input": [{"role": "user", "content": "your message", "type": "message"}],\n    "previous_response_id": "'.concat(s,'",\n    "stream": true\n  }\'')})]}),overlayStyle:{maxWidth:"500px"},children:(0,a.jsx)("button",{onClick:()=>{s&&(navigator.clipboard.writeText(s),W.ZP.success("Response ID copied to clipboard!"))},className:"ml-2 p-1 hover:bg-green-100 rounded transition-colors",children:(0,a.jsx)(eg.Z,{style:{fontSize:"12px"}})})})]}),(0,a.jsx)("div",{className:"text-xs opacity-75 mt-1",children:s?r?"LiteLLM API session active - context maintained server-side":"UI session active - context maintained client-side":r?"LiteLLM will manage session using previous_response_id":"UI will manage session using chat history"})]})]})};let{TextArea:e9}=S.default,{Dragger:te}=_.default,tt=new Set([eA.KP.CHAT,eA.KP.RESPONSES,eA.KP.MCP]);var ts=e=>{let{accessToken:t,token:s,userRole:S,userID:_,disabledPersonalKeyCreation:B,proxySettings:z}=e,[F,H]=(0,T.useState)([]),[G,q]=(0,T.useState)(()=>{let e=sessionStorage.getItem("selectedMCPServers");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedMCPServers from sessionStorage",e),[]}}),[Q,et]=(0,T.useState)(!1),[em,eu]=(0,T.useState)({}),[ep,ex]=(0,T.useState)(void 0),eg=(0,T.useRef)(null),[eh,ef]=(0,T.useState)(()=>{let e=sessionStorage.getItem("mcpServerToolRestrictions");try{return e?JSON.parse(e):{}}catch(e){return console.error("Error parsing mcpServerToolRestrictions from sessionStorage",e),{}}}),[ev,ey]=(0,T.useState)(()=>{let e=sessionStorage.getItem("apiKeySource");if(e)try{return JSON.parse(e)}catch(e){console.error("Error parsing apiKeySource from sessionStorage",e)}return B?"custom":"session"}),[eb,ej]=(0,T.useState)(()=>sessionStorage.getItem("apiKey")||""),[eN,eS]=(0,T.useState)(()=>sessionStorage.getItem("customProxyBaseUrl")||""),[e_,eP]=(0,T.useState)(""),[eE,eZ]=(0,T.useState)(()=>{try{let e=sessionStorage.getItem("chatHistory");return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing chatHistory from sessionStorage",e),[]}}),[eO,eR]=(0,T.useState)(void 0),[eK,eD]=(0,T.useState)(!1),[eB,ez]=(0,T.useState)([]),[eq,eJ]=(0,T.useState)([]),[eW,eV]=(0,T.useState)(void 0),eQ=(0,T.useRef)(null),[e2,e3]=(0,T.useState)(()=>sessionStorage.getItem("endpointType")||eA.KP.CHAT),[e5,ts]=(0,T.useState)(!1),ta=(0,T.useRef)(null),[tr,tl]=(0,T.useState)(()=>{let e=sessionStorage.getItem("selectedTags");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedTags from sessionStorage",e),[]}}),[to,tn]=(0,T.useState)(()=>{let e=sessionStorage.getItem("selectedVoice");if(!e)return"alloy";try{return JSON.parse(e)}catch(t){return e}}),[ti,tc]=(0,T.useState)(()=>{let e=sessionStorage.getItem("selectedVectorStores");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedVectorStores from sessionStorage",e),[]}}),[td,tm]=(0,T.useState)(()=>{let e=sessionStorage.getItem("selectedGuardrails");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedGuardrails from sessionStorage",e),[]}}),[tu,tp]=(0,T.useState)(()=>{let e=sessionStorage.getItem("selectedPolicies");try{return e?JSON.parse(e):[]}catch(e){return console.error("Error parsing selectedPolicies from sessionStorage",e),[]}}),[tx,tg]=(0,T.useState)(()=>sessionStorage.getItem("messageTraceId")||null),[th,tf]=(0,T.useState)(()=>sessionStorage.getItem("responsesSessionId")||null),[tv,ty]=(0,T.useState)(()=>{let e=sessionStorage.getItem("useApiSessionManagement");return!e||JSON.parse(e)}),[tb,tj]=(0,T.useState)([]),[tN,tw]=(0,T.useState)([]),[tS,t_]=(0,T.useState)(null),[tP,tC]=(0,T.useState)(null),[tk,tA]=(0,T.useState)(null),[tE,tI]=(0,T.useState)(null),[tZ,tT]=(0,T.useState)(null),[tL,tM]=(0,T.useState)(!1),[tO,tR]=(0,T.useState)(""),[tK,tU]=(0,T.useState)("openai"),[tD,tB]=(0,T.useState)([]),[tz,tF]=(0,T.useState)(1),[tH,tG]=(0,T.useState)(2048),[tq,tJ]=(0,T.useState)(!1),tW=function(){let[e,t]=(0,T.useState)(()=>{let e=sessionStorage.getItem("codeInterpreterEnabled");return!!e&&JSON.parse(e)}),[s,a]=(0,T.useState)(null),r=(0,T.useCallback)(e=>{t(e),sessionStorage.setItem("codeInterpreterEnabled",JSON.stringify(e))},[]),l=(0,T.useCallback)(()=>{a(null)},[]),o=(0,T.useCallback)(()=>{r(!e)},[e,r]);return{enabled:e,result:s,setEnabled:r,setResult:a,clearResult:l,toggle:o}}(),tV=(0,T.useRef)(null),tY=async()=>{let e="session"===ev?t:eb;if(e){et(!0);try{let t=await (0,V.fetchMCPServers)(e);H(Array.isArray(t)?t:t.data||[])}catch(e){console.error("Error fetching MCP servers:",e)}finally{et(!1)}}},tX=async e=>{let s="session"===ev?t:eb;if(s&&!em[e])try{let t=await (0,V.listMCPTools)(s,e);eu(s=>({...s,[e]:t.tools||[]}))}catch(t){console.error("Error fetching tools for server ".concat(e,":"),t)}};(0,T.useEffect)(()=>{tL&&tR((0,eH.L)({apiKeySource:ev,accessToken:t,apiKey:eb,inputMessage:e_,chatHistory:eE,selectedTags:tr,selectedVectorStores:ti,selectedGuardrails:td,selectedPolicies:tu,selectedMCPServers:G,mcpServers:F,mcpServerToolRestrictions:eh,endpointType:e2,selectedModel:eO,selectedSdk:tK,selectedVoice:to,proxySettings:z}))},[tL,tK,ev,t,eb,e_,eE,tr,ti,td,tu,G,F,eh,e2,eO,z]),(0,T.useEffect)(()=>{let e=setTimeout(()=>{sessionStorage.setItem("chatHistory",JSON.stringify(eE))},500);return()=>{clearTimeout(e)}},[eE]),(0,T.useEffect)(()=>{sessionStorage.setItem("apiKeySource",JSON.stringify(ev)),sessionStorage.setItem("apiKey",eb),sessionStorage.setItem("endpointType",e2),sessionStorage.setItem("selectedTags",JSON.stringify(tr)),sessionStorage.setItem("selectedVectorStores",JSON.stringify(ti)),sessionStorage.setItem("selectedGuardrails",JSON.stringify(td)),sessionStorage.setItem("selectedPolicies",JSON.stringify(tu)),sessionStorage.setItem("selectedMCPServers",JSON.stringify(G)),sessionStorage.setItem("mcpServerToolRestrictions",JSON.stringify(eh)),sessionStorage.setItem("selectedVoice",to),sessionStorage.removeItem("selectedMCPTools"),eO?sessionStorage.setItem("selectedModel",eO):sessionStorage.removeItem("selectedModel"),tx?sessionStorage.setItem("messageTraceId",tx):sessionStorage.removeItem("messageTraceId"),th?sessionStorage.setItem("responsesSessionId",th):sessionStorage.removeItem("responsesSessionId"),sessionStorage.setItem("useApiSessionManagement",JSON.stringify(tv))},[ev,eb,eO,e2,tr,ti,td,tu,tx,th,tv,G,eh,to]),(0,T.useEffect)(()=>{let e="session"===ev?t:eb;if(!e||!s||!S||!_){console.log("userApiKey or token or userRole or userID is missing = ",e,s,S,_);return}(async()=>{try{if(!e){console.log("userApiKey is missing");return}let t=await (0,en.p)(e);console.log("Fetched models:",t),ez(t);let s=t.some(e=>e.model_group===eO);t.length&&s||eR(void 0)}catch(e){console.error("Error fetching model info:",e)}})(),tY()},[t,_,S,ev,eb,s]),(0,T.useEffect)(()=>{e2!==eA.KP.MCP||1!==G.length||"__all__"===G[0]||em[G[0]]||tX(G[0])},[e2,G,em]),(0,T.useEffect)(()=>{let e="session"===ev?t:eb;e&&e2===eA.KP.A2A_AGENTS&&(async()=>{try{let t=await (0,eo.o)(e,eN||void 0);eJ(t),eW&&!t.some(e=>e.agent_name===eW)&&eV(void 0)}catch(e){console.error("Error fetching agents:",e)}})()},[t,ev,eb,e2,eN,eW]),(0,T.useEffect)(()=>{tV.current&&setTimeout(()=>{var e;null===(e=tV.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})},100)},[eE]);let t$=(e,t,s)=>{console.log("updateTextUI called with:",e,t,s),eZ(a=>{let r=a[a.length-1];if(!r||r.role!==e||r.isImage||r.isAudio)return[...a,{role:e,content:t,model:s}];{var l;let e={...r,content:r.content+t,model:null!==(l=r.model)&&void 0!==l?l:s};return[...a.slice(0,-1),e]}})},tQ=e=>{eZ(t=>{let s=t[t.length-1];return!s||"assistant"!==s.role||s.isImage||s.isAudio?t.length>0&&"user"===t[t.length-1].role?[...t,{role:"assistant",content:"",reasoningContent:e}]:t:[...t.slice(0,t.length-1),{...s,reasoningContent:(s.reasoningContent||"")+e}]})},t0=e=>{console.log("updateTimingData called with:",e),eZ(t=>{let s=t[t.length-1];if(console.log("Current last message:",s),s&&"assistant"===s.role){console.log("Updating assistant message with timeToFirstToken:",e);let a=[...t.slice(0,t.length-1),{...s,timeToFirstToken:e}];return console.log("Updated chat history:",a),a}return s&&"user"===s.role?(console.log("Creating new assistant message with timeToFirstToken:",e),[...t,{role:"assistant",content:"",timeToFirstToken:e}]):(console.log("No appropriate message found to update timing"),t)})},t1=(e,t)=>{console.log("Received usage data:",e),eZ(s=>{let a=s[s.length-1];if(a&&"assistant"===a.role){console.log("Updating message with usage data:",e);let r={...a,usage:e,toolName:t};return console.log("Updated message:",r),[...s.slice(0,s.length-1),r]}return s})},t2=e=>{console.log("Received A2A metadata:",e),eZ(t=>{let s=t[t.length-1];if(s&&"assistant"===s.role){let a={...s,a2aMetadata:e};return[...t.slice(0,t.length-1),a]}return t})},t4=e=>{eZ(t=>{let s=t[t.length-1];return s&&"assistant"===s.role?[...t.slice(0,t.length-1),{...s,totalLatency:e}]:t})},t3=e=>{console.log("Received search results:",e),eZ(t=>{let s=t[t.length-1];if(s&&"assistant"===s.role){console.log("Updating message with search results");let a={...s,searchResults:e};return[...t.slice(0,t.length-1),a]}return t})},t5=e=>{console.log("Received response ID for session management:",e),tv&&tf(e)},t6=e=>{console.log("ChatUI: Received MCP event:",e),tB(t=>{if(e.item_id&&t.some(t=>t.item_id===e.item_id&&t.type===e.type&&(t.sequence_number===e.sequence_number||void 0===t.sequence_number&&void 0===e.sequence_number)))return console.log("ChatUI: Duplicate MCP event, skipping"),t;let s=[...t,e];return console.log("ChatUI: Updated MCP events:",s),s})},t7=(e,t)=>{eZ(s=>[...s,{role:"assistant",content:e,model:t,isImage:!0}])},t8=(e,t)=>{eZ(s=>[...s,{role:"assistant",content:(0,K.aS)(e,100),model:t,isEmbeddings:!0}])},t9=(e,t)=>{eZ(s=>[...s,{role:"assistant",content:e,model:t,isAudio:!0}])},se=(e,t)=>{eZ(s=>{let a=s[s.length-1];if(!a||"assistant"!==a.role||a.isImage||a.isAudio)return[...s,{role:"assistant",content:"",model:t,image:{url:e,detail:"auto"}}];{var r;let l={...a,image:{url:e,detail:"auto"},model:null!==(r=a.model)&&void 0!==r?r:t};return[...s.slice(0,-1),l]}})},st=e=>{tj(t=>[...t,e]);let t=URL.createObjectURL(e);return tw(e=>[...e,t]),!1},ss=e=>{tN[e]&&URL.revokeObjectURL(tN[e]),tj(t=>t.filter((t,s)=>s!==e)),tw(t=>t.filter((t,s)=>s!==e))},sa=()=>{tN.forEach(e=>{URL.revokeObjectURL(e)}),tj([]),tw([])},sr=()=>{tP&&URL.revokeObjectURL(tP),t_(null),tC(null)},sl=()=>{tE&&URL.revokeObjectURL(tE),tA(null),tI(null)},so=()=>{tT(null)},sn=async()=>{var e,a,r;let l;if(""===e_.trim()&&e2!==eA.KP.TRANSCRIPTION&&e2!==eA.KP.MCP)return;if(e2===eA.KP.IMAGE_EDITS&&0===tb.length){W.ZP.fromBackend("Please upload at least one image for editing");return}if(e2===eA.KP.TRANSCRIPTION&&!tZ){W.ZP.fromBackend("Please upload an audio file for transcription");return}if(e2===eA.KP.A2A_AGENTS&&!eW){W.ZP.fromBackend("Please select an agent to send a message");return}let o={};if(e2===eA.KP.MCP){if(!(1===G.length&&"__all__"!==G[0]?G[0]:null)){W.ZP.fromBackend("Please select an MCP server to test");return}if(!ep){W.ZP.fromBackend("Please select an MCP tool to call");return}if(!(em[G[0]]||[]).find(e=>e.name===ep)){W.ZP.fromBackend("Please wait for tool schema to load");return}try{o=null!==(a=await (null===(e=eg.current)||void 0===e?void 0:e.getSubmitValues()))&&void 0!==a?a:{}}catch(e){W.ZP.fromBackend(e instanceof Error?e.message:"Please fill in all required parameters");return}}if([eA.KP.CHAT,eA.KP.IMAGE,eA.KP.SPEECH,eA.KP.IMAGE_EDITS,eA.KP.RESPONSES,eA.KP.ANTHROPIC_MESSAGES,eA.KP.EMBEDDINGS,eA.KP.TRANSCRIPTION].includes(e2)&&!eO){W.ZP.fromBackend("Please select a model before sending a request");return}if(!s||!S||!_)return;let n="session"===ev?t:eb;if(!n){W.ZP.fromBackend("Please provide a Virtual Key or select Current UI Session");return}ta.current=new AbortController;let i=ta.current.signal;if(e2===eA.KP.RESPONSES&&tS)try{l=await e0(e_,tS)}catch(e){W.ZP.fromBackend("Failed to process image. Please try again.");return}else if(e2===eA.KP.CHAT&&tk)try{l=await (0,eM.Sn)(e_,tk)}catch(e){W.ZP.fromBackend("Failed to process image. Please try again.");return}else l={role:"user",content:e_};let c=tx||(0,R.Z)();tx||tg(c),eZ([...eE,e2===eA.KP.RESPONSES&&tS?e1(e_,!0,tP||void 0,tS.name):e2===eA.KP.CHAT&&tk?(0,eM.Hk)(e_,!0,tE||void 0,tk.name):e2===eA.KP.TRANSCRIPTION&&tZ?e1(e_?"\uD83C\uDFB5 Audio file: ".concat(tZ.name,"\nPrompt: ").concat(e_):"\uD83C\uDFB5 Audio file: ".concat(tZ.name),!1):e2===eA.KP.MCP&&ep?e1("\uD83D\uDD27 MCP Tool: ".concat(ep,"\nArguments: ").concat(JSON.stringify(o,null,2)),!1):e1(e_,!1)]),tB([]),tW.clearResult(),ts(!0);try{if(eO){if(e2===eA.KP.CHAT){let e=[...eE.filter(e=>!e.isImage&&!e.isAudio).map(e=>{let{role:t,content:s}=e;return{role:t,content:"string"==typeof s?s:""}}),l];await (0,er.n)(e,(e,t)=>t$("assistant",e,t),eO,n,tr,i,tQ,t0,t1,c,ti.length>0?ti:void 0,td.length>0?td:void 0,tu.length>0?tu:void 0,G,se,t3,tq?tz:void 0,tq?tH:void 0,t4,eN||void 0,F,eh,t6)}else if(e2===eA.KP.IMAGE)await ec(e_,(e,t)=>t7(e,t),eO,n,tr,i,eN||void 0);else if(e2===eA.KP.SPEECH)await es(e_,to,(e,t)=>t9(e,t),eO||"",n,tr,i,void 0,void 0,eN||void 0);else if(e2===eA.KP.IMAGE_EDITS)tb.length>0&&await ei(1===tb.length?tb[0]:tb,e_,(e,t)=>t7(e,t),eO,n,tr,i,eN||void 0);else if(e2===eA.KP.RESPONSES){let e;e=tv&&th?[l]:[...eE.filter(e=>!e.isImage&&!e.isAudio).map(e=>{let{role:t,content:s}=e;return{role:t,content:s}}),l],await ed(e,(e,t,s)=>t$(e,t,s),eO,n,tr,i,tQ,t0,t1,c,ti.length>0?ti:void 0,td.length>0?td:void 0,tu.length>0?tu:void 0,G,tv?th:null,t5,t6,tW.enabled,tW.setResult,eN||void 0,F,eh)}else if(e2===eA.KP.ANTHROPIC_MESSAGES){let e=[...eE.filter(e=>!e.isImage&&!e.isAudio).map(e=>{let{role:t,content:s}=e;return{role:t,content:s}}),l];await ee(e,(e,t,s)=>t$(e,t,s),eO,n,tr,i,tQ,t0,t1,c,ti.length>0?ti:void 0,td.length>0?td:void 0,tu.length>0?tu:void 0,G,eN||void 0)}else e2===eA.KP.EMBEDDINGS?await el(e_,(e,t)=>t8(e,t),eO,n,tr,eN||void 0):e2===eA.KP.TRANSCRIPTION&&tZ&&await ea(tZ,(e,t)=>t$("assistant",e,t),eO,n,tr,i,void 0,void 0,void 0,void 0,eN||void 0)}if(e2===eA.KP.MCP){let e=1===G.length&&"__all__"!==G[0]?G[0]:null;if(e&&ep){let t=await (0,V.callMCPTool)(n,e,ep,o,td.length>0?{guardrails:td}:void 0),s=(null==t?void 0:null===(r=t.content)||void 0===r?void 0:r.length)>0?JSON.stringify(t.content.map(e=>"text"===e.type?e.text:e).filter(Boolean),null,2):JSON.stringify(t,null,2);t$("assistant",s||"Tool executed successfully.")}}e2===eA.KP.A2A_AGENTS&&eW&&await (0,$.O)(eW,e_,(e,t)=>t$("assistant",e,t),n,i,t0,t4,t2,eN||void 0,td.length>0?td:void 0)}catch(e){i.aborted?console.log("Request was cancelled"):(console.error("Error fetching response",e),t$("assistant","Error fetching response:"+e))}finally{ts(!1),ta.current=null,e2===eA.KP.IMAGE_EDITS&&sa(),e2===eA.KP.RESPONSES&&tS&&sr(),e2===eA.KP.CHAT&&tk&&sl(),e2===eA.KP.TRANSCRIPTION&&tZ&&so()}eP("")};if(S&&"Admin Viewer"===S){let{Title:e,Paragraph:t}=P.default;return(0,a.jsxs)("div",{children:[(0,a.jsx)(e,{level:1,children:"Access Denied"}),(0,a.jsx)(t,{children:"Ask your proxy admin for access to test models"})]})}let si=(0,a.jsx)(r.Z,{style:{fontSize:24},spin:!0});return(0,a.jsxs)("div",{className:"w-full p-4 pb-0 bg-white",children:[(0,a.jsx)(w.Zb,{className:"w-full rounded-xl shadow-md overflow-hidden",children:(0,a.jsxs)("div",{className:"flex h-[80vh] w-full gap-4",children:[(0,a.jsxs)("div",{className:"w-1/4 p-4 bg-gray-50 overflow-y-auto",children:[(0,a.jsx)(w.Dx,{className:"text-xl font-semibold mb-6 mt-2",children:"Configurations"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(l.Z,{className:"mr-2"})," Virtual Key Source"]}),(0,a.jsx)(C.default,{disabled:B,value:ev,style:{width:"100%"},onChange:e=>{ey(e)},options:[{value:"session",label:"Current UI Session"},{value:"custom",label:"Virtual Key"}],className:"rounded-md"}),"custom"===ev&&(0,a.jsx)(w.oi,{className:"mt-2",placeholder:"Enter custom Virtual Key",type:"password",onValueChange:ej,value:eb,icon:l.Z})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)(w.xv,{className:"font-medium block text-gray-700 flex items-center",children:[(0,a.jsx)(o.Z,{className:"mr-2"})," Custom Proxy Base URL"]}),(null==z?void 0:z.LITELLM_UI_API_DOC_BASE_URL)&&!eN&&(0,a.jsx)(k.ZP,{type:"link",size:"small",icon:(0,a.jsx)(n.Z,{}),onClick:()=>{eS(z.LITELLM_UI_API_DOC_BASE_URL||""),sessionStorage.setItem("customProxyBaseUrl",z.LITELLM_UI_API_DOC_BASE_URL||"")},className:"text-gray-500 hover:text-gray-700",children:"Fill"}),eN&&(0,a.jsx)(k.ZP,{type:"link",size:"small",icon:(0,a.jsx)(i.Z,{}),onClick:()=>{eS(""),sessionStorage.removeItem("customProxyBaseUrl")},className:"text-gray-500 hover:text-gray-700",children:"Clear"})]}),(0,a.jsx)(w.oi,{placeholder:"Optional: Enter custom proxy URL (e.g., http://localhost:5000)",onValueChange:e=>{eS(e),sessionStorage.setItem("customProxyBaseUrl",e)},value:eN,icon:c.Z}),eN&&(0,a.jsxs)(w.xv,{className:"text-xs text-gray-500 mt-1",children:["API calls will be sent to: ",eN]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(c.Z,{className:"mr-2"})," Endpoint Type"]}),(0,a.jsx)(eG,{endpointType:e2,onEndpointChange:e=>{e3(e),eR(void 0),eV(void 0),eD(!1),ex(void 0),e===eA.KP.MCP&&q(e=>1===e.length&&"__all__"!==e[0]?e:[]);try{sessionStorage.removeItem("selectedModel"),sessionStorage.removeItem("selectedAgent")}catch(e){}},className:"mb-4"}),e2===eA.KP.SPEECH&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)(w.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(d.Z,{className:"mr-2"}),"Voice"]}),(0,a.jsx)(C.default,{value:to,onChange:e=>{tn(e),sessionStorage.setItem("selectedVoice",e)},style:{width:"100%"},className:"rounded-md",options:eI})]}),(0,a.jsx)(e8,{endpointType:e2,responsesSessionId:th,useApiSessionManagement:tv,onToggleSessionManagement:e=>{ty(e),e||tf(null)}})]}),e2!==eA.KP.A2A_AGENTS&&e2!==eA.KP.MCP&&(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"mr-2"})," Select Model"]}),(()=>{if(!eO||"custom"===eO)return!1;let e=eB.find(e=>e.model_group===eO);return!!e&&(!e.mode||"chat"===e.mode)})()?(0,a.jsx)(A.Z,{content:(0,a.jsx)(eC,{temperature:tz,maxTokens:tH,useAdvancedParams:tq,onTemperatureChange:tF,onMaxTokensChange:tG,onUseAdvancedParamsChange:tJ}),title:"Model Settings",trigger:"click",placement:"right",children:(0,a.jsx)(k.ZP,{type:"text",size:"small",icon:(0,a.jsx)(o.Z,{}),className:"text-gray-500 hover:text-gray-700"})}):(0,a.jsx)(E.Z,{title:"Advanced parameters are only supported for chat models currently",children:(0,a.jsx)(k.ZP,{type:"text",size:"small",icon:(0,a.jsx)(o.Z,{}),className:"text-gray-300 cursor-not-allowed",disabled:!0})})]}),(0,a.jsx)(C.default,{value:eO,placeholder:"Select a Model",onChange:e=>{console.log("selected ".concat(e)),eR(e),eD("custom"===e)},options:[{value:"custom",label:"Enter custom model",key:"custom"},...Array.from(new Set(eB.filter(e=>{if(!e.mode)return!0;let t=(0,eA.vf)(e.mode);return e2===eA.KP.RESPONSES||e2===eA.KP.ANTHROPIC_MESSAGES?t===e2||t===eA.KP.CHAT:e2===eA.KP.IMAGE_EDITS?t===e2||t===eA.KP.IMAGE:t===e2}).map(e=>e.model_group))).map((e,t)=>({value:e,label:e,key:t}))],style:{width:"100%"},showSearch:!0,className:"rounded-md"}),eK&&(0,a.jsx)(w.oi,{className:"mt-2",placeholder:"Enter custom model name",onValueChange:e=>{eQ.current&&clearTimeout(eQ.current),eQ.current=setTimeout(()=>{eR(e)},500)}})]}),e2===eA.KP.A2A_AGENTS&&(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(m.Z,{className:"mr-2"})," Select Agent"]}),(0,a.jsx)(C.default,{value:eW,placeholder:"Select an Agent",onChange:e=>eV(e),options:eq.map(e=>({value:e.agent_name,label:e.agent_name||e.agent_id,key:e.agent_id})),style:{width:"100%"},showSearch:!0,className:"rounded-md",optionLabelProp:"label",children:eq.map(e=>{var t;return(0,a.jsx)(C.default.Option,{value:e.agent_name,label:e.agent_name||e.agent_id,children:(0,a.jsxs)("div",{className:"flex flex-col py-1",children:[(0,a.jsx)("span",{className:"font-medium",children:e.agent_name||e.agent_id}),(null===(t=e.agent_card_params)||void 0===t?void 0:t.description)&&(0,a.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.agent_card_params.description})]})},e.agent_id)})}),0===eq.length&&(0,a.jsx)(w.xv,{className:"text-xs text-gray-500 mt-2 block",children:"No agents found. Create agents via /v1/agents endpoint."})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(u.Z,{className:"mr-2"})," Tags"]}),(0,a.jsx)(Y.Z,{value:tr,onChange:tl,className:"mb-4",accessToken:t||""})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(p.Z,{className:"mr-2"}),e2===eA.KP.MCP?"MCP Server":"MCP Servers",(0,a.jsx)(E.Z,{className:"ml-1",title:e2===eA.KP.MCP?"Select an MCP server to test tools directly.":"Select MCP servers to use in your conversation.",children:(0,a.jsx)(x.Z,{})})]}),(0,a.jsxs)(C.default,{mode:e2===eA.KP.MCP?void 0:"multiple",style:{width:"100%"},placeholder:e2===eA.KP.MCP?"Select MCP server":"Select MCP servers",value:e2===eA.KP.MCP?"__all__"!==G[0]&&1===G.length?G[0]:void 0:G,onChange:e=>{e2===eA.KP.MCP?(q(e?[e]:[]),ex(void 0),e&&!em[e]&&tX(e)):e.includes("__all__")?(q(["__all__"]),ef({})):(q(e),ef(t=>{let s={...t};return Object.keys(s).forEach(t=>{e.includes(t)||delete s[t]}),s}),e.forEach(e=>{em[e]||tX(e)}))},loading:Q,className:"mb-2",allowClear:!0,optionLabelProp:"label",disabled:!tt.has(e2),maxTagCount:e2===eA.KP.MCP?1:"responsive",children:[e2!==eA.KP.MCP&&(0,a.jsx)(C.default.Option,{value:"__all__",label:"All MCP Servers",children:(0,a.jsxs)("div",{className:"flex flex-col py-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"All MCP Servers"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"Use all available MCP servers"})]})},"__all__"),F.map(e=>(0,a.jsx)(C.default.Option,{value:e.server_id,label:e.alias||e.server_name||e.server_id,disabled:e2!==eA.KP.MCP&&G.includes("__all__"),children:(0,a.jsxs)("div",{className:"flex flex-col py-1",children:[(0,a.jsx)("span",{className:"font-medium",children:e.alias||e.server_name||e.server_id}),e.description&&(0,a.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:e.description})]})},e.server_id))]}),e2===eA.KP.MCP&&1===G.length&&"__all__"!==G[0]&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)(w.xv,{className:"text-xs text-gray-600 mb-1 block",children:"Select Tool"}),(0,a.jsx)(C.default,{style:{width:"100%"},placeholder:"Select a tool to call",value:ep,onChange:e=>ex(e),options:(em[G[0]]||[]).map(e=>({value:e.name,label:e.name})),allowClear:!0,className:"rounded-md"})]}),G.length>0&&!G.includes("__all__")&&e2!==eA.KP.MCP&&tt.has(e2)&&(0,a.jsx)("div",{className:"mt-3 space-y-2",children:G.map(e=>{let t=F.find(t=>t.server_id===e),s=em[e]||[];return 0===s.length?null:(0,a.jsxs)("div",{className:"border rounded p-2",children:[(0,a.jsxs)(w.xv,{className:"text-xs text-gray-600 mb-1",children:["Limit tools for ",(null==t?void 0:t.alias)||(null==t?void 0:t.server_name)||e,":"]}),(0,a.jsx)(C.default,{mode:"multiple",size:"small",style:{width:"100%"},placeholder:"All tools (default)",value:eh[e]||[],onChange:t=>{ef(s=>({...s,[e]:t}))},options:s.map(e=>({value:e.name,label:e.name})),maxTagCount:2})]},e)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(g.Z,{className:"mr-2"})," Vector Store",(0,a.jsx)(E.Z,{className:"ml-1",title:(0,a.jsxs)("span",{children:["Select vector store(s) to use for this LLM API call. You can set up your vector store"," ",(0,a.jsx)("a",{href:"?page=vector-stores",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,a.jsx)(x.Z,{})})]}),(0,a.jsx)(X.Z,{value:ti,onChange:tc,className:"mb-4",accessToken:t||""})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(h.Z,{className:"mr-2"})," Guardrails",(0,a.jsx)(E.Z,{className:"ml-1",title:(0,a.jsxs)("span",{children:["Select guardrail(s) to use for this LLM API call. You can set up your guardrails"," ",(0,a.jsx)("a",{href:"?page=guardrails",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,a.jsx)(x.Z,{})})]}),(0,a.jsx)(U.Z,{value:td,onChange:tm,className:"mb-4",accessToken:t||""})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(w.xv,{className:"font-medium block mb-2 text-gray-700 flex items-center",children:[(0,a.jsx)(h.Z,{className:"mr-2"})," Policies",(0,a.jsx)(E.Z,{className:"ml-1",title:(0,a.jsxs)("span",{children:["Select policy/policies to apply to this LLM API call. Policies define which guardrails are applied based on conditions. You can set up your policies"," ",(0,a.jsx)("a",{href:"?page=policies",style:{color:"#1890ff"},children:"here"}),"."]}),children:(0,a.jsx)(x.Z,{})})]}),(0,a.jsx)(D.Z,{value:tu,onChange:tp,className:"mb-4",accessToken:t||""})]}),e2===eA.KP.RESPONSES&&(0,a.jsx)("div",{children:(0,a.jsx)(eF,{accessToken:"session"===ev?t||"":eb,enabled:tW.enabled,onEnabledChange:tW.setEnabled,selectedContainerId:null,onContainerChange:()=>{},selectedModel:eO||""})})]})]}),(0,a.jsxs)("div",{className:"w-3/4 flex flex-col bg-white",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsx)(w.Dx,{className:"text-xl font-semibold mb-0",children:"Test Key"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(w.zx,{onClick:()=>{eE.forEach(e=>{e.isAudio&&"string"==typeof e.content&&URL.revokeObjectURL(e.content)}),eZ([]),tg(null),tf(null),tB([]),sa(),sr(),sl(),so(),sessionStorage.removeItem("chatHistory"),sessionStorage.removeItem("messageTraceId"),sessionStorage.removeItem("responsesSessionId"),W.ZP.success("Chat history cleared.")},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:i.Z,children:"Clear Chat"}),(0,a.jsx)(w.zx,{onClick:()=>tM(!0),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 border-gray-300",icon:f.Z,children:"Get Code"})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-4 pb-0",children:[0===eE.length&&(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,a.jsx)(m.Z,{style:{fontSize:"48px",marginBottom:"16px"}}),(0,a.jsx)(w.xv,{children:"Start a conversation, generate an image, or handle audio"})]}),eE.map((e,s)=>(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"mb-4 ".concat("user"===e.role?"text-right":"text-left"),children:(0,a.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"user"===e.role?"#f0f8ff":"#ffffff",border:"user"===e.role?"1px solid #e6f0fa":"1px solid #f0f0f0",textAlign:"left"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"user"===e.role?"#e6f0fa":"#f5f5f5"},children:"user"===e.role?(0,a.jsx)(v.Z,{style:{fontSize:"12px",color:"#2563eb"}}):(0,a.jsx)(m.Z,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,a.jsx)("strong",{className:"text-sm capitalize",children:e.role}),"assistant"===e.role&&e.model&&(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-gray-100 text-gray-600 font-normal",children:e.model})]}),e.reasoningContent&&(0,a.jsx)(eX.Z,{reasoningContent:e.reasoningContent}),"assistant"===e.role&&s===eE.length-1&&tD.length>0&&(e2===eA.KP.RESPONSES||e2===eA.KP.CHAT)&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(eY,{events:tD})}),"assistant"===e.role&&e.searchResults&&(0,a.jsx)(e7.J,{searchResults:e.searchResults}),"assistant"===e.role&&s===eE.length-1&&tW.result&&e2===eA.KP.RESPONSES&&(0,a.jsx)(eU,{code:tW.result.code,containerId:tW.result.containerId,annotations:tW.result.annotations,accessToken:"session"===ev?t||"":eb}),(0,a.jsxs)("div",{className:"whitespace-pre-wrap break-words max-w-full message-content",style:{wordWrap:"break-word",overflowWrap:"break-word",wordBreak:"break-word",hyphens:"auto"},children:[e.isImage?(0,a.jsx)("img",{src:"string"==typeof e.content?e.content:"",alt:"Generated image",className:"max-w-full rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"500px"}}):e.isAudio?(0,a.jsx)(ek,{message:e}):(0,a.jsxs)(a.Fragment,{children:[e2===eA.KP.RESPONSES&&(0,a.jsx)(e4,{message:e}),e2===eA.KP.CHAT&&(0,a.jsx)(eT.Z,{message:e}),(0,a.jsx)(L.UG,{components:{code(e){let{node:t,inline:s,className:r,children:l,...o}=e,n=/language-(\w+)/.exec(r||"");return!s&&n?(0,a.jsx)(M.Z,{style:O.Z,language:n[1],PreTag:"div",className:"rounded-md my-2",wrapLines:!0,wrapLongLines:!0,...o,children:String(l).replace(/\n$/,"")}):(0,a.jsx)("code",{className:"".concat(r," px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono"),style:{wordBreak:"break-word"},...o,children:l})},pre:e=>{let{node:t,...s}=e;return(0,a.jsx)("pre",{style:{overflowX:"auto",maxWidth:"100%"},...s})}},children:"string"==typeof e.content?e.content:""}),e.image&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("img",{src:e.image.url,alt:"Generated image",className:"max-w-full rounded-md border border-gray-200 shadow-sm",style:{maxHeight:"500px"}})})]}),"assistant"===e.role&&(e.timeToFirstToken||e.totalLatency||e.usage)&&!e.a2aMetadata&&(0,a.jsx)(e$.Z,{timeToFirstToken:e.timeToFirstToken,totalLatency:e.totalLatency,usage:e.usage,toolName:e.toolName}),"assistant"===e.role&&e.a2aMetadata&&(0,a.jsx)(ew,{a2aMetadata:e.a2aMetadata,timeToFirstToken:e.timeToFirstToken,totalLatency:e.totalLatency})]})]})})},s)),e5&&tD.length>0&&(e2===eA.KP.RESPONSES||e2===eA.KP.CHAT)&&eE.length>0&&"user"===eE[eE.length-1].role&&(0,a.jsx)("div",{className:"text-left mb-4",children:(0,a.jsxs)("div",{className:"inline-block max-w-[80%] rounded-lg shadow-sm p-3.5 px-4",style:{backgroundColor:"#ffffff",border:"1px solid #f0f0f0",textAlign:"left"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1.5",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full mr-1",style:{backgroundColor:"#f5f5f5"},children:(0,a.jsx)(m.Z,{style:{fontSize:"12px",color:"#4b5563"}})}),(0,a.jsx)("strong",{className:"text-sm capitalize",children:"Assistant"})]}),(0,a.jsx)(eY,{events:tD})]})}),e5&&(0,a.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,a.jsx)(I.Z,{indicator:si})}),(0,a.jsx)("div",{ref:tV,style:{height:"1px"}})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[e2===eA.KP.IMAGE_EDITS&&(0,a.jsx)("div",{className:"mb-4",children:0===tb.length?(0,a.jsxs)(te,{beforeUpload:st,accept:"image/*",showUploadList:!1,children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(y.Z,{style:{fontSize:"24px",color:"#666"}})}),(0,a.jsx)("p",{className:"ant-upload-text text-sm",children:"Click or drag images to upload"}),(0,a.jsx)("p",{className:"ant-upload-hint text-xs text-gray-500",children:"Support for PNG, JPG, JPEG formats. Multiple images supported."})]}):(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[tb.map((e,t)=>(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("img",{src:tN[t]||"",alt:"Upload preview ".concat(t+1),className:"max-w-32 max-h-32 rounded-md border border-gray-200 object-cover"}),(0,a.jsx)("button",{className:"absolute top-1 right-1 bg-white shadow-sm border border-gray-200 rounded px-1 py-1 text-red-500 hover:bg-red-50 text-xs",onClick:()=>ss(t),children:(0,a.jsx)(b.Z,{})})]},t)),(0,a.jsxs)("div",{className:"flex items-center justify-center w-32 h-32 border-2 border-dashed border-gray-300 rounded-md hover:border-gray-400 cursor-pointer",onClick:()=>{var e;return null===(e=document.getElementById("additional-image-upload"))||void 0===e?void 0:e.click()},children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(y.Z,{style:{fontSize:"24px",color:"#666"}}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Add more"})]}),(0,a.jsx)("input",{id:"additional-image-upload",type:"file",accept:"image/*",multiple:!0,style:{display:"none"},onChange:e=>{Array.from(e.target.files||[]).forEach(e=>st(e))}})]})]})}),e2===eA.KP.TRANSCRIPTION&&(0,a.jsx)("div",{className:"mb-4",children:tZ?(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)(d.Z,{style:{fontSize:"20px",color:"#666"}}),(0,a.jsx)("span",{className:"text-sm font-medium",children:tZ.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(tZ.size/1024/1024).toFixed(2)," MB)"]})]}),(0,a.jsxs)("button",{className:"bg-white shadow-sm border border-gray-200 rounded px-2 py-1 text-red-500 hover:bg-red-50 text-xs",onClick:so,children:[(0,a.jsx)(b.Z,{})," Remove"]})]}):(0,a.jsxs)(te,{beforeUpload:e=>(tT(e),!1),accept:"audio/*,.mp3,.mp4,.mpeg,.mpga,.m4a,.wav,.webm",showUploadList:!1,children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(d.Z,{style:{fontSize:"24px",color:"#666"}})}),(0,a.jsx)("p",{className:"ant-upload-text text-sm",children:"Click or drag audio file to upload"}),(0,a.jsx)("p",{className:"ant-upload-hint text-xs text-gray-500",children:"Support for MP3, MP4, MPEG, MPGA, M4A, WAV, WEBM formats. Max file size: 25 MB."})]})}),e2===eA.KP.RESPONSES&&tS&&(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"relative inline-block",children:tS.name.toLowerCase().endsWith(".pdf")?(0,a.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,a.jsx)(j.Z,{style:{fontSize:"16px",color:"white"}})}):(0,a.jsx)("img",{src:tP||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:tS.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:tS.name.toLowerCase().endsWith(".pdf")?"PDF":"Image"})]}),(0,a.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:sr,children:(0,a.jsx)(b.Z,{style:{fontSize:"12px"}})})]})}),e2===eA.KP.CHAT&&tk&&(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"relative inline-block",children:tk.name.toLowerCase().endsWith(".pdf")?(0,a.jsx)("div",{className:"w-10 h-10 rounded-md bg-red-500 flex items-center justify-center",children:(0,a.jsx)(j.Z,{style:{fontSize:"16px",color:"white"}})}):(0,a.jsx)("img",{src:tE||"",alt:"Upload preview",className:"w-10 h-10 rounded-md border border-gray-200 object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:tk.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:tk.name.toLowerCase().endsWith(".pdf")?"PDF":"Image"})]}),(0,a.jsx)("button",{className:"flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full transition-colors",onClick:sl,children:(0,a.jsx)(b.Z,{style:{fontSize:"12px"}})})]})}),e2===eA.KP.RESPONSES&&tW.enabled&&(0,a.jsxs)("div",{className:"mb-2 space-y-2",children:[(0,a.jsxs)("div",{className:"px-3 py-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:e5?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{className:"text-blue-500",spin:!0}),(0,a.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:"Running Python code..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{className:"text-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:"Code Interpreter Active"})]})}),(0,a.jsx)("button",{className:"text-xs text-blue-500 hover:text-blue-700",onClick:()=>tW.setEnabled(!1),children:"Disable"})]}),!e5&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["Generate sample sales data CSV and create a chart","Create a PNG bar chart comparing AI gateway providers including LiteLLM","Generate a CSV of LLM pricing data and visualize it as a line chart"].map((e,t)=>(0,a.jsx)("button",{className:"text-xs px-3 py-1.5 bg-white border border-gray-200 rounded-full hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 transition-colors",onClick:()=>eP(e),children:e},t))})]}),0===eE.length&&!e5&&e2!==eA.KP.MCP&&(0,a.jsx)("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto",children:(e2===eA.KP.A2A_AGENTS?["What can you help me with?","Tell me about yourself","What tasks can you perform?"]:["Write me a poem","Explain quantum computing","Draft a polite email requesting a meeting"]).map(e=>(0,a.jsx)("button",{type:"button",className:"shrink-0 rounded-full border border-gray-200 px-3 py-1 text-xs font-medium text-gray-600 transition-colors hover:bg-blue-50 hover:border-blue-300 hover:text-blue-600 cursor-pointer",onClick:()=>eP(e),children:e},e))}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center flex-1 bg-white border border-gray-300 rounded-xl px-3 py-1 min-h-[44px]",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 mr-2 flex items-center gap-1",children:[e2===eA.KP.RESPONSES&&!tS&&(0,a.jsx)(e6,{responsesUploadedImage:tS,responsesImagePreviewUrl:tP,onImageUpload:e=>(t_(e),tC(URL.createObjectURL(e)),!1),onRemoveImage:sr}),e2===eA.KP.CHAT&&!tk&&(0,a.jsx)(eL.Z,{chatUploadedImage:tk,chatImagePreviewUrl:tE,onImageUpload:e=>(tA(e),tI(URL.createObjectURL(e)),!1),onRemoveImage:sl}),e2===eA.KP.RESPONSES&&(0,a.jsx)(E.Z,{title:tW.enabled?"Code Interpreter enabled (click to disable)":"Enable Code Interpreter",children:(0,a.jsx)("button",{className:"p-1.5 rounded-md transition-colors ".concat(tW.enabled?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600 hover:bg-gray-100"),onClick:()=>{tW.toggle(),tW.enabled||W.ZP.success("Code Interpreter enabled!")},children:(0,a.jsx)(f.Z,{style:{fontSize:"16px"}})})})]}),e2===eA.KP.MCP&&1===G.length&&"__all__"!==G[0]&&ep?(0,a.jsx)("div",{className:"flex-1 overflow-y-auto max-h-48 min-h-[44px] p-2 border border-gray-200 rounded-lg bg-gray-50/50",children:(()=>{let e=(em[G[0]]||[]).find(e=>e.name===ep);return e?(0,a.jsx)(J,{ref:eg,tool:e,className:"space-y-2"}):(0,a.jsx)("div",{className:"flex items-center justify-center h-10 text-sm text-gray-500",children:"Loading tool schema..."})})()}):(0,a.jsx)(e9,{value:e_,onChange:e=>eP(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),sn())},placeholder:e2===eA.KP.CHAT||e2===eA.KP.EMBEDDINGS||e2===eA.KP.RESPONSES||e2===eA.KP.ANTHROPIC_MESSAGES?"Type your message... (Shift+Enter for new line)":e2===eA.KP.A2A_AGENTS?"Send a message to the A2A agent...":e2===eA.KP.IMAGE_EDITS?"Describe how you want to edit the image...":e2===eA.KP.SPEECH?"Enter text to convert to speech...":e2===eA.KP.TRANSCRIPTION?"Optional: Add context or prompt for transcription...":"Describe the image you want to generate...",disabled:e5,className:"flex-1",autoSize:{minRows:1,maxRows:4},style:{resize:"none",border:"none",boxShadow:"none",background:"transparent",padding:"4px 0",fontSize:"14px",lineHeight:"20px"}}),(0,a.jsx)(w.zx,{onClick:sn,disabled:e5||(e2===eA.KP.MCP?!(1===G.length&&"__all__"!==G[0]&&ep):e2===eA.KP.TRANSCRIPTION?!tZ:!e_.trim()),className:"flex-shrink-0 ml-2 !w-8 !h-8 !min-w-8 !p-0 !rounded-full !bg-blue-600 hover:!bg-blue-700 disabled:!bg-gray-300 !border-none !text-white disabled:!text-gray-500 !flex !items-center !justify-center",children:(0,a.jsx)(N.Z,{style:{fontSize:"14px"}})})]}),e5&&(0,a.jsx)(w.zx,{onClick:()=>{ta.current&&(ta.current.abort(),ta.current=null,ts(!1),W.ZP.info("Request cancelled"))},className:"bg-red-50 hover:bg-red-100 text-red-600 border-red-200",icon:b.Z,children:"Cancel"})]})]})]})]})}),(0,a.jsxs)(Z.Z,{title:"Generated Code",visible:tL,onCancel:()=>tM(!1),footer:null,width:800,children:[(0,a.jsxs)("div",{className:"flex justify-between items-end my-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(w.xv,{className:"font-medium block mb-1 text-gray-700",children:"SDK Type"}),(0,a.jsx)(C.default,{value:tK,onChange:e=>tU(e),style:{width:150},options:[{value:"openai",label:"OpenAI SDK"},{value:"azure",label:"Azure SDK"}]})]}),(0,a.jsx)(k.ZP,{onClick:()=>{navigator.clipboard.writeText(tO),W.ZP.success("Copied to clipboard!")},children:"Copy to Clipboard"})]}),(0,a.jsx)(M.Z,{language:"python",style:O.Z,wrapLines:!0,wrapLongLines:!0,className:"rounded-md",customStyle:{maxHeight:"60vh",overflowY:"auto"},children:tO})]})]})}},94331:function(e,t,s){var a=s(57437),r=s(2265),l=s(5545),o=s(62831),n=s(17906),i=s(94263),c=s(83322),d=s(70464),m=s(77565);t.Z=e=>{let{reasoningContent:t}=e,[s,u]=(0,r.useState)(!0);return t?(0,a.jsxs)("div",{className:"reasoning-content mt-1 mb-2",children:[(0,a.jsxs)(l.ZP,{type:"text",className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:()=>u(!s),icon:(0,a.jsx)(c.Z,{}),children:[s?"Hide reasoning":"Show reasoning",s?(0,a.jsx)(d.Z,{className:"ml-1"}):(0,a.jsx)(m.Z,{className:"ml-1"})]}),s&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm text-gray-700",children:(0,a.jsx)(o.UG,{components:{code(e){let{node:t,inline:s,className:r,children:l,...o}=e,c=/language-(\w+)/.exec(r||"");return!s&&c?(0,a.jsx)(n.Z,{style:i.Z,language:c[1],PreTag:"div",className:"rounded-md my-2",...o,children:String(l).replace(/\n$/,"")}):(0,a.jsx)("code",{className:"".concat(r," px-1.5 py-0.5 rounded bg-gray-100 text-sm font-mono"),...o,children:l})}},children:t})})]}):null}},38398:function(e,t,s){var a=s(57437);s(2265);var r=s(99981),l=s(5540),o=s(71282),n=s(11741),i=s(83322),c=s(16601),d=s(62670),m=s(58630);t.Z=e=>{let{timeToFirstToken:t,totalLatency:s,usage:u,toolName:p}=e;return t||s||u?(0,a.jsxs)("div",{className:"response-metrics mt-2 pt-2 border-t border-gray-100 text-xs text-gray-500 flex flex-wrap gap-3",children:[void 0!==t&&(0,a.jsx)(r.Z,{title:"Time to first token",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l.Z,{className:"mr-1"}),(0,a.jsxs)("span",{children:["TTFT: ",(t/1e3).toFixed(2),"s"]})]})}),void 0!==s&&(0,a.jsx)(r.Z,{title:"Total latency",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l.Z,{className:"mr-1"}),(0,a.jsxs)("span",{children:["Total Latency: ",(s/1e3).toFixed(2),"s"]})]})}),(null==u?void 0:u.promptTokens)!==void 0&&(0,a.jsx)(r.Z,{title:"Prompt tokens",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"mr-1"}),(0,a.jsxs)("span",{children:["In: ",u.promptTokens]})]})}),(null==u?void 0:u.completionTokens)!==void 0&&(0,a.jsx)(r.Z,{title:"Completion tokens",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Z,{className:"mr-1"}),(0,a.jsxs)("span",{children:["Out: ",u.completionTokens]})]})}),(null==u?void 0:u.reasoningTokens)!==void 0&&(0,a.jsx)(r.Z,{title:"Reasoning tokens",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.Z,{className:"mr-1"}),(0,a.jsxs)("span",{children:["Reasoning: ",u.reasoningTokens]})]})}),(null==u?void 0:u.totalTokens)!==void 0&&(0,a.jsx)(r.Z,{title:"Total tokens",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"mr-1"}),(0,a.jsxs)("span",{children:["Total: ",u.totalTokens]})]})}),(null==u?void 0:u.cost)!==void 0&&(0,a.jsx)(r.Z,{title:"Cost",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"mr-1"}),(0,a.jsxs)("span",{children:["$",u.cost.toFixed(6)]})]})}),p&&(0,a.jsx)(r.Z,{title:"Tool used",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"mr-1"}),(0,a.jsxs)("span",{children:["Tool: ",p]})]})})]}):null}},33152:function(e,t,s){s.d(t,{J:function(){return d}});var a=s(57437),r=s(2265),l=s(5545),o=s(44625),n=s(70464),i=s(77565),c=s(38434);function d(e){let{searchResults:t}=e,[s,d]=(0,r.useState)(!0),[m,u]=(0,r.useState)({});if(!t||0===t.length)return null;let p=(e,t)=>{let s="".concat(e,"-").concat(t);u(e=>({...e,[s]:!e[s]}))},x=t.reduce((e,t)=>e+t.data.length,0);return(0,a.jsxs)("div",{className:"search-results-content mt-1 mb-2",children:[(0,a.jsxs)(l.ZP,{type:"text",className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:()=>d(!s),icon:(0,a.jsx)(o.Z,{}),children:[s?"Hide sources":"Show sources (".concat(x,")"),s?(0,a.jsx)(n.Z,{className:"ml-1"}):(0,a.jsx)(i.Z,{className:"ml-1"})]}),s&&(0,a.jsx)("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md text-sm",children:(0,a.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-xs text-gray-600 mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Query:"}),(0,a.jsxs)("span",{className:"italic",children:['"',e.search_query,'"']}),(0,a.jsx)("span",{className:"text-gray-400",children:"•"}),(0,a.jsxs)("span",{className:"text-gray-500",children:[e.data.length," result",1!==e.data.length?"s":""]})]}),(0,a.jsx)("div",{className:"space-y-2",children:e.data.map((e,s)=>{let r=m["".concat(t,"-").concat(s)]||!1;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-md overflow-hidden bg-white",children:[(0,a.jsx)("div",{className:"flex items-center justify-between p-2 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>p(t,s),children:(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform flex-shrink-0 ".concat(r?"transform rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,a.jsx)(c.Z,{className:"text-gray-400 flex-shrink-0",style:{fontSize:"12px"}}),(0,a.jsx)("span",{className:"text-xs font-medium text-gray-700 truncate",children:e.filename||e.file_id||"Result ".concat(s+1)}),(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-700 font-mono flex-shrink-0",children:e.score.toFixed(3)})]})}),r&&(0,a.jsx)("div",{className:"border-t border-gray-200 bg-white",children:(0,a.jsxs)("div",{className:"p-3 space-y-2",children:[e.content.map((e,t)=>(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-xs font-mono bg-gray-50 p-2 rounded text-gray-800 whitespace-pre-wrap break-words",children:e.text})},t)),e.attributes&&Object.keys(e.attributes).length>0&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1 font-medium",children:"Metadata:"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.entries(e.attributes).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"text-xs flex gap-2",children:[(0,a.jsxs)("span",{className:"text-gray-500 font-medium",children:[t,":"]}),(0,a.jsx)("span",{className:"text-gray-700 font-mono break-all",children:String(s)})]},t)})})]})]})})]},s)})})]},t))})})]})}},26832:function(e,t,s){s.d(t,{O:function(){return o},m:function(){return n}});var a=s(93837),r=s(19250);let l=e=>{if(!e)return;let t={};if(e.id&&(t.taskId=e.id),e.contextId&&(t.contextId=e.contextId),e.status){var s;if(t.status={state:e.status.state,timestamp:e.status.timestamp},null===(s=e.status.message)||void 0===s?void 0:s.parts){let s=e.status.message.parts.filter(e=>"text"===e.kind&&e.text).map(e=>e.text).join(" ");s&&(t.status.message=s)}}return e.metadata&&"object"==typeof e.metadata&&(t.metadata=e.metadata),Object.keys(t).length>0?t:void 0},o=async(e,t,s,o,n,i,c,d,m,u)=>{let p=m||(0,r.getProxyBaseUrl)(),x=p?"".concat(p,"/a2a/").concat(e,"/message/send"):"/a2a/".concat(e,"/message/send"),g={jsonrpc:"2.0",id:(0,a.Z)(),method:"message/send",params:{message:{kind:"message",messageId:(0,a.Z)().replace(/-/g,""),role:"user",parts:[{kind:"text",text:t}]}}};u&&u.length>0&&(g.params.metadata={guardrails:u});let h=performance.now();try{var f,v,y;let t=await fetch(x,{method:"POST",headers:{[(0,r.getGlobalLitellmHeaderName)()]:"Bearer ".concat(o),"Content-Type":"application/json"},body:JSON.stringify(g),signal:n}),a=performance.now()-h;if(i&&i(a),!t.ok){let e=await t.json();throw Error((null===(f=e.error)||void 0===f?void 0:f.message)||e.detail||"HTTP ".concat(t.status))}let m=await t.json(),u=performance.now()-h;if(c&&c(u),m.error)throw Error(m.error.message);let p=m.result;if(p){let t="",a=l(p);if(a&&d&&d(a),p.artifacts&&Array.isArray(p.artifacts)){for(let e of p.artifacts)if(e.parts&&Array.isArray(e.parts))for(let s of e.parts)"text"===s.kind&&s.text&&(t+=s.text)}else if(p.parts&&Array.isArray(p.parts))for(let e of p.parts)"text"===e.kind&&e.text&&(t+=e.text);else if(null===(y=p.status)||void 0===y?void 0:null===(v=y.message)||void 0===v?void 0:v.parts)for(let e of p.status.message.parts)"text"===e.kind&&e.text&&(t+=e.text);t?s(t,"a2a_agent/".concat(e)):(console.warn("Could not extract text from A2A response, showing raw JSON:",p),s(JSON.stringify(p,null,2),"a2a_agent/".concat(e)))}}catch(e){if(null==n?void 0:n.aborted){console.log("A2A request was cancelled");return}throw console.error("A2A send message error:",e),e}},n=async(e,t,s,o,n,i,c,d,m)=>{let u;let p=m||(0,r.getProxyBaseUrl)(),x=p?"".concat(p,"/a2a/").concat(e):"/a2a/".concat(e),g=(0,a.Z)(),h=(0,a.Z)().replace(/-/g,""),f=performance.now(),v=!1,y="";try{var b,j;let a=await fetch(x,{method:"POST",headers:{[(0,r.getGlobalLitellmHeaderName)()]:"Bearer ".concat(o),"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:g,method:"message/stream",params:{message:{kind:"message",messageId:h,role:"user",parts:[{kind:"text",text:t}]}}}),signal:n});if(!a.ok){let e=await a.json();throw Error((null===(j=e.error)||void 0===j?void 0:j.message)||e.detail||"HTTP ".concat(a.status))}let m=null===(b=a.body)||void 0===b?void 0:b.getReader();if(!m)throw Error("No response body");let p=new TextDecoder,N="",w=!1;for(;!w;){let t=await m.read();w=t.done;let a=t.value;if(w)break;let r=(N+=p.decode(a,{stream:!0})).split("\n");for(let t of(N=r.pop()||"",r))if(t.trim())try{let a=JSON.parse(t);if(!v){v=!0;let e=performance.now()-f;i&&i(e)}let r=a.result;if(r){let t=l(r);t&&(u={...u,...t});let a=r.kind;if("artifact-update"===a&&r.artifact){let t=r.artifact;if(t.parts&&Array.isArray(t.parts))for(let a of t.parts)"text"===a.kind&&a.text&&(y+=a.text,s(y,"a2a_agent/".concat(e)))}else if(r.artifacts&&Array.isArray(r.artifacts)){for(let t of r.artifacts)if(t.parts&&Array.isArray(t.parts))for(let a of t.parts)"text"===a.kind&&a.text&&(y+=a.text,s(y,"a2a_agent/".concat(e)))}else if("status-update"===a);else if(r.parts&&Array.isArray(r.parts))for(let t of r.parts)"text"===t.kind&&t.text&&(y+=t.text,s(y,"a2a_agent/".concat(e)))}if(a.error){let e=a.error.message||"Unknown A2A error";throw Error(e)}}catch(e){if(e instanceof Error&&e.message&&!e.message.includes("JSON"))throw e;t.trim().length>0&&console.warn("Failed to parse A2A streaming chunk:",t,e)}}let S=performance.now()-f;c&&c(S),u&&d&&d(u)}catch(e){if(null==n?void 0:n.aborted){console.log("A2A streaming request was cancelled");return}throw console.error("A2A stream message error:",e),e}}},95459:function(e,t,s){s.d(t,{n:function(){return l}});var a=s(7271),r=s(19250);async function l(e,t,s,l,o,n,i,c,d,m,u,p,x,g,h,f,v,y,b,j,N,w,S){console.log=function(){},console.log("isLocal:",!1);let _=j||(0,r.getProxyBaseUrl)(),P={};o&&o.length>0&&(P["x-litellm-tags"]=o.join(","));let C=new a.ZP.OpenAI({apiKey:l,baseURL:_,dangerouslyAllowBrowser:!0,defaultHeaders:P});try{let a;let r=Date.now(),l=!1,o={},j=!1,_=[];for await(let b of(g&&g.length>0&&(g.includes("__all__")?_.push({type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp",require_approval:"never"}):g.forEach(e=>{let t=null==N?void 0:N.find(t=>t.server_id===e),s=(null==t?void 0:t.alias)||(null==t?void 0:t.server_name)||e,a=(null==w?void 0:w[e])||[];_.push({type:"mcp",server_label:"litellm",server_url:"litellm_proxy/mcp/".concat(s),require_approval:"never",...a.length>0?{allowed_tools:a}:{}})})),await C.chat.completions.create({model:s,stream:!0,stream_options:{include_usage:!0},litellm_trace_id:m,messages:e,...u?{vector_store_ids:u}:{},...p?{guardrails:p}:{},...x?{policies:x}:{},..._.length>0?{tools:_,tool_choice:"auto"}:{},...void 0!==v?{temperature:v}:{},...void 0!==y?{max_tokens:y}:{}},{signal:n}))){var k,A,E,I,Z,T,L,M,O;console.log("Stream chunk:",b);let e=null===(k=b.choices[0])||void 0===k?void 0:k.delta;if(console.log("Delta content:",null===(E=b.choices[0])||void 0===E?void 0:null===(A=E.delta)||void 0===A?void 0:A.content),console.log("Delta reasoning content:",null==e?void 0:e.reasoning_content),!l&&((null===(Z=b.choices[0])||void 0===Z?void 0:null===(I=Z.delta)||void 0===I?void 0:I.content)||e&&e.reasoning_content)&&(l=!0,a=Date.now()-r,console.log("First token received! Time:",a,"ms"),c?(console.log("Calling onTimingData with:",a),c(a)):console.log("onTimingData callback is not defined!")),null===(L=b.choices[0])||void 0===L?void 0:null===(T=L.delta)||void 0===T?void 0:T.content){let e=b.choices[0].delta.content;t(e,b.model)}if(e&&e.image&&h&&(console.log("Image generated:",e.image),h(e.image.url,b.model)),e&&e.reasoning_content){let t=e.reasoning_content;i&&i(t)}if(e&&(null===(M=e.provider_specific_fields)||void 0===M?void 0:M.search_results)&&f&&(console.log("Search results found:",e.provider_specific_fields.search_results),f(e.provider_specific_fields.search_results)),e&&e.provider_specific_fields){let t=e.provider_specific_fields;if(t.mcp_list_tools&&!o.mcp_list_tools&&(o.mcp_list_tools=t.mcp_list_tools,S&&!j)){j=!0;let e={type:"response.output_item.done",item_id:"mcp_list_tools",item:{type:"mcp_list_tools",tools:t.mcp_list_tools.map(e=>{var t,s,a;return{name:(null===(t=e.function)||void 0===t?void 0:t.name)||e.name||"",description:(null===(s=e.function)||void 0===s?void 0:s.description)||e.description||"",input_schema:(null===(a=e.function)||void 0===a?void 0:a.parameters)||e.input_schema||{}}})},timestamp:Date.now()};S(e),console.log("MCP list_tools event sent:",e)}t.mcp_tool_calls&&(o.mcp_tool_calls=t.mcp_tool_calls),t.mcp_call_results&&(o.mcp_call_results=t.mcp_call_results),(t.mcp_list_tools||t.mcp_tool_calls||t.mcp_call_results)&&console.log("MCP metadata found in chunk:",{mcp_list_tools:t.mcp_list_tools?"present":"absent",mcp_tool_calls:t.mcp_tool_calls?"present":"absent",mcp_call_results:t.mcp_call_results?"present":"absent"})}if(b.usage&&d){console.log("Usage data found:",b.usage);let e={completionTokens:b.usage.completion_tokens,promptTokens:b.usage.prompt_tokens,totalTokens:b.usage.total_tokens};(null===(O=b.usage.completion_tokens_details)||void 0===O?void 0:O.reasoning_tokens)&&(e.reasoningTokens=b.usage.completion_tokens_details.reasoning_tokens),void 0!==b.usage.cost&&null!==b.usage.cost&&(e.cost=parseFloat(b.usage.cost)),d(e)}}S&&(o.mcp_tool_calls||o.mcp_call_results)&&o.mcp_tool_calls&&o.mcp_tool_calls.length>0&&o.mcp_tool_calls.forEach((e,t)=>{var s,a,r,l;let n=(null===(s=e.function)||void 0===s?void 0:s.name)||e.name||"",i=(null===(a=e.function)||void 0===a?void 0:a.arguments)||e.arguments||"{}",c=(null===(r=o.mcp_call_results)||void 0===r?void 0:r.find(t=>t.tool_call_id===e.id||t.tool_call_id===e.call_id))||(null===(l=o.mcp_call_results)||void 0===l?void 0:l[t]),d={type:"response.output_item.done",item:{type:"mcp_call",name:n,arguments:"string"==typeof i?i:JSON.stringify(i),output:(null==c?void 0:c.result)?"string"==typeof c.result?c.result:JSON.stringify(c.result):void 0},item_id:e.id||e.call_id,timestamp:Date.now()};S(d),console.log("MCP call event sent:",d)});let P=Date.now();b&&b(P-r)}catch(e){throw(null==n?void 0:n.aborted)&&console.log("Chat completion request was cancelled"),e}}},91643:function(e,t,s){s.d(t,{o:function(){return r}});var a=s(19250);let r=async(e,t)=>{try{let s=t||(0,a.getProxyBaseUrl)(),r=await fetch(s?"".concat(s,"/v1/agents"):"/v1/agents",{method:"GET",headers:{[(0,a.getGlobalLitellmHeaderName)()]:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!r.ok){let e=await r.json();throw Error(e.detail||"Failed to fetch agents")}let l=await r.json();return console.log("Fetched agents:",l),l.sort((e,t)=>{let s=e.agent_name||e.agent_id,a=t.agent_name||t.agent_id;return s.localeCompare(a)}),l}catch(e){throw console.error("Error fetching agents:",e),e}}},99020:function(e,t,s){var a=s(57437),r=s(2265),l=s(37592),o=s(19250);t.Z=e=>{let{onChange:t,value:s,className:n,accessToken:i}=e,[c,d]=(0,r.useState)([]),[m,u]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{if(i)try{let e=await (0,o.tagListCall)(i);console.log("List tags response:",e),d(Object.values(e))}catch(e){console.error("Error fetching tags:",e)}finally{u(!1)}})()},[i]),(0,a.jsx)(l.default,{mode:"tags",showSearch:!0,placeholder:"Select or create tags",onChange:t,value:s,loading:m,className:n,options:c.map(e=>({label:e.name,value:e.name,title:e.description||e.name})),optionFilterProp:"label",tokenSeparators:[","],maxTagCount:"responsive",allowClear:!0,style:{width:"100%"}})}}}]);