# Emirates (airline) industry-specific competitor intent guardrail
#
# This is an example of building on the generic competitor intent blocker with
# industry-specific inputs: domain_words, route_geo_cues, descriptor_lexicon,
# and competitor_aliases for aviation.
#
# Use this guardrail in your proxy config under guardrails.litellm_params, or
# merge competitor_intent_config into an existing litellm_content_filter guardrail.
#
# Minimal required (generic): brand_self, competitors
# Industry layer (airline): domain_words, route_geo_cues, descriptor_lexicon,
#   competitor_aliases (IATA/descriptive), optional indirect_competitor_patterns

guardrail_name: "emirates-competitor-intent"
guardrail_id: "emirates-competitor-intent"
litellm_params:
  guardrail: litellm_content_filter
  mode: pre_call
  default_on: false

  # Generic inputs (customer provides)
  competitor_intent_config:
    # Your brand (Emirates) and how users refer to it
    brand_self:
      - emirates
      - ek

    # Direct competitors (canonical names; use competitor_aliases for codes/typos)
    competitors:
      - qatar airways
      - qatar
      - etihad
      - turkish airlines
      - singapore airlines
      - british airways

    # Geo entities: countries, cities, airports (for other-meaning vs airline disambiguation)
    locations:
      - qatar
      - doha
      - doh
      - hamad international
      - lusail

    # Industry: airline domain words (trigger category_ranking / gate)
    domain_words:
      - airline
      - airlines
      - carrier
      - flight
      - flights
      - business class
      - first class
      - lounge
      - lounges
      - premium cabin
      - long haul

    # Industry: route/geo cues (Gulf, hubs)
    route_geo_cues:
      - doha
      - dubai
      - abu dhabi
      - gulf
      - middle east

    # Indirect references (descriptor lexicon)
    descriptor_lexicon:
      - doha airline
      - oryx airline
      - gulf carrier
      - five star airline
      - skytrax

    # Per-competitor aliases (IATA codes, nicknames)
    competitor_aliases:
      qatar airways:
        - qr
        - doha airline
      qatar:
        - qr
      etihad:
        - ey
        - abu dhabi airline
      emirates:
        - ek
        - dubai airline

    # Optional: regex patterns for indirect competitor mention (on normalized text)
    # indirect_competitor_patterns:
    #   qatar airways:
    #     - "the doha airline"
    #     - "doha carrier"
    #   etihad:
    #     - "abu dhabi carrier"

    # Policy: what to do per intent band
    policy:
      competitor_comparison: refuse
      possible_competitor_comparison: reframe
      category_ranking: reframe
      log_only: log_only

    threshold_high: 0.70
    threshold_medium: 0.45
    threshold_low: 0.30

    # Optional: custom messages
    reframe_message_template: >
      I'm here to help with Emirates services, bookings, and travel information.
      Would you like to know about our routes, cabin classes, or loyalty program?
    refuse_message_template: "We can't compare Emirates with other airlines. How can I help with Emirates travel?"

# --- How to use in config.yaml ---
#
# guardrails:
#   - guardrail_name: "emirates-competitor-intent"
#     litellm_params:
#       guardrail: litellm_content_filter
#       mode: pre_call
#       competitor_intent_config:
#         brand_self: [emirates, ek]
#         competitors: [qatar airways, etihad, ...]
#         domain_words: [airline, carrier, flight, ...]
#         route_geo_cues: [doha, dubai, abu dhabi]
#         descriptor_lexicon: [doha airline, gulf carrier, ...]
#         competitor_aliases:
#           qatar airways: [qr, doha airline]
#           etihad: [ey]
#         policy:
#           competitor_comparison: refuse
#           possible_competitor_comparison: reframe
#           category_ranking: reframe
#           log_only: log_only
