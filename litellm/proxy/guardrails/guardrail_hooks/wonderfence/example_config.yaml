# Example LiteLLM Proxy configuration with Alice WonderFence guardrail
#
# Start the proxy with:
#   litellm --config proxy_config_wonderfence.yaml
#
# Make sure to set the following environment variables:
#   export WONDERFENCE_API_KEY="your-wonderfence-api-key"
#   export OPENAI_API_KEY="your-openai-api-key"

model_list:
  - model_name: gpt-4
    litellm_params:
      model: gpt-4
      api_key: os.environ/OPENAI_API_KEY

# WonderFence guardrail configuration
guardrails:
  # Pre-call guardrail: Evaluate user prompts before sending to LLM
  - guardrail_name: "wonderfence-input-guard"
    litellm_params:
      guardrail: wonderfence
      mode: "pre_call"
      api_key: os.environ/WONDERFENCE_API_KEY
      app_name: "my-litellm-app"
      default_on: true
      api_timeout: 30.0

  # Post-call guardrail: Evaluate LLM responses before returning to user
  - guardrail_name: "wonderfence-output-guard"
    litellm_params:
      guardrail: wonderfence
      mode: "post_call"
      api_key: os.environ/WONDERFENCE_API_KEY
      app_name: "my-litellm-app"
      default_on: true
      api_timeout: 30.0

  # Combined pre and post-call guardrail
  - guardrail_name: "wonderfence-full-guard"
    litellm_params:
      guardrail: wonderfence
      mode: ["pre_call", "post_call"]
      api_key: os.environ/WONDERFENCE_API_KEY
      app_name: "my-litellm-app"
      default_on: false  # Enable per-request only
      api_timeout: 30.0

# Example usage with curl:
#
# 1. With default guardrails (wonderfence-input-guard and wonderfence-output-guard are enabled by default):
#
#    curl -X POST http://localhost:4000/chat/completions \
#      -H "Authorization: Bearer sk-xxx" \
#      -H "Content-Type: application/json" \
#      -d '{
#        "model": "gpt-4",
#        "messages": [{"role": "user", "content": "Hello, how are you?"}]
#      }'
#
# 2. With per-request guardrail selection and metadata:
#
#    curl -X POST http://localhost:4000/chat/completions \
#      -H "Authorization: Bearer sk-xxx" \
#      -H "Content-Type: application/json" \
#      -d '{
#        "model": "gpt-4",
#        "messages": [{"role": "user", "content": "Hello"}],
#        "guardrails": ["wonderfence-full-guard"],
#        "metadata": {
#          "session_id": "session-123",
#          "user_id": "user-456"
#        }
#      }'
#
# 3. Disable global guardrails for a specific request:
#
#    curl -X POST http://localhost:4000/chat/completions \
#      -H "Authorization: Bearer sk-xxx" \
#      -H "Content-Type: application/json" \
#      -d '{
#        "model": "gpt-4",
#        "messages": [{"role": "user", "content": "Hello"}],
#        "disable_global_guardrail": true
#      }'
