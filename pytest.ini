[pytest]
asyncio_mode = auto
addopts = -ra --tb=short --durations=25
console_output_style = progress


markers =
    smoke: stable, hermetic smokes (no live infra)
    ndsmoke: live/infra smokes that require DOCKER_MINI_AGENT=1 and reachable services
    chutes: tests targeting the Chutes provider or API
    mini_agent: tests targeting the experimental MCP mini-agent
    asyncio: asyncio tests
    e2e: true end-to-end tests hitting live services
    shard_b: heavy ND/E2E subset (run separately or with -k shard_b)
    timeout: per-test timeout marker
    live: exercises real providers (opt-in via LIVE_PROVIDERS=1)
    release: QuickStart/README flows

# Optional: quiet common async warnings without hiding real failures
filterwarnings =
    ignore:There is no current event loop:DeprecationWarning:pytest_asyncio.plugin
    ignore:pytest-asyncio detected an unclosed event loop:DeprecationWarning:pytest_asyncio.plugin

faulthandler_timeout = 60
